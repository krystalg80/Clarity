function Gx(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function N2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var C2={exports:{}},Hd={},R2={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ol=Symbol.for("react.element"),Hx=Symbol.for("react.portal"),Kx=Symbol.for("react.fragment"),Qx=Symbol.for("react.strict_mode"),Yx=Symbol.for("react.profiler"),Xx=Symbol.for("react.provider"),Jx=Symbol.for("react.context"),Zx=Symbol.for("react.forward_ref"),eb=Symbol.for("react.suspense"),tb=Symbol.for("react.memo"),nb=Symbol.for("react.lazy"),iv=Symbol.iterator;function sb(t){return t===null||typeof t!="object"?null:(t=iv&&t[iv]||t["@@iterator"],typeof t=="function"?t:null)}var D2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j2=Object.assign,O2={};function ia(t,e,n){this.props=t,this.context=e,this.refs=O2,this.updater=n||D2}ia.prototype.isReactComponent={};ia.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ia.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V2(){}V2.prototype=ia.prototype;function Ap(t,e,n){this.props=t,this.context=e,this.refs=O2,this.updater=n||D2}var Pp=Ap.prototype=new V2;Pp.constructor=Ap;j2(Pp,ia.prototype);Pp.isPureReactComponent=!0;var ov=Array.isArray,M2=Object.prototype.hasOwnProperty,Np={current:null},L2={key:!0,ref:!0,__self:!0,__source:!0};function F2(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)M2.call(e,s)&&!L2.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:ol,type:t,key:i,ref:o,props:r,_owner:Np.current}}function rb(t,e){return{$$typeof:ol,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ol}function ib(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var av=/\/+/g;function tf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ib(""+t.key):e.toString(36)}function vu(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ol:case Hx:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+tf(o,0):s,ov(r)?(n="",t!=null&&(n=t.replace(av,"$&/")+"/"),vu(r,e,n,"",function(d){return d})):r!=null&&(Cp(r)&&(r=rb(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(av,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",ov(t))for(var a=0;a<t.length;a++){i=t[a];var c=s+tf(i,a);o+=vu(i,e,n,c,r)}else if(c=sb(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=s+tf(i,a++),o+=vu(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $l(t,e,n){if(t==null)return t;var s=[],r=0;return vu(t,s,"","",function(i){return e.call(n,i,r++)}),s}function ob(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},_u={transition:null},ab={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:_u,ReactCurrentOwner:Np};function z2(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:$l,forEach:function(t,e,n){$l(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $l(t,function(){e++}),e},toArray:function(t){return $l(t,function(e){return e})||[]},only:function(t){if(!Cp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=ia;ye.Fragment=Kx;ye.Profiler=Yx;ye.PureComponent=Ap;ye.StrictMode=Qx;ye.Suspense=eb;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ab;ye.act=z2;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=j2({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Np.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)M2.call(e,c)&&!L2.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];s.children=a}return{$$typeof:ol,type:t.type,key:r,ref:i,props:s,_owner:o}};ye.createContext=function(t){return t={$$typeof:Jx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Xx,_context:t},t.Consumer=t};ye.createElement=F2;ye.createFactory=function(t){var e=F2.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:Zx,render:t}};ye.isValidElement=Cp;ye.lazy=function(t){return{$$typeof:nb,_payload:{_status:-1,_result:t},_init:ob}};ye.memo=function(t,e){return{$$typeof:tb,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=_u.transition;_u.transition={};try{t()}finally{_u.transition=e}};ye.unstable_act=z2;ye.useCallback=function(t,e){return Ut.current.useCallback(t,e)};ye.useContext=function(t){return Ut.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Ut.current.useEffect(t,e)};ye.useId=function(){return Ut.current.useId()};ye.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Ut.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};ye.useRef=function(t){return Ut.current.useRef(t)};ye.useState=function(t){return Ut.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return Ut.current.useTransition()};ye.version="18.3.1";R2.exports=ye;var P=R2.exports;const _s=N2(P),cb=Gx({__proto__:null,default:_s},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb=P,ub=Symbol.for("react.element"),db=Symbol.for("react.fragment"),hb=Object.prototype.hasOwnProperty,fb=lb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mb={key:!0,ref:!0,__self:!0,__source:!0};function U2(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)hb.call(e,s)&&!mb.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:ub,type:t,key:i,ref:o,props:r,_owner:fb.current}}Hd.Fragment=db;Hd.jsx=U2;Hd.jsxs=U2;C2.exports=Hd;var u=C2.exports,Wf={},B2={exports:{}},dn={},$2={exports:{}},q2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,te){var re=G.length;G.push(te);e:for(;0<re;){var Te=re-1>>>1,ce=G[Te];if(0<r(ce,te))G[Te]=te,G[re]=ce,re=Te;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var te=G[0],re=G.pop();if(re!==te){G[0]=re;e:for(var Te=0,ce=G.length,ke=ce>>>1;Te<ke;){var $t=2*(Te+1)-1,Jt=G[$t],Ze=$t+1,qt=G[Ze];if(0>r(Jt,re))Ze<ce&&0>r(qt,Jt)?(G[Te]=qt,G[Ze]=re,Te=Ze):(G[Te]=Jt,G[$t]=re,Te=$t);else if(Ze<ce&&0>r(qt,re))G[Te]=qt,G[Ze]=re,Te=Ze;else break e}}return te}function r(G,te){var re=G.sortIndex-te.sortIndex;return re!==0?re:G.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],f=1,m=null,g=3,T=!1,S=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(G){for(var te=n(d);te!==null;){if(te.callback===null)s(d);else if(te.startTime<=G)s(d),te.sortIndex=te.expirationTime,e(c,te);else break;te=n(d)}}function D(G){if(A=!1,x(G),!S)if(n(c)!==null)S=!0,$(L);else{var te=n(d);te!==null&&le(D,te.startTime-G)}}function L(G,te){S=!1,A&&(A=!1,b(y),y=-1),T=!0;var re=g;try{for(x(te),m=n(c);m!==null&&(!(m.expirationTime>te)||G&&!N());){var Te=m.callback;if(typeof Te=="function"){m.callback=null,g=m.priorityLevel;var ce=Te(m.expirationTime<=te);te=t.unstable_now(),typeof ce=="function"?m.callback=ce:m===n(c)&&s(c),x(te)}else s(c);m=n(c)}if(m!==null)var ke=!0;else{var $t=n(d);$t!==null&&le(D,$t.startTime-te),ke=!1}return ke}finally{m=null,g=re,T=!1}}var M=!1,w=null,y=-1,I=5,E=-1;function N(){return!(t.unstable_now()-E<I)}function R(){if(w!==null){var G=t.unstable_now();E=G;var te=!0;try{te=w(!0,G)}finally{te?k():(M=!1,w=null)}}else M=!1}var k;if(typeof v=="function")k=function(){v(R)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,X=oe.port2;oe.port1.onmessage=R,k=function(){X.postMessage(null)}}else k=function(){C(R,0)};function $(G){w=G,M||(M=!0,k())}function le(G,te){y=C(function(){G(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){S||T||(S=!0,$(L))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var re=g;g=te;try{return G()}finally{g=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,te){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var re=g;g=G;try{return te()}finally{g=re}},t.unstable_scheduleCallback=function(G,te,re){var Te=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Te+re:Te):re=Te,G){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=re+ce,G={id:f++,callback:te,priorityLevel:G,startTime:re,expirationTime:ce,sortIndex:-1},re>Te?(G.sortIndex=re,e(d,G),n(c)===null&&G===n(d)&&(A?(b(y),y=-1):A=!0,le(D,re-Te))):(G.sortIndex=ce,e(c,G),S||T||(S=!0,$(L))),G},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(G){var te=g;return function(){var re=g;g=te;try{return G.apply(this,arguments)}finally{g=re}}}})(q2);$2.exports=q2;var pb=$2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gb=P,ln=pb;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var W2=new Set,Ic={};function Vi(t,e){Mo(t,e),Mo(t+"Capture",e)}function Mo(t,e){for(Ic[t]=e,t=0;t<e.length;t++)W2.add(e[t])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gf=Object.prototype.hasOwnProperty,yb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cv={},lv={};function vb(t){return Gf.call(lv,t)?!0:Gf.call(cv,t)?!1:yb.test(t)?lv[t]=!0:(cv[t]=!0,!1)}function _b(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wb(t,e,n,s){if(e===null||typeof e>"u"||_b(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new Bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new Bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new Bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new Bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new Bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new Bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new Bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new Bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new Bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rp=/[\-:]([a-z])/g;function Dp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rp,Dp);Et[e]=new Bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rp,Dp);Et[e]=new Bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rp,Dp);Et[e]=new Bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new Bt(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new Bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function jp(t,e,n,s){var r=Et.hasOwnProperty(e)?Et[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wb(e,n,r,s)&&(n=null),s||r===null?vb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Ns=gb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ql=Symbol.for("react.element"),mo=Symbol.for("react.portal"),po=Symbol.for("react.fragment"),Op=Symbol.for("react.strict_mode"),Hf=Symbol.for("react.profiler"),G2=Symbol.for("react.provider"),H2=Symbol.for("react.context"),Vp=Symbol.for("react.forward_ref"),Kf=Symbol.for("react.suspense"),Qf=Symbol.for("react.suspense_list"),Mp=Symbol.for("react.memo"),Ys=Symbol.for("react.lazy"),K2=Symbol.for("react.offscreen"),uv=Symbol.iterator;function Da(t){return t===null||typeof t!="object"?null:(t=uv&&t[uv]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,nf;function Ha(t){if(nf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nf=e&&e[1]||""}return`
`+nf+t}var sf=!1;function rf(t,e){if(!t||sf)return"";sf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{sf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ha(t):""}function Eb(t){switch(t.tag){case 5:return Ha(t.type);case 16:return Ha("Lazy");case 13:return Ha("Suspense");case 19:return Ha("SuspenseList");case 0:case 2:case 15:return t=rf(t.type,!1),t;case 11:return t=rf(t.type.render,!1),t;case 1:return t=rf(t.type,!0),t;default:return""}}function Yf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case po:return"Fragment";case mo:return"Portal";case Hf:return"Profiler";case Op:return"StrictMode";case Kf:return"Suspense";case Qf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case H2:return(t.displayName||"Context")+".Consumer";case G2:return(t._context.displayName||"Context")+".Provider";case Vp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mp:return e=t.displayName||null,e!==null?e:Yf(t.type)||"Memo";case Ys:e=t._payload,t=t._init;try{return Yf(t(e))}catch{}}return null}function Tb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yf(e);case 8:return e===Op?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Q2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ib(t){var e=Q2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wl(t){t._valueTracker||(t._valueTracker=Ib(t))}function Y2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Q2(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Gu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xf(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dv(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=br(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function X2(t,e){e=e.checked,e!=null&&jp(t,"checked",e,!1)}function Jf(t,e){X2(t,e);var n=br(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zf(t,e.type,br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zf(t,e,n){(e!=="number"||Gu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ka=Array.isArray;function ko(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+br(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function em(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Ka(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:br(n)}}function J2(t,e){var n=br(e.value),s=br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function mv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Z2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Z2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,e0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xb=["Webkit","ms","Moz","O"];Object.keys(rc).forEach(function(t){xb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rc[e]=rc[t]})});function t0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rc.hasOwnProperty(t)&&rc[t]?(""+e).trim():e+"px"}function n0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=t0(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var bb=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nm(t,e){if(e){if(bb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function sm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rm=null;function Lp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var im=null,Ao=null,Po=null;function pv(t){if(t=ll(t)){if(typeof im!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Jd(e),im(t.stateNode,t.type,e))}}function s0(t){Ao?Po?Po.push(t):Po=[t]:Ao=t}function r0(){if(Ao){var t=Ao,e=Po;if(Po=Ao=null,pv(t),e)for(t=0;t<e.length;t++)pv(e[t])}}function i0(t,e){return t(e)}function o0(){}var of=!1;function a0(t,e,n){if(of)return t(e,n);of=!0;try{return i0(t,e,n)}finally{of=!1,(Ao!==null||Po!==null)&&(o0(),r0())}}function bc(t,e){var n=t.stateNode;if(n===null)return null;var s=Jd(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var om=!1;if(Ts)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){om=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{om=!1}function Sb(t,e,n,s,r,i,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ic=!1,Hu=null,Ku=!1,am=null,kb={onError:function(t){ic=!0,Hu=t}};function Ab(t,e,n,s,r,i,o,a,c){ic=!1,Hu=null,Sb.apply(kb,arguments)}function Pb(t,e,n,s,r,i,o,a,c){if(Ab.apply(this,arguments),ic){if(ic){var d=Hu;ic=!1,Hu=null}else throw Error(W(198));Ku||(Ku=!0,am=d)}}function Mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function c0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gv(t){if(Mi(t)!==t)throw Error(W(188))}function Nb(t){var e=t.alternate;if(!e){if(e=Mi(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return gv(r),t;if(i===s)return gv(r),e;i=i.sibling}throw Error(W(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==s)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function l0(t){return t=Nb(t),t!==null?u0(t):null}function u0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=u0(t);if(e!==null)return e;t=t.sibling}return null}var d0=ln.unstable_scheduleCallback,yv=ln.unstable_cancelCallback,Cb=ln.unstable_shouldYield,Rb=ln.unstable_requestPaint,et=ln.unstable_now,Db=ln.unstable_getCurrentPriorityLevel,Fp=ln.unstable_ImmediatePriority,h0=ln.unstable_UserBlockingPriority,Qu=ln.unstable_NormalPriority,jb=ln.unstable_LowPriority,f0=ln.unstable_IdlePriority,Kd=null,Yn=null;function Ob(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Kd,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:Lb,Vb=Math.log,Mb=Math.LN2;function Lb(t){return t>>>=0,t===0?32:31-(Vb(t)/Mb|0)|0}var Hl=64,Kl=4194304;function Qa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yu(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=Qa(a):(i&=o,i!==0&&(s=Qa(i)))}else o=n&~r,o!==0?s=Qa(o):i!==0&&(s=Qa(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Cn(e),r=1<<n,s|=t[n],e&=~r;return s}function Fb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zb(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Cn(i),a=1<<o,c=r[o];c===-1?(!(a&n)||a&s)&&(r[o]=Fb(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function cm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m0(){var t=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),t}function af(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function Ub(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Cn(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function zp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Cn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var Ne=0;function p0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g0,Up,y0,v0,_0,lm=!1,Ql=[],ur=null,dr=null,hr=null,Sc=new Map,kc=new Map,Js=[],Bb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vv(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kc.delete(e.pointerId)}}function Oa(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=ll(e),e!==null&&Up(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function $b(t,e,n,s,r){switch(e){case"focusin":return ur=Oa(ur,t,e,n,s,r),!0;case"dragenter":return dr=Oa(dr,t,e,n,s,r),!0;case"mouseover":return hr=Oa(hr,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Sc.set(i,Oa(Sc.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,kc.set(i,Oa(kc.get(i)||null,t,e,n,s,r)),!0}return!1}function w0(t){var e=ci(t.target);if(e!==null){var n=Mi(e);if(n!==null){if(e=n.tag,e===13){if(e=c0(n),e!==null){t.blockedOn=e,_0(t.priority,function(){y0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=um(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);rm=s,n.target.dispatchEvent(s),rm=null}else return e=ll(n),e!==null&&Up(e),t.blockedOn=n,!1;e.shift()}return!0}function _v(t,e,n){wu(t)&&n.delete(e)}function qb(){lm=!1,ur!==null&&wu(ur)&&(ur=null),dr!==null&&wu(dr)&&(dr=null),hr!==null&&wu(hr)&&(hr=null),Sc.forEach(_v),kc.forEach(_v)}function Va(t,e){t.blockedOn===e&&(t.blockedOn=null,lm||(lm=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,qb)))}function Ac(t){function e(r){return Va(r,t)}if(0<Ql.length){Va(Ql[0],t);for(var n=1;n<Ql.length;n++){var s=Ql[n];s.blockedOn===t&&(s.blockedOn=null)}}for(ur!==null&&Va(ur,t),dr!==null&&Va(dr,t),hr!==null&&Va(hr,t),Sc.forEach(e),kc.forEach(e),n=0;n<Js.length;n++)s=Js[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Js.length&&(n=Js[0],n.blockedOn===null);)w0(n),n.blockedOn===null&&Js.shift()}var No=Ns.ReactCurrentBatchConfig,Xu=!0;function Wb(t,e,n,s){var r=Ne,i=No.transition;No.transition=null;try{Ne=1,Bp(t,e,n,s)}finally{Ne=r,No.transition=i}}function Gb(t,e,n,s){var r=Ne,i=No.transition;No.transition=null;try{Ne=4,Bp(t,e,n,s)}finally{Ne=r,No.transition=i}}function Bp(t,e,n,s){if(Xu){var r=um(t,e,n,s);if(r===null)yf(t,e,s,Ju,n),vv(t,s);else if($b(r,t,e,n,s))s.stopPropagation();else if(vv(t,s),e&4&&-1<Bb.indexOf(t)){for(;r!==null;){var i=ll(r);if(i!==null&&g0(i),i=um(t,e,n,s),i===null&&yf(t,e,s,Ju,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else yf(t,e,s,null,n)}}var Ju=null;function um(t,e,n,s){if(Ju=null,t=Lp(s),t=ci(t),t!==null)if(e=Mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=c0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ju=t,null}function E0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Db()){case Fp:return 1;case h0:return 4;case Qu:case jb:return 16;case f0:return 536870912;default:return 16}default:return 16}}var or=null,$p=null,Eu=null;function T0(){if(Eu)return Eu;var t,e=$p,n=e.length,s,r="value"in or?or.value:or.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return Eu=r.slice(t,1<s?1-s:void 0)}function Tu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yl(){return!0}function wv(){return!1}function hn(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yl:wv,this.isPropagationStopped=wv,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yl)},persist:function(){},isPersistent:Yl}),e}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qp=hn(oa),cl=Ke({},oa,{view:0,detail:0}),Hb=hn(cl),cf,lf,Ma,Qd=Ke({},cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ma&&(Ma&&t.type==="mousemove"?(cf=t.screenX-Ma.screenX,lf=t.screenY-Ma.screenY):lf=cf=0,Ma=t),cf)},movementY:function(t){return"movementY"in t?t.movementY:lf}}),Ev=hn(Qd),Kb=Ke({},Qd,{dataTransfer:0}),Qb=hn(Kb),Yb=Ke({},cl,{relatedTarget:0}),uf=hn(Yb),Xb=Ke({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),Jb=hn(Xb),Zb=Ke({},oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),eS=hn(Zb),tS=Ke({},oa,{data:0}),Tv=hn(tS),nS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rS[t])?!!e[t]:!1}function Wp(){return iS}var oS=Ke({},cl,{key:function(t){if(t.key){var e=nS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wp,charCode:function(t){return t.type==="keypress"?Tu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),aS=hn(oS),cS=Ke({},Qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iv=hn(cS),lS=Ke({},cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wp}),uS=hn(lS),dS=Ke({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),hS=hn(dS),fS=Ke({},Qd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mS=hn(fS),pS=[9,13,27,32],Gp=Ts&&"CompositionEvent"in window,oc=null;Ts&&"documentMode"in document&&(oc=document.documentMode);var gS=Ts&&"TextEvent"in window&&!oc,I0=Ts&&(!Gp||oc&&8<oc&&11>=oc),xv=" ",bv=!1;function x0(t,e){switch(t){case"keyup":return pS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var go=!1;function yS(t,e){switch(t){case"compositionend":return b0(e);case"keypress":return e.which!==32?null:(bv=!0,xv);case"textInput":return t=e.data,t===xv&&bv?null:t;default:return null}}function vS(t,e){if(go)return t==="compositionend"||!Gp&&x0(t,e)?(t=T0(),Eu=$p=or=null,go=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return I0&&e.locale!=="ko"?null:e.data;default:return null}}var _S={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_S[t.type]:e==="textarea"}function S0(t,e,n,s){s0(s),e=Zu(e,"onChange"),0<e.length&&(n=new qp("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ac=null,Pc=null;function wS(t){M0(t,0)}function Yd(t){var e=_o(t);if(Y2(e))return t}function ES(t,e){if(t==="change")return e}var k0=!1;if(Ts){var df;if(Ts){var hf="oninput"in document;if(!hf){var kv=document.createElement("div");kv.setAttribute("oninput","return;"),hf=typeof kv.oninput=="function"}df=hf}else df=!1;k0=df&&(!document.documentMode||9<document.documentMode)}function Av(){ac&&(ac.detachEvent("onpropertychange",A0),Pc=ac=null)}function A0(t){if(t.propertyName==="value"&&Yd(Pc)){var e=[];S0(e,Pc,t,Lp(t)),a0(wS,e)}}function TS(t,e,n){t==="focusin"?(Av(),ac=e,Pc=n,ac.attachEvent("onpropertychange",A0)):t==="focusout"&&Av()}function IS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yd(Pc)}function xS(t,e){if(t==="click")return Yd(e)}function bS(t,e){if(t==="input"||t==="change")return Yd(e)}function SS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dn=typeof Object.is=="function"?Object.is:SS;function Nc(t,e){if(Dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Gf.call(e,r)||!Dn(t[r],e[r]))return!1}return!0}function Pv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nv(t,e){var n=Pv(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pv(n)}}function P0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?P0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N0(){for(var t=window,e=Gu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gu(t.document)}return e}function Hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kS(t){var e=N0(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&P0(n.ownerDocument.documentElement,n)){if(s!==null&&Hp(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=Nv(n,i);var o=Nv(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AS=Ts&&"documentMode"in document&&11>=document.documentMode,yo=null,dm=null,cc=null,hm=!1;function Cv(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hm||yo==null||yo!==Gu(s)||(s=yo,"selectionStart"in s&&Hp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),cc&&Nc(cc,s)||(cc=s,s=Zu(dm,"onSelect"),0<s.length&&(e=new qp("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=yo)))}function Xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vo={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},ff={},C0={};Ts&&(C0=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function Xd(t){if(ff[t])return ff[t];if(!vo[t])return t;var e=vo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in C0)return ff[t]=e[n];return t}var R0=Xd("animationend"),D0=Xd("animationiteration"),j0=Xd("animationstart"),O0=Xd("transitionend"),V0=new Map,Rv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){V0.set(t,e),Vi(e,[t])}for(var mf=0;mf<Rv.length;mf++){var pf=Rv[mf],PS=pf.toLowerCase(),NS=pf[0].toUpperCase()+pf.slice(1);Rr(PS,"on"+NS)}Rr(R0,"onAnimationEnd");Rr(D0,"onAnimationIteration");Rr(j0,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(O0,"onTransitionEnd");Mo("onMouseEnter",["mouseout","mouseover"]);Mo("onMouseLeave",["mouseout","mouseover"]);Mo("onPointerEnter",["pointerout","pointerover"]);Mo("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ya));function Dv(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,Pb(s,e,void 0,t),t.currentTarget=null}function M0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&r.isPropagationStopped())break e;Dv(r,a,d),i=c}else for(o=0;o<s.length;o++){if(a=s[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&r.isPropagationStopped())break e;Dv(r,a,d),i=c}}}if(Ku)throw t=am,Ku=!1,am=null,t}function Me(t,e){var n=e[ym];n===void 0&&(n=e[ym]=new Set);var s=t+"__bubble";n.has(s)||(L0(e,t,2,!1),n.add(s))}function gf(t,e,n){var s=0;e&&(s|=4),L0(n,t,s,e)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Cc(t){if(!t[Jl]){t[Jl]=!0,W2.forEach(function(n){n!=="selectionchange"&&(CS.has(n)||gf(n,!1,t),gf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jl]||(e[Jl]=!0,gf("selectionchange",!1,e))}}function L0(t,e,n,s){switch(E0(e)){case 1:var r=Wb;break;case 4:r=Gb;break;default:r=Bp}n=r.bind(null,e,n,t),r=void 0,!om||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function yf(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ci(a),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}a=a.parentNode}}s=s.return}a0(function(){var d=i,f=Lp(n),m=[];e:{var g=V0.get(t);if(g!==void 0){var T=qp,S=t;switch(t){case"keypress":if(Tu(n)===0)break e;case"keydown":case"keyup":T=aS;break;case"focusin":S="focus",T=uf;break;case"focusout":S="blur",T=uf;break;case"beforeblur":case"afterblur":T=uf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Ev;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Qb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=uS;break;case R0:case D0:case j0:T=Jb;break;case O0:T=hS;break;case"scroll":T=Hb;break;case"wheel":T=mS;break;case"copy":case"cut":case"paste":T=eS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Iv}var A=(e&4)!==0,C=!A&&t==="scroll",b=A?g!==null?g+"Capture":null:g;A=[];for(var v=d,x;v!==null;){x=v;var D=x.stateNode;if(x.tag===5&&D!==null&&(x=D,b!==null&&(D=bc(v,b),D!=null&&A.push(Rc(v,D,x)))),C)break;v=v.return}0<A.length&&(g=new T(g,S,null,n,f),m.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==rm&&(S=n.relatedTarget||n.fromElement)&&(ci(S)||S[Is]))break e;if((T||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,T?(S=n.relatedTarget||n.toElement,T=d,S=S?ci(S):null,S!==null&&(C=Mi(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(T=null,S=d),T!==S)){if(A=Ev,D="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=Iv,D="onPointerLeave",b="onPointerEnter",v="pointer"),C=T==null?g:_o(T),x=S==null?g:_o(S),g=new A(D,v+"leave",T,n,f),g.target=C,g.relatedTarget=x,D=null,ci(f)===d&&(A=new A(b,v+"enter",S,n,f),A.target=x,A.relatedTarget=C,D=A),C=D,T&&S)t:{for(A=T,b=S,v=0,x=A;x;x=eo(x))v++;for(x=0,D=b;D;D=eo(D))x++;for(;0<v-x;)A=eo(A),v--;for(;0<x-v;)b=eo(b),x--;for(;v--;){if(A===b||b!==null&&A===b.alternate)break t;A=eo(A),b=eo(b)}A=null}else A=null;T!==null&&jv(m,g,T,A,!1),S!==null&&C!==null&&jv(m,C,S,A,!0)}}e:{if(g=d?_o(d):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var L=ES;else if(Sv(g))if(k0)L=bS;else{L=IS;var M=TS}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=xS);if(L&&(L=L(t,d))){S0(m,L,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Zf(g,"number",g.value)}switch(M=d?_o(d):window,t){case"focusin":(Sv(M)||M.contentEditable==="true")&&(yo=M,dm=d,cc=null);break;case"focusout":cc=dm=yo=null;break;case"mousedown":hm=!0;break;case"contextmenu":case"mouseup":case"dragend":hm=!1,Cv(m,n,f);break;case"selectionchange":if(AS)break;case"keydown":case"keyup":Cv(m,n,f)}var w;if(Gp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else go?x0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(I0&&n.locale!=="ko"&&(go||y!=="onCompositionStart"?y==="onCompositionEnd"&&go&&(w=T0()):(or=f,$p="value"in or?or.value:or.textContent,go=!0)),M=Zu(d,y),0<M.length&&(y=new Tv(y,t,null,n,f),m.push({event:y,listeners:M}),w?y.data=w:(w=b0(n),w!==null&&(y.data=w)))),(w=gS?yS(t,n):vS(t,n))&&(d=Zu(d,"onBeforeInput"),0<d.length&&(f=new Tv("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=w))}M0(m,e)})}function Rc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zu(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=bc(t,n),i!=null&&s.unshift(Rc(t,i,r)),i=bc(t,e),i!=null&&s.push(Rc(t,i,r))),t=t.return}return s}function eo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jv(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===s)break;a.tag===5&&d!==null&&(a=d,r?(c=bc(n,i),c!=null&&o.unshift(Rc(n,c,a))):r||(c=bc(n,i),c!=null&&o.push(Rc(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var RS=/\r\n?/g,DS=/\u0000|\uFFFD/g;function Ov(t){return(typeof t=="string"?t:""+t).replace(RS,`
`).replace(DS,"")}function Zl(t,e,n){if(e=Ov(e),Ov(t)!==e&&n)throw Error(W(425))}function ed(){}var fm=null,mm=null;function pm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gm=typeof setTimeout=="function"?setTimeout:void 0,jS=typeof clearTimeout=="function"?clearTimeout:void 0,Vv=typeof Promise=="function"?Promise:void 0,OS=typeof queueMicrotask=="function"?queueMicrotask:typeof Vv<"u"?function(t){return Vv.resolve(null).then(t).catch(VS)}:gm;function VS(t){setTimeout(function(){throw t})}function vf(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Ac(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Ac(e)}function fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var aa=Math.random().toString(36).slice(2),qn="__reactFiber$"+aa,Dc="__reactProps$"+aa,Is="__reactContainer$"+aa,ym="__reactEvents$"+aa,MS="__reactListeners$"+aa,LS="__reactHandles$"+aa;function ci(t){var e=t[qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Is]||n[qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mv(t);t!==null;){if(n=t[qn])return n;t=Mv(t)}return e}t=n,n=t.parentNode}return null}function ll(t){return t=t[qn]||t[Is],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _o(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Jd(t){return t[Dc]||null}var vm=[],wo=-1;function Dr(t){return{current:t}}function Le(t){0>wo||(t.current=vm[wo],vm[wo]=null,wo--)}function Oe(t,e){wo++,vm[wo]=t.current,t.current=e}var Sr={},Dt=Dr(Sr),Qt=Dr(!1),_i=Sr;function Lo(t,e){var n=t.type.contextTypes;if(!n)return Sr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Yt(t){return t=t.childContextTypes,t!=null}function td(){Le(Qt),Le(Dt)}function Lv(t,e,n){if(Dt.current!==Sr)throw Error(W(168));Oe(Dt,e),Oe(Qt,n)}function F0(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(W(108,Tb(t)||"Unknown",r));return Ke({},n,s)}function nd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sr,_i=Dt.current,Oe(Dt,t),Oe(Qt,Qt.current),!0}function Fv(t,e,n){var s=t.stateNode;if(!s)throw Error(W(169));n?(t=F0(t,e,_i),s.__reactInternalMemoizedMergedChildContext=t,Le(Qt),Le(Dt),Oe(Dt,t)):Le(Qt),Oe(Qt,n)}var fs=null,Zd=!1,_f=!1;function z0(t){fs===null?fs=[t]:fs.push(t)}function FS(t){Zd=!0,z0(t)}function jr(){if(!_f&&fs!==null){_f=!0;var t=0,e=Ne;try{var n=fs;for(Ne=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}fs=null,Zd=!1}catch(r){throw fs!==null&&(fs=fs.slice(t+1)),d0(Fp,jr),r}finally{Ne=e,_f=!1}}return null}var Eo=[],To=0,sd=null,rd=0,mn=[],pn=0,wi=null,ms=1,ps="";function Zr(t,e){Eo[To++]=rd,Eo[To++]=sd,sd=t,rd=e}function U0(t,e,n){mn[pn++]=ms,mn[pn++]=ps,mn[pn++]=wi,wi=t;var s=ms;t=ps;var r=32-Cn(s)-1;s&=~(1<<r),n+=1;var i=32-Cn(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,ms=1<<32-Cn(e)+r|n<<r|s,ps=i+t}else ms=1<<i|n<<r|s,ps=t}function Kp(t){t.return!==null&&(Zr(t,1),U0(t,1,0))}function Qp(t){for(;t===sd;)sd=Eo[--To],Eo[To]=null,rd=Eo[--To],Eo[To]=null;for(;t===wi;)wi=mn[--pn],mn[pn]=null,ps=mn[--pn],mn[pn]=null,ms=mn[--pn],mn[pn]=null}var cn=null,on=null,ze=!1,Pn=null;function B0(t,e){var n=gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,on=fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wi!==null?{id:ms,overflow:ps}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,on=null,!0):!1;default:return!1}}function _m(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wm(t){if(ze){var e=on;if(e){var n=e;if(!zv(t,e)){if(_m(t))throw Error(W(418));e=fr(n.nextSibling);var s=cn;e&&zv(t,e)?B0(s,n):(t.flags=t.flags&-4097|2,ze=!1,cn=t)}}else{if(_m(t))throw Error(W(418));t.flags=t.flags&-4097|2,ze=!1,cn=t}}}function Uv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function eu(t){if(t!==cn)return!1;if(!ze)return Uv(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pm(t.type,t.memoizedProps)),e&&(e=on)){if(_m(t))throw $0(),Error(W(418));for(;e;)B0(t,e),e=fr(e.nextSibling)}if(Uv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=cn?fr(t.stateNode.nextSibling):null;return!0}function $0(){for(var t=on;t;)t=fr(t.nextSibling)}function Fo(){on=cn=null,ze=!1}function Yp(t){Pn===null?Pn=[t]:Pn.push(t)}var zS=Ns.ReactCurrentBatchConfig;function La(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var s=n.stateNode}if(!s)throw Error(W(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function tu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bv(t){var e=t._init;return e(t._payload)}function q0(t){function e(b,v){if(t){var x=b.deletions;x===null?(b.deletions=[v],b.flags|=16):x.push(v)}}function n(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function s(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function r(b,v){return b=yr(b,v),b.index=0,b.sibling=null,b}function i(b,v,x){return b.index=x,t?(x=b.alternate,x!==null?(x=x.index,x<v?(b.flags|=2,v):x):(b.flags|=2,v)):(b.flags|=1048576,v)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,v,x,D){return v===null||v.tag!==6?(v=Sf(x,b.mode,D),v.return=b,v):(v=r(v,x),v.return=b,v)}function c(b,v,x,D){var L=x.type;return L===po?f(b,v,x.props.children,D,x.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ys&&Bv(L)===v.type)?(D=r(v,x.props),D.ref=La(b,v,x),D.return=b,D):(D=Pu(x.type,x.key,x.props,null,b.mode,D),D.ref=La(b,v,x),D.return=b,D)}function d(b,v,x,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=kf(x,b.mode,D),v.return=b,v):(v=r(v,x.children||[]),v.return=b,v)}function f(b,v,x,D,L){return v===null||v.tag!==7?(v=pi(x,b.mode,D,L),v.return=b,v):(v=r(v,x),v.return=b,v)}function m(b,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Sf(""+v,b.mode,x),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ql:return x=Pu(v.type,v.key,v.props,null,b.mode,x),x.ref=La(b,null,v),x.return=b,x;case mo:return v=kf(v,b.mode,x),v.return=b,v;case Ys:var D=v._init;return m(b,D(v._payload),x)}if(Ka(v)||Da(v))return v=pi(v,b.mode,x,null),v.return=b,v;tu(b,v)}return null}function g(b,v,x,D){var L=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return L!==null?null:a(b,v,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ql:return x.key===L?c(b,v,x,D):null;case mo:return x.key===L?d(b,v,x,D):null;case Ys:return L=x._init,g(b,v,L(x._payload),D)}if(Ka(x)||Da(x))return L!==null?null:f(b,v,x,D,null);tu(b,x)}return null}function T(b,v,x,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return b=b.get(x)||null,a(v,b,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ql:return b=b.get(D.key===null?x:D.key)||null,c(v,b,D,L);case mo:return b=b.get(D.key===null?x:D.key)||null,d(v,b,D,L);case Ys:var M=D._init;return T(b,v,x,M(D._payload),L)}if(Ka(D)||Da(D))return b=b.get(x)||null,f(v,b,D,L,null);tu(v,D)}return null}function S(b,v,x,D){for(var L=null,M=null,w=v,y=v=0,I=null;w!==null&&y<x.length;y++){w.index>y?(I=w,w=null):I=w.sibling;var E=g(b,w,x[y],D);if(E===null){w===null&&(w=I);break}t&&w&&E.alternate===null&&e(b,w),v=i(E,v,y),M===null?L=E:M.sibling=E,M=E,w=I}if(y===x.length)return n(b,w),ze&&Zr(b,y),L;if(w===null){for(;y<x.length;y++)w=m(b,x[y],D),w!==null&&(v=i(w,v,y),M===null?L=w:M.sibling=w,M=w);return ze&&Zr(b,y),L}for(w=s(b,w);y<x.length;y++)I=T(w,b,y,x[y],D),I!==null&&(t&&I.alternate!==null&&w.delete(I.key===null?y:I.key),v=i(I,v,y),M===null?L=I:M.sibling=I,M=I);return t&&w.forEach(function(N){return e(b,N)}),ze&&Zr(b,y),L}function A(b,v,x,D){var L=Da(x);if(typeof L!="function")throw Error(W(150));if(x=L.call(x),x==null)throw Error(W(151));for(var M=L=null,w=v,y=v=0,I=null,E=x.next();w!==null&&!E.done;y++,E=x.next()){w.index>y?(I=w,w=null):I=w.sibling;var N=g(b,w,E.value,D);if(N===null){w===null&&(w=I);break}t&&w&&N.alternate===null&&e(b,w),v=i(N,v,y),M===null?L=N:M.sibling=N,M=N,w=I}if(E.done)return n(b,w),ze&&Zr(b,y),L;if(w===null){for(;!E.done;y++,E=x.next())E=m(b,E.value,D),E!==null&&(v=i(E,v,y),M===null?L=E:M.sibling=E,M=E);return ze&&Zr(b,y),L}for(w=s(b,w);!E.done;y++,E=x.next())E=T(w,b,y,E.value,D),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?y:E.key),v=i(E,v,y),M===null?L=E:M.sibling=E,M=E);return t&&w.forEach(function(R){return e(b,R)}),ze&&Zr(b,y),L}function C(b,v,x,D){if(typeof x=="object"&&x!==null&&x.type===po&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ql:e:{for(var L=x.key,M=v;M!==null;){if(M.key===L){if(L=x.type,L===po){if(M.tag===7){n(b,M.sibling),v=r(M,x.props.children),v.return=b,b=v;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ys&&Bv(L)===M.type){n(b,M.sibling),v=r(M,x.props),v.ref=La(b,M,x),v.return=b,b=v;break e}n(b,M);break}else e(b,M);M=M.sibling}x.type===po?(v=pi(x.props.children,b.mode,D,x.key),v.return=b,b=v):(D=Pu(x.type,x.key,x.props,null,b.mode,D),D.ref=La(b,v,x),D.return=b,b=D)}return o(b);case mo:e:{for(M=x.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(b,v.sibling),v=r(v,x.children||[]),v.return=b,b=v;break e}else{n(b,v);break}else e(b,v);v=v.sibling}v=kf(x,b.mode,D),v.return=b,b=v}return o(b);case Ys:return M=x._init,C(b,v,M(x._payload),D)}if(Ka(x))return S(b,v,x,D);if(Da(x))return A(b,v,x,D);tu(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(b,v.sibling),v=r(v,x),v.return=b,b=v):(n(b,v),v=Sf(x,b.mode,D),v.return=b,b=v),o(b)):n(b,v)}return C}var zo=q0(!0),W0=q0(!1),id=Dr(null),od=null,Io=null,Xp=null;function Jp(){Xp=Io=od=null}function Zp(t){var e=id.current;Le(id),t._currentValue=e}function Em(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Co(t,e){od=t,Xp=Io=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function wn(t){var e=t._currentValue;if(Xp!==t)if(t={context:t,memoizedValue:e,next:null},Io===null){if(od===null)throw Error(W(308));Io=t,od.dependencies={lanes:0,firstContext:t}}else Io=Io.next=t;return e}var li=null;function eg(t){li===null?li=[t]:li.push(t)}function G0(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,eg(e)):(n.next=r.next,r.next=n),e.interleaved=n,xs(t,s)}function xs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xs=!1;function tg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ws(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,be&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,xs(t,n)}return r=s.interleaved,r===null?(e.next=e,eg(s)):(e.next=r.next,r.next=e),s.interleaved=e,xs(t,n)}function Iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,zp(t,n)}}function $v(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ad(t,e,n,s){var r=t.updateQueue;Xs=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=r.baseState;o=0,f=d=c=null,a=i;do{var g=a.lane,T=a.eventTime;if((s&g)===g){f!==null&&(f=f.next={eventTime:T,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,A=a;switch(g=e,T=n,A.tag){case 1:if(S=A.payload,typeof S=="function"){m=S.call(T,m,g);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=A.payload,g=typeof S=="function"?S.call(T,m,g):S,g==null)break e;m=Ke({},m,g);break e;case 2:Xs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=r.effects,g===null?r.effects=[a]:g.push(a))}else T={eventTime:T,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=T,c=m):f=f.next=T,o|=g;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;g=a,a=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);if(f===null&&(c=m),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Ti|=o,t.lanes=o,t.memoizedState=m}}function qv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(W(191,r));r.call(s)}}}var ul={},Xn=Dr(ul),jc=Dr(ul),Oc=Dr(ul);function ui(t){if(t===ul)throw Error(W(174));return t}function ng(t,e){switch(Oe(Oc,e),Oe(jc,t),Oe(Xn,ul),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tm(e,t)}Le(Xn),Oe(Xn,e)}function Uo(){Le(Xn),Le(jc),Le(Oc)}function K0(t){ui(Oc.current);var e=ui(Xn.current),n=tm(e,t.type);e!==n&&(Oe(jc,t),Oe(Xn,n))}function sg(t){jc.current===t&&(Le(Xn),Le(jc))}var $e=Dr(0);function cd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wf=[];function rg(){for(var t=0;t<wf.length;t++)wf[t]._workInProgressVersionPrimary=null;wf.length=0}var xu=Ns.ReactCurrentDispatcher,Ef=Ns.ReactCurrentBatchConfig,Ei=0,We=null,ot=null,ht=null,ld=!1,lc=!1,Vc=0,US=0;function xt(){throw Error(W(321))}function ig(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dn(t[n],e[n]))return!1;return!0}function og(t,e,n,s,r,i){if(Ei=i,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xu.current=t===null||t.memoizedState===null?WS:GS,t=n(s,r),lc){i=0;do{if(lc=!1,Vc=0,25<=i)throw Error(W(301));i+=1,ht=ot=null,e.updateQueue=null,xu.current=HS,t=n(s,r)}while(lc)}if(xu.current=ud,e=ot!==null&&ot.next!==null,Ei=0,ht=ot=We=null,ld=!1,e)throw Error(W(300));return t}function ag(){var t=Vc!==0;return Vc=0,t}function Bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?We.memoizedState=ht=t:ht=ht.next=t,ht}function En(){if(ot===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ht===null?We.memoizedState:ht.next;if(e!==null)ht=e,ot=t;else{if(t===null)throw Error(W(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?We.memoizedState=ht=t:ht=ht.next=t}return ht}function Mc(t,e){return typeof e=="function"?e(t):e}function Tf(t){var e=En(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var s=ot,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,c=null,d=i;do{var f=d.lane;if((Ei&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=m,o=s):c=c.next=m,We.lanes|=f,Ti|=f}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=a,Dn(s,e.memoizedState)||(Ht=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,We.lanes|=i,Ti|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function If(t){var e=En(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Dn(i,e.memoizedState)||(Ht=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function Q0(){}function Y0(t,e){var n=We,s=En(),r=e(),i=!Dn(s.memoizedState,r);if(i&&(s.memoizedState=r,Ht=!0),s=s.queue,cg(Z0.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,Lc(9,J0.bind(null,n,s,r,e),void 0,null),ft===null)throw Error(W(349));Ei&30||X0(n,e,r)}return r}function X0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function J0(t,e,n,s){e.value=n,e.getSnapshot=s,e1(e)&&t1(t)}function Z0(t,e,n){return n(function(){e1(e)&&t1(t)})}function e1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dn(t,n)}catch{return!0}}function t1(t){var e=xs(t,1);e!==null&&Rn(e,t,1,-1)}function Wv(t){var e=Bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mc,lastRenderedState:t},e.queue=t,t=t.dispatch=qS.bind(null,We,t),[e.memoizedState,t]}function Lc(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function n1(){return En().memoizedState}function bu(t,e,n,s){var r=Bn();We.flags|=t,r.memoizedState=Lc(1|e,n,void 0,s===void 0?null:s)}function eh(t,e,n,s){var r=En();s=s===void 0?null:s;var i=void 0;if(ot!==null){var o=ot.memoizedState;if(i=o.destroy,s!==null&&ig(s,o.deps)){r.memoizedState=Lc(e,n,i,s);return}}We.flags|=t,r.memoizedState=Lc(1|e,n,i,s)}function Gv(t,e){return bu(8390656,8,t,e)}function cg(t,e){return eh(2048,8,t,e)}function s1(t,e){return eh(4,2,t,e)}function r1(t,e){return eh(4,4,t,e)}function i1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function o1(t,e,n){return n=n!=null?n.concat([t]):null,eh(4,4,i1.bind(null,e,t),n)}function lg(){}function a1(t,e){var n=En();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&ig(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function c1(t,e){var n=En();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&ig(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function l1(t,e,n){return Ei&21?(Dn(n,e)||(n=m0(),We.lanes|=n,Ti|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function BS(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var s=Ef.transition;Ef.transition={};try{t(!1),e()}finally{Ne=n,Ef.transition=s}}function u1(){return En().memoizedState}function $S(t,e,n){var s=gr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},d1(t))h1(e,n);else if(n=G0(t,e,n,s),n!==null){var r=Lt();Rn(n,t,s,r),f1(n,e,s)}}function qS(t,e,n){var s=gr(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(d1(t))h1(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,Dn(a,o)){var c=e.interleaved;c===null?(r.next=r,eg(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=G0(t,e,r,s),n!==null&&(r=Lt(),Rn(n,t,s,r),f1(n,e,s))}}function d1(t){var e=t.alternate;return t===We||e!==null&&e===We}function h1(t,e){lc=ld=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function f1(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,zp(t,n)}}var ud={readContext:wn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},WS={readContext:wn,useCallback:function(t,e){return Bn().memoizedState=[t,e===void 0?null:e],t},useContext:wn,useEffect:Gv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bu(4194308,4,i1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bu(4194308,4,t,e)},useInsertionEffect:function(t,e){return bu(4,2,t,e)},useMemo:function(t,e){var n=Bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Bn();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=$S.bind(null,We,t),[s.memoizedState,t]},useRef:function(t){var e=Bn();return t={current:t},e.memoizedState=t},useState:Wv,useDebugValue:lg,useDeferredValue:function(t){return Bn().memoizedState=t},useTransition:function(){var t=Wv(!1),e=t[0];return t=BS.bind(null,t[1]),Bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=We,r=Bn();if(ze){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),ft===null)throw Error(W(349));Ei&30||X0(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Gv(Z0.bind(null,s,i,t),[t]),s.flags|=2048,Lc(9,J0.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=Bn(),e=ft.identifierPrefix;if(ze){var n=ps,s=ms;n=(s&~(1<<32-Cn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=US++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GS={readContext:wn,useCallback:a1,useContext:wn,useEffect:cg,useImperativeHandle:o1,useInsertionEffect:s1,useLayoutEffect:r1,useMemo:c1,useReducer:Tf,useRef:n1,useState:function(){return Tf(Mc)},useDebugValue:lg,useDeferredValue:function(t){var e=En();return l1(e,ot.memoizedState,t)},useTransition:function(){var t=Tf(Mc)[0],e=En().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:Y0,useId:u1,unstable_isNewReconciler:!1},HS={readContext:wn,useCallback:a1,useContext:wn,useEffect:cg,useImperativeHandle:o1,useInsertionEffect:s1,useLayoutEffect:r1,useMemo:c1,useReducer:If,useRef:n1,useState:function(){return If(Mc)},useDebugValue:lg,useDeferredValue:function(t){var e=En();return ot===null?e.memoizedState=t:l1(e,ot.memoizedState,t)},useTransition:function(){var t=If(Mc)[0],e=En().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:Y0,useId:u1,unstable_isNewReconciler:!1};function Sn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tm(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var th={isMounted:function(t){return(t=t._reactInternals)?Mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Lt(),r=gr(t),i=ws(s,r);i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,r),e!==null&&(Rn(e,t,r,s),Iu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Lt(),r=gr(t),i=ws(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,r),e!==null&&(Rn(e,t,r,s),Iu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Lt(),s=gr(t),r=ws(n,s);r.tag=2,e!=null&&(r.callback=e),e=mr(t,r,s),e!==null&&(Rn(e,t,s,n),Iu(e,t,s))}};function Hv(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Nc(n,s)||!Nc(r,i):!0}function m1(t,e,n){var s=!1,r=Sr,i=e.contextType;return typeof i=="object"&&i!==null?i=wn(i):(r=Yt(e)?_i:Dt.current,s=e.contextTypes,i=(s=s!=null)?Lo(t,r):Sr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=th,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Kv(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&th.enqueueReplaceState(e,e.state,null)}function Im(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},tg(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=wn(i):(i=Yt(e)?_i:Dt.current,r.context=Lo(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Tm(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&th.enqueueReplaceState(r,r.state,null),ad(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Bo(t,e){try{var n="",s=e;do n+=Eb(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function xf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KS=typeof WeakMap=="function"?WeakMap:Map;function p1(t,e,n){n=ws(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){hd||(hd=!0,jm=s),xm(t,e)},n}function g1(t,e,n){n=ws(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){xm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){xm(t,e),typeof s!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Qv(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new KS;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=ck.bind(null,t,e,n),e.then(t,t))}function Yv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xv(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ws(-1,1),e.tag=2,mr(n,e,1))),n.lanes|=1),t)}var QS=Ns.ReactCurrentOwner,Ht=!1;function Vt(t,e,n,s){e.child=t===null?W0(e,null,n,s):zo(e,t.child,n,s)}function Jv(t,e,n,s,r){n=n.render;var i=e.ref;return Co(e,r),s=og(t,e,n,s,i,r),n=ag(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,bs(t,e,r)):(ze&&n&&Kp(e),e.flags|=1,Vt(t,e,s,r),e.child)}function Zv(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!yg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,y1(t,e,i,s,r)):(t=Pu(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Nc,n(o,s)&&t.ref===e.ref)return bs(t,e,r)}return e.flags|=1,t=yr(i,s),t.ref=e.ref,t.return=e,e.child=t}function y1(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Nc(i,s)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,bs(t,e,r)}return bm(t,e,n,s,r)}function v1(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(bo,tn),tn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(bo,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Oe(bo,tn),tn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,Oe(bo,tn),tn|=s;return Vt(t,e,r,n),e.child}function _1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bm(t,e,n,s,r){var i=Yt(n)?_i:Dt.current;return i=Lo(e,i),Co(e,r),n=og(t,e,n,s,i,r),s=ag(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,bs(t,e,r)):(ze&&s&&Kp(e),e.flags|=1,Vt(t,e,n,r),e.child)}function e_(t,e,n,s,r){if(Yt(n)){var i=!0;nd(e)}else i=!1;if(Co(e,r),e.stateNode===null)Su(t,e),m1(e,n,s),Im(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=wn(d):(d=Yt(n)?_i:Dt.current,d=Lo(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||c!==d)&&Kv(e,o,s,d),Xs=!1;var g=e.memoizedState;o.state=g,ad(e,s,o,r),c=e.memoizedState,a!==s||g!==c||Qt.current||Xs?(typeof f=="function"&&(Tm(e,n,f,s),c=e.memoizedState),(a=Xs||Hv(e,n,a,s,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=d,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,H0(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Sn(e.type,a),o.props=d,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=wn(c):(c=Yt(n)?_i:Dt.current,c=Lo(e,c));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==c)&&Kv(e,o,s,c),Xs=!1,g=e.memoizedState,o.state=g,ad(e,s,o,r);var S=e.memoizedState;a!==m||g!==S||Qt.current||Xs?(typeof T=="function"&&(Tm(e,n,T,s),S=e.memoizedState),(d=Xs||Hv(e,n,d,s,g,S,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=S),o.props=s,o.state=S,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return Sm(t,e,n,s,i,r)}function Sm(t,e,n,s,r,i){_1(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Fv(e,n,!1),bs(t,e,i);s=e.stateNode,QS.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=zo(e,t.child,null,i),e.child=zo(e,null,a,i)):Vt(t,e,a,i),e.memoizedState=s.state,r&&Fv(e,n,!0),e.child}function w1(t){var e=t.stateNode;e.pendingContext?Lv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lv(t,e.context,!1),ng(t,e.containerInfo)}function t_(t,e,n,s,r){return Fo(),Yp(r),e.flags|=256,Vt(t,e,n,s),e.child}var km={dehydrated:null,treeContext:null,retryLane:0};function Am(t){return{baseLanes:t,cachePool:null,transitions:null}}function E1(t,e,n){var s=e.pendingProps,r=$e.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Oe($e,r&1),t===null)return wm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rh(o,s,0,null),t=pi(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Am(n),e.memoizedState=km,t):ug(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return YS(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=yr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=yr(a,i):(i=pi(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?Am(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=km,s}return i=t.child,t=i.sibling,s=yr(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function ug(t,e){return e=rh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nu(t,e,n,s){return s!==null&&Yp(s),zo(e,t.child,null,n),t=ug(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function YS(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=xf(Error(W(422))),nu(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=rh({mode:"visible",children:s.children},r,0,null),i=pi(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&zo(e,t.child,null,o),e.child.memoizedState=Am(o),e.memoizedState=km,i);if(!(e.mode&1))return nu(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(W(419)),s=xf(i,s,void 0),nu(t,e,o,s)}if(a=(o&t.childLanes)!==0,Ht||a){if(s=ft,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,xs(t,r),Rn(s,t,r,-1))}return gg(),s=xf(Error(W(421))),nu(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=lk.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,on=fr(r.nextSibling),cn=e,ze=!0,Pn=null,t!==null&&(mn[pn++]=ms,mn[pn++]=ps,mn[pn++]=wi,ms=t.id,ps=t.overflow,wi=e),e=ug(e,s.children),e.flags|=4096,e)}function n_(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Em(t.return,e,n)}function bf(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function T1(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Vt(t,e,s.children,n),s=$e.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&n_(t,n,e);else if(t.tag===19)n_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Oe($e,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&cd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),bf(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&cd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}bf(e,!0,n,null,i);break;case"together":bf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Su(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ti|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function XS(t,e,n){switch(e.tag){case 3:w1(e),Fo();break;case 5:K0(e);break;case 1:Yt(e.type)&&nd(e);break;case 4:ng(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Oe(id,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Oe($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?E1(t,e,n):(Oe($e,$e.current&1),t=bs(t,e,n),t!==null?t.sibling:null);Oe($e,$e.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return T1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Oe($e,$e.current),s)break;return null;case 22:case 23:return e.lanes=0,v1(t,e,n)}return bs(t,e,n)}var I1,Pm,x1,b1;I1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pm=function(){};x1=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,ui(Xn.current);var i=null;switch(n){case"input":r=Xf(t,r),s=Xf(t,s),i=[];break;case"select":r=Ke({},r,{value:void 0}),s=Ke({},s,{value:void 0}),i=[];break;case"textarea":r=em(t,r),s=em(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=ed)}nm(n,s);var o;n=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var a=r[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ic.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(a=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ic.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Me("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};b1=function(t,e,n,s){n!==s&&(e.flags|=4)};function Fa(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function JS(t,e,n){var s=e.pendingProps;switch(Qp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return Yt(e.type)&&td(),bt(e),null;case 3:return s=e.stateNode,Uo(),Le(Qt),Le(Dt),rg(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(eu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(Mm(Pn),Pn=null))),Pm(t,e),bt(e),null;case 5:sg(e);var r=ui(Oc.current);if(n=e.type,t!==null&&e.stateNode!=null)x1(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(W(166));return bt(e),null}if(t=ui(Xn.current),eu(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[qn]=e,s[Dc]=i,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(r=0;r<Ya.length;r++)Me(Ya[r],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":dv(s,i),Me("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Me("invalid",s);break;case"textarea":fv(s,i),Me("invalid",s)}nm(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Zl(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Zl(s.textContent,a,t),r=["children",""+a]):Ic.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",s)}switch(n){case"input":Wl(s),hv(s,i,!0);break;case"textarea":Wl(s),mv(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=ed)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Z2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[qn]=e,t[Dc]=s,I1(t,e,!1,!1),e.stateNode=t;e:{switch(o=sm(n,s),n){case"dialog":Me("cancel",t),Me("close",t),r=s;break;case"iframe":case"object":case"embed":Me("load",t),r=s;break;case"video":case"audio":for(r=0;r<Ya.length;r++)Me(Ya[r],t);r=s;break;case"source":Me("error",t),r=s;break;case"img":case"image":case"link":Me("error",t),Me("load",t),r=s;break;case"details":Me("toggle",t),r=s;break;case"input":dv(t,s),r=Xf(t,s),Me("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ke({},s,{value:void 0}),Me("invalid",t);break;case"textarea":fv(t,s),r=em(t,s),Me("invalid",t);break;default:r=s}nm(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?n0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&e0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xc(t,c):typeof c=="number"&&xc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ic.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Me("scroll",t):c!=null&&jp(t,i,c,o))}switch(n){case"input":Wl(t),hv(t,s,!1);break;case"textarea":Wl(t),mv(t);break;case"option":s.value!=null&&t.setAttribute("value",""+br(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?ko(t,!!s.multiple,i,!1):s.defaultValue!=null&&ko(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ed)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)b1(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(W(166));if(n=ui(Oc.current),ui(Xn.current),eu(e)){if(s=e.stateNode,n=e.memoizedProps,s[qn]=e,(i=s.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:Zl(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zl(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[qn]=e,e.stateNode=s}return bt(e),null;case 13:if(Le($e),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&on!==null&&e.mode&1&&!(e.flags&128))$0(),Fo(),e.flags|=98560,i=!1;else if(i=eu(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[qn]=e}else Fo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),i=!1}else Pn!==null&&(Mm(Pn),Pn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?at===0&&(at=3):gg())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return Uo(),Pm(t,e),t===null&&Cc(e.stateNode.containerInfo),bt(e),null;case 10:return Zp(e.type._context),bt(e),null;case 17:return Yt(e.type)&&td(),bt(e),null;case 19:if(Le($e),i=e.memoizedState,i===null)return bt(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Fa(i,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=cd(t),o!==null){for(e.flags|=128,Fa(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe($e,$e.current&1|2),e.child}t=t.sibling}i.tail!==null&&et()>$o&&(e.flags|=128,s=!0,Fa(i,!1),e.lanes=4194304)}else{if(!s)if(t=cd(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ze)return bt(e),null}else 2*et()-i.renderingStartTime>$o&&n!==1073741824&&(e.flags|=128,s=!0,Fa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=et(),e.sibling=null,n=$e.current,Oe($e,s?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return pg(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?tn&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function ZS(t,e){switch(Qp(e),e.tag){case 1:return Yt(e.type)&&td(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Uo(),Le(Qt),Le(Dt),rg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sg(e),null;case 13:if(Le($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Fo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le($e),null;case 4:return Uo(),null;case 10:return Zp(e.type._context),null;case 22:case 23:return pg(),null;case 24:return null;default:return null}}var su=!1,Pt=!1,ek=typeof WeakSet=="function"?WeakSet:Set,ee=null;function xo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Xe(t,e,s)}else n.current=null}function Nm(t,e,n){try{n()}catch(s){Xe(t,e,s)}}var s_=!1;function tk(t,e){if(fm=Xu,t=N0(),Hp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var T;m!==n||r!==0&&m.nodeType!==3||(a=o+r),m!==i||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(T=m.firstChild)!==null;)g=m,m=T;for(;;){if(m===t)break t;if(g===n&&++d===r&&(a=o),g===i&&++f===s&&(c=o),(T=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=T}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(mm={focusedElem:t,selectionRange:n},Xu=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,C=S.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?A:Sn(e.type,A),C);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(D){Xe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return S=s_,s_=!1,S}function uc(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Nm(e,n,i)}r=r.next}while(r!==s)}}function nh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Cm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function S1(t){var e=t.alternate;e!==null&&(t.alternate=null,S1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qn],delete e[Dc],delete e[ym],delete e[MS],delete e[LS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function k1(t){return t.tag===5||t.tag===3||t.tag===4}function r_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||k1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ed));else if(s!==4&&(t=t.child,t!==null))for(Rm(t,e,n),t=t.sibling;t!==null;)Rm(t,e,n),t=t.sibling}function Dm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Dm(t,e,n),t=t.sibling;t!==null;)Dm(t,e,n),t=t.sibling}var yt=null,kn=!1;function qs(t,e,n){for(n=n.child;n!==null;)A1(t,e,n),n=n.sibling}function A1(t,e,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Kd,n)}catch{}switch(n.tag){case 5:Pt||xo(n,e);case 6:var s=yt,r=kn;yt=null,qs(t,e,n),yt=s,kn=r,yt!==null&&(kn?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(kn?(t=yt,n=n.stateNode,t.nodeType===8?vf(t.parentNode,n):t.nodeType===1&&vf(t,n),Ac(t)):vf(yt,n.stateNode));break;case 4:s=yt,r=kn,yt=n.stateNode.containerInfo,kn=!0,qs(t,e,n),yt=s,kn=r;break;case 0:case 11:case 14:case 15:if(!Pt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Nm(n,e,o),r=r.next}while(r!==s)}qs(t,e,n);break;case 1:if(!Pt&&(xo(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Xe(n,e,a)}qs(t,e,n);break;case 21:qs(t,e,n);break;case 22:n.mode&1?(Pt=(s=Pt)||n.memoizedState!==null,qs(t,e,n),Pt=s):qs(t,e,n);break;default:qs(t,e,n)}}function i_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ek),e.forEach(function(s){var r=uk.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function bn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yt=a.stateNode,kn=!1;break e;case 3:yt=a.stateNode.containerInfo,kn=!0;break e;case 4:yt=a.stateNode.containerInfo,kn=!0;break e}a=a.return}if(yt===null)throw Error(W(160));A1(i,o,r),yt=null,kn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Xe(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)P1(e,t),e=e.sibling}function P1(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bn(e,t),Un(t),s&4){try{uc(3,t,t.return),nh(3,t)}catch(A){Xe(t,t.return,A)}try{uc(5,t,t.return)}catch(A){Xe(t,t.return,A)}}break;case 1:bn(e,t),Un(t),s&512&&n!==null&&xo(n,n.return);break;case 5:if(bn(e,t),Un(t),s&512&&n!==null&&xo(n,n.return),t.flags&32){var r=t.stateNode;try{xc(r,"")}catch(A){Xe(t,t.return,A)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&X2(r,i),sm(a,o);var d=sm(a,i);for(o=0;o<c.length;o+=2){var f=c[o],m=c[o+1];f==="style"?n0(r,m):f==="dangerouslySetInnerHTML"?e0(r,m):f==="children"?xc(r,m):jp(r,f,m,d)}switch(a){case"input":Jf(r,i);break;case"textarea":J2(r,i);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?ko(r,!!i.multiple,T,!1):g!==!!i.multiple&&(i.defaultValue!=null?ko(r,!!i.multiple,i.defaultValue,!0):ko(r,!!i.multiple,i.multiple?[]:"",!1))}r[Dc]=i}catch(A){Xe(t,t.return,A)}}break;case 6:if(bn(e,t),Un(t),s&4){if(t.stateNode===null)throw Error(W(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(A){Xe(t,t.return,A)}}break;case 3:if(bn(e,t),Un(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ac(e.containerInfo)}catch(A){Xe(t,t.return,A)}break;case 4:bn(e,t),Un(t);break;case 13:bn(e,t),Un(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(fg=et())),s&4&&i_(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Pt=(d=Pt)||f,bn(e,t),Pt=d):bn(e,t),Un(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(ee=t,f=t.child;f!==null;){for(m=ee=f;ee!==null;){switch(g=ee,T=g.child,g.tag){case 0:case 11:case 14:case 15:uc(4,g,g.return);break;case 1:xo(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){s=g,n=g.return;try{e=s,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(A){Xe(s,n,A)}}break;case 5:xo(g,g.return);break;case 22:if(g.memoizedState!==null){a_(m);continue}}T!==null?(T.return=g,ee=T):a_(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{r=m.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=t0("display",o))}catch(A){Xe(t,t.return,A)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(A){Xe(t,t.return,A)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:bn(e,t),Un(t),s&4&&i_(t);break;case 21:break;default:bn(e,t),Un(t)}}function Un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(k1(n)){var s=n;break e}n=n.return}throw Error(W(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(xc(r,""),s.flags&=-33);var i=r_(t);Dm(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=r_(t);Rm(t,a,o);break;default:throw Error(W(161))}}catch(c){Xe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nk(t,e,n){ee=t,N1(t)}function N1(t,e,n){for(var s=(t.mode&1)!==0;ee!==null;){var r=ee,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||su;if(!o){var a=r.alternate,c=a!==null&&a.memoizedState!==null||Pt;a=su;var d=Pt;if(su=o,(Pt=c)&&!d)for(ee=r;ee!==null;)o=ee,c=o.child,o.tag===22&&o.memoizedState!==null?c_(r):c!==null?(c.return=o,ee=c):c_(r);for(;i!==null;)ee=i,N1(i),i=i.sibling;ee=r,su=a,Pt=d}o_(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ee=i):o_(t)}}function o_(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||nh(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Pt)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Sn(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&qv(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ac(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Pt||e.flags&512&&Cm(e)}catch(g){Xe(e,e.return,g)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function a_(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function c_(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nh(4,e)}catch(c){Xe(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Xe(e,r,c)}}var i=e.return;try{Cm(e)}catch(c){Xe(e,i,c)}break;case 5:var o=e.return;try{Cm(e)}catch(c){Xe(e,o,c)}}}catch(c){Xe(e,e.return,c)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var sk=Math.ceil,dd=Ns.ReactCurrentDispatcher,dg=Ns.ReactCurrentOwner,vn=Ns.ReactCurrentBatchConfig,be=0,ft=null,nt=null,wt=0,tn=0,bo=Dr(0),at=0,Fc=null,Ti=0,sh=0,hg=0,dc=null,Gt=null,fg=0,$o=1/0,hs=null,hd=!1,jm=null,pr=null,ru=!1,ar=null,fd=0,hc=0,Om=null,ku=-1,Au=0;function Lt(){return be&6?et():ku!==-1?ku:ku=et()}function gr(t){return t.mode&1?be&2&&wt!==0?wt&-wt:zS.transition!==null?(Au===0&&(Au=m0()),Au):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:E0(t.type)),t):1}function Rn(t,e,n,s){if(50<hc)throw hc=0,Om=null,Error(W(185));al(t,n,s),(!(be&2)||t!==ft)&&(t===ft&&(!(be&2)&&(sh|=n),at===4&&Zs(t,wt)),Xt(t,s),n===1&&be===0&&!(e.mode&1)&&($o=et()+500,Zd&&jr()))}function Xt(t,e){var n=t.callbackNode;zb(t,e);var s=Yu(t,t===ft?wt:0);if(s===0)n!==null&&yv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&yv(n),e===1)t.tag===0?FS(l_.bind(null,t)):z0(l_.bind(null,t)),OS(function(){!(be&6)&&jr()}),n=null;else{switch(p0(s)){case 1:n=Fp;break;case 4:n=h0;break;case 16:n=Qu;break;case 536870912:n=f0;break;default:n=Qu}n=L1(n,C1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C1(t,e){if(ku=-1,Au=0,be&6)throw Error(W(327));var n=t.callbackNode;if(Ro()&&t.callbackNode!==n)return null;var s=Yu(t,t===ft?wt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=md(t,s);else{e=s;var r=be;be|=2;var i=D1();(ft!==t||wt!==e)&&(hs=null,$o=et()+500,mi(t,e));do try{ok();break}catch(a){R1(t,a)}while(!0);Jp(),dd.current=i,be=r,nt!==null?e=0:(ft=null,wt=0,e=at)}if(e!==0){if(e===2&&(r=cm(t),r!==0&&(s=r,e=Vm(t,r))),e===1)throw n=Fc,mi(t,0),Zs(t,s),Xt(t,et()),n;if(e===6)Zs(t,s);else{if(r=t.current.alternate,!(s&30)&&!rk(r)&&(e=md(t,s),e===2&&(i=cm(t),i!==0&&(s=i,e=Vm(t,i))),e===1))throw n=Fc,mi(t,0),Zs(t,s),Xt(t,et()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(W(345));case 2:ei(t,Gt,hs);break;case 3:if(Zs(t,s),(s&130023424)===s&&(e=fg+500-et(),10<e)){if(Yu(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){Lt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=gm(ei.bind(null,t,Gt,hs),e);break}ei(t,Gt,hs);break;case 4:if(Zs(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Cn(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=et()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*sk(s/1960))-s,10<s){t.timeoutHandle=gm(ei.bind(null,t,Gt,hs),s);break}ei(t,Gt,hs);break;case 5:ei(t,Gt,hs);break;default:throw Error(W(329))}}}return Xt(t,et()),t.callbackNode===n?C1.bind(null,t):null}function Vm(t,e){var n=dc;return t.current.memoizedState.isDehydrated&&(mi(t,e).flags|=256),t=md(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&Mm(e)),t}function Mm(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function rk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Dn(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zs(t,e){for(e&=~hg,e&=~sh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),s=1<<n;t[n]=-1,e&=~s}}function l_(t){if(be&6)throw Error(W(327));Ro();var e=Yu(t,0);if(!(e&1))return Xt(t,et()),null;var n=md(t,e);if(t.tag!==0&&n===2){var s=cm(t);s!==0&&(e=s,n=Vm(t,s))}if(n===1)throw n=Fc,mi(t,0),Zs(t,e),Xt(t,et()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ei(t,Gt,hs),Xt(t,et()),null}function mg(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&($o=et()+500,Zd&&jr())}}function Ii(t){ar!==null&&ar.tag===0&&!(be&6)&&Ro();var e=be;be|=1;var n=vn.transition,s=Ne;try{if(vn.transition=null,Ne=1,t)return t()}finally{Ne=s,vn.transition=n,be=e,!(be&6)&&jr()}}function pg(){tn=bo.current,Le(bo)}function mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jS(n)),nt!==null)for(n=nt.return;n!==null;){var s=n;switch(Qp(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&td();break;case 3:Uo(),Le(Qt),Le(Dt),rg();break;case 5:sg(s);break;case 4:Uo();break;case 13:Le($e);break;case 19:Le($e);break;case 10:Zp(s.type._context);break;case 22:case 23:pg()}n=n.return}if(ft=t,nt=t=yr(t.current,null),wt=tn=e,at=0,Fc=null,hg=sh=Ti=0,Gt=dc=null,li!==null){for(e=0;e<li.length;e++)if(n=li[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}li=null}return t}function R1(t,e){do{var n=nt;try{if(Jp(),xu.current=ud,ld){for(var s=We.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}ld=!1}if(Ei=0,ht=ot=We=null,lc=!1,Vc=0,dg.current=null,n===null||n.return===null){at=1,Fc=e,nt=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=wt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=Yv(o);if(T!==null){T.flags&=-257,Xv(T,o,a,i,e),T.mode&1&&Qv(i,d,e),e=T,c=d;var S=e.updateQueue;if(S===null){var A=new Set;A.add(c),e.updateQueue=A}else S.add(c);break e}else{if(!(e&1)){Qv(i,d,e),gg();break e}c=Error(W(426))}}else if(ze&&a.mode&1){var C=Yv(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Xv(C,o,a,i,e),Yp(Bo(c,a));break e}}i=c=Bo(c,a),at!==4&&(at=2),dc===null?dc=[i]:dc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=p1(i,c,e);$v(i,b);break e;case 1:a=c;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(pr===null||!pr.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=g1(i,a,e);$v(i,D);break e}}i=i.return}while(i!==null)}O1(n)}catch(L){e=L,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function D1(){var t=dd.current;return dd.current=ud,t===null?ud:t}function gg(){(at===0||at===3||at===2)&&(at=4),ft===null||!(Ti&268435455)&&!(sh&268435455)||Zs(ft,wt)}function md(t,e){var n=be;be|=2;var s=D1();(ft!==t||wt!==e)&&(hs=null,mi(t,e));do try{ik();break}catch(r){R1(t,r)}while(!0);if(Jp(),be=n,dd.current=s,nt!==null)throw Error(W(261));return ft=null,wt=0,at}function ik(){for(;nt!==null;)j1(nt)}function ok(){for(;nt!==null&&!Cb();)j1(nt)}function j1(t){var e=M1(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?O1(t):nt=e,dg.current=null}function O1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ZS(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,nt=null;return}}else if(n=JS(n,e,tn),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);at===0&&(at=5)}function ei(t,e,n){var s=Ne,r=vn.transition;try{vn.transition=null,Ne=1,ak(t,e,n,s)}finally{vn.transition=r,Ne=s}return null}function ak(t,e,n,s){do Ro();while(ar!==null);if(be&6)throw Error(W(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Ub(t,i),t===ft&&(nt=ft=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ru||(ru=!0,L1(Qu,function(){return Ro(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vn.transition,vn.transition=null;var o=Ne;Ne=1;var a=be;be|=4,dg.current=null,tk(t,n),P1(n,t),kS(mm),Xu=!!fm,mm=fm=null,t.current=n,nk(n),Rb(),be=a,Ne=o,vn.transition=i}else t.current=n;if(ru&&(ru=!1,ar=t,fd=r),i=t.pendingLanes,i===0&&(pr=null),Ob(n.stateNode),Xt(t,et()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(hd)throw hd=!1,t=jm,jm=null,t;return fd&1&&t.tag!==0&&Ro(),i=t.pendingLanes,i&1?t===Om?hc++:(hc=0,Om=t):hc=0,jr(),null}function Ro(){if(ar!==null){var t=p0(fd),e=vn.transition,n=Ne;try{if(vn.transition=null,Ne=16>t?16:t,ar===null)var s=!1;else{if(t=ar,ar=null,fd=0,be&6)throw Error(W(331));var r=be;for(be|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(ee=d;ee!==null;){var f=ee;switch(f.tag){case 0:case 11:case 15:uc(8,f,i)}var m=f.child;if(m!==null)m.return=f,ee=m;else for(;ee!==null;){f=ee;var g=f.sibling,T=f.return;if(S1(f),f===d){ee=null;break}if(g!==null){g.return=T,ee=g;break}ee=T}}}var S=i.alternate;if(S!==null){var A=S.child;if(A!==null){S.child=null;do{var C=A.sibling;A.sibling=null,A=C}while(A!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:uc(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ee=b;break e}ee=i.return}}var v=t.current;for(ee=v;ee!==null;){o=ee;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ee=x;else e:for(o=v;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:nh(9,a)}}catch(L){Xe(a,a.return,L)}if(a===o){ee=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ee=D;break e}ee=a.return}}if(be=r,jr(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Kd,t)}catch{}s=!0}return s}finally{Ne=n,vn.transition=e}}return!1}function u_(t,e,n){e=Bo(n,e),e=p1(t,e,1),t=mr(t,e,1),e=Lt(),t!==null&&(al(t,1,e),Xt(t,e))}function Xe(t,e,n){if(t.tag===3)u_(t,t,n);else for(;e!==null;){if(e.tag===3){u_(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(pr===null||!pr.has(s))){t=Bo(n,t),t=g1(e,t,1),e=mr(e,t,1),t=Lt(),e!==null&&(al(e,1,t),Xt(e,t));break}}e=e.return}}function ck(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Lt(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(wt&n)===n&&(at===4||at===3&&(wt&130023424)===wt&&500>et()-fg?mi(t,0):hg|=n),Xt(t,e)}function V1(t,e){e===0&&(t.mode&1?(e=Kl,Kl<<=1,!(Kl&130023424)&&(Kl=4194304)):e=1);var n=Lt();t=xs(t,e),t!==null&&(al(t,e,n),Xt(t,n))}function lk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),V1(t,n)}function uk(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(W(314))}s!==null&&s.delete(e),V1(t,n)}var M1;M1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,XS(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,ze&&e.flags&1048576&&U0(e,rd,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Su(t,e),t=e.pendingProps;var r=Lo(e,Dt.current);Co(e,n),r=og(null,e,s,t,r,n);var i=ag();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(s)?(i=!0,nd(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,tg(e),r.updater=th,e.stateNode=r,r._reactInternals=e,Im(e,s,t,n),e=Sm(null,e,s,!0,i,n)):(e.tag=0,ze&&i&&Kp(e),Vt(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Su(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=hk(s),t=Sn(s,t),r){case 0:e=bm(null,e,s,t,n);break e;case 1:e=e_(null,e,s,t,n);break e;case 11:e=Jv(null,e,s,t,n);break e;case 14:e=Zv(null,e,s,Sn(s.type,t),n);break e}throw Error(W(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Sn(s,r),bm(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Sn(s,r),e_(t,e,s,r,n);case 3:e:{if(w1(e),t===null)throw Error(W(387));s=e.pendingProps,i=e.memoizedState,r=i.element,H0(t,e),ad(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Bo(Error(W(423)),e),e=t_(t,e,s,n,r);break e}else if(s!==r){r=Bo(Error(W(424)),e),e=t_(t,e,s,n,r);break e}else for(on=fr(e.stateNode.containerInfo.firstChild),cn=e,ze=!0,Pn=null,n=W0(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fo(),s===r){e=bs(t,e,n);break e}Vt(t,e,s,n)}e=e.child}return e;case 5:return K0(e),t===null&&wm(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,pm(s,r)?o=null:i!==null&&pm(s,i)&&(e.flags|=32),_1(t,e),Vt(t,e,o,n),e.child;case 6:return t===null&&wm(e),null;case 13:return E1(t,e,n);case 4:return ng(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=zo(e,null,s,n):Vt(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Sn(s,r),Jv(t,e,s,r,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Oe(id,s._currentValue),s._currentValue=o,i!==null)if(Dn(i.value,o)){if(i.children===r.children&&!Qt.current){e=bs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=ws(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Em(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Em(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Vt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Co(e,n),r=wn(r),s=s(r),e.flags|=1,Vt(t,e,s,n),e.child;case 14:return s=e.type,r=Sn(s,e.pendingProps),r=Sn(s.type,r),Zv(t,e,s,r,n);case 15:return y1(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Sn(s,r),Su(t,e),e.tag=1,Yt(s)?(t=!0,nd(e)):t=!1,Co(e,n),m1(e,s,r),Im(e,s,r,n),Sm(null,e,s,!0,t,n);case 19:return T1(t,e,n);case 22:return v1(t,e,n)}throw Error(W(156,e.tag))};function L1(t,e){return d0(t,e)}function dk(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,e,n,s){return new dk(t,e,n,s)}function yg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hk(t){if(typeof t=="function")return yg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vp)return 11;if(t===Mp)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pu(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")yg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case po:return pi(n.children,r,i,e);case Op:o=8,r|=8;break;case Hf:return t=gn(12,n,e,r|2),t.elementType=Hf,t.lanes=i,t;case Kf:return t=gn(13,n,e,r),t.elementType=Kf,t.lanes=i,t;case Qf:return t=gn(19,n,e,r),t.elementType=Qf,t.lanes=i,t;case K2:return rh(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case G2:o=10;break e;case H2:o=9;break e;case Vp:o=11;break e;case Mp:o=14;break e;case Ys:o=16,s=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=gn(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function pi(t,e,n,s){return t=gn(7,t,s,e),t.lanes=n,t}function rh(t,e,n,s){return t=gn(22,t,s,e),t.elementType=K2,t.lanes=n,t.stateNode={isHidden:!1},t}function Sf(t,e,n){return t=gn(6,t,null,e),t.lanes=n,t}function kf(t,e,n){return e=gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fk(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=af(0),this.expirationTimes=af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=af(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function vg(t,e,n,s,r,i,o,a,c){return t=new fk(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=gn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tg(i),t}function mk(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mo,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function F1(t){if(!t)return Sr;t=t._reactInternals;e:{if(Mi(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Yt(n))return F0(t,n,e)}return e}function z1(t,e,n,s,r,i,o,a,c){return t=vg(n,s,!0,t,r,i,o,a,c),t.context=F1(null),n=t.current,s=Lt(),r=gr(n),i=ws(s,r),i.callback=e??null,mr(n,i,r),t.current.lanes=r,al(t,r,s),Xt(t,s),t}function ih(t,e,n,s){var r=e.current,i=Lt(),o=gr(r);return n=F1(n),e.context===null?e.context=n:e.pendingContext=n,e=ws(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=mr(r,e,o),t!==null&&(Rn(t,r,o,i),Iu(t,r,o)),o}function pd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function d_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _g(t,e){d_(t,e),(t=t.alternate)&&d_(t,e)}function pk(){return null}var U1=typeof reportError=="function"?reportError:function(t){console.error(t)};function wg(t){this._internalRoot=t}oh.prototype.render=wg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));ih(t,e,null,null)};oh.prototype.unmount=wg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ii(function(){ih(null,t,null,null)}),e[Is]=null}};function oh(t){this._internalRoot=t}oh.prototype.unstable_scheduleHydration=function(t){if(t){var e=v0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Js.length&&e!==0&&e<Js[n].priority;n++);Js.splice(n,0,t),n===0&&w0(t)}};function Eg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ah(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function h_(){}function gk(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=pd(o);i.call(d)}}var o=z1(e,s,t,0,null,!1,!1,"",h_);return t._reactRootContainer=o,t[Is]=o.current,Cc(t.nodeType===8?t.parentNode:t),Ii(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var d=pd(c);a.call(d)}}var c=vg(t,0,!1,null,null,!1,!1,"",h_);return t._reactRootContainer=c,t[Is]=c.current,Cc(t.nodeType===8?t.parentNode:t),Ii(function(){ih(e,c,n,s)}),c}function ch(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var c=pd(o);a.call(c)}}ih(e,o,t,r)}else o=gk(n,e,t,r,s);return pd(o)}g0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qa(e.pendingLanes);n!==0&&(zp(e,n|1),Xt(e,et()),!(be&6)&&($o=et()+500,jr()))}break;case 13:Ii(function(){var s=xs(t,1);if(s!==null){var r=Lt();Rn(s,t,1,r)}}),_g(t,1)}};Up=function(t){if(t.tag===13){var e=xs(t,134217728);if(e!==null){var n=Lt();Rn(e,t,134217728,n)}_g(t,134217728)}};y0=function(t){if(t.tag===13){var e=gr(t),n=xs(t,e);if(n!==null){var s=Lt();Rn(n,t,e,s)}_g(t,e)}};v0=function(){return Ne};_0=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};im=function(t,e,n){switch(e){case"input":if(Jf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Jd(s);if(!r)throw Error(W(90));Y2(s),Jf(s,r)}}}break;case"textarea":J2(t,n);break;case"select":e=n.value,e!=null&&ko(t,!!n.multiple,e,!1)}};i0=mg;o0=Ii;var yk={usingClientEntryPoint:!1,Events:[ll,_o,Jd,s0,r0,mg]},za={findFiberByHostInstance:ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vk={bundleType:za.bundleType,version:za.version,rendererPackageName:za.rendererPackageName,rendererConfig:za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=l0(t),t===null?null:t.stateNode},findFiberByHostInstance:za.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{Kd=iu.inject(vk),Yn=iu}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yk;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eg(e))throw Error(W(200));return mk(t,e,null,n)};dn.createRoot=function(t,e){if(!Eg(t))throw Error(W(299));var n=!1,s="",r=U1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=vg(t,1,!1,null,null,n,!1,s,r),t[Is]=e.current,Cc(t.nodeType===8?t.parentNode:t),new wg(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=l0(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return Ii(t)};dn.hydrate=function(t,e,n){if(!ah(e))throw Error(W(200));return ch(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!Eg(t))throw Error(W(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=U1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=z1(e,null,t,1,n??null,r,!1,i,o),t[Is]=e.current,Cc(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new oh(e)};dn.render=function(t,e,n){if(!ah(e))throw Error(W(200));return ch(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!ah(t))throw Error(W(40));return t._reactRootContainer?(Ii(function(){ch(null,null,t,!1,function(){t._reactRootContainer=null,t[Is]=null})}),!0):!1};dn.unstable_batchedUpdates=mg;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!ah(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return ch(t,e,n,!1,s)};dn.version="18.3.1-next-f1338f8080-20240426";function B1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B1)}catch(t){console.error(t)}}B1(),B2.exports=dn;var _k=B2.exports,f_=_k;Wf.createRoot=f_.createRoot,Wf.hydrateRoot=f_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zc(){return zc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},zc.apply(this,arguments)}var cr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(cr||(cr={}));const m_="popstate";function wk(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:o,hash:a}=s.location;return Lm("",{pathname:i,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:gd(r)}return Tk(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ek(){return Math.random().toString(36).substr(2,8)}function p_(t,e){return{usr:t.state,key:t.key,idx:e}}function Lm(t,e,n,s){return n===void 0&&(n=null),zc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ca(e):e,{state:n,key:e&&e.key||s||Ek()})}function gd(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ca(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Tk(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,a=cr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(zc({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){a=cr.Pop;let C=f(),b=C==null?null:C-d;d=C,c&&c({action:a,location:A.location,delta:b})}function g(C,b){a=cr.Push;let v=Lm(A.location,C,b);d=f()+1;let x=p_(v,d),D=A.createHref(v);try{o.pushState(x,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(D)}i&&c&&c({action:a,location:A.location,delta:1})}function T(C,b){a=cr.Replace;let v=Lm(A.location,C,b);d=f();let x=p_(v,d),D=A.createHref(v);o.replaceState(x,"",D),i&&c&&c({action:a,location:A.location,delta:0})}function S(C){let b=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof C=="string"?C:gd(C);return v=v.replace(/ $/,"%20"),Ge(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let A={get action(){return a},get location(){return t(r,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(m_,m),c=C,()=>{r.removeEventListener(m_,m),c=null}},createHref(C){return e(r,C)},createURL:S,encodeLocation(C){let b=S(C);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:T,go(C){return o.go(C)}};return A}var g_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(g_||(g_={}));function Ik(t,e,n){return n===void 0&&(n="/"),xk(t,e,n)}function xk(t,e,n,s){let r=typeof e=="string"?ca(e):e,i=qo(r.pathname||"/",n);if(i==null)return null;let o=q1(t);bk(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=Vk(i);a=jk(o[c],d)}return a}function q1(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ge(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=vr([s,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(Ge(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),q1(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Rk(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))r(i,o);else for(let c of W1(i.path))r(i,o,c)}),e}function W1(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=W1(s.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function bk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Dk(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const Sk=/^:[\w-]+$/,kk=3,Ak=2,Pk=1,Nk=10,Ck=-2,y_=t=>t==="*";function Rk(t,e){let n=t.split("/"),s=n.length;return n.some(y_)&&(s+=Ck),e&&(s+=Ak),n.filter(r=>!y_(r)).reduce((r,i)=>r+(Sk.test(i)?kk:i===""?Pk:Nk),s)}function Dk(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function jk(t,e,n){let{routesMeta:s}=t,r={},i="/",o=[];for(let a=0;a<s.length;++a){let c=s[a],d=a===s.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Fm({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!m)return null;Object.assign(r,m.params),o.push({params:r,pathname:vr([i,m.pathname]),pathnameBase:zk(vr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=vr([i,m.pathnameBase]))}return o}function Fm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=Ok(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce((d,f,m)=>{let{paramName:g,isOptional:T}=f;if(g==="*"){let A=a[m]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const S=a[m];return T&&!S?d[g]=void 0:d[g]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Ok(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(s.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function Vk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function Mk(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?ca(t):t;return{pathname:n?n.startsWith("/")?n:Lk(n,e):e,search:Uk(s),hash:Bk(r)}}function Lk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Af(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Tg(t,e){let n=Fk(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Ig(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=ca(t):(r=zc({},t),Ge(!r.pathname||!r.pathname.includes("?"),Af("?","pathname","search",r)),Ge(!r.pathname||!r.pathname.includes("#"),Af("#","pathname","hash",r)),Ge(!r.search||!r.search.includes("#"),Af("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;r.pathname=g.join("/")}a=m>=0?e[m]:"/"}let c=Mk(r,a),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const vr=t=>t.join("/").replace(/\/\/+/g,"/"),zk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Uk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Bk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $k(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const G1=["post","put","patch","delete"];new Set(G1);const qk=["get",...G1];new Set(qk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Uc.apply(this,arguments)}const lh=P.createContext(null),H1=P.createContext(null),Cs=P.createContext(null),uh=P.createContext(null),Rs=P.createContext({outlet:null,matches:[],isDataRoute:!1}),K1=P.createContext(null);function Wk(t,e){let{relative:n}=e===void 0?{}:e;la()||Ge(!1);let{basename:s,navigator:r}=P.useContext(Cs),{hash:i,pathname:o,search:a}=hh(t,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:vr([s,o])),r.createHref({pathname:c,search:a,hash:i})}function la(){return P.useContext(uh)!=null}function ua(){return la()||Ge(!1),P.useContext(uh).location}function Q1(t){P.useContext(Cs).static||P.useLayoutEffect(t)}function dh(){let{isDataRoute:t}=P.useContext(Rs);return t?oA():Gk()}function Gk(){la()||Ge(!1);let t=P.useContext(lh),{basename:e,future:n,navigator:s}=P.useContext(Cs),{matches:r}=P.useContext(Rs),{pathname:i}=ua(),o=JSON.stringify(Tg(r,n.v7_relativeSplatPath)),a=P.useRef(!1);return Q1(()=>{a.current=!0}),P.useCallback(function(d,f){if(f===void 0&&(f={}),!a.current)return;if(typeof d=="number"){s.go(d);return}let m=Ig(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:vr([e,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[e,s,o,i,t])}const Hk=P.createContext(null);function Kk(t){let e=P.useContext(Rs).outlet;return e&&P.createElement(Hk.Provider,{value:t},e)}function hh(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=P.useContext(Cs),{matches:r}=P.useContext(Rs),{pathname:i}=ua(),o=JSON.stringify(Tg(r,s.v7_relativeSplatPath));return P.useMemo(()=>Ig(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Qk(t,e){return Yk(t,e)}function Yk(t,e,n,s){la()||Ge(!1);let{navigator:r}=P.useContext(Cs),{matches:i}=P.useContext(Rs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=ua(),f;if(e){var m;let C=typeof e=="string"?ca(e):e;c==="/"||(m=C.pathname)!=null&&m.startsWith(c)||Ge(!1),f=C}else f=d;let g=f.pathname||"/",T=g;if(c!=="/"){let C=c.replace(/^\//,"").split("/");T="/"+g.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=Ik(t,{pathname:T}),A=tA(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:vr([c,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:vr([c,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,s);return e&&A?P.createElement(uh.Provider,{value:{location:Uc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:cr.Pop}},A):A}function Xk(){let t=iA(),e=$k(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:r},n):null,null)}const Jk=P.createElement(Xk,null);class Zk extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(Rs.Provider,{value:this.props.routeContext},P.createElement(K1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eA(t){let{routeContext:e,match:n,children:s}=t,r=P.useContext(lh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Rs.Provider,{value:e},s)}function tA(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let f=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);f>=0||Ge(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:T}=n,S=m.route.loader&&g[m.route.id]===void 0&&(!T||T[m.route.id]===void 0);if(m.route.lazy||S){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let T,S=!1,A=null,C=null;n&&(T=a&&m.route.id?a[m.route.id]:void 0,A=m.route.errorElement||Jk,c&&(d<0&&g===0?(aA("route-fallback"),S=!0,C=null):d===g&&(S=!0,C=m.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,g+1)),v=()=>{let x;return T?x=A:S?x=C:m.route.Component?x=P.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=f,P.createElement(eA,{match:m,routeContext:{outlet:f,matches:b,isDataRoute:n!=null},children:x})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?P.createElement(Zk,{location:n.location,revalidation:n.revalidation,component:A,error:T,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var Y1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Y1||{}),X1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(X1||{});function nA(t){let e=P.useContext(lh);return e||Ge(!1),e}function sA(t){let e=P.useContext(H1);return e||Ge(!1),e}function rA(t){let e=P.useContext(Rs);return e||Ge(!1),e}function J1(t){let e=rA(),n=e.matches[e.matches.length-1];return n.route.id||Ge(!1),n.route.id}function iA(){var t;let e=P.useContext(K1),n=sA(),s=J1();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function oA(){let{router:t}=nA(Y1.UseNavigateStable),e=J1(X1.UseNavigateStable),n=P.useRef(!1);return Q1(()=>{n.current=!0}),P.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Uc({fromRouteId:e},i)))},[t,e])}const v_={};function aA(t,e,n){v_[t]||(v_[t]=!0)}function cA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function yd(t){let{to:e,replace:n,state:s,relative:r}=t;la()||Ge(!1);let{future:i,static:o}=P.useContext(Cs),{matches:a}=P.useContext(Rs),{pathname:c}=ua(),d=dh(),f=Ig(e,Tg(a,i.v7_relativeSplatPath),c,r==="path"),m=JSON.stringify(f);return P.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:r}),[d,m,r,n,s]),null}function lA(t){return Kk(t.context)}function fn(t){Ge(!1)}function uA(t){let{basename:e="/",children:n=null,location:s,navigationType:r=cr.Pop,navigator:i,static:o=!1,future:a}=t;la()&&Ge(!1);let c=e.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:c,navigator:i,static:o,future:Uc({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof s=="string"&&(s=ca(s));let{pathname:f="/",search:m="",hash:g="",state:T=null,key:S="default"}=s,A=P.useMemo(()=>{let C=qo(f,c);return C==null?null:{location:{pathname:C,search:m,hash:g,state:T,key:S},navigationType:r}},[c,f,m,g,T,S,r]);return A==null?null:P.createElement(Cs.Provider,{value:d},P.createElement(uh.Provider,{children:n,value:A}))}function dA(t){let{children:e,location:n}=t;return Qk(zm(e),n)}new Promise(()=>{});function zm(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(s,r)=>{if(!P.isValidElement(s))return;let i=[...e,r];if(s.type===P.Fragment){n.push.apply(n,zm(s.props.children,i));return}s.type!==fn&&Ge(!1),!s.props.index||!s.props.children||Ge(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=zm(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},vd.apply(this,arguments)}function Z1(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function hA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fA(t,e){return t.button===0&&(!e||e==="_self")&&!hA(t)}const mA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],gA="6";try{window.__reactRouterVersion=gA}catch{}const yA=P.createContext({isTransitioning:!1}),vA="startTransition",__=cb[vA];function _A(t){let{basename:e,children:n,future:s,window:r}=t,i=P.useRef();i.current==null&&(i.current=wk({window:r,v5Compat:!0}));let o=i.current,[a,c]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},f=P.useCallback(m=>{d&&__?__(()=>c(m)):c(m)},[c,d]);return P.useLayoutEffect(()=>o.listen(f),[o,f]),P.useEffect(()=>cA(s),[s]),P.createElement(uA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:s})}const wA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TA=P.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:o,state:a,target:c,to:d,preventScrollReset:f,viewTransition:m}=e,g=Z1(e,mA),{basename:T}=P.useContext(Cs),S,A=!1;if(typeof d=="string"&&EA.test(d)&&(S=d,wA))try{let x=new URL(window.location.href),D=d.startsWith("//")?new URL(x.protocol+d):new URL(d),L=qo(D.pathname,T);D.origin===x.origin&&L!=null?d=L+D.search+D.hash:A=!0}catch{}let C=Wk(d,{relative:r}),b=xA(d,{replace:o,state:a,target:c,preventScrollReset:f,relative:r,viewTransition:m});function v(x){s&&s(x),x.defaultPrevented||b(x)}return P.createElement("a",vd({},g,{href:S||C,onClick:A||i?s:v,ref:n,target:c}))}),to=P.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:r=!1,className:i="",end:o=!1,style:a,to:c,viewTransition:d,children:f}=e,m=Z1(e,pA),g=hh(c,{relative:m.relative}),T=ua(),S=P.useContext(H1),{navigator:A,basename:C}=P.useContext(Cs),b=S!=null&&bA(g)&&d===!0,v=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,x=T.pathname,D=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(x=x.toLowerCase(),D=D?D.toLowerCase():null,v=v.toLowerCase()),D&&C&&(D=qo(D,C)||D);const L=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let M=x===v||!o&&x.startsWith(v)&&x.charAt(L)==="/",w=D!=null&&(D===v||!o&&D.startsWith(v)&&D.charAt(v.length)==="/"),y={isActive:M,isPending:w,isTransitioning:b},I=M?s:void 0,E;typeof i=="function"?E=i(y):E=[i,M?"active":null,w?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(y):a;return P.createElement(TA,vd({},m,{"aria-current":I,className:E,ref:n,style:N,to:c,viewTransition:d}),typeof f=="function"?f(y):f)});var Um;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Um||(Um={}));var w_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(w_||(w_={}));function IA(t){let e=P.useContext(lh);return e||Ge(!1),e}function xA(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,c=dh(),d=ua(),f=hh(t,{relative:o});return P.useCallback(m=>{if(fA(m,n)){m.preventDefault();let g=s!==void 0?s:gd(d)===gd(f);c(t,{replace:g,state:r,preventScrollReset:i,relative:o,viewTransition:a})}},[d,c,f,s,r,n,t,i,o,a])}function bA(t,e){e===void 0&&(e={});let n=P.useContext(yA);n==null&&Ge(!1);let{basename:s}=IA(Um.useViewTransitionState),r=hh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=qo(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=qo(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Fm(r.pathname,o)!=null||Fm(r.pathname,i)!=null}const SA=()=>{};var E_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},kA=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},tE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,f=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|d>>6,T=d&63;c||(T=64,o||(g=64)),s.push(n[f],n[m],n[g],n[T])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||d==null||m==null)throw new AA;const g=i<<2|a>>4;if(s.push(g),d!==64){const T=a<<4&240|d>>2;if(s.push(T),m!==64){const S=d<<6&192|m;s.push(S)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PA=function(t){const e=eE(t);return tE.encodeByteArray(e,!0)},_d=function(t){return PA(t).replace(/\./g,"")},nE=function(t){try{return tE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=()=>sE().__FIREBASE_DEFAULTS__,CA=()=>{if(typeof process>"u"||typeof E_>"u")return;const t=E_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nE(t[1]);return e&&JSON.parse(e)},fh=()=>{try{return SA()||NA()||CA()||RA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rE=t=>{var e,n;return(n=(e=fh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},iE=t=>{const e=rE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},oE=()=>{var t;return(t=fh())===null||t===void 0?void 0:t.config},aE=t=>{var e;return(e=fh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){return t.endsWith(".cloudworkstations.dev")}async function xg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_d(JSON.stringify(n)),_d(JSON.stringify(o)),""].join(".")}const fc={};function OA(){const t={prod:[],emulator:[]};for(const e of Object.keys(fc))fc[e]?t.emulator.push(e):t.prod.push(e);return t}function VA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let T_=!1;function bg(t,e){if(typeof window>"u"||typeof document>"u"||!Li(window.location.host)||fc[t]===e||fc[t]||T_)return;fc[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=OA().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,T){g.setAttribute("width","24"),g.setAttribute("id",T),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{T_=!0,o()},g}function f(g,T){g.setAttribute("id",T),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=VA(s),T=n("text"),S=document.getElementById(T)||document.createElement("span"),A=n("learnmore"),C=document.getElementById(A)||document.createElement("a"),b=n("preprendIcon"),v=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const x=g.element;a(x),f(C,A);const D=d();c(v,b),x.append(v,S,C,D),document.body.appendChild(x)}i?(S.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function cE(){var t;const e=(t=fh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UA(){const t=ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lE(){return!cE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uE(){return!cE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function dE(){try{return typeof indexedDB=="object"}catch{return!1}}function BA(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="FirebaseError";class Ds extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=$A,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?qA(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ds(r,a,s)}}function qA(t,e){return t.replace(WA,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const WA=/\{\$([^}]+)}/g;function GA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xi(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(I_(i)&&I_(o)){if(!xi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function I_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Ja(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HA(t,e){const n=new KA(t,e);return n.subscribe.bind(n)}class KA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");QA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Pf),r.error===void 0&&(r.error=Pf),r.complete===void 0&&(r.complete=Pf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class kr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new DA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JA(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:XA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XA(t){return t===ti?void 0:t}function JA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const eP={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},tP=ve.INFO,nP={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},sP=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=nP[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sg{constructor(e){this.name=e,this._logLevel=tP,this._logHandler=sP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const rP=(t,e)=>e.some(n=>t instanceof n);let x_,b_;function iP(){return x_||(x_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oP(){return b_||(b_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hE=new WeakMap,Bm=new WeakMap,fE=new WeakMap,Nf=new WeakMap,kg=new WeakMap;function aP(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_r(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hE.set(n,t)}).catch(()=>{}),kg.set(e,t),e}function cP(t){if(Bm.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bm.set(t,e)}let $m={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lP(t){$m=t($m)}function uP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Cf(this),e,...n);return fE.set(s,e.sort?e.sort():[e]),_r(s)}:oP().includes(t)?function(...e){return t.apply(Cf(this),e),_r(hE.get(this))}:function(...e){return _r(t.apply(Cf(this),e))}}function dP(t){return typeof t=="function"?uP(t):(t instanceof IDBTransaction&&cP(t),rP(t,iP())?new Proxy(t,$m):t)}function _r(t){if(t instanceof IDBRequest)return aP(t);if(Nf.has(t))return Nf.get(t);const e=dP(t);return e!==t&&(Nf.set(t,e),kg.set(e,t)),e}const Cf=t=>kg.get(t);function hP(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=_r(o);return s&&o.addEventListener("upgradeneeded",c=>{s(_r(o.result),c.oldVersion,c.newVersion,_r(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const fP=["get","getKey","getAll","getAllKeys","count"],mP=["put","add","delete","clear"],Rf=new Map;function S_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rf.get(e))return Rf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=mP.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||fP.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),r&&c.done]))[0]};return Rf.set(e,i),i}lP(t=>({...t,get:(e,n,s)=>S_(e,n)||t.get(e,n,s),has:(e,n)=>!!S_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gP(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function gP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qm="@firebase/app",k_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new Sg("@firebase/app"),yP="@firebase/app-compat",vP="@firebase/analytics-compat",_P="@firebase/analytics",wP="@firebase/app-check-compat",EP="@firebase/app-check",TP="@firebase/auth",IP="@firebase/auth-compat",xP="@firebase/database",bP="@firebase/data-connect",SP="@firebase/database-compat",kP="@firebase/functions",AP="@firebase/functions-compat",PP="@firebase/installations",NP="@firebase/installations-compat",CP="@firebase/messaging",RP="@firebase/messaging-compat",DP="@firebase/performance",jP="@firebase/performance-compat",OP="@firebase/remote-config",VP="@firebase/remote-config-compat",MP="@firebase/storage",LP="@firebase/storage-compat",FP="@firebase/firestore",zP="@firebase/ai",UP="@firebase/firestore-compat",BP="firebase",$P="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="[DEFAULT]",qP={[qm]:"fire-core",[yP]:"fire-core-compat",[_P]:"fire-analytics",[vP]:"fire-analytics-compat",[EP]:"fire-app-check",[wP]:"fire-app-check-compat",[TP]:"fire-auth",[IP]:"fire-auth-compat",[xP]:"fire-rtdb",[bP]:"fire-data-connect",[SP]:"fire-rtdb-compat",[kP]:"fire-fn",[AP]:"fire-fn-compat",[PP]:"fire-iid",[NP]:"fire-iid-compat",[CP]:"fire-fcm",[RP]:"fire-fcm-compat",[DP]:"fire-perf",[jP]:"fire-perf-compat",[OP]:"fire-rc",[VP]:"fire-rc-compat",[MP]:"fire-gcs",[LP]:"fire-gcs-compat",[FP]:"fire-fst",[UP]:"fire-fst-compat",[zP]:"fire-vertex","fire-js":"fire-js",[BP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map,WP=new Map,Gm=new Map;function A_(t,e){try{t.container.addComponent(e)}catch(n){Ss.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bi(t){const e=t.name;if(Gm.has(e))return Ss.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,t);for(const n of wd.values())A_(n,t);for(const n of WP.values())A_(n,t);return!0}function mh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new dl("app","Firebase",GP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=$P;function mE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Wm,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw wr.create("bad-app-name",{appName:String(r)});if(n||(n=oE()),!n)throw wr.create("no-options");const i=wd.get(r);if(i){if(xi(n,i.options)&&xi(s,i.config))return i;throw wr.create("duplicate-app",{appName:r})}const o=new ZA(r);for(const c of Gm.values())o.addComponent(c);const a=new HP(n,s,o);return wd.set(r,a),a}function Ag(t=Wm){const e=wd.get(t);if(!e&&t===Wm&&oE())return mE();if(!e)throw wr.create("no-app",{appName:t});return e}function Jn(t,e,n){var s;let r=(s=qP[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ss.warn(a.join(" "));return}bi(new kr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="firebase-heartbeat-database",QP=1,Bc="firebase-heartbeat-store";let Df=null;function pE(){return Df||(Df=hP(KP,QP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bc)}catch(n){console.warn(n)}}}}).catch(t=>{throw wr.create("idb-open",{originalErrorMessage:t.message})})),Df}async function YP(t){try{const n=(await pE()).transaction(Bc),s=await n.objectStore(Bc).get(gE(t));return await n.done,s}catch(e){if(e instanceof Ds)Ss.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ss.warn(n.message)}}}async function P_(t,e){try{const s=(await pE()).transaction(Bc,"readwrite");await s.objectStore(Bc).put(e,gE(t)),await s.done}catch(n){if(n instanceof Ds)Ss.warn(n.message);else{const s=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ss.warn(s.message)}}}function gE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=1024,JP=30;class ZP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tN(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=N_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>JP){const o=nN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ss.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=N_(),{heartbeatsToSend:s,unsentEntries:r}=eN(this._heartbeatsCache.heartbeats),i=_d(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ss.warn(n),""}}}function N_(){return new Date().toISOString().substring(0,10)}function eN(t,e=XP){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),C_(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),C_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class tN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dE()?BA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return P_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return P_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function C_(t){return _d(JSON.stringify({version:2,heartbeats:t})).length}function nN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t){bi(new kr("platform-logger",e=>new pP(e),"PRIVATE")),bi(new kr("heartbeat",e=>new ZP(e),"PRIVATE")),Jn(qm,k_,t),Jn(qm,k_,"esm2017"),Jn("fire-js","")}sN("");function Pg(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function yE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rN=yE,vE=new dl("auth","Firebase",yE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Sg("@firebase/auth");function iN(t,...e){Ed.logLevel<=ve.WARN&&Ed.warn(`Auth (${da}): ${t}`,...e)}function Nu(t,...e){Ed.logLevel<=ve.ERROR&&Ed.error(`Auth (${da}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,...e){throw Ng(t,...e)}function Zn(t,...e){return Ng(t,...e)}function _E(t,e,n){const s=Object.assign(Object.assign({},rN()),{[e]:n});return new dl("auth","Firebase",s).create(e,{appName:t.name})}function Es(t){return _E(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ng(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return vE.create(t,...e)}function de(t,e,...n){if(!t)throw Ng(e,...n)}function gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nu(e),new Error(e)}function ks(t,e){t||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function oN(){return R_()==="http:"||R_()==="https:"}function R_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oN()||FA()||"connection"in navigator)?navigator.onLine:!0}function cN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ks(n>e,"Short delay should be less than long delay!"),this.isMobile=MA()||zA()}get(){return aN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t,e){ks(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dN=new fl(3e4,6e4);function Or(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vr(t,e,n,s,r={}){return EE(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=hl(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return LA()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Li(t.emulatorConfig.host)&&(d.credentials="include"),wE.fetch()(await TE(t,t.config.apiHost,n,a),d)})}async function EE(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},lN),e);try{const r=new fN(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ou(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ou(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ou(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ou(t,"user-disabled",o);const f=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _E(t,f,d);jn(t,f)}}catch(r){if(r instanceof Ds)throw r;jn(t,"network-request-failed",{message:String(r)})}}async function ml(t,e,n,s,r={}){const i=await Vr(t,e,n,s,r);return"mfaPendingCredential"in i&&jn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function TE(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Cg(t.config,r):`${t.config.apiScheme}://${r}`;return uN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function hN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Zn(this.auth,"network-request-failed")),dN.get())})}}function ou(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Zn(t,e,s);return r.customData._tokenResponse=n,r}function D_(t){return t!==void 0&&t.enterprise!==void 0}class mN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pN(t,e){return Vr(t,"GET","/v2/recaptchaConfig",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(t,e){return Vr(t,"POST","/v1/accounts:delete",e)}async function Td(t,e){return Vr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yN(t,e=!1){const n=rt(t),s=await n.getIdToken(e),r=Rg(s);de(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:mc(jf(r.auth_time)),issuedAtTime:mc(jf(r.iat)),expirationTime:mc(jf(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function jf(t){return Number(t)*1e3}function Rg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Nu("JWT malformed, contained fewer than 3 sections"),null;try{const r=nE(n);return r?JSON.parse(r):(Nu("Failed to decode base64 JWT payload"),null)}catch(r){return Nu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function j_(t){const e=Rg(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ds&&vN(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function vN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(t){var e;const n=t.auth,s=await t.getIdToken(),r=await $c(t,Td(n,{idToken:s}));de(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?IE(i.providerUserInfo):[],a=EN(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=c?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Km(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function wN(t){const e=rt(t);await Id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EN(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function IE(t){return t.map(e=>{var{providerId:n}=e,s=Pg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(t,e){const n=await EE(t,{},async()=>{const s=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await TE(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:s};return t.emulatorConfig&&Li(t.emulatorConfig.host)&&(c.credentials="include"),wE.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function IN(t,e){return Vr(t,"POST","/v2/accounts:revokeToken",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):j_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=j_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await TN(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Do;return s&&(de(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(de(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(de(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nn{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=Pg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _N(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Km(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $c(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yN(this,e)}reload(){return wN(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Id(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(Es(this.auth));const e=await this.getIdToken();return await $c(this,gN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,a,c,d,f;const m=(s=n.displayName)!==null&&s!==void 0?s:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,T=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,b=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:x,emailVerified:D,isAnonymous:L,providerData:M,stsTokenManager:w}=n;de(x&&w,e,"internal-error");const y=Do.fromJSON(this.name,w);de(typeof x=="string",e,"internal-error"),Ws(m,e.name),Ws(g,e.name),de(typeof D=="boolean",e,"internal-error"),de(typeof L=="boolean",e,"internal-error"),Ws(T,e.name),Ws(S,e.name),Ws(A,e.name),Ws(C,e.name),Ws(b,e.name),Ws(v,e.name);const I=new Nn({uid:x,auth:e,email:g,emailVerified:D,displayName:m,isAnonymous:L,photoURL:S,phoneNumber:T,tenantId:A,stsTokenManager:y,createdAt:b,lastLoginAt:v});return M&&Array.isArray(M)&&(I.providerData=M.map(E=>Object.assign({},E))),C&&(I._redirectEventId=C),I}static async _fromIdTokenResponse(e,n,s=!1){const r=new Do;r.updateFromServerResponse(n);const i=new Nn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Id(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];de(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?IE(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),a=new Do;a.updateFromIdToken(s);const c=new Nn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Km(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=new Map;function ys(t){ks(t instanceof Function,"Expected a class definition");let e=O_.get(t);return e?(ks(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,O_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xE.type="NONE";const V_=xE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t,e,n){return`firebase:${t}:${e}:${n}`}class jo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Cu(this.userKey,r.apiKey,i),this.fullPersistenceKey=Cu("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Td(this.auth,{idToken:e}).catch(()=>{});return n?Nn._fromGetAccountInfoResponse(this.auth,n,e):null}return Nn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new jo(ys(V_),e,s);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=r[0]||ys(V_);const o=Cu(s,e.config.apiKey,e.name);let a=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await Td(e,{idToken:f}).catch(()=>{});if(!g)break;m=await Nn._fromGetAccountInfoResponse(e,g,f)}else m=Nn._fromJSON(e,f);d!==i&&(a=m),i=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new jo(i,e,s):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new jo(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NE(e))return"Blackberry";if(CE(e))return"Webos";if(SE(e))return"Safari";if((e.includes("chrome/")||kE(e))&&!e.includes("edge/"))return"Chrome";if(PE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function bE(t=ct()){return/firefox\//i.test(t)}function SE(t=ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kE(t=ct()){return/crios\//i.test(t)}function AE(t=ct()){return/iemobile/i.test(t)}function PE(t=ct()){return/android/i.test(t)}function NE(t=ct()){return/blackberry/i.test(t)}function CE(t=ct()){return/webos/i.test(t)}function Dg(t=ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xN(t=ct()){var e;return Dg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bN(){return UA()&&document.documentMode===10}function RE(t=ct()){return Dg(t)||PE(t)||CE(t)||NE(t)||/windows phone/i.test(t)||AE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t,e=[]){let n;switch(t){case"Browser":n=M_(ct());break;case"Worker":n=`${M_(ct())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${da}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,e={}){return Vr(t,"GET","/v2/passwordPolicy",Or(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=6;class PN{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:AN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L_(this),this.idTokenSubscription=new L_(this),this.beforeStateQueue=new SN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ys(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Td(this,{idToken:e}),s=await Nn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Id(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(Es(this));const n=e?rt(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(Es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(Es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kN(this),n=new PN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await IN(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ys(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[ys(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&iN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fi(t){return rt(t)}class L_{constructor(e){this.auth=e,this.observer=null,this.addObserver=HA(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CN(t){ph=t}function jE(t){return ph.loadJS(t)}function RN(){return ph.recaptchaEnterpriseScript}function DN(){return ph.gapiScript}function jN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ON{constructor(){this.enterprise=new VN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class VN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const MN="recaptcha-enterprise",OE="NO_RECAPTCHA";class LN{constructor(e){this.type=MN,this.auth=Fi(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{pN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new mN(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})})}function r(i,o,a){const c=window.grecaptcha;D_(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(OE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ON().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&D_(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=RN();c.length!==0&&(c+=a),jE(c).then(()=>{r(a,i,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function F_(t,e,n,s=!1,r=!1){const i=new LN(t);let o;if(r)o=OE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,d=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Qm(t,e,n,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await F_(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await F_(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t,e){const n=mh(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(xi(i,e??{}))return r;jn(r,"already-initialized")}return n.initialize({options:e})}function zN(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ys);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function UN(t,e,n){const s=Fi(t);de(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=VE(e),{host:o,port:a}=BN(e),c=a===null?"":`:${a}`,d={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){de(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),de(xi(d,s.config.emulator)&&xi(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Li(o)?(xg(`${i}//${o}${c}`),bg("Auth",!0)):$N()}function VE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BN(t){const e=VE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:z_(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:z_(o)}}}function z_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $N(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,n){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function qN(t,e){return Vr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e){return ml(t,"POST","/v1/accounts:signInWithPassword",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e){return ml(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))}async function HN(t,e){return ml(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends jg{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new qc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new qc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qm(e,n,"signInWithPassword",WN);case"emailLink":return GN(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qm(e,s,"signUpPassword",qN);case"emailLink":return HN(e,{idToken:n,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(t,e){return ml(t,"POST","/v1/accounts:signInWithIdp",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="http://localhost";class Si extends jg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=Pg(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new Si(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Oo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Oo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oo(e,n)}buildRequest(){const e={requestUri:KN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YN(t){const e=Xa(Ja(t)).link,n=e?Xa(Ja(e)).deep_link_id:null,s=Xa(Ja(t)).deep_link_id;return(s?Xa(Ja(s)).link:null)||s||n||e||t}class Og{constructor(e){var n,s,r,i,o,a;const c=Xa(Ja(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(s=c.oobCode)!==null&&s!==void 0?s:null,m=QN((r=c.mode)!==null&&r!==void 0?r:null);de(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=YN(e);try{return new Og(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.providerId=ha.PROVIDER_ID}static credential(e,n){return qc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Og.parseLink(n);return de(s,"argument-error"),qc._fromEmailAndCode(e,s.code,s.tenantId)}}ha.PROVIDER_ID="password";ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends ME{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends pl{constructor(){super("facebook.com")}static credential(e){return Si._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.FACEBOOK_SIGN_IN_METHOD="facebook.com";er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Si._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return tr.credential(n,s)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends pl{constructor(){super("github.com")}static credential(e){return Si._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends pl{constructor(){super("twitter.com")}static credential(e,n){return Si._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return sr.credential(n,s)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,e){return ml(t,"POST","/v1/accounts:signUp",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Nn._fromIdTokenResponse(e,s,r),o=U_(s);return new ki({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=U_(s);return new ki({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function U_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends Ds{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,xd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new xd(e,n,s,r)}}function LE(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?xd._fromErrorAndOperation(t,i,e,s):i})}async function JN(t,e,n=!1){const s=await $c(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ki._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e,n=!1){const{auth:s}=t;if(sn(s.app))return Promise.reject(Es(s));const r="reauthenticate";try{const i=await $c(t,LE(s,r,e,t),n);de(i.idToken,s,"internal-error");const o=Rg(i.idToken);de(o,s,"internal-error");const{sub:a}=o;return de(t.uid===a,s,"user-mismatch"),ki._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&jn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FE(t,e,n=!1){if(sn(t.app))return Promise.reject(Es(t));const s="signIn",r=await LE(t,s,e),i=await ki._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function eC(t,e){return FE(Fi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(t){const e=Fi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UE(t,e,n){if(sn(t.app))return Promise.reject(Es(t));const s=Fi(t),o=await Qm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&zE(t),c}),a=await ki._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function BE(t,e,n){return sn(t.app)?Promise.reject(Es(t)):eC(rt(t),ha.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&zE(t),s})}function tC(t,e,n,s){return rt(t).onIdTokenChanged(e,n,s)}function nC(t,e,n){return rt(t).beforeAuthStateChanged(e,n)}function sC(t,e,n,s){return rt(t).onAuthStateChanged(e,n,s)}function $E(t){return rt(t).signOut()}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=1e3,iC=10;class WE extends qE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);bN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,iC):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},rC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WE.type="LOCAL";const oC=WE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE extends qE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GE.type="SESSION";const HE=GE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new gh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async d=>d(n.origin,i)),c=await aC(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const d=Vg("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function lC(t){es().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function uC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hC(){return KE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firebaseLocalStorageDb",fC=1,Sd="firebaseLocalStorage",YE="fbase_key";class gl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yh(t,e){return t.transaction([Sd],e?"readwrite":"readonly").objectStore(Sd)}function mC(){const t=indexedDB.deleteDatabase(QE);return new gl(t).toPromise()}function Ym(){const t=indexedDB.open(QE,fC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Sd,{keyPath:YE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Sd)?e(s):(s.close(),await mC(),e(await Ym()))})})}async function B_(t,e,n){const s=yh(t,!0).put({[YE]:e,value:n});return new gl(s).toPromise()}async function pC(t,e){const n=yh(t,!1).get(e),s=await new gl(n).toPromise();return s===void 0?null:s.value}function $_(t,e){const n=yh(t,!0).delete(e);return new gl(n).toPromise()}const gC=800,yC=3;class XE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>yC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gh._getInstance(hC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await uC(),!this.activeServiceWorker)return;this.sender=new cC(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ym();return await B_(e,bd,"1"),await $_(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>B_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>pC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=yh(r,!1).getAll();return new gl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XE.type="LOCAL";const vC=XE;new fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e){return e?ys(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends jg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wC(t){return FE(t.auth,new Mg(t),t.bypassAuthState)}function EC(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),ZN(n,new Mg(t),t.bypassAuthState)}async function TC(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),JN(n,new Mg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wC;case"linkViaPopup":case"linkViaRedirect":return TC;case"reauthViaPopup":case"reauthViaRedirect":return EC;default:jn(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new fl(2e3,1e4);class So extends JE{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){ks(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IC.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="pendingRedirect",Ru=new Map;class bC extends JE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Ru.get(this.auth._key());if(!e){try{const s=await SC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Ru.set(this.auth._key(),e)}return this.bypassAuthState||Ru.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SC(t,e){const n=PC(e),s=AC(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function kC(t,e){Ru.set(t._key(),e)}function AC(t){return ys(t._redirectPersistence)}function PC(t){return Cu(xC,t.config.apiKey,t.name)}async function NC(t,e,n=!1){if(sn(t.app))return Promise.reject(Es(t));const s=Fi(t),r=_C(s,e),o=await new bC(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=10*60*1e3;class RC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!ZE(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CC&&this.cachedEventUids.clear(),this.cachedEventUids.has(q_(e))}saveEventToCache(e){this.cachedEventUids.add(q_(e)),this.lastProcessedEventTime=Date.now()}}function q_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ZE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(t,e={}){return Vr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VC=/^https?/;async function MC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jC(t);for(const n of e)try{if(LC(n))return}catch{}jn(t,"unauthorized-domain")}function LC(t){const e=Hm(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!VC.test(n))return!1;if(OC.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new fl(3e4,6e4);function W_(){const t=es().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zC(t){return new Promise((e,n)=>{var s,r,i;function o(){W_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W_(),n(Zn(t,"network-request-failed"))},timeout:FC.get()})}if(!((r=(s=es().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=es().gapi)===null||i===void 0)&&i.load)o();else{const a=jN("iframefcb");return es()[a]=()=>{gapi.load?o():n(Zn(t,"network-request-failed"))},jE(`${DN()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Du=null,e})}let Du=null;function UC(t){return Du=Du||zC(t),Du}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new fl(5e3,15e3),$C="__/auth/iframe",qC="emulator/auth/iframe",WC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HC(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Cg(e,qC):`https://${t.config.authDomain}/${$C}`,s={apiKey:e.apiKey,appName:t.name,v:da},r=GC.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${hl(s).slice(1)}`}async function KC(t){const e=await UC(t),n=es().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:HC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WC,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Zn(t,"network-request-failed"),a=es().setTimeout(()=>{i(o)},BC.get());function c(){es().clearTimeout(a),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YC=500,XC=600,JC="_blank",ZC="http://localhost";class G_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eR(t,e,n,s=YC,r=XC){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},QC),{width:s.toString(),height:r.toString(),top:i,left:o}),d=ct().toLowerCase();n&&(a=kE(d)?JC:n),bE(d)&&(e=e||ZC,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[T,S])=>`${g}${T}=${S},`,"");if(xN(d)&&a!=="_self")return tR(e||"",a),new G_(null);const m=window.open(e||"",a,f);de(m,t,"popup-blocked");try{m.focus()}catch{}return new G_(m)}function tR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="__/auth/handler",sR="emulator/auth/handler",rR=encodeURIComponent("fac");async function H_(t,e,n,s,r,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:da,eventId:r};if(e instanceof ME){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",GA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof pl){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const c=await t._getAppCheckToken(),d=c?`#${rR}=${encodeURIComponent(c)}`:"";return`${iR(t)}?${hl(a).slice(1)}${d}`}function iR({config:t}){return t.emulator?Cg(t,sR):`https://${t.authDomain}/${nR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="webStorageSupport";class oR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HE,this._completeRedirectFn=NC,this._overrideRedirectResult=kC}async _openPopup(e,n,s,r){var i;ks((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await H_(e,n,s,Hm(),r);return eR(e,o,Vg())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await H_(e,n,s,Hm(),r);return lC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(ks(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await KC(e),s=new RC(e);return n.register("authEvent",r=>(de(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Of,{type:Of},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Of];o!==void 0&&n(!!o),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RE()||SE()||Dg()}}const aR=oR;var K_="@firebase/auth",Q_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uR(t){bi(new kr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DE(t)},d=new NN(s,r,i,c);return zN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),bi(new kr("auth-internal",e=>{const n=Fi(e.getProvider("auth").getImmediate());return(s=>new cR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jn(K_,Q_,lR(t)),Jn(K_,Q_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=5*60,hR=aE("authIdTokenMaxAge")||dR;let Y_=null;const fR=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>hR)return;const r=n==null?void 0:n.token;Y_!==r&&(Y_=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function eT(t=Ag()){const e=mh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=FN(t,{popupRedirectResolver:aR,persistence:[vC,oC,HE]}),s=aE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=fR(i.toString());nC(n,o,()=>o(n.currentUser)),tC(n,a=>o(a))}}const r=rE("auth");return r&&UN(n,`http://${r}`),n}function mR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}CN({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Zn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",mR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uR("Browser");var X_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Er,tT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function I(){}I.prototype=y.prototype,w.D=y.prototype,w.prototype=new I,w.prototype.constructor=w,w.C=function(E,N,R){for(var k=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)k[oe-2]=arguments[oe];return y.prototype[N].apply(E,k)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,y,I){I||(I=0);var E=Array(16);if(typeof y=="string")for(var N=0;16>N;++N)E[N]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(N=0;16>N;++N)E[N]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=w.g[0],I=w.g[1],N=w.g[2];var R=w.g[3],k=y+(R^I&(N^R))+E[0]+3614090360&4294967295;y=I+(k<<7&4294967295|k>>>25),k=R+(N^y&(I^N))+E[1]+3905402710&4294967295,R=y+(k<<12&4294967295|k>>>20),k=N+(I^R&(y^I))+E[2]+606105819&4294967295,N=R+(k<<17&4294967295|k>>>15),k=I+(y^N&(R^y))+E[3]+3250441966&4294967295,I=N+(k<<22&4294967295|k>>>10),k=y+(R^I&(N^R))+E[4]+4118548399&4294967295,y=I+(k<<7&4294967295|k>>>25),k=R+(N^y&(I^N))+E[5]+1200080426&4294967295,R=y+(k<<12&4294967295|k>>>20),k=N+(I^R&(y^I))+E[6]+2821735955&4294967295,N=R+(k<<17&4294967295|k>>>15),k=I+(y^N&(R^y))+E[7]+4249261313&4294967295,I=N+(k<<22&4294967295|k>>>10),k=y+(R^I&(N^R))+E[8]+1770035416&4294967295,y=I+(k<<7&4294967295|k>>>25),k=R+(N^y&(I^N))+E[9]+2336552879&4294967295,R=y+(k<<12&4294967295|k>>>20),k=N+(I^R&(y^I))+E[10]+4294925233&4294967295,N=R+(k<<17&4294967295|k>>>15),k=I+(y^N&(R^y))+E[11]+2304563134&4294967295,I=N+(k<<22&4294967295|k>>>10),k=y+(R^I&(N^R))+E[12]+1804603682&4294967295,y=I+(k<<7&4294967295|k>>>25),k=R+(N^y&(I^N))+E[13]+4254626195&4294967295,R=y+(k<<12&4294967295|k>>>20),k=N+(I^R&(y^I))+E[14]+2792965006&4294967295,N=R+(k<<17&4294967295|k>>>15),k=I+(y^N&(R^y))+E[15]+1236535329&4294967295,I=N+(k<<22&4294967295|k>>>10),k=y+(N^R&(I^N))+E[1]+4129170786&4294967295,y=I+(k<<5&4294967295|k>>>27),k=R+(I^N&(y^I))+E[6]+3225465664&4294967295,R=y+(k<<9&4294967295|k>>>23),k=N+(y^I&(R^y))+E[11]+643717713&4294967295,N=R+(k<<14&4294967295|k>>>18),k=I+(R^y&(N^R))+E[0]+3921069994&4294967295,I=N+(k<<20&4294967295|k>>>12),k=y+(N^R&(I^N))+E[5]+3593408605&4294967295,y=I+(k<<5&4294967295|k>>>27),k=R+(I^N&(y^I))+E[10]+38016083&4294967295,R=y+(k<<9&4294967295|k>>>23),k=N+(y^I&(R^y))+E[15]+3634488961&4294967295,N=R+(k<<14&4294967295|k>>>18),k=I+(R^y&(N^R))+E[4]+3889429448&4294967295,I=N+(k<<20&4294967295|k>>>12),k=y+(N^R&(I^N))+E[9]+568446438&4294967295,y=I+(k<<5&4294967295|k>>>27),k=R+(I^N&(y^I))+E[14]+3275163606&4294967295,R=y+(k<<9&4294967295|k>>>23),k=N+(y^I&(R^y))+E[3]+4107603335&4294967295,N=R+(k<<14&4294967295|k>>>18),k=I+(R^y&(N^R))+E[8]+1163531501&4294967295,I=N+(k<<20&4294967295|k>>>12),k=y+(N^R&(I^N))+E[13]+2850285829&4294967295,y=I+(k<<5&4294967295|k>>>27),k=R+(I^N&(y^I))+E[2]+4243563512&4294967295,R=y+(k<<9&4294967295|k>>>23),k=N+(y^I&(R^y))+E[7]+1735328473&4294967295,N=R+(k<<14&4294967295|k>>>18),k=I+(R^y&(N^R))+E[12]+2368359562&4294967295,I=N+(k<<20&4294967295|k>>>12),k=y+(I^N^R)+E[5]+4294588738&4294967295,y=I+(k<<4&4294967295|k>>>28),k=R+(y^I^N)+E[8]+2272392833&4294967295,R=y+(k<<11&4294967295|k>>>21),k=N+(R^y^I)+E[11]+1839030562&4294967295,N=R+(k<<16&4294967295|k>>>16),k=I+(N^R^y)+E[14]+4259657740&4294967295,I=N+(k<<23&4294967295|k>>>9),k=y+(I^N^R)+E[1]+2763975236&4294967295,y=I+(k<<4&4294967295|k>>>28),k=R+(y^I^N)+E[4]+1272893353&4294967295,R=y+(k<<11&4294967295|k>>>21),k=N+(R^y^I)+E[7]+4139469664&4294967295,N=R+(k<<16&4294967295|k>>>16),k=I+(N^R^y)+E[10]+3200236656&4294967295,I=N+(k<<23&4294967295|k>>>9),k=y+(I^N^R)+E[13]+681279174&4294967295,y=I+(k<<4&4294967295|k>>>28),k=R+(y^I^N)+E[0]+3936430074&4294967295,R=y+(k<<11&4294967295|k>>>21),k=N+(R^y^I)+E[3]+3572445317&4294967295,N=R+(k<<16&4294967295|k>>>16),k=I+(N^R^y)+E[6]+76029189&4294967295,I=N+(k<<23&4294967295|k>>>9),k=y+(I^N^R)+E[9]+3654602809&4294967295,y=I+(k<<4&4294967295|k>>>28),k=R+(y^I^N)+E[12]+3873151461&4294967295,R=y+(k<<11&4294967295|k>>>21),k=N+(R^y^I)+E[15]+530742520&4294967295,N=R+(k<<16&4294967295|k>>>16),k=I+(N^R^y)+E[2]+3299628645&4294967295,I=N+(k<<23&4294967295|k>>>9),k=y+(N^(I|~R))+E[0]+4096336452&4294967295,y=I+(k<<6&4294967295|k>>>26),k=R+(I^(y|~N))+E[7]+1126891415&4294967295,R=y+(k<<10&4294967295|k>>>22),k=N+(y^(R|~I))+E[14]+2878612391&4294967295,N=R+(k<<15&4294967295|k>>>17),k=I+(R^(N|~y))+E[5]+4237533241&4294967295,I=N+(k<<21&4294967295|k>>>11),k=y+(N^(I|~R))+E[12]+1700485571&4294967295,y=I+(k<<6&4294967295|k>>>26),k=R+(I^(y|~N))+E[3]+2399980690&4294967295,R=y+(k<<10&4294967295|k>>>22),k=N+(y^(R|~I))+E[10]+4293915773&4294967295,N=R+(k<<15&4294967295|k>>>17),k=I+(R^(N|~y))+E[1]+2240044497&4294967295,I=N+(k<<21&4294967295|k>>>11),k=y+(N^(I|~R))+E[8]+1873313359&4294967295,y=I+(k<<6&4294967295|k>>>26),k=R+(I^(y|~N))+E[15]+4264355552&4294967295,R=y+(k<<10&4294967295|k>>>22),k=N+(y^(R|~I))+E[6]+2734768916&4294967295,N=R+(k<<15&4294967295|k>>>17),k=I+(R^(N|~y))+E[13]+1309151649&4294967295,I=N+(k<<21&4294967295|k>>>11),k=y+(N^(I|~R))+E[4]+4149444226&4294967295,y=I+(k<<6&4294967295|k>>>26),k=R+(I^(y|~N))+E[11]+3174756917&4294967295,R=y+(k<<10&4294967295|k>>>22),k=N+(y^(R|~I))+E[2]+718787259&4294967295,N=R+(k<<15&4294967295|k>>>17),k=I+(R^(N|~y))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,w.g[2]=w.g[2]+N&4294967295,w.g[3]=w.g[3]+R&4294967295}s.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var I=y-this.blockSize,E=this.B,N=this.h,R=0;R<y;){if(N==0)for(;R<=I;)r(this,w,R),R+=this.blockSize;if(typeof w=="string"){for(;R<y;)if(E[N++]=w.charCodeAt(R++),N==this.blockSize){r(this,E),N=0;break}}else for(;R<y;)if(E[N++]=w[R++],N==this.blockSize){r(this,E),N=0;break}}this.h=N,this.o+=y},s.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var I=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=I&255,I/=256;for(this.u(w),w=Array(16),y=I=0;4>y;++y)for(var E=0;32>E;E+=8)w[I++]=this.g[y]>>>E&255;return w};function i(w,y){var I=a;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=y(w)}function o(w,y){this.h=y;for(var I=[],E=!0,N=w.length-1;0<=N;N--){var R=w[N]|0;E&&R==y||(I[N]=R,E=!1)}this.g=I}var a={};function c(w){return-128<=w&&128>w?i(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return C(d(-w));for(var y=[],I=1,E=0;w>=I;E++)y[E]=w/I|0,I*=4294967296;return new o(y,0)}function f(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return C(f(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(y,8)),E=m,N=0;N<w.length;N+=8){var R=Math.min(8,w.length-N),k=parseInt(w.substring(N,N+R),y);8>R?(R=d(Math.pow(y,R)),E=E.j(R).add(d(k))):(E=E.j(I),E=E.add(d(k)))}return E}var m=c(0),g=c(1),T=c(16777216);t=o.prototype,t.m=function(){if(A(this))return-C(this).m();for(var w=0,y=1,I=0;I<this.g.length;I++){var E=this.i(I);w+=(0<=E?E:4294967296+E)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(A(this))return"-"+C(this).toString(w);for(var y=d(Math.pow(w,6)),I=this,E="";;){var N=D(I,y).g;I=b(I,N.j(y));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(w);if(I=N,S(I))return R+E;for(;6>R.length;)R="0"+R;E=R+E}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function A(w){return w.h==-1}t.l=function(w){return w=b(this,w),A(w)?-1:S(w)?0:1};function C(w){for(var y=w.g.length,I=[],E=0;E<y;E++)I[E]=~w.g[E];return new o(I,~w.h).add(g)}t.abs=function(){return A(this)?C(this):this},t.add=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],E=0,N=0;N<=y;N++){var R=E+(this.i(N)&65535)+(w.i(N)&65535),k=(R>>>16)+(this.i(N)>>>16)+(w.i(N)>>>16);E=k>>>16,R&=65535,k&=65535,I[N]=k<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function b(w,y){return w.add(C(y))}t.j=function(w){if(S(this)||S(w))return m;if(A(this))return A(w)?C(this).j(C(w)):C(C(this).j(w));if(A(w))return C(this.j(C(w)));if(0>this.l(T)&&0>w.l(T))return d(this.m()*w.m());for(var y=this.g.length+w.g.length,I=[],E=0;E<2*y;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var N=0;N<w.g.length;N++){var R=this.i(E)>>>16,k=this.i(E)&65535,oe=w.i(N)>>>16,X=w.i(N)&65535;I[2*E+2*N]+=k*X,v(I,2*E+2*N),I[2*E+2*N+1]+=R*X,v(I,2*E+2*N+1),I[2*E+2*N+1]+=k*oe,v(I,2*E+2*N+1),I[2*E+2*N+2]+=R*oe,v(I,2*E+2*N+2)}for(E=0;E<y;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=y;E<2*y;E++)I[E]=0;return new o(I,0)};function v(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function x(w,y){this.g=w,this.h=y}function D(w,y){if(S(y))throw Error("division by zero");if(S(w))return new x(m,m);if(A(w))return y=D(C(w),y),new x(C(y.g),C(y.h));if(A(y))return y=D(w,C(y)),new x(C(y.g),y.h);if(30<w.g.length){if(A(w)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,E=y;0>=E.l(w);)I=L(I),E=L(E);var N=M(I,1),R=M(E,1);for(E=M(E,2),I=M(I,2);!S(E);){var k=R.add(E);0>=k.l(w)&&(N=N.add(I),R=k),E=M(E,1),I=M(I,1)}return y=b(w,N.j(y)),new x(N,y)}for(N=m;0<=w.l(y);){for(I=Math.max(1,Math.floor(w.m()/y.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),R=d(I),k=R.j(y);A(k)||0<k.l(w);)I-=E,R=d(I),k=R.j(y);S(R)&&(R=g),N=N.add(R),w=b(w,k)}return new x(N,w)}t.A=function(w){return D(this,w).h},t.and=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],E=0;E<y;E++)I[E]=this.i(E)&w.i(E);return new o(I,this.h&w.h)},t.or=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],E=0;E<y;E++)I[E]=this.i(E)|w.i(E);return new o(I,this.h|w.h)},t.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),I=[],E=0;E<y;E++)I[E]=this.i(E)^w.i(E);return new o(I,this.h^w.h)};function L(w){for(var y=w.g.length+1,I=[],E=0;E<y;E++)I[E]=w.i(E)<<1|w.i(E-1)>>>31;return new o(I,w.h)}function M(w,y){var I=y>>5;y%=32;for(var E=w.g.length-I,N=[],R=0;R<E;R++)N[R]=0<y?w.i(R+I)>>>y|w.i(R+I+1)<<32-y:w.i(R+I);return new o(N,w.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,tT=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Er=o}).apply(typeof X_<"u"?X_:typeof self<"u"?self:typeof window<"u"?window:{});var au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nT,Za,sT,ju,Xm,rT,iT,oT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof au=="object"&&au];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(l,h){if(h)e:{var p=s;l=l.split(".");for(var _=0;_<l.length-1;_++){var V=l[_];if(!(V in p))break e;p=p[V]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,_=!1,V={next:function(){if(!_&&p<l.length){var F=p++;return{value:h(F,l[F]),done:!1}}return _=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,_),l.apply(h,V)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function T(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function S(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,V,F){for(var K=Array(arguments.length-2),De=2;De<arguments.length;De++)K[De-2]=arguments[De];return h.prototype[V].apply(_,K)}}function A(l){const h=l.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function C(l,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(c(_)){const V=l.length||0,F=_.length||0;l.length=V+F;for(let K=0;K<F;K++)l[V+K]=_[K]}else l.push(_)}}class b{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(l){return/^[\s\xa0]*$/.test(l)}function x(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var L=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function M(l,h,p){for(const _ in l)h.call(p,l[_],_,l)}function w(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(l,h){let p,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(p in _)l[p]=_[p];for(let F=0;F<I.length;F++)p=I[F],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function N(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function R(l){a.setTimeout(()=>{throw l},0)}function k(){var l=te;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class oe{constructor(){this.h=this.g=null}add(h,p){const _=X.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var X=new b(()=>new $,l=>l.reset());class ${constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let le,G=!1,te=new oe,re=()=>{const l=a.Promise.resolve(void 0);le=()=>{l.then(Te)}};var Te=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(p){R(p)}var h=X;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}G=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var $t=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function Jt(l,h){if(ke.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{D(h.nodeName);var V=!0;break e}catch{}V=!1}V||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ze[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Jt.aa.h.call(this)}}S(Jt,ke);var Ze={2:"touch",3:"pen",4:"mouse"};Jt.prototype.h=function(){Jt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var qt="closure_listenable_"+(1e6*Math.random()|0),se=0;function we(l,h,p,_,V){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=V,this.key=++se,this.da=this.fa=!1}function ge(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Re(l){this.src=l,this.g={},this.h=0}Re.prototype.add=function(l,h,p,_,V){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var K=ss(l,h,_,V);return-1<K?(h=l[K],p||(h.fa=!1)):(h=new we(h,this.src,F,!!_,V),h.fa=p,l.push(h)),h};function jt(l,h){var p=h.type;if(p in l.g){var _=l.g[p],V=Array.prototype.indexOf.call(_,h,void 0),F;(F=0<=V)&&Array.prototype.splice.call(_,V,1),F&&(ge(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function ss(l,h,p,_){for(var V=0;V<l.length;++V){var F=l[V];if(!F.da&&F.listener==h&&F.capture==!!p&&F.ha==_)return V}return-1}var Vs="closure_lm_"+(1e6*Math.random()|0),zr={};function $i(l,h,p,_,V){if(Array.isArray(h)){for(var F=0;F<h.length;F++)$i(l,h[F],p,_,V);return null}return p=bl(p),l&&l[qt]?l.K(h,p,d(_)?!!_.capture:!1,V):qh(l,h,p,!1,_,V)}function qh(l,h,p,_,V,F){if(!h)throw Error("Invalid event type");var K=d(V)?!!V.capture:!!V,De=Wi(l);if(De||(l[Vs]=De=new Re(l)),p=De.add(h,p,_,K,F),p.proxy)return p;if(_=Wh(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)$t||(V=K),V===void 0&&(V=!1),l.addEventListener(h.toString(),_,V);else if(l.attachEvent)l.attachEvent(Ur(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Wh(){function l(p){return h.call(l.src,l.listener,p)}const h=Gh;return l}function qi(l,h,p,_,V){if(Array.isArray(h))for(var F=0;F<h.length;F++)qi(l,h[F],p,_,V);else _=d(_)?!!_.capture:!!_,p=bl(p),l&&l[qt]?(l=l.i,h=String(h).toString(),h in l.g&&(F=l.g[h],p=ss(F,p,_,V),-1<p&&(ge(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete l.g[h],l.h--)))):l&&(l=Wi(l))&&(h=l.g[h.toString()],l=-1,h&&(l=ss(h,p,_,V)),(p=-1<l?h[l]:null)&&On(p))}function On(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[qt])jt(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(Ur(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=Wi(h))?(jt(p,l),p.h==0&&(p.src=null,h[Vs]=null)):ge(l)}}}function Ur(l){return l in zr?zr[l]:zr[l]="on"+l}function Gh(l,h){if(l.da)l=!0;else{h=new Jt(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&On(l),l=p.call(_,h)}return l}function Wi(l){return l=l[Vs],l instanceof Re?l:null}var va="__closure_events_fn_"+(1e9*Math.random()>>>0);function bl(l){return typeof l=="function"?l:(l[va]||(l[va]=function(h){return l.handleEvent(h)}),l[va])}function ut(){ce.call(this),this.i=new Re(this),this.M=this,this.F=null}S(ut,ce),ut.prototype[qt]=!0,ut.prototype.removeEventListener=function(l,h,p,_){qi(this,l,h,p,_)};function mt(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new ke(h,l);else if(h instanceof ke)h.target=h.target||l;else{var V=h;h=new ke(_,l),E(h,V)}if(V=!0,p)for(var F=p.length-1;0<=F;F--){var K=h.g=p[F];V=Gi(K,_,!0,h)&&V}if(K=h.g=l,V=Gi(K,_,!0,h)&&V,V=Gi(K,_,!1,h)&&V,p)for(F=0;F<p.length;F++)K=h.g=p[F],V=Gi(K,_,!1,h)&&V}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)ge(p[_]);delete l.g[h],l.h--}}this.F=null},ut.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},ut.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function Gi(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var V=!0,F=0;F<h.length;++F){var K=h[F];if(K&&!K.da&&K.capture==p){var De=K.listener,gt=K.ha||K.src;K.fa&&jt(l.i,K),V=De.call(gt,_)!==!1&&V}}return V&&!_.defaultPrevented}function Sl(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function kl(l){l.g=Sl(()=>{l.g=null,l.i&&(l.i=!1,kl(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Hh extends ce{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:kl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(l){ce.call(this),this.h=l,this.g={}}S(Br,ce);var Al=[];function Pl(l){M(l.g,function(h,p){this.g.hasOwnProperty(p)&&On(h)},l),l.g={}}Br.prototype.N=function(){Br.aa.N.call(this),Pl(this)},Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _a=a.JSON.stringify,Kh=a.JSON.parse,Qh=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Hi(){}Hi.prototype.h=null;function Nl(l){return l.h||(l.h=l.i())}function Vn(){}var $r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wa(){ke.call(this,"d")}S(wa,ke);function Ea(){ke.call(this,"c")}S(Ea,ke);var Mn={},j=null;function U(){return j=j||new ut}Mn.La="serverreachability";function H(l){ke.call(this,Mn.La,l)}S(H,ke);function J(l){const h=U();mt(h,new H(h))}Mn.STAT_EVENT="statevent";function ue(l,h){ke.call(this,Mn.STAT_EVENT,l),this.stat=h}S(ue,ke);function Z(l){const h=U();mt(h,new ue(h,l))}Mn.Ma="timingevent";function me(l,h){ke.call(this,Mn.Ma,l),this.size=h}S(me,ke);function je(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Be(){this.g=!0}Be.prototype.xa=function(){this.g=!1};function Ta(l,h,p,_,V,F){l.info(function(){if(l.g)if(F)for(var K="",De=F.split("&"),gt=0;gt<De.length;gt++){var Se=De[gt].split("=");if(1<Se.length){var Tt=Se[0];Se=Se[1];var It=Tt.split("_");K=2<=It.length&&It[1]=="type"?K+(Tt+"="+Se+"&"):K+(Tt+"=redacted&")}}else K=null;else K=F;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+h+`
`+p+`
`+K})}function Cl(l,h,p,_,V,F,K){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+h+`
`+p+`
`+F+" "+K})}function rs(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+qr(l,p)+(_?" "+_:"")})}function Ia(l,h){l.info(function(){return"TIMEOUT: "+h})}Be.prototype.info=function(){};function qr(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var V=_[1];if(Array.isArray(V)&&!(1>V.length)){var F=V[0];if(F!="noop"&&F!="stop"&&F!="close")for(var K=1;K<V.length;K++)V[K]=""}}}}return _a(p)}catch{return h}}var Ln={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},is;function os(){}S(os,Hi),os.prototype.g=function(){return new XMLHttpRequest},os.prototype.i=function(){return{}},is=new os;function Wt(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new Br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gr}function Gr(){this.i=null,this.g="",this.h=!1}var xa={},Ki={};function as(l,h,p){l.L=1,l.v=jl(us(h)),l.m=p,l.P=!0,Ms(l,null)}function Ms(l,h){l.F=Date.now(),cs(l),l.A=us(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),My(p.i,"t",_),l.C=0,p=l.j.J,l.h=new Gr,l.g=tv(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Hh(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(Al[0]=V.toString()),V=Al);for(var F=0;F<V.length;F++){var K=$i(p,V[F],_||h.handleEvent,!1,h.h||h);if(!K)break;h.g[K.key]=K}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),J(),Ta(l.i,l.u,l.A,l.l,l.R,l.m)}Wt.prototype.ca=function(l){l=l.target;const h=this.M;h&&ds(l)==3?h.j():this.Y(l)},Wt.prototype.Y=function(l){try{if(l==this.g)e:{const It=ds(this.g);var h=this.g.Ba();const Zi=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||qy(this.g)))){this.J||It!=4||h==7||(h==8||0>=Zi?J(3):J(2)),Fs(this);var p=this.g.Z();this.X=p;t:if(Hr(this)){var _=qy(this.g);l="";var V=_.length,F=ds(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),zs(this);var K="";break t}this.h.i=new a.TextDecoder}for(h=0;h<V;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(F&&h==V-1)});_.length=0,this.h.g+=l,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=p==200,Cl(this.i,this.u,this.A,this.l,this.R,It,p),this.o){if(this.T&&!this.K){t:{if(this.g){var De,gt=this.g;if((De=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(De)){var Se=De;break t}}Se=null}if(p=Se)rs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ls(this,p);else{this.o=!1,this.s=3,Z(12),Fn(this),zs(this);break e}}if(this.P){p=!0;let xn;for(;!this.J&&this.C<K.length;)if(xn=Qi(this,K),xn==Ki){It==4&&(this.s=4,Z(14),p=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==xa){this.s=4,Z(15),rs(this.i,this.l,K,"[Invalid Chunk]"),p=!1;break}else rs(this.i,this.l,xn,null),ls(this,xn);if(Hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||K.length!=0||this.h.h||(this.s=1,Z(16),p=!1),this.o=this.o&&p,!p)rs(this.i,this.l,K,"[Invalid Chunked Response]"),Fn(this),zs(this);else if(0<K.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Zh(Tt),Tt.M=!0,Z(11))}}else rs(this.i,this.l,K,null),ls(this,K);It==4&&Fn(this),this.o&&!this.J&&(It==4?Xy(this.j,this):(this.o=!1,cs(this)))}else qx(this.g),p==400&&0<K.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),Fn(this),zs(this)}}}catch{}finally{}};function Hr(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Qi(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?Ki:(p=Number(h.substring(p,_)),isNaN(p)?xa:(_+=1,_+p>h.length?Ki:(h=h.slice(_,_+p),l.C=_+p,h)))}Wt.prototype.cancel=function(){this.J=!0,Fn(this)};function cs(l){l.S=Date.now()+l.I,Ls(l,l.I)}function Ls(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=je(g(l.ba,l),h)}function Fs(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Wt.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ia(this.i,this.A),this.L!=2&&(J(),Z(17)),Fn(this),this.s=2,zs(this)):Ls(this,this.S-l)};function zs(l){l.j.G==0||l.J||Xy(l.j,l)}function Fn(l){Fs(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Pl(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function ls(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Qe(p.h,l))){if(!l.K&&Qe(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)zl(p),Ll(p);else break e;Jh(p),Z(18)}}else p.za=V[1],0<p.za-p.T&&37500>V[2]&&p.F&&p.v==0&&!p.C&&(p.C=je(g(p.Za,p),6e3));if(1>=Yi(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Xr(p,11)}else if((l.K||p.g==l)&&zl(p),!v(h))for(V=p.Da.g.parse(h),h=0;h<V.length;h++){let Se=V[h];if(p.T=Se[0],Se=Se[1],p.G==2)if(Se[0]=="c"){p.K=Se[1],p.ia=Se[2];const Tt=Se[3];Tt!=null&&(p.la=Tt,p.j.info("VER="+p.la));const It=Se[4];It!=null&&(p.Aa=It,p.j.info("SVER="+p.Aa));const Zi=Se[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(_=1.5*Zi,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const xn=l.g;if(xn){const Bl=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bl){var F=_.h;F.g||Bl.indexOf("spdy")==-1&&Bl.indexOf("quic")==-1&&Bl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(pt(F,F.h),F.h=null))}if(_.D){const ef=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;ef&&(_.ya=ef,Ve(_.I,_.D,ef))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var K=l;if(_.qa=ev(_,_.J?_.ia:null,_.W),K.K){Ot(_.h,K);var De=K,gt=_.L;gt&&(De.I=gt),De.B&&(Fs(De),cs(De)),_.g=K}else Qy(_);0<p.i.length&&Fl(p)}else Se[0]!="stop"&&Se[0]!="close"||Xr(p,7);else p.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Xr(p,7):Xh(p):Se[0]!="noop"&&p.l&&p.l.ta(Se),p.v=0)}}J(4)}catch{}}var Kr=class{constructor(l,h){this.g=l,this.map=h}};function Qr(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Us(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Yi(l){return l.h?1:l.g?l.g.size:0}function Qe(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function pt(l,h){l.g?l.g.add(h):l.h=h}function Ot(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Qr.prototype.cancel=function(){if(this.i=zn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function zn(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return A(l.i)}function ba(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function Nx(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const _ in l)h[p++]=_;return h}}}function Cy(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=Nx(l),_=ba(l),V=_.length,F=0;F<V;F++)h.call(void 0,_[F],p&&p[F],l)}var Ry=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cx(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),V=null;if(0<=_){var F=l[p].substring(0,_);V=l[p].substring(_+1)}else F=l[p];h(F,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Yr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Yr){this.h=l.h,Rl(this,l.j),this.o=l.o,this.g=l.g,Dl(this,l.s),this.l=l.l;var h=l.i,p=new Aa;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Dy(this,p),this.m=l.m}else l&&(h=String(l).match(Ry))?(this.h=!1,Rl(this,h[1]||"",!0),this.o=Sa(h[2]||""),this.g=Sa(h[3]||"",!0),Dl(this,h[4]),this.l=Sa(h[5]||"",!0),Dy(this,h[6]||"",!0),this.m=Sa(h[7]||"")):(this.h=!1,this.i=new Aa(null,this.h))}Yr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(ka(h,jy,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(ka(h,jy,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(ka(p,p.charAt(0)=="/"?jx:Dx,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",ka(p,Vx)),l.join("")};function us(l){return new Yr(l)}function Rl(l,h,p){l.j=p?Sa(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Dl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Dy(l,h,p){h instanceof Aa?(l.i=h,Mx(l.i,l.h)):(p||(h=ka(h,Ox)),l.i=new Aa(h,l.h))}function Ve(l,h,p){l.i.set(h,p)}function jl(l){return Ve(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Sa(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ka(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,Rx),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Rx(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var jy=/[#\/\?@]/g,Dx=/[#\?:]/g,jx=/[#\?]/g,Ox=/[#\?@]/g,Vx=/#/g;function Aa(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Bs(l){l.g||(l.g=new Map,l.h=0,l.i&&Cx(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Aa.prototype,t.add=function(l,h){Bs(this),this.i=null,l=Xi(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Oy(l,h){Bs(l),h=Xi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Vy(l,h){return Bs(l),h=Xi(l,h),l.g.has(h)}t.forEach=function(l,h){Bs(this),this.g.forEach(function(p,_){p.forEach(function(V){l.call(h,V,_,this)},this)},this)},t.na=function(){Bs(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const V=l[_];for(let F=0;F<V.length;F++)p.push(h[_])}return p},t.V=function(l){Bs(this);let h=[];if(typeof l=="string")Vy(this,l)&&(h=h.concat(this.g.get(Xi(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return Bs(this),this.i=null,l=Xi(this,l),Vy(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function My(l,h,p){Oy(l,h),0<p.length&&(l.i=null,l.g.set(Xi(l,h),A(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const F=encodeURIComponent(String(_)),K=this.V(_);for(_=0;_<K.length;_++){var V=F;K[_]!==""&&(V+="="+encodeURIComponent(String(K[_]))),l.push(V)}}return this.i=l.join("&")};function Xi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Mx(l,h){h&&!l.j&&(Bs(l),l.i=null,l.g.forEach(function(p,_){var V=_.toLowerCase();_!=V&&(Oy(this,_),My(this,V,p))},l)),l.j=h}function Lx(l,h){const p=new Be;if(a.Image){const _=new Image;_.onload=T($s,p,"TestLoadImage: loaded",!0,h,_),_.onerror=T($s,p,"TestLoadImage: error",!1,h,_),_.onabort=T($s,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=T($s,p,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function Fx(l,h){const p=new Be,_=new AbortController,V=setTimeout(()=>{_.abort(),$s(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(F=>{clearTimeout(V),F.ok?$s(p,"TestPingServer: ok",!0,h):$s(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),$s(p,"TestPingServer: error",!1,h)})}function $s(l,h,p,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(p)}catch{}}function zx(){this.g=new Qh}function Ux(l,h,p){const _=p||"";try{Cy(l,function(V,F){let K=V;d(V)&&(K=_a(V)),h.push(_+F+"="+encodeURIComponent(K))})}catch(V){throw h.push(_+"type="+encodeURIComponent("_badmap")),V}}function Ol(l){this.l=l.Ub||null,this.j=l.eb||!1}S(Ol,Hi),Ol.prototype.g=function(){return new Vl(this.l,this.j)},Ol.prototype.i=function(l){return function(){return l}}({});function Vl(l,h){ut.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Vl,ut),t=Vl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Na(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Na(this)),this.g&&(this.readyState=3,Na(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ly(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ly(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Pa(this):Na(this),this.readyState==3&&Ly(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Pa(this))},t.Qa=function(l){this.g&&(this.response=l,Pa(this))},t.ga=function(){this.g&&Pa(this)};function Pa(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Na(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Na(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Fy(l){let h="";return M(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Yh(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Fy(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ve(l,h,p))}function Ye(l){ut.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ye,ut);var Bx=/^https?$/i,$x=["POST","PUT"];t=Ye.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():is.g(),this.v=this.o?Nl(this.o):Nl(is),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(F){zy(this,F);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)p.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const F of _.keys())p.set(F,_.get(F));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call($x,h,void 0))||_||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,K]of p)this.g.setRequestHeader(F,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$y(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){zy(this,F)}};function zy(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Uy(l),Ml(l)}function Uy(l){l.A||(l.A=!0,mt(l,"complete"),mt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,mt(this,"complete"),mt(this,"abort"),Ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ml(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?By(this):this.bb())},t.bb=function(){By(this)};function By(l){if(l.h&&typeof o<"u"&&(!l.v[1]||ds(l)!=4||l.Z()!=2)){if(l.u&&ds(l)==4)Sl(l.Ea,0,l);else if(mt(l,"readystatechange"),ds(l)==4){l.h=!1;try{const K=l.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=K===0){var V=String(l.D).match(Ry)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),_=!Bx.test(V?V.toLowerCase():"")}p=_}if(p)mt(l,"complete"),mt(l,"success");else{l.m=6;try{var F=2<ds(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",Uy(l)}}finally{Ml(l)}}}}function Ml(l,h){if(l.g){$y(l);const p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||mt(l,"ready");try{p.onreadystatechange=_}catch{}}}function $y(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function ds(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<ds(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Kh(h)}};function qy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function qx(l){const h={};l=(l.g&&2<=ds(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(v(l[_]))continue;var p=N(l[_]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const F=h[V]||[];h[V]=F,F.push(p)}w(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Wy(l){this.Aa=0,this.i=[],this.j=new Be,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ca("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ca("baseRetryDelayMs",5e3,l),this.cb=Ca("retryDelaySeedMs",1e4,l),this.Wa=Ca("forwardChannelMaxRetries",2,l),this.wa=Ca("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Qr(l&&l.concurrentRequestLimit),this.Da=new zx,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wy.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,_){Z(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=ev(this,null,this.W),Fl(this)};function Xh(l){if(Gy(l),l.G==3){var h=l.U++,p=us(l.I);if(Ve(p,"SID",l.K),Ve(p,"RID",h),Ve(p,"TYPE","terminate"),Ra(l,p),h=new Wt(l,l.j,h),h.L=2,h.v=jl(us(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=tv(h.j,null),h.g.ea(h.v)),h.F=Date.now(),cs(h)}Zy(l)}function Ll(l){l.g&&(Zh(l),l.g.cancel(),l.g=null)}function Gy(l){Ll(l),l.u&&(a.clearTimeout(l.u),l.u=null),zl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Fl(l){if(!Us(l.h)&&!l.s){l.s=!0;var h=l.Ga;le||re(),G||(le(),G=!0),te.add(h,l),l.B=0}}function Wx(l,h){return Yi(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=je(g(l.Ga,l,h),Jy(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const V=new Wt(this,this.j,l);let F=this.o;if(this.S&&(F?(F=y(F),E(F,this.S)):F=this.S),this.m!==null||this.O||(V.H=F,F=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Ky(this,V,h),p=us(this.I),Ve(p,"RID",l),Ve(p,"CVER",22),this.D&&Ve(p,"X-HTTP-Session-Id",this.D),Ra(this,p),F&&(this.O?h="headers="+encodeURIComponent(String(Fy(F)))+"&"+h:this.m&&Yh(p,this.m,F)),pt(this.h,V),this.Ua&&Ve(p,"TYPE","init"),this.P?(Ve(p,"$req",h),Ve(p,"SID","null"),V.T=!0,as(V,p,null)):as(V,p,h),this.G=2}}else this.G==3&&(l?Hy(this,l):this.i.length==0||Us(this.h)||Hy(this))};function Hy(l,h){var p;h?p=h.l:p=l.U++;const _=us(l.I);Ve(_,"SID",l.K),Ve(_,"RID",p),Ve(_,"AID",l.T),Ra(l,_),l.m&&l.o&&Yh(_,l.m,l.o),p=new Wt(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Ky(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),pt(l.h,p),as(p,_,h)}function Ra(l,h){l.H&&M(l.H,function(p,_){Ve(h,_,p)}),l.l&&Cy({},function(p,_){Ve(h,_,p)})}function Ky(l,h,p){p=Math.min(l.i.length,p);var _=l.l?g(l.l.Na,l.l,l):null;e:{var V=l.i;let F=-1;for(;;){const K=["count="+p];F==-1?0<p?(F=V[0].g,K.push("ofs="+F)):F=0:K.push("ofs="+F);let De=!0;for(let gt=0;gt<p;gt++){let Se=V[gt].g;const Tt=V[gt].map;if(Se-=F,0>Se)F=Math.max(0,V[gt].g-100),De=!1;else try{Ux(Tt,K,"req"+Se+"_")}catch{_&&_(Tt)}}if(De){_=K.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function Qy(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;le||re(),G||(le(),G=!0),te.add(h,l),l.v=0}}function Jh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=je(g(l.Fa,l),Jy(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Yy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=je(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),Ll(this),Yy(this))};function Zh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Yy(l){l.g=new Wt(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=us(l.qa);Ve(h,"RID","rpc"),Ve(h,"SID",l.K),Ve(h,"AID",l.T),Ve(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ve(h,"TO",l.ja),Ve(h,"TYPE","xmlhttp"),Ra(l,h),l.m&&l.o&&Yh(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=jl(us(h)),p.m=null,p.P=!0,Ms(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Ll(this),Jh(this),Z(19))};function zl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Xy(l,h){var p=null;if(l.g==h){zl(l),Zh(l),l.g=null;var _=2}else if(Qe(l.h,h))p=h.D,Ot(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var V=l.B;_=U(),mt(_,new me(_,p)),Fl(l)}else Qy(l);else if(V=h.s,V==3||V==0&&0<h.X||!(_==1&&Wx(l,h)||_==2&&Jh(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),V){case 1:Xr(l,5);break;case 4:Xr(l,10);break;case 3:Xr(l,6);break;default:Xr(l,2)}}}function Jy(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Xr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),_=l.Xa;const V=!_;_=new Yr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rl(_,"https"),jl(_),V?Lx(_.toString(),p):Fx(_.toString(),p)}else Z(2);l.G=0,l.l&&l.l.sa(h),Zy(l),Gy(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function Zy(l){if(l.G=0,l.ka=[],l.l){const h=zn(l.h);(h.length!=0||l.i.length!=0)&&(C(l.ka,h),C(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function ev(l,h,p){var _=p instanceof Yr?us(p):new Yr(p);if(_.g!="")h&&(_.g=h+"."+_.g),Dl(_,_.s);else{var V=a.location;_=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;var F=new Yr(null);_&&Rl(F,_),h&&(F.g=h),V&&Dl(F,V),p&&(F.l=p),_=F}return p=l.D,h=l.ya,p&&h&&Ve(_,p,h),Ve(_,"VER",l.la),Ra(l,_),_}function tv(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ye(new Ol({eb:p})):new Ye(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nv(){}t=nv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ul(){}Ul.prototype.g=function(l,h){return new Zt(l,h)};function Zt(l,h){ut.call(this),this.g=new Wy(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!v(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ji(this)}S(Zt,ut),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Xh(this.g)},Zt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=_a(l),l=p);h.i.push(new Kr(h.Ya++,l)),h.G==3&&Fl(h)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Xh(this.g),delete this.g,Zt.aa.N.call(this)};function sv(l){wa.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(sv,wa);function rv(){Ea.call(this),this.status=1}S(rv,Ea);function Ji(l){this.g=l}S(Ji,nv),Ji.prototype.ua=function(){mt(this.g,"a")},Ji.prototype.ta=function(l){mt(this.g,new sv(l))},Ji.prototype.sa=function(l){mt(this.g,new rv)},Ji.prototype.ra=function(){mt(this.g,"b")},Ul.prototype.createWebChannel=Ul.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,oT=function(){return new Ul},iT=function(){return U()},rT=Mn,Xm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ln.NO_ERROR=0,Ln.TIMEOUT=8,Ln.HTTP_ERROR=6,ju=Ln,Wr.COMPLETE="complete",sT=Wr,Vn.EventType=$r,$r.OPEN="a",$r.CLOSE="b",$r.ERROR="c",$r.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Za=Vn,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,nT=Ye}).apply(typeof au<"u"?au:typeof self<"u"?self:typeof window<"u"?window:{});const J_="@firebase/firestore",Z_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new Sg("@firebase/firestore");function co(){return Ai.logLevel}function q(t,...e){if(Ai.logLevel<=ve.DEBUG){const n=e.map(Lg);Ai.debug(`Firestore (${fa}): ${t}`,...n)}}function Mt(t,...e){if(Ai.logLevel<=ve.ERROR){const n=e.map(Lg);Ai.error(`Firestore (${fa}): ${t}`,...n)}}function Pi(t,...e){if(Ai.logLevel<=ve.WARN){const n=e.map(Lg);Ai.warn(`Firestore (${fa}): ${t}`,...n)}}function Lg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,aT(t,s,n)}function aT(t,e,n){let s=`FIRESTORE (${fa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Mt(s),new Error(s)}function ie(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||aT(e,r,s)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vt.UNAUTHENTICATED))}shutdown(){}}class gR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yR{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ie(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ts,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ts)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ie(typeof s.accessToken=="string",31837,{l:s}),new cT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string",2055,{h:e}),new vt(e)}}class vR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _R{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new vR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ew{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ie(this.o===void 0,3512);const s=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ew(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ew(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=ER(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function he(t,e){return t<e?-1:t>e?1:0}function Jm(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return he(s,r);{const i=lT(),o=TR(i.encode(tw(t,n)),i.encode(tw(e,n)));return o!==0?o:he(s,r)}}n+=s>65535?2:1}return he(t.length,e.length)}function tw(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function TR(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return he(t[n],e[n]);return he(t.length,e.length)}function Wo(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}function dT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=-62135596800,sw=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*sw);return new He(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nw)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sw}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-nw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new He(0,0))}static max(){return new ae(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="__name__";class $n{constructor(e,n,s){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ne(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return $n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $n?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=$n.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return he(e.length,n.length)}static compareSegments(e,n){const s=$n.isNumericId(e),r=$n.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?$n.extractNumericId(e).compare($n.extractNumericId(n)):Jm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Er.fromString(e.substring(4,e.length-2))}}class Ae extends $n{construct(e,n,s){return new Ae(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Q(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const IR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends $n{construct(e,n,s){return new qe(e,n,s)}static isValidIdentifier(e){return IR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rw}static keyField(){return new qe([rw])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Q(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Q(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ae.fromString(e))}static fromName(e){return new Y(Ae.fromString(e).popFirst(5))}static empty(){return new Y(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=-1;class kd{constructor(e,n,s,r){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=r}}function Zm(t){return t.fields.find(e=>e.kind===2)}function ni(t){return t.fields.filter(e=>e.kind!==2)}kd.UNKNOWN_ID=-1;class Ou{constructor(e,n){this.fieldPath=e,this.kind=n}}class Gc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Gc(0,un.min())}}function xR(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ae.fromTimestamp(s===1e9?new He(n+1,0):new He(n,s));return new un(r,Y.empty(),e)}function hT(t){return new un(t.readTime,t.key,Wc)}class un{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new un(ae.min(),Y.empty(),Wc)}static max(){return new un(ae.max(),Y.empty(),Wc)}}function Fg(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==fT)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,s)=>{n(e)})}static reject(e){return new O((n,s)=>{s(e)})}static waitFor(e){return new O((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=O.resolve(!1);for(const s of e)n=n.next(r=>r?O.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new O((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++a,a===i&&s(o)},f=>r(f))}})}static doWhile(e,n){return new O((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="SimpleDb";class vh{static open(e,n,s,r){try{return new vh(n,e.transaction(r,s))}catch(i){throw new pc(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ts,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new pc(e,n.error)):this.S.resolve()},this.transaction.onerror=s=>{const r=zg(s.target.error);this.S.reject(new pc(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(q(nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new SR(n)}}class Tr{static delete(e){return q(nn,"Removing database:",e),ri(sE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!dE())return!1;if(Tr.F())return!0;const e=ct(),n=Tr.M(e),s=0<n&&n<10,r=pT(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,n,s){this.name=e,this.version=n,this.B=s,this.L=null,Tr.M(ct())===12.2&&Mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(q(nn,"Opening database:",this.name),this.db=await new Promise((n,s)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=i=>{const o=i.target.result;n(o)},r.onblocked=()=>{s(new pc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=i=>{const o=i.target.error;o.name==="VersionError"?s(new Q(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?s(new Q(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):s(new pc(e,o))},r.onupgradeneeded=i=>{q(nn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;if(this.L!==null&&this.L!==i.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${i.oldVersion}, event.newVersion=${i.newVersion}, db.version=${o.version}`);this.B.q(o,r.transaction,i.oldVersion,this.version).next(()=>{q(nn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",n=>{const s=n.target;this.L=s.version},{passive:!0})),this.$&&(this.db.onversionchange=n=>this.$(n)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,s,r){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=vh.open(this.db,e,i?"readonly":"readwrite",s),c=r(a).next(d=>(a.v(),d)).catch(d=>(a.abort(d),O.reject(d))).toPromise();return c.catch(()=>{}),await a.D,c}catch(a){const c=a,d=c.name!=="FirebaseError"&&o<3;if(q(nn,"Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function pT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class bR{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return ri(this.K.delete())}}class pc extends Q{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Mr(t){return t.name==="IndexedDbTransactionError"}class SR{constructor(e){this.store=e}put(e,n){let s;return n!==void 0?(q(nn,"PUT",this.store.name,e,n),s=this.store.put(n,e)):(q(nn,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ri(s)}add(e){return q(nn,"ADD",this.store.name,e,e),ri(this.store.add(e))}get(e){return ri(this.store.get(e)).next(n=>(n===void 0&&(n=null),q(nn,"GET",this.store.name,e,n),n))}delete(e){return q(nn,"DELETE",this.store.name,e),ri(this.store.delete(e))}count(){return q(nn,"COUNT",this.store.name),ri(this.store.count())}J(e,n){const s=this.options(e,n),r=s.index?this.store.index(s.index):this.store;if(typeof r.getAll=="function"){const i=r.getAll(s.range);return new O((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(s),o=[];return this.Y(i,(a,c)=>{o.push(c)}).next(()=>o)}}Z(e,n){const s=this.store.getAll(e,n===null?void 0:n);return new O((r,i)=>{s.onerror=o=>{i(o.target.error)},s.onsuccess=o=>{r(o.target.result)}})}X(e,n){q(nn,"DELETE ALL",this.store.name);const s=this.options(e,n);s.ee=!1;const r=this.cursor(s);return this.Y(r,(i,o,a)=>a.delete())}te(e,n){let s;n?s=e:(s={},n=e);const r=this.cursor(s);return this.Y(r,n)}ne(e){const n=this.cursor({});return new O((s,r)=>{n.onerror=i=>{const o=zg(i.target.error);r(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():s()}):s()}})}Y(e,n){const s=[];return new O((r,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const c=new bR(a),d=n(a.primaryKey,a.value,c);if(d instanceof O){const f=d.catch(m=>(c.done(),O.reject(m)));s.push(f)}c.isDone?r():c.j===null?a.continue():a.continue(c.j)}}).next(()=>O.waitFor(s))}options(e,n){let s;return e!==void 0&&(typeof e=="string"?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.ee?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ri(t){return new O((e,n)=>{t.onsuccess=s=>{const r=s.target.result;e(r)},t.onerror=s=>{const r=zg(s.target.error);n(r)}})}let iw=!1;function zg(t){const e=Tr.M(ct());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const s=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iw||(iw=!0,setTimeout(()=>{throw s},0)),s}}return t}const gc="IndexBackfiller";class kR{constructor(e,n){this.asyncQueue=e,this.re=n,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){q(gc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.re.se();q(gc,`Documents written: ${n}`)}catch(n){Mr(n)?q(gc,"Ignoring IndexedDB error during index backfill: ",n):await zi(n)}await this.ie(6e4)})}}class AR{constructor(e,n){this.localStore=e,this.persistence=n}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.oe(n,e))}oe(e,n){const s=new Set;let r=n,i=!0;return O.doWhile(()=>i===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!s.has(o))return q(gc,`Processing collection: ${o}`),this._e(e,o,r).next(a=>{r-=a,s.add(o)});i=!1})).next(()=>n-r)}_e(e,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,s).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ae(r,i)).next(a=>(q(gc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ae(e,n){let s=e;return n.changes.forEach((r,i)=>{const o=hT(i);Fg(o,s)>0&&(s=o)}),new un(s.readTime,s.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}yn.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=-1;function _h(t){return t==null}function Hc(t){return t===0&&1/t==-1/0}function PR(t){return typeof t=="number"&&Number.isInteger(t)&&!Hc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="";function Rt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ow(e)),e=NR(t.get(n),e);return ow(e)}function NR(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Ad:n+="";break;default:n+=i}}return n}function ow(t){return t+Ad+""}function Wn(t){const e=t.length;if(ie(e>=2,64408,{path:t}),e===2)return ie(t.charAt(0)===Ad&&t.charAt(1)==="",56145,{path:t}),Ae.emptyPath();const n=e-2,s=[];let r="";for(let i=0;i<e;){const o=t.indexOf(Ad,i);switch((o<0||o>n)&&ne(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;r.length===0?c=a:(r+=a,c=r,r=""),s.push(c);break;case"":r+=t.substring(i,o),r+="\0";break;case"":r+=t.substring(i,o+1);break;default:ne(61167,{path:t})}i=o+2}return new Ae(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si="remoteDocuments",yl="owner",no="owner",Kc="mutationQueues",CR="userId",An="mutations",aw="batchId",di="userMutationsIndex",cw=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t,e){return[t,Rt(e)]}function gT(t,e,n){return[t,Rt(e),n]}const RR={},Go="documentMutations",Pd="remoteDocumentsV14",DR=["prefixPath","collectionGroup","readTime","documentId"],Mu="documentKeyIndex",jR=["prefixPath","collectionGroup","documentId"],yT="collectionGroupIndex",OR=["collectionGroup","readTime","prefixPath","documentId"],Qc="remoteDocumentGlobal",ep="remoteDocumentGlobalKey",Ho="targets",vT="queryTargetsIndex",VR=["canonicalId","targetId"],Ko="targetDocuments",MR=["targetId","path"],Ug="documentTargetsIndex",LR=["path","targetId"],Nd="targetGlobalKey",yi="targetGlobal",Yc="collectionParents",FR=["collectionId","parent"],Qo="clientMetadata",zR="clientId",wh="bundles",UR="bundleId",Eh="namedQueries",BR="name",Bg="indexConfiguration",$R="indexId",tp="collectionGroupIndex",qR="collectionGroup",yc="indexState",WR=["indexId","uid"],_T="sequenceNumberIndex",GR=["uid","sequenceNumber"],vc="indexEntries",HR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wT="documentKeyIndex",KR=["indexId","uid","orderedDocumentKey"],Th="documentOverlays",QR=["userId","collectionPath","documentId"],np="collectionPathOverlayIndex",YR=["userId","collectionPath","largestBatchId"],ET="collectionGroupOverlayIndex",XR=["userId","collectionGroup","largestBatchId"],$g="globals",JR="name",TT=[Kc,An,Go,si,Ho,yl,yi,Ko,Qo,Qc,Yc,wh,Eh],ZR=[...TT,Th],IT=[Kc,An,Go,Pd,Ho,yl,yi,Ko,Qo,Qc,Yc,wh,Eh,Th],xT=IT,qg=[...xT,Bg,yc,vc],eD=qg,bT=[...qg,$g],tD=bT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp extends mT{constructor(e,n){super(),this.he=e,this.currentSequenceNumber=n}}function lt(t,e){const n=fe(t);return Tr.N(n.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ST(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}}class cu{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??_t.RED,this.left=r??_t.EMPTY,this.right=i??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new _t(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return _t.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uw(this.data.getIterator())}getIteratorFrom(e){return new uw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ce)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ce(this.comparator);return n.data=e,n}}class uw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function so(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(qe.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new Ce(qe.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new kT("Invalid base64 string: "+i):i}}(e);return new it(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const nD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(t){if(ie(!!t,39018),typeof t=="string"){let e=0;const n=nD.exec(t);if(ie(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ps(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="server_timestamp",PT="__type__",NT="__previous_value__",CT="__local_write_time__";function Wg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[PT])===null||n===void 0?void 0:n.stringValue)===AT}function Ih(t){const e=t.mapValue.fields[NT];return Wg(e)?Ih(e):e}function Xc(t){const e=As(t.mapValue.fields[CT].timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,s,r,i,o,a,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Cd="(default)";class Ni{constructor(e,n){this.projectId=e,this.database=n||Cd}static empty(){return new Ni("","")}get isDefaultDatabase(){return this.database===Cd}isEqual(e){return e instanceof Ni&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="__type__",RT="__max__",lr={mapValue:{fields:{__type__:{stringValue:RT}}}},Hg="__vector__",Yo="value",Lu={nullValue:"NULL_VALUE"};function Ar(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wg(t)?4:DT(t)?9007199254740991:xh(t)?10:11:ne(28295,{value:t})}function ns(t,e){if(t===e)return!0;const n=Ar(t);if(n!==Ar(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xc(t).isEqual(Xc(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=As(r.timestampValue),a=As(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ps(r.bytesValue).isEqual(Ps(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Fe(r.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(r.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Fe(r.integerValue)===Fe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Fe(r.doubleValue),a=Fe(i.doubleValue);return o===a?Hc(o)===Hc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Wo(t.arrayValue.values||[],e.arrayValue.values||[],ns);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(lw(o)!==lw(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ns(o[c],a[c])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Jc(t,e){return(t.values||[]).find(n=>ns(n,e))!==void 0}function Pr(t,e){if(t===e)return 0;const n=Ar(t),s=Ar(e);if(n!==s)return he(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Fe(i.integerValue||i.doubleValue),c=Fe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return dw(t.timestampValue,e.timestampValue);case 4:return dw(Xc(t),Xc(e));case 5:return Jm(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ps(i),c=Ps(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){const f=he(a[d],c[d]);if(f!==0)return f}return he(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=he(Fe(i.latitude),Fe(o.latitude));return a!==0?a:he(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hw(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,d,f;const m=i.fields||{},g=o.fields||{},T=(a=m[Yo])===null||a===void 0?void 0:a.arrayValue,S=(c=g[Yo])===null||c===void 0?void 0:c.arrayValue,A=he(((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:hw(T,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===lr.mapValue&&o===lr.mapValue)return 0;if(i===lr.mapValue)return 1;if(o===lr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const g=Jm(c[m],f[m]);if(g!==0)return g;const T=Pr(a[c[m]],d[f[m]]);if(T!==0)return T}return he(c.length,f.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{Pe:n})}}function dw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=As(t),s=As(e),r=he(n.seconds,s.seconds);return r!==0?r:he(n.nanos,s.nanos)}function hw(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Pr(n[r],s[r]);if(i)return i}return he(n.length,s.length)}function Xo(t){return rp(t)}function rp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=As(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ps(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=rp(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${rp(n.fields[o])}`;return r+"}"}(t.mapValue):ne(61005,{value:t})}function Fu(t){switch(Ar(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ih(t);return e?16+Fu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Fu(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Lr(s.fields,(i,o)=>{r+=i.length+Fu(o)}),r}(t.mapValue);default:throw ne(13486,{value:t})}}function Zc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ip(t){return!!t&&"integerValue"in t}function el(t){return!!t&&"arrayValue"in t}function fw(t){return!!t&&"nullValue"in t}function mw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zu(t){return!!t&&"mapValue"in t}function xh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gg])===null||n===void 0?void 0:n.stringValue)===Hg}function _c(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Lr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=_c(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_c(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===RT}const jT={mapValue:{fields:{[Gg]:{stringValue:Hg},[Yo]:{arrayValue:{}}}}};function rD(t){return"nullValue"in t?Lu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Zc(Ni.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?xh(t)?jT:{mapValue:{}}:ne(35942,{value:t})}function iD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Zc(Ni.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?jT:"mapValue"in t?xh(t)?{mapValue:{}}:lr:ne(61959,{value:t})}function pw(t,e){const n=Pr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function gw(t,e){const n=Pr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!zu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_c(n)}setAll(e){let n=qe.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=_c(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());zu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ns(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];zu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Lr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Nt(_c(this.value))}}function OT(t){const e=[];return Lr(t.fields,(n,s)=>{const r=new qe([n]);if(zu(s)){const i=OT(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Je(e,0,ae.min(),ae.min(),ae.min(),Nt.empty(),0)}static newFoundDocument(e,n,s,r){return new Je(e,1,n,ae.min(),s,r,0)}static newNoDocument(e,n){return new Je(e,2,n,ae.min(),ae.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new Je(e,3,n,ae.min(),ae.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.position=e,this.inclusive=n}}function yw(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Y.comparator(Y.fromName(o.referenceValue),n.key):s=Pr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function vw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ns(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n="asc"){this.field=e,this.dir=n}}function oD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{}class _e extends VT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new aD(e,n,s):n==="array-contains"?new uD(e,s):n==="in"?new BT(e,s):n==="not-in"?new dD(e,s):n==="array-contains-any"?new hD(e,s):new _e(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new cD(e,s):new lD(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Pr(n,this.value)):n!==null&&Ar(this.value)===Ar(n)&&this.matchesComparison(Pr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pe extends VT{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Pe(e,n)}matches(e){return Zo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Zo(t){return t.op==="and"}function op(t){return t.op==="or"}function Kg(t){return MT(t)&&Zo(t)}function MT(t){for(const e of t.filters)if(e instanceof Pe)return!1;return!0}function ap(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+Xo(t.value);if(Kg(t))return t.filters.map(e=>ap(e)).join(",");{const e=t.filters.map(n=>ap(n)).join(",");return`${t.op}(${e})`}}function LT(t,e){return t instanceof _e?function(s,r){return r instanceof _e&&s.op===r.op&&s.field.isEqual(r.field)&&ns(s.value,r.value)}(t,e):t instanceof Pe?function(s,r){return r instanceof Pe&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&LT(o,r.filters[a]),!0):!1}(t,e):void ne(19439)}function FT(t,e){const n=t.filters.concat(e);return Pe.create(n,t.op)}function zT(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${Xo(n.value)}`}(t):t instanceof Pe?function(n){return n.op.toString()+" {"+n.getFilters().map(zT).join(" ,")+"}"}(t):"Filter"}class aD extends _e{constructor(e,n,s){super(e,n,s),this.key=Y.fromName(s.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class cD extends _e{constructor(e,n){super(e,"in",n),this.keys=UT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lD extends _e{constructor(e,n){super(e,"not-in",n),this.keys=UT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function UT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Y.fromName(s.referenceValue))}class uD extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return el(n)&&Jc(n.arrayValue,this.value)}}class BT extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jc(this.value.arrayValue,n)}}class dD extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jc(this.value.arrayValue,n)}}class hD extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!el(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Jc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function cp(t,e=null,n=[],s=[],r=null,i=null,o=null){return new fD(t,e,n,s,r,i,o)}function Ci(t){const e=fe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>ap(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),_h(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Xo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Xo(s)).join(",")),e.Ie=n}return e.Ie}function vl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vw(t.startAt,e.startAt)&&vw(t.endAt,e.endAt)}function Rd(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Dd(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function _w(t,e,n){let s=Lu,r=!0;for(const i of Dd(t,e)){let o=Lu,a=!0;switch(i.op){case"<":case"<=":o=rD(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Lu}pw({value:s,inclusive:r},{value:o,inclusive:a})<0&&(s=o,r=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];pw({value:s,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(s=o,r=n.inclusive);break}}return{value:s,inclusive:r}}function ww(t,e,n){let s=lr,r=!0;for(const i of Dd(t,e)){let o=lr,a=!0;switch(i.op){case">=":case">":o=iD(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=lr}gw({value:s,inclusive:r},{value:o,inclusive:a})>0&&(s=o,r=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];gw({value:s,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(s=o,r=n.inclusive);break}}return{value:s,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function mD(t,e,n,s,r,i,o,a){return new ma(t,e,n,s,r,i,o,a)}function bh(t){return new ma(t)}function Ew(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $T(t){return t.collectionGroup!==null}function wc(t){const e=fe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ce(qe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new tl(i,s))}),n.has(qe.keyField().canonicalString())||e.Ee.push(new tl(qe.keyField(),s))}return e.Ee}function _n(t){const e=fe(t);return e.de||(e.de=pD(e,wc(t))),e.de}function pD(t,e){if(t.limitType==="F")return cp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new tl(r.field,i)});const n=t.endAt?new Jo(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Jo(t.startAt.position,t.startAt.inclusive):null;return cp(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function lp(t,e){const n=t.filters.concat([e]);return new ma(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function up(t,e,n){return new ma(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sh(t,e){return vl(_n(t),_n(e))&&t.limitType===e.limitType}function qT(t){return`${Ci(_n(t))}|lt:${t.limitType}`}function lo(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>zT(r)).join(", ")}]`),_h(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Xo(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Xo(r)).join(",")),`Target(${s})`}(_n(t))}; limitType=${t.limitType})`}function _l(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Y.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of wc(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,c){const d=yw(o,a,c);return o.inclusive?d<=0:d<0}(s.startAt,wc(s),r)||s.endAt&&!function(o,a,c){const d=yw(o,a,c);return o.inclusive?d>=0:d>0}(s.endAt,wc(s),r))}(t,e)}function gD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WT(t){return(e,n)=>{let s=!1;for(const r of wc(t)){const i=yD(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function yD(t,e,n){const s=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),d=a.data.field(i);return c!==null&&d!==null?Pr(c,d):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Lr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return ST(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new Ue(Y.comparator);function an(){return vD}const GT=new Ue(Y.comparator);function ec(...t){let e=GT;for(const n of t)e=e.insert(n.key,n);return e}function HT(t){let e=GT;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Gn(){return Ec()}function KT(){return Ec()}function Ec(){return new js(t=>t.toString(),(t,e)=>t.isEqual(e))}const _D=new Ue(Y.comparator),wD=new Ce(Y.comparator);function pe(...t){let e=wD;for(const n of t)e=e.add(n);return e}const ED=new Ce(he);function TD(){return ED}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hc(e)?"-0":e}}function QT(t){return{integerValue:""+t}}function ID(t,e){return PR(e)?QT(e):Qg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function xD(t,e,n){return t instanceof nl?function(r,i){const o={fields:{[PT]:{stringValue:AT},[CT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Wg(i)&&(i=Ih(i)),i&&(o.fields[NT]=i),{mapValue:o}}(n,e):t instanceof ea?XT(t,e):t instanceof ta?JT(t,e):function(r,i){const o=YT(r,i),a=Tw(o)+Tw(r.Re);return ip(o)&&ip(r.Re)?QT(a):Qg(r.serializer,a)}(t,e)}function bD(t,e,n){return t instanceof ea?XT(t,e):t instanceof ta?JT(t,e):n}function YT(t,e){return t instanceof sl?function(s){return ip(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class nl extends kh{}class ea extends kh{constructor(e){super(),this.elements=e}}function XT(t,e){const n=ZT(e);for(const s of t.elements)n.some(r=>ns(r,s))||n.push(s);return{arrayValue:{values:n}}}class ta extends kh{constructor(e){super(),this.elements=e}}function JT(t,e){let n=ZT(e);for(const s of t.elements)n=n.filter(r=>!ns(r,s));return{arrayValue:{values:n}}}class sl extends kh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Tw(t){return Fe(t.integerValue||t.doubleValue)}function ZT(t){return el(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n){this.field=e,this.transform=n}}function kD(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof ea&&r instanceof ea||s instanceof ta&&r instanceof ta?Wo(s.elements,r.elements,ns):s instanceof sl&&r instanceof sl?ns(s.Re,r.Re):s instanceof nl&&r instanceof nl}(t.transform,e.transform)}class AD{constructor(e,n){this.version=e,this.transformResults=n}}class Ct{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ct}static exists(e){return new Ct(void 0,e)}static updateTime(e){return new Ct(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ah{}function eI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ph(t.key,Ct.none()):new pa(t.key,t.data,Ct.none());{const n=t.data,s=Nt.empty();let r=new Ce(qe.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Os(t.key,s,new Kt(r.toArray()),Ct.none())}}function PD(t,e,n){t instanceof pa?function(r,i,o){const a=r.value.clone(),c=xw(r.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Os?function(r,i,o){if(!Uu(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=xw(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(tI(r)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Tc(t,e,n,s){return t instanceof pa?function(i,o,a,c){if(!Uu(i.precondition,o))return a;const d=i.value.clone(),f=bw(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Os?function(i,o,a,c){if(!Uu(i.precondition,o))return a;const d=bw(i.fieldTransforms,c,o),f=o.data;return f.setAll(tI(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(i,o,a){return Uu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function ND(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=YT(s.transform,r||null);i!=null&&(n===null&&(n=Nt.empty()),n.set(s.field,i))}return n||null}function Iw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Wo(s,r,(i,o)=>kD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pa extends Ah{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Os extends Ah{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function tI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function xw(t,e,n){const s=new Map;ie(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,bD(o,a,n[r]))}return s}function bw(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,xD(i,o,e))}return s}class Ph extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nI extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&PD(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Tc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Tc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=KT();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const c=eI(o,a);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,(n,s)=>Iw(n,s))&&Wo(this.baseMutations,e.baseMutations,(n,s)=>Iw(n,s))}}class Xg{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){ie(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let r=function(){return _D}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Xg(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,Ie;function RD(t){switch(t){case z.OK:return ne(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function sI(t){if(t===void 0)return Mt("GRPC error has no .code"),z.UNKNOWN;switch(t){case tt.OK:return z.OK;case tt.CANCELLED:return z.CANCELLED;case tt.UNKNOWN:return z.UNKNOWN;case tt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case tt.INTERNAL:return z.INTERNAL;case tt.UNAVAILABLE:return z.UNAVAILABLE;case tt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case tt.NOT_FOUND:return z.NOT_FOUND;case tt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case tt.ABORTED:return z.ABORTED;case tt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case tt.DATA_LOSS:return z.DATA_LOSS;default:return ne(39323,{code:t})}}(Ie=tt||(tt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new Er([4294967295,4294967295],0);function Sw(t){const e=lT().encode(t),n=new tT;return n.update(e),new Uint8Array(n.digest())}function kw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Er([n,s],0),new Er([r,i],0)]}class Zg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new tc(`Invalid padding: ${n}`);if(s<0)throw new tc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new tc(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Er.fromNumber(this.pe)}we(e,n,s){let r=e.add(n.multiply(Er.fromNumber(s)));return r.compare(DD)===1&&(r=new Er([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Sw(e),[s,r]=kw(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);if(!this.be(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Zg(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=Sw(e),[s,r]=kw(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Nh(ae.min(),r,new Ue(he),an(),pe())}}class wl{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new wl(s,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n,s,r){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=r}}class rI{constructor(e,n){this.targetId=e,this.Ce=n}}class iI{constructor(e,n,s=it.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Aw{constructor(){this.Fe=0,this.Me=Pw(),this.xe=it.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=pe(),n=pe(),s=pe();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ne(38017,{changeType:i})}}),new wl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=Pw()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ie(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class jD{constructor(e){this.ze=e,this.je=new Map,this.He=an(),this.Je=lu(),this.Ye=lu(),this.Ze=new Ue(he)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,s=e.Ce.count,r=this._t(n);if(r){const i=r.target;if(Rd(i))if(s===0){const o=new Y(i.path);this.tt(n,o,Je.newNoDocument(o,ae.min()))}else ie(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const a=this.ct(e),c=a?this.lt(a,e,o):1;if(c!==0){this.st(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Ps(s).toUint8Array()}catch(c){if(c instanceof kT)return Pi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Zg(o,r,i)}catch(c){return Pi(c instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),r++)}),r}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&Rd(a.target)){const c=new Y(a.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Je.newNoDocument(c,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let s=pe();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const d=this._t(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const r=new Nh(e,n,this.Ze,this.He,s);return this.He=an(),this.Je=lu(),this.Ye=lu(),this.Ze=new Ue(he),r}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Aw,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ce(he),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ce(he),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Aw),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function lu(){return new Ue(Y.comparator)}function Pw(){return new Ue(Y.comparator)}const OD={asc:"ASCENDING",desc:"DESCENDING"},VD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MD={and:"AND",or:"OR"};class LD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dp(t,e){return t.useProto3Json||_h(e)?e:{value:e}}function na(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FD(t,e){return na(t,e.toTimestamp())}function Ft(t){return ie(!!t,49232),ae.fromTimestamp(function(n){const s=As(n);return new He(s.seconds,s.nanos)}(t))}function ey(t,e){return hp(t,e).canonicalString()}function hp(t,e){const n=function(r){return new Ae(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aI(t){const e=Ae.fromString(t);return ie(gI(e),10190,{key:e.toString()}),e}function jd(t,e){return ey(t.databaseId,e.path)}function vi(t,e){const n=aI(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(uI(n))}function cI(t,e){return ey(t.databaseId,e)}function lI(t){const e=aI(t);return e.length===4?Ae.emptyPath():uI(e)}function fp(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uI(t){return ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Nw(t,e,n){return{name:jd(t,e),fields:n.value.mapValue.fields}}function zD(t,e,n){const s=vi(t,e.name),r=Ft(e.updateTime),i=e.createTime?Ft(e.createTime):ae.min(),o=new Nt({mapValue:{fields:e.fields}}),a=Je.newFoundDocument(s,r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function UD(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ie(f===void 0||typeof f=="string",58123),it.fromBase64String(f||"")):(ie(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),it.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=d.code===void 0?z.UNKNOWN:sI(d.code);return new Q(f,d.message||"")}(o);n=new iI(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=vi(t,s.document.name),i=Ft(s.document.updateTime),o=s.document.createTime?Ft(s.document.createTime):ae.min(),a=new Nt({mapValue:{fields:s.document.fields}}),c=Je.newFoundDocument(r,i,o,a),d=s.targetIds||[],f=s.removedTargetIds||[];n=new Bu(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=vi(t,s.document),i=s.readTime?Ft(s.readTime):ae.min(),o=Je.newNoDocument(r,i),a=s.removedTargetIds||[];n=new Bu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=vi(t,s.document),i=s.removedTargetIds||[];n=new Bu([],i,r,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new CD(r,i),a=s.targetId;n=new rI(a,o)}}return n}function Od(t,e){let n;if(e instanceof pa)n={update:Nw(t,e.key,e.value)};else if(e instanceof Ph)n={delete:jd(t,e.key)};else if(e instanceof Os)n={update:Nw(t,e.key,e.data),updateMask:HD(e.fieldMask)};else{if(!(e instanceof nI))return ne(16599,{ft:e.type});n={verify:jd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof nl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ea)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ta)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sl)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw ne(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:FD(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function mp(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Ct.updateTime(Ft(i.updateTime)):i.exists!==void 0?Ct.exists(i.exists):Ct.none()}(e.currentDocument):Ct.none(),s=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)ie(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new nl;else if("appendMissingElements"in a){const f=a.appendMissingElements.values||[];c=new ea(f)}else if("removeAllFromArray"in a){const f=a.removeAllFromArray.values||[];c=new ta(f)}else"increment"in a?c=new sl(o,a.increment):ne(16584,{proto:a});const d=qe.fromServerFormat(a.fieldPath);return new SD(d,c)}(t,r)):[];if(e.update){e.update.name;const r=vi(t,e.update.name),i=new Nt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const d=c.fieldPaths||[];return new Kt(d.map(f=>qe.fromServerFormat(f)))}(e.updateMask);return new Os(r,i,o,n,s)}return new pa(r,i,n,s)}if(e.delete){const r=vi(t,e.delete);return new Ph(r,n)}if(e.verify){const r=vi(t,e.verify);return new nI(r,n)}return ne(1463,{proto:e})}function BD(t,e){return t&&t.length>0?(ie(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Ft(r.updateTime):Ft(i);return o.isEqual(ae.min())&&(o=Ft(i)),new AD(o,r.transformResults||[])}(n,e))):[]}function dI(t,e){return{documents:[cI(t,e.path)]}}function hI(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=cI(t,r);const i=function(d){if(d.length!==0)return pI(Pe.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:uo(g.field),direction:qD(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=dp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:r}}function fI(t){let e=lI(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ie(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=mI(m);return g instanceof Pe&&Kg(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(S){return new tl(ho(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,_h(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,T=m.values||[];return new Jo(T,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,T=m.values||[];return new Jo(T,g)}(n.endAt)),mD(e,r,o,i,a,"F",c,d)}function $D(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ho(n.unaryFilter.field);return _e.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ho(n.unaryFilter.field);return _e.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ho(n.unaryFilter.field);return _e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ho(n.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return _e.create(ho(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pe.create(n.compositeFilter.filters.map(s=>mI(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function qD(t){return OD[t]}function WD(t){return VD[t]}function GD(t){return MD[t]}function uo(t){return{fieldPath:t.canonicalString()}}function ho(t){return qe.fromServerFormat(t.fieldPath)}function pI(t){return t instanceof _e?function(n){if(n.op==="=="){if(mw(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NAN"}};if(fw(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mw(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NAN"}};if(fw(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(n.field),op:WD(n.op),value:n.value}}}(t):t instanceof Pe?function(n){const s=n.getFilters().map(r=>pI(r));return s.length===1?s[0]:{compositeFilter:{op:GD(n.op),filters:s}}}(t):ne(54877,{filter:t})}function HD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n,s,r,i=ae.min(),o=ae.min(),a=it.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.wt=e}}function KD(t,e){let n;if(e.document)n=zD(t.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Y.fromSegments(e.noDocument.path),r=Di(e.noDocument.readTime);n=Je.newNoDocument(s,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne(56709);{const s=Y.fromSegments(e.unknownDocument.path),r=Di(e.unknownDocument.version);n=Je.newUnknownDocument(s,r)}}return e.readTime&&n.setReadTime(function(r){const i=new He(r[0],r[1]);return ae.fromTimestamp(i)}(e.readTime)),n}function Cw(t,e){const n=e.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=function(i,o){return{name:jd(i,o.key),fields:o.data.value.mapValue.fields,updateTime:na(i,o.version.toTimestamp()),createTime:na(i,o.createTime.toTimestamp())}}(t.wt,e);else if(e.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:Ri(e.version)};else{if(!e.isUnknownDocument())return ne(57904,{document:e});s.unknownDocument={path:n.path.toArray(),version:Ri(e.version)}}return s}function Vd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ri(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Di(t){const e=new He(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function ii(t,e){const n=(e.baseMutations||[]).map(i=>mp(t.wt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const s=e.mutations.map(i=>mp(t.wt,i)),r=He.fromMillis(e.localWriteTimeMs);return new Yg(e.batchId,r,n,s)}function nc(t){const e=Di(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Di(t.lastLimboFreeSnapshotVersion):ae.min();let s;return s=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return ie(o===1,1966,{count:o}),_n(bh(lI(i.documents[0])))}(t.query):function(i){return _n(fI(i))}(t.query),new vs(s,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,it.fromBase64String(t.resumeToken))}function vI(t,e){const n=Ri(e.snapshotVersion),s=Ri(e.lastLimboFreeSnapshotVersion);let r;r=Rd(e.target)?dI(t.wt,e.target):hI(t.wt,e.target).gt;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ci(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:r}}function _I(t){const e=fI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?up(e,e.limit,"L"):e}function Vf(t,e){return new Jg(e.largestBatchId,mp(t.wt,e.overlayMutation))}function Rw(t,e){const n=e.path.lastSegment();return[t,Rt(e.path.popLast()),n]}function Dw(t,e,n,s){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ri(s.readTime),documentKey:Rt(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{getBundleMetadata(e,n){return jw(e).get(n).next(s=>{if(s)return function(i){return{id:i.bundleId,createTime:Di(i.createTime),version:i.version}}(s)})}saveBundleMetadata(e,n){return jw(e).put(function(r){return{bundleId:r.id,createTime:Ri(Ft(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return Ow(e).get(n).next(s=>{if(s)return function(i){return{name:i.name,query:_I(i.bundledQuery),readTime:Di(i.readTime)}}(s)})}saveNamedQuery(e,n){return Ow(e).put(function(r){return{name:r.name,readTime:Ri(Ft(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function jw(t){return lt(t,wh)}function Ow(t){return lt(t,Eh)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.serializer=e,this.userId=n}static bt(e,n){const s=n.uid||"";return new Ch(e,s)}getOverlay(e,n){return Ua(e).get(Rw(this.userId,n)).next(s=>s?Vf(this.serializer,s):null)}getOverlays(e,n){const s=Gn();return O.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){const r=[];return s.forEach((i,o)=>{const a=new Jg(n,o);r.push(this.St(e,a))}),O.waitFor(r)}removeOverlaysForBatchId(e,n,s){const r=new Set;n.forEach(o=>r.add(Rt(o.getCollectionPath())));const i=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,s],[this.userId,o,s+1],!1,!0);i.push(Ua(e).X(np,a))}),O.waitFor(i)}getOverlaysForCollection(e,n,s){const r=Gn(),i=Rt(n),o=IDBKeyRange.bound([this.userId,i,s],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ua(e).J(np,o).next(a=>{for(const c of a){const d=Vf(this.serializer,c);r.set(d.getKey(),d)}return r})}getOverlaysForCollectionGroup(e,n,s,r){const i=Gn();let o;const a=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ua(e).te({index:ET,range:a},(c,d,f)=>{const m=Vf(this.serializer,d);i.size()<r||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>i)}St(e,n){return Ua(e).put(function(r,i,o){const[a,c,d]=Rw(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Od(r.wt,o.mutation)}}(this.serializer,this.userId,n))}}function Ua(t){return lt(t,Th)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{Dt(e){return lt(e,$g)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(n=>{const s=n==null?void 0:n.value;return s?it.fromUint8Array(s):it.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Dt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(Fe(e.integerValue));else if("doubleValue"in e){const s=Fe(e.doubleValue);isNaN(s)?this.Mt(n,13):(this.Mt(n,15),Hc(s)?n.xt(0):n.xt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Mt(n,20),typeof s=="string"&&(s=As(s)),n.Ot(`${s.seconds||""}`),n.xt(s.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(Ps(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.Mt(n,45),n.xt(s.latitude||0),n.xt(s.longitude||0)}else"mapValue"in e?DT(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):xh(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):ne(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){const s=e.fields||{};this.Mt(n,55);for(const r of Object.keys(s))this.Nt(r,n),this.Ct(s[r],n)}qt(e,n){var s,r;const i=e.fields||{};this.Mt(n,53);const o=Yo,a=((r=(s=i[o].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.length)||0;this.Mt(n,15),n.xt(Fe(a)),this.Nt(o,n),this.Ct(i[o],n)}$t(e,n){const s=e.values||[];this.Mt(n,50);for(const r of s)this.Ct(r,n)}kt(e,n){this.Mt(n,37),Y.fromName(e).path.forEach(s=>{this.Mt(n,60),this.Kt(s,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}}oi.Wt=new oi;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=255;function XD(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Vw(t){const e=64-function(s){let r=0;for(let i=0;i<8;++i){const o=XD(255&s[i]);if(r+=o,o!==8)break}return r}(t);return Math.ceil(e/8)}class JD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.zt(s.value),s=n.next();this.jt()}Ht(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Jt(s.value),s=n.next();this.Yt()}Zt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.zt(s);else if(s<2048)this.zt(960|s>>>6),this.zt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.zt(480|s>>>12),this.zt(128|63&s>>>6),this.zt(128|63&s);else{const r=n.codePointAt(0);this.zt(240|r>>>18),this.zt(128|63&r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r)}}this.jt()}Xt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Yt()}en(e){const n=this.tn(e),s=Vw(n);this.nn(1+s),this.buffer[this.position++]=255&s;for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=255&n[r]}rn(e){const n=this.tn(e),s=Vw(n);this.nn(1+s),this.buffer[this.position++]=~(255&s);for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}sn(){this._n(ro),this._n(255)}an(){this.un(ro),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),s=!!(128&n[0]);n[0]^=s?255:128;for(let r=1;r<n.length;++r)n[r]^=s?255:0;return n}zt(e){const n=255&e;n===0?(this._n(0),this._n(255)):n===ro?(this._n(ro),this._n(0)):this._n(n)}Jt(e){const n=255&e;n===0?(this.un(0),this.un(255)):n===ro?(this.un(ro),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const n=e+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const r=new Uint8Array(s);r.set(this.buffer),this.buffer=r}}class ZD{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class e3{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class Ba{constructor(){this.ln=new JD,this.hn=new ZD(this.ln),this.Pn=new e3(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,s,r){this.In=e,this.En=n,this.dn=s,this.An=r}Rn(){const e=this.An.length,n=e===0||this.An[e-1]===255?e+1:e,s=new Uint8Array(n);return s.set(this.An,0),n!==e?s.set([0],this.An.length):++s[s.length-1],new ai(this.In,this.En,this.dn,s)}Vn(e,n,s){return{indexId:this.In,uid:e,arrayValue:$u(this.dn),directionalValue:$u(this.An),orderedDocumentKey:$u(n),documentKey:s.path.toArray()}}mn(e,n,s){const r=this.Vn(e,n,s);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Gs(t,e){let n=t.In-e.In;return n!==0?n:(n=Mw(t.dn,e.dn),n!==0?n:(n=Mw(t.An,e.An),n!==0?n:Y.comparator(t.En,e.En)))}function Mw(t,e){for(let n=0;n<t.length&&n<e.length;++n){const s=t[n]-e[n];if(s!==0)return s}return t.length-e.length}function $u(t){return uE()?function(n){let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}(t):t}function Lw(t){return typeof t!="string"?t:function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(t)}class Fw{constructor(e){this.fn=new Ce((n,s)=>qe.comparator(n.field,s.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const n of e.filters){const s=n;s.isInequality()?this.fn=this.fn.add(s):this.pn.push(s)}}get yn(){return this.fn.size>1}wn(e){if(ie(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const n=Zm(e);if(n!==void 0&&!this.bn(n))return!1;const s=ni(e);let r=new Set,i=0,o=0;for(;i<s.length&&this.bn(s[i]);++i)r=r.add(s[i].fieldPath.canonicalString());if(i===s.length)return!0;if(this.fn.size>0){const a=this.fn.getIterator().getNext();if(!r.has(a.field.canonicalString())){const c=s[i];if(!this.Sn(a,c)||!this.Dn(this.gn[o++],c))return!1}++i}for(;i<s.length;++i){const a=s[i];if(o>=this.gn.length||!this.Dn(this.gn[o++],a))return!1}return!0}vn(){if(this.yn)return null;let e=new Ce(qe.comparator);const n=[];for(const s of this.pn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")n.push(new Ou(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),n.push(new Ou(s.field,0))}for(const s of this.gn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),n.push(new Ou(s.field,s.dir==="asc"?0:1)));return new kd(kd.UNKNOWN_ID,this.collectionId,n,Gc.empty())}bn(e){for(const n of this.pn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===s}Dn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){var e,n;if(ie(t instanceof _e||t instanceof Pe,20012),t instanceof _e){if(t instanceof BT){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>_e.create(t.field,"==",i)))||[];return Pe.create(r,"or")}return t}const s=t.filters.map(r=>wI(r));return Pe.create(s,t.op)}function t3(t){if(t.getFilters().length===0)return[];const e=yp(wI(t));return ie(EI(e),7391),pp(e)||gp(e)?[e]:e.getFilters()}function pp(t){return t instanceof _e}function gp(t){return t instanceof Pe&&Kg(t)}function EI(t){return pp(t)||gp(t)||function(n){if(n instanceof Pe&&op(n)){for(const s of n.getFilters())if(!pp(s)&&!gp(s))return!1;return!0}return!1}(t)}function yp(t){if(ie(t instanceof _e||t instanceof Pe,34018),t instanceof _e)return t;if(t.filters.length===1)return yp(t.filters[0]);const e=t.filters.map(s=>yp(s));let n=Pe.create(e,t.op);return n=Md(n),EI(n)?n:(ie(n instanceof Pe,64498),ie(Zo(n),40251),ie(n.filters.length>1,57927),n.filters.reduce((s,r)=>ty(s,r)))}function ty(t,e){let n;return ie(t instanceof _e||t instanceof Pe,38388),ie(e instanceof _e||e instanceof Pe,25473),n=t instanceof _e?e instanceof _e?function(r,i){return Pe.create([r,i],"and")}(t,e):zw(t,e):e instanceof _e?zw(e,t):function(r,i){if(ie(r.filters.length>0&&i.filters.length>0,48005),Zo(r)&&Zo(i))return FT(r,i.getFilters());const o=op(r)?r:i,a=op(r)?i:r,c=o.filters.map(d=>ty(d,a));return Pe.create(c,"or")}(t,e),Md(n)}function zw(t,e){if(Zo(e))return FT(e,t.getFilters());{const n=e.filters.map(s=>ty(t,s));return Pe.create(n,"or")}}function Md(t){if(ie(t instanceof _e||t instanceof Pe,11850),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return Md(e[0]);if(MT(t))return t;const n=e.map(r=>Md(r)),s=[];return n.forEach(r=>{r instanceof _e?s.push(r):r instanceof Pe&&(r.op===t.op?s.push(...r.filters):s.push(r))}),s.length===1?s[0]:Pe.create(s,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this.Cn=new ny}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(un.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(un.min())}updateCollectionGroup(e,n,s){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class ny{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Ce(Ae.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ce(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="IndexedDbIndexManager",uu=new Uint8Array(0);class s3{constructor(e,n){this.databaseId=n,this.Fn=new ny,this.Mn=new js(s=>Ci(s),(s,r)=>vl(s,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Fn.has(n)){const s=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.Fn.add(n)});const i={collectionId:s,parent:Rt(r)};return Bw(e).put(i)}return O.resolve()}getCollectionParents(e,n){const s=[],r=IDBKeyRange.bound([n,""],[dT(n),""],!1,!0);return Bw(e).J(r).next(i=>{for(const o of i){if(o.collectionId!==n)break;s.push(Wn(o.parent))}return s})}addFieldIndex(e,n){const s=$a(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const i=s.add(r);if(n.indexState){const o=oo(e);return i.next(a=>{o.put(Dw(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const s=$a(e),r=oo(e),i=io(e);return s.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=$a(e),s=io(e),r=oo(e);return n.X().next(()=>s.X()).next(()=>r.X())}createTargetIndexes(e,n){return O.forEach(this.xn(n),s=>this.getIndexType(e,s).next(r=>{if(r===0||r===1){const i=new Fw(s).vn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const s=io(e);let r=!0;const i=new Map;return O.forEach(this.xn(n),o=>this.On(e,o).next(a=>{r&&(r=!!a),i.set(o,a)})).next(()=>{if(r){let o=pe();const a=[];return O.forEach(i,(c,d)=>{q(Uw,`Using index ${function(x){return`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(c)} to execute ${Ci(n)}`);const f=function(x,D){const L=Zm(D);if(L===void 0)return null;for(const M of Dd(x,L.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(d,c),m=function(x,D){const L=new Map;for(const M of ni(D))for(const w of Dd(x,M.fieldPath))switch(w.op){case"==":case"in":L.set(M.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return L.set(M.fieldPath.canonicalString(),w.value),Array.from(L.values())}return null}(d,c),g=function(x,D){const L=[];let M=!0;for(const w of ni(D)){const y=w.kind===0?_w(x,w.fieldPath,x.startAt):ww(x,w.fieldPath,x.startAt);L.push(y.value),M&&(M=y.inclusive)}return new Jo(L,M)}(d,c),T=function(x,D){const L=[];let M=!0;for(const w of ni(D)){const y=w.kind===0?ww(x,w.fieldPath,x.endAt):_w(x,w.fieldPath,x.endAt);L.push(y.value),M&&(M=y.inclusive)}return new Jo(L,M)}(d,c),S=this.Nn(c,d,g),A=this.Nn(c,d,T),C=this.Bn(c,d,m),b=this.Ln(c.indexId,f,S,g.inclusive,A,T.inclusive,C);return O.forEach(b,v=>s.Z(v,n.limit).next(x=>{x.forEach(D=>{const L=Y.fromSegments(D.documentKey);o.has(L)||(o=o.add(L),a.push(L))})}))}).next(()=>a)}return O.resolve(null)})}xn(e){let n=this.Mn.get(e);return n||(e.filters.length===0?n=[e]:n=t3(Pe.create(e.filters,"and")).map(s=>cp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,n),n)}Ln(e,n,s,r,i,o,a){const c=(n!=null?n.length:1)*Math.max(s.length,i.length),d=c/(n!=null?n.length:1),f=[];for(let m=0;m<c;++m){const g=n?this.kn(n[m/d]):uu,T=this.qn(e,g,s[m%d],r),S=this.Qn(e,g,i[m%d],o),A=a.map(C=>this.qn(e,g,C,!0));f.push(...this.createRange(T,S,A))}return f}qn(e,n,s,r){const i=new ai(e,Y.empty(),n,s);return r?i:i.Rn()}Qn(e,n,s,r){const i=new ai(e,Y.empty(),n,s);return r?i.Rn():i}On(e,n){const s=new Fw(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(i=>{let o=null;for(const a of i)s.wn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let s=2;const r=this.xn(n);return O.forEach(r,i=>this.On(e,i).next(o=>{o?s!==0&&o.fields.length<function(c){let d=new Ce(qe.comparator),f=!1;for(const m of c.filters)for(const g of m.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:d=d.add(g.field));for(const m of c.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(f?1:0)}(i)&&(s=1):s=0})).next(()=>function(o){return o.limit!==null}(n)&&r.length>1&&s===2?1:s)}$n(e,n){const s=new Ba;for(const r of ni(e)){const i=n.data.field(r.fieldPath);if(i==null)return null;const o=s.Tn(r.kind);oi.Wt.vt(i,o)}return s.cn()}kn(e){const n=new Ba;return oi.Wt.vt(e,n.Tn(0)),n.cn()}Un(e,n){const s=new Ba;return oi.Wt.vt(Zc(this.databaseId,n),s.Tn(function(i){const o=ni(i);return o.length===0?0:o[o.length-1].kind}(e))),s.cn()}Bn(e,n,s){if(s===null)return[];let r=[];r.push(new Ba);let i=0;for(const o of ni(e)){const a=s[i++];for(const c of r)if(this.Kn(n,o.fieldPath)&&el(a))r=this.Wn(r,o,a);else{const d=c.Tn(o.kind);oi.Wt.vt(a,d)}}return this.Gn(r)}Nn(e,n,s){return this.Bn(e,n,s.position)}Gn(e){const n=[];for(let s=0;s<e.length;++s)n[s]=e[s].cn();return n}Wn(e,n,s){const r=[...e],i=[];for(const o of s.arrayValue.values||[])for(const a of r){const c=new Ba;c.seed(a.cn()),oi.Wt.vt(o,c.Tn(n.kind)),i.push(c)}return i}Kn(e,n){return!!e.filters.find(s=>s instanceof _e&&s.field.isEqual(n)&&(s.op==="in"||s.op==="not-in"))}getFieldIndexes(e,n){const s=$a(e),r=oo(e);return(n?s.J(tp,IDBKeyRange.bound(n,n)):s.J()).next(i=>{const o=[];return O.forEach(i,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const g=m?new Gc(m.sequenceNumber,new un(Di(m.readTime),new Y(Wn(m.documentKey)),m.largestBatchId)):Gc.empty(),T=f.fields.map(([S,A])=>new Ou(qe.fromServerFormat(S),A));return new kd(f.indexId,f.collectionGroup,T,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((s,r)=>{const i=s.indexState.sequenceNumber-r.indexState.sequenceNumber;return i!==0?i:he(s.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,s){const r=$a(e),i=oo(e);return this.zn(e).next(o=>r.J(tp,IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,c=>i.put(Dw(c.indexId,this.uid,o,s)))))}updateIndexEntries(e,n){const s=new Map;return O.forEach(n,(r,i)=>{const o=s.get(r.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(s.set(r.collectionGroup,a),O.forEach(a,c=>this.jn(e,r,c).next(d=>{const f=this.Hn(i,c);return d.isEqual(f)?O.resolve():this.Jn(e,i,c,d,f)}))))})}Yn(e,n,s,r){return io(e).put(r.Vn(this.uid,this.Un(s,n.key),n.key))}Zn(e,n,s,r){return io(e).delete(r.mn(this.uid,this.Un(s,n.key),n.key))}jn(e,n,s){const r=io(e);let i=new Ce(Gs);return r.te({index:wT,range:IDBKeyRange.only([s.indexId,this.uid,$u(this.Un(s,n))])},(o,a)=>{i=i.add(new ai(s.indexId,n,Lw(a.arrayValue),Lw(a.directionalValue)))}).next(()=>i)}Hn(e,n){let s=new Ce(Gs);const r=this.$n(n,e);if(r==null)return s;const i=Zm(n);if(i!=null){const o=e.data.field(i.fieldPath);if(el(o))for(const a of o.arrayValue.values||[])s=s.add(new ai(n.indexId,e.key,this.kn(a),r))}else s=s.add(new ai(n.indexId,e.key,uu,r));return s}Jn(e,n,s,r,i){q(Uw,"Updating index entries for document '%s'",n.key);const o=[];return function(c,d,f,m,g){const T=c.getIterator(),S=d.getIterator();let A=so(T),C=so(S);for(;A||C;){let b=!1,v=!1;if(A&&C){const x=f(A,C);x<0?v=!0:x>0&&(b=!0)}else A!=null?v=!0:b=!0;b?(m(C),C=so(S)):v?(g(A),A=so(T)):(A=so(T),C=so(S))}}(r,i,Gs,a=>{o.push(this.Yn(e,n,s,a))},a=>{o.push(this.Zn(e,n,s,a))}),O.waitFor(o)}zn(e){let n=1;return oo(e).te({index:_T,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,r,i)=>{i.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,s){s=s.sort((o,a)=>Gs(o,a)).filter((o,a,c)=>!a||Gs(o,c[a-1])!==0);const r=[];r.push(e);for(const o of s){const a=Gs(o,e),c=Gs(o,n);if(a===0)r[0]=e.Rn();else if(a>0&&c<0)r.push(o),r.push(o.Rn());else if(c>0)break}r.push(n);const i=[];for(let o=0;o<r.length;o+=2){if(this.Xn(r[o],r[o+1]))return[];const a=r[o].mn(this.uid,uu,Y.empty()),c=r[o+1].mn(this.uid,uu,Y.empty());i.push(IDBKeyRange.bound(a,c))}return i}Xn(e,n){return Gs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($w)}getMinOffset(e,n){return O.mapArray(this.xn(n),s=>this.On(e,s).next(r=>r||ne(44426))).next($w)}}function Bw(t){return lt(t,Yc)}function io(t){return lt(t,vc)}function $a(t){return lt(t,Bg)}function oo(t){return lt(t,yc)}function $w(t){ie(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let s=1;s<t.length;s++){const r=t[s].indexState.offset;Fg(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new un(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TI=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t,e,n){const s=t.store(An),r=t.store(Go),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=s.te({range:o},(f,m,g)=>(a++,g.delete()));i.push(c.next(()=>{ie(a===1,47070,{batchId:n.batchId})}));const d=[];for(const f of n.mutations){const m=gT(e,f.key.path,n.batchId);i.push(r.delete(m)),d.push(f.key)}return O.waitFor(i).next(()=>d)}function Ld(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(TI,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);class Rh{constructor(e,n,s,r){this.userId=e,this.serializer=n,this.indexManager=s,this.referenceDelegate=r,this.er={}}static bt(e,n,s,r){ie(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Rh(i,n,s,r)}checkEmpty(e){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hs(e).te({index:di,range:s},(r,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,s,r){const i=fo(e),o=Hs(e);return o.add({}).next(a=>{ie(typeof a=="number",49019);const c=new Yg(a,n,s,r),d=function(T,S,A){const C=A.baseMutations.map(v=>Od(T.wt,v)),b=A.mutations.map(v=>Od(T.wt,v));return{userId:S,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:C,mutations:b}}(this.serializer,this.userId,c),f=[];let m=new Ce((g,T)=>he(g.canonicalString(),T.canonicalString()));for(const g of r){const T=gT(this.userId,g.key.path,a);m=m.add(g.key.path.popLast()),f.push(o.put(d)),f.push(i.put(T,RR))}return m.forEach(g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.er[a]=c.keys()}),O.waitFor(f).next(()=>c)})}lookupMutationBatch(e,n){return Hs(e).get(n).next(s=>s?(ie(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:n}),ii(this.serializer,s)):null)}tr(e,n){return this.er[n]?O.resolve(this.er[n]):this.lookupMutationBatch(e,n).next(s=>{if(s){const r=s.keys();return this.er[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=IDBKeyRange.lowerBound([this.userId,s]);let i=null;return Hs(e).te({index:di,range:r},(o,a,c)=>{a.userId===this.userId&&(ie(a.batchId>=s,47524,{nr:s}),i=ii(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=gi;return Hs(e).te({index:di,range:n,reverse:!0},(r,i,o)=>{s=i.batchId,o.done()}).next(()=>s)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,gi],[this.userId,Number.POSITIVE_INFINITY]);return Hs(e).J(di,n).next(s=>s.map(r=>ii(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const s=Vu(this.userId,n.path),r=IDBKeyRange.lowerBound(s),i=[];return fo(e).te({range:r},(o,a,c)=>{const[d,f,m]=o,g=Wn(f);if(d===this.userId&&n.path.isEqual(g))return Hs(e).get(m).next(T=>{if(!T)throw ne(61480,{rr:o,batchId:m});ie(T.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:T.userId,batchId:m}),i.push(ii(this.serializer,T))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ce(he);const r=[];return n.forEach(i=>{const o=Vu(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=fo(e).te({range:a},(d,f,m)=>{const[g,T,S]=d,A=Wn(T);g===this.userId&&i.path.isEqual(A)?s=s.add(S):m.done()});r.push(c)}),O.waitFor(r).next(()=>this.ir(e,s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1,i=Vu(this.userId,s),o=IDBKeyRange.lowerBound(i);let a=new Ce(he);return fo(e).te({range:o},(c,d,f)=>{const[m,g,T]=c,S=Wn(g);m===this.userId&&s.isPrefixOf(S)?S.length===r&&(a=a.add(T)):f.done()}).next(()=>this.ir(e,a))}ir(e,n){const s=[],r=[];return n.forEach(i=>{r.push(Hs(e).get(i).next(o=>{if(o===null)throw ne(35274,{batchId:i});ie(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),s.push(ii(this.serializer,o))}))}),O.waitFor(r).next(()=>s)}removeMutationBatch(e,n){return II(e.he,this.userId,n).next(s=>(e.addOnCommittedListener(()=>{this.sr(n.batchId)}),O.forEach(s,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const s=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return fo(e).te({range:s},(i,o,a)=>{if(i[0]===this.userId){const c=Wn(i[1]);r.push(c)}else a.done()}).next(()=>{ie(r.length===0,56720,{_r:r.map(i=>i.canonicalString())})})})}containsKey(e,n){return xI(e,this.userId,n)}ar(e){return bI(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:gi,lastStreamToken:""})}}function xI(t,e,n){const s=Vu(e,n.path),r=s[1],i=IDBKeyRange.lowerBound(s);let o=!1;return fo(t).te({range:i,ee:!0},(a,c,d)=>{const[f,m,g]=a;f===e&&m===r&&(o=!0),d.done()}).next(()=>o)}function Hs(t){return lt(t,An)}function fo(t){return lt(t,Go)}function bI(t){return lt(t,Kc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ji(0)}static lr(){return new ji(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.hr(e).next(n=>{const s=new ji(n.highestTargetId);return n.highestTargetId=s.next(),this.Pr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(n=>ae.fromTimestamp(new He(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,s){return this.hr(e).next(r=>(r.highestListenSequenceNumber=n,s&&(r.lastRemoteSnapshotVersion=s.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Pr(e,r)))}addTargetData(e,n){return this.Tr(e,n).next(()=>this.hr(e).next(s=>(s.targetCount+=1,this.Ir(n,s),this.Pr(e,s))))}updateTargetData(e,n){return this.Tr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ao(e).delete(n.targetId)).next(()=>this.hr(e)).next(s=>(ie(s.targetCount>0,8065),s.targetCount-=1,this.Pr(e,s)))}removeTargets(e,n,s){let r=0;const i=[];return ao(e).te((o,a)=>{const c=nc(a);c.sequenceNumber<=n&&s.get(c.targetId)===null&&(r++,i.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(i)).next(()=>r)}forEachTarget(e,n){return ao(e).te((s,r)=>{const i=nc(r);n(i)})}hr(e){return Ww(e).get(Nd).next(n=>(ie(n!==null,2888),n))}Pr(e,n){return Ww(e).put(Nd,n)}Tr(e,n){return ao(e).put(vI(this.serializer,n))}Ir(e,n){let s=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,s=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.hr(e).next(n=>n.targetCount)}getTargetData(e,n){const s=Ci(n),r=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let i=null;return ao(e).te({range:r,index:vT},(o,a,c)=>{const d=nc(a);vl(n,d.target)&&(i=d,c.done())}).next(()=>i)}addMatchingKeys(e,n,s){const r=[],i=rr(e);return n.forEach(o=>{const a=Rt(o.path);r.push(i.put({targetId:s,path:a})),r.push(this.referenceDelegate.addReference(e,s,o))}),O.waitFor(r)}removeMatchingKeys(e,n,s){const r=rr(e);return O.forEach(n,i=>{const o=Rt(i.path);return O.waitFor([r.delete([s,o]),this.referenceDelegate.removeReference(e,s,i)])})}removeMatchingKeysForTargetId(e,n){const s=rr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(r)}getMatchingKeysForTargetId(e,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),r=rr(e);let i=pe();return r.te({range:s,ee:!0},(o,a,c)=>{const d=Wn(o[1]),f=new Y(d);i=i.add(f)}).next(()=>i)}containsKey(e,n){const s=Rt(n.path),r=IDBKeyRange.bound([s],[dT(s)],!1,!0);let i=0;return rr(e).te({index:Ug,ee:!0,range:r},([o,a],c,d)=>{o!==0&&(i++,d.done())}).next(()=>i>0)}Rt(e,n){return ao(e).get(n).next(s=>s?nc(s):null)}}function ao(t){return lt(t,Ho)}function Ww(t){return lt(t,yi)}function rr(t){return lt(t,Ko)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="LruGarbageCollector",i3=1048576;function Hw([t,e],[n,s]){const r=he(t,n);return r===0?he(e,s):r}class o3{constructor(e){this.Er=e,this.buffer=new Ce(Hw),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Hw(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){q(Gw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mr(n)?q(Gw,"Ignoring IndexedDB error during garbage collection: ",n):await zi(n)}await this.mr(3e5)})}}class a3{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return O.resolve(yn.le);const s=new o3(n);return this.gr.forEachTarget(e,r=>s.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>s.Rr(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(qw)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qw):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,r,i,o,a,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,o=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(s=m,a=Date.now(),this.removeTargets(e,s,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),co()<=ve.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:m})))}}function kI(t,e){return new a3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n){this.db=e,this.garbageCollector=kI(this,n)}pr(e){const n=this.br(e);return this.db.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}yr(e,n){return this.Sr(e,(s,r)=>n(r))}addReference(e,n,s){return du(e,s)}removeReference(e,n,s){return du(e,s)}removeTargets(e,n,s){return this.db.getTargetCache().removeTargets(e,n,s)}markPotentiallyOrphaned(e,n){return du(e,n)}Dr(e,n){return function(r,i){let o=!1;return bI(r).ne(a=>xI(r,a,i).next(c=>(c&&(o=!0),O.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const c=this.Dr(e,o).next(d=>{if(!d)return i++,s.getEntry(e,o).next(()=>(s.removeEntry(o,ae.min()),rr(e).delete(function(m){return[0,Rt(m.path)]}(o))))});r.push(c)}}).next(()=>O.waitFor(r)).next(()=>s.apply(e)).next(()=>i)}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,n){return du(e,n)}Sr(e,n){const s=rr(e);let r,i=yn.le;return s.te({index:Ug},([o,a],{path:c,sequenceNumber:d})=>{o===0?(i!==yn.le&&n(new Y(Wn(r)),i),i=d,r=c):i=yn.le}).next(()=>{i!==yn.le&&n(new Y(Wn(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function du(t,e){return rr(t).put(function(s,r){return{targetId:0,path:Rt(s.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.changes=new js(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?O.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,s){return Jr(e).put(s)}removeEntry(e,n,s){return Jr(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Vd(o),a[a.length-1]]}(n,s))}updateMetadata(e,n){return this.getMetadata(e).next(s=>(s.byteSize+=n,this.vr(e,s)))}getEntry(e,n){let s=Je.newInvalidDocument(n);return Jr(e).te({index:Mu,range:IDBKeyRange.only(qa(n))},(r,i)=>{s=this.Cr(n,i)}).next(()=>s)}Fr(e,n){let s={size:0,document:Je.newInvalidDocument(n)};return Jr(e).te({index:Mu,range:IDBKeyRange.only(qa(n))},(r,i)=>{s={document:this.Cr(n,i),size:Ld(i)}}).next(()=>s)}getEntries(e,n){let s=an();return this.Mr(e,n,(r,i)=>{const o=this.Cr(r,i);s=s.insert(r,o)}).next(()=>s)}Or(e,n){let s=an(),r=new Ue(Y.comparator);return this.Mr(e,n,(i,o)=>{const a=this.Cr(i,o);s=s.insert(i,a),r=r.insert(i,Ld(o))}).next(()=>({documents:s,Nr:r}))}Mr(e,n,s){if(n.isEmpty())return O.resolve();let r=new Ce(Yw);n.forEach(c=>r=r.add(c));const i=IDBKeyRange.bound(qa(r.first()),qa(r.last())),o=r.getIterator();let a=o.getNext();return Jr(e).te({index:Mu,range:i},(c,d,f)=>{const m=Y.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&Yw(a,m)<0;)s(a,null),a=o.getNext();a&&a.isEqual(m)&&(s(a,d),a=o.hasNext()?o.getNext():null),a?f.H(qa(a)):f.done()}).next(()=>{for(;a;)s(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,s,r,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Vd(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jr(e).J(IDBKeyRange.bound(a,c,!0)).next(d=>{i==null||i.incrementDocumentReadCount(d.length);let f=an();for(const m of d){const g=this.Cr(Y.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);g.isFoundDocument()&&(_l(n,g)||r.has(g.key))&&(f=f.insert(g.key,g))}return f})}getAllFromCollectionGroup(e,n,s,r){let i=an();const o=Qw(n,s),a=Qw(n,un.max());return Jr(e).te({index:yT,range:IDBKeyRange.bound(o,a,!0)},(c,d,f)=>{const m=this.Cr(Y.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);i=i.insert(m.key,m),i.size===r&&f.done()}).next(()=>i)}newChangeBuffer(e){return new u3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Kw(e).get(ep).next(n=>(ie(!!n,20021),n))}vr(e,n){return Kw(e).put(ep,n)}Cr(e,n){if(n){const s=KD(this.serializer,n);if(!(s.isNoDocument()&&s.version.isEqual(ae.min())))return s}return Je.newInvalidDocument(e)}}function PI(t){return new l3(t)}class u3 extends AI{constructor(e,n){super(),this.Br=e,this.trackRemovals=n,this.Lr=new js(s=>s.toString(),(s,r)=>s.isEqual(r))}applyChanges(e){const n=[];let s=0,r=new Ce((i,o)=>he(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Lr.get(i);if(n.push(this.Br.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=Cw(this.Br.serializer,o);r=r.add(i.path.popLast());const d=Ld(c);s+=d-a.size,n.push(this.Br.addEntry(e,i,c))}else if(s-=a.size,this.trackRemovals){const c=Cw(this.Br.serializer,o.convertToNoDocument(ae.min()));n.push(this.Br.addEntry(e,i,c))}}),r.forEach(i=>{n.push(this.Br.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Br.updateMetadata(e,s)),O.waitFor(n)}getFromCache(e,n){return this.Br.Fr(e,n).next(s=>(this.Lr.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,n){return this.Br.Or(e,n).next(({documents:s,Nr:r})=>(r.forEach((i,o)=>{this.Lr.set(i,{size:o,readTime:s.get(i).readTime})}),s))}}function Kw(t){return lt(t,Qc)}function Jr(t){return lt(t,Pd)}function qa(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Qw(t,e){const n=e.documentKey.path.toArray();return[t,Vd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Yw(t,e){const n=t.path.toArray(),s=e.path.toArray();let r=0;for(let i=0;i<n.length-2&&i<s.length-2;++i)if(r=he(n[i],s[i]),r)return r;return r=he(n.length,s.length),r||(r=he(n[n.length-2],s[s.length-2]),r||he(n[n.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Tc(s.mutation,r,Kt.empty(),He.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,pe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=pe()){const r=Gn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=ec();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Gn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,pe()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=an();const o=Ec(),a=function(){return Ec()}();return n.forEach((c,d)=>{const f=s.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof Os)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Tc(f.mutation,d,f.mutation.getFieldMask(),He.now())):o.set(d.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return a.set(d,new d3(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const s=Ec();let r=new Ue((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=s.get(c)||Kt.empty();f=a.applyToLocalView(d,f),s.set(c,f);const m=(r.get(a.batchId)||pe()).add(c);r=r.insert(a.batchId,m)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),d=c.key,f=c.value,m=KT();f.forEach(g=>{if(!i.has(g)){const T=eI(n.get(g),s.get(g));T!==null&&m.set(g,T),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return O.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$T(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):O.resolve(Gn());let a=Wc,c=i;return o.next(d=>O.forEach(d,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,pe())).next(f=>({batchId:a,changes:HT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(s=>{let r=ec();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=ec();return this.indexManager.getCollectionParents(e,i).next(a=>O.forEach(a,c=>{const d=function(m,g){return new ma(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,r).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Je.newInvalidDocument(f)))});let a=ec();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Tc(f.mutation,d,Kt.empty(),He.now()),_l(n,d)&&(a=a.insert(c,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return O.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ft(r.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:_I(r.bundledQuery),readTime:Ft(r.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(){this.overlays=new Ue(Y.comparator),this.Qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Gn();return O.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),O.resolve()}getOverlaysForCollection(e,n,s){const r=Gn(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return O.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ue((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let f=i.get(d.largestBatchId);f===null&&(f=Gn(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=Gn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=r)););return O.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(s.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Jg(n,s));let i=this.Qr.get(n);i===void 0&&(i=pe(),this.Qr.set(n,i)),this.Qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.$r=new Ce(dt.Ur),this.Kr=new Ce(dt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new dt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new dt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Y(new Ae([])),s=new dt(n,e),r=new dt(n,e+1),i=[];return this.Kr.forEachInRange([s,r],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Y(new Ae([])),s=new dt(n,e),r=new dt(n,e+1);let i=pe();return this.Kr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new dt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class dt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Y.comparator(e.key,n.key)||he(e.Zr,n.Zr)}static Wr(e,n){return he(e.Zr,n.Zr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ce(dt.Ur)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Yg(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Xr=this.Xr.add(new dt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ti(s),i=r<0?0:r;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?gi:this.nr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new dt(n,0),r=new dt(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,r],o=>{const a=this.ei(o.Zr);i.push(a)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ce(he);return n.forEach(r=>{const i=new dt(r,0),o=new dt(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{s=s.add(a.Zr)})}),O.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Y.isDocumentKey(i)||(i=i.child(""));const o=new dt(new Y(i),0);let a=new Ce(he);return this.Xr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===r&&(a=a.add(c.Zr)),!0)},o),O.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(s=>{const r=this.ei(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ie(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return O.forEach(n.mutations,r=>{const i=new dt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new dt(n,0),r=this.Xr.firstAfterOrEqual(s);return O.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e){this.ii=e,this.docs=function(){return new Ue(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return O.resolve(s?s.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(e,n){let s=an();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Je.newInvalidDocument(r))}),O.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=an();const o=n.path,a=new Y(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Fg(hT(f),s)<=0||(r.has(f.key)||_l(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ne(9500)}si(e,n){return O.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new y3(this)}getSize(e){return O.resolve(this.size)}}class y3 extends AI{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(s)}),O.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e){this.persistence=e,this.oi=new js(n=>Ci(n),vl),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this._i=0,this.ai=new sy,this.targetCount=0,this.ui=ji.cr()}forEachTarget(e,n){return this.oi.forEach((s,r)=>n(r)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),O.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new ji(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Tr(n),O.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),O.waitFor(i).next(()=>r)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return O.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),O.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return O.resolve(s)}containsKey(e,n){return O.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,n){this.ci={},this.overlays={},this.li=new yn(0),this.hi=!1,this.hi=!0,this.Pi=new m3,this.referenceDelegate=e(this),this.Ti=new v3(this),this.indexManager=new n3,this.remoteDocumentCache=function(r){return new g3(r)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new yI(n),this.Ei=new h3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new f3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new p3(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){q("MemoryPersistence","Starting transaction:",e);const r=new _3(this.li.next());return this.referenceDelegate.di(),s(r).next(i=>this.referenceDelegate.Ai(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ri(e,n){return O.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class _3 extends mT{constructor(e){super(),this.currentSequenceNumber=e}}class Dh{constructor(e){this.persistence=e,this.Vi=new sy,this.mi=null}static fi(e){return new Dh(e)}get gi(){if(this.mi)return this.mi;throw ne(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),O.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.gi,s=>{const r=Y.fromPath(s);return this.pi(e,r).next(i=>{i||n.removeEntry(r,ae.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return O.or([()=>O.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Fd{constructor(e,n){this.persistence=e,this.yi=new js(s=>Rt(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=kI(this,n)}static fi(e,n){return new Fd(e,n)}di(){}Ai(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return O.forEach(this.yi,(s,r)=>this.Dr(e,s,r).next(i=>i?O.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,o=>this.Dr(e,o,n).next(a=>{a||(s++,i.removeEntry(o,ae.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),O.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),O.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fu(e.data.value)),n}Dr(e,n,s){return O.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return O.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e){this.serializer=e}q(e,n,s,r){const i=new vh("createOrUpgrade",n);s<1&&r>=1&&(function(c){c.createObjectStore(yl)}(e),function(c){c.createObjectStore(Kc,{keyPath:CR}),c.createObjectStore(An,{keyPath:aw,autoIncrement:!0}).createIndex(di,cw,{unique:!0}),c.createObjectStore(Go)}(e),Xw(e),function(c){c.createObjectStore(si)}(e));let o=O.resolve();return s<3&&r>=3&&(s!==0&&(function(c){c.deleteObjectStore(Ko),c.deleteObjectStore(Ho),c.deleteObjectStore(yi)}(e),Xw(e)),o=o.next(()=>function(c){const d=c.store(yi),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return d.put(Nd,f)}(i))),s<4&&r>=4&&(s!==0&&(o=o.next(()=>function(c,d){return d.store(An).J().next(m=>{c.deleteObjectStore(An),c.createObjectStore(An,{keyPath:aw,autoIncrement:!0}).createIndex(di,cw,{unique:!0});const g=d.store(An),T=m.map(S=>g.put(S));return O.waitFor(T)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore(Qo,{keyPath:zR})})(e)})),s<5&&r>=5&&(o=o.next(()=>this.wi(i))),s<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore(Qc)}(e),this.bi(i)))),s<7&&r>=7&&(o=o.next(()=>this.Si(i))),s<8&&r>=8&&(o=o.next(()=>this.Di(e,i))),s<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),s<10&&r>=10&&(o=o.next(()=>this.Ci(i))),s<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(wh,{keyPath:UR})})(e),function(c){c.createObjectStore(Eh,{keyPath:BR})}(e)})),s<12&&r>=12&&(o=o.next(()=>{(function(c){const d=c.createObjectStore(Th,{keyPath:QR});d.createIndex(np,YR,{unique:!1}),d.createIndex(ET,XR,{unique:!1})})(e)})),s<13&&r>=13&&(o=o.next(()=>function(c){const d=c.createObjectStore(Pd,{keyPath:DR});d.createIndex(Mu,jR),d.createIndex(yT,OR)}(e)).next(()=>this.Fi(e,i)).next(()=>e.deleteObjectStore(si))),s<14&&r>=14&&(o=o.next(()=>this.Mi(e,i))),s<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore(Bg,{keyPath:$R,autoIncrement:!0}).createIndex(tp,qR,{unique:!1}),c.createObjectStore(yc,{keyPath:WR}).createIndex(_T,GR,{unique:!1}),c.createObjectStore(vc,{keyPath:HR}).createIndex(wT,KR,{unique:!1})}(e))),s<16&&r>=16&&(o=o.next(()=>{n.objectStore(yc).clear()}).next(()=>{n.objectStore(vc).clear()})),s<17&&r>=17&&(o=o.next(()=>{(function(c){c.createObjectStore($g,{keyPath:JR})})(e)})),s<18&&r>=18&&uE()&&(o=o.next(()=>{n.objectStore(yc).clear()}).next(()=>{n.objectStore(vc).clear()})),o}bi(e){let n=0;return e.store(si).te((s,r)=>{n+=Ld(r)}).next(()=>{const s={byteSize:n};return e.store(Qc).put(ep,s)})}wi(e){const n=e.store(Kc),s=e.store(An);return n.J().next(r=>O.forEach(r,i=>{const o=IDBKeyRange.bound([i.userId,gi],[i.userId,i.lastAcknowledgedBatchId]);return s.J(di,o).next(a=>O.forEach(a,c=>{ie(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const d=ii(this.serializer,c);return II(e,i.userId,d).next(()=>{})}))}))}Si(e){const n=e.store(Ko),s=e.store(si);return e.store(yi).get(Nd).next(r=>{const i=[];return s.te((o,a)=>{const c=new Ae(o),d=function(m){return[0,Rt(m)]}(c);i.push(n.get(d).next(f=>f?O.resolve():(m=>n.put({targetId:0,path:Rt(m),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(i))})}Di(e,n){e.createObjectStore(Yc,{keyPath:FR});const s=n.store(Yc),r=new ny,i=o=>{if(r.add(o)){const a=o.lastSegment(),c=o.popLast();return s.put({collectionId:a,parent:Rt(c)})}};return n.store(si).te({ee:!0},(o,a)=>{const c=new Ae(o);return i(c.popLast())}).next(()=>n.store(Go).te({ee:!0},([o,a,c],d)=>{const f=Wn(a);return i(f.popLast())}))}Ci(e){const n=e.store(Ho);return n.te((s,r)=>{const i=nc(r),o=vI(this.serializer,i);return n.put(o)})}Fi(e,n){const s=n.store(si),r=[];return s.te((i,o)=>{const a=n.store(Pd),c=function(m){return m.document?new Y(Ae.fromString(m.document.name).popFirst(5)):m.noDocument?Y.fromSegments(m.noDocument.path):m.unknownDocument?Y.fromSegments(m.unknownDocument.path):ne(36783)}(o).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(d))}).next(()=>O.waitFor(r))}Mi(e,n){const s=n.store(An),r=PI(this.serializer),i=new ry(Dh.fi,this.serializer.wt);return s.J().next(o=>{const a=new Map;return o.forEach(c=>{var d;let f=(d=a.get(c.userId))!==null&&d!==void 0?d:pe();ii(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),O.forEach(a,(c,d)=>{const f=new vt(d),m=Ch.bt(this.serializer,f),g=i.getIndexManager(f),T=Rh.bt(f,this.serializer,g,i.referenceDelegate);return new NI(r,T,m,g).recalculateAndSaveOverlaysForDocumentKeys(new sp(n,yn.le),c).next()})})}}function Xw(t){t.createObjectStore(Ko,{keyPath:MR}).createIndex(Ug,LR,{unique:!0}),t.createObjectStore(Ho,{keyPath:"targetId"}).createIndex(vT,VR,{unique:!0}),t.createObjectStore(yi)}const Ks="IndexedDbPersistence",Mf=18e5,Lf=5e3,Ff="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",E3="main";class iy{constructor(e,n,s,r,i,o,a,c,d,f,m=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=s,this.xi=i,this.window=o,this.document=a,this.Oi=d,this.Ni=f,this.Bi=m,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=g=>Promise.resolve(),!iy.C())throw new Q(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new c3(this,r),this.Ui=n+E3,this.serializer=new yI(c),this.Ki=new Tr(this.Ui,this.Bi,new w3(this.serializer)),this.Pi=new YD,this.Ti=new r3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PI(this.serializer),this.Ei=new QD,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,f===!1&&Mt(Ks,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(z.FAILED_PRECONDITION,Ff);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new yn(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(n=>{n||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(n=>this.isPrimary&&!n?this.Xi(e).next(()=>!1):!!n&&this.es(e).next(()=>!0))).catch(e=>{if(Mr(e))return q(Ks,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q(Ks,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return Wa(e).get(no).next(n=>O.resolve(this.ts(n)))}ns(e){return hu(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Mf)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const s=lt(n,Qo);return s.J().next(r=>{const i=this._s(r,Mf),o=r.filter(a=>i.indexOf(a)===-1);return O.forEach(o,a=>s.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Wi)for(const n of e)this.Wi.removeItem(this.us(n.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?O.resolve(!0):Wa(e).get(no).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,Lf)&&!this.cs(n.ownerId)){if(this.ts(n)&&this.networkEnabled)return!0;if(!this.ts(n)){if(!n.allowTabSynchronization)throw new Q(z.FAILED_PRECONDITION,Ff);return!1}}return!(!this.networkEnabled||!this.inForeground)||hu(e).J().next(s=>this._s(s,Lf).find(r=>{if(this.clientId!==r.clientId){const i=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q(Ks,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[yl,Qo],e=>{const n=new sp(e,yn.le);return this.Xi(n).next(()=>this.ns(n))}),this.Ki.close(),this.Ts()}_s(e,n){return e.filter(s=>this.ss(s.updateTimeMs,n)&&!this.cs(s.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>hu(e).J().next(n=>this._s(n,Mf).map(s=>s.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,n){return Rh.bt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new s3(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Ch.bt(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,n,s){q(Ks,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",i=function(c){return c===18?tD:c===17?bT:c===16?eD:c===15?qg:c===14?xT:c===13?IT:c===12?ZR:c===11?TT:void ne(60245)}(this.Bi);let o;return this.Ki.runTransaction(e,r,i,a=>(o=new sp(a,this.li?this.li.next():yn.le),n==="readwrite-primary"?this.Yi(o).next(c=>!!c||this.Zi(o)).next(c=>{if(!c)throw Mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new Q(z.FAILED_PRECONDITION,fT);return s(o)}).next(c=>this.es(o).next(()=>c)):this.Es(o).next(()=>s(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Es(e){return Wa(e).get(no).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,Lf)&&!this.cs(n.ownerId)&&!this.ts(n)&&!(this.Ni||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Q(z.FAILED_PRECONDITION,Ff)})}es(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wa(e).put(no,n)}static C(){return Tr.C()}Xi(e){const n=Wa(e);return n.get(no).next(s=>this.ts(s)?(q(Ks,"Releasing primary lease."),n.delete(no)):O.resolve())}ss(e,n){const s=Date.now();return!(e<s-n)&&(!(e>s)||(Mt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const n=/(?:Version|Mobile)\/1[456]/;lE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var n;try{const s=((n=this.Wi)===null||n===void 0?void 0:n.getItem(this.us(e)))!==null;return q(Ks,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Mt(Ks,"Failed to get zombied client id.",s),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){Mt("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wa(t){return lt(t,yl)}function hu(t){return lt(t,Qo)}function T3(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.ds=s,this.As=r}static Rs(e,n){let s=pe(),r=pe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new oy(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return lE()?8:pT(ct())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new I3;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,s,r){return s.documentReadCount<this.gs?(co()<=ve.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),O.resolve()):(co()<=ve.DEBUG&&q("QueryEngine","Query:",lo(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ps*r?(co()<=ve.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):O.resolve())}ws(e,n){if(Ew(n))return O.resolve(null);let s=_n(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=up(n,null,"F"),s=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=pe(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.vs(n,a);return this.Cs(n,d,o,c.readTime)?this.ws(e,up(n,null,"F")):this.Fs(e,d,n,c)}))})))}bs(e,n,s,r){return Ew(n)||r.isEqual(ae.min())?O.resolve(null):this.ys.getDocuments(e,s).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,s,r)?O.resolve(null):(co()<=ve.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lo(n)),this.Fs(e,o,n,xR(r,Wc)).next(a=>a))})}vs(e,n){let s=new Ce(WT(e));return n.forEach((r,i)=>{_l(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return co()<=ve.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",lo(n)),this.ys.getDocumentsMatchingQuery(e,n,un.min(),s)}Fs(e,n,s,r){return this.ys.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="LocalStore",x3=3e8;class b3{constructor(e,n,s,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new Ue(he),this.Os=new js(i=>Ci(i),vl),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function RI(t,e,n,s){return new b3(t,e,n,s)}async function DI(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let c=pe();for(const d of r){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(s,c).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:a}))})})}function S3(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,f){const m=d.batch,g=m.keys();let T=O.resolve();return g.forEach(S=>{T=T.next(()=>f.getEntry(c,S)).next(A=>{const C=d.docVersions.get(S);ie(C!==null,48541),A.version.compareTo(C)<0&&(m.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),f.addEntry(A)))})}),T.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let c=pe();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function jI(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function k3(t,e){const n=fe(t),s=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const a=[];e.targetChanges.forEach((f,m)=>{const g=r.get(m);if(!g)return;a.push(n.Ti.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,f.addedDocuments,m)));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?T=T.withResumeToken(it.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,s)),r=r.insert(m,T),function(A,C,b){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=x3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,T,f)&&a.push(n.Ti.updateTargetData(i,T))});let c=an(),d=pe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(A3(i,o,e.documentUpdates).next(f=>{c=f.qs,d=f.Qs})),!s.isEqual(ae.min())){const f=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(f)}return O.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.xs=r,i))}function A3(t,e,n){let s=pe(),r=pe();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=an();return n.forEach((a,c)=>{const d=i.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):q(ay,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{qs:o,Qs:r}})}function P3(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=gi),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function N3(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ti.getTargetData(s,e).next(i=>i?(r=i,O.resolve(r)):n.Ti.allocateTargetId(s).next(o=>(r=new vs(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.xs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function vp(t,e,n){const s=fe(t),r=s.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Mr(o))throw o;q(ay,`Failed to update sequence numbers for target ${e}: ${o}`)}s.xs=s.xs.remove(e),s.Os.delete(r.target)}function Jw(t,e,n){const s=fe(t);let r=ae.min(),i=pe();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const m=fe(c),g=m.Os.get(f);return g!==void 0?O.resolve(m.xs.get(g)):m.Ti.getTargetData(d,f)}(s,o,_n(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,e,n?r:ae.min(),n?i:pe())).next(a=>(C3(s,gD(e),a),{documents:a,$s:i})))}function C3(t,e,n){let s=t.Ns.get(e)||ae.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ns.set(e,s)}class Zw{constructor(){this.activeTargetIds=TD()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OI{constructor(){this.xo=new Zw,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Zw,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="ConnectivityMonitor";class t2{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){q(e2,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){q(e2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=null;function _p(){return fu===null?fu=function(){return 268435456+Math.round(2147483648*Math.random())}():fu++,"0x"+fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="RestConnection",D3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j3{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${r}`,this.Go=this.databaseId.database===Cd?`project_id=${s}`:`project_id=${s}&database_id=${r}`}zo(e,n,s,r,i){const o=_p(),a=this.jo(e,n.toUriEncodedString());q(zf,`Sending RPC '${e}' ${o}:`,a,s);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,r,i);const{host:d}=new URL(a),f=Li(d);return this.Jo(e,a,c,s,f).then(m=>(q(zf,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Pi(zf,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",s),m})}Yo(e,n,s,r,i,o){return this.zo(e,n,s,r,i)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}jo(e,n){const s=D3[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class V3 extends j3{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=_p();return new Promise((a,c)=>{const d=new nT;d.setWithCredentials(!0),d.listenOnce(sT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ju.NO_ERROR:const m=d.getResponseJson();q(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case ju.TIMEOUT:q(St,`RPC '${e}' ${o} timed out`),c(new Q(z.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:const g=d.getStatus();if(q(St,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T==null?void 0:T.error;if(S&&S.status&&S.message){const A=function(b){const v=b.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(v)>=0?v:z.UNKNOWN}(S.status);c(new Q(A,S.message))}else c(new Q(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Q(z.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{q(St,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);q(St,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",f,s,15)})}I_(e,n,s){const r=_p(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oT(),a=iT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const f=i.join("");q(St,`Creating RPC '${e}' stream ${r}: ${f}`,c);const m=o.createWebChannel(f,c);this.E_(m);let g=!1,T=!1;const S=new O3({Zo:C=>{T?q(St,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(g||(q(St,`Opening RPC '${e}' stream ${r} transport.`),m.open(),g=!0),q(St,`RPC '${e}' stream ${r} sending:`,C),m.send(C))},Xo:()=>m.close()}),A=(C,b,v)=>{C.listen(b,x=>{try{v(x)}catch(D){setTimeout(()=>{throw D},0)}})};return A(m,Za.EventType.OPEN,()=>{T||(q(St,`RPC '${e}' stream ${r} transport opened.`),S.__())}),A(m,Za.EventType.CLOSE,()=>{T||(T=!0,q(St,`RPC '${e}' stream ${r} transport closed`),S.u_(),this.d_(m))}),A(m,Za.EventType.ERROR,C=>{T||(T=!0,Pi(St,`RPC '${e}' stream ${r} transport errored. Name:`,C.name,"Message:",C.message),S.u_(new Q(z.UNAVAILABLE,"The operation could not be completed")))}),A(m,Za.EventType.MESSAGE,C=>{var b;if(!T){const v=C.data[0];ie(!!v,16349);const x=v,D=(x==null?void 0:x.error)||((b=x[0])===null||b===void 0?void 0:b.error);if(D){q(St,`RPC '${e}' stream ${r} received error:`,D);const L=D.status;let M=function(I){const E=tt[I];if(E!==void 0)return sI(E)}(L),w=D.message;M===void 0&&(M=z.INTERNAL,w="Unknown error status: "+L+" with message "+D.message),T=!0,S.u_(new Q(M,w)),m.close()}else q(St,`RPC '${e}' stream ${r} received:`,v),S.c_(v)}}),A(a,rT.STAT_EVENT,C=>{C.stat===Xm.PROXY?q(St,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===Xm.NOPROXY&&q(St,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.a_()},0),S}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(){return typeof window<"u"?window:null}function qu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t){return new LD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n,s=1e3,r=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=r,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),r=Math.max(0,n-s);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="PersistentStream";class MI{constructor(e,n,s,r,i,o,a,c){this.xi=e,this.S_=s,this.D_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new VI(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Mt(n.toString()),Mt("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.v_===n&&this.z_(s,r)},s=>{e(()=>{const r=new Q(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(r)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{s(()=>this.j_(r))}),this.stream.onMessage(r=>{s(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return q(n2,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(q(n2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L3 extends MI{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=UD(this.serializer,e),s=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Ft(o.readTime):ae.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=fp(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Rd(c)?{documents:dI(i,c)}:{query:hI(i,c).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=oI(i,o.resumeToken);const d=dp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=na(i,o.snapshotVersion.toTimestamp());const d=dp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const s=$D(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=fp(this.serializer),n.removeTarget=e,this.Q_(n)}}class F3 extends MI{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=BD(e.writeResults,e.commitTime),s=Ft(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=fp(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Od(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{}class U3 extends z3{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,hp(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(z.UNKNOWN,i.toString())})}Yo(e,n,s,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,hp(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(z.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class B3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Mt(n),this.ua=!1):q("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="RemoteStore";class $3{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{s.enqueueAndForget(async()=>{Ui(this)&&(q(Oi,"Restarting streams for network reachability change."),await async function(c){const d=fe(c);d.da.add(4),await El(d),d.Va.set("Unknown"),d.da.delete(4),await Oh(d)}(this))})}),this.Va=new B3(s,r)}}async function Oh(t){if(Ui(t))for(const e of t.Aa)await e(!0)}async function El(t){for(const e of t.Aa)await e(!1)}function LI(t,e){const n=fe(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),dy(n)?uy(n):ga(n).N_()&&ly(n,e))}function cy(t,e){const n=fe(t),s=ga(n);n.Ea.delete(e),s.N_()&&FI(n,e),n.Ea.size===0&&(s.N_()?s.k_():Ui(n)&&n.Va.set("Unknown"))}function ly(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ga(t).Z_(e)}function FI(t,e){t.ma.Ke(e),ga(t).X_(e)}function uy(t){t.ma=new jD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),ga(t).start(),t.Va.ca()}function dy(t){return Ui(t)&&!ga(t).O_()&&t.Ea.size>0}function Ui(t){return fe(t).da.size===0}function zI(t){t.ma=void 0}async function q3(t){t.Va.set("Online")}async function W3(t){t.Ea.forEach((e,n)=>{ly(t,e)})}async function G3(t,e){zI(t),dy(t)?(t.Va.Pa(e),uy(t)):t.Va.set("Unknown")}async function H3(t,e,n){if(t.Va.set("Online"),e instanceof iI&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ea.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ea.delete(a),r.ma.removeTarget(a))}(t,e)}catch(s){q(Oi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await zd(t,s)}else if(e instanceof Bu?t.ma.Xe(e):e instanceof rI?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ae.min()))try{const s=await jI(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.ma.It(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ea.get(d);f&&i.Ea.set(d,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{const f=i.Ea.get(c);if(!f)return;i.Ea.set(c,f.withResumeToken(it.EMPTY_BYTE_STRING,f.snapshotVersion)),FI(i,c);const m=new vs(f.target,c,d,f.sequenceNumber);ly(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){q(Oi,"Failed to raise snapshot:",s),await zd(t,s)}}async function zd(t,e,n){if(!Mr(e))throw e;t.da.add(1),await El(t),t.Va.set("Offline"),n||(n=()=>jI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Oi,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Oh(t)})}function UI(t,e){return e().catch(n=>zd(t,n,e))}async function Tl(t){const e=fe(t),n=Nr(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:gi;for(;K3(e);)try{const r=await P3(e.localStore,s);if(r===null){e.Ia.length===0&&n.k_();break}s=r.batchId,Q3(e,r)}catch(r){await zd(e,r)}BI(e)&&$I(e)}function K3(t){return Ui(t)&&t.Ia.length<10}function Q3(t,e){t.Ia.push(e);const n=Nr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function BI(t){return Ui(t)&&!Nr(t).O_()&&t.Ia.length>0}function $I(t){Nr(t).start()}async function Y3(t){Nr(t).ia()}async function X3(t){const e=Nr(t);for(const n of t.Ia)e.ta(n.mutations)}async function J3(t,e,n){const s=t.Ia.shift(),r=Xg.from(s,e,n);await UI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Tl(t)}async function Z3(t,e){e&&Nr(t).ea&&await async function(s,r){if(function(o){return RD(o)&&o!==z.ABORTED}(r.code)){const i=s.Ia.shift();Nr(s).L_(),await UI(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Tl(s)}}(t,e),BI(t)&&$I(t)}async function s2(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),q(Oi,"RemoteStore received new credentials");const s=Ui(n);n.da.add(3),await El(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Oh(n)}async function ej(t,e){const n=fe(t);e?(n.da.delete(2),await Oh(n)):e||(n.da.add(2),await El(n),n.Va.set("Unknown"))}function ga(t){return t.fa||(t.fa=function(n,s,r){const i=fe(n);return i.oa(),new L3(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:q3.bind(null,t),n_:W3.bind(null,t),i_:G3.bind(null,t),Y_:H3.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),dy(t)?uy(t):t.Va.set("Unknown")):(await t.fa.stop(),zI(t))})),t.fa}function Nr(t){return t.ga||(t.ga=function(n,s,r){const i=fe(n);return i.oa(),new F3(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:Y3.bind(null,t),i_:Z3.bind(null,t),na:X3.bind(null,t),ra:J3.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Tl(t)):(await t.ga.stop(),t.Ia.length>0&&(q(Oi,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new hy(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(t,e){if(Mt("AsyncQueue",`${e}: ${t}`),Mr(t))return new Q(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Y.comparator(n.key,s.key):(n,s)=>Y.comparator(n.key,s.key),this.keyedMap=ec(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Vo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.pa=new Ue(Y.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class sa{constructor(e,n,s,r,i,o,a,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new sa(e,n,Vo.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class nj{constructor(){this.queries=i2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=fe(n),i=r.queries;r.queries=i2(),i.forEach((o,a)=>{for(const c of a.Sa)c.onError(s)})})(this,new Q(z.ABORTED,"Firestore shutting down"))}}function i2(){return new js(t=>qT(t),Sh)}async function qI(t,e){const n=fe(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.Da()&&e.va()&&(s=2):(i=new tj,s=e.va()?0:1);try{switch(s){case 0:i.ba=await n.onListen(r,!0);break;case 1:i.ba=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=fy(o,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&my(n)}async function WI(t,e){const n=fe(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.va()?0:1:!i.Da()&&e.va()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function sj(t,e){const n=fe(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Ma(r)&&(s=!0);o.ba=r}}s&&my(n)}function rj(t,e,n){const s=fe(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function my(t){t.Ca.forEach(e=>{e.next()})}var wp,o2;(o2=wp||(wp={})).xa="default",o2.Cache="cache";class GI{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new sa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==wp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.key=e}}class KI{constructor(e){this.key=e}}class ij{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pe(),this.mutatedKeys=pe(),this.Za=WT(e),this.Xa=new Vo(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new r2,r=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{const g=r.get(f),T=_l(this.query,m)?m:null,S=!!g&&this.mutatedKeys.has(g.key),A=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let C=!1;g&&T?g.data.isEqual(T.data)?S!==A&&(s.track({type:3,doc:T}),C=!0):this.ru(g,T)||(s.track({type:2,doc:T}),C=!0,(c&&this.Za(T,c)>0||d&&this.Za(T,d)<0)&&(a=!0)):!g&&T?(s.track({type:0,doc:T}),C=!0):g&&!T&&(s.track({type:1,doc:g}),C=!0,(c||d)&&(a=!0)),C&&(T?(o=o.add(T),i=A?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{Xa:o,nu:s,Cs:a,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((f,m)=>function(T,S){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:C})}};return A(T)-A(S)}(f.type,m.type)||this.Za(f.doc,m.doc)),this.iu(s),r=r!=null&&r;const a=n&&!r?this.su():[],c=this.Ya.size===0&&this.current&&!r?1:0,d=c!==this.Ja;return this.Ja=c,o.length!==0||d?{snapshot:new sa(this.query,e.Xa,i,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new r2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=pe(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new KI(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new HI(s))}),n}au(e){this.Ha=e.$s,this.Ya=pe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return sa.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const py="SyncEngine";class oj{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class aj{constructor(e){this.key=e,this.cu=!1}}class cj{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new js(a=>qT(a),Sh),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ue(Y.comparator),this.Eu=new Map,this.du=new sy,this.Au={},this.Ru=new Map,this.Vu=ji.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function lj(t,e,n=!0){const s=ex(t);let r;const i=s.hu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.uu()):r=await QI(s,e,n,!0),r}async function uj(t,e){const n=ex(t);await QI(n,e,!0,!1)}async function QI(t,e,n,s){const r=await N3(t.localStore,_n(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await dj(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&LI(t.remoteStore,r),a}async function dj(t,e,n,s,r){t.fu=(m,g,T)=>async function(A,C,b,v){let x=C.view.tu(b);x.Cs&&(x=await Jw(A.localStore,C.query,!1).then(({documents:w})=>C.view.tu(w,x)));const D=v&&v.targetChanges.get(C.targetId),L=v&&v.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(x,A.isPrimaryClient,D,L);return c2(A,C.targetId,M.ou),M.snapshot}(t,m,g,T);const i=await Jw(t.localStore,e,!0),o=new ij(e,i.$s),a=o.tu(i.documents),c=wl.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),d=o.applyChanges(a,t.isPrimaryClient,c);c2(t,n,d.ou);const f=new oj(e,n,o);return t.hu.set(e,f),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function hj(t,e,n){const s=fe(t),r=s.hu.get(e),i=s.Pu.get(r.targetId);if(i.length>1)return s.Pu.set(r.targetId,i.filter(o=>!Sh(o,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await vp(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&cy(s.remoteStore,r.targetId),Ep(s,r.targetId)}).catch(zi)):(Ep(s,r.targetId),await vp(s.localStore,r.targetId,!0))}async function fj(t,e){const n=fe(t),s=n.hu.get(e),r=n.Pu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),cy(n.remoteStore,s.targetId))}async function mj(t,e,n){const s=tx(t);try{const r=await function(o,a){const c=fe(o),d=He.now(),f=a.reduce((T,S)=>T.add(S.key),pe());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let S=an(),A=pe();return c.Bs.getEntries(T,f).next(C=>{S=C,S.forEach((b,v)=>{v.isValidDocument()||(A=A.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,S)).next(C=>{m=C;const b=[];for(const v of a){const x=ND(v,m.get(v.key).overlayedDocument);x!=null&&b.push(new Os(v.key,x,OT(x.value.mapValue),Ct.exists(!0)))}return c.mutationQueue.addMutationBatch(T,d,b,a)}).next(C=>{g=C;const b=C.applyToLocalDocumentSet(m,A);return c.documentOverlayCache.saveOverlays(T,C.batchId,b)})}).then(()=>({batchId:g.batchId,changes:HT(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let d=o.Au[o.currentUser.toKey()];d||(d=new Ue(he)),d=d.insert(a,c),o.Au[o.currentUser.toKey()]=d}(s,r.batchId,n),await Il(s,r.changes),await Tl(s.remoteStore)}catch(r){const i=fy(r,"Failed to persist write");n.reject(i)}}async function YI(t,e){const n=fe(t);try{const s=await k3(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Eu.get(i);o&&(ie(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.cu=!0:r.modifiedDocuments.size>0?ie(o.cu,14607):r.removedDocuments.size>0&&(ie(o.cu,42227),o.cu=!1))}),await Il(n,s,e)}catch(s){await zi(s)}}function a2(t,e,n){const s=fe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.hu.forEach((i,o)=>{const a=o.view.Fa(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const c=fe(o);c.onlineState=a;let d=!1;c.queries.forEach((f,m)=>{for(const g of m.Sa)g.Fa(a)&&(d=!0)}),d&&my(c)}(s.eventManager,e),r.length&&s.lu.Y_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function pj(t,e,n){const s=fe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Eu.get(e),i=r&&r.key;if(i){let o=new Ue(Y.comparator);o=o.insert(i,Je.newNoDocument(i,ae.min()));const a=pe().add(i),c=new Nh(ae.min(),new Map,new Ue(he),o,a);await YI(s,c),s.Iu=s.Iu.remove(i),s.Eu.delete(e),gy(s)}else await vp(s.localStore,e,!1).then(()=>Ep(s,e,n)).catch(zi)}async function gj(t,e){const n=fe(t),s=e.batch.batchId;try{const r=await S3(n.localStore,e);JI(n,s,null),XI(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Il(n,r)}catch(r){await zi(r)}}async function yj(t,e,n){const s=fe(t);try{const r=await function(o,a){const c=fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,a).next(m=>(ie(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(s.localStore,e);JI(s,e,n),XI(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Il(s,r)}catch(r){await zi(r)}}function XI(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function JI(t,e,n){const s=fe(t);let r=s.Au[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Au[s.currentUser.toKey()]=r}}function Ep(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Pu.get(e))t.hu.delete(s),n&&t.lu.gu(s,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(s=>{t.du.containsKey(s)||ZI(t,s)})}function ZI(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(cy(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),gy(t))}function c2(t,e,n){for(const s of n)s instanceof HI?(t.du.addReference(s.key,e),vj(t,s)):s instanceof KI?(q(py,"Document no longer in limbo: "+s.key),t.du.removeReference(s.key,e),t.du.containsKey(s.key)||ZI(t,s.key)):ne(19791,{pu:s})}function vj(t,e){const n=e.key,s=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(s)||(q(py,"New document in limbo: "+n),t.Tu.add(s),gy(t))}function gy(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Y(Ae.fromString(e)),s=t.Vu.next();t.Eu.set(s,new aj(n)),t.Iu=t.Iu.insert(n,s),LI(t.remoteStore,new vs(_n(bh(n.path)),s,"TargetPurposeLimboResolution",yn.le))}}async function Il(t,e,n){const s=fe(t),r=[],i=[],o=[];s.hu.isEmpty()||(s.hu.forEach((a,c)=>{o.push(s.fu(c,e,n).then(d=>{var f;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;s.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){r.push(d);const m=oy.Rs(c.targetId,d);i.push(m)}}))}),await Promise.all(o),s.lu.Y_(r),await async function(c,d){const f=fe(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(d,g=>O.forEach(g.ds,T=>f.persistence.referenceDelegate.addReference(m,g.targetId,T)).next(()=>O.forEach(g.As,T=>f.persistence.referenceDelegate.removeReference(m,g.targetId,T)))))}catch(m){if(!Mr(m))throw m;q(ay,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const T=f.xs.get(g),S=T.snapshotVersion,A=T.withLastLimboFreeSnapshotVersion(S);f.xs=f.xs.insert(g,A)}}}(s.localStore,i))}async function _j(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){q(py,"User change. New user:",e.toKey());const s=await DI(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(a=>{a.forEach(c=>{c.reject(new Q(z.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Il(n,s.ks)}}function wj(t,e){const n=fe(t),s=n.Eu.get(e);if(s&&s.cu)return pe().add(s.key);{let r=pe();const i=n.Pu.get(e);if(!i)return r;for(const o of i){const a=n.hu.get(o);r=r.unionWith(a.view.eu)}return r}}function ex(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pj.bind(null,e),e.lu.Y_=sj.bind(null,e.eventManager),e.lu.gu=rj.bind(null,e.eventManager),e}function tx(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yj.bind(null,e),e}class rl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return RI(this.persistence,new CI,e.initialUser,this.serializer)}Su(e){return new ry(Dh.fi,this.serializer)}bu(e){return new OI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rl.provider={build:()=>new rl};class Ej extends rl{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ie(this.persistence.referenceDelegate instanceof Fd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new SI(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new ry(s=>Fd.fi(s,n),this.serializer)}}class Tj extends rl{constructor(e,n,s){super(),this.Fu=e,this.cacheSizeBytes=n,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Fu.initialize(this,e),await tx(this.Fu.syncEngine),await Tl(this.Fu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Du(e){return RI(this.persistence,new CI,e.initialUser,this.serializer)}vu(e,n){const s=this.persistence.referenceDelegate.garbageCollector;return new SI(s,e.asyncQueue,n)}Cu(e,n){const s=new AR(n,this.persistence);return new kR(e.asyncQueue,s)}Su(e){const n=T3(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new iy(this.synchronizeTabs,n,e.clientId,s,e.asyncQueue,M3(),qu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new OI}}class Ud{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>a2(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=_j.bind(null,this.syncEngine),await ej(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nj}()}createDatastore(e){const n=jh(e.databaseInfo.databaseId),s=function(i){return new V3(i)}(e.databaseInfo);return function(i,o,a,c){return new U3(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new $3(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>a2(this.syncEngine,n,0),function(){return t2.C()?new t2:new R3}())}createSyncEngine(e,n){return function(r,i,o,a,c,d,f){const m=new cj(r,i,o,a,c,d);return f&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=fe(r);q(Oi,"RemoteStore shutting down."),i.da.add(5),await El(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ud.provider={build:()=>new Ud};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Mt("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="FirestoreClient";class Ij{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=vt.UNAUTHENTICATED,this.clientId=uT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{q(Cr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(q(Cr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=fy(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Uf(t,e){t.asyncQueue.verifyOperationInProgress(),q(Cr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await DI(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function l2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xj(t);q(Cr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>s2(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>s2(e.remoteStore,r)),t._onlineComponents=e}async function xj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Cr,"Using user provided OfflineComponentProvider");try{await Uf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Pi("Error using user provided cache. Falling back to memory cache: "+n),await Uf(t,new rl)}}else q(Cr,"Using default OfflineComponentProvider"),await Uf(t,new Ej(void 0));return t._offlineComponents}async function sx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Cr,"Using user provided OnlineComponentProvider"),await l2(t,t._uninitializedComponentsProvider._online)):(q(Cr,"Using default OnlineComponentProvider"),await l2(t,new Ud))),t._onlineComponents}function bj(t){return sx(t).then(e=>e.syncEngine)}async function rx(t){const e=await sx(t),n=e.eventManager;return n.onListen=lj.bind(null,e.syncEngine),n.onUnlisten=hj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fj.bind(null,e.syncEngine),n}function Sj(t,e,n={}){const s=new ts;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const f=new nx({next:g=>{f.xu(),o.enqueueAndForget(()=>WI(i,m));const T=g.docs.has(a);!T&&g.fromCache?d.reject(new Q(z.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&c&&c.source==="server"?d.reject(new Q(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new GI(bh(a.path),f,{includeMetadataChanges:!0,Qa:!0});return qI(i,m)}(await rx(t),t.asyncQueue,e,n,s)),s.promise}function kj(t,e,n={}){const s=new ts;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const f=new nx({next:g=>{f.xu(),o.enqueueAndForget(()=>WI(i,m)),g.fromCache&&c.source==="server"?d.reject(new Q(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new GI(a,f,{includeMetadataChanges:!0,Qa:!0});return qI(i,m)}(await rx(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t,e,n){if(!n)throw new Q(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Aj(t,e,n,s){if(e===!0&&s===!0)throw new Q(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function d2(t){if(!Y.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function h2(t){if(Y.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vh(t);throw new Q(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="firestore.googleapis.com",f2=!0;class m2{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ax,this.ssl=f2}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:f2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i3)throw new Q(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Aj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ix((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mh{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new pR;switch(s.type){case"firstParty":return new _R(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Q(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=u2.get(n);s&&(q("ComponentProvider","Removing Datastore"),u2.delete(n),s.terminate())}(this),Promise.resolve()}}function Pj(t,e,n,s={}){var r;t=Tn(t,Mh);const i=Li(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(xg(`https://${c}`),bg("Firestore",!0)),o.host!==ax&&o.host!==c&&Pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:s});if(!xi(d,a)&&(t._setSettings(d),s.mockUserToken)){let f,m;if(typeof s.mockUserToken=="string")f=s.mockUserToken,m=vt.MOCK_USER;else{f=jA(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new Q(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new vt(g)}t._authCredentials=new gR(new cT(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class zt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}}class Ir extends Bi{constructor(e,n,s){super(e,n,bh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new Y(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function rn(t,e,...n){if(t=rt(t),ox("collection","path",e),t instanceof Mh){const s=Ae.fromString(e,...n);return h2(s),new Ir(t,null,s)}{if(!(t instanceof zt||t instanceof Ir))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ae.fromString(e,...n));return h2(s),new Ir(t.firestore,null,s)}}function st(t,e,...n){if(t=rt(t),arguments.length===1&&(e=uT.newId()),ox("doc","path",e),t instanceof Mh){const s=Ae.fromString(e,...n);return d2(s),new zt(t,null,new Y(s))}{if(!(t instanceof zt||t instanceof Ir))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ae.fromString(e,...n));return d2(s),new zt(t.firestore,t instanceof Ir?t.converter:null,new Y(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="AsyncQueue";class g2{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new VI(this,"async_queue_retry"),this.rc=()=>{const s=qu();s&&q(p2,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=qu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=qu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ts;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Mr(e))throw e;q(p2,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Mt("INTERNAL UNHANDLED ERROR: ",y2(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const r=hy.createAndSchedule(this,e,n,s,i=>this.uc(i));return this.Zu.push(r),r}oc(){this.Xu&&ne(47125,{cc:y2(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function y2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Fr extends Mh{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new g2,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g2(e),this._firestoreClient=void 0,await e}}}function Nj(t,e){const n=typeof t=="object"?t:Ag(),s=typeof t=="string"?t:Cd,r=mh(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=iE("firestore");i&&Pj(r,...i)}return r}function yy(t){if(t._terminated)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cx(t),t._firestoreClient}function cx(t){var e,n,s;const r=t._freezeSettings(),i=function(a,c,d,f){return new sD(a,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,ix(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Ij(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}function Cj(t,e){Pi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Rj(t,Ud.provider,{build:s=>new Tj(s,n.cacheSizeBytes,void 0)}),Promise.resolve()}function Rj(t,e,n){if((t=Tn(t,Fr))._firestoreClient||t._terminated)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Q(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},cx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(it.fromBase64String(e))}catch(n){throw new Q(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ra(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=/^__.*__$/;class jj{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,n,this.fieldTransforms):new pa(e,this.data,n,this.fieldTransforms)}}class lx{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ux(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ic:t})}}class Ey{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Ey(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:s,Rc:!1});return r.Vc(e),r}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:s,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Bd(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(ux(this.Ic)&&Dj.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Oj{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||jh(e)}bc(e,n,s,r=!1){return new Ey({Ic:e,methodName:n,wc:s,path:qe.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fh(t){const e=t._freezeSettings(),n=jh(t._databaseId);return new Oj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dx(t,e,n,s,r,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,r);Ty("Data must be an object, but it was:",o,s);const a=hx(s,o);let c,d;if(i.merge)c=new Kt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=Tp(e,m,n);if(!o.contains(g))throw new Q(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);mx(f,g)||f.push(g)}c=new Kt(f),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new jj(new Nt(a),c,d)}class zh extends vy{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zh}}function Vj(t,e,n,s){const r=t.bc(1,e,n);Ty("Data must be an object, but it was:",r,s);const i=[],o=Nt.empty();Lr(s,(c,d)=>{const f=Iy(e,c,n);d=rt(d);const m=r.mc(f);if(d instanceof zh)i.push(f);else{const g=xl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const a=new Kt(i);return new lx(o,a,r.fieldTransforms)}function Mj(t,e,n,s,r,i){const o=t.bc(1,e,n),a=[Tp(e,s,n)],c=[r];if(i.length%2!=0)throw new Q(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(Tp(e,i[g])),c.push(i[g+1]);const d=[],f=Nt.empty();for(let g=a.length-1;g>=0;--g)if(!mx(d,a[g])){const T=a[g];let S=c[g];S=rt(S);const A=o.mc(T);if(S instanceof zh)d.push(T);else{const C=xl(S,A);C!=null&&(d.push(T),f.set(T,C))}}const m=new Kt(d);return new lx(f,m,o.fieldTransforms)}function Lj(t,e,n,s=!1){return xl(n,t.bc(s?4:3,e))}function xl(t,e){if(fx(t=rt(t)))return Ty("Unsupported field value:",e,t),hx(t,e);if(t instanceof vy)return function(s,r){if(!ux(r.Ic))throw r.gc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let c=xl(a,r.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=rt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ID(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=He.fromDate(s);return{timestampValue:na(r.serializer,i)}}if(s instanceof He){const i=new He(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:na(r.serializer,i)}}if(s instanceof _y)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ra)return{bytesValue:oI(r.serializer,s._byteString)};if(s instanceof zt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ey(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof wy)return function(o,a){return{mapValue:{fields:{[Gg]:{stringValue:Hg},[Yo]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.gc("VectorValues must only contain numeric values.");return Qg(a.serializer,d)})}}}}}}(s,r);throw r.gc(`Unsupported field value: ${Vh(s)}`)}(t,e)}function hx(t,e){const n={};return ST(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(t,(s,r)=>{const i=xl(r,e.Ac(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function fx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof _y||t instanceof ra||t instanceof zt||t instanceof vy||t instanceof wy)}function Ty(t,e,n){if(!fx(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=Vh(n);throw s==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+s)}}function Tp(t,e,n){if((e=rt(e))instanceof Lh)return e._internalPath;if(typeof e=="string")return Iy(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const Fj=new RegExp("[~\\*/\\[\\]]");function Iy(t,e,n){if(e.search(Fj)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lh(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new Q(z.INVALID_ARGUMENT,a+t+c)}function mx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Uh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zj extends px{data(){return super.data()}}function Uh(t,e){return typeof e=="string"?Iy(t,e):e instanceof Lh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xy{}class gx extends xy{}function Hn(t,e,...n){let s=[];e instanceof xy&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof by).length,a=i.filter(c=>c instanceof Bh).length;if(o>1||o>0&&a>0)throw new Q(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Bh extends gx{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Bh(e,n,s)}_apply(e){const n=this._parse(e);return yx(e._query,n),new Bi(e.firestore,e.converter,lp(e._query,n))}_parse(e){const n=Fh(e.firestore);return function(i,o,a,c,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Q(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){_2(m,f);const S=[];for(const A of m)S.push(v2(c,i,A));g={arrayValue:{values:S}}}else g=v2(c,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||_2(m,f),g=Lj(a,o,m,f==="in"||f==="not-in");return _e.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function At(t,e,n){const s=e,r=Uh("where",t);return Bh._create(r,s,n)}class by extends xy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new by(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Pe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const c of a)yx(o,c),o=lp(o,c)}(e._query,n),new Bi(e.firestore,e.converter,lp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sy extends gx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sy(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tl(i,o)}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new ma(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Kn(t,e="asc"){const n=e,s=Uh("orderBy",t);return Sy._create(s,n)}function v2(t,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new Q(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$T(e)&&n.indexOf("/")!==-1)throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ae.fromString(n));if(!Y.isDocumentKey(s))throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Zc(t,new Y(s))}if(n instanceof zt)return Zc(t,n._key);throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vh(n)}.`)}function _2(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yx(t,e){const n=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Bj{convertValue(e,n="none"){switch(Ar(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Lr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[Yo].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>Fe(o.doubleValue));return new wy(i)}convertGeoPoint(e){return new _y(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ih(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const n=As(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ae.fromString(e);ie(gI(s),9688,{name:e});const r=new Ni(s.get(1),s.get(3)),i=new Y(s.popFirst(5));return r.isEqual(n)||Mt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _x extends px{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Uh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Wu extends _x{data(e={}){return super.data(e)}}class $j{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new sc(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Wu(this._firestore,this._userDataWriter,s.key,s,new sc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const c=new Wu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new sc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Wu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new sc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:qj(a.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function qj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t){t=Tn(t,zt);const e=Tn(t.firestore,Fr);return Sj(yy(e),t._key).then(n=>Wj(e,t,n))}class wx extends Bj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,n)}}function Qn(t){t=Tn(t,Bi);const e=Tn(t.firestore,Fr),n=yy(e),s=new wx(e);return Uj(t._query),kj(n,t._query).then(r=>new $j(e,s,t,r))}function $d(t,e,n){t=Tn(t,zt);const s=Tn(t.firestore,Fr),r=vx(t.converter,e,n);return $h(s,[dx(Fh(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ct.none())])}function xr(t,e,n,...s){t=Tn(t,zt);const r=Tn(t.firestore,Fr),i=Fh(r);let o;return o=typeof(e=rt(e))=="string"||e instanceof Lh?Mj(i,"updateDoc",t._key,e,n,s):Vj(i,"updateDoc",t._key,e),$h(r,[o.toMutation(t._key,Ct.exists(!0))])}function ky(t){return $h(Tn(t.firestore,Fr),[new Ph(t._key,Ct.none())])}function Ay(t,e){const n=Tn(t.firestore,Fr),s=st(t),r=vx(t.converter,e);return $h(n,[dx(Fh(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,Ct.exists(!1))]).then(()=>s)}function $h(t,e){return function(s,r){const i=new ts;return s.asyncQueue.enqueueAndForget(async()=>mj(await bj(s),r,i)),i.promise}(yy(t),e)}function Wj(t,e,n){const s=n.docs.get(e._key),r=new wx(t);return new _x(t,r,e._key,s,new sc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){fa=r})(da),bi(new kr("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Fr(new yR(s.getProvider("auth-internal")),new wR(o,s.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ni(d.options.projectId,f)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Jn(J_,Z_,e),Jn(J_,Z_,"esm2017")})();var Gj="firebase",Hj="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn(Gj,Hj,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,s,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,sn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||s.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r==null||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="us-central1";class Qj{constructor(e,n,s,r,i=Ip,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Kj(e,n,s,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Ip}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Yj(t,e,n){const s=Li(e);t.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(xg(t.emulatorOrigin),bg("Functions",!0))}const w2="@firebase/functions",E2="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="auth-internal",Jj="app-check-internal",Zj="messaging-internal";function eO(t){const e=(n,{instanceIdentifier:s})=>{const r=n.getProvider("app").getImmediate(),i=n.getProvider(Xj),o=n.getProvider(Zj),a=n.getProvider(Jj);return new Qj(r,i,o,a,s)};bi(new kr(Ex,e,"PUBLIC").setMultipleInstances(!0)),Jn(w2,E2,t),Jn(w2,E2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t=Ag(),e=Ip){const s=mh(rt(t),Ex).getImmediate({identifier:e}),r=iE("functions");return r&&nO(s,...r),s}function nO(t,e,n){Yj(rt(t),e,n)}eO();const sO={apiKey:"AIzaSyBn2jG-T2SesKFr0TsfeQa04wlBmDeEoG4",authDomain:"clarity-311c3.firebaseapp.com",projectId:"clarity-311c3",storageBucket:"clarity-311c3.firebasestorage.app",messagingSenderId:"459484415688",appId:"1:459484415688:web:bac719ee243bbd9821c7fd"},Py=mE(sO),hi=eT(Py),xe=Nj(Py);Cj(xe).catch(t=>{t.code==="failed-precondition"?console.warn("Firestore persistence failed: multiple tabs open"):t.code==="unimplemented"&&console.warn("Firestore persistence is not available in this browser")});tO(Py,"us-central1");const Tx=P.createContext(),In=()=>{const t=P.useContext(Tx);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Ix=({children:t})=>{const[e,n]=P.useState(null),[s,r]=P.useState(null),[i,o]=P.useState("free"),[a,c]=P.useState(!0),[d,f]=P.useState(!1),m=P.useRef(!0),g=(D,L)=>{if(!D||!L)return{isTrialActive:!1,daysRemaining:0};const M=L.seconds?new Date(L.seconds*1e3):new Date(L),w=new Date,y=w<M,I=Math.ceil((M-w)/(24*60*60*1e3));return{isTrialActive:y,daysRemaining:Math.max(0,I),trialEndDate:M}},T=async D=>{try{const L=await ya(st(xe,"users",D));if(L.exists()){const M=L.data(),w=g(M.trialStartDate,M.trialEndDate);if(console.log(" Profile Data:",M),console.log(" Trial Status:",w),!m.current)return;if(M.subscription==="trial"&&!w.isTrialActive){const y={...M,subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date};await xr(st(xe,"users",D),{subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date}),m.current&&(r({...y,...w}),o("free"))}else m.current&&(r({...M,...w}),o(M.subscription))}}catch(L){console.error("Error fetching user profile:",L),m.current&&c(!1)}};P.useEffect(()=>sC(hi,async L=>{console.log(" Auth state changed:",L?"User logged in":"User logged out");try{if(!m.current)return;n(L),f(!!L),L?await T(L.uid):m.current&&(r(null),o("free"))}catch(M){console.error("Error in auth state change:",M)}finally{m.current&&c(!1)}}),[]),P.useEffect(()=>()=>{m.current=!1},[]);const S=async(D,L,M={})=>{try{const{user:w}=await UE(hi,D,L),y={email:w.email,uid:w.uid,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date,firstName:M.firstName||"",lastName:M.lastName||"",exerciseGoalMinutes:M.exerciseGoalMinutes||30,waterGoalOz:M.waterGoalOz||64,meditationGoalMinutes:M.meditationGoalMinutes||10};if(await $d(st(xe,"users",w.uid),y),m.current){const I=g(y.trialStartDate,y.trialEndDate);r({...y,...I}),o("trial")}return{success:!0,user:w}}catch(w){throw console.error("Signup error:",w),w}},A=async(D,L)=>{try{const{user:M}=await BE(hi,D,L);return console.log(" Login successful, Firebase will trigger auth state change"),{success:!0,user:M}}catch(M){throw console.error("Login error:",M),M}},C=async()=>{try{return await $E(hi),m.current&&(n(null),r(null),o("free"),f(!1)),{success:!0}}catch(D){throw console.error("Logout error:",D),D}},b=async()=>{try{if(e!=null&&e.uid){const D={subscription:"premium",subscriptionStatus:"premium_paid",premiumStartDate:new Date,updatedAt:new Date};return await xr(st(xe,"users",e.uid),D),m.current&&(o("premium"),r(L=>({...L,...D}))),{success:!0}}}catch(D){throw console.error("Error upgrading to premium:",D),D}},v=async()=>{try{if(e!=null&&e.uid){const D={subscription:"free",subscriptionCancelledAt:new Date,updatedAt:new Date};return await xr(st(xe,"users",e.uid),D),m.current&&(o("free"),r(L=>({...L,...D}))),{success:!0}}}catch(D){throw console.error("Error cancelling subscription:",D),D}},x={user:e,userProfile:s,userSubscription:i,isAuthenticated:d,isPremium:i==="premium"||i==="trial",isTrialActive:(s==null?void 0:s.isTrialActive)||!1,trialDaysRemaining:(s==null?void 0:s.daysRemaining)||0,loading:a,signup:S,login:A,logout:C,upgradeToPremium:b,cancelSubscription:v,fetchUserProfile:T,authKey:(e==null?void 0:e.uid)||"no-user"};return u.jsx(Tx.Provider,{value:x,children:t})},xx="/assets/Logo-BuPYrDrj.png";var bx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},T2=_s.createContext&&_s.createContext(bx),rO=["attr","size","title"];function iO(t,e){if(t==null)return{};var n=oO(t,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function oO(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},qd.apply(this,arguments)}function I2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Wd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I2(Object(n),!0).forEach(function(s){aO(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I2(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function aO(t,e,n){return e=cO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cO(t){var e=lO(t,"string");return typeof e=="symbol"?e:e+""}function lO(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sx(t){return t&&t.map((e,n)=>_s.createElement(e.tag,Wd({key:n},e.attr),Sx(e.child)))}function uO(t){return e=>_s.createElement(dO,qd({attr:Wd({},t.attr)},e),Sx(t.child))}function dO(t){var e=n=>{var{attr:s,size:r,title:i}=t,o=iO(t,rO),a=r||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),_s.createElement("svg",qd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:c,style:Wd(Wd({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&_s.createElement("title",null,i),t.children)};return T2!==void 0?_s.createElement(T2.Consumer,null,n=>e(n)):e(bx)}function hO(t){return uO({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(t)}async function fO(t,e){try{const n=st(xe,"users",t),s=await ya(n);let r=0;return s.exists()&&typeof s.data().points=="number"&&(r=s.data().points),await xr(n,{points:r+e,updatedAt:new Date}),{success:!0,newPoints:r+e}}catch(n){return console.error("Error adding points:",n),{success:!1,error:n}}}async function mO(t,e){try{const n=st(xe,"users",t),s=await ya(n);let r=0;return s.exists()&&typeof s.data().points=="number"&&(r=s.data().points),r<e?{success:!1,error:"Not enough points"}:(await xr(n,{points:r-e,updatedAt:new Date}),{success:!0,newPoints:r-e})}catch(n){return console.error("Error deducting points:",n),{success:!1,error:n}}}async function pO(t){try{const e=st(xe,"users",t),n=await ya(e);return n.exists()&&typeof n.data().points=="number"?n.data().points:0}catch(e){return console.error("Error getting points:",e),0}}async function gO(t,e,n="daily"){try{const s=new Date;let r;if(n==="daily")r=s.toISOString().split("T")[0];else if(n==="weekly"){const o=s.getFullYear(),a=Math.ceil(((s-new Date(o,0,1))/864e5+new Date(o,0,1).getDay()+1)/7);r=`${o}-W${a}`}else r="unknown";const i=st(xe,`users/${t}/challenges`,`${e}_${r}`);return await $d(i,{challengeId:e,period:n,periodKey:r,completedAt:new Date}),{success:!0}}catch(s){return console.error("Error completing challenge:",s),{success:!1,error:s}}}async function yO(t,e,n="daily"){try{const s=new Date;let r;if(n==="daily")r=s.toISOString().split("T")[0];else if(n==="weekly"){const a=s.getFullYear(),c=Math.ceil(((s-new Date(a,0,1))/864e5+new Date(a,0,1).getDay()+1)/7);r=`${a}-W${c}`}else r="unknown";const i=st(xe,`users/${t}/challenges`,`${e}_${r}`);return(await ya(i)).exists()}catch(s){return console.error("Error checking challenge completion:",s),!1}}const Ee={async register(t){try{const e=await UE(hi,t.email,t.password);return await $d(st(xe,"users",e.user.uid),{username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,exerciseGoalMinutes:t.exerciseGoalMinutes||30,waterGoalOz:t.waterGoalOz||64,meditationGoalMinutes:t.meditationGoalMinutes||10,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date}),{user:e.user}}catch(e){throw new Error(e.message)}},async login(t,e){try{return{user:(await BE(hi,t,e)).user}}catch{throw new Error("Invalid credentials")}},async logout(){try{return await $E(hi),{message:"success"}}catch(t){throw new Error(t.message)}},async getUserProfile(t){try{const e=await ya(st(xe,"users",t));if(!e.exists())throw new Error("User not found");return{user:{id:t,...e.data()}}}catch(e){throw new Error(e.message)}},async updateUserProfile(t,e){try{const n=st(xe,"users",t);return await $d(n,{...e,updatedAt:new Date},{merge:!0}),{user:{id:t,...e}}}catch(n){throw new Error("Error updating profile: "+n.message)}},addPoints:fO,deductPoints:mO,getPoints:pO,completeChallenge:gO,isChallengeCompleted:yO};function vO(){const{user:t,logout:e}=In(),n=dh(),[s,r]=P.useState(!1),[i,o]=P.useState(null),[a,c]=P.useState(!1),d=P.useRef();P.useEffect(()=>{const S=async()=>{if(t!=null&&t.uid)try{c(!0);const A=await Ee.getUserProfile(t.uid);o(A.user)}catch(A){console.error("Error fetching user profile:",A)}finally{c(!1)}};t!=null&&t.uid&&S()},[t]);const f=S=>{S.stopPropagation(),r(!s)};P.useEffect(()=>{if(!s)return;const S=A=>{d.current&&!d.current.contains(A.target)&&r(!1)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[s]);const m=async S=>{S.preventDefault(),r(!1);try{await e(),n("/welcome")}catch(A){console.error("Error logging out:",A),n("/welcome")}},g=()=>{r(!1),n("/profile")};if(!t)return null;const T="profile-dropdown"+(s?"":" hidden");return u.jsxs("div",{className:"profile-button-container",children:[u.jsx("button",{onClick:f,className:"profile-button",children:u.jsx(hO,{className:"profile-icon"})}),u.jsxs("ul",{className:T,ref:d,children:[u.jsx("li",{className:"profile-info",children:u.jsx("div",{className:"user-details",children:u.jsx("span",{className:"user-name",children:i!=null&&i.firstName&&(i!=null&&i.lastName)?`${i.firstName} ${i.lastName}`:(i==null?void 0:i.username)||"User"})})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:g,className:"dropdown-button",children:" Edit Profile"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>{r(!1),n("/dashboard")},className:"dropdown-button",children:" Dashboard"})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:m,className:"dropdown-button logout-button",children:" Sign Out"})})]})]})}function _O(){const{userSubscription:t,isTrialActive:e,trialDaysRemaining:n,upgradeToPremium:s}=In();if(t==="premium"||t==="free"||!e)return null;const r=n<=3,i=(14-n)/14*100,o=()=>n===1?"Last day of premium!":n<=3?`Only ${n} days left!`:`${n} days remaining`,a=()=>n===1?"Keep Premium - $4.99/mo":n<=3?"Don't Lose Premium!":"Keep Premium - $4.99/mo";return u.jsxs("div",{className:`trial-banner ${r?"urgent":""}`,children:[u.jsxs("div",{className:"trial-content",children:[u.jsxs("div",{className:"trial-info",children:[u.jsx("span",{className:"trial-icon",children:r?"":""}),u.jsxs("div",{className:"trial-text",children:[u.jsx("h4",{children:r?"Premium Trial Ending!":"Premium Trial Active"}),u.jsx("p",{children:o()})]})]}),u.jsx("button",{onClick:s,className:"trial-upgrade-btn",children:a()})]}),u.jsx("div",{className:"trial-progress",children:u.jsx("div",{className:"trial-progress-bar",style:{width:`${i}%`}})})]})}function wO(){return u.jsxs("div",{className:"navigation-container",children:[u.jsxs("div",{className:"top-header",children:[u.jsxs("div",{className:"logo-container",children:[u.jsx("img",{src:xx,alt:"Clarity logo",className:"logo"}),u.jsx("span",{className:"logo-text",children:"Your Mind + Wellness Tracker"})]}),u.jsx("a",{href:"mailto:help@loveclaritywellness.com",className:"help-icon",title:"Contact Support",style:{marginRight:"16px",fontSize:"1.6rem",textDecoration:"none"},children:""}),u.jsx(vO,{})]}),u.jsx(_O,{}),u.jsx("main",{className:"main-content",children:u.jsx(lA,{})}),u.jsxs("nav",{className:"bottom-navigation",children:[u.jsxs(to,{to:"/dashboard",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Home"})]}),u.jsxs(to,{to:"/workout",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Workout"})]}),u.jsxs(to,{to:"/meditation",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Meditate"})]}),u.jsxs(to,{to:"/water",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Water"})]}),u.jsxs(to,{to:"/games",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Games"})]}),u.jsxs(to,{to:"/goals",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Goals"})]})]})]})}function EO(){const{user:t,loading:e}=In(),[n,s]=P.useState(""),[r,i]=P.useState(""),[o,a]=P.useState(""),[c,d]=P.useState(""),[f,m]=P.useState(""),[g,T]=P.useState(""),[S,A]=P.useState(""),[C,b]=P.useState("30"),[v,x]=P.useState("64"),[D,L]=P.useState("10"),[M,w]=P.useState({}),[y,I]=P.useState(!1),[E,N]=P.useState(!1),[R,k]=P.useState("pulse");if(P.useEffect(()=>{const $=[setTimeout(()=>k("open"),2500),setTimeout(()=>k("form"),4500)];return()=>$.forEach(clearTimeout)},[]),e)return u.jsx("div",{children:"Loading..."});if(t)return u.jsx(yd,{to:"/dashboard",replace:!0});const oe=async $=>{$.preventDefault(),w({}),N(!0);try{await Ee.login(n,r)}catch(le){w({credential:le.message})}finally{N(!1)}},X=async $=>{if($.preventDefault(),r!==S){w({confirmPassword:"Confirm Password field must be the same as the Password field"});return}w({}),N(!0);try{await Ee.register({email:o,password:r,username:c,firstName:f,lastName:g,exerciseGoalMinutes:parseInt(C),waterGoalOz:parseInt(v),meditationGoalMinutes:parseInt(D)})}catch(le){w({general:le.message})}finally{N(!1)}};return u.jsxs("div",{className:"welcome-container",children:[R!=="form"&&u.jsx("div",{className:`awakening-bg ${R}`,children:u.jsx("div",{className:"awakening-eye"})}),u.jsxs("div",{className:`welcome-card ${R==="form"?"visible":""}`,children:[u.jsxs("div",{className:"welcome-header",children:[u.jsx("img",{src:xx,alt:"Clarity logo"}),u.jsx("p",{children:"Begin your wellness today"})]}),y?u.jsxs("form",{className:"welcome-form",onSubmit:X,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Email"}),u.jsx("input",{type:"email",value:o,onChange:$=>a($.target.value),required:!0,placeholder:"Enter your email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username"}),u.jsx("input",{type:"text",value:c,onChange:$=>d($.target.value),required:!0,placeholder:"Choose a username"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"First Name"}),u.jsx("input",{type:"text",value:f,onChange:$=>m($.target.value),required:!0,placeholder:"Enter your first name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Last Name"}),u.jsx("input",{type:"text",value:g,onChange:$=>T($.target.value),required:!0,placeholder:"Enter your last name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:r,onChange:$=>i($.target.value),required:!0,placeholder:"Create a password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Confirm Password"}),u.jsx("input",{type:"password",value:S,onChange:$=>A($.target.value),required:!0,placeholder:"Confirm your password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Exercise Goal (minutes)"}),u.jsx("input",{type:"number",value:C,onChange:$=>b($.target.value),required:!0,placeholder:"Daily exercise goal in minutes"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Water Goal (oz)"}),u.jsx("input",{type:"number",value:v,onChange:$=>x($.target.value),required:!0,placeholder:"Daily water goal in ounces"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Meditation Goal (minutes)"}),u.jsx("input",{type:"number",value:D,onChange:$=>L($.target.value),required:!0,placeholder:"Daily meditation goal in minutes"})]}),M.confirmPassword&&u.jsx("p",{className:"error-message",children:M.confirmPassword}),M.general&&u.jsx("p",{className:"error-message",children:M.general}),u.jsx("button",{type:"submit",className:"primary-button",disabled:E,children:E?"Creating Account...":"Sign Up"})]}):u.jsxs("form",{className:"welcome-form",onSubmit:oe,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username or Email"}),u.jsx("input",{type:"text",value:n,onChange:$=>s($.target.value),required:!0,placeholder:"Enter your username or email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:r,onChange:$=>i($.target.value),required:!0,placeholder:"Enter your password"})]}),M.credential&&u.jsx("p",{className:"error-message",children:M.credential}),u.jsx("button",{type:"submit",className:"primary-button",disabled:E,children:E?"Logging In...":"Log In"})]}),u.jsx("button",{className:"secondary-button",onClick:()=>I(!y),disabled:E,children:y?"Already have an account? Log In":"Don't have an account? Sign Up"})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var xp=function(t,e){return xp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r])},xp(t,e)};function TO(t,e){xp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var IO=100,xO=100,x2=50,bp=50,Sp=50;function b2(t){var e=t.className,n=t.counterClockwise,s=t.dashRatio,r=t.pathRadius,i=t.strokeWidth,o=t.style;return P.createElement("path",{className:e,style:Object.assign({},o,SO({pathRadius:r,dashRatio:s,counterClockwise:n})),d:bO({pathRadius:r,counterClockwise:n}),strokeWidth:i,fillOpacity:0})}function bO(t){var e=t.pathRadius,n=t.counterClockwise,s=e,r=n?1:0;return`
      M `+bp+","+Sp+`
      m 0,-`+s+`
      a `+s+","+s+" "+r+" 1 1 0,"+2*s+`
      a `+s+","+s+" "+r+" 1 1 0,-"+2*s+`
    `}function SO(t){var e=t.counterClockwise,n=t.dashRatio,s=t.pathRadius,r=Math.PI*2*s,i=(1-n)*r;return{strokeDasharray:r+"px "+r+"px",strokeDashoffset:(e?-i:i)+"px"}}var Bf=function(t){TO(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return x2-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var n=this.props,s=n.value,r=n.minValue,i=n.maxValue,o=Math.min(Math.max(s,r),i);return(o-r)/(i-r)},e.prototype.render=function(){var n=this.props,s=n.circleRatio,r=n.className,i=n.classes,o=n.counterClockwise,a=n.styles,c=n.strokeWidth,d=n.text,f=this.getPathRadius(),m=this.getPathRatio();return P.createElement("svg",{className:i.root+" "+r,style:a.root,viewBox:"0 0 "+IO+" "+xO,"data-test-id":"CircularProgressbar"},this.props.background?P.createElement("circle",{className:i.background,style:a.background,cx:bp,cy:Sp,r:x2}):null,P.createElement(b2,{className:i.trail,counterClockwise:o,dashRatio:s,pathRadius:f,strokeWidth:c,style:a.trail}),P.createElement(b2,{className:i.path,counterClockwise:o,dashRatio:m*s,pathRadius:f,strokeWidth:c,style:a.path}),d?P.createElement("text",{className:i.text,style:a.text,x:bp,y:Sp},d):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(P.Component);function $f(t){var e=t.rotation,n=t.strokeLinecap,s=t.textColor,r=t.textSize,i=t.pathColor,o=t.pathTransition,a=t.pathTransitionDuration,c=t.trailColor,d=t.backgroundColor,f=e==null?void 0:"rotate("+e+"turn)",m=e==null?void 0:"center center";return{root:{},path:mu({stroke:i,strokeLinecap:n,transform:f,transformOrigin:m,transition:o,transitionDuration:a==null?void 0:a+"s"}),trail:mu({stroke:c,strokeLinecap:n,transform:f,transformOrigin:m}),text:mu({fill:s,fontSize:r}),background:mu({fill:d})}}function mu(t){return Object.keys(t).forEach(function(e){t[e]==null&&delete t[e]}),t}const B={getUserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone},getCurrentLocalTime(){return new Date},getStartOfDay(t=new Date){const e=new Date(t);return e.setHours(0,0,0,0),e},getEndOfDay(t=new Date){const e=new Date(t);return e.setHours(23,59,59,999),e},formatLocalDate(t){return t.toLocaleDateString("en-CA")},formatLocalDateTime(t){return t.toLocaleString()},formatLocalTime(t){return t.toLocaleTimeString()},getLocalDateRange(t=7){const e=this.getEndOfDay(new Date),n=this.getStartOfDay(new Date);return n.setDate(n.getDate()-(t-1)),{startDate:n,endDate:e}},isToday(t){const e=new Date;return this.formatLocalDate(t)===this.formatLocalDate(e)},isSameLocalDay(t,e){return this.formatLocalDate(t)===this.formatLocalDate(e)},toLocalTimezone(t){return new Date(t)},getRelativeTime(t){const n=new Date-t,s=Math.floor(n/6e4),r=Math.floor(s/60),i=Math.floor(r/24);return s<1?"Just now":s<60?`${s} minutes ago`:r<24?`${r} hours ago`:i===1?"Yesterday":i<7?`${i} days ago`:this.formatLocalDate(t)},getCurrentWeekRange(){const t=new Date,e=t.getDay(),n=new Date(t);n.setHours(0,0,0,0),n.setDate(t.getDate()-e);const s=new Date(n);return s.setDate(n.getDate()+6),s.setHours(23,59,59,999),{startDate:n,endDate:s}}},fi={async logWorkout(t,e){try{console.log(" Logging workout in timezone:",B.getUserTimezone());let n=B.getCurrentLocalTime();e.date&&(n=B.toLocalTimezone(e.date));const s={title:e.title,type:e.type||"General",durationMinutes:e.durationMinutes,date:n,notes:e.notes||"",caloriesBurned:e.caloriesBurned||0,completed:!0,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),sentiment:e.sentiment||null},r=await Ay(rn(xe,`users/${t}/workouts`),s);return{id:r.id,success:!0,workout:{...e,id:r.id}}}catch(n){throw new Error("Error logging workout: "+n.message)}},async fetchWorkoutsByUser(t){try{const e=Hn(rn(xe,`users/${t}/workouts`),Kn("date","desc"));return{workouts:(await Qn(e)).docs.map(r=>{var i,o,a,c;return{id:r.id,...r.data(),date:(i=r.data().date)==null?void 0:i.toDate(),localDate:B.formatLocalDate((o=r.data().date)==null?void 0:o.toDate()),localDateTime:B.formatLocalDateTime((a=r.data().date)==null?void 0:a.toDate()),relativeTime:B.getRelativeTime((c=r.data().date)==null?void 0:c.toDate())}})}}catch(e){throw new Error("Error fetching workouts: "+e.message)}},async updateWorkout(t,e,n){try{const s=st(xe,`users/${t}/workouts`,e),r={...n,updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()};return n.date&&(r.date=B.toLocalTimezone(n.date)),await xr(s,r),{success:!0,workout:{id:e,...n}}}catch(s){throw new Error("Error updating workout: "+s.message)}},async deleteWorkout(t,e){try{return await ky(st(xe,`users/${t}/workouts`,e)),{success:!0,message:"Workout deleted successfully"}}catch(n){throw new Error("Error deleting workout: "+n.message)}},async getWorkoutSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange();console.log(" Weekly workout query for timezone:",B.getUserTimezone()),console.log(" Query range:",B.formatLocalDateTime(e),"to",B.formatLocalDateTime(n));const s=Hn(rn(xe,`users/${t}/workouts`),At("date",">=",e),At("date","<=",n),Kn("date","desc")),i=(await Qn(s)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),o=i.reduce((c,d)=>c+(d.durationMinutes||0),0),a=i.reduce((c,d)=>c+(d.caloriesBurned||0),0);return{totalWorkouts:i.length,totalMinutes:o,totalCalories:a,workouts:i.slice(0,5),period:"This week",userTimezone:B.getUserTimezone()}}catch(e){throw new Error("Error fetching workout summary: "+e.message)}},async getDailyWorkoutSummary(t,e=new Date){try{const{startDate:n,endDate:s}={startDate:B.getStartOfDay(e),endDate:B.getEndOfDay(e)};console.log(" Daily workout query for timezone:",B.getUserTimezone()),console.log(" Query range:",B.formatLocalDateTime(n),"to",B.formatLocalDateTime(s));const r=Hn(rn(xe,`users/${t}/workouts`),At("date",">=",n),At("date","<=",s),Kn("date","desc")),o=(await Qn(r)).docs.map(f=>{var m;return{id:f.id,...f.data(),date:(m=f.data().date)==null?void 0:m.toDate()}});console.log(" Found workouts for today:",o.length);const a=o.reduce((f,m)=>f+(m.durationMinutes||0),0),c=o.length,d=o.reduce((f,m)=>f+(m.caloriesBurned||0),0);return{date:B.formatLocalDate(e),totalWorkouts:c,completedWorkouts:c,totalMinutes:a,caloriesBurned:d,lastWorkout:o.length>0?o[0]:null,workouts:o,hasWorkoutsToday:o.length>0,mostCommonType:o.length>0?this.getMostCommonWorkoutType(o):null,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily workout summary:",n),this.getEmptyDailySummary(e)}},async getWorkoutAnalytics(t,e=30){try{const s=(await this.fetchWorkoutsByUser(t)).workouts;if(s.length===0)return{totalEntries:0,averageDuration:0,averageSentiment:0,sentimentTrend:"neutral"};const r=s.reduce((c,d)=>c+(d.durationMinutes||0),0),i=s.map(c=>typeof c.sentiment=="number"?c.sentiment:0),o=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:0;let a="neutral";return o>0?a="positive":o<0&&(a="negative"),{totalEntries:s.length,averageDuration:r/s.length,averageSentiment:o,sentimentTrend:a}}catch(n){throw new Error("Error fetching workout analytics: "+n.message)}},async getPersonalizedWorkoutRecommendations(t){try{const e=await this.getWorkoutAnalytics(t),n=[];return e.averageSentiment<0&&n.push({type:"sentiment",message:"Your workout notes have been a bit negative. Try celebrating small wins and focusing on progress, not perfection!",action:"Reflect on what went well after each workout."}),e.averageDuration<20&&n.push({type:"duration",message:"Your average workout duration is below 20 minutes. Consider increasing your session length for better results.",action:"Try a 30-minute session this week."}),{recommendations:n}}catch(e){throw new Error("Error generating workout recommendations: "+e.message)}},getMostCommonWorkoutType(t){if(t.length===0)return null;const e={};return t.forEach(n=>{e[n.type]=(e[n.type]||0)+1}),Object.keys(e).reduce((n,s)=>e[n]>e[s]?n:s)},getEmptyDailySummary(t){return{date:B.formatLocalDate(t),totalWorkouts:0,completedWorkouts:0,totalMinutes:0,caloriesBurned:0,lastWorkout:null,workouts:[],hasWorkoutsToday:!1,mostCommonType:null,userTimezone:B.getUserTimezone()}}},en={async logWaterIntake(t,e){try{const n={amount:e.amount,date:B.toLocalTimezone(e.date||new Date),userId:t,createdAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),sentiment:e.sentiment||null},s=await Ay(rn(xe,`users/${t}/waterIntake`),n);return{id:s.id,success:!0,waterIntake:{...e,id:s.id}}}catch(n){throw new Error("Error logging water intake: "+n.message)}},async fetchWaterIntakeByUser(t,e=30){try{const n=B.getStartOfDay(new Date);n.setDate(n.getDate()-e),console.log(" fetchWaterIntakeByUser - Start date:",n.toLocaleDateString());const s=Hn(rn(xe,`users/${t}/waterIntake`),At("date",">=",n),Kn("date","desc")),i=(await Qn(s)).docs.map(o=>{var c;const a=o.data();return{id:o.id,...a,date:(c=a.date)!=null&&c.toDate?a.date.toDate():a.date}});return console.log(" fetchWaterIntakeByUser - Found intakes:",i.length),{waterIntakes:i}}catch(n){throw console.error(" fetchWaterIntakeByUser error:",n),new Error("Error fetching water intake: "+n.message)}},async updateWaterIntake(t,e,n){try{const s=st(xe,`users/${t}/waterIntake`,e);return await xr(s,{...n,updatedAt:new Date}),{success:!0,waterIntake:{id:e,...n}}}catch(s){throw new Error("Error updating water intake: "+s.message)}},async deleteWaterIntake(t,e){try{return await ky(st(xe,`users/${t}/waterIntake`,e)),{success:!0,message:"Water intake deleted successfully"}}catch(n){throw new Error("Error deleting water intake: "+n.message)}},async getTodayWaterIntake(t){try{const e=B.getStartOfDay(new Date),n=B.getEndOfDay(new Date);n.setMilliseconds(n.getMilliseconds()+1),console.log(" getTodayWaterIntake - Date range:",{today:e.toLocaleDateString(),tomorrow:n.toLocaleDateString(),todayISO:e.toISOString(),tomorrowISO:n.toISOString()});const s=Hn(rn(xe,`users/${t}/waterIntake`),At("date",">=",e),At("date","<",n),Kn("date","desc")),i=(await Qn(s)).docs.map(a=>{var d;const c=a.data();return{...c,date:(d=c.date)!=null&&d.toDate?c.date.toDate():c.date}});return console.log(" getTodayWaterIntake - Found intakes:",i.length),i.forEach(a=>{var c;console.log("  -",a.amount,"oz on",(c=a.date)==null?void 0:c.toLocaleDateString())}),{totalOz:i.reduce((a,c)=>a+(c.amount||0),0),intakeCount:i.length,intakes:i}}catch(e){throw console.error(" getTodayWaterIntake error:",e),new Error("Error fetching today's water intake: "+e.message)}},async getWaterSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),s=Hn(rn(xe,`users/${t}/waterIntake`),At("date",">=",e),At("date","<=",n),Kn("date","desc")),i=(await Qn(s)).docs.map(f=>f.data()),o={};i.forEach(f=>{const m=f.date.toDate().toDateString();o[m]=(o[m]||0)+f.amount});const a=i.reduce((f,m)=>f+(m.amount||0),0),c=7,d=c>0?a/c:0;return{totalOz:a,averageOz:d,dailyTotals:o,intakeCount:i.length}}catch(e){throw new Error("Error fetching water summary: "+e.message)}},async getDailyWaterIntake(t,e=new Date){try{const n=B.getStartOfDay(e),s=B.getEndOfDay(e),r=Hn(rn(xe,`users/${t}/waterIntake`),At("date",">=",n),At("date","<=",s),Kn("date","desc")),o=(await Qn(r)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),a=o.reduce((c,d)=>c+(d.amount||0),0);return{date:B.formatLocalDate(e),totalOz:a,totalEntries:o.length,entries:o,hasWaterToday:o.length>0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily water intake:",n),{date:B.formatLocalDate(e),totalOz:0,totalEntries:0,entries:[],hasWaterToday:!1,userTimezone:B.getUserTimezone()}}},async getWaterAnalytics(t,e=30){try{const s=(await this.fetchWaterIntakeByUser(t,e)).waterIntakes;if(s.length===0)return{totalEntries:0,averageAmount:0,averageSentiment:0,sentimentTrend:"neutral"};const r=s.reduce((c,d)=>c+(d.amount||0),0),i=s.map(c=>typeof c.sentiment=="number"?c.sentiment:0),o=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:0;let a="neutral";return o>0?a="positive":o<0&&(a="negative"),{totalEntries:s.length,averageAmount:r/s.length,averageSentiment:o,sentimentTrend:a}}catch(n){throw new Error("Error fetching water analytics: "+n.message)}},async getPersonalizedWaterRecommendations(t){try{const e=await this.getWaterAnalytics(t),n=[];return e.averageSentiment<0&&n.push({type:"sentiment",message:"Your water intake notes have been a bit negative. Try associating hydration with positive routines or rewards!",action:"Pair water breaks with something you enjoy."}),e.averageAmount<32&&n.push({type:"hydration",message:"Your average daily water intake is below recommended levels. Aim for at least 64oz per day.",action:"Set reminders to drink more water."}),{recommendations:n}}catch(e){throw new Error("Error generating water recommendations: "+e.message)}},calculateHourlyWaterIntake(t){const e={};return t.forEach(n=>{const s=n.date.getHours();e[s]=(e[s]||0)+n.amount}),e}},ir={async logMeditation(t,e){try{const n={title:e.title||"Meditation Session",type:e.type||"mindfulness",soundscape:e.soundscape||"silence",durationMinutes:e.durationMinutes,targetDuration:e.targetDuration||e.durationMinutes,completed:e.completed||!1,deepStateAchieved:e.deepStateAchieved||!1,date:B.toLocalTimezone(e.date||new Date),notes:e.notes||"",moodBefore:e.moodBefore||"",moodAfter:e.moodAfter||"",guidedSession:e.guidedSession||!1,interruptions:e.interruptions||0,heartRateData:e.heartRateData||null,brainwaveFrequency:e.brainwaveFrequency||null,focusLevel:e.focusLevel||null,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),sentiment:e.sentiment||null},s=await Ay(rn(xe,`users/${t}/meditations`),n);return{id:s.id,success:!0,meditation:{...n,id:s.id}}}catch(n){throw new Error("Error logging meditation: "+n.message)}},async fetchMeditationsByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const s=Hn(rn(xe,`users/${t}/meditations`),At("date",">=",n),Kn("date","desc"));return{meditations:(await Qn(s)).docs.map(o=>{var a;return{id:o.id,...o.data(),date:(a=o.data().date)==null?void 0:a.toDate()}})}}catch(n){throw new Error("Error fetching meditations: "+n.message)}},async getMeditationAnalytics(t,e=30){try{const s=(await this.fetchMeditationsByUser(t,e)).meditations;if(s.length===0)return{totalSessions:0,deepStateSuccessRate:0,averageDuration:0,favoriteTime:"morning",favoriteSound:"silence",moodImprovement:0};const i=s.filter(f=>f.deepStateAchieved).length/s.length*100,o={},a={},c=[],d=[];return s.forEach(f=>{o[f.soundscape]=(o[f.soundscape]||0)+1;const m=f.date.getHours(),g=m<12?"morning":m<18?"afternoon":"evening";if(a[g]=(a[g]||0)+1,f.moodBefore&&f.moodAfter){const T={"":1,"":2,"":3,"":4,"":5,"":6},S=T[f.moodBefore]||3,A=T[f.moodAfter]||3;c.push(A-S)}f.sentiment&&d.push(f.sentiment)}),{totalSessions:s.length,deepStateSuccessRate:Math.round(i),averageDuration:s.reduce((f,m)=>f+m.durationMinutes,0)/s.length,favoriteTime:Object.keys(a).reduce((f,m)=>a[f]>a[m]?f:m,"morning"),favoriteSound:Object.keys(o).reduce((f,m)=>o[f]>o[m]?f:m,"silence"),moodImprovement:c.length>0?c.reduce((f,m)=>f+m,0)/c.length:0,consistency:s.length/e,averageSentiment:d.length>0?d.reduce((f,m)=>f+m,0)/d.length:0}}catch(n){throw new Error("Error fetching meditation analytics: "+n.message)}},async getPersonalizedRecommendations(t){try{const e=await this.getMeditationAnalytics(t),n=[];return e.deepStateSuccessRate<50&&n.push({type:"duration",message:"Try longer sessions (7-10 minutes) to achieve deeper states",action:"Increase session length"}),e.favoriteSound==="silence"&&n.push({type:"soundscape",message:'Research shows binaural beats can enhance focus. Try our "Deep Focus" soundscape.',action:"Try binaural beats"}),e.consistency<.5&&n.push({type:"consistency",message:`Your best time is ${e.favoriteTime}. Set a daily reminder for consistent practice.`,action:"Set daily reminder"}),e.averageSentiment<4&&n.push({type:"sentiment",message:"Your recent meditations have been on the lower end of the scale. Try to maintain a more positive mindset during your sessions.",action:"Focus on positive thoughts"}),{recommendations:n}}catch(e){throw new Error("Error generating recommendations: "+e.message)}},async updateMeditation(t,e,n){try{const s=st(xe,`users/${t}/meditations`,e);return await xr(s,{...n,updatedAt:new Date}),{success:!0,meditation:{id:e,...n}}}catch(s){throw new Error("Error updating meditation: "+s.message)}},async deleteMeditation(t,e){try{return await ky(st(xe,`users/${t}/meditations`,e)),{success:!0,message:"Meditation deleted successfully"}}catch(n){throw new Error("Error deleting meditation: "+n.message)}},async getMeditationSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),s=Hn(rn(xe,`users/${t}/meditations`),At("date",">=",e),At("date","<=",n),Kn("date","desc")),i=(await Qn(s)).docs.map(d=>d.data()),o=i.reduce((d,f)=>d+(f.durationMinutes||0),0),a=i.length>0?o/i.length:0,c=i.length>0?i.filter(d=>d.deepStateAchieved).length/i.length*100:0;return{totalSessions:i.length,totalMinutes:o,averageDuration:a,deepStateSuccessRate:c,favoriteSoundscape:i.length>0?this.getMostFrequent(i,"soundscape"):"silence",favoriteTime:i.length>0?this.getMostFrequent(i,"timeOfDay"):"morning",moodImprovement:this.calculateMoodImprovement(i)}}catch(e){throw console.error("Error fetching meditation summary:",e),new Error("Error fetching meditation summary: "+e.message)}},getMostFrequent(t,e){const n={};return t.forEach(s=>{const r=e==="timeOfDay"?this.getTimeOfDay(s.date):s[e];n[r]=(n[r]||0)+1}),Object.keys(n).reduce((s,r)=>n[s]>n[r]?s:r)},getTimeOfDay(t){let e;if(t instanceof Date)e=t;else if(typeof t=="string")e=new Date(t);else if(t&&t.seconds)e=new Date(t.seconds*1e3);else return console.warn("Invalid date format:",t),"unknown";if(isNaN(e.getTime()))return console.warn("Invalid date object:",t),"unknown";const n=e.getHours();return n<6?"night":n<12?"morning":n<17?"afternoon":n<21?"evening":"night"},calculateMoodImprovement(t){const e={"":1,"":2,"":3,"":4,"":5,"":6};let n=0,s=0;return t.forEach(r=>{const i=e[r.moodBefore]||3,o=e[r.moodAfter]||3;n+=o-i,s++}),s>0?n/s:0},async getDailyMeditationSummary(t,e=new Date){try{const n=B.getStartOfDay(e),s=B.getEndOfDay(e);console.log(" Daily meditation query for timezone:",B.getUserTimezone());const r=Hn(rn(xe,`users/${t}/meditations`),At("date",">=",n),At("date","<=",s),Kn("date","desc")),o=(await Qn(r)).docs.map(C=>{var b;return{id:C.id,...C.data(),date:(b=C.data().date)==null?void 0:b.toDate()}}),a=o.reduce((C,b)=>C+(b.durationMinutes||0),0),c=o.filter(C=>C.completed).length,d=o.length>0?a/o.length:0,f=o.filter(C=>C.deepStateAchieved).length,m=o.length>0?f/o.length*100:0,g=o.length>0?o[0]:null,T=o.length>0?this.getMostFrequent(o,"soundscape"):"silence",S=o.length>0?this.getMostFrequent(o,"timeOfDay"):"morning",A=this.calculateMoodImprovement(o);return{date:B.formatLocalDate(e),totalSessions:o.length,completedSessions:c,totalMinutes:a,averageDuration:Math.round(d*10)/10,deepStateAchieved:f,deepStateSuccessRate:Math.round(m),lastSession:g,favoriteSoundscape:T,favoriteTime:S,moodImprovement:Math.round(A*100)/100,sessions:o,hasSessionsToday:o.length>0,mostRecentType:(g==null?void 0:g.type)||"mindfulness",mostRecentSoundscape:(g==null?void 0:g.soundscape)||"silence",timeOfLastSession:(g==null?void 0:g.date)||null,totalInterruptions:o.reduce((C,b)=>C+(b.interruptions||0),0),averageFocusLevel:o.length>0?o.reduce((C,b)=>C+(b.focusLevel||5),0)/o.length:0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily meditation summary:",n),{date:e.toISOString().split("T")[0],totalSessions:0,completedSessions:0,totalMinutes:0,averageDuration:0,deepStateAchieved:0,deepStateSuccessRate:0,lastSession:null,favoriteSoundscape:"silence",favoriteTime:"morning",moodImprovement:0,sessions:[],hasSessionsToday:!1,mostRecentType:"mindfulness",mostRecentSoundscape:"silence",timeOfLastSession:null,totalInterruptions:0,averageFocusLevel:0,userTimezone:B.getUserTimezone()}}}},S2=["You are capable of amazing things.","You are loved.","You are strong.","You are beautiful.","You are enough.","You are worthy.","You are important.","You are talented.","You are special.","I am capable and strong","I am loved and loving","I am healthy and happy","I am wealthy and wise","Believe in yourself and all that you are.","You are amazing.","You are stronger than you think.","You are braver than you believe.","Every day is a new opportunity.","You are worth it.","You are worthy of all the good things.","You are deserving of love and happiness.","Stay positive, work hard, make it happen.","You are enough just as you are.","You are doing great.","Your potential is limitless.","You are a work of art.","You are doing great.","You are a gift to the world.","Keep going, you are getting there.","You are a masterpiece."],k2="https://createstripecheckoutsession-z5fchdkthq-uc.a.run.app";async function il(){const t=eT().currentUser;if(!t){alert("You must be logged in to upgrade.");return}try{console.log(" Starting Stripe upgrade with direct HTTP call"),console.log(" User ID:",t.uid),console.log(" Function URL:",k2);const e=await fetch(k2,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t.uid})});if(console.log(" Response status:",e.status),console.log(" Response headers:",e.headers),!e.ok){const r=await e.text();throw console.error(" HTTP error response:",r),new Error(`HTTP error! status: ${e.status}, body: ${r}`)}const n=await e.json();console.log(" Function call successful:",n);const{url:s}=n;console.log(" Redirecting to Stripe checkout:",s),window.location.href=s}catch(e){console.error(" Error creating Stripe checkout session:",e),console.error(" Error details:",e.message),alert("Error creating checkout session. Please try again.")}}function A2(){const t=Math.floor(Math.random()*S2.length);return S2[t]}function kO(){const t=dh(),{user:e,loading:n,isPremium:s}=In(),[r,i]=P.useState(null),[o,a]=P.useState({workout:{totalMinutes:0,sessions:0,hasWorkoutsToday:!1},meditation:{totalMinutes:0,sessions:0,hasSessionsToday:!1,deepStateAchieved:0},water:{totalOz:0,entries:0,hasWaterToday:!1}}),[c,d]=P.useState(30),[f,m]=P.useState(10),[g,T]=P.useState(64),[S,A]=P.useState(A2()),[C,b]=P.useState(!0),[v,x]=P.useState(!1),[D,L]=P.useState(0),[M,w]=P.useState([]);if(P.useEffect(()=>{if(!n&&!e){t("/welcome",{replace:!0});return}},[e,n,t]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{b(!0);const k=B.getCurrentLocalTime();console.log(" Dashboard timezone:",B.getUserTimezone()),console.log(" Local today:",B.formatLocalDateTime(k));const oe=await Ee.getUserProfile(e.uid);i(oe.user),d(oe.user.exerciseGoalMinutes||30),m(oe.user.meditationGoalMinutes||10),T(oe.user.waterGoalOz||64),console.log(" Fetching workout data for date:",k);const[X,$,le]=await Promise.all([fi.getDailyWorkoutSummary(e.uid,k),ir.getDailyMeditationSummary(e.uid,k),en.getDailyWaterIntake(e.uid,k)]);console.log(" Raw workout data from Dashboard:",X),console.log(" Raw meditation data:",$),console.log(" Raw water data:",le),a({workout:{totalMinutes:X.totalMinutes||0,sessions:X.totalWorkouts||0,hasWorkoutsToday:X.hasWorkoutsToday||X.totalMinutes>0,calories:X.caloriesBurned||0,lastWorkoutType:X.mostCommonType},meditation:{totalMinutes:$.totalMinutes||0,sessions:$.totalSessions||0,hasSessionsToday:$.hasSessionsToday||!1,deepStateAchieved:$.deepStateAchieved||0,moodImprovement:$.moodImprovement||0,lastSessionType:$.mostRecentType},water:{totalOz:le.totalOz||0,entries:le.totalEntries||le.entries||0,hasWaterToday:(le.totalOz||0)>0,averagePerEntry:le.averagePerEntry||0,isOnTrack:(le.totalOz||0)>=(oe.user.waterGoalOz||64)*.75}})}catch(k){console.error("Error fetching daily data:",k)}finally{b(!1)}})()},[e]),P.useEffect(()=>{const R=localStorage.getItem("affirmation"),k=localStorage.getItem("affirmationDate"),oe=new Date().toISOString().split("T")[0];if(R&&k===oe)A(R);else{const X=A2();A(X),localStorage.setItem("affirmation",X),localStorage.setItem("affirmationDate",oe)}},[]),P.useEffect(()=>{if(console.log("Trial modal effect running",r),r&&r.subscriptionStatus==="trial_expired"&&r.subscription==="free"){const R=localStorage.getItem("dontRemindTrial"),k=localStorage.getItem("lastTrialReminded");console.log("dontRemindTrial:",R),console.log("lastReminded:",k);const oe=1e3*60*60*24*7,X=Date.now();R||(!k||X-Number(k)>oe)&&(x(!0),localStorage.setItem("lastTrialReminded",X),console.log("Showing trial modal!"))}},[r]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid){const k=await Ee.getPoints(e.uid);L(k)}})()},[e]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{const[k,oe,X]=await Promise.all([ir.getPersonalizedRecommendations(e.uid),en.getPersonalizedWaterRecommendations(e.uid),fi.getPersonalizedWorkoutRecommendations(e.uid)]),$=[...(k==null?void 0:k.recommendations)||[],...(oe==null?void 0:oe.recommendations)||[],...(X==null?void 0:X.recommendations)||[]];w($)}catch(k){console.error("Error fetching recommendations:",k)}})()},[e]),n||C)return u.jsx("div",{className:"dashboard-loading",children:"Loading..."});if(!e)return u.jsx("div",{className:"dashboard-loading",children:"Redirecting..."});if(!r)return u.jsx("div",{className:"dashboard-loading",children:"Loading user data..."});if(!r.firstName||!r.exerciseGoalMinutes||!r.waterGoalOz||!r.meditationGoalMinutes)return u.jsx("div",{className:"dashboard-loading",children:"Loading user profile..."});const y=Math.min(o.workout.totalMinutes/c*100,100)||0,I=Math.min(o.meditation.totalMinutes/f*100,100)||0,E=Math.min(o.water.totalOz/g*100,100)||0,N=Math.max(c-o.workout.totalMinutes,0);return r.subscriptionStatus==="trial_expired"&&r.subscription,u.jsxs("div",{className:"dashboard-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:""})," ",D," Points"]}),u.jsxs("div",{className:"welcome-section",children:[u.jsxs("h1",{children:["Welcome back, ",r.firstName,"!"]}),u.jsx("p",{children:"Here's your wellness progress for today"})]}),u.jsxs("div",{className:"progress-bars",children:[u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:" Today's Workout"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",c," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.workout.totalMinutes," / ",c," min"]}),u.jsx(Bf,{value:y,text:`${Math.round(y)}%`,styles:$f({pathColor:`rgba(62, 152, 199, ${Math.max(y/100,.3)})`,textColor:"#3e98c7"})}),u.jsx("div",{className:"daily-stats",children:o.workout.hasWorkoutsToday?u.jsxs("span",{children:[" ",o.workout.sessions," workouts logged"]}):u.jsx("span",{children:"No workouts logged today"})}),u.jsx("button",{className:"track-button",onClick:()=>t("/workout"),children:"Log Workout"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:" Today's Meditation"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",f," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.meditation.totalMinutes," / ",f," min"]}),u.jsx(Bf,{value:I,text:`${Math.round(I)}%`,styles:$f({pathColor:`rgba(138, 43, 226, ${Math.max(I/100,.3)})`,textColor:"#8a2be2"})}),u.jsxs("div",{className:"daily-stats",children:[o.meditation.hasSessionsToday?u.jsxs("span",{children:[" ",o.meditation.sessions," sessions completed"]}):u.jsx("span",{children:"No meditation logged today"}),o.meditation.deepStateAchieved>0&&u.jsxs("span",{className:"deep-state",children:[" ",o.meditation.deepStateAchieved," deep states"]})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/meditation"),children:"Start Meditation"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:" Today's Hydration"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",g," oz"]}),u.jsxs("p",{className:"current-text",children:[o.water.totalOz," / ",g," oz"]}),u.jsx(Bf,{value:E,text:`${Math.round(E)}%`,styles:$f({pathColor:`rgba(30, 144, 255, ${Math.max(E/100,.3)})`,textColor:"#1e90ff"})}),u.jsxs("div",{className:"daily-stats",children:[o.water.hasWaterToday?u.jsxs("span",{children:[" ",o.water.entries," water entries"]}):u.jsx("span",{children:"No water logged today"}),o.water.isOnTrack&&u.jsx("span",{className:"on-track",children:" On track for hydration!"})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/water"),children:"Log Water"})]})]}),N>0&&u.jsx("div",{className:"notification-bar",children:u.jsxs("p",{children:[" You are ",N," minutes away from your daily workout goal!"]})}),y>=100&&I>=100&&E>=100&&u.jsx("div",{className:"celebration-bar",children:u.jsx("p",{children:" Congratulations! You've achieved all your daily wellness goals! "})}),u.jsxs("div",{className:"affirmation-bar",children:[u.jsx("p",{children:" Daily Affirmation "}),u.jsx("h2",{children:S})]}),u.jsxs("div",{className:"quick-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.workout.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Exercised Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.water.totalOz}),u.jsx("span",{className:"stat-label",children:"Ounces of Water Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.meditation.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Meditated Today"})]})]}),M.length>0&&u.jsxs("div",{className:"ai-recommendations soft-card",children:[u.jsx("h2",{children:"AI-Powered Recommendations"}),u.jsx("ul",{children:M.map((R,k)=>u.jsxs("li",{className:"recommendation-item",children:[u.jsxs("strong",{children:[R.type&&R.type.charAt(0).toUpperCase()+R.type.slice(1),":"]})," ",R.message,R.action&&u.jsxs("div",{className:"recommendation-action",children:["Action: ",R.action]})]},k))})]}),v&&u.jsx("div",{className:"trial-modal-overlay",children:u.jsxs("div",{className:"trial-modal",children:[u.jsx("h2",{children:"Your free trial has ended"}),u.jsx("p",{children:"Upgrade to keep enjoying premium features!"}),u.jsx("button",{className:"primary-button",onClick:il,children:"Upgrade with Stripe"}),u.jsxs("div",{className:"trial-modal-actions",children:[u.jsx("button",{className:"secondary-button",onClick:()=>x(!1),children:"Remind me later"}),u.jsx("button",{className:"link-button",onClick:()=>{localStorage.setItem("dontRemindTrial","true"),x(!1)},children:"Don't remind me again"})]})]})})]})}var AO=function(t){return t.toLowerCase().replace(/\n/g," ").replace(/[.,\/#!?$%\^&\*;:{}=_`\"~()]/g," ").replace(/\s\s+/g," ").trim().split(" ")};function PO(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const NO={"":1,"":3,"":3,"":3,"":-1,"":3,"":3,"":2,"":3,"":2,"":2,"":3,"":3,"":2,"":-2,"":2,"":2,"":1,"":2,"":2,"":2,"":2,"":2,"":-2,"":3,"":3,"":2,"":-1,"":3,"":2,"":3,"":3,"":3,"":1,"":3,"":1,"":-1,"":2,"":-1,"":2,"":3,"":3,"":2,"":-1,"":2,"":3,"":2,"":-1,"":3,"":1,"":3,"":1,"":-1,"":2,"":2,"":-1,"":-1,"":1,"":-2,"":2,"":3,"":3,"":3,"":1,"":2,"":3,"":2,"":2,"":-2,"":-1,"":-2,"":1,"":2,"":2,"":-1,"":3,"":-2,"":3,"":1,"":1,"":3,"":-2,"":2,"":2,"":1,"":3,"":1,"":-1,"":-2,"":-2,"":2,"":-1,"":-1,"":1,"":3,"":-1,"":2,"":1,"":-1,"":2,"":2,"":-1,"":2,"":3,"":2,"":2,"":1,"":3,"":1,"":1,"":1,"":3,"":1,"":1,"":3,"":2,"":2,"":2,"":2,"":1,"":2,"":2,"":3,"":2,"":1,"":1,"":2,"":-2,"":2,"":2,"":2,"":1,"":3,"":1,"":1,"":2,"":1,"":2,"":2,"":1,"":2,"":2,"":2,"":1,"":2,"":2,"":1,"":3,"":3,"":2,"":-2,"":1,"":2,"":1,"":-1,"":2,"":3,"":2,"":1,"":-1,"":2,"":3,"":1,"":2,"":2,"":1,"":3,"":3,"":-1,"":1,"":1,"":1,"":2,"":3,"":2,"":1,"":1,"":2,"":2,"":3,"":3,"":2,"":2,"":3,"":1,"":1,"":2,"":-1,"":2,"":1,"":-3,"":2,"":2,"":1,"":-1,"":2,"":-1,"":2,"":2,"":1,"":-1,"":1,"":2,"":3,"":-1,"":2,"":3,"":2,"":-3,"":3,"":2,"":2,"":2,"":2,"":4,"":-1,"":2,"":-1,"":2,"":-3,"":2,"":1,"":2,"":3,"":5,"":3,"":1,"":1,"":2,"":2,"":1,"":1,"":3,"":1,"":1,"":2,"":1,"":3,"":3,"":1,"":-3,"":2,"":-1,"":1,"":2,"":1,"":3,"":2,"":3,"":-2,"":1,"":-2,"":1,"":3,"":4,"":3,"":2,"":1,"":-2,"":1,"":1,"":2,"":2,"":1,"":2,"":-1,"":1,"":1,"":2,"":-2,"":2,"":1,"":3,"":2,"":1,"":2,"":3,"":1,"":1,"":1,"":3,"":1,"":2,"":-1,"":1,"":2,"":2,"":3,"":1,"":1,"":1,"":2,"":3,"":2,"":1,"":1,"":1,"":2,"":2,"":2,"":1,"":2,"":1,"":2,"":2,"":2,"":1,"":1,"":2,"":3,"":1,"":1,"":1,"":3,"":-3,"":1,"":2,"":1,"":-2,"":3,"":2,"":1,"":3,"":2,"":2,"":2,"":3,"":3,"":-1,"":1,"":2,"":2,"":-1,"":1,"":1,"":1,"":1,"":-4,"":1,"":1,"":1,"":2,"":2,"":2,"":4,"":1,"":2,"":5,"":1,"":1,"":-1,"":2,"":3,"":2,"":4,"":1,"":2,"":3,"":1,"":1,"":-1,"":1,"":1,"":-1,"":2,"":1,"":2,"":1,"":2,"":1,"":-1,"":2,"":1,"":1,"":1,"":-1,"":3,"":2,"":-1,"":2,"":1,"":2,"":2,"":-1,"":2,"":3,"":1,"":1,"":-2,"":-3,"":2,"":1,"":2,"":3,"":-1,"":1,"":-2,"":-2,"":1,"":-1,"":1,"":2,"":2,"":1,"":2,"":3,"":1,"":-1,"":3,"":1,"":1,"":3,"":-1,"":1,"":1,"":2,"":2,"":2,"":1,"":3,"":3,"":3,"":-1,"":1,"":-1,"":2,"":2,"":-1,"":2,"":2,"":-1,"":2,"":3,"":3,"":2,"":3,"":1,"":-1,"":-1,"":1,"":2,"":3,"":2,"":3,"":3,"":5,"":1,"":3,"":3,"":1,"":3,"":1,"":1,"":1,"":2,"":1,"":2,"":2,"":3,"":1,"":-4,"":2,"":3,"":2,"":1,"":2,"":2,"":4,"":3,"":3,"":1,"":2,"":2,"":1,"":1,"":2,"":1,"":2,"":2,"":5,"":3,"":2,"":2,"":2,"":2,"":2,"":3,"":-2,"":3,"":3,"":3,"":2,"":3,"":1,"":2,"":2,"":2,"":1,"":3,"":1,"":3,"":3,"":-2,"":4,"":1,"":-1,"":1,"":1,"":5,"":4,"":1,"":-1,"":-2,"":2,"":3,"":2,"":2,"":-2,"":2,"":2,"":1,"":2,"":1,"":3,"":-3,"":1,"":5,"":3,"":3,"":-2,"":1,"":1,"":-2,"":-1,"":-1,"":1,"":2,"":1,"":3,"":4,"":-3,"":3,"":2,"":1,"":-1,"":1,"":2,"":-1,"":3,"":-2,"":3,"":2,"":1,"":-3,"":-1,"":2,"":3,"":3,"":3,"":1,"":5,"":2,"":1,"":1,"":2,"":2,"":2,"":4,"":2,"":2,"":1,"":3,"":1,"":1,"":4,"":2,"":1,"":3,"":4,"":-5,"":1,"":1,"":5,"":4,"":3,"":1,"":5,"":4,"":1,"":2,"":3,"":3,"":2,"":2,"":4,"":1,"":3,"":-2,"":1,"":-1,"":1,"":-1,"":1,"":4,"":2,"":1,"":2,"":1,"":2,"":2,"":2,"":2,"":1,"":-4,"":1,"":1,"":-1,"":1,"":1,"":3,"":1,"":5,"":2,"":2,"":2,"":3,"":1,"":2,"":2,"":1,"":3,"":1,"":2,"":1,"":5,"":3,"":3,"":2,"":3,"":-3,"":2,"":1,"":5,"":2,"":3,"":3,"":5,"":-2,"":-2,"":3,"":3,"":3,"":1,"":3,"":-2,"":1,"":3,"":-2,"":5,"":1,"":1,"":3,"":1,"":1,"":1,"":5,"":3,"":3,"":3,"":5,"":1,"":-4,"":1,"":-5,"":1,"":5,"":1,"":5,"":1,"":5,"":2,"":2,"":-3,"":5,"":2,"":2,"":-5,"":2,"":2,"":-3,"":5,"":5,"":5,"":5,"":2,"":5,"":2,"":-5,"":2,"":5,"":5,"":5,"":2,"":-3,"":5,"":-3,"":2,"":2,"":5,"":-5,"":5,"":5,"":5,"":2,"":5,"":5,"":-5,"":5,"":5,"":2,"":2,"":2,"":2,"":5,"":-5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":-5,"":5,"":5,"":5,"":-5,"":-5,"":-5,"":-5,"":-5,"":5,"":5,"":5,"":-5,"":5,"":5,"":-5,"":5,"":5,"":5,"":-5,"":5,"":5,"":5,"":-5,"":-5,"":-5,"":-5,"":5},CO=-2,RO=-2,DO=-2,jO=-2,OO=-2,VO=-2,MO=-3,LO=-3,FO=-3,zO=-3,UO=2,BO=2,$O=1,qO=-1,WO=-1,GO=-1,HO=-1,KO=2,QO=2,YO=2,XO=2,JO=1,ZO=-3,eV=-3,tV=-3,nV=-3,sV=-3,rV=1,iV=1,oV=1,aV=1,cV=1,lV=1,uV=1,dV=-2,hV=-2,fV=-2,mV=-2,pV=2,gV=2,yV=2,vV=2,_V=2,wV=2,EV=2,TV=2,IV=-2,xV=-2,bV=-2,SV=-2,kV=-2,AV=-2,PV=-2,NV=1,CV=-2,RV=2,DV=2,jV=2,OV=2,VV=-3,MV=1,LV=1,FV=3,zV=3,UV=3,BV=3,$V=-1,qV=-1,WV=-1,GV=-2,HV=-2,KV=1,QV=1,YV=3,XV=3,JV=3,ZV=3,eM=3,tM=3,nM=3,sM=1,rM=2,iM=2,oM=2,aM=2,cM=2,lM=2,uM=2,dM=-1,hM=1,fM=-1,mM=3,pM=3,gM=3,yM=-1,vM=2,_M=-1,wM=2,EM=-2,TM=-2,IM=-2,xM=-2,bM=-2,SM=-2,kM=-2,AM=-2,PM=-2,NM=-2,CM=2,RM=-3,DM=-3,jM=-3,OM=-3,VM=-3,MM=-3,LM=-3,FM=-3,zM=1,UM=2,BM=1,$M=1,qM=1,WM=-2,GM=-2,HM=-2,KM=-2,QM=-1,YM=-1,XM=-2,JM=1,ZM=-2,eL=-2,tL=-2,nL=1,sL=2,rL=-2,iL=2,oL=2,aL=2,cL=2,lL=4,uL=2,dL=-1,hL=2,fL=3,mL=3,pL=3,gL=3,yL=-3,vL=-3,_L=-3,wL=-3,EL=-3,TL=-3,IL=-2,xL=-2,bL=-2,SL=-2,kL=-2,AL=-2,PL=-2,NL=-1,CL=1,RL=-2,DL=-2,jL=-3,OL=-3,VL=-3,ML=-2,LL=-1,FL=-1,zL=-1,UL=-1,BL=-1,$L=-1,qL=-1,WL=-1,GL=-1,HL=-2,KL=-2,QL=2,YL=2,XL=2,JL=2,ZL=2,e4=2,t4=2,n4=2,s4=2,r4=2,i4=2,o4=2,a4=2,c4=2,l4=2,u4=-2,d4=2,h4=2,f4=2,m4=2,p4=2,g4=1,y4=-2,v4=-3,_4=-2,w4=-2,E4=-4,T4=-2,I4=-2,x4=-4,b4=-3,S4=-3,k4=-2,A4=-2,P4=2,N4=2,C4=-4,R4=-4,D4=2,j4=3,O4=3,V4=3,M4=3,L4=3,F4=-3,z4=-3,U4=-1,B4=-1,$4=-1,q4=-1,W4=1,G4=1,H4=2,K4=2,Q4=2,Y4=2,X4=2,J4=2,Z4=1,eF=3,tF=1,nF=1,sF=-2,rF=-2,iF=-2,oF=-2,aF=-2,cF=-2,lF=-1,uF=-1,dF=-1,hF=2,fF=-1,mF=-1,pF=-1,gF=-1,yF=-1,vF=3,_F=3,wF=3,EF=4,TF=-3,IF=-2,xF=-1,bF=-1,SF=1,kF=2,AF=1,PF=-3,NF=-3,CF=-3,RF=-3,DF=-2,jF=1,OF=-2,VF=-2,MF=-2,LF=-2,FF=-1,zF=-3,UF=-3,BF=-3,$F=-2,qF=-2,WF=-2,GF=-2,HF=2,KF=-2,QF=-5,YF=-5,XF=-1,JF=-1,ZF=-1,ez=-2,tz=-2,nz=3,sz=-1,rz=3,iz=3,oz=3,az=3,cz=3,lz=2,uz=2,dz=-2,hz=-2,fz=3,mz=2,pz=2,gz=2,yz=2,vz=2,_z=2,wz=3,Ez=-2,Tz=-2,Iz=-2,xz=-2,bz=3,Sz=-3,kz=-3,Az=-3,Pz=-3,Nz=-3,Cz=2,Rz=-1,Dz=-2,jz=1,Oz=-5,Vz=-5,Mz=-2,Lz=-2,Fz=-2,zz=-2,Uz=-3,Bz=-3,$z=-3,qz=-3,Wz=-2,Gz=-2,Hz=-2,Kz=-2,Qz=-2,Yz=2,Xz=2,Jz=3,Zz=3,e5=-1,t5=3,n5=3,s5=2,r5=-1,i5=-1,o5=-2,a5=3,c5=-1,l5=-1,u5=-1,d5=-3,h5=-2,f5=-2,m5=2,p5=2,g5=-1,y5=1,v5=1,_5=1,w5=1,E5=-2,T5=-2,I5=-3,x5=-2,b5=-2,S5=-2,k5=-2,A5=-2,P5=-2,N5=-2,C5=-2,R5=-3,D5=2,j5=2,O5=2,V5=3,M5=-2,L5=-2,F5=-2,z5=-2,U5=3,B5=5,$5=-3,q5=-3,W5=-3,G5=-3,H5=1,K5=2,Q5=1,Y5=4,X5=3,J5=3,Z5=2,e6=-1,t6=-1,n6=-2,s6=-3,r6=-3,i6=-2,o6=-4,a6=-2,c6=-2,l6=-2,u6=2,d6=-2,h6=-2,f6=-2,m6=-2,p6=-2,g6=-2,y6=2,v6=2,_6=2,w6=2,E6=-1,T6=-1,I6=-1,x6=-1,b6=-1,S6=1,k6=1,A6=1,P6=3,N6=2,C6=1,R6=2,D6=2,j6=2,O6=-2,V6=2,M6=2,L6=-2,F6=-3,z6=-4,U6=-1,B6=3,$6=3,q6=3,W6=3,G6=3,H6=3,K6=-2,Q6=-2,Y6=-2,X6=1,J6=-2,Z6=-2,eU=-1,tU=2,nU=2,sU=2,rU=2,iU=2,oU=-2,aU=-2,cU=-3,lU=-2,uU=2,dU=2,hU=3,fU=3,mU=3,pU=-3,gU=-3,yU=-3,vU=-3,_U=-3,wU=-3,EU=-3,TU=-3,IU=-3,xU=-3,bU=-3,SU=2,kU=2,AU=2,PU=2,NU=2,CU=-2,RU=2,DU=3,jU=2,OU=2,VU=2,MU=2,LU=2,FU=-3,zU=-3,UU=-3,BU=-3,$U=-2,qU=-1,WU=-2,GU=-2,HU=-2,KU=-2,QU=2,YU=2,XU=-2,JU=3,ZU=2,e9=2,t9=1,n9=1,s9=1,r9=1,i9=2,o9=-1,a9=-2,c9=-5,l9=-5,u9=-5,d9=-2,h9=-2,f9=-2,m9=-2,p9=-2,g9=-2,y9=-2,v9=-1,_9=-1,w9=-1,E9=-2,T9=-2,I9=-3,x9=-1,b9=-1,S9=1,k9=2,A9=2,P9=2,N9=2,C9=2,R9=1,D9=2,j9=2,O9=1,V9=2,M9=1,L9=1,F9=1,z9=2,U9=2,B9=1,$9=1,q9=2,W9=2,G9=-2,H9=-2,K9=-2,Q9=-2,Y9=-2,X9=-2,J9=-2,Z9=-2,eB=2,tB=2,nB=2,sB=2,rB=-2,iB=2,oB=2,aB=2,cB=2,lB=-2,uB=-2,dB=-2,hB=-2,fB=2,mB=2,pB=2,gB=-2,yB=-2,vB=-2,_B=-2,wB=-2,EB=-2,TB=-2,IB=2,xB=2,bB=2,SB=2,kB=2,AB=2,PB=2,NB=-3,CB=-2,RB=-2,DB=-2,jB=-2,OB=-1,VB=-2,MB=-2,LB=-2,FB=-2,zB=-2,UB=-2,BB=-2,$B=-2,qB=-2,WB=-2,GB=-2,HB=-2,KB=-1,QB=-1,YB=-1,XB=-2,JB=-2,ZB=-2,e$=-2,t$=-2,n$=-2,s$=-2,r$=1,i$=1,o$=1,a$=2,c$=1,l$=-2,u$=-1,d$=-3,h$=-3,f$=-3,m$=-3,p$=-3,g$=-2,y$=2,v$=2,_$=2,w$=2,E$=2,T$=2,I$=-2,x$=-2,b$=2,S$=-1,k$=-3,A$=-3,P$=-2,N$=-2,C$=-2,R$=-2,D$=2,j$=-2,O$=-2,V$=-2,M$=-3,L$=-3,F$=-3,z$=-3,U$=-3,B$=-3,$$=-3,q$=-3,W$=-2,G$=-2,H$=-2,K$=-2,Q$=-2,Y$=-2,X$=-2,J$=-2,Z$=-2,eq=-2,tq=-2,nq=-2,sq=-1,rq=-1,iq=-3,oq=-3,aq=-1,cq=-2,lq=-1,uq=-1,dq=-1,hq=-2,fq=2,mq=-5,pq=1,gq=-1,yq=-1,vq=-2,_q=-2,wq=2,Eq=-1,Tq=-1,Iq=-2,xq=-2,bq=-2,Sq=-3,kq=-3,Aq=-3,Pq=-3,Nq=-2,Cq=-4,Rq=-4,Dq=-2,jq=-2,Oq=-2,Vq=2,Mq=2,Lq=-2,Fq=-1,zq=2,Uq=3,Bq=-3,$q=-2,qq=-2,Wq=-3,Gq=-1,Hq=2,Kq=3,Qq=-2,Yq=-2,Xq=2,Jq=-2,Zq=-3,e8=-3,t8=-3,n8=-3,s8=-3,r8=-3,i8=-3,o8=-3,a8=1,c8=2,l8=2,u8=-2,d8=-2,h8=-3,f8=-3,m8=-3,p8=2,g8=2,y8=-2,v8=-1,_8=-1,w8=-1,E8=-2,T8=-2,I8=-2,x8=-2,b8=-2,S8=-2,k8=-2,A8=-3,P8=-3,N8=2,C8=-2,R8=-2,D8=-2,j8=-2,O8=-2,V8=-2,M8=-2,L8=-2,F8=-2,z8=-2,U8=-2,B8=-2,$8=-1,q8=-1,W8=3,G8=3,H8=3,K8=3,Q8=3,Y8=3,X8=3,J8=3,Z8=-1,eW=-1,tW=-1,nW=-1,sW=-1,rW=-2,iW=-2,oW=-2,aW=-2,cW=-2,lW=-2,uW=-2,dW=-2,hW=-2,fW=-2,mW=-2,pW=-2,gW=-2,yW=-2,vW=-2,_W=-3,wW=-3,EW=-3,TW=-3,IW=-2,xW=-2,bW=-2,SW=-2,kW=-2,AW=-2,PW=-2,NW=-2,CW=-3,RW=-2,DW=-2,jW=-2,OW=-2,VW=-2,MW=-2,LW=-2,FW=-2,zW=-2,UW=2,BW=1,$W=2,qW=2,WW=-3,GW=-3,HW=-3,KW=-3,QW=-3,YW=-3,XW=-3,JW=-3,ZW=-3,e7=-3,t7=-3,n7=-3,s7=-1,r7=-2,i7=-2,o7=-2,a7=-2,c7=-2,l7=-2,u7=-2,d7=2,h7=-2,f7=-1,m7=-1,p7=-1,g7=-2,y7=-2,v7=-2,_7=-2,w7=-2,E7=3,T7=2,I7=2,x7=1,b7=-4,S7=-4,k7=-3,A7=-3,P7=-1,N7=-2,C7=2,R7=-1,D7=2,j7=-3,O7=-3,V7=-3,M7=-2,L7=-2,F7=-2,z7=-2,U7=-2,B7=-2,$7=-1,q7=-2,W7=-2,G7=-2,H7=-2,K7=-2,Q7=-1,Y7=-1,X7=-1,J7=-2,Z7=-2,eG=-2,tG=-2,nG=-2,sG=-2,rG=-2,iG=-2,oG=-2,aG=-2,cG=-2,lG=-2,uG=-2,dG=-2,hG=-3,fG=-2,mG=-1,pG=-1,gG=-1,yG=-1,vG=2,_G=-2,wG=-2,EG=-2,TG=-2,IG=-2,xG=-1,bG=-2,SG=-2,kG=-2,AG=-2,PG=-2,NG=-2,CG=-2,RG=-2,DG=-1,jG=-1,OG=-2,VG=-2,MG=-1,LG=-1,FG=-1,zG=-1,UG=-3,BG=-3,$G=-3,qG=-3,WG=-2,GG=-2,HG=-2,KG=-2,QG=-2,YG=-2,XG=-2,JG=-2,ZG=-2,eH=-2,tH=-2,nH=-2,sH=-2,rH=-2,iH=-2,oH=-2,aH=-2,cH=-2,lH=-2,uH=-2,dH=-2,hH=-2,fH=-2,mH=-2,pH=-2,gH=-2,yH=-2,vH=-2,_H=-2,wH=-2,EH=-2,TH=-2,IH=-2,xH=-2,bH=-2,SH=-2,kH=-2,AH=-2,PH=-2,NH=-2,CH=-2,RH=-2,DH=-2,jH=2,OH=-2,VH=-2,MH=-2,LH=-2,FH=-2,zH=-2,UH=-2,BH=-2,$H=-2,qH=-2,WH=-2,GH=-2,HH=-3,KH=-3,QH=-2,YH=-2,XH=-2,JH=-2,ZH=-2,eK=-1,tK=-1,nK=-2,sK=-2,rK=-2,iK=2,oK=2,aK=2,cK=2,lK=2,uK=-2,dK=-2,hK=-1,fK=-1,mK=-1,pK=-1,gK=-1,yK=-3,vK=-3,_K=-2,wK=-2,EK=-2,TK=-2,IK=-2,xK=-1,bK=-1,SK=-1,kK=-2,AK=-2,PK=-2,NK=-3,CK=-2,RK=1,DK=1,jK=-2,OK=-2,VK=-1,MK=-1,LK=-2,FK=-2,zK=-2,UK=-2,BK=-2,$K=-2,qK=-2,WK=-2,GK=-3,HK=-3,KK=-1,QK=-2,YK=-1,XK=-2,JK=-2,ZK=-2,eQ=2,tQ=-3,nQ=-2,sQ=2,rQ=2,iQ=2,oQ=1,aQ=4,cQ=-2,lQ=-2,uQ=2,dQ=2,hQ=2,fQ=2,mQ=3,pQ=3,gQ=2,yQ=2,vQ=-2,_Q=-2,wQ=-2,EQ=-2,TQ=-2,IQ=-3,xQ=-2,bQ=1,SQ=-2,kQ=2,AQ=2,PQ=2,NQ=-1,CQ=-1,RQ=2,DQ=2,jQ=2,OQ=2,VQ=2,MQ=2,LQ=2,FQ=2,zQ=2,UQ=2,BQ=-2,$Q=-2,qQ=2,WQ=1,GQ=1,HQ=1,KQ=3,QQ=2,YQ=2,XQ=2,JQ=2,ZQ=2,eY=2,tY=2,nY=2,sY=2,rY=-2,iY=-2,oY=-2,aY=-2,cY=-2,lY=3,uY=-2,dY=-2,hY=-2,fY=1,mY=1,pY=1,gY=2,yY=3,vY=3,_Y=1,wY=2,EY=-1,TY=-2,IY=-1,xY=-1,bY=-2,SY=-2,kY=-2,AY=-1,PY=-1,NY=2,CY=2,RY=2,DY=3,jY=4,OY=-1,VY=-1,MY=-1,LY=-1,FY=-1,zY=2,UY=2,BY=-3,$Y=-1,qY=-3,WY=-2,GY=-2,HY=-2,KY=-2,QY=-2,YY=-2,XY=-2,JY=-2,ZY=-2,eX=-2,tX=-2,nX=-2,sX=3,rX=3,iX=3,oX=3,aX=3,cX=3,lX=-1,uX=-2,dX=-1,hX=2,fX=-1,mX=-1,pX=-1,gX=-2,yX=3,vX=3,_X=3,wX=2,EX=2,TX=2,IX=2,xX=1,bX=1,SX=-2,kX=-2,AX=-2,PX=-2,NX=2,CX=-2,RX=-2,DX=-2,jX=-2,OX=1,VX=1,MX=-1,LX=-1,FX=-1,zX=-1,UX=3,BX=1,$X=-2,qX=-2,WX=4,GX=3,HX=3,KX=4,QX=4,YX=-2,XX=-3,JX=-3,ZX=-3,eJ=-2,tJ=-2,nJ=-2,sJ=-2,rJ=-2,iJ=-2,oJ=-2,aJ=2,cJ=2,lJ=1,uJ=3,dJ=-3,hJ=-3,fJ=-3,mJ=-3,pJ=-2,gJ=-1,yJ=-2,vJ=-3,_J=-3,wJ=1,EJ=-2,TJ=2,IJ=3,xJ=4,bJ=-1,SJ=3,kJ=3,AJ=3,PJ=3,NJ=3,CJ=-2,RJ=-2,DJ=-3,jJ=-3,OJ=-3,VJ=-2,MJ=-2,LJ=-2,FJ=-2,zJ=2,UJ=2,BJ=2,$J=2,qJ=2,WJ=2,GJ=2,HJ=2,KJ=2,QJ=2,YJ=2,XJ=2,JJ=2,ZJ=2,eZ=2,tZ=2,nZ=-2,sZ=-2,rZ=-2,iZ=-2,oZ=2,aZ=2,cZ=-2,lZ=-2,uZ=1,dZ=-3,hZ=-3,fZ=2,mZ=2,pZ=2,gZ=2,yZ=-2,vZ=-3,_Z=-2,wZ=-1,EZ=-2,TZ=2,IZ=-2,xZ=3,bZ=-2,SZ=-2,kZ=-2,AZ=1,PZ=1,NZ=-2,CZ=-2,RZ=2,DZ=-2,jZ=-3,OZ=2,VZ=2,MZ=-2,LZ=-1,FZ=-2,zZ=-2,UZ=-2,BZ=-2,$Z=2,qZ=2,WZ=2,GZ=-2,HZ=-2,KZ=-2,QZ=-1,YZ=-2,XZ=-2,JZ=-1,ZZ=-2,eee=-2,tee=1,nee=-1,see=-2,ree=-1,iee=1,oee=1,aee=-1,cee=-1,lee=2,uee=2,dee=2,hee=-3,fee=-1,mee=-4,pee=-4,gee=-4,yee=-4,vee=-4,_ee=-4,wee=-2,Eee=1,Tee=2,Iee=2,xee=-3,bee=1,See=1,kee=2,Aee=2,Pee=2,Nee=-2,Cee=-2,Ree=-3,Dee=-2,jee=2,Oee=-1,Vee=-2,Mee=-2,Lee=-2,Fee=-2,zee=-2,Uee=-2,Bee=3,$ee=-4,qee=-4,Wee=-4,Gee=-4,Hee=-4,Kee=-4,Qee=-4,Yee=-4,Xee=-4,Jee=-3,Zee=-4,ete=-4,tte=2,nte=2,ste=2,rte=2,ite=-2,ote=4,ate=-1,cte=-1,lte=2,ute=4,dte=4,hte=-3,fte=-2,mte=-2,pte=-2,gte=2,yte=2,vte=2,_te=2,wte=3,Ete=3,Tte=3,Ite=-1,xte=3,bte=2,Ste=2,kte=3,Ate=-2,Pte=-1,Nte=-2,Cte=2,Rte=3,Dte=3,jte=3,Ote=3,Vte=3,Mte=-1,Lte=-2,Fte=2,zte=2,Ute=-2,Bte=1,$te=-3,qte=4,Wte=2,Gte=3,Hte=3,Kte=1,Qte=3,Yte=3,Xte=-2,Jte=-2,Zte=1,ene=2,tne=3,nne=3,sne=1,rne=1,ine=1,one=1,ane=3,cne=2,lne=-2,une=-1,dne=-2,hne=3,fne=3,mne=3,pne=3,gne=-3,yne=-2,vne=-3,_ne=-3,wne=-3,Ene=-3,Tne=1,Ine=1,xne=1,bne=2,Sne=1,kne=-1,Ane=-2,Pne=-2,Nne=-2,Cne=2,Rne=-2,Dne=-2,jne=-2,One=-2,Vne=-2,Mne=1,Lne=2,Fne=2,zne=-3,Une=1,Bne=-3,$ne=-3,qne=-2,Wne=-2,Gne=-1,Hne=2,Kne=-1,Qne=3,Yne=3,Xne=3,Jne=2,Zne=2,ese=3,tse=1,nse=3,sse=-2,rse=-2,ise=3,ose=3,ase=3,cse=-3,lse=-3,use=-3,dse=-3,hse=-3,fse=-1,mse=2,pse=-2,gse=2,yse=-2,vse=-2,_se=-2,wse=-2,Ese=2,Tse=2,Ise=2,xse=-2,bse=-2,Sse=-2,kse=-2,Ase=-2,Pse=-2,Nse=-3,Cse=-3,Rse=-3,Dse=-3,jse=-3,Ose=-3,Vse=-3,Mse=-1,Lse=-2,Fse=1,zse=-1,Use=-2,Bse=-3,$se=-2,qse=2,Wse=-3,Gse=-3,Hse=3,Kse=-2,Qse=3,Yse=2,Xse=4,Jse=-2,Zse=2,ere=-4,tre=-2,nre=2,sre=2,rre=2,ire=-2,ore=2,are=2,cre=2,lre=3,ure=-2,dre=-2,hre=-1,fre=-1,mre=-3,pre=-1,gre=-1,yre=2,vre=2,_re=-2,wre=-2,Ere=-2,Tre=-1,Ire=-2,xre=-2,bre=-2,Sre=-2,kre=2,Are=2,Pre=2,Nre=2,Cre=2,Rre=2,Dre=2,jre=-2,Ore=-2,Vre=-2,Mre=2,Lre=2,Fre=2,zre=-2,Ure=-2,Bre=2,$re=2,qre=-3,Wre=-3,Gre=-3,Hre=-3,Kre=-3,Qre=-2,Yre=-2,Xre=-2,Jre=2,Zre=1,eie=2,tie=2,nie=1,sie=-2,rie=3,iie=-3,oie=-3,aie=2,cie=2,lie=2,uie=2,die=-2,hie=5,fie=-2,mie=-2,pie=-2,gie=-2,yie=-3,vie=-3,_ie=-3,wie=-3,Eie=-3,Tie=-3,Iie=-3,xie=-2,bie=-2,Sie=-1,kie=-2,Aie=-1,Pie=-2,Nie=-3,Cie=-3,Rie=-3,Die=-2,jie=-2,Oie=-2,Vie=-2,Mie=2,Lie=-3,Fie=-1,zie=2,Uie=1,Bie=-2,$ie=-2,qie=-2,Wie=-2,Gie=-2,Hie=-2,Kie=-3,Qie=-3,Yie=-2,Xie=-2,Jie=-2,Zie=-2,eoe=-2,toe=-2,noe=2,soe=2,roe=-1,ioe=-1,ooe=-1,aoe=-1,coe=-2,loe=-2,uoe=3,doe=3,hoe=3,foe=3,moe=-2,poe=-2,goe=-2,yoe=-2,voe=2,_oe=2,woe=2,Eoe=2,Toe=2,Ioe=-2,xoe=-2,boe=-2,Soe=-2,koe=-2,Aoe=-2,Poe=-2,Noe=-2,Coe=-2,Roe=-2,Doe=-2,joe=-2,Ooe=-2,Voe=-2,Moe=-2,Loe=-2,Foe=-1,zoe=-2,Uoe=-2,Boe=-2,$oe=-2,qoe=1,Woe=1,Goe=-2,Hoe=2,Koe=-2,Qoe=-2,Yoe=-2,Xoe=-2,Joe=-2,Zoe=-2,eae=-2,tae=-2,nae=-2,sae=-2,rae=-3,iae=-3,oae=-2,aae=-2,cae=-2,lae=-2,uae=-2,dae=-2,hae=-2,fae=-2,mae=-2,pae=-2,gae=2,yae=2,vae=-2,_ae=-2,wae=-2,Eae=-2,Tae=-2,Iae=-2,xae=-2,bae=-2,Sae=-2,kae=-2,Aae=-2,Pae=-2,Nae=-2,Cae=-2,Rae=-2,Dae=-2,jae=-2,Oae=2,Vae=-2,Mae=-2,Lae=-2,Fae=-2,zae=-2,Uae=-2,Bae=-2,$ae=-2,qae=-2,Wae=-1,Gae=-2,Hae=-2,Kae=-2,Qae=-2,Yae=-2,Xae=1,Jae=1,Zae=1,ece=2,tce=-2,nce=-2,sce=2,rce=-2,ice=-2,oce=-2,ace=-2,cce=-2,lce=-2,uce=-2,dce=-2,hce=-2,fce=2,mce=2,pce=2,gce=2,yce=2,vce=3,_ce=-2,wce=-2,Ece=-2,Tce=-2,Ice=-2,xce=-2,bce=-2,Sce=2,kce=2,Ace=2,Pce=1,Nce=1,Cce=2,Rce=2,Dce=1,jce=-2,Oce=-2,Vce=-2,Mce=-2,Lce=-2,Fce=-2,zce=2,Uce=-2,Bce=-2,$ce=-2,qce=-2,Wce=-2,Gce=-2,Hce=-2,Kce=2,Qce=1,Yce=-1,Xce=2,Jce=1,Zce=1,ele=2,tle=-3,nle=-1,sle=-1,rle=-1,ile=-2,ole=-2,ale=2,cle=2,lle=-2,ule=-2,dle=-2,hle=-1,fle=-1,mle=-3,ple=-3,gle=-3,yle=-3,vle=-1,_le=-2,wle=-4,Ele=-4,Tle=-2,Ile=2,xle=-2,ble=-2,Sle=-2,kle=-3,Ale=1,Ple=1,Nle=1,Cle=2,Rle=1,Dle=2,jle=2,Ole=2,Vle=2,Mle=3,Lle=3,Fle=3,zle=-2,Ule=3,Ble=3,$le=-1,qle=2,Wle=2,Gle=2,Hle=1,Kle=-3,Qle=-3,Yle=-2,Xle=-2,Jle=-2,Zle=-2,eue=-2,tue=-3,nue=-3,sue=-3,rue=-3,iue=2,oue=2,aue=2,cue=2,lue=3,uue=-2,due=-2,hue=-1,fue=-2,mue=-2,pue=-2,gue=-2,yue=2,vue=-1,_ue=-1,wue=1,Eue=1,Tue=1,Iue=1,xue=1,bue=1,Sue=3,kue=-2,Aue=-2,Pue=-1,Nue=1,Cue=2,Rue=-1,Due=-1,jue=-1,Oue=1,Vue=1,Mue=1,Lue=-2,Fue=-2,zue=-2,Uue=-2,Bue=-3,$ue=-3,que=-2,Wue=-2,Gue=-1,Hue=4,Kue=1,Que=2,Yue=2,Xue=2,Jue=2,Zue=2,ede=2,tde=2,nde=-1,sde=-1,rde=-1,ide=-1,ode=-2,ade=2,cde=-2,lde=4,ude=4,dde=-3,hde=-3,fde=-3,mde=-3,pde=-3,gde=-2,yde=-2,vde=-2,_de=-2,wde=-2,Ede=3,Tde=4,Ide=4,xde=4,bde=-2,Sde=-2,kde=-1,Ade=3,Pde=-1,Nde=-1,Cde=-1,Rde=-1,Dde=3,jde=3,Ode=-3,Vde=-3,Mde=-3,Lde=-3,Fde=-3,zde=-3,Ude=-3,Bde=-2,$de=3,qde=3,Wde=3,Gde=3,Hde=3,Kde=3,Qde=2,Yde=-1,Xde=3,Jde=3,Zde=3,ehe=3,the=3,nhe=3,she=-3,rhe=-2,ihe=-3,ohe=-3,ahe=-1,che=-1,lhe=-1,uhe=2,dhe=-2,hhe=-3,fhe=-3,mhe=-3,phe=-3,ghe=3,yhe=-2,vhe=-2,_he=-2,whe=-1,Ehe=-1,The=-1,Ihe=-1,xhe=-3,bhe=3,She=3,khe=3,Ahe=4,Phe=4,Nhe=1,Che=1,Rhe=2,Dhe=2,jhe=-2,Ohe=3,Vhe=-3,Mhe=1,Lhe=-2,Fhe=1,zhe=-2,Uhe=-2,Bhe=-2,$he=-2,qhe=2,Whe=3,Ghe=3,Hhe=-2,Khe=-2,Qhe=2,Yhe=2,Xhe=-2,Jhe=4,Zhe=3,efe=3,tfe=3,nfe=-2,sfe=-2,rfe=-2,ife=-2,ofe=-3,afe=-2,cfe=-1,lfe=-1,ufe=-2,dfe=-2,hfe=-2,ffe=-2,mfe=-2,pfe=-2,gfe=-2,yfe=-3,vfe=-3,_fe=-2,wfe=-2,Efe=-2,Tfe=-2,Ife=-2,xfe=-2,bfe=-2,Sfe=-3,kfe=-3,Afe=-3,Pfe=-3,Nfe=-2,Cfe=-2,Rfe=-2,Dfe=-2,jfe=-3,Ofe=-1,Vfe=-2,Mfe=-2,Lfe=-2,Ffe=-2,zfe=-2,Ufe=-2,Bfe=-2,$fe=-2,qfe=-2,Wfe=-2,Gfe=-2,Hfe=-2,Kfe=-2,Qfe=-2,Yfe=-2,Xfe=-2,Jfe=-2,Zfe=-2,eme=-2,tme=-2,nme=-2,sme=-2,rme=-2,ime=-2,ome=-2,ame=-2,cme=-2,lme=-2,ume=-2,dme=-2,hme=-2,fme=-2,mme=-2,pme=2,gme=2,yme=2,vme=2,_me=-2,wme=-2,Eme=-2,Tme=-2,Ime=-2,xme=-1,bme=-1,Sme=-1,kme=-1,Ame=-3,Pme=-5,Nme=-5,Cme=1,Rme=2,Dme=2,jme=1,Ome=-2,Vme=-2,Mme=-2,Lme=-2,Fme=-2,zme=-2,Ume=-2,Bme=-2,$me=-2,qme=-3,Wme=-3,Gme=-2,Hme=-2,Kme=-1,Qme=-2,Yme=-2,Xme=-2,Jme=-3,Zme=1,epe=-2,tpe=-2,npe=-2,spe=-2,rpe=-2,ipe=-2,ope=-2,ape=-1,cpe=-2,lpe=-2,upe=3,dpe=2,hpe=-5,fpe=-5,mpe=-1,ppe=2,gpe=2,ype=-1,vpe=-2,_pe=-2,wpe=-2,Epe=2,Tpe=2,Ipe=-2,xpe=2,bpe=-1,Spe=2,kpe=-3,Ape=-2,Ppe=-2,Npe=-3,Cpe=-2,Rpe=-2,Dpe=2,jpe=-2,Ope=-2,Vpe=-2,Mpe=-2,Lpe=-2,Fpe=-2,zpe=-2,Upe=-2,Bpe=-2,$pe=-2,qpe=-2,Wpe=-2,Gpe=-2,Hpe=-2,Kpe=-2,Qpe=-2,Ype=-2,Xpe=-2,Jpe=-2,Zpe=-2,ege=-2,tge=-1,nge=2,sge=3,rge=-2,ige=2,oge=2,age=-2,cge=-2,lge=-2,uge=-2,dge=2,hge=2,fge=-2,mge=-2,pge=-2,gge=-2,yge=-2,vge=-2,_ge=-2,wge=-2,Ege=-2,Tge=-2,Ige=-2,xge=-2,bge=-3,Sge=-3,kge=-3,Age=2,Pge=5,Nge=4,Cge=-1,Rge=-1,Dge=-2,jge=-2,Oge=-2,Vge=-2,Mge=-2,Lge=-2,Fge=-2,zge=-2,Uge=-2,Bge=-2,$ge=-1,qge=-2,Wge=-2,Gge=-2,Hge=-2,Kge=-2,Qge=-2,Yge=-2,Xge=-1,Jge=-3,Zge=-1,eye=-2,tye=-2,nye=-2,sye=-3,rye=-3,iye=-3,oye=3,aye=-1,cye=2,lye=2,uye=2,dye=2,hye=-1,fye=1,mye=2,pye=-1,gye=-1,yye=-2,vye=-1,_ye=2,wye=2,Eye=2,Tye=-2,Iye=-2,xye=-2,bye=-2,Sye=-2,kye=-1,Aye=3,Pye=2,Nye=3,Cye=3,Rye=2,Dye=-2,jye=-3,Oye=-2,Vye=-2,Mye=-2,Lye=-2,Fye=-2,zye=-2,Uye=-2,Bye=-2,$ye=-2,qye=-3,Wye=-2,Gye=-2,Hye=-2,Kye=-2,Qye=2,Yye=-2,Xye=2,Jye=-1,Zye=-2,eve=-2,tve=-2,nve=-4,sve=-4,rve=-3,ive=-2,ove=-1,ave=-2,cve=-3,lve=-3,uve=-3,dve=-3,hve=2,fve=3,mve=1,pve=3,gve=3,yve=3,vve=-2,_ve=2,wve=-2,Eve=-2,Tve=-2,Ive=-2,xve=-2,bve=2,Sve=2,kve=2,Ave=-2,Pve=-2,Nve=-2,Cve=-2,Rve=-2,Dve=-2,jve=-2,Ove=-2,Vve=-2,Mve=-2,Lve=-2,Fve=3,zve=3,Uve=2,Bve=2,$ve=-2,qve=-1,Wve=-1,Gve=-1,Hve=-1,Kve=-1,Qve=2,Yve=-2,Xve=3,Jve=3,Zve=3,e_e=3,t_e=1,n_e=1,s_e=1,r_e=-2,i_e=-2,o_e=-2,a_e=1,c_e=-1,l_e=-2,u_e=-1,d_e=-1,h_e=-1,f_e=1,m_e=-1,p_e=-1,g_e=-1,y_e=-1,v_e=-5,__e=-2,w_e=-2,E_e=-2,T_e=2,I_e=2,x_e=-2,b_e=-2,S_e=2,k_e=2,A_e=-2,P_e=2,N_e=2,C_e=-1,R_e=-1,D_e=2,j_e=1,O_e=1,V_e=1,M_e=1,L_e=1,F_e=1,z_e=1,U_e=1,B_e=-2,$_e=-1,q_e=-2,W_e=-1,G_e=-1,H_e=1,K_e=1,Q_e=3,Y_e=3,X_e=1,J_e=1,Z_e=-2,ewe=-2,twe=-2,nwe=-2,swe=2,rwe=2,iwe=-1,owe=-1,awe=-1,cwe=-1,lwe=2,uwe=-3,dwe=-2,hwe=-2,fwe=-2,mwe=-2,pwe=-2,gwe=-2,ywe=1,vwe=1,_we=2,wwe=-1,Ewe=-2,Twe=-2,Iwe=2,xwe=2,bwe=-2,Swe=-1,kwe=-1,Awe=-3,Pwe=-3,Nwe=-3,Cwe=-2,Rwe=-2,Dwe=-1,jwe=-3,Owe=-3,Vwe=-3,Mwe=-3,Lwe=-4,Fwe=-4,zwe=-4,Uwe=2,Bwe=2,$we=2,qwe=4,Wwe=-2,Gwe=2,Hwe=1,Kwe=1,Qwe=1,Ywe=1,Xwe=1,Jwe=1,Zwe=1,e2e=2,t2e=-2,n2e=-2,s2e=-2,r2e=-2,i2e=-2,o2e=2,a2e=2,c2e=2,l2e=2,u2e=2,d2e=1,h2e=1,f2e=1,m2e=2,p2e=-2,g2e=-2,y2e=-2,v2e=-2,_2e=-2,w2e=-2,E2e=-2,T2e=-2,I2e=-2,x2e=1,b2e=-1,S2e=-1,k2e=-1,A2e=-2,P2e=-1,N2e=4,C2e=4,R2e=4,D2e=4,j2e=2,O2e=-1,V2e=2,M2e=2,L2e=2,F2e=2,z2e=1,U2e=2,B2e=1,$2e=2,q2e=2,W2e=2,G2e=-2,H2e=-2,K2e=-2,Q2e=-2,Y2e=-2,X2e=-2,J2e=-2,Z2e=-2,e0e=-1,t0e=-2,n0e=-2,s0e=2,r0e=2,i0e=2,o0e=-2,a0e=-1,c0e=-1,l0e=-1,u0e=-1,d0e=2,h0e=2,f0e=2,m0e=2,p0e=2,g0e=2,y0e=2,v0e=2,_0e=2,w0e=1,E0e=2,T0e=2,I0e=2,x0e=-2,b0e=1,S0e=1,k0e=1,A0e=1,P0e=-2,N0e=-2,C0e=-2,R0e=-2,D0e=-1,j0e=-2,O0e=-1,V0e=-2,M0e=-2,L0e=-1,F0e=-2,z0e=-2,U0e=2,B0e=2,$0e=2,q0e=-2,W0e=2,G0e=2,H0e=2,K0e=2,Q0e=2,Y0e=2,X0e=-3,J0e=-1,Z0e=-1,e1e=2,t1e=2,n1e=2,s1e=3,r1e=3,i1e=-2,o1e=-2,a1e=1,c1e=1,l1e=-2,u1e=-2,d1e=-2,h1e=3,f1e=-2,m1e=-2,p1e=-2,g1e=-2,y1e=-2,v1e=2,_1e=4,w1e=4,E1e=4,T1e=2,I1e=2,x1e=2,b1e=1,S1e=4,k1e=4,A1e=4,P1e=-3,N1e=-2,C1e=-2,R1e=-2,D1e=-2,j1e=-2,O1e=-2,V1e=-2,M1e=-2,L1e=-2,F1e=-2,z1e=1,U1e=1,B1e=2,$1e=1,q1e=1,W1e=2,G1e=2,H1e=2,K1e=2,Q1e=2,Y1e=-1,X1e=-2,J1e=2,Z1e=-2,eEe=-2,tEe=2,nEe=2,sEe=1,rEe=-2,iEe=-2,oEe=-3,aEe=-3,cEe=-3,lEe=-2,uEe=-2,dEe=-2,hEe=-2,fEe=-2,mEe=-2,pEe=-2,gEe=-2,yEe=-2,vEe=3,_Ee=-2,wEe=-2,EEe=-2,TEe=-2,IEe=-2,xEe=-2,bEe=-2,SEe=-3,kEe=-4,AEe=2,PEe=2,NEe=2,CEe=2,REe=2,DEe=-2,jEe=-2,OEe=-1,VEe=-3,MEe=-3,LEe=-2,FEe=-2,zEe=-2,UEe=-2,BEe=2,$Ee=1,qEe=1,WEe=-2,GEe=-2,HEe=-2,KEe=-2,QEe=3,YEe=-2,XEe=-2,JEe=-2,ZEe=-2,eTe=1,tTe=1,nTe=1,sTe=-2,rTe=-4,iTe=-4,oTe=-3,aTe=-2,cTe=-2,lTe=-2,uTe=-2,dTe=-2,hTe=-1,fTe=-2,mTe=-2,pTe=-4,gTe=-1,yTe=-2,vTe=-2,_Te=-2,wTe=1,ETe=1,TTe=-1,ITe=-1,xTe=1,bTe=-2,STe=2,kTe=2,ATe=2,PTe=2,NTe=-3,CTe=-2,RTe=-2,DTe=-2,jTe=-2,OTe=-2,VTe=-2,MTe=-2,LTe=-2,FTe=-2,zTe=-2,UTe=-2,BTe=-2,$Te=-3,qTe=-3,WTe=-3,GTe=-2,HTe=2,KTe=2,QTe=2,YTe=-1,XTe=-2,JTe=-2,ZTe=-1,eIe=-5,tIe=1,nIe=2,sIe=2,rIe=-2,iIe=2,oIe=2,aIe=2,cIe=2,lIe=-2,uIe=-2,dIe=-2,hIe=-2,fIe=-2,mIe=-1,pIe=-2,gIe=-2,yIe=-2,vIe=-2,_Ie=-2,wIe=-2,EIe=-2,TIe=-2,IIe=1,xIe=-1,bIe=2,SIe=2,kIe=2,AIe=2,PIe=2,NIe=2,CIe=1,RIe=1,DIe=1,jIe=1,OIe=1,VIe=1,MIe=-2,LIe=3,FIe=3,zIe=3,UIe=2,BIe=-1,$Ie=-2,qIe=-2,WIe=-1,GIe=1,HIe=-2,KIe=-3,QIe=-3,YIe=-2,XIe=1,JIe=3,ZIe=3,exe=3,txe=2,nxe=-2,sxe=1,rxe=2,ixe=-2,oxe=-2,axe=3,cxe=-2,lxe=-2,uxe=2,dxe=2,hxe=-2,fxe=-2,mxe=-2,pxe=-2,gxe=-1,yxe=-2,vxe=-2,_xe=2,wxe=-2,Exe=-2,Txe=-2,Ixe=-2,xxe=2,bxe=-2,Sxe=-2,kxe=-2,Axe=3,Pxe=-2,Nxe=-2,Cxe=-2,Rxe=-2,Dxe=2,jxe=-2,Oxe=-2,Vxe=-2,Mxe=-2,Lxe=-2,Fxe=-1,zxe=1,Uxe=1,Bxe=1,$xe=2,qxe=-2,Wxe=-2,Gxe=-2,Hxe=-2,Kxe=-2,Qxe=-2,Yxe=-2,Xxe=-2,Jxe=-2,Zxe=-1,ebe=-1,tbe=-1,nbe=-1,sbe=2,rbe=1,ibe=-1,obe=-1,abe=-2,cbe=2,lbe=2,ube=2,dbe=2,hbe=2,fbe=2,mbe=-1,pbe=-2,gbe=-2,ybe=-2,vbe=-2,_be=-1,wbe=-2,Ebe=-1,Tbe=2,Ibe=2,xbe=2,bbe=-1,Sbe=-2,kbe=-2,Abe=-2,Pbe=-2,Nbe=-2,Cbe=-2,Rbe=-2,Dbe=4,jbe=-2,Obe=-3,Vbe=-2,Mbe=2,Lbe=-2,Fbe=1,zbe=1,Ube=-2,Bbe=3,$be=3,qbe=3,Wbe=3,Gbe=2,Hbe=3,Kbe=3,Qbe=-3,Ybe=-3,Xbe=-2,Jbe=-2,Zbe=-2,eSe=-2,tSe=-2,nSe=-2,sSe=-2,rSe=-2,iSe=-2,oSe=-2,aSe=-2,cSe=-2,lSe=-2,uSe=-2,dSe=2,hSe=2,fSe=-2,mSe=-2,pSe=-2,gSe=2,ySe=5,vSe=2,_Se=2,wSe=2,ESe=1,TSe=1,ISe=1,xSe=2,bSe=2,SSe=4,kSe=2,ASe=2,PSe=2,NSe=-1,CSe=-1,RSe=-1,DSe=-1,jSe=-1,OSe=-1,VSe=-2,MSe=1,LSe=2,FSe=2,zSe=-2,USe=-2,BSe=-2,$Se=2,qSe=3,WSe=3,GSe=2,HSe=2,KSe=-3,QSe=-3,YSe=-3,XSe=2,JSe=2,ZSe=-2,eke=-2,tke=2,nke=-2,ske=-2,rke=-2,ike=-2,oke=-2,ake=2,cke=2,lke=-2,uke=-1,dke=-3,hke=-3,fke=4,mke=4,pke=-3,gke=-3,yke=-2,vke=-2,_ke=-3,wke=-3,Eke=-3,Tke=2,Ike=2,xke=2,bke=-2,Ske=2,kke=-2,Ake=-2,Pke=-2,Nke=-2,Cke=-2,Rke=-2,Dke=-2,jke=5,Oke=-2,Vke=-2,Mke=-2,Lke=-2,Fke=-2,zke=-2,Uke=-2,Bke=-2,$ke=2,qke=2,Wke=-2,Gke=2,Hke=2,Kke=-2,Qke=-4,Yke=-4,Xke=-4,Jke=-4,Zke=-2,eAe=-2,tAe=-2,nAe=-2,sAe=-2,rAe=-2,iAe=-3,oAe=-2,aAe=-2,cAe=-2,lAe=2,uAe=-2,dAe=-2,hAe=-2,fAe=-2,mAe=-1,pAe=-2,gAe=-1,yAe=-3,vAe=-3,_Ae=-2,wAe=-3,EAe=-3,TAe=2,IAe=2,xAe=-2,bAe=-2,SAe=-2,kAe=-2,AAe=-2,PAe=2,NAe=-2,CAe=-2,RAe=4,DAe=4,jAe=-2,OAe=-2,VAe=-2,MAe=-2,LAe=-2,FAe=1,zAe=2,UAe=1,BAe=-2,$Ae=-5,qAe=-3,WAe=-3,GAe=-3,HAe=-3,KAe=-3,QAe=2,YAe=-2,XAe=-3,JAe=-3,ZAe=-2,ePe=-2,tPe=-2,nPe=-2,sPe=-2,rPe=-2,iPe=-1,oPe=-2,aPe=-2,cPe=-2,lPe=-1,uPe=-1,dPe=2,hPe=-1,fPe=-1,mPe=-2,pPe=-2,gPe=-1,yPe=-1,vPe=-1,_Pe=-1,wPe=-2,EPe=-1,TPe=-1,IPe=-1,xPe=-1,bPe=-2,SPe=-2,kPe=-2,APe=-2,PPe=-2,NPe=-2,CPe=-2,RPe=-2,DPe=-2,jPe=-2,OPe=-2,VPe=-1,MPe=-2,LPe=-1,FPe=2,zPe=-2,UPe=-2,BPe=-2,$Pe=-2,qPe=-2,WPe=-2,GPe=-2,HPe=-3,KPe=-2,QPe=-2,YPe=-2,XPe=-2,JPe=-3,ZPe=-2,eNe=-2,tNe=-2,nNe=-2,sNe=1,rNe=-2,iNe=-2,oNe=-2,aNe=-2,cNe=-2,lNe=-2,uNe=1,dNe=-2,hNe=-1,fNe=-2,mNe=-2,pNe=1,gNe=-2,yNe=-2,vNe=-2,_Ne=-2,wNe=-2,ENe=-2,TNe=1,INe=-2,xNe=-2,bNe=-2,SNe=-2,kNe=-2,ANe=-2,PNe=2,NNe=-1,CNe=-1,RNe=-2,DNe=-2,jNe=-2,ONe=2,VNe=-2,MNe=-2,LNe=-2,FNe=-1,zNe=2,UNe=-2,BNe=-2,$Ne=-2,qNe=2,WNe=-3,GNe=-2,HNe=-2,KNe=-2,QNe=-2,YNe=-1,XNe=2,JNe=2,ZNe=-2,eCe=-2,tCe=-2,nCe=1,sCe=1,rCe=1,iCe=1,oCe=-2,aCe=-1,cCe=-1,lCe=1,uCe=-2,dCe=-2,hCe=3,fCe=-2,mCe=-3,pCe=-3,gCe=-3,yCe=-3,vCe=-3,_Ce=-3,wCe=-3,ECe=3,TCe=3,ICe=3,xCe=3,bCe=3,SCe=3,kCe=-3,ACe=2,PCe=2,NCe=2,CCe=2,RCe=-2,DCe=-2,jCe=-2,OCe=-2,VCe=-2,MCe=-2,LCe=-3,FCe=-3,zCe=-3,UCe=2,BCe=-2,$Ce=1,qCe=3,WCe=1,GCe=1,HCe=3,KCe=1,QCe=-3,YCe=3,XCe=2,JCe=-1,ZCe=-3,eRe=-3,tRe=-3,nRe=-3,sRe=-2,rRe=-2,iRe=-2,oRe=-2,aRe=-3,cRe=1,lRe=-2,uRe=-2,dRe=1,hRe=2,fRe=2,mRe=2,pRe=-2,gRe=-2,yRe=-3,vRe=-3,_Re=-2,wRe=-1,ERe=-2,TRe=-2,IRe=-1,xRe=-2,bRe=-2,SRe=-2,kRe=-2,ARe=3,PRe=2,NRe=2,CRe=-2,RRe=-2,DRe=-2,jRe=-2,ORe=2,VRe=2,MRe=2,LRe=1,FRe=-3,zRe=-4,URe=-2,BRe=-1,$Re=2,qRe=4,WRe=4,GRe=4,HRe=4,KRe=3,QRe=1,YRe=1,XRe=1,JRe=1,ZRe=-3,eDe=2,tDe=-2,nDe=-3,sDe=3,rDe=4,iDe=4,oDe=3,aDe=3,cDe=4,lDe=4,uDe=-1,dDe=-3,hDe=-3,fDe=-3,mDe=-3,pDe=-3,gDe=-3,yDe=-3,vDe=-3,_De=-3,wDe=3,EDe=-3,TDe=2,IDe=-2,xDe=2,bDe=4,SDe=4,kDe=4,ADe=-3,PDe=-2,NDe=-2,CDe=-2,RDe=-2,DDe=-2,jDe=-2,ODe=-2,VDe=-2,MDe=-2,LDe=-4,FDe=-4,zDe=-4,UDe=3,BDe=3,$De=4,qDe=4,WDe=1,GDe=1,HDe=2,KDe=1,QDe=2,YDe=-2,XDe=3,JDe=-2,ZDe=-2,e3e=2,t3e={abandon:CO,abandoned:RO,abandons:DO,abducted:jO,abduction:OO,abductions:VO,abhor:MO,abhorred:LO,abhorrent:FO,abhors:zO,abilities:UO,ability:BO,aboard:$O,aborted:qO,aborts:WO,absentee:GO,absentees:HO,absolve:KO,absolved:QO,absolves:YO,absolving:XO,absorbed:JO,abuse:ZO,abused:eV,abuses:tV,abusing:nV,abusive:sV,accept:rV,acceptable:iV,acceptance:oV,accepted:aV,accepting:cV,accepts:lV,accessible:uV,accident:dV,accidental:hV,accidentally:fV,accidents:mV,acclaim:pV,acclaimed:gV,accolade:yV,accomplish:vV,accomplished:_V,accomplishes:wV,accomplishment:EV,accomplishments:TV,accusation:IV,accusations:xV,accuse:bV,accused:SV,accuses:kV,accusing:AV,ache:PV,achievable:NV,aching:CV,acquit:RV,acquits:DV,acquitted:jV,acquitting:OV,acrimonious:VV,active:MV,adequate:LV,admire:FV,admired:zV,admires:UV,admiring:BV,admit:$V,admits:qV,admitted:WV,admonish:GV,admonished:HV,adopt:KV,adopts:QV,adorable:YV,adoration:XV,adore:JV,adored:ZV,adores:eM,adoring:tM,adoringly:nM,advanced:sM,advantage:rM,advantageous:iM,advantageously:oM,advantages:aM,adventure:cM,adventures:lM,adventurous:uM,adversary:dM,advisable:hM,affected:fM,affection:mM,affectionate:pM,affectionateness:gM,afflicted:yM,affordable:vM,affronted:_M,aficionados:wM,afraid:EM,aggravate:TM,aggravated:IM,aggravates:xM,aggravating:bM,aggression:SM,aggressions:kM,aggressive:AM,aggressiveness:PM,aghast:NM,agog:CM,agonise:RM,agonised:DM,agonises:jM,agonising:OM,agonize:VM,agonized:MM,agonizes:LM,agonizing:FM,agree:zM,agreeable:UM,agreed:BM,agreement:$M,agrees:qM,alarm:WM,alarmed:GM,alarmist:HM,alarmists:KM,alas:QM,alert:YM,alienation:XM,alive:JM,allegation:ZM,allegations:eL,allergic:tL,allow:nL,ally:sL,alone:rL,altruistic:iL,amaze:oL,amazed:aL,amazes:cL,amazing:lL,ambitious:uL,ambivalent:dL,amicable:hL,amuse:fL,amused:mL,amusement:pL,amusements:gL,anger:yL,angered:vL,angers:_L,angry:wL,anguish:EL,anguished:TL,animosity:IL,annoy:xL,annoyance:bL,annoyed:SL,annoying:kL,annoys:AL,antagonistic:PL,anti:NL,anticipation:CL,anxiety:RL,anxious:DL,apathetic:jL,apathy:OL,apeshit:VL,apocalyptic:ML,apologise:LL,apologised:FL,apologises:zL,apologising:UL,apologize:BL,apologized:$L,apologizes:qL,apologizing:WL,apology:GL,appalled:HL,appalling:KL,appealing:QL,appease:YL,appeased:XL,appeases:JL,appeasing:ZL,applaud:e4,applauded:t4,applauding:n4,applauds:s4,applause:r4,appreciate:i4,appreciated:o4,appreciates:a4,appreciating:c4,appreciation:l4,apprehensive:u4,appropriate:d4,appropriately:h4,approval:f4,approved:m4,approves:p4,ardent:g4,arrest:y4,arrested:v4,arrests:_4,arrogant:w4,arsehole:E4,ashame:T4,ashamed:I4,ass:x4,assassination:b4,assassinations:S4,assault:k4,assaults:A4,asset:P4,assets:N4,assfucking:C4,asshole:R4,astonished:D4,astound:j4,astounded:O4,astounding:V4,astoundingly:M4,astounds:L4,atrocious:F4,atrocity:z4,attack:U4,attacked:B4,attacking:$4,attacks:q4,attract:W4,attracted:G4,attracting:H4,attraction:K4,attractions:Q4,attractive:Y4,attractively:X4,attractiveness:J4,attracts:Z4,audacious:eF,aura:tF,authority:nF,avenge:sF,avenged:rF,avenger:iF,avengers:oF,avenges:aF,avenging:cF,avert:lF,averted:uF,averts:dF,avid:hF,avoid:fF,avoided:mF,avoids:pF,await:-1,awaited:gF,awaits:yF,award:vF,awarded:_F,awards:wF,awesome:EF,awful:TF,awkward:IF,axe:xF,axed:bF,backed:SF,backing:kF,backs:AF,bad:PF,"bad luck":-2,badass:NF,badly:CF,badness:RF,bailout:DF,balanced:jF,bamboozle:OF,bamboozled:VF,bamboozles:MF,ban:LF,banish:FF,bankrupt:zF,bankruptcy:UF,bankster:BF,banned:$F,barbarian:qF,barbaric:WF,barbarous:GF,bargain:HF,barrier:KF,bastard:QF,bastards:YF,battle:XF,battled:JF,battles:ZF,battling:ez,beaten:tz,beatific:nz,beating:sz,beauties:rz,beautiful:iz,beautifully:oz,beautify:az,beauty:cz,befit:lz,befitting:uz,belittle:dz,belittled:hz,beloved:fz,benefactor:mz,benefactors:pz,benefit:gz,benefits:yz,benefitted:vz,benefitting:_z,benevolent:wz,bereave:Ez,bereaved:Tz,bereaves:Iz,bereaving:xz,best:bz,"best damn":4,betray:Sz,betrayal:kz,betrayed:Az,betraying:Pz,betrays:Nz,better:Cz,bias:Rz,biased:Dz,big:jz,bitch:Oz,bitches:Vz,bitter:Mz,bitterest:Lz,bitterly:Fz,bizarre:zz,blackmail:Uz,blackmailed:Bz,blackmailing:$z,blackmails:qz,blah:Wz,blame:Gz,blamed:Hz,blames:Kz,blaming:Qz,bless:Yz,blesses:Xz,blessing:Jz,blessings:Zz,blind:e5,bliss:t5,blissful:n5,blithe:s5,bloated:r5,block:i5,blockade:o5,blockbuster:a5,blocked:c5,blocking:l5,blocks:u5,bloody:d5,blurry:h5,boastful:f5,bold:m5,boldly:p5,bomb:g5,boost:y5,boosted:v5,boosting:_5,boosts:w5,bore:E5,bored:T5,boring:I5,bother:x5,bothered:b5,bothers:S5,bothersome:k5,boycott:A5,boycotted:P5,boycotting:N5,boycotts:C5,brainwashing:R5,brave:D5,braveness:j5,bravery:O5,bravura:V5,breach:M5,breached:L5,breaches:F5,breaching:z5,breakthrough:U5,breathtaking:B5,bribe:$5,bribed:q5,bribes:W5,bribing:G5,bright:H5,brightest:K5,brightness:Q5,brilliant:Y5,brilliance:X5,brilliances:J5,brisk:Z5,broke:e6,broken:t6,brooding:n6,brutal:s6,brutally:r6,bullied:i6,bullshit:o6,bully:a6,bullying:c6,bummer:l6,buoyant:u6,burden:d6,burdened:h6,burdening:f6,burdens:m6,burglar:p6,burglary:g6,calm:y6,calmed:v6,calming:_6,calms:w6,"can't stand":-3,cancel:E6,cancelled:T6,cancelling:I6,cancels:x6,cancer:b6,capabilities:S6,capability:k6,capable:A6,captivated:P6,care:N6,carefree:C6,careful:R6,carefully:D6,carefulness:j6,careless:O6,cares:V6,caring:M6,"cashing in":-2,casualty:L6,catastrophe:F6,catastrophic:z6,cautious:U6,celebrate:B6,celebrated:$6,celebrates:q6,celebrating:W6,celebration:G6,celebrations:H6,censor:K6,censored:Q6,censors:Y6,certain:X6,chagrin:J6,chagrined:Z6,challenge:eU,champion:tU,championed:nU,champions:sU,chance:rU,chances:iU,chaos:oU,chaotic:aU,charged:cU,charges:lU,charisma:uU,charitable:dU,charm:hU,charming:fU,charmingly:mU,charmless:pU,chastise:gU,chastised:yU,chastises:vU,chastising:_U,cheat:wU,cheated:EU,cheater:TU,cheaters:IU,cheating:xU,cheats:bU,cheer:SU,cheered:kU,cheerful:AU,cheerfully:PU,cheering:NU,cheerless:CU,cheers:RU,cheery:DU,cherish:jU,cherished:OU,cherishes:VU,cherishing:MU,chic:LU,chide:FU,chided:zU,chides:UU,chiding:BU,childish:$U,chilling:qU,choke:WU,choked:GU,chokes:HU,choking:KU,clarifies:QU,clarity:YU,clash:XU,classy:JU,clean:ZU,cleaner:e9,clear:t9,cleared:n9,clearly:s9,clears:r9,clever:i9,clouded:o9,clueless:a9,cock:c9,cocksucker:l9,cocksuckers:u9,cocky:d9,coerced:h9,coercion:f9,collapse:m9,collapsed:p9,collapses:g9,collapsing:y9,collide:v9,collides:_9,colliding:w9,collision:E9,collisions:T9,colluding:I9,combat:x9,combats:b9,comedy:S9,comfort:k9,comfortable:A9,comfortably:P9,comforting:N9,comforts:C9,comic:R9,commend:D9,commended:j9,commit:O9,commitment:V9,commits:M9,committed:L9,committing:F9,compassion:z9,compassionate:U9,compelled:B9,competencies:$9,competent:q9,competitive:W9,complacent:G9,complain:H9,complained:K9,complaining:Q9,complains:Y9,complaint:X9,complaints:J9,complicating:Z9,compliment:eB,complimented:tB,compliments:nB,comprehensive:sB,concerned:rB,conciliate:iB,conciliated:oB,conciliates:aB,conciliating:cB,condemn:lB,condemnation:uB,condemned:dB,condemns:hB,confidence:fB,confident:mB,confidently:pB,conflict:gB,conflicting:yB,conflictive:vB,conflicts:_B,confuse:wB,confused:EB,confusing:TB,congrats:IB,congratulate:xB,congratulation:bB,congratulations:SB,consent:kB,consents:AB,consolable:PB,conspiracy:NB,constipation:CB,constrained:RB,contagion:DB,contagions:jB,contagious:OB,contaminant:VB,contaminants:MB,contaminate:LB,contaminated:FB,contaminates:zB,contaminating:UB,contamination:BB,contaminations:$B,contempt:qB,contemptible:WB,contemptuous:GB,contemptuously:HB,contend:KB,contender:QB,contending:YB,contentious:XB,contestable:JB,controversial:ZB,controversially:e$,controversies:t$,controversy:n$,convicted:s$,convince:r$,convinced:i$,convinces:o$,convivial:a$,cool:c$,"cool stuff":3,cornered:l$,corpse:u$,corrupt:d$,corrupted:h$,corrupting:f$,corruption:m$,corrupts:p$,costly:g$,courage:y$,courageous:v$,courageously:_$,courageousness:w$,courteous:E$,courtesy:T$,"cover-up":-3,coward:I$,cowardly:x$,coziness:b$,cramp:S$,crap:k$,crappy:A$,crash:P$,crazier:N$,craziest:C$,crazy:R$,creative:D$,crestfallen:j$,cried:O$,cries:V$,crime:M$,crimes:L$,criminal:F$,criminals:z$,criminate:U$,criminated:B$,criminates:$$,crisis:q$,critic:W$,criticise:G$,criticised:H$,criticises:K$,criticising:Q$,criticism:Y$,criticize:X$,criticized:J$,criticizes:Z$,criticizing:eq,critics:tq,critique:nq,crowding:sq,crude:rq,cruel:iq,cruelty:oq,crush:aq,crushed:cq,crushes:lq,crushing:uq,cry:dq,crying:hq,cunning:fq,cunt:mq,curious:pq,curse:gq,cut:yq,cutback:vq,cutbacks:_q,cute:wq,cuts:Eq,cutting:Tq,cynic:Iq,cynical:xq,cynicism:bq,damage:Sq,damaged:kq,damages:Aq,damaging:Pq,damn:Nq,"damn cute":3,"damn good":4,damned:Cq,damnit:Rq,danger:Dq,dangerous:jq,dangerously:Oq,daredevil:Vq,daring:Mq,darkest:Lq,darkness:Fq,dauntless:zq,dazzling:Uq,dead:Bq,deadening:$q,deadlock:qq,deadly:Wq,deafening:Gq,dear:Hq,dearly:Kq,death:Qq,deaths:Yq,debonair:Xq,debt:Jq,deceit:Zq,deceitful:e8,deceive:t8,deceived:n8,deceives:s8,deceiving:r8,deception:i8,deceptive:o8,decisive:a8,dedicated:c8,dedication:l8,defeat:u8,defeated:d8,defect:h8,defective:f8,defects:m8,defender:p8,defenders:g8,defenseless:y8,defer:v8,deferring:_8,defiant:w8,deficient:E8,deficiency:T8,deficiencies:I8,deficit:x8,deformed:b8,deformities:S8,deformity:k8,defraud:A8,defrauds:P8,deft:N8,defunct:C8,degrade:R8,degraded:D8,degrades:j8,dehumanize:O8,dehumanized:V8,dehumanizes:M8,dehumanizing:L8,deject:F8,dejected:z8,dejecting:U8,dejects:B8,delay:$8,delayed:q8,delectable:W8,delicious:G8,delight:H8,delighted:K8,delightful:Q8,delightfully:Y8,delighting:X8,delights:J8,demand:Z8,demanded:eW,demanding:tW,demands:nW,demonstration:sW,demoralize:rW,demoralized:iW,demoralizes:oW,demoralizing:aW,denial:cW,denials:lW,denied:uW,denier:dW,deniers:hW,denies:fW,denounce:mW,denounces:pW,dent:gW,deny:yW,denying:vW,deplore:_W,deplored:wW,deplores:EW,deploring:TW,deport:IW,deported:xW,deporting:bW,deports:SW,deportation:kW,deportations:AW,depressed:PW,depressing:NW,deprivation:CW,derail:RW,derailed:DW,derails:jW,derelict:OW,deride:VW,derided:MW,derides:LW,deriding:FW,derision:zW,desirable:UW,desire:BW,desired:$W,desirous:qW,despair:WW,despairing:GW,despairs:HW,desperate:KW,desperately:QW,despondent:YW,destroy:XW,destroyed:JW,destroying:ZW,destroys:e7,destruction:t7,destructive:n7,detached:s7,detain:r7,detained:i7,detention:o7,deteriorate:a7,deteriorated:c7,deteriorates:l7,deteriorating:u7,determined:d7,deterrent:h7,detract:f7,detracted:m7,detracts:p7,devastate:g7,devastated:y7,devastating:v7,devastation:_7,devastations:w7,devoted:E7,devotion:T7,devotional:I7,diamond:x7,dick:b7,dickhead:S7,die:k7,died:A7,difficult:P7,diffident:N7,dignity:C7,dilemma:R7,dilligence:D7,dipshit:j7,dire:O7,direful:V7,dirt:M7,dirtier:L7,dirtiest:F7,dirty:z7,disabilities:U7,disability:B7,disabling:$7,disadvantage:q7,disadvantaged:W7,disagree:G7,disagreeable:H7,disagreement:K7,disappear:Q7,disappeared:Y7,disappears:X7,disappoint:J7,disappointed:Z7,disappointing:eG,disappointment:tG,disappointments:nG,disappoints:sG,disapproval:rG,disapprovals:iG,disapprove:oG,disapproved:aG,disapproves:cG,disapproving:lG,disaster:uG,disasters:dG,disastrous:hG,disbelieve:fG,discard:mG,discarded:pG,discarding:gG,discards:yG,discernment:vG,discomfort:_G,disconsolate:wG,disconsolation:EG,discontented:TG,discord:IG,discounted:xG,discouraged:bG,discredited:SG,discriminate:kG,discriminated:AG,discriminates:PG,discriminating:NG,discriminatory:CG,disdain:RG,disease:DG,diseases:jG,disgrace:OG,disgraced:VG,disguise:MG,disguised:LG,disguises:FG,disguising:zG,disgust:UG,disgusted:BG,disgustful:$G,disgusting:qG,disheartened:WG,dishonest:GG,disillusioned:HG,disinclined:KG,disjointed:QG,dislike:YG,disliked:XG,dislikes:JG,dismal:ZG,dismayed:eH,dismissed:tH,disorder:nH,disorders:sH,disorganized:rH,disoriented:iH,disparage:oH,disparaged:aH,disparages:cH,disparaging:lH,displeased:uH,displeasure:dH,disproportionate:hH,dispute:fH,disputed:mH,disputes:pH,disputing:gH,disqualified:yH,disquiet:vH,disregard:_H,disregarded:wH,disregarding:EH,disregards:TH,disrespect:IH,disrespected:xH,disrupt:bH,disrupted:SH,disrupting:kH,disruption:AH,disruptions:PH,disruptive:NH,disrupts:CH,dissatisfied:RH,distasteful:DH,distinguished:jH,distort:OH,distorted:VH,distorting:MH,distorts:LH,distract:FH,distracted:zH,distraction:UH,distracts:BH,distress:$H,distressed:qH,distresses:WH,distressing:GH,distrust:HH,distrustful:KH,disturb:QH,disturbed:YH,disturbing:XH,disturbs:JH,dithering:ZH,diverting:eK,dizzy:tK,dodging:nK,dodgy:sK,"does not work":-3,dolorous:rK,donate:iK,donated:oK,donates:aK,donating:cK,donation:lK,"dont like":-2,doom:uK,doomed:dK,doubt:hK,doubted:fK,doubtful:mK,doubting:pK,doubts:gK,douche:yK,douchebag:vK,dour:_K,downcast:wK,downer:EK,downhearted:TK,downside:IK,drag:xK,dragged:bK,drags:SK,drained:kK,dread:AK,dreaded:PK,dreadful:NK,dreading:CK,dream:RK,dreams:DK,dreary:jK,droopy:OK,drop:VK,dropped:MK,drown:LK,drowned:FK,drowns:zK,drudgery:UK,drunk:BK,dubious:$K,dud:qK,dull:WK,dumb:GK,dumbass:HK,dump:KK,dumped:QK,dumps:YK,dupe:XK,duped:JK,dupery:ZK,durable:eQ,dying:tQ,dysfunction:nQ,eager:sQ,earnest:rQ,ease:iQ,easy:oQ,ecstatic:aQ,eerie:cQ,eery:lQ,effective:uQ,effectively:dQ,effectiveness:hQ,effortlessly:fQ,elated:mQ,elation:pQ,elegant:gQ,elegantly:yQ,embarrass:vQ,embarrassed:_Q,embarrasses:wQ,embarrassing:EQ,embarrassment:TQ,embezzlement:IQ,embittered:xQ,embrace:bQ,emergency:SQ,empathetic:kQ,empower:AQ,empowerment:PQ,emptiness:NQ,empty:CQ,enchanted:RQ,encourage:DQ,encouraged:jQ,encouragement:OQ,encourages:VQ,encouraging:MQ,endorse:LQ,endorsed:FQ,endorsement:zQ,endorses:UQ,enemies:BQ,enemy:$Q,energetic:qQ,engage:WQ,engages:GQ,engrossed:HQ,engrossing:KQ,enjoy:QQ,enjoyable:YQ,enjoyed:XQ,enjoying:JQ,enjoys:ZQ,enlighten:eY,enlightened:tY,enlightening:nY,enlightens:sY,ennui:rY,enrage:iY,enraged:oY,enrages:aY,enraging:cY,enrapture:lY,enslave:uY,enslaved:dY,enslaves:hY,ensure:fY,ensuring:mY,enterprising:pY,entertaining:gY,enthral:yY,enthusiastic:vY,entitled:_Y,entrusted:wY,envies:EY,envious:TY,"environment-friendly":2,envy:IY,envying:xY,erroneous:bY,error:SY,errors:kY,escape:-1,escapes:AY,escaping:PY,esteem:NY,esteemed:CY,ethical:RY,euphoria:DY,euphoric:jY,evacuate:OY,evacuated:VY,evacuates:MY,evacuating:LY,evacuation:FY,evergreen:zY,evergreens:UY,evergreening:BY,eviction:$Y,evil:qY,exacerbate:WY,exacerbated:GY,exacerbates:HY,exacerbating:KY,exaggerate:QY,exaggerated:YY,exaggerates:XY,exaggerating:JY,exasparate:ZY,exasperated:eX,exasperates:tX,exasperating:nX,excellence:sX,excellent:rX,excite:iX,excited:oX,excitement:aX,exciting:cX,exclude:lX,excluded:uX,exclusion:dX,exclusive:hX,excruciatingly:fX,excuse:mX,exempt:pX,exhausted:gX,exhilarated:yX,exhilarates:vX,exhilarating:_X,exonerate:wX,exonerated:EX,exonerates:TX,exonerating:IX,expand:xX,expands:bX,expel:SX,expelled:kX,expelling:AX,expels:PX,expertly:NX,exploit:CX,exploited:RX,exploiting:DX,exploits:jX,exploration:OX,explorations:VX,expose:MX,exposed:LX,exposes:FX,exposing:zX,exquisite:UX,extend:BX,extends:1,extremist:$X,extremists:qX,exuberant:WX,exultant:GX,exultantly:HX,fabulous:KX,fabulously:QX,fad:YX,fag:XX,faggot:JX,faggots:ZX,fail:eJ,failed:tJ,failing:nJ,fails:sJ,failure:rJ,failures:iJ,fainthearted:oJ,fair:aJ,fairness:cJ,faith:lJ,faithful:uJ,fake:dJ,faker:hJ,fakes:fJ,faking:mJ,fallen:pJ,falling:gJ,false:-1,falsely:yJ,falsified:vJ,falsify:_J,fame:wJ,famine:EJ,famous:TJ,fan:IJ,fantastic:xJ,farce:bJ,fascinate:SJ,fascinated:kJ,fascinates:AJ,fascinating:PJ,fascination:NJ,fascist:CJ,fascists:RJ,fatal:DJ,fatalities:jJ,fatality:OJ,fatigue:VJ,fatigued:MJ,fatigues:LJ,fatiguing:FJ,favor:zJ,favorable:UJ,favorably:BJ,favored:$J,favorite:qJ,favorited:WJ,favorites:GJ,favors:HJ,favour:KJ,favourable:QJ,favourably:YJ,favoured:XJ,favourite:JJ,favourited:ZJ,favourites:eZ,favours:tZ,fear:nZ,fearful:sZ,fearfully:rZ,fearing:iZ,fearless:oZ,fearlessness:aZ,fearsome:cZ,"fed up":-3,feeble:lZ,feeling:uZ,felonies:dZ,felony:hZ,fertile:fZ,fervent:mZ,fervid:pZ,festive:gZ,fever:yZ,fiasco:vZ,fidgety:_Z,fight:wZ,fighting:EZ,fine:TZ,fines:IZ,finest:xZ,fire:bZ,fired:SZ,firing:kZ,fit:AZ,fitness:PZ,filth:NZ,filthy:CZ,flagship:RZ,flaw:DZ,flawed:jZ,flawless:OZ,flawlessly:VZ,flaws:MZ,flees:LZ,flop:FZ,flops:zZ,flu:UZ,flustered:BZ,focused:$Z,fond:qZ,fondness:WZ,fool:GZ,foolish:HZ,fools:KZ,forbid:QZ,forbidden:YZ,forbidding:XZ,forced:JZ,foreclosure:ZZ,foreclosures:eee,forefront:tee,forget:nee,forgetful:see,forgettable:ree,forgive:iee,forgiving:oee,forgot:aee,forgotten:cee,fortune:lee,fortunate:uee,fortunately:dee,foul:hee,frantic:fee,fraud:mee,frauds:pee,fraudster:gee,fraudsters:yee,fraudulence:vee,fraudulent:_ee,freak:wee,free:Eee,freedom:Tee,freedoms:Iee,frenzy:xee,fresh:bee,friend:See,friendliness:kee,friendly:Aee,friendship:Pee,fright:Nee,frightened:Cee,frightening:Ree,frikin:Dee,frisky:jee,frowning:Oee,fruitless:Vee,frustrate:Mee,frustrated:Lee,frustrates:Fee,frustrating:zee,frustration:Uee,ftw:Bee,fuck:$ee,fucked:qee,fucker:Wee,fuckers:Gee,fuckface:Hee,fuckhead:Kee,fuckin:Qee,fucking:Yee,"fucking amazing":4,"fucking beautiful":4,"fucking cute":4,"fucking fantastic":4,"fucking good":4,"fucking great":4,"fucking hot":2,"fucking love":4,"fucking loves":4,"fucking perfect":4,fucktard:Xee,fud:Jee,fuked:Zee,fuking:ete,fulfill:tte,fulfilled:nte,fulfillment:ste,fulfills:rte,fuming:ite,fun:ote,funeral:ate,funerals:cte,funky:lte,funnier:ute,funny:dte,furious:hte,futile:fte,gag:mte,gagged:pte,gain:gte,gained:yte,gaining:vte,gains:_te,gallant:wte,gallantly:Ete,gallantry:Tte,"game-changing":3,garbage:Ite,gem:xte,generous:bte,generously:Ste,genial:kte,ghastly:Ate,ghost:Pte,giddy:Nte,gift:Cte,glad:Rte,glamorous:Dte,glamourous:jte,glee:Ote,gleeful:Vte,gloom:Mte,gloomy:Lte,glorious:Fte,glory:zte,glum:Ute,god:Bte,goddamn:$te,godsend:qte,gold:Wte,good:Gte,goodlooking:Hte,goodmorning:Kte,goodness:Qte,goodwill:Yte,goofiness:Xte,goofy:Jte,grace:Zte,graceful:ene,gracious:tne,grand:nne,grant:sne,granted:rne,granting:ine,grants:one,grateful:ane,gratification:cne,grave:lne,gray:une,grisly:dne,gr8:hne,great:fne,greater:mne,greatest:pne,greed:gne,greedy:yne,"green wash":-3,"green washing":-3,greenwash:vne,greenwasher:_ne,greenwashers:wne,greenwashing:Ene,greet:Tne,greeted:Ine,greeting:xne,greetings:bne,greets:Sne,grey:kne,grief:Ane,grieved:Pne,grim:Nne,gripping:Cne,groan:Rne,groaned:Dne,groaning:jne,groans:One,gross:Vne,growing:Mne,growth:Lne,growths:Fne,gruesome:zne,guarantee:Une,guilt:Bne,guilty:$ne,gullibility:qne,gullible:Wne,gun:Gne,ha:Hne,hacked:Kne,haha:Qne,hahaha:Yne,hahahah:Xne,hail:Jne,hailed:Zne,hallelujah:ese,handpicked:tse,handsome:nse,hapless:sse,haplessness:rse,happiest:ise,happiness:ose,happy:ase,harass:cse,harassed:lse,harasses:use,harassing:dse,harassment:hse,hard:fse,hardier:mse,hardship:pse,hardy:gse,harm:yse,harmed:vse,harmful:_se,harming:wse,harmony:Ese,harmonious:Tse,harmoniously:Ise,harms:xse,harried:bse,harsh:Sse,harsher:kse,harshest:Ase,harshly:Pse,hate:Nse,hated:Cse,hater:Rse,haters:Dse,hates:jse,hating:Ose,hatred:Vse,haunt:Mse,haunted:Lse,haunting:Fse,haunts:zse,havoc:Use,hazardous:Bse,headache:$se,healthy:qse,heartbreaking:Wse,heartbroken:Gse,heartfelt:Hse,heartless:Kse,heartwarming:Qse,heaven:Yse,heavenly:Xse,heavyhearted:Jse,hehe:Zse,hell:ere,hellish:tre,help:nre,helpful:sre,helping:rre,helpless:ire,helps:ore,hero:are,heroes:cre,heroic:lre,hesitant:ure,hesitate:dre,hid:hre,hide:fre,hideous:mre,hides:pre,hiding:gre,highlight:yre,hilarious:vre,hinder:_re,hindrance:wre,hoax:Ere,hollow:Tre,homeless:Ire,homesick:xre,homicide:bre,homicides:Sre,honest:kre,honor:Are,honored:Pre,honoring:Nre,honour:Cre,honoured:Rre,honouring:Dre,hooligan:jre,hooliganism:Ore,hooligans:Vre,hope:Mre,hopeful:Lre,hopefully:Fre,hopeless:zre,hopelessness:Ure,hopes:Bre,hoping:$re,horrendous:qre,horrid:Wre,horrible:Gre,horrific:Hre,horrified:Kre,hospitalized:Qre,hostile:Yre,huckster:Xre,hug:Jre,huge:Zre,hugs:eie,humane:tie,humble:nie,humbug:sie,humerous:rie,humiliated:iie,humiliation:oie,humor:aie,humorous:cie,humour:lie,humourous:uie,hunger:die,hurrah:hie,hurt:fie,hurting:mie,hurts:pie,hypocritical:gie,hysteria:yie,hysterical:vie,hysterics:_ie,icky:wie,idiocy:Eie,idiot:Tie,idiotic:Iie,ignorance:xie,ignorant:bie,ignore:Sie,ignored:kie,ignores:Aie,ill:Pie,"ill-fated":-2,illegal:Nie,illegally:Cie,illegitimate:Rie,illiteracy:Die,illness:jie,illnesses:Oie,illogical:Vie,imaginative:Mie,imbecile:Lie,immobilized:Fie,immortal:zie,immune:Uie,impair:Bie,impaired:$ie,impairing:qie,impairment:Wie,impairs:Gie,impatient:Hie,impeachment:Kie,impeachments:Qie,impede:Yie,impeded:Xie,impedes:Jie,impeding:Zie,impedingly:eoe,imperfect:toe,importance:noe,important:soe,impose:roe,imposed:ioe,imposes:ooe,imposing:aoe,imposter:coe,impotent:loe,impress:uoe,impressed:doe,impresses:hoe,impressive:foe,imprisoned:moe,imprisonment:poe,improper:goe,improperly:yoe,improve:voe,improved:_oe,improvement:woe,improves:Eoe,improving:Toe,inability:Ioe,inaction:xoe,inadequate:boe,inadvertently:Soe,inappropriate:koe,incapable:Aoe,incapacitated:Poe,incapacitates:Noe,incapacitating:Coe,incense:Roe,incensed:Doe,incenses:joe,incensing:Ooe,incoherent:Voe,incompetence:Moe,incompetent:Loe,incomplete:Foe,incomprehensible:zoe,inconsiderate:Uoe,inconvenience:Boe,inconvenient:$oe,increase:qoe,increased:Woe,indecisive:Goe,indestructible:Hoe,indicted:Koe,indifference:Qoe,indifferent:Yoe,indignant:Xoe,indignation:Joe,indoctrinate:Zoe,indoctrinated:eae,indoctrinates:tae,indoctrinating:nae,inediable:sae,inexorable:rae,inexcusable:iae,ineffective:oae,ineffectively:aae,ineffectual:cae,inefficiency:lae,inefficient:uae,inefficiently:dae,inept:hae,ineptitude:fae,infantile:mae,infantilized:pae,infatuated:gae,infatuation:yae,infect:vae,infected:_ae,infecting:wae,infection:Eae,infections:Tae,infectious:Iae,infects:xae,inferior:bae,infest:Sae,infested:kae,infesting:Aae,infests:Pae,inflamed:Nae,inflict:Cae,inflicted:Rae,inflicting:Dae,inflicts:jae,influential:Oae,infract:Vae,infracted:Mae,infracting:Lae,infracts:Fae,infringement:zae,infuriate:Uae,infuriated:Bae,infuriates:$ae,infuriating:qae,inhibit:Wae,inhuman:Gae,injured:Hae,injuries:Kae,injury:Qae,injustice:Yae,innovate:Xae,innovates:Jae,innovation:Zae,innovative:ece,inoperative:tce,inquisition:nce,inquisitive:sce,insane:rce,insanity:ice,insecure:oce,insensitive:ace,insensitivity:cce,insignificant:lce,insipid:uce,insolvent:dce,insomnia:hce,inspiration:fce,inspirational:mce,inspire:pce,inspired:gce,inspires:yce,inspiring:vce,insufficiency:_ce,insufficient:wce,insufficiently:Ece,insult:Tce,insulted:Ice,insulting:xce,insults:bce,intact:Sce,integrity:kce,intelligent:Ace,intense:Pce,interest:Nce,interested:Cce,interesting:Rce,interests:Dce,interrogated:jce,interrupt:Oce,interrupted:Vce,interrupting:Mce,interruption:Lce,interrupts:Fce,intimacy:zce,intimidate:Uce,intimidated:Bce,intimidates:$ce,intimidating:qce,intimidation:Wce,intransigence:Gce,intransigency:Hce,intricate:Kce,intrigues:Qce,invasion:Yce,invincible:Xce,invite:Jce,inviting:Zce,invulnerable:ele,irate:tle,ironic:nle,irony:sle,irrational:rle,irreparable:ile,irreproducible:ole,irresistible:ale,irresistibly:cle,irresolute:lle,irresponsible:ule,irresponsibly:dle,irreversible:hle,irreversibly:fle,irritate:mle,irritated:ple,irritates:gle,irritating:yle,isolated:vle,itchy:_le,jackass:wle,jackasses:Ele,jailed:Tle,jaunty:Ile,jealous:xle,jealousy:ble,jeopardy:Sle,jerk:kle,jesus:Ale,jewel:Ple,jewels:Nle,jocular:Cle,join:Rle,joke:Dle,jokes:jle,jolly:Ole,jovial:Vle,joy:Mle,joyful:Lle,joyfully:Fle,joyless:zle,joyous:Ule,jubilant:Ble,jumpy:$le,justice:qle,justifiably:Wle,justified:Gle,keen:Hle,kickback:Kle,kickbacks:Qle,kidnap:Yle,kidnapped:Xle,kidnapping:Jle,kidnappings:Zle,kidnaps:eue,kill:tue,killed:nue,killing:sue,kills:rue,kind:iue,"kind of":0,kinder:oue,kindness:aue,kiss:cue,kudos:lue,lack:uue,lackadaisical:due,lag:hue,lagged:fue,lagging:mue,lags:pue,lame:gue,landmark:yue,lapse:vue,lapsed:_ue,laugh:wue,laughed:Eue,laughing:Tue,laughs:Iue,laughting:xue,launched:bue,lawl:Sue,lawsuit:kue,lawsuits:Aue,lazy:Pue,leadership:Nue,leading:Cue,leak:Rue,leaked:Due,leave:jue,legal:Oue,legally:Vue,lenient:Mue,lethal:Lue,lethality:Fue,lethargic:zue,lethargy:Uue,liar:Bue,liars:$ue,libelous:que,lied:Wue,lifeless:Gue,lifesaver:Hue,lighthearted:Kue,likable:Que,like:Yue,likeable:Xue,liked:Jue,likers:Zue,likes:ede,liking:tde,limitation:nde,limited:sde,limits:rde,litigation:ide,litigious:ode,lively:ade,livid:cde,lmao:lde,lmfao:ude,loathe:dde,loathed:hde,loathes:fde,loathing:mde,loathsome:pde,lobbied:gde,lobby:yde,lobbying:vde,lobbyist:_de,lobbyists:wde,lol:Ede,lolol:Tde,lololol:Ide,lolololol:xde,lonely:bde,lonesome:Sde,longing:kde,lool:Ade,loom:Pde,loomed:Nde,looming:Cde,looms:Rde,loool:Dde,looool:jde,loose:Ode,looses:Vde,loser:Mde,losing:Lde,loss:Fde,losses:zde,lost:Ude,lousy:Bde,lovable:$de,love:qde,loved:Wde,lovelies:Gde,lovely:Hde,loves:Kde,loving:Qde,"loving-kindness":3,lowest:Yde,loyal:Xde,loyalty:Jde,luck:Zde,luckily:ehe,lucky:the,lucrative:nhe,ludicrous:she,lugubrious:rhe,lunatic:ihe,lunatics:ohe,lurk:ahe,lurking:che,lurks:lhe,luxury:uhe,macabre:dhe,mad:hhe,maddening:fhe,"made-up":-1,madly:mhe,madness:phe,magnificent:ghe,maladaption:yhe,maldevelopment:vhe,maltreatment:_he,mandatory:whe,manipulated:Ehe,manipulating:The,manipulation:Ihe,manslaughter:xhe,marvel:bhe,marvelous:She,marvels:khe,masterpiece:Ahe,masterpieces:Phe,matter:Nhe,matters:Che,mature:Rhe,meaningful:Dhe,meaningless:jhe,medal:Ohe,mediocrity:Vhe,meditative:Mhe,melancholy:Lhe,memorable:Fhe,memoriam:zhe,menace:Uhe,menaced:Bhe,menaces:$he,mercy:qhe,merry:Whe,mesmerizing:Ghe,mess:Hhe,messed:Khe,"messing up":-2,methodical:Qhe,methodically:Yhe,mindless:Xhe,miracle:Jhe,mirth:Zhe,mirthful:efe,mirthfully:tfe,misbehave:nfe,misbehaved:sfe,misbehaves:rfe,misbehaving:ife,misbranding:ofe,miscast:afe,mischief:cfe,mischiefs:lfe,misclassified:ufe,misclassifies:dfe,misclassify:hfe,misconduct:ffe,misconducted:mfe,misconducting:pfe,misconducts:gfe,miserable:yfe,miserably:vfe,misery:_fe,misfire:wfe,misfortune:Efe,misgiving:Tfe,misinformation:Ife,misinformed:xfe,misinterpreted:bfe,mislead:Sfe,misleaded:kfe,misleading:Afe,misleads:Pfe,misplace:Nfe,misplaced:Cfe,misplaces:Rfe,misplacing:Dfe,mispricing:jfe,misread:Ofe,misreport:Vfe,misreported:Mfe,misreporting:Lfe,misreports:Ffe,misrepresent:zfe,misrepresentation:Ufe,misrepresentations:Bfe,misrepresented:$fe,misrepresenting:qfe,misrepresents:Wfe,miss:Gfe,missed:Hfe,missing:Kfe,mistake:Qfe,mistaken:Yfe,mistakes:Xfe,mistaking:Jfe,misunderstand:Zfe,misunderstanding:eme,misunderstands:tme,misunderstood:nme,misuse:sme,misused:rme,misuses:ime,misusing:ome,moan:ame,moaned:cme,moaning:lme,moans:ume,mock:dme,mocked:hme,mocking:fme,mocks:mme,modernize:pme,modernized:gme,modernizes:yme,modernizing:vme,mongering:_me,monopolize:wme,monopolized:Eme,monopolizes:Tme,monopolizing:Ime,monotone:xme,moody:bme,mope:Sme,moping:kme,moron:Ame,motherfucker:Pme,motherfucking:Nme,motivate:Cme,motivated:Rme,motivating:Dme,motivation:jme,mourn:Ome,mourned:Vme,mournful:Mme,mourning:Lme,mourns:Fme,muddy:zme,mumpish:Ume,murder:Bme,murderer:$me,murdering:qme,murderous:Wme,murders:Gme,murky:Hme,myth:Kme,n00b:Qme,naive:Yme,narcissism:Xme,nasty:Jme,natural:Zme,nave:-2,needy:epe,negative:tpe,negativity:npe,neglect:spe,neglected:rpe,neglecting:ipe,neglects:ope,nerves:ape,nervous:cpe,nervously:lpe,nice:upe,nifty:dpe,niggas:hpe,nigger:fpe,no:mpe,"no fun":-3,noble:ppe,noblest:gpe,noisy:ype,"non-approved":-2,nonsense:vpe,noob:_pe,nosey:wpe,"not good":-2,"not working":-3,notable:Epe,noticeable:Tpe,notorious:Ipe,novel:xpe,numb:bpe,nurturing:Spe,nuts:kpe,obliterate:Ape,obliterated:Ppe,obnoxious:Npe,obscene:Cpe,obscenity:Rpe,obsessed:Dpe,obsolete:jpe,obstacle:Ope,obstacles:Vpe,obstinate:Mpe,obstruct:Lpe,obstructed:Fpe,obstructing:zpe,obstruction:Upe,obstructs:Bpe,odd:$pe,offence:qpe,offences:Wpe,offend:Gpe,offended:Hpe,offender:Kpe,offending:Qpe,offends:Ype,offense:Xpe,offenses:Jpe,offensive:Zpe,offensively:ege,offline:tge,oks:nge,ominous:sge,"once-in-a-lifetime":3,oops:rge,opportunities:ige,opportunity:oge,oppressed:age,oppression:cge,oppressions:lge,oppressive:uge,optimism:dge,optimistic:hge,optionless:fge,ostracize:mge,ostracized:pge,ostracizes:gge,ouch:yge,outage:vge,outages:_ge,outbreak:wge,outbreaks:Ege,outcry:Tge,outmaneuvered:Ige,outnumbered:xge,outrage:bge,outraged:Sge,outrageous:kge,outreach:Age,outstanding:Pge,overjoyed:Nge,overload:Cge,overlooked:Rge,overprotective:Dge,overran:jge,overreact:Oge,overreacted:Vge,overreacting:Mge,overreaction:Lge,overreacts:Fge,oversell:zge,overselling:Uge,oversells:Bge,oversight:$ge,oversimplification:qge,oversimplified:Wge,oversimplifies:Gge,oversimplify:Hge,oversold:Kge,overstatement:Qge,overstatements:Yge,overweight:Xge,overwrought:Jge,oxymoron:Zge,pain:eye,pained:tye,painful:nye,panic:sye,panicked:rye,panics:iye,paradise:oye,paradox:aye,pardon:cye,pardoned:lye,pardoning:uye,pardons:dye,parley:hye,passion:fye,passionate:mye,passive:pye,passively:gye,pathetic:yye,pay:vye,peace:_ye,peaceful:wye,peacefully:Eye,penalize:Tye,penalized:Iye,penalizes:xye,penalizing:bye,penalty:Sye,pensive:kye,perfect:Aye,perfected:Pye,perfection:Nye,perfectly:Cye,perfects:Rye,peril:Dye,perjury:jye,perpetrated:Oye,perpetrator:Vye,perpetrators:Mye,perplexed:Lye,persecute:Fye,persecuted:zye,persecutes:Uye,persecuting:Bye,perturbed:$ye,pervert:qye,pesky:Wye,pessimism:Gye,pessimistic:Hye,petrified:Kye,philanthropy:Qye,phobic:Yye,picturesque:Xye,pileup:Jye,pillage:Zye,pique:eve,piqued:tve,piss:nve,pissed:sve,pissing:rve,piteous:ive,pitied:ove,pity:ave,plague:cve,plagued:lve,plagues:uve,plaguing:dve,playful:hve,pleasant:fve,please:mve,pleased:pve,pleasurable:gve,pleasure:yve,plodding:vve,poignant:_ve,pointless:wve,poised:Eve,poison:Tve,poisoned:Ive,poisons:xve,polished:bve,polite:Sve,politeness:kve,pollutant:Ave,pollute:Pve,polluted:Nve,polluter:Cve,polluters:Rve,pollutes:Dve,pollution:jve,poor:Ove,poorer:Vve,poorest:Mve,poorly:Lve,popular:Fve,popularity:zve,positive:Uve,positively:Bve,possessive:$ve,"post-traumatic":-2,postpone:qve,postponed:Wve,postpones:Gve,postponing:Hve,poverty:Kve,powerful:Qve,powerless:Yve,praise:Xve,praised:Jve,praises:Zve,praising:e_e,pray:t_e,praying:n_e,prays:s_e,prblm:r_e,prblms:i_e,predatory:o_e,prepared:a_e,pressure:c_e,pressured:l_e,pretend:u_e,pretending:d_e,pretends:h_e,pretty:f_e,prevent:m_e,prevented:p_e,preventing:g_e,prevents:y_e,prick:v_e,prison:__e,prisoner:w_e,prisoners:E_e,privileged:T_e,proactive:I_e,problem:x_e,problems:b_e,profit:S_e,profitable:k_e,profiteer:A_e,profits:P_e,progress:N_e,prohibit:C_e,prohibits:R_e,prominent:D_e,promise:j_e,promised:O_e,promises:V_e,promote:M_e,promoted:L_e,promotes:F_e,promoting:z_e,promptly:U_e,propaganda:B_e,prosecute:$_e,prosecuted:q_e,prosecutes:W_e,prosecution:G_e,prospect:H_e,prospects:K_e,prosperity:Q_e,prosperous:Y_e,protect:X_e,protected:1,protects:J_e,protest:Z_e,protesters:ewe,protesting:twe,protests:nwe,proud:swe,proudly:rwe,provoke:iwe,provoked:owe,provokes:awe,provoking:cwe,prudence:lwe,pseudoscience:uwe,psychopathic:dwe,punish:hwe,punished:fwe,punishes:mwe,punishing:pwe,punitive:gwe,pure:ywe,purest:vwe,purposeful:_we,pushy:wwe,puzzled:Ewe,quaking:Twe,qualities:Iwe,quality:xwe,questionable:bwe,questioned:Swe,questioning:kwe,racism:Awe,racist:Pwe,racists:Nwe,rage:Cwe,rageful:Rwe,rainy:Dwe,rant:jwe,ranter:Owe,ranters:Vwe,rants:Mwe,rape:Lwe,raped:Fwe,rapist:zwe,rapture:Uwe,raptured:Bwe,raptures:$we,rapturous:qwe,rash:Wwe,ratified:Gwe,reach:Hwe,reached:Kwe,reaches:Qwe,reaching:Ywe,reassure:Xwe,reassured:Jwe,reassures:Zwe,reassuring:e2e,rebel:t2e,rebellion:n2e,rebels:s2e,recession:r2e,reckless:i2e,recognition:o2e,recommend:a2e,recommended:c2e,recommends:l2e,redeemed:u2e,refine:d2e,refined:h2e,refines:f2e,refreshingly:m2e,refuse:p2e,refused:g2e,refuses:y2e,refusing:v2e,regret:_2e,regretful:w2e,regrets:E2e,regretted:T2e,regretting:I2e,reigning:x2e,reject:b2e,rejected:S2e,rejecting:k2e,rejection:A2e,rejects:P2e,rejoice:N2e,rejoiced:C2e,rejoices:R2e,rejoicing:D2e,relaxed:j2e,relentless:O2e,reliability:V2e,reliable:M2e,reliably:L2e,reliant:F2e,relieve:z2e,relieved:U2e,relieves:B2e,relieving:$2e,relishing:q2e,remarkable:W2e,remorse:G2e,repellent:H2e,repercussion:K2e,repercussions:Q2e,reprimand:Y2e,reprimanded:X2e,reprimanding:J2e,reprimands:Z2e,repulse:e0e,repulsed:t0e,repulsive:n0e,rescue:s0e,rescued:r0e,rescues:i0e,resentful:o0e,resign:a0e,resigned:c0e,resigning:l0e,resigns:u0e,resolute:d0e,resolution:h0e,resolve:f0e,resolved:m0e,resolves:p0e,resolving:g0e,respect:y0e,respected:v0e,respects:_0e,responsibility:w0e,responsible:E0e,responsive:T0e,restful:I0e,restless:x0e,restore:b0e,restored:S0e,restores:k0e,restoring:A0e,restrict:P0e,restricted:N0e,restricting:C0e,restriction:R0e,restrictive:D0e,restricts:j0e,retained:O0e,retard:V0e,retarded:M0e,retreat:L0e,revenge:F0e,revengeful:z0e,revered:U0e,revive:B0e,revives:$0e,revolting:q0e,reward:W0e,rewarded:G0e,rewarding:H0e,rewards:K0e,rich:Q0e,richly:Y0e,ridiculous:X0e,rig:J0e,rigged:Z0e,"right direction":3,righteousness:e1e,rightful:t1e,rightfully:n1e,rigorous:s1e,rigorously:r1e,riot:i1e,riots:o1e,rise:a1e,rises:c1e,risk:l1e,risks:u1e,risky:d1e,riveting:h1e,rob:f1e,robber:m1e,robed:p1e,robing:g1e,robs:y1e,robust:v1e,rofl:_1e,roflcopter:w1e,roflmao:E1e,romance:T1e,romantical:I1e,romantically:x1e,rose:b1e,rotfl:S1e,rotflmfao:k1e,rotflol:A1e,rotten:P1e,rude:N1e,ruin:C1e,ruined:R1e,ruining:D1e,ruins:j1e,sabotage:O1e,sad:V1e,sadden:M1e,saddened:L1e,sadly:F1e,safe:z1e,safely:U1e,safer:B1e,safety:$1e,salient:q1e,salute:W1e,saluted:G1e,salutes:H1e,saluting:K1e,salvation:Q1e,sappy:Y1e,sarcastic:X1e,satisfied:J1e,savange:Z1e,savanges:eEe,save:tEe,saved:nEe,savings:sEe,scam:rEe,scams:iEe,scandal:oEe,scandalous:aEe,scandals:cEe,scapegoat:lEe,scapegoats:uEe,scare:dEe,scared:hEe,scar:fEe,scars:mEe,scary:pEe,sceptical:gEe,scold:yEe,scoop:vEe,scorn:_Ee,scornful:wEe,scream:EEe,screamed:TEe,screaming:IEe,screams:xEe,screwed:bEe,"screwed up":-3,scum:SEe,scumbag:kEe,seamless:AEe,seamlessly:PEe,secure:NEe,secured:CEe,secures:REe,sedition:DEe,seditious:jEe,seduced:OEe,"self-abuse":-2,"self-confident":2,"self-contradictory":-2,"self-deluded":-2,selfish:VEe,selfishness:MEe,sentence:LEe,sentenced:FEe,sentences:zEe,sentencing:UEe,serene:BEe,settlement:$Ee,settlements:qEe,severe:WEe,severely:GEe,sexist:HEe,sexistic:KEe,sexy:QEe,shaky:YEe,shame:XEe,shamed:JEe,shameful:ZEe,share:eTe,shared:tTe,shares:nTe,shattered:sTe,shit:rTe,shithead:iTe,shitty:oTe,shock:aTe,shocked:cTe,shocking:lTe,shocks:uTe,shoody:dTe,shoot:hTe,"short-sighted":-2,"short-sightedness":-2,shortage:fTe,shortages:mTe,shrew:pTe,shy:gTe,sick:yTe,sickness:vTe,"side-effect":-2,"side-effects":-2,sigh:_Te,significance:wTe,significant:ETe,silencing:TTe,silly:ITe,simplicity:xTe,sin:bTe,sincere:STe,sincerely:kTe,sincerest:ATe,sincerity:PTe,sinful:NTe,singleminded:CTe,sinister:RTe,sins:DTe,skeptic:jTe,skeptical:OTe,skepticism:VTe,skeptics:MTe,slam:LTe,slash:FTe,slashed:zTe,slashes:UTe,slashing:BTe,slave:$Te,slavery:qTe,slaves:WTe,sleeplessness:GTe,slick:HTe,slicker:KTe,slickest:QTe,slip:YTe,sloppy:XTe,sluggish:JTe,slumping:ZTe,slut:eIe,smart:tIe,smarter:nIe,smartest:sIe,smear:rIe,smile:iIe,smiled:oIe,smiles:aIe,smiling:cIe,smog:lIe,smuggle:uIe,smuggled:dIe,smuggling:hIe,smuggles:fIe,sneaky:mIe,sneeze:pIe,sneezed:gIe,sneezes:yIe,sneezing:vIe,snub:_Ie,snubbed:wIe,snubbing:EIe,snubs:TIe,sobering:IIe,solemn:xIe,solid:bIe,solidarity:SIe,solidified:kIe,solidifies:AIe,solidify:PIe,solidifying:NIe,solution:CIe,solutions:RIe,solve:DIe,solved:jIe,solves:OIe,solving:VIe,somber:MIe,"some kind":0,"son-of-a-bitch":-5,soothe:LIe,soothed:FIe,soothing:zIe,sophisticated:UIe,sore:BIe,sorrow:$Ie,sorrowful:qIe,sorry:WIe,spacious:GIe,spam:HIe,spammer:KIe,spammers:QIe,spamming:YIe,spark:XIe,sparkle:JIe,sparkles:ZIe,sparkling:exe,spearhead:txe,speculative:nxe,spirit:sxe,spirited:rxe,spiritless:ixe,spiteful:oxe,splendid:axe,spoiled:cxe,spoilt:lxe,spotless:uxe,sprightly:dxe,squander:hxe,squandered:fxe,squandering:mxe,squanders:pxe,squelched:gxe,stab:yxe,stabbed:vxe,stable:_xe,stabs:wxe,stall:Exe,stalled:Txe,stalling:Ixe,stamina:xxe,stampede:bxe,stank:Sxe,startled:kxe,startling:Axe,starve:Pxe,starved:Nxe,starves:Cxe,starving:Rxe,steadfast:Dxe,steal:jxe,stealing:Oxe,steals:Vxe,stereotype:Mxe,stereotyped:Lxe,stifled:Fxe,stimulate:zxe,stimulated:Uxe,stimulates:Bxe,stimulating:$xe,stingy:qxe,stink:Wxe,stinked:Gxe,stinker:Hxe,stinking:Kxe,stinks:Qxe,stinky:Yxe,stole:Xxe,stolen:Jxe,stop:Zxe,stopped:ebe,stopping:tbe,stops:nbe,stout:sbe,straight:rbe,strange:ibe,strangely:obe,strangled:abe,strength:cbe,strengthen:lbe,strengthened:ube,strengthening:dbe,strengthens:hbe,strengths:fbe,stress:mbe,stressed:pbe,stressor:gbe,stressors:ybe,stricken:vbe,strike:_be,strikers:wbe,strikes:Ebe,strong:Tbe,stronger:Ibe,strongest:xbe,struck:bbe,struggle:Sbe,struggled:kbe,struggles:Abe,struggling:Pbe,stubborn:Nbe,stuck:Cbe,stunned:Rbe,stunning:Dbe,stupid:jbe,stupidity:Obe,stupidly:Vbe,suave:Mbe,subpoena:Lbe,substantial:Fbe,substantially:zbe,subversive:Ube,succeed:Bbe,succeeded:$be,succeeding:qbe,succeeds:Wbe,success:Gbe,successful:Hbe,successfully:Kbe,suck:Qbe,sucks:Ybe,sue:Xbe,sued:Jbe,sueing:Zbe,sues:eSe,suffer:tSe,suffered:nSe,sufferer:sSe,sufferers:rSe,suffering:iSe,suffers:oSe,suicidal:aSe,suicide:cSe,suicides:lSe,suing:uSe,suitable:dSe,suited:hSe,sulking:fSe,sulky:mSe,sullen:pSe,sunshine:gSe,super:3,superb:ySe,superior:vSe,support:_Se,supported:wSe,supporter:ESe,supporters:TSe,supporting:ISe,supportive:xSe,supports:bSe,supreme:SSe,survived:kSe,surviving:ASe,survivor:PSe,suspect:NSe,suspected:CSe,suspecting:RSe,suspects:DSe,suspend:jSe,suspended:OSe,suspicious:VSe,sustainability:MSe,sustainable:LSe,sustainably:FSe,swear:zSe,swearing:USe,swears:BSe,sweet:$Se,sweeter:qSe,sweetest:WSe,swift:GSe,swiftly:HSe,swindle:KSe,swindles:QSe,swindling:YSe,sympathetic:XSe,sympathy:JSe,taint:ZSe,tainted:eke,talent:tke,tard:nke,tarnish:ske,tarnished:rke,tarnishes:ike,tears:oke,tender:ake,tenderness:cke,tense:lke,tension:uke,terrible:dke,terribly:hke,terrific:fke,terrifically:mke,terrified:pke,terror:gke,terrorist:yke,terrorists:vke,terrorize:_ke,terrorized:wke,terrorizes:Eke,thank:Tke,thankful:Ike,thanks:xke,thorny:bke,thoughtful:Ske,thoughtless:kke,threat:Ake,threaten:Pke,threatened:Nke,threatening:Cke,threatens:Rke,threats:Dke,thrilled:jke,thwart:Oke,thwarted:Vke,thwarting:Mke,thwarts:Lke,timid:Fke,timorous:zke,tired:Uke,tits:Bke,tolerance:$ke,tolerant:qke,toothless:Wke,top:Gke,tops:Hke,torn:Kke,torture:Qke,tortured:Yke,tortures:Xke,torturing:Jke,totalitarian:Zke,totalitarianism:eAe,tout:tAe,touted:nAe,touting:sAe,touts:rAe,toxic:iAe,tragedies:oAe,tragedy:aAe,tragic:cAe,tranquil:lAe,transgress:uAe,transgressed:dAe,transgresses:hAe,transgressing:fAe,trap:mAe,trapped:pAe,traps:gAe,trauma:yAe,traumatic:vAe,travesty:_Ae,treason:wAe,treasonous:EAe,treasure:TAe,treasures:IAe,trembling:xAe,tremor:bAe,tremors:SAe,tremulous:kAe,tribulation:AAe,tribute:PAe,tricked:NAe,trickery:CAe,triumph:RAe,triumphant:DAe,troll:jAe,trouble:OAe,troubled:VAe,troubles:MAe,troubling:LAe,true:2,trust:FAe,trusted:zAe,trusts:UAe,tumor:BAe,twat:$Ae,tyran:qAe,tyrannic:WAe,tyrannical:GAe,tyrannically:HAe,tyrans:KAe,ubiquitous:QAe,ugh:YAe,ugliness:XAe,ugly:JAe,unable:ZAe,unacceptable:ePe,unappeasable:tPe,unappreciated:nPe,unapproved:sPe,unattractive:rPe,unavailable:iPe,unavailing:oPe,unaware:aPe,unbearable:cPe,unbelievable:lPe,unbelieving:uPe,unbiased:dPe,uncertain:hPe,unclear:fPe,uncomfortable:mPe,unconcerned:pPe,unconfirmed:gPe,unconvinced:yPe,uncredited:vPe,undecided:_Pe,undercooked:wPe,underestimate:EPe,underestimated:TPe,underestimates:IPe,underestimating:xPe,undermine:bPe,undermined:SPe,undermines:kPe,undermining:APe,underperform:PPe,underperformed:NPe,underperforming:CPe,underperforms:RPe,undeserving:DPe,undesirable:jPe,uneasy:OPe,unemployed:VPe,unemployment:MPe,unequal:LPe,unequaled:FPe,unethical:zPe,uneventful:UPe,unfair:BPe,unfavorable:$Pe,unfit:qPe,unfitted:WPe,unfocused:GPe,unforgivable:HPe,unforgiving:KPe,unfulfilled:QPe,unfunny:YPe,ungenerous:XPe,ungrateful:JPe,unhappy:ZPe,unhappiness:eNe,unhealthy:tNe,unhygienic:nNe,unified:sNe,unimaginative:rNe,unimpressed:iNe,uninspired:oNe,unintelligent:aNe,unintentional:cNe,uninvolving:lNe,united:uNe,unjust:dNe,unlikely:hNe,unlovable:fNe,unloved:mNe,unmatched:pNe,unmotivated:gNe,unoriginal:yNe,unparliamentary:vNe,unpleasant:_Ne,unpleasantness:wNe,unprofessional:ENe,unravel:TNe,unreleting:INe,unresearched:xNe,unsafe:bNe,unsatisfied:SNe,unscientific:kNe,unsecured:ANe,unselfish:PNe,unsettled:NNe,unsold:CNe,unsophisticated:RNe,unsound:DNe,unstable:jNe,unstoppable:ONe,unsuccessful:VNe,unsuccessfully:MNe,unsupported:LNe,unsure:FNe,untarnished:zNe,untrue:UNe,unwanted:BNe,unworthy:$Ne,uplifting:qNe,uproar:WNe,upset:GNe,upsets:HNe,upsetting:KNe,uptight:QNe,urgent:YNe,useful:XNe,usefulness:JNe,useless:ZNe,uselessness:eCe,vague:tCe,validate:nCe,validated:sCe,validates:rCe,validating:iCe,vapid:oCe,verdict:aCe,verdicts:cCe,vested:lCe,vexation:uCe,vexing:dCe,vibrant:hCe,vicious:fCe,victim:mCe,victimization:pCe,victimize:gCe,victimized:yCe,victimizes:vCe,victimizing:_Ce,victims:wCe,victor:ECe,victors:TCe,victory:ICe,victories:xCe,vigilant:bCe,vigor:SCe,vile:kCe,vindicate:ACe,vindicated:PCe,vindicates:NCe,vindicating:CCe,violate:RCe,violated:DCe,violates:jCe,violating:OCe,violation:VCe,violations:MCe,violence:LCe,"violence-related":-3,violent:FCe,violently:zCe,virtuous:UCe,virulent:BCe,vision:$Ce,visionary:qCe,visioning:WCe,visions:GCe,vitality:HCe,vitamin:KCe,vitriolic:QCe,vivacious:YCe,vividly:XCe,vociferous:JCe,vomit:ZCe,vomited:eRe,vomiting:tRe,vomits:nRe,vulnerability:sRe,vulnerable:rRe,walkout:iRe,walkouts:oRe,wanker:aRe,want:cRe,war:lRe,warfare:uRe,warm:dRe,warmhearted:hRe,warmness:fRe,warmth:mRe,warn:pRe,warned:gRe,warning:yRe,warnings:vRe,warns:_Re,waste:wRe,wasted:ERe,wasting:TRe,wavering:IRe,weak:xRe,weakened:bRe,weakness:SRe,weaknesses:kRe,wealth:ARe,wealthier:PRe,wealthy:NRe,weary:CRe,weep:RRe,weeping:DRe,weird:jRe,welcome:ORe,welcomed:VRe,welcomes:MRe,"well-being":2,"well-championed":3,"well-developed":2,"well-established":2,"well-focused":2,"well-groomed":2,"well-proportioned":2,whimsical:LRe,whitewash:FRe,whore:zRe,wicked:URe,widowed:BRe,willingness:$Re,win:qRe,winner:WRe,winning:GRe,wins:HRe,winwin:KRe,wisdom:QRe,wish:YRe,wishes:XRe,wishing:JRe,withdrawal:ZRe,wits:eDe,woebegone:tDe,woeful:nDe,won:sDe,wonderful:rDe,wonderfully:iDe,woo:oDe,woohoo:aDe,wooo:cDe,woow:lDe,worn:uDe,worried:dDe,worries:hDe,worry:fDe,worrying:mDe,worse:pDe,worsen:gDe,worsened:yDe,worsening:vDe,worsens:_De,worshiped:wDe,worst:EDe,worth:TDe,worthless:IDe,worthy:xDe,wow:bDe,wowow:SDe,wowww:kDe,wrathful:ADe,wreck:PDe,wrenching:NDe,wrong:CDe,wrongdoing:RDe,wrongdoings:DDe,wronged:jDe,wrongful:ODe,wrongfully:VDe,wrongly:MDe,wtf:LDe,wtff:FDe,wtfff:zDe,xo:UDe,xoxo:BDe,xoxoxo:$De,xoxoxoxo:qDe,yeah:WDe,yearning:GDe,yeees:HDe,yes:KDe,youthful:QDe,yucky:YDe,yummy:XDe,zealot:JDe,zealots:ZDe,zealous:e3e},n3e=1,s3e=1,r3e=1,i3e=1,o3e=1,a3e=1,c3e=1,l3e={cant:n3e,"can't":1,dont:s3e,"don't":1,doesnt:r3e,"doesn't":1,not:i3e,non:o3e,wont:a3e,"won't":1,isnt:c3e,"isn't":1};var u3e=l3e,d3e={apply:function(t,e,n){if(e>0){var s=t[e-1];u3e[s]&&(n=-n)}return n}},h3e={labels:t3e,scoringStrategy:d3e},kx=NO,Ax=h3e;Object.assign(Ax.labels,kx);var pu={en:Ax},f3e={addLanguage:function(t,e){if(!e.labels)throw new Error("language.labels must be defined!");Object.assign(e.labels,kx),pu[t]=e},getLanguage:function(t){if(!t)return pu.en;if(!pu[t])try{var e=PO("../languages/"+t+"/index");this.addLanguage(t,e)}catch{throw new Error("No language found: "+t)}return pu[t]},getLabels:function(t){var e=this.getLanguage(t);return e.labels},applyScoringStrategy:function(t,e,n,s){var r=this.getLanguage(t),i=r.scoringStrategy||m3e;return i.apply(e,n,s)}},m3e={apply:function(t,e,n){return n}},p3e=AO,kp=f3e,Ny=function(t){this.options=t};Ny.prototype.registerLanguage=function(t,e){kp.addLanguage(t,e)};Ny.prototype.analyze=function(t,e,n){typeof t>"u"&&(t=""),typeof e=="function"&&(n=e,e={}),e=e||{};var s=e.language||"en",r=kp.getLabels(s);typeof e.extras=="object"&&(r=Object.assign(r,e.extras));for(var i=p3e(t),o=0,a=[],c=[],d=[],f=[],m=i.length;m--;){var g=i[m];if(r.hasOwnProperty(g)){a.push(g);var T=r[g];T=kp.applyScoringStrategy(s,i,m,T),T>0&&c.push(g),T<0&&d.push(g),o+=T;var S={};S[g]=T,f.push(S)}}var A={score:o,comparative:i.length>0?o/i.length:0,calculation:f,tokens:i,words:a,positive:c,negative:d};if(typeof n=="function")process.nextTick(function(){n(null,A)});else return A};var g3e=Ny;const y3e=N2(g3e),v3e=new y3e;function Gd(t){return!t||t.trim()===""?null:v3e.analyze(t)}function _3e(){const{user:t}=In(),[e,n]=P.useState([]),[s,r]=P.useState({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),[i,o]=P.useState(!1),[a,c]=P.useState(null),[d,f]=P.useState(!0),[m,g]=P.useState(!1),[T,S]=P.useState(""),[A,C]=P.useState(null),[b,v]=P.useState(!1),x=new Date().toISOString().split("T")[0];P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const N=await fi.fetchWorkoutsByUser(t.uid);n(N.workouts||[])}catch(N){console.error("Error fetching workouts:",N),S("Failed to load workouts")}finally{f(!1)}})()},[t]);const D=E=>{const{name:N,value:R}=E.target;r(k=>({...k,[N]:R}))},L=async E=>{if(E.preventDefault(),console.log(" Workout submit started"),console.log(" Form data:",s),console.log(" Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error(" No user ID found"),S("Please log in to save workouts");return}if(!s.title||!s.durationMinutes||!s.date){S("Please fill in all required fields");return}try{g(!0),S("");let N;if(s.date){const oe=s.date.split("-"),X=parseInt(oe[0]),$=parseInt(oe[1]),le=parseInt(oe[2]),G=new Date;N=new Date(X,$-1,le,G.getHours(),G.getMinutes(),G.getSeconds())}else N=B.getCurrentLocalTime();const R={title:s.title,type:s.type,durationMinutes:parseInt(s.durationMinutes),date:N,notes:s.notes,caloriesBurned:s.caloriesBurned?parseInt(s.caloriesBurned):0};let k;if(i&&a)k=await fi.updateWorkout(t.uid,a,R),n(oe=>oe.map(X=>X.id===a?{...X,...R}:X)),o(!1),c(null);else{const oe=Gd(s.notes);C(oe),v(!!oe);const X={...R,sentiment:oe?oe.score:null};k=await fi.logWorkout(t.uid,X),n($=>[{...X,id:k.id},...$])}r({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),S("")}catch(N){console.error(" Workout logging error:",N),S("Failed to save workout. Please try again.")}finally{g(!1)}},M=E=>{var R,k;o(!0),c(E.id);const N=E.date instanceof Date?E.date.toISOString().split("T")[0]:new Date(E.date).toISOString().split("T")[0];r({date:N,durationMinutes:((R=E.durationMinutes)==null?void 0:R.toString())||"",title:E.title||"",type:E.type||"General",notes:E.notes||"",caloriesBurned:((k=E.caloriesBurned)==null?void 0:k.toString())||""})},w=async E=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this workout?"))try{await fi.deleteWorkout(t.uid,E),n(N=>N.filter(R=>R.id!==E))}catch(N){console.error("Error deleting workout:",N),S("Failed to delete workout")}},y=()=>{o(!1),c(null),r({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""})},I=e.filter(E=>(E.date instanceof Date?E.date.toISOString().split("T")[0]:new Date(E.date).toISOString().split("T")[0])===x);return d?u.jsx("div",{className:"workout-loading",children:"Loading workouts..."}):u.jsxs("div",{className:"workout-page",children:[u.jsxs("div",{className:"workout-card",children:[u.jsx("h1",{className:"workout-title",children:i?"Edit Workout Session":"Log Workout Session"}),T&&u.jsx("div",{className:"error-message",children:T}),u.jsxs("form",{onSubmit:L,className:"workout-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:s.date,onChange:D,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Title",u.jsx("input",{type:"text",name:"title",value:s.title,onChange:D,className:"form-input",placeholder:"e.g., Morning Run, Gym Session",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Type",u.jsxs("select",{name:"type",value:s.type,onChange:D,className:"form-input",children:[u.jsx("option",{value:"General",children:"General"}),u.jsx("option",{value:"Cardio",children:"Cardio"}),u.jsx("option",{value:"Strength",children:"Strength Training"}),u.jsx("option",{value:"Yoga",children:"Yoga"}),u.jsx("option",{value:"Running",children:"Running"}),u.jsx("option",{value:"Cycling",children:"Cycling"}),u.jsx("option",{value:"Swimming",children:"Swimming"}),u.jsx("option",{value:"Walking",children:"Walking"}),u.jsx("option",{value:"HIIT",children:"HIIT"}),u.jsx("option",{value:"Other",children:"Other"})]})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration / Length (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:s.durationMinutes,onChange:D,className:"form-input",min:"1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Calories Burned (Optional)",u.jsx("input",{type:"number",name:"caloriesBurned",value:s.caloriesBurned,onChange:D,className:"form-input",min:"0",placeholder:"0"})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:s.notes,onChange:D,className:"form-input form-textarea",placeholder:"How did it feel? Any achievements?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Workout":"Log Workout"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:y,disabled:m,children:"Cancel"})]})]})]}),u.jsxs("div",{className:"workout-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Workouts (",I.length,")"]}),I.length===0?u.jsx("p",{className:"no-workouts",children:"No workouts logged for today. Start your fitness journey!"}):u.jsx("ul",{className:"log-list",children:I.map(E=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"workout-info",children:[u.jsx("span",{className:"workout-title-display",children:E.title}),u.jsx("span",{className:"workout-type",children:E.type}),u.jsxs("span",{className:"workout-duration",children:[E.durationMinutes," min"]}),E.caloriesBurned>0&&u.jsxs("span",{className:"workout-calories",children:[E.caloriesBurned," cal"]}),E.notes&&u.jsx("span",{className:"workout-notes",children:E.notes})]}),u.jsxs("div",{className:"workout-actions",children:[u.jsx("button",{onClick:()=>M(E),className:"edit-button",disabled:m,children:"Edit"}),u.jsx("button",{onClick:()=>w(E.id),className:"delete-button",disabled:m,children:"Delete"})]})]},E.id))})]}),A&&b&&u.jsx("div",{className:"sentiment-modal-overlay",children:u.jsxs("div",{className:"sentiment-modal",children:[u.jsxs("span",{className:"sentiment-message",children:[A.score>0&&"Your note sounds positive! ",A.score<0&&"Your note sounds a bit negative. ",A.score===0&&"Your note sounds neutral. "]}),u.jsx("button",{className:"close-modal-btn",onClick:()=>v(!1),children:"Dismiss"})]})})]})}const Qs={silence:{name:"Silence",description:"Pure silence for traditional meditation",icon:"",neurological:"Promotes introspection and self-awareness",frequency:null,baseFreq:null},pink_noise_rain:{name:"Pink Noise Rain",description:"Synthetic pink noise for deep relaxation",icon:"",neurological:"Pink noise (1/f) - enhances deep sleep and memory consolidation",frequency:"pink_noise",baseFreq:200,waveType:"sawtooth"},alpha_waves:{name:"Ocean Waves",description:"Realistic ocean waves with alpha wave entrainment",icon:"",neurological:"Ocean rhythms (0.1 Hz) naturally entrain alpha waves (8-12 Hz) for relaxation",frequency:"ocean_waves",waveFrequency:.1,baseFreq:60,highFreq:200,alphaCarrier:200,alphaBeat:10,waveType:"sine"},earth_frequency:{name:"Earth Resonance",description:"Schumann resonance for grounding",icon:"",neurological:"Earth frequency (7.83 Hz) - natural grounding and balance",frequency:"earth_binaural",carrierFreq:136.1,waveType:"sine"},white_noise:{name:"White Noise",description:"Full spectrum noise for focus",icon:"",neurological:"White noise - masks distractions, improves concentration",frequency:"white_noise",baseFreq:440,waveType:"square"},gamma_focus:{name:"Gamma Focus",description:"High-frequency binaural beats for peak concentration",icon:"",neurological:"Gamma waves (40 Hz) - heightened awareness and cognitive performance",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},theta_deep:{name:"Theta Deep State",description:"Deep theta waves for profound meditation",icon:"",neurological:"Theta waves (6 Hz) - deep meditation, creativity, and memory consolidation",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},healing_bowls:{name:"Healing Harmonics",description:"432 Hz healing frequency with natural harmonics",icon:"",neurological:'432 Hz "healing frequency" with harmonic overtones for cellular resonance',frequency:"harmonic",baseFreq:432,harmonics:[432,648,864,1296],waveType:"triangle",premium:!0},delta_deep_sleep:{name:"Delta Deep Sleep",description:"0.5-4 Hz for deep sleep and regeneration",icon:"",neurological:"Delta waves (0.5-4 Hz) - deep sleep, physical healing, and immune system boost",frequency:"delta",baseFreq:2,binauralBeat:2,leftEar:200,rightEar:202,waveType:"sine",premium:!0},theta_creativity:{name:"Theta Creativity",description:"4-8 Hz for creativity and insight",icon:"",neurological:"Theta waves (4-8 Hz) - enhanced creativity, insight, and problem-solving",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},alpha_relaxation:{name:"Alpha Relaxation",description:"8-12 Hz for relaxation and stress reduction",icon:"",neurological:"Alpha waves (8-12 Hz) - relaxation, stress reduction, and improved learning",frequency:"alpha",baseFreq:10,binauralBeat:10,leftEar:200,rightEar:210,waveType:"sine",premium:!0},beta_focus:{name:"Beta Focus",description:"13-30 Hz for focus and alertness",icon:"",neurological:"Beta waves (13-30 Hz) - focused attention, alertness, and cognitive performance",frequency:"beta",baseFreq:20,binauralBeat:20,leftEar:200,rightEar:220,waveType:"sine",premium:!0},gamma_insight:{name:"Gamma Insight",description:"30-100 Hz for insight and peak performance",icon:"",neurological:"Gamma waves (30-100 Hz) - insight, peak performance, and heightened awareness",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},anxiety_relief_528:{name:"Anxiety Relief (528 Hz)",description:"528 Hz frequency for anxiety and stress relief",icon:"",neurological:'528 Hz "Love frequency" - reduces anxiety, promotes healing, and DNA repair',frequency:"single_tone",baseFreq:528,waveType:"sine",premium:!0},depression_lift_639:{name:"Depression Lift (639 Hz)",description:"639 Hz frequency for emotional balance",icon:"",neurological:'639 Hz "Connection frequency" - improves relationships, emotional balance, and communication',frequency:"single_tone",baseFreq:639,waveType:"sine",premium:!0},confidence_boost_741:{name:"Confidence Boost (741 Hz)",description:"741 Hz frequency for self-expression and confidence",icon:"",neurological:'741 Hz "Expression frequency" - enhances self-expression, confidence, and creativity',frequency:"single_tone",baseFreq:741,waveType:"sine",premium:!0},intuition_852:{name:"Intuition (852 Hz)",description:"852 Hz frequency for intuition and spiritual awareness",icon:"",neurological:'852 Hz "Intuition frequency" - enhances intuition, spiritual awareness, and inner wisdom',frequency:"single_tone",baseFreq:852,waveType:"sine",premium:!0},solfeggio_396:{name:"Liberation (396 Hz)",description:"396 Hz Solfeggio frequency for fear and guilt release",icon:"",neurological:'396 Hz "Liberation frequency" - releases fear, guilt, and negative emotions',frequency:"single_tone",baseFreq:396,waveType:"sine",premium:!0},solfeggio_417:{name:"Transformation (417 Hz)",description:"417 Hz Solfeggio frequency for change and transformation",icon:"",neurological:'417 Hz "Transformation frequency" - facilitates change, transformation, and new beginnings',frequency:"single_tone",baseFreq:417,waveType:"sine",premium:!0},solfeggio_963:{name:"Awakening (963 Hz)",description:"963 Hz Solfeggio frequency for spiritual awakening",icon:"",neurological:'963 Hz "Awakening frequency" - spiritual awakening, connection to higher consciousness',frequency:"single_tone",baseFreq:963,waveType:"sine",premium:!0}},gu={mindfulness:{name:"Mindfulness",description:"Present-moment awareness practice",duration:[5,10,15,20],icon:""},breathing:{name:"Breathing",description:"Focused breathwork exercises",duration:[3,5,10],icon:""},body_scan:{name:"Body Scan",description:"Progressive muscle relaxation",duration:[10,15,20],icon:""},loving_kindness:{name:"Loving Kindness",description:"Compassion and heart-opening meditation",duration:[5,10,15],icon:""},flow_state:{name:"Flow State",description:"Neurologically optimized for peak performance",duration:[5,7,10],icon:"",premium:!0}};function Px({children:t,fallback:e,showUpgrade:n=!0,feature:s="this feature",className:r=""}){const{isPremium:i,upgradeToPremium:o}=In();return i?t:e||u.jsx("div",{className:`premium-gate ${r}`,children:u.jsxs("div",{className:"premium-lock",children:[u.jsx("div",{className:"lock-icon",children:""}),u.jsx("h3",{children:"Premium Feature"}),u.jsxs("p",{children:["Upgrade to unlock ",s]}),n&&u.jsx("button",{onClick:il,className:"unlock-button",children:"Upgrade to Premium - $4.99/month"})]})})}function w3e(){const{user:t,isPremium:e}=In(),[n,s]=P.useState([]),[r,i]=P.useState({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),[o,a]=P.useState(!1),[c,d]=P.useState(null),[f,m]=P.useState(!0),[g,T]=P.useState(!1),[S,A]=P.useState(""),[C,b]=P.useState(null),[v,x]=P.useState(!1),[D,L]=P.useState([]),[M,w]=P.useState(""),[y,I]=P.useState(""),[E,N]=P.useState(""),[R,k]=P.useState(!1),[oe,X]=P.useState(0),[$,le]=P.useState(5),[G,te]=P.useState(!1),[re,Te]=P.useState(!1),[ce,ke]=P.useState("silence");P.useEffect(()=>{console.log(" currentSoundscape changed to:",ce)},[ce]);const[$t,Jt]=P.useState(""),[Ze,qt]=P.useState(null),[se,we]=P.useState(null),[ge,Re]=P.useState(null),[jt,ss]=P.useState(null),[Vs,zr]=P.useState(null),[$i,qh]=P.useState(!1),[Wh,qi]=P.useState(!1),On=P.useRef(null);B.formatLocalDate(new Date),P.useEffect(()=>{(()=>{const U="wakeLock"in navigator;qh(U),console.log(" Wake Lock API supported:",U)})()},[]),P.useEffect(()=>{const j=async()=>{if(t!=null&&t.uid)try{m(!0),console.log(" Fetching meditations for timezone:",B.getUserTimezone());const H=((await ir.fetchMeditationsByUser(t.uid)).meditations||[]).map(J=>({...J,localDate:B.formatLocalDate(J.date),localDateTime:B.formatLocalDateTime(J.date),relativeTime:B.getRelativeTime(J.date),isToday:B.isToday(J.date)}));s(H),console.log(" Loaded meditations with timezone data:",H.length)}catch(U){console.error("Error fetching meditations:",U),A("Failed to load meditation sessions")}finally{m(!1)}};t!=null&&t.uid&&j()},[t]),P.useEffect(()=>(console.log(" Audio effect triggered - isSessionActive:",R,"currentSoundscape:",ce),R&&ce!=="silence"&&(console.log(" Setting up audio for soundscape:",ce),bl()),()=>{if(ge)try{Array.isArray(ge)?ge.forEach(j=>{j.stop&&j.stop()}):ge.stop&&ge.stop()}catch(j){console.log("Audio cleanup error:",j)}}),[R,ce]),P.useEffect(()=>(R&&!G?On.current=setInterval(()=>{X(j=>{const U=j+1;return U>=180&&!re&&(Te(!0),Pl()),U})},1e3):clearInterval(On.current),()=>clearInterval(On.current)),[R,G,re]),P.useEffect(()=>{R&&oe>=$*60&&(console.log(" Timer completed! Auto-stopping session..."),console.log(" Final session stats:"),console.log("  - Duration:",Math.floor(oe/60),"minutes"),console.log("  - Target:",$,"minutes"),console.log("  - Soundscape:",ce),console.log("  - Deep state achieved:",re),console.log("  - Start time:",B.formatLocalDateTime(Ze)),_a(),Hi())},[R,oe,$,ce,re,Ze]);const Ur=n.filter(j=>j.isToday||B.isToday(j.date));console.log(" Today's meditations:",Ur.length),P.useEffect(()=>()=>{Wi(),On.current&&clearInterval(On.current)},[]);const Gh=async()=>{try{if(!$i)return console.log(" Wake Lock API not supported, using fallback methods"),!1;const j=await navigator.wakeLock.request("screen");return zr(j),qi(!0),console.log(" Wake lock activated"),j.addEventListener("release",()=>{console.log(" Wake lock was released"),qi(!1),zr(null)}),!0}catch(j){return console.error(" Failed to request wake lock:",j),!1}},Wi=()=>{try{Vs&&(Vs.release(),zr(null),qi(!1),console.log(" Wake lock released"))}catch(j){console.error(" Error releasing wake lock:",j)}},va=()=>!$i&&(console.log(" Using fallback keep-awake methods"),se&&se.state==="suspended"&&se.resume(),"vibrate"in navigator)?setInterval(()=>{navigator.vibrate(1)},3e4):null,bl=()=>{try{const j=new(window.AudioContext||window.webkitAudioContext);we(j);const U=j.createGain();U.connect(j.destination),U.gain.value=.1,ss(U);const H=Qs[ce];if(!(H!=null&&H.frequency)){console.log(" Silence selected");return}switch(H.frequency){case"gamma":case"theta":ut(j,U,H);break;case"alpha":mt(j,U,H);break;case"ocean_waves":Al(j,U,H);break;case"earth_binaural":Gi(j,U,H);break;case"harmonic":kl(j,U,H.harmonics||[H.baseFreq]);break;case"pink_noise":Hh(j,U);break;case"white_noise":Br(j,U);break;case"single_tone":case"natural":Sl(j,U,H.baseFreq,H.waveType||"sine");break;default:console.log(" Unknown frequency type:",H.frequency)}}catch(j){console.error("Audio setup failed:",j)}},ut=(j,U,H)=>{const J=j.createOscillator();J.frequency.setValueAtTime(H.leftEar,j.currentTime),J.type=H.waveType||"sine";const ue=j.createOscillator();ue.frequency.setValueAtTime(H.rightEar,j.currentTime),ue.type=H.waveType||"sine";const Z=j.createStereoPanner();Z.pan.value=-1;const me=j.createStereoPanner();me.pan.value=1,J.connect(Z),Z.connect(U),ue.connect(me),me.connect(U),J.start(),ue.start(),Re([J,ue]),console.log(` Binaural beats: ${H.leftEar}Hz (L) / ${H.rightEar}Hz (R) = ${H.binauralBeat}Hz beat`)},mt=(j,U,H)=>{const ue=H.baseFreq,Z=j.createOscillator();Z.frequency.setValueAtTime(200,j.currentTime),Z.type=H.waveType||"sine";const me=j.createOscillator();me.frequency.setValueAtTime(200+ue,j.currentTime),me.type=H.waveType||"sine";const je=j.createStereoPanner();je.pan.value=-1;const Be=j.createStereoPanner();Be.pan.value=1,Z.connect(je),je.connect(U),me.connect(Be),Be.connect(U),Z.start(),me.start(),Re([Z,me]),console.log(` Alpha binaural: 200Hz (L) / ${200+ue}Hz (R) = ${ue}Hz beat`)},Gi=(j,U,H)=>{const J=H.carrierFreq||136.1,ue=7.83,Z=j.createOscillator();Z.frequency.setValueAtTime(J,j.currentTime),Z.type=H.waveType||"sine";const me=j.createOscillator();me.frequency.setValueAtTime(J+ue,j.currentTime),me.type=H.waveType||"sine";const je=j.createStereoPanner();je.pan.value=-1;const Be=j.createStereoPanner();Be.pan.value=1,Z.connect(je),je.connect(U),me.connect(Be),Be.connect(U),Z.start(),me.start(),Re([Z,me]),console.log(` Earth binaural: ${J}Hz (L) / ${J+ue}Hz (R) = ${ue}Hz Schumann beat`)},Sl=(j,U,H,J="sine")=>{const ue=j.createOscillator();ue.frequency.setValueAtTime(H,j.currentTime),ue.type=J,ue.connect(U),ue.start(),Re(ue),console.log(` Single tone: ${H}Hz (${J})`)},kl=(j,U,H)=>{const J=H.map(ue=>{const Z=j.createOscillator();Z.frequency.setValueAtTime(ue,j.currentTime),Z.type="triangle";const me=j.createGain();return me.gain.value=.3/H.length,Z.connect(me),me.connect(U),Z.start(),Z});Re(J),console.log(` Harmonics: ${H.join(", ")}Hz`)},Hh=(j,U)=>{const H=j.sampleRate*2,J=j.createBuffer(1,H,j.sampleRate),ue=J.getChannelData(0);for(let me=0;me<H;me++){let je=0;for(let Be=0;Be<5;Be++)je+=(Math.random()*2-1)/Math.pow(2,Be);ue[me]=je*.1}const Z=j.createBufferSource();Z.buffer=J,Z.loop=!0,Z.connect(U),Z.start(),Re(Z),console.log(" Pink noise generated")},Br=(j,U)=>{const H=j.sampleRate*2,J=j.createBuffer(1,H,j.sampleRate),ue=J.getChannelData(0);for(let me=0;me<H;me++)ue[me]=(Math.random()*2-1)*.1;const Z=j.createBufferSource();Z.buffer=J,Z.loop=!0,Z.connect(U),Z.start(),Re(Z),console.log(" White noise generated")},Al=(j,U,H)=>{const J=[],ue=j.createOscillator();ue.frequency.setValueAtTime(20,j.currentTime),ue.type="sine";const Z=j.createGain();Z.gain.value=.4;const me=j.createOscillator();me.frequency.setValueAtTime(396,j.currentTime),me.type="sine";const je=j.createGain();je.gain.value=.05;const Be=j.createOscillator();Be.frequency.setValueAtTime(.15,j.currentTime),Be.type="sine";const Ta=j.createGain();Ta.gain.value=.3,Be.connect(Ta),Ta.connect(Z.gain),ue.connect(Z),Z.connect(U),me.connect(je),je.connect(U);const Cl=j.createBuffer(1,j.sampleRate*8,j.sampleRate),rs=Cl.getChannelData(0);let Ia=0;for(let Qe=0;Qe<rs.length;Qe++){const pt=Math.random()*2-1;Ia=(Ia+pt*.02)*.99;const Ot=Math.sin(Qe*.001)*.3+.7;rs[Qe]=Ia*Ot*.5}const qr=j.createBufferSource();qr.buffer=Cl,qr.loop=!0;const Ln=j.createOscillator();Ln.frequency.setValueAtTime(432,j.currentTime),Ln.type="triangle";const Wr=j.createGain();Wr.gain.value=.08;const is=j.createBiquadFilter();is.type="bandpass",is.frequency.setValueAtTime(300,j.currentTime),is.Q.setValueAtTime(.8,j.currentTime);const os=j.createGain();os.gain.value=.3;const Wt=j.createOscillator();Wt.frequency.setValueAtTime(.13,j.currentTime),Wt.type="triangle";const Gr=j.createGain();Gr.gain.value=.25,Wt.connect(Gr),Gr.connect(os.gain),Gr.connect(Wr.gain),qr.connect(is),is.connect(os),os.connect(U),Ln.connect(Wr),Wr.connect(U);const xa=j.createBuffer(1,j.sampleRate*6,j.sampleRate),Ki=xa.getChannelData(0);for(let Qe=0;Qe<Ki.length;Qe++){let pt=0;for(let zn=0;zn<3;zn++)pt+=(Math.random()*2-1)*Math.pow(.5,zn);const Ot=Math.random()>.98?(Math.random()*2-1)*.3:0;Ki[Qe]=(pt+Ot)*.15}const as=j.createBufferSource();as.buffer=xa,as.loop=!0;const Ms=j.createOscillator();Ms.frequency.setValueAtTime(528,j.currentTime),Ms.type="sine";const Hr=j.createGain();Hr.gain.value=.06;const Qi=j.createBiquadFilter();Qi.type="highpass",Qi.frequency.setValueAtTime(1500,j.currentTime);const cs=j.createGain();cs.gain.value=.12;const Ls=j.createOscillator();Ls.frequency.setValueAtTime(.5,j.currentTime),Ls.type="sine";const Fs=j.createGain();if(Fs.gain.value=.04,Ls.connect(Fs),Fs.connect(cs.gain),Fs.connect(Hr.gain),as.connect(Qi),Qi.connect(cs),cs.connect(U),Ms.connect(Hr),Hr.connect(U),H.alphaCarrier&&H.alphaBeat){const Qe=j.createOscillator();Qe.frequency.setValueAtTime(H.alphaCarrier,j.currentTime),Qe.type="sine";const pt=j.createOscillator();pt.frequency.setValueAtTime(H.alphaCarrier+H.alphaBeat,j.currentTime),pt.type="sine";const Ot=j.createGain();Ot.gain.value=.03;const zn=j.createStereoPanner();zn.pan.value=-1;const ba=j.createStereoPanner();ba.pan.value=1,Qe.connect(zn),zn.connect(Ot),pt.connect(ba),ba.connect(Ot),Ot.connect(U),J.push(Qe,pt),Qe.start(),pt.start()}const zs=j.createBuffer(1,j.sampleRate*10,j.sampleRate),Fn=zs.getChannelData(0);for(let Qe=0;Qe<Fn.length;Qe++){let pt=0;for(let Ot=0;Ot<4;Ot++)pt+=(Math.random()*2-1)/Math.pow(2,Ot*.7);Fn[Qe]=pt*.2}const ls=j.createBufferSource();ls.buffer=zs,ls.loop=!0;const Kr=j.createBiquadFilter();Kr.type="bandpass",Kr.frequency.setValueAtTime(150,j.currentTime),Kr.Q.setValueAtTime(.4,j.currentTime);const Qr=j.createGain();Qr.gain.value=.15;const Us=j.createOscillator();Us.frequency.setValueAtTime(.07,j.currentTime),Us.type="sine";const Yi=j.createGain();Yi.gain.value=.1,Us.connect(Yi),Yi.connect(Qr.gain),ls.connect(Kr),Kr.connect(Qr),Qr.connect(U),ue.start(),me.start(),Be.start(),qr.start(),Ln.start(),Wt.start(),as.start(),Ms.start(),Ls.start(),ls.start(),Us.start(),J.push(ue,me,Be,qr,Ln,Wt,as,Ms,Ls,ls,Us),Re(J),console.log(" Healing Ocean Waves: 396Hz (Liberation) + 432Hz (Earth) + 528Hz (Love) + Alpha binaural beats + Realistic ocean sounds")},Pl=()=>{console.log(" Deep state achieved at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Deep State Achieved! ",{body:`You've entered a deep meditative state at ${B.formatLocalTime(new Date)}. Well done!`,icon:"/meditation-icon.png"})},_a=()=>{console.log(" Session completed at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Meditation Complete! ",{body:`Great job! You completed your ${$}-minute meditation session.`,icon:"/meditation-icon.png"});try{const j=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAcugtTxzD2sLYPs7lkgCBl5gQEDgVs+l4G6tGEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAc=");j.volume=.3,j.play().catch(()=>{})}catch{}},Kh=async(j,U,H)=>{const J=B.getCurrentLocalTime();if(console.log(" Starting meditation session in timezone:",B.getUserTimezone()),console.log(" Session start time:",B.formatLocalDateTime(J)),console.log(" Selected soundscape:",H),le(j),X(0),k(!0),te(!1),Te(!1),qt(J),!await Gh()){console.log(" Wake lock failed, using fallback methods");const Z=va();Z&&(On.current=Z)}"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},Qh=()=>{const j=B.getCurrentLocalTime();console.log(" Session paused at:",B.formatLocalDateTime(j)),te(!G),ge&&se&&(G?se.resume():se.suspend())},Hi=async()=>{const j=B.getCurrentLocalTime();if(console.log(" Session ended at:",B.formatLocalDateTime(j)),console.log(" Session duration:",Math.floor(oe/60),"minutes"),console.log(" Target duration:",$,"minutes"),console.log(" Session completed?",oe>=$*60),Wi(),ge){if(Array.isArray(ge))ge.forEach(U=>{try{U.stop?U.stop():U.disconnect&&U.disconnect()}catch(H){console.log("Oscillator cleanup:",H)}});else try{ge.stop?ge.stop():ge.disconnect&&ge.disconnect()}catch(U){console.log("Oscillator cleanup:",U)}Re(null)}if(se){try{await se.close()}catch(U){console.log("AudioContext cleanup:",U)}we(null)}if(k(!1),te(!1),oe>=60){console.log(" Auto-logging session (duration >= 1 minute)"),console.log(" Session time check:",oe,"seconds"),console.log(" Firebase user:",t==null?void 0:t.uid),console.log(" Session start time:",Ze);try{await Nl(),console.log(" Auto-log completed successfully")}catch(U){console.error(" Auto-log failed:",U)}}else console.log(" Session too short, not logging (< 1 minute)");console.log(" Audio stopped and session ended successfully")},Nl=async()=>{var j;if(!(!(t!=null&&t.uid)||!Ze))try{console.log(" Auto-logging session with timezone data"),console.log(" Session start time:",B.formatLocalDateTime(Ze)),console.log(" Session duration:",Math.floor(oe/60),"minutes");const U={date:Ze,durationMinutes:Math.floor(oe/60),type:"mindfulness",soundscape:ce,completed:oe>=$*60,deepStateAchieved:re,moodBefore:$t,targetDuration:$,sessionStartTime:Ze,sessionEndTime:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),notes:r.notes,sentiment:r.notes?(j=Gd(r.notes))==null?void 0:j.score:null};console.log(" Session data being saved:",U);const H=await ir.logMeditation(t.uid,U);console.log(" API Response:",H);const J={...H.meditation,localDate:B.formatLocalDate(H.meditation.date),localDateTime:B.formatLocalDateTime(H.meditation.date),relativeTime:B.getRelativeTime(H.meditation.date),isToday:B.isToday(H.meditation.date)};console.log(" Adding meditation to UI:",J),console.log(" Is today?",J.isToday),console.log(" Local date:",J.localDate),s(ue=>{const Z=[J,...ue];return console.log(" Updated meditations list:",Z.length,"total"),Z}),console.log(" Session auto-logged and added to UI successfully")}catch(U){console.error(" Error auto-logging session:",U),console.error(" Error details:",U.message)}},Vn=j=>{const{name:U,value:H}=j.target;i(J=>({...J,[U]:H}))},$r=async j=>{if(j.preventDefault(),!!(t!=null&&t.uid))try{T(!0),A("");let U;if(r.date){const J=r.date.split("-"),ue=parseInt(J[0]),Z=parseInt(J[1]),me=parseInt(J[2]),je=new Date;U=new Date(ue,Z-1,me,je.getHours(),je.getMinutes(),je.getSeconds())}else U=B.getCurrentLocalTime();const H={...r,date:U,durationMinutes:parseInt(r.durationMinutes),userTimezone:B.getUserTimezone()};if(o)await ir.updateMeditation(t.uid,c,H),s(J=>J.map(ue=>ue.id===c?{...ue,...H,localDate:B.formatLocalDate(U),localDateTime:B.formatLocalDateTime(U),relativeTime:B.getRelativeTime(U),isToday:B.isToday(U)}:ue)),a(!1),d(null);else{const J=Gd(r.notes);b(J),x(!!J);const ue={...H,sentiment:J?J.score:null},Z=await ir.logMeditation(t.uid,ue),me={...Z.meditation,localDate:B.formatLocalDate(Z.meditation.date),localDateTime:B.formatLocalDateTime(Z.meditation.date),relativeTime:B.getRelativeTime(Z.meditation.date),isToday:B.isToday(Z.meditation.date)};s(je=>[me,...je])}i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),A("")}catch(U){console.error("Error saving meditation:",U),A(o?"Failed to update meditation":"Failed to log meditation")}finally{T(!1)}},wa=j=>{var U;console.log(" Editing meditation from:",B.formatLocalDateTime(j.date)),i({date:B.formatLocalDate(j.date),durationMinutes:((U=j.durationMinutes)==null?void 0:U.toString())||"",type:j.type||"mindfulness",soundscape:j.soundscape||"silence",moodBefore:j.moodBefore||"",moodAfter:j.moodAfter||"",notes:j.notes||""}),a(!0),d(j.id)},Ea=async j=>{if(!(t!=null&&t.uid))return;const U=n.find(J=>J.id===j),H=`Are you sure you want to delete the meditation session from ${(U==null?void 0:U.localDateTime)||"unknown time"}?`;if(window.confirm(H))try{await ir.deleteMeditation(t.uid,j),s(J=>J.filter(ue=>ue.id!==j)),console.log(" Meditation deleted successfully")}catch(J){console.error("Error deleting meditation:",J),A("Failed to delete meditation")}},Mn=j=>{const U=Math.floor(j/60),H=j%60;return`${U}:${H.toString().padStart(2,"0")}`};return f?u.jsxs("div",{className:"meditation-loading",children:[u.jsx("p",{children:"Loading meditations..."}),u.jsxs("small",{children:["Timezone: ",B.getUserTimezone()]})]}):u.jsxs("div",{className:"meditation-page",children:[R&&u.jsxs("div",{className:"session-interface",children:[u.jsxs("div",{className:"session-header",children:[u.jsx("h2",{children:" Meditation Session"}),u.jsxs("div",{className:"session-info",children:[u.jsxs("div",{className:"session-soundscape",children:[Qs[ce].icon," ",Qs[ce].name]}),u.jsxs("div",{className:"session-time-info",children:["Started: ",Ze?B.formatLocalTime(Ze):"Now",u.jsx("br",{}),u.jsx("small",{children:B.getUserTimezone()})]}),u.jsx("div",{className:"wake-lock-status",children:Wh?u.jsx("span",{className:"wake-lock-active",title:"Screen will stay awake during meditation",children:" Screen Awake"}):$i?u.jsx("span",{className:"wake-lock-inactive",title:"Screen may sleep during meditation",children:" Screen May Sleep"}):u.jsx("span",{className:"wake-lock-unsupported",title:"Wake lock not supported on this device",children:" Using Fallback"})})]})]}),u.jsxs("div",{className:"session-timer",children:[u.jsxs("div",{className:"time-display",children:[u.jsx("span",{className:"current-time",children:Mn(oe)}),u.jsxs("span",{className:"target-time",children:["/ ",Mn($*60)]})]}),u.jsx("div",{className:"progress-ring",children:u.jsx("div",{className:"meditation-progress-fill",style:{background:`conic-gradient(#4CAF50 ${oe/($*60)*360}deg, #eee 0deg)`}})})]}),u.jsxs("div",{className:"session-status",children:[re&&u.jsxs("div",{className:"deep-state-indicator",children:[" Deep State Achieved at ",B.formatLocalTime(new Date)," "]}),u.jsx("div",{className:"neurological-info",children:u.jsx("p",{children:Qs[ce].neurological})})]}),u.jsxs("div",{className:"session-controls",children:[u.jsxs("button",{onClick:Qh,className:"pause-btn",children:[G?"":""," ",G?"Resume":"Pause"]}),u.jsx("button",{onClick:Hi,className:"stop-btn",children:" End Session"})]})]}),!R&&u.jsxs("div",{className:"quick-start",children:[u.jsx("h1",{className:"meditation-title",children:" Meditation Studio"}),u.jsxs("p",{className:"subtitle",children:["Neurologically optimized for deep meditation states",u.jsx("br",{})]}),u.jsxs("div",{className:"soundscape-section",children:[u.jsx("h3",{children:" Step 1: Choose Your Soundscape"}),u.jsx("div",{className:"soundscape-instructions",children:u.jsx("p",{children:"Select a soundscape below (or choose silence for quiet meditation). Click again to deselect."})}),u.jsx("div",{className:"soundscape-grid",children:Object.entries(Qs).map(([j,U])=>u.jsxs("div",{className:`soundscape-option ${U.premium?"premium":""} ${ce===j?"selected":""} ${U.premium&&!e?"locked":""}`,children:[u.jsxs("div",{className:"soundscape-header",children:[u.jsx("span",{className:"soundscape-icon",children:U.icon}),U.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsxs("div",{className:"soundscape-content",onClick:H=>{H.stopPropagation(),H.preventDefault(),console.log(" Soundscape clicked:",j,"current selection:",ce),!U.premium||e?ce===j?(console.log(" Deselecting soundscape to silence"),ke("silence")):(console.log(" Selecting soundscape:",j),ke(j)):alert("This soundscape requires Clarity Premium. Upgrade to access premium features!")},children:[u.jsx("h4",{children:U.name}),u.jsx("p",{className:"soundscape-description",children:U.description}),u.jsx("small",{className:"neurological-note",children:U.neurological})]}),U.premium&&!e&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"lock-icon",children:""})})]},j))})]}),u.jsxs("div",{className:"quick-start-grid",children:[u.jsx("h3",{children:" Step 2: Choose Your Session"}),Object.entries(gu).map(([j,U])=>u.jsxs("div",{className:`meditation-type ${U.premium?"premium":""}`,children:[u.jsxs("div",{className:"type-header",children:[u.jsx("span",{className:"type-icon",children:U.icon}),u.jsx("h3",{children:U.name}),U.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsx("p",{className:"type-description",children:U.description}),u.jsx("div",{className:"duration-options",children:U.duration.map(H=>u.jsxs("button",{onClick:()=>{$t||Jt(prompt("How are you feeling right now? ()")||""),Kh(H,j,ce)},className:"duration-btn",disabled:U.premium&&!e,children:[H,"min"]},H))})]},j))]})]}),!R&&u.jsxs("div",{className:"meditation-card",children:[u.jsx("h2",{className:"form-title",children:o?"Edit Meditation Session":"Manually Log Session"}),S&&u.jsx("div",{className:"error-message",children:S}),u.jsxs("form",{onSubmit:$r,className:"meditation-form",children:[u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date (",B.getUserTimezone(),")",u.jsx("input",{type:"date",name:"date",value:r.date,onChange:Vn,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:r.durationMinutes,onChange:Vn,className:"form-input",min:"1",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Meditation Type",u.jsx("select",{name:"type",value:r.type,onChange:Vn,className:"form-input",children:Object.entries(gu).map(([j,U])=>u.jsx("option",{value:j,children:U.name},j))})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Soundscape Used",u.jsx("select",{name:"soundscape",value:r.soundscape,onChange:Vn,className:"form-input",children:Object.entries(Qs).map(([j,U])=>u.jsx("option",{value:j,children:U.name},j))})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood Before",u.jsxs("select",{name:"moodBefore",value:r.moodBefore,onChange:Vn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"",children:" Happy"}),u.jsx("option",{value:"",children:" Sad"}),u.jsx("option",{value:"",children:" Tired"}),u.jsx("option",{value:"",children:" Frustrated"}),u.jsx("option",{value:"",children:" Peaceful"}),u.jsx("option",{value:"",children:" Thoughtful"}),u.jsx("option",{value:"",children:" Excited"}),u.jsx("option",{value:"",children:" Anxious"})]})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood After",u.jsxs("select",{name:"moodAfter",value:r.moodAfter,onChange:Vn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"",children:" Happy"}),u.jsx("option",{value:"",children:" Sad"}),u.jsx("option",{value:"",children:" Tired"}),u.jsx("option",{value:"",children:" Frustrated"}),u.jsx("option",{value:"",children:" Peaceful"}),u.jsx("option",{value:"",children:" Thoughtful"}),u.jsx("option",{value:"",children:" Excited"}),u.jsx("option",{value:"",children:" Anxious"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:r.notes,onChange:Vn,className:"form-input form-textarea",placeholder:"How did the session feel? Any insights?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:g,children:g?o?"Updating...":"Logging...":o?"Update Session":"Log Session"}),o&&u.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{a(!1),d(null),i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})},disabled:g,children:"Cancel"})]})]})]}),C&&v&&u.jsx("div",{className:"sentiment-modal-overlay",children:u.jsxs("div",{className:"sentiment-modal",children:[u.jsxs("span",{className:"sentiment-message",children:[C.score>0&&"Your note sounds positive! ",C.score<0&&"Your note sounds a bit negative. ",C.score===0&&"Your note sounds neutral. "]}),u.jsx("button",{className:"close-modal-btn",onClick:()=>x(!1),children:"Dismiss"})]})}),!R&&u.jsxs("div",{className:"meditation-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Sessions (",Ur.length,")",u.jsx("br",{}),u.jsxs("small",{children:[B.formatLocalDate(new Date)," - ",B.getUserTimezone()]})]}),Ur.length===0?u.jsxs("p",{className:"no-sessions",children:["No meditation sessions today. Start your mindfulness journey!",u.jsx("br",{}),u.jsxs("small",{children:["Local time: ",B.formatLocalDateTime(new Date)]})]}):u.jsx("ul",{className:"log-list",children:Ur.map(j=>{var U,H,J,ue;return u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"meditation-info",children:[u.jsxs("div",{className:"meditation-header",children:[u.jsxs("span",{className:"meditation-type",children:[(U=gu[j.type])==null?void 0:U.icon," ",((H=gu[j.type])==null?void 0:H.name)||j.type]}),u.jsxs("span",{className:"meditation-time",children:[j.localDateTime,u.jsxs("small",{children:[" (",j.relativeTime,")"]})]})]}),u.jsxs("div",{className:"meditation-details",children:[u.jsxs("span",{className:"meditation-duration",children:[j.durationMinutes," min"]}),u.jsxs("span",{className:"meditation-soundscape",children:[(J=Qs[j.soundscape])==null?void 0:J.icon," ",(ue=Qs[j.soundscape])==null?void 0:ue.name]}),j.deepStateAchieved&&u.jsx("span",{className:"deep-state-badge",children:" Deep State"}),j.moodBefore&&j.moodAfter&&u.jsxs("span",{className:"mood-change",children:[j.moodBefore,"  ",j.moodAfter]})]}),j.notes&&u.jsx("div",{className:"meditation-notes",children:j.notes})]}),u.jsxs("div",{className:"meditation-actions",children:[u.jsx("button",{onClick:()=>wa(j),className:"edit-button",disabled:g,children:"Edit"}),u.jsx("button",{onClick:()=>Ea(j.id),className:"delete-button",disabled:g,children:"Delete"})]})]},j.id)})})]}),!R&&u.jsxs("div",{className:"recommended-videos",children:[u.jsx("h2",{className:"recommended-title",children:" Guided Meditation Videos"}),u.jsxs("p",{className:"timezone-note",children:["Perfect for any time of day in ",B.getUserTimezone()]}),u.jsxs("div",{className:"video-tiles",children:[u.jsxs("a",{href:"https://www.youtube.com/watch?v=VpHz8Mb13_Y",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:""}),u.jsx("p",{className:"video-title",children:"Relaxation and Positivity"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=CqnWMPuyT0g",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:""}),u.jsx("p",{className:"video-title",children:"Self Love"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=056qll-07ak",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:""}),u.jsx("p",{className:"video-title",children:"Stop Thinking"})]})]})]}),u.jsx(Px,{feature:"exclusive meditation experiences",children:u.jsxs("div",{className:"premium-meditation-features",children:[u.jsx("h3",{children:" Premium Meditation Experience"}),u.jsx("p",{children:"Unlock advanced features designed by neuroscientists:"}),u.jsxs("ul",{children:[u.jsx("li",{children:" Premium binaural soundscapes"}),u.jsx("li",{children:" Advanced session analytics"}),u.jsx("li",{children:" Personalized meditation recommendations"}),u.jsx("li",{children:" Smart session reminders based on your timezone"}),u.jsx("li",{children:" Mood tracking and insights"})]})]})})]})}function E3e(){const{user:t}=In(),[e,n]=P.useState([]),[s,r]=P.useState({date:"",amount:"",type:"water",notes:""}),[i,o]=P.useState(!1),[a,c]=P.useState(null),[d,f]=P.useState(!0),[m,g]=P.useState(!1),[T,S]=P.useState(""),[A,C]=P.useState(0),[b,v]=P.useState(64),[x,D]=P.useState(null),[L,M]=P.useState(!1);new Date().toISOString().split("T")[0],P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const $=await en.fetchWaterIntakeByUser(t.uid);n($.waterIntakes||[]);const le=await en.getTodayWaterIntake(t.uid);C(le.totalOz||0),v(64)}catch($){console.error("Error fetching water data:",$),S("Failed to load water intake data")}finally{f(!1)}})()},[t]);const w=X=>{const{name:$,value:le}=X.target;r(G=>({...G,[$]:le}))},y=async X=>{if(X.preventDefault(),console.log(" Water submit started"),console.log(" Form data:",s),console.log(" Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error(" No user ID found"),S("Please log in to save water intake");return}if(!s.amount||!s.date){S("Please fill in all required fields");return}try{g(!0),S("");let $;if(s.date){const te=s.date.split("-"),re=parseInt(te[0]),Te=parseInt(te[1]),ce=parseInt(te[2]),ke=new Date;console.log(" Water date parsing debug:"),console.log("  Form input:",s.date),console.log("  Split parts:",te),console.log("  Parsed year:",re),console.log("  Parsed month (human readable):",Te),console.log("  Parsed day:",ce),console.log("  Month for Date constructor (0-indexed):",Te-1),$=new Date(re,Te-1,ce,ke.getHours(),ke.getMinutes(),ke.getSeconds()),console.log(" Created water date:",$),console.log(" Verify - Year:",$.getFullYear()),console.log(" Verify - Month (0-indexed):",$.getMonth()),console.log(" Verify - Month (human):",$.getMonth()+1),console.log(" Verify - Day:",$.getDate()),console.log(" Final formatted:",$.toLocaleDateString())}else $=new Date;const le={date:$,amount:parseFloat(s.amount),type:s.type,notes:s.notes};if(console.log(" Final water data:",le),console.log(" Will be saved as:",le.date.toLocaleDateString()),i)await en.updateWaterIntake(t.uid,a,le),n(te=>te.map(re=>re.id===a?{...re,...le}:re)),o(!1),c(null);else{const te=Gd(s.notes);D(te),M(!!te);const re={...le,sentiment:te?te.score:null},Te=await en.logWaterIntake(t.uid,re);n(ce=>[Te.waterIntake,...ce])}const G=await en.getTodayWaterIntake(t.uid);C(G.totalOz||0),r({date:"",amount:"",type:"water",notes:""}),console.log(" Water intake logged successfully!")}catch($){console.error(" Water logging error:",$),S(i?"Failed to update water intake":"Failed to log water intake")}finally{g(!1)}},I=X=>{var le;o(!0),c(X.id);const $=X.date instanceof Date?X.date.toISOString().split("T")[0]:new Date(X.date).toISOString().split("T")[0];r({date:$,amount:((le=X.amount)==null?void 0:le.toString())||"",type:X.type||"water",notes:X.notes||""})},E=async X=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this water intake?"))try{await en.deleteWaterIntake(t.uid,X),n(le=>le.filter(G=>G.id!==X));const $=await en.getTodayWaterIntake(t.uid);C($.totalOz||0)}catch($){console.error("Error deleting water intake:",$),S("Failed to delete water intake")}},N=()=>{o(!1),c(null),r({date:"",amount:"",type:"water",notes:""})},R=async X=>{if(t!=null&&t.uid)try{g(!0);const $=new Date,le=new Date($.getFullYear(),$.getMonth(),$.getDate(),$.getHours(),$.getMinutes(),$.getSeconds());console.log(" Quick add date:",le),console.log(" Quick add formatted:",le.toLocaleDateString()),await en.logWaterIntake(t.uid,{date:le,amount:X,type:"water",notes:"",sentiment:null});const G=await en.fetchWaterIntakeByUser(t.uid);n(G.waterIntakes||[]);const te=await en.getTodayWaterIntake(t.uid);C(te.totalOz||0),console.log(" Quick add water successful!")}catch($){console.error(" Error quick adding water:",$),S("Failed to log water intake")}finally{g(!1)}},k=e.filter(X=>{const $=X.date instanceof Date?X.date:new Date(X.date),le=B.isToday($);return console.log(" Comparing dates:",{waterDate:$.toLocaleDateString(),today:new Date().toLocaleDateString(),isToday:le,waterDateObj:$,waterDateType:typeof X.date}),le}),oe=Math.min(A/b*100,100);return d?u.jsx("div",{className:"water-loading",children:"Loading water data..."}):u.jsxs("div",{className:"water-page",children:[u.jsxs("div",{className:"water-progress",children:[u.jsx("h2",{children:"Daily Hydration Progress"}),u.jsx("div",{className:"progress-info",children:u.jsx("div",{className:"water-progress-bar",children:u.jsx("div",{className:"water-progress-fill",style:{width:`${oe}%`}})})}),A>=b&&u.jsx("div",{className:"goal-achieved",children:" Daily goal achieved! Great job! "})]}),u.jsxs("div",{className:"quick-add-section",children:[u.jsx("h3",{children:"Quick Add"}),u.jsxs("div",{className:"quick-add-buttons",children:[u.jsxs("button",{onClick:()=>R(8),className:"quick-add-btn",disabled:m,children:["8 oz",u.jsx("br",{}),u.jsx("small",{children:"Glass"})]}),u.jsxs("button",{onClick:()=>R(16),className:"quick-add-btn",disabled:m,children:["16 oz",u.jsx("br",{}),u.jsx("small",{children:"Bottle"})]}),u.jsxs("button",{onClick:()=>R(20),className:"quick-add-btn",disabled:m,children:["20 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Bottle"})]}),u.jsxs("button",{onClick:()=>R(32),className:"quick-add-btn",disabled:m,children:["32 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Cup"})]})]})]}),u.jsxs("div",{className:"water-card",children:[u.jsx("h1",{className:"water-title",children:i?"Edit Water Intake":"Log Water Intake"}),T&&u.jsx("div",{className:"error-message",children:T}),u.jsxs("form",{onSubmit:y,className:"water-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:s.date,onChange:w,className:"form-input",required:!0})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Amount (oz)",u.jsx("input",{type:"number",name:"amount",value:s.amount,onChange:w,className:"form-input",min:"0.1",step:"0.1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Drink Type",u.jsxs("select",{name:"type",value:s.type,onChange:w,className:"form-input",children:[u.jsx("option",{value:"water",children:"Water"}),u.jsx("option",{value:"tea",children:"Tea"}),u.jsx("option",{value:"coffee",children:"Coffee"}),u.jsx("option",{value:"juice",children:"Juice"}),u.jsx("option",{value:"sports_drink",children:"Sports Drink"}),u.jsx("option",{value:"other",children:"Other"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("input",{type:"text",name:"notes",value:s.notes,onChange:w,className:"form-input",placeholder:"e.g., with lemon, iced, etc."})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Intake":"Log Water"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:N,disabled:m,children:"Cancel"})]})]})]}),x&&L&&u.jsx("div",{className:"sentiment-modal-overlay",children:u.jsxs("div",{className:"sentiment-modal",children:[u.jsxs("span",{className:"sentiment-message",children:[x.score>0&&"Your note sounds positive! ",x.score<0&&"Your note sounds a bit negative. ",x.score===0&&"Your note sounds neutral. "]}),u.jsx("button",{className:"close-modal-btn",onClick:()=>M(!1),children:"Dismiss"})]})}),u.jsxs("div",{className:"water-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Water Intake (",k.length," entries)"]}),k.length===0?u.jsx("p",{className:"no-intake",children:"No water logged for today. Stay hydrated! "}):u.jsx("ul",{className:"log-list",children:k.map(X=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"water-info",children:[u.jsxs("span",{className:"water-amount",children:[X.amount," oz"]}),u.jsx("span",{className:"water-type",children:X.type}),X.notes&&u.jsx("span",{className:"water-notes",children:X.notes})]}),u.jsxs("div",{className:"water-actions",children:[u.jsx("button",{onClick:()=>I(X),className:"edit-button",disabled:m,children:"Edit"}),u.jsx("button",{onClick:()=>E(X.id),className:"delete-button",disabled:m,children:"Delete"})]})]},X.id))})]})]})}function T3e(){const{user:t,isPremium:e}=In(),[n,s]=P.useState({workout:{current:0,goal:210},water:{current:0,goal:448},meditation:{current:0,goal:105}}),[r,i]=P.useState([]),[o,a]=P.useState(0),[c,d]=P.useState(!0),[f,m]=P.useState(30),[g,T]=P.useState(64),[S,A]=P.useState(15),[C,b]=P.useState(0),[v,x]=P.useState(!1),[D,L]=P.useState(!1),[M,w]=P.useState(!1),[y,I]=P.useState(null),E=()=>{const we=new Date().getDay();return we===0?0:7-we};P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{d(!0);const ge=(await Ee.getUserProfile(t.uid)).user;m(ge.exerciseGoalMinutes||30),T(ge.waterGoalOz||64),A(ge.meditationGoalMinutes||15);const[Re,jt,ss]=await Promise.all([fi.getWorkoutSummary(t.uid,7),en.getWaterSummary(t.uid,7),ir.getMeditationSummary(t.uid,7)]);s({workout:{current:Re.totalMinutes||0,goal:(ge.exerciseGoalMinutes||30)*7},water:{current:jt.totalOz||0,goal:(ge.waterGoalOz||64)*7},meditation:{current:ss.totalMinutes||0,goal:(ge.meditationGoalMinutes||15)*7}}),setTimeout(()=>ce(),100)}catch(we){console.error("Error fetching weekly data:",we)}finally{d(!1)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const we=await Ee.getPoints(t.uid);b(we)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const we=await Ee.isChallengeCompleted(t.uid,"weekly_meditation_3","weekly");x(we)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const we=await Ee.isChallengeCompleted(t.uid,"diamond_week","weekly"),ge=await Ee.isChallengeCompleted(t.uid,"perfect_balance","weekly");L(we),w(ge)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const we=await Ee.getUserProfile(t.uid);I(we.user.premiumSoundscapeUntil?new Date(we.user.premiumSoundscapeUntil):null)}})()},[t]);const N=new Date,R=C>=150&&(!y||y<N),k=y&&y>N,oe=async()=>{if(!(t!=null&&t.uid)||!R)return;await Ee.deductPoints(t.uid,150);const se=new Date;se.setDate(se.getDate()+7),await Ee.updateUserProfile(t.uid,{premiumSoundscapeUntil:se}),I(se);const we=await Ee.getPoints(t.uid);b(we),alert("You unlocked Premium Soundscape for 1 week!")},X=n.meditation.current/(S||15),$=X>=3,le=n.workout.current/n.workout.goal>=1.25&&n.water.current/n.water.goal>=1.25&&n.meditation.current/n.meditation.goal>=1.25,G=n.workout.current/n.workout.goal>=1&&n.water.current/n.water.goal>=1&&n.meditation.current/n.meditation.goal>=1,te=async()=>{if(!(t!=null&&t.uid)||v||!$)return;await Ee.addPoints(t.uid,50),await Ee.completeChallenge(t.uid,"weekly_meditation_3","weekly"),x(!0);const se=await Ee.getPoints(t.uid);b(se),alert("You claimed 50 points for the Weekly Meditation Challenge!")},re=async()=>{if(!(t!=null&&t.uid)||D||!le)return;await Ee.addPoints(t.uid,200),await Ee.completeChallenge(t.uid,"diamond_week","weekly"),L(!0);const se=await Ee.getPoints(t.uid);b(se),alert("You claimed 200 points for Diamond Week Challenge!")},Te=async()=>{if(!(t!=null&&t.uid)||M||!G)return;await Ee.addPoints(t.uid,150),await Ee.completeChallenge(t.uid,"perfect_balance","weekly"),w(!0);const se=await Ee.getPoints(t.uid);b(se),alert("You claimed 150 points for Perfect Balance Challenge!")},ce=()=>{const se=[];Object.entries(n).forEach(([we,ge])=>{const Re=ge.current/ge.goal*100;Re>=125?se.push({type:we,level:"diamond",percentage:Re}):Re>=100?se.push({type:we,level:"gold",percentage:Re}):Re>=75?se.push({type:we,level:"silver",percentage:Re}):Re>=50&&se.push({type:we,level:"bronze",percentage:Re})}),i(se)},ke=se=>{switch(se){case"diamond":return"";case"gold":return"";case"silver":return"";case"bronze":return"";default:return""}},$t=se=>se>=100?"var(--sage-500)":se>=75?"var(--mint)":se>=50?"#FFD700":"var(--sage-300)",Jt=se=>se>=100,Ze=async()=>{if(t!=null&&t.uid)try{d(!0);const se=f*7,we=g*7,ge=S*7,Re=await Ee.updateUserProfile(t.uid,{exerciseGoalMinutes:f,meditationGoalMinutes:S,waterGoalOz:g});s(jt=>({...jt,workout:{...jt.workout,goal:se},water:{...jt.water,goal:we},meditation:{...jt.meditation,goal:ge}})),setTimeout(()=>ce(),100),console.log(" Goals updated successfully")}catch(se){console.error(" Error updating goals:",se)}finally{d(!1)}};if(c)return u.jsx("div",{className:"goals-loading",children:"Loading weekly goals..."});const qt=E();return u.jsxs("div",{className:"goals-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:""})," ",C," Points"]}),u.jsxs("div",{className:"weekly-header",children:[u.jsx("h1",{className:"goals-title",children:"Weekly Goals"}),u.jsx("p",{className:"goals-subtitle",children:"Track your progress and earn rewards"}),u.jsxs("div",{className:"week-info",children:[u.jsx("span",{className:"week-label",children:"Current Week"}),u.jsx("span",{className:"days-remaining",children:qt===0?"Last day!":`${qt} days remaining`})]})]}),u.jsx("div",{className:"weekly-progress",children:Object.entries(n).map(([se,we])=>{const ge=Math.min(we.current/we.goal*100,100),Re=Jt(ge),jt=2*Math.PI*45,ss=jt,Vs=jt-ge/100*jt;return u.jsxs("div",{className:`weekly-ring ${Re?"completed":""}`,children:[u.jsxs("div",{className:"ring-container",children:[u.jsxs("svg",{className:"progress-ring",width:"120",height:"120",children:[u.jsx("circle",{className:"ring-background",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:"var(--sage-100)",strokeWidth:"8"}),u.jsx("circle",{className:"ring-progress",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:$t(ge),strokeWidth:"8",strokeLinecap:"round",strokeDasharray:ss,strokeDashoffset:Vs,transform:"rotate(-90 60 60)"})]}),u.jsxs("div",{className:"ring-content",children:[u.jsx("span",{className:"ring-value",children:we.current}),u.jsxs("span",{className:"ring-goal",children:["/ ",we.goal]}),u.jsx("span",{className:"ring-label",children:se})]})]}),u.jsxs("div",{className:"ring-percentage",children:[Math.round(ge),"%"]})]},se)})}),u.jsxs("div",{className:"achievement-gallery",children:[u.jsx("h2",{className:"section-title",children:"This Week's Achievements"}),r.length===0?u.jsxs("div",{className:"no-achievements",children:[u.jsx("span",{className:"no-achievement-icon",children:""}),u.jsx("p",{children:"Keep going! Your first achievement is waiting."})]}):u.jsx("div",{className:"achievements-grid",children:r.map((se,we)=>u.jsxs("div",{className:`achievement-card ${se.level}`,children:[u.jsx("div",{className:"achievement-icon",children:ke(se.level)}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:se.level.toUpperCase()}),u.jsx("p",{children:se.type.toUpperCase()}),u.jsxs("span",{className:"achievement-percentage",children:[Math.round(se.percentage),"%"]})]}),!e&&se.level==="diamond"&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"premium-badge",children:"PRO"})})]},we))})]}),u.jsxs("div",{className:"streak-section",children:[u.jsx("h2",{className:"section-title",children:"Weekly Streak"}),u.jsxs("div",{className:"streak-card",children:[u.jsx("div",{className:"streak-icon",children:""}),u.jsxs("div",{className:"streak-info",children:[u.jsx("span",{className:"streak-number",children:o}),u.jsx("span",{className:"streak-label",children:"Week Streak"})]}),u.jsxs("div",{className:"streak-next",children:[u.jsx("span",{children:"Next reward at 4 weeks"}),!e&&u.jsx("span",{className:"premium-hint",children:"PRO"})]})]})]}),u.jsxs("div",{className:"reward-marketplace",children:[u.jsx("h2",{className:"section-title",children:"Reward Marketplace"}),e?u.jsxs("div",{className:"rewards-grid",children:[u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:""}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Premium Soundscape"}),u.jsx("p",{children:"Unlock for 1 week"}),u.jsx("span",{className:"reward-cost",children:"150 points"}),u.jsx("button",{className:"claim-btn",onClick:oe,disabled:!R,children:k?"Active":"Redeem"}),k&&u.jsxs("div",{className:"reward-status",children:["Active until ",y==null?void 0:y.toLocaleDateString()]})]})]}),u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:""}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Custom Badge"}),u.jsx("p",{children:"Design your own"}),u.jsx("span",{className:"reward-cost",children:"100 points"})]})]})]}):u.jsxs("div",{className:"premium-cta-card",children:[u.jsxs("div",{className:"cta-header",children:[u.jsx("h3",{children:"Unlock Premium Rewards"}),u.jsx("span",{className:"cta-price",children:"$4.99/month"})]}),u.jsxs("div",{className:"premium-features",children:[u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:""}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:""}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:""}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:""}),u.jsx("span",{children:"Challenge competitions"})]})]}),u.jsx("button",{className:"upgrade-button",onClick:il,children:"Upgrade with Stripe"})]})]}),u.jsxs("div",{className:"weekly-challenges",children:[u.jsx("h2",{className:"section-title",children:"Weekly Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Mindful Monday"}),u.jsx("span",{className:"challenge-reward",children:"+50 points"}),u.jsx("button",{className:"claim-btn",onClick:te,disabled:!$||v,children:v?"Claimed":"Claim"})]}),u.jsx("p",{className:"challenge-description",children:"Complete 3 meditation sessions this week"}),u.jsxs("div",{className:"challenge-progress",children:[u.jsx("div",{className:"challenge-bar",children:u.jsx("div",{className:"challenge-fill",style:{width:`${Math.min(X/3*100,100)}%`}})}),u.jsxs("span",{className:"challenge-status",children:[Math.floor(X),"/3 completed"]})]}),!e&&u.jsx("div",{className:"challenge-premium",children:u.jsx("span",{children:"Join Premium for exclusive challenges"})})]})]}),u.jsxs("div",{className:"custom-goals-section",children:[u.jsx("h2",{className:"section-title",children:"Goal Customization"}),u.jsxs("div",{className:"custom-goals-form",children:[u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Workout Goal: ",f," minutes"]}),u.jsx("input",{type:"range",min:"15",max:"120",value:f,onChange:se=>m(parseInt(se.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",f*7," minutes"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Water Goal: ",g," oz"]}),u.jsx("input",{type:"range",min:"32",max:"128",value:g,onChange:se=>T(parseInt(se.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",g*7," oz"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Meditation Goal: ",S," minutes"]}),u.jsx("input",{type:"range",min:"5",max:"60",value:S,onChange:se=>A(parseInt(se.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",S*7," minutes"]})]}),u.jsx("button",{className:"save-goals-btn",onClick:Ze,disabled:c,children:c?"Saving...":"Save Custom Goals"})]})]}),u.jsxs("div",{className:"premium-challenges",children:[u.jsx("h2",{className:"section-title",children:"Exclusive Challenges"}),u.jsx(Px,{feature:"premium challenges",className:"feature-tease",children:u.jsxs("div",{className:"challenge-preview",children:[u.jsxs("div",{className:"challenge-card premium",children:[u.jsx("div",{className:"challenge-icon",children:""}),u.jsxs("div",{className:"challenge-content",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Diamond Week Challenge"}),u.jsx("span",{className:"challenge-reward",children:"+200 points"}),u.jsx("button",{className:"claim-btn",onClick:re,disabled:!le||D,children:D?"Claimed":"Claim"})]}),u.jsx("p",{children:"Complete 125% of all goals for 7 consecutive days"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:" 1,247 participants this week"})})]})]}),u.jsxs("div",{className:"challenge-card premium",children:[u.jsx("div",{className:"challenge-icon",children:""}),u.jsxs("div",{className:"challenge-content",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Perfect Balance"}),u.jsx("span",{className:"challenge-reward",children:"+150 points"}),u.jsx("button",{className:"claim-btn",onClick:Te,disabled:!G||M,children:M?"Claimed":"Claim"})]}),u.jsx("p",{children:"Hit exactly 100% on all three goals in one day"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:" 892 members completed"})})]})]})]})})]})]})}function I3e(){const{user:t,loading:e,isPremium:n,userSubscription:s,trialDaysRemaining:r,upgradeToPremium:i,cancelSubscription:o}=In(),[a,c]=P.useState(null),[d,f]=P.useState({username:"",email:"",firstName:"",lastName:"",exerciseGoalMinutes:"",waterGoalOz:"",meditationGoalMinutes:""}),[m,g]=P.useState(!0),[T,S]=P.useState(!1),[A,C]=P.useState(""),[b,v]=P.useState("");P.useEffect(()=>{const M=async()=>{if(t!=null&&t.uid)try{g(!0);const w=await Ee.getUserProfile(t.uid);c(w.user)}catch(w){console.error("Error fetching profile:",w),v("Failed to load profile data")}finally{g(!1)}};t!=null&&t.uid&&M()},[t]),P.useEffect(()=>{a&&f({username:a.username||"",email:a.email||"",firstName:a.firstName||"",lastName:a.lastName||"",exerciseGoalMinutes:a.exerciseGoalMinutes||"",waterGoalOz:a.waterGoalOz||"",meditationGoalMinutes:a.meditationGoalMinutes||""})},[a]);const x=M=>{const{name:w,value:y}=M.target;f(I=>({...I,[w]:y}))},D=async M=>{if(M.preventDefault(),!!(t!=null&&t.uid)){S(!0),v(""),C("");try{console.log("Submitting profile update:",d);const w={...d,exerciseGoalMinutes:parseInt(d.exerciseGoalMinutes)||30,waterGoalOz:parseInt(d.waterGoalOz)||64,meditationGoalMinutes:parseInt(d.meditationGoalMinutes)||10};await Ee.updateUserProfile(t.uid,w),c({...a,...w}),C("Profile updated successfully!"),setTimeout(()=>C(""),3e3)}catch(w){console.error("Error updating profile:",w),v("Failed to update profile. Please try again.")}finally{S(!1)}}},L=()=>{a&&f({username:a.username||"",email:a.email||"",firstName:a.firstName||"",lastName:a.lastName||"",exerciseGoalMinutes:a.exerciseGoalMinutes||"",waterGoalOz:a.waterGoalOz||"",meditationGoalMinutes:a.meditationGoalMinutes||""}),v(""),C("")};return e||m?u.jsx("div",{className:"profile-loading",children:"Loading profile..."}):t?u.jsx("div",{className:"profile-page",children:u.jsxs("div",{className:"profile-card",children:[u.jsxs("div",{className:"profile-header",children:[u.jsx("h1",{className:"profile-title",children:"Personal Information"}),u.jsx("p",{className:"profile-subtitle",children:"Update your profile and wellness goals"})]}),A&&u.jsx("div",{className:"success-message",children:A}),b&&u.jsx("div",{className:"error-message",children:b}),a&&u.jsxs("form",{onSubmit:D,className:"profile-form",children:[u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Account Information"}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Username",u.jsx("input",{type:"text",name:"username",value:d.username,onChange:x,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Email",u.jsx("input",{type:"email",name:"email",value:d.email,onChange:x,className:"form-input",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["First Name",u.jsx("input",{type:"text",name:"firstName",value:d.firstName,onChange:x,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Last Name",u.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:x,className:"form-input",required:!0})]})})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Daily Wellness Goals"}),u.jsx("p",{className:"section-description",children:"Set your daily targets to track your progress effectively"}),u.jsxs("div",{className:"goals-grid",children:[u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:""}),"Exercise Goal (Minutes)",u.jsx("input",{type:"number",name:"exerciseGoalMinutes",value:d.exerciseGoalMinutes,onChange:x,className:"form-input",min:"1",max:"300",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 30-60 minutes"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:""}),"Water Goal (Oz)",u.jsx("input",{type:"number",name:"waterGoalOz",value:d.waterGoalOz,onChange:x,className:"form-input",min:"1",max:"200",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 64-100 oz"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:""}),"Meditation Goal (Minutes)",u.jsx("input",{type:"number",name:"meditationGoalMinutes",value:d.meditationGoalMinutes,onChange:x,className:"form-input",min:"1",max:"120",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 5-20 minutes"})]})})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"reset-button",onClick:L,disabled:T,children:"Reset Changes"}),u.jsx("button",{type:"submit",className:"save-button",disabled:T,children:T?"Saving...":"Save Profile"})]})]}),u.jsxs("div",{className:"profile-stats",children:[u.jsx("h3",{className:"section-title",children:"Account Summary"}),u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Member Since"}),u.jsx("span",{className:"stat-value",children:a!=null&&a.createdAt?new Date(a.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Profile Updated"}),u.jsx("span",{className:"stat-value",children:a!=null&&a.updatedAt?new Date(a.updatedAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Goals Set"}),u.jsxs("span",{className:"stat-value",children:[[d.exerciseGoalMinutes,d.waterGoalOz,d.meditationGoalMinutes].filter(M=>M&&M>0).length," / 3"]})]})]})]}),u.jsxs("div",{className:"subscription-section",children:[u.jsx("h2",{children:"Your Plan"}),s==="trial"&&u.jsx("div",{className:"trial-status",children:u.jsxs("div",{className:"status-card trial",children:[u.jsx("h3",{children:"Premium Trial"}),u.jsx("p",{children:"You're experiencing the full premium experience!"}),u.jsxs("div",{className:"trial-countdown",children:[u.jsx("span",{className:"days-remaining",children:r}),u.jsx("span",{className:"days-label",children:"days remaining"})]}),u.jsxs("div",{className:"trial-benefits",children:[u.jsx("p",{children:"Currently enjoying:"}),u.jsxs("ul",{children:[u.jsx("li",{children:" Custom goal setting"}),u.jsx("li",{children:" Diamond achievements"}),u.jsx("li",{children:" Premium soundscapes"}),u.jsx("li",{children:" Advanced analytics"})]})]}),u.jsx("button",{onClick:il,className:"keep-premium-btn",children:"Keep Premium Access - $4.99/month"})]})}),s==="premium"&&u.jsx("div",{className:"premium-status",children:u.jsxs("div",{className:"status-card premium",children:[u.jsx("h3",{children:" Premium Member"}),u.jsx("p",{children:"You have access to all premium features!"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Your Premium Benefits:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:o,className:"cancel-btn",children:"Cancel Subscription"})]})}),s==="free"&&u.jsx("div",{className:"free-status",children:u.jsxs("div",{className:"status-card free",children:[u.jsx("h3",{children:" Free Plan"}),u.jsx("p",{children:"Upgrade to unlock premium features and enhance your wellness journey"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Unlock with Premium:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:il,className:"upgrade-btn",children:"Upgrade to Premium - $4.99/month"})]})})]})]})}):u.jsx("div",{className:"profile-error",children:"Please log in to view your profile."})}function x3e({children:t}){const{user:e,loading:n}=In();return console.log(" ProtectedRoute - loading:",n,"user:",!!e),n?u.jsx("div",{className:"loading",children:"Loading..."}):e?(console.log(" Authenticated, rendering protected content"),t):(console.log(" Not authenticated, redirecting to welcome"),u.jsx(yd,{to:"/welcome",replace:!0}))}const b3e="modulepreload",S3e=function(t){return"/"+t},P2={},k3e=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=S3e(c),c in P2)return;P2[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":b3e,d||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((g,T)=>{m.addEventListener("load",g),m.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function A3e(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:r,onRegisteredSW:i,onRegisterError:o}=t;let a,c;const d=async(m=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(a=await k3e(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/sw.js",{scope:"/",type:"classic"})).catch(m=>{o==null||o(m)}),!a)return;a.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),a.addEventListener("installed",m=>{m.isUpdate||s==null||s()}),a.register({immediate:e}).then(m=>{i?i("/sw.js",m):r==null||r(m)}).catch(m=>{o==null||o(m)})}}return c=f(),d}const P3e=()=>{const[t,e]=P.useState(!1),[n,s]=P.useState(!1);P.useEffect(()=>{A3e({onNeedRefresh(){e(!0)},onOfflineReady(){s(!0)},onRegistered(o){console.log("SW registered: ",o)},onRegisterError(o){console.log("SW registration error",o)}})},[]);const r=()=>{s(!1),e(!1)},i=()=>{updateSW(),r()};return!t&&!n?null:u.jsxs("div",{className:"pwa-update-banner",children:[u.jsxs("div",{className:"pwa-update-content",children:[n&&u.jsxs("div",{className:"pwa-message",children:[u.jsx("span",{children:"App ready to work offline"}),u.jsx("button",{onClick:r,className:"pwa-close-btn",children:"Close"})]}),t&&u.jsxs("div",{className:"pwa-message",children:[u.jsx("span",{children:"New content available, click on reload button to update"}),u.jsx("button",{onClick:i,className:"pwa-update-btn",children:"Reload"}),u.jsx("button",{onClick:r,className:"pwa-close-btn",children:"Close"})]})]}),u.jsx("style",{jsx:!0,children:`
        .pwa-update-banner {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: #6c5ce7;
          color: white;
          padding: 1rem;
          z-index: 9999;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .pwa-update-content {
          max-width: 600px;
          margin: 0 auto;
        }
        
        .pwa-message {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 1rem;
        }
        
        .pwa-update-btn, .pwa-close-btn {
          background: rgba(255, 255, 255, 0.2);
          border: 1px solid rgba(255, 255, 255, 0.3);
          color: white;
          padding: 0.5rem 1rem;
          border-radius: 6px;
          cursor: pointer;
          font-size: 0.875rem;
          transition: background-color 0.2s;
        }
        
        .pwa-update-btn:hover, .pwa-close-btn:hover {
          background: rgba(255, 255, 255, 0.3);
        }
        
        @media (max-width: 768px) {
          .pwa-message {
            flex-direction: column;
            gap: 0.5rem;
          }
          
          .pwa-update-btn, .pwa-close-btn {
            width: 100%;
          }
        }
      `})]})},N3e=()=>{const[t,e]=P.useState(!1),[n,s]=P.useState(null),[r,i]=P.useState("unknown"),[o,a]=P.useState(!1);P.useEffect(()=>{const g=window.matchMedia("(display-mode: standalone)").matches,T=localStorage.getItem("clarity-pwa-dismissed")==="true";if(g||T)return;const S=/iPad|iPhone|iPod/.test(navigator.userAgent),A=/Android/.test(navigator.userAgent);i(S?"ios":A?"android":"desktop");const C=v=>{v.preventDefault(),o||(s(v),e(!0),a(!0))},b=()=>{e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",C),window.addEventListener("appinstalled",b),S&&!o){const v=setTimeout(()=>{o||(e(!0),a(!0))},3e3);return()=>clearTimeout(v)}return()=>{window.removeEventListener("beforeinstallprompt",C),window.removeEventListener("appinstalled",b)}},[o]);const c=async()=>{if(n){n.prompt();const{outcome:g}=await n.userChoice;g==="accepted"&&(e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true"))}},d=()=>{e(!1),localStorage.setItem("clarity-pwa-dismissed","true")};if(!t)return null;const m=(()=>{switch(r){case"ios":return{title:"Add Clarity to Home Screen",steps:["Tap the Share button () at the bottom",'Scroll down and tap "Add to Home Screen"','Tap "Add" to install'],icon:""};case"android":return{title:"Install Clarity App",steps:['Tap "Install" below to add to home screen','Or use the menu ()  "Add to Home Screen"'],icon:""};case"desktop":return{title:"Install Clarity App",steps:["Click the install icon () in your browser address bar",'Or use the menu  "Install Clarity"'],icon:""};default:return{title:"Install Clarity",steps:["Look for an install option in your browser menu","Or add this page to your bookmarks"],icon:""}}})();return u.jsxs("div",{className:"install-prompt-overlay",children:[u.jsxs("div",{className:"install-prompt",children:[u.jsx("button",{className:"install-close",onClick:d,children:""}),u.jsxs("div",{className:"install-content",children:[u.jsx("div",{className:"install-icon",children:m.icon}),u.jsx("h3",{children:m.title}),u.jsx("div",{className:"install-steps",children:m.steps.map((g,T)=>u.jsxs("div",{className:"install-step",children:[u.jsx("span",{className:"step-number",children:T+1}),u.jsx("span",{className:"step-text",children:g})]},T))}),r==="android"&&n&&u.jsx("button",{className:"install-button",onClick:c,children:"Install Clarity"}),u.jsx("div",{className:"install-benefits",children:u.jsx("p",{children:" Works offline   Faster loading   App-like experience"})})]})]}),u.jsx("style",{jsx:!0,children:`
        .install-prompt-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          padding: 20px;
        }

        .install-prompt {
          background: white;
          border-radius: 16px;
          padding: 24px;
          max-width: 400px;
          width: 100%;
          position: relative;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .install-close {
          position: absolute;
          top: 12px;
          right: 12px;
          background: none;
          border: none;
          font-size: 20px;
          cursor: pointer;
          color: #666;
          padding: 4px;
        }

        .install-content {
          text-align: center;
        }

        .install-icon {
          font-size: 48px;
          margin-bottom: 16px;
        }

        .install-content h3 {
          color: #6b8069;
          margin-bottom: 20px;
          font-size: 20px;
        }

        .install-steps {
          text-align: left;
          margin-bottom: 20px;
        }

        .install-step {
          display: flex;
          align-items: center;
          margin-bottom: 12px;
          padding: 8px 0;
        }

        .step-number {
          background: #6b8069;
          color: white;
          width: 24px;
          height: 24px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 12px;
          font-weight: bold;
          margin-right: 12px;
          flex-shrink: 0;
        }

        .step-text {
          color: #333;
          font-size: 14px;
          line-height: 1.4;
        }

        .install-button {
          background: #6b8069;
          color: white;
          border: none;
          border-radius: 12px;
          padding: 12px 24px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          margin-bottom: 16px;
          transition: background-color 0.2s;
        }

        .install-button:hover {
          background: #556b54;
        }

        .install-benefits {
          background: #f6f7f6;
          border-radius: 8px;
          padding: 12px;
        }

        .install-benefits p {
          color: #6b8069;
          font-size: 12px;
          margin: 0;
        }

        @media (max-width: 480px) {
          .install-prompt {
            margin: 20px;
            padding: 20px;
          }
        }
      `})]})},C3e=()=>{const[t,e]=P.useState(!1),[n,s]=P.useState(null),[r,i]=P.useState(!1),[o,a]=P.useState(!1);P.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const d=localStorage.getItem("clarity-pwa-dismissed")==="true",f=localStorage.getItem("clarity-pwa-installed")==="true";if(d||f)return;const m=S=>{S.preventDefault(),o||(s(S),e(!0),a(!0))},g=()=>{i(!0),e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",m),window.addEventListener("appinstalled",g),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!r&&!o){const S=setTimeout(()=>{o||(e(!0),a(!0))},5e3);return()=>clearTimeout(S)}return()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",g)}},[r,o]);const c=async()=>{if(n){n.prompt();const{outcome:d}=await n.userChoice;d==="accepted"&&(i(!0),e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true"))}else alert('To install: Use your browser menu  "Add to Home Screen" or "Install App"')};return!t||r?null:u.jsxs("div",{className:"floating-install-button",onClick:c,children:[u.jsx("div",{className:"install-icon",children:""}),u.jsx("span",{className:"install-text",children:"Install"}),u.jsx("style",{jsx:!0,children:`
        .floating-install-button {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background: #6b8069;
          color: white;
          border-radius: 50px;
          padding: 12px 20px;
          display: flex;
          align-items: center;
          gap: 8px;
          cursor: pointer;
          box-shadow: 0 4px 12px rgba(107, 128, 105, 0.3);
          z-index: 1000;
          transition: all 0.2s ease;
          font-weight: 600;
          font-size: 14px;
        }

        .floating-install-button:hover {
          background: #556b54;
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(107, 128, 105, 0.4);
        }

        .floating-install-button:active {
          transform: translateY(0);
        }

        .install-icon {
          font-size: 18px;
        }

        .install-text {
          white-space: nowrap;
        }

        @media (max-width: 480px) {
          .floating-install-button {
            bottom: 16px;
            right: 16px;
            padding: 10px 16px;
            font-size: 13px;
          }
        }
      `})]})},qf={worry_worm:{name:"Worry Worm",icon:"",color:"#8B4513",size:"small",technique:"breathing",description:"Those nagging worries that won't go away",tamedMessage:"Worry Worm is now peaceful! "},panic_bear:{name:"Panic Bear",icon:"",color:"#DC143C",size:"large",technique:"progressive_relaxation",description:"Big scary feelings that make your heart race",tamedMessage:"Panic Bear is now your gentle guardian! "},overthink_octopus:{name:"Overthink Octopus",icon:"",color:"#4B0082",size:"medium",technique:"mindfulness",description:"Eight arms of spiraling thoughts",tamedMessage:"Overthink Octopus is now zen and focused! "},doom_dragon:{name:"Doom Dragon",icon:"",color:"#8B0000",size:"boss",technique:"breathing",description:"The big bad of catastrophic thinking",tamedMessage:"Doom Dragon is now your wise protector! "}},Ga={breathing:{name:"Deep Breathing",icon:"",instructions:["Breathe in for 4","Hold for 4","Breathe out for 6","Repeat"],duration:16e3,color:"#4CAF50"},progressive_relaxation:{name:"Progressive Relaxation",icon:"",instructions:["Tense your shoulders","Hold for 3 seconds","Release and relax","Feel the tension melt away"],duration:12e3,color:"#2196F3"},mindfulness:{name:"Mindfulness Anchor",icon:"",instructions:["Notice 3 things you can see","Notice 2 things you can hear","Notice 1 thing you can feel","You are present"],duration:15e3,color:"#FF9800"}},yu={TAMED_MONSTERS:"anxiety_game_tamed_monsters",PLAYER_STATS:"anxiety_game_player_stats"};function R3e({user:t,onUpdateStats:e}){var L,M,w;const[n,s]=P.useState("menu"),[r,i]=P.useState(null),[o,a]=P.useState([]),[c,d]=P.useState({level:1,experience:0,calmness:100,monstersDefeated:0,sanctuaryPoints:0}),[f,m]=P.useState(0),[g,T]=P.useState(0),[S,A]=P.useState(!1),C=P.useRef(null);P.useEffect(()=>{try{const y=localStorage.getItem(yu.TAMED_MONSTERS);if(y){const N=JSON.parse(y).map(R=>({...qf[R],id:R}));a(N)}const I=localStorage.getItem(yu.PLAYER_STATS);if(I){const E=JSON.parse(I);d(E)}}catch(y){console.error("Error loading game data from localStorage:",y)}},[]);const b=()=>{const y=Object.keys(qf),I=y[Math.floor(Math.random()*y.length)],E={...qf[I],id:I};i(E),s("encounter");const N=E.size==="boss"?30:E.size==="large"?20:10;d(R=>({...R,calmness:Math.max(0,R.calmness-N)}))},v=()=>{const y=Ga[r.technique]||Ga.breathing;s("technique"),m(0),T(0),x(y)},x=y=>{const I=y.duration/y.instructions.length;let E=0;const N=setInterval(()=>{T(E),m((E+1)/y.instructions.length*100),E===y.instructions.length-1?(clearInterval(N),setTimeout(()=>{D()},I)):E++},I);C.current=N},D=()=>{const y=r.size==="boss"?100:r.size==="large"?50:25,I=r.size==="boss"?20:10;a(E=>[...E,r]),d(E=>({...E,experience:E.experience+y,calmness:Math.min(100,E.calmness+30),monstersDefeated:E.monstersDefeated+1,sanctuaryPoints:E.sanctuaryPoints+I,level:Math.floor((E.experience+y)/100)+1})),s("victory"),e&&e({anxietyGameScore:c.monstersDefeated+1,mindfulnessPoints:I})};return P.useEffect(()=>{if(n==="technique"&&(r==null?void 0:r.technique)==="breathing"){const y=setInterval(()=>{A(I=>!I)},2e3);return()=>clearInterval(y)}},[n,r]),P.useEffect(()=>()=>{C.current&&clearInterval(C.current)},[]),P.useEffect(()=>{try{const y=o.map(I=>I.id);localStorage.setItem(yu.TAMED_MONSTERS,JSON.stringify(y))}catch(y){console.error("Error saving tamed monsters to localStorage:",y)}},[o]),P.useEffect(()=>{try{localStorage.setItem(yu.PLAYER_STATS,JSON.stringify(c))}catch(y){console.error("Error saving player stats to localStorage:",y)}},[c]),u.jsxs("div",{className:"monster-tamer-game",children:[n==="menu"&&u.jsxs("div",{className:"game-menu",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h2",{children:" Anxiety Monster Tamer"}),u.jsx("p",{children:"Use mindfulness to tame your anxiety monsters!"})]}),u.jsxs("div",{className:"player-stats",children:[u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Level ",c.level]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Calmness: ",c.calmness,"%"]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Tamed: ",c.monstersDefeated]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Sanctuary: ",c.sanctuaryPoints]})]})]}),u.jsx("button",{className:"encounter-btn",onClick:b,disabled:c.calmness<10,children:c.calmness<10?"Rest First ":"Encounter Monster "}),c.calmness<10&&u.jsx("button",{className:"rest-btn",onClick:()=>d(y=>({...y,calmness:Math.min(100,y.calmness+50)})),style:{background:"linear-gradient(135deg, #FF9800 0%, #FF5722 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"20px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"12px"},children:"Rest & Recover  (+50 Calmness)"}),u.jsxs("div",{className:"tamed-collection",children:[u.jsx("h3",{children:"Your Tamed Monsters:"}),u.jsx("div",{className:"tamed-grid",children:o.length===0?u.jsx("p",{className:"no-tamed",children:"No monsters tamed yet. Start your journey!"}):o.map((y,I)=>u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon",children:y.icon}),u.jsx("span",{className:"monster-name",children:y.name})]},I))})]})]}),n==="encounter"&&r&&u.jsxs("div",{className:"monster-encounter",children:[u.jsxs("div",{className:"encounter-scene",children:[u.jsxs("div",{className:`monster ${r.size} ${r.id}`,children:[u.jsx("div",{className:"monster-icon",children:r.icon}),u.jsx("div",{className:"monster-shake"})]}),u.jsxs("div",{className:"encounter-text",children:[u.jsxs("h3",{children:["A wild ",r.name," appears!"]}),u.jsx("p",{children:r.description}),u.jsx("p",{className:"calmness-drop",children:"Your calmness dropped! "})]})]}),u.jsxs("div",{className:"taming-options",children:[u.jsxs("button",{className:"tame-btn",onClick:v,children:[u.jsx("span",{className:"technique-icon",children:((L=Ga[r.technique])==null?void 0:L.icon)||""}),"Use ",((M=Ga[r.technique])==null?void 0:M.name)||"Deep Breathing"]}),u.jsx("button",{className:"run-btn",onClick:()=>s("menu"),children:"Run Away "})]})]}),n==="technique"&&r&&u.jsxs("div",{className:"taming-technique",children:[u.jsxs("div",{className:"technique-header",children:[u.jsxs("h3",{children:["Taming ",r.name]}),u.jsx("div",{className:"anxiety-progress",children:u.jsx("div",{className:"anxiety-progress-fill",style:{width:`${f}%`}})})]}),u.jsx("div",{className:`technique-visual ${S?"breathing":""}`,children:u.jsxs("div",{className:"monster-calming",children:[u.jsx("span",{className:"monster-icon",children:r.icon}),u.jsx("div",{className:"calming-aura"})]})}),u.jsx("div",{className:"technique-instructions",children:(w=Ga[r.technique])==null?void 0:w.instructions.map((y,I)=>u.jsx("div",{className:`instruction ${I===g?"active":I<g?"completed":""}`,children:y},I))})]}),n==="victory"&&r&&u.jsxs("div",{className:"victory-screen",children:[u.jsx("div",{className:"victory-animation",children:u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon happy",children:r.icon}),u.jsx("div",{className:"sparkles",children:""})]})}),u.jsxs("div",{className:"victory-text",children:[u.jsx("h3",{children:" Monster Tamed!"}),u.jsx("p",{children:r.tamedMessage}),u.jsxs("div",{className:"rewards",children:[u.jsx("div",{className:"reward",children:"+30 Calmness "}),u.jsxs("div",{className:"reward",children:["+",r.size==="boss"?100:r.size==="large"?50:25," Experience "]}),u.jsxs("div",{className:"reward",children:["+",r.size==="boss"?20:10," Sanctuary Points "]})]})]}),u.jsxs("div",{className:"victory-actions",children:[u.jsx("button",{className:"continue-btn",onClick:()=>s("menu"),children:"Continue Journey "}),u.jsx("button",{className:"sanctuary-btn",onClick:()=>s("sanctuary"),children:"Visit Sanctuary "})]})]}),n==="sanctuary"&&u.jsxs("div",{className:"sanctuary-view",children:[u.jsxs("div",{className:"sanctuary-header",children:[u.jsx("h2",{children:" Your Peaceful Sanctuary"}),u.jsx("p",{children:"A safe space built from your mindfulness journey"}),u.jsx("button",{className:"back-to-menu-btn",onClick:()=>s("menu"),children:" Back to Adventure"})]}),u.jsxs("div",{className:"sanctuary-stats",children:[u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:c.sanctuaryPoints}),u.jsx("span",{className:"stat-label",children:"Sanctuary Points"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:o.length}),u.jsx("span",{className:"stat-label",children:"Peaceful Companions"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsxs("span",{className:"stat-number",children:[c.calmness,"%"]}),u.jsx("span",{className:"stat-label",children:"Current Calmness"})]})]})]}),u.jsxs("div",{className:"sanctuary-garden",children:[u.jsx("h3",{children:" Mindfulness Garden"}),u.jsxs("div",{className:"garden-grid",children:[o.length===0?u.jsxs("div",{className:"empty-garden",children:[u.jsx("div",{className:"empty-garden-icon",children:""}),u.jsx("p",{children:"Your garden awaits your first peaceful companion..."}),u.jsx("small",{children:"Tame monsters to populate your sanctuary!"})]}):o.map((y,I)=>u.jsx("div",{className:"garden-companion",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"companion-icon",children:y.icon}),u.jsx("div",{className:"companion-aura"}),u.jsx("div",{className:"companion-name",children:y.name}),u.jsx("div",{className:"companion-effect",children:"Radiating peace "})]})},I)),Array.from({length:Math.max(0,6-o.length)}).map((y,I)=>u.jsx("div",{className:"garden-companion empty",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"empty-spot",children:"?"}),u.jsx("div",{className:"spot-label",children:"Awaiting Friend"})]})},`empty-${I}`))]})]}),u.jsxs("div",{className:"sanctuary-upgrades",children:[u.jsx("h3",{children:" Sanctuary Upgrades"}),u.jsxs("div",{className:"upgrades-grid",children:[u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=50?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:""}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Rainbow Bridge"}),u.jsx("p",{children:"Connects different areas of your sanctuary"}),u.jsx("span",{className:"upgrade-cost",children:"50 Points"})]}),c.sanctuaryPoints>=50?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:""})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=100?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:""}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Meditation Fountain"}),u.jsx("p",{children:"Restores calmness over time"}),u.jsx("span",{className:"upgrade-cost",children:"100 Points"})]}),c.sanctuaryPoints>=100?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:""})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=200?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:""}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Wisdom Tower"}),u.jsx("p",{children:"Unlock advanced meditation techniques"}),u.jsx("span",{className:"upgrade-cost",children:"200 Points"})]}),c.sanctuaryPoints>=200?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:""})]})]})]}),u.jsxs("div",{className:"daily-affirmations",children:[u.jsx("h3",{children:" Daily Affirmation"}),u.jsxs("div",{className:"affirmation-card",children:[u.jsx("div",{className:"affirmation-text",children:'"I am creating a sanctuary of peace within myself, one mindful moment at a time."'}),u.jsx("div",{className:"affirmation-author",children:"- Your Inner Wisdom"})]})]}),u.jsxs("div",{className:"sanctuary-actions",children:[u.jsx("button",{className:"meditation-btn",onClick:()=>{d(y=>({...y,calmness:Math.min(100,y.calmness+10)}))},children:" Meditate in Sanctuary (+10 Calmness)"}),u.jsx("button",{className:"encounter-btn",onClick:()=>{s("menu"),setTimeout(()=>{b()},500)},children:" Ready for Another Adventure"})]})]})]})}function D3e(){const{user:t}=In(),[e,n]=P.useState({anxietyGameScore:0,mindfulnessPoints:0,totalGamesPlayed:0,currentStreak:0}),[s,r]=P.useState(!1),[i,o]=P.useState(!1),[a,c]=P.useState(0);P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const C=await Ee.getPoints(t.uid);c(C)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const C=await Ee.isChallengeCompleted(t.uid,"monster_tamer_daily","daily"),b=await Ee.isChallengeCompleted(t.uid,"mindfulness_master_daily","daily");r(C),o(b)}})()},[t]),P.useEffect(()=>{try{const A=localStorage.getItem("clarity_game_stats");if(A){const b=JSON.parse(A);n(b),console.log(" Loaded saved game stats:",b)}const C=localStorage.getItem("anxiety_game_tamed_monsters");if(C){const v=JSON.parse(C).length;n(x=>{const D={...x,anxietyGameScore:Math.max(x.anxietyGameScore,v)};return localStorage.setItem("clarity_game_stats",JSON.stringify(D)),console.log(" Synced monster count:",v),D})}}catch(A){console.error("Error loading game stats:",A)}},[]);const d=A=>{console.log(" handleUpdateStats called with:",A),n(C=>{const b={...C,anxietyGameScore:A.anxietyGameScore||C.anxietyGameScore,mindfulnessPoints:C.mindfulnessPoints+(A.mindfulnessPoints||0),totalGamesPlayed:C.totalGamesPlayed+1};try{localStorage.setItem("clarity_game_stats",JSON.stringify(b)),console.log(" Saved game stats to localStorage:",b)}catch(v){console.error("Error saving game stats:",v)}return b}),console.log(" Game stats updated:",A)},f=()=>{try{const A=localStorage.getItem("anxiety_game_tamed_monsters"),C=localStorage.getItem("anxiety_game_player_stats");if(console.log(" Debug - Tamed monsters:",A),console.log(" Debug - Player stats:",C),A){const v=JSON.parse(A).length;n(x=>({...x,anxietyGameScore:v})),console.log(" Debug - Updated anxietyGameScore to:",v)}}catch(A){console.error("Error refreshing stats:",A)}},m=e.anxietyGameScore>=3,g=e.mindfulnessPoints>=100,T=async()=>{if(!(t!=null&&t.uid)||s||!m)return;await Ee.addPoints(t.uid,50),await Ee.completeChallenge(t.uid,"monster_tamer_daily","daily"),r(!0);const A=await Ee.getPoints(t.uid);c(A),alert("You claimed 50 points for Monster Tamer Challenge!")},S=async()=>{if(!(t!=null&&t.uid)||i||!g)return;await Ee.addPoints(t.uid,75),await Ee.completeChallenge(t.uid,"mindfulness_master_daily","daily"),o(!0);const A=await Ee.getPoints(t.uid);c(A),alert("You claimed 75 points for Mindfulness Master Challenge!")};return u.jsxs("div",{className:"games-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:""})," ",a," Points"]}),u.jsxs("div",{className:"games-header",children:[u.jsx("h1",{className:"games-title",children:"Mental Wellness Games"}),u.jsx("p",{className:"games-subtitle",children:"Play games to improve your mental health"})]}),u.jsxs("div",{className:"game-stats-section",children:[u.jsxs("div",{className:"stats-header",children:[u.jsx("h2",{className:"section-title",children:"Your Gaming Stats"}),u.jsx("button",{onClick:f,className:"refresh-stats-btn",title:"Refresh stats from game data",children:" Refresh"})]}),u.jsxs("div",{className:"game-stats-grid",children:[u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.anxietyGameScore}),u.jsx("span",{className:"stat-label",children:"Monsters Tamed"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.mindfulnessPoints}),u.jsx("span",{className:"stat-label",children:"Mindfulness Points"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.totalGamesPlayed}),u.jsx("span",{className:"stat-label",children:"Games Played"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.currentStreak}),u.jsx("span",{className:"stat-label",children:"Day Streak"})]})]})]})]}),u.jsxs("div",{className:"available-games",children:[u.jsx("h2",{className:"section-title",children:"Available Games"}),u.jsxs("div",{className:"game-section",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h3",{className:"game-title",children:" Anxiety Monster Tamer"}),u.jsx("span",{className:"game-status",children:"Active"})]}),u.jsx("p",{className:"game-description",children:"Face your anxiety monsters and tame them through mindful interaction. Each monster represents different anxiety triggers. Practice coping strategies while earning points!"}),u.jsx("div",{className:"game-container",children:u.jsx(R3e,{user:t,onUpdateStats:d})})]}),u.jsxs("div",{className:"daily-challenges",children:[u.jsx("h2",{className:"section-title",children:"Daily Gaming Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:""}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Monster Tamer Challenge"}),u.jsx("p",{children:"Tame 3 anxiety monsters today"}),u.jsx("div",{className:"challenge-progress",children:u.jsx("div",{className:"daily-challenge-bar",children:u.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.anxietyGameScore/3*100,100)}%`}})})})]}),u.jsxs("div",{className:"challenge-reward",children:[u.jsx("span",{children:"+50 points"}),u.jsx("button",{className:"claim-btn",onClick:T,disabled:!m||s,children:s?"Claimed":"Claim"})]})]}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:""}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Mindfulness Master"}),u.jsx("p",{children:"Earn 100 mindfulness points"}),u.jsx("div",{className:"challenge-progress",children:u.jsx("div",{className:"daily-challenge-bar",children:u.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.mindfulnessPoints/100*100,100)}%`}})})})]}),u.jsxs("div",{className:"challenge-reward",children:[u.jsx("span",{children:"+75 points"}),u.jsx("button",{className:"claim-btn",onClick:S,disabled:!g||i,children:i?"Claimed":"Claim"})]})]})]}),u.jsxs("div",{className:"game-achievements",children:[u.jsx("h2",{className:"section-title",children:"Gaming Achievements"}),u.jsxs("div",{className:"achievements-grid",children:[e.anxietyGameScore>=1&&u.jsxs("div",{className:"achievement-card bronze",children:[u.jsx("div",{className:"achievement-icon",children:""}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"FIRST VICTORY"}),u.jsx("p",{children:"Tamed your first monster"})]})]}),e.anxietyGameScore>=5&&u.jsxs("div",{className:"achievement-card silver",children:[u.jsx("div",{className:"achievement-icon",children:""}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MONSTER HUNTER"}),u.jsx("p",{children:"Tamed 5 monsters"})]})]}),e.anxietyGameScore>=10&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:""}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"ANXIETY MASTER"}),u.jsx("p",{children:"Tamed 10 monsters"})]})]}),e.mindfulnessPoints>=100&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:""}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MINDFUL GURU"}),u.jsx("p",{children:"Earned 100+ mindfulness points"})]})]})]})]}),u.jsxs("div",{className:"coming-soon-games",children:[u.jsx("h3",{className:"section-title",children:"More Games Coming Soon"}),u.jsxs("div",{className:"game-preview-grid",children:[u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:""}),u.jsx("h4",{children:"Mindful Garden"}),u.jsx("p",{children:"Grow a virtual garden through daily meditation practice"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:""}),u.jsx("h4",{children:"Calm Waters"}),u.jsx("p",{children:"Navigate peaceful waters while practicing breathing exercises"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:""}),u.jsx("h4",{children:"Focus Quest"}),u.jsx("p",{children:"Complete challenges that improve concentration and focus"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]})]})]})]})]})}function j3e(){return u.jsx(Ix,{children:u.jsxs(_A,{children:[u.jsxs(dA,{children:[u.jsx(fn,{path:"/welcome",element:u.jsx(EO,{})}),u.jsxs(fn,{path:"/",element:u.jsx(x3e,{children:u.jsx(wO,{})}),children:[u.jsx(fn,{index:!0,element:u.jsx(yd,{to:"/dashboard",replace:!0})}),u.jsx(fn,{path:"dashboard",element:u.jsx(kO,{})}),u.jsx(fn,{path:"workout",element:u.jsx(_3e,{})}),u.jsx(fn,{path:"meditation",element:u.jsx(w3e,{})}),u.jsx(fn,{path:"water",element:u.jsx(E3e,{})}),u.jsx(fn,{path:"goals",element:u.jsx(T3e,{})}),u.jsx(fn,{path:"profile",element:u.jsx(I3e,{})}),u.jsx(fn,{path:"games",element:u.jsx(D3e,{})})]}),u.jsx(fn,{path:"*",element:u.jsx(yd,{to:"/welcome",replace:!0})})]}),u.jsx(P3e,{}),u.jsx(N3e,{}),u.jsx(C3e,{})]})})}Wf.createRoot(document.getElementById("root")).render(u.jsx(_s.StrictMode,{children:u.jsx(Ix,{children:u.jsx(j3e,{})})}));
