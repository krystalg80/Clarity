function Kx(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function C2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var R2={exports:{}},Gd={},D2={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ol=Symbol.for("react.element"),Qx=Symbol.for("react.portal"),Yx=Symbol.for("react.fragment"),Xx=Symbol.for("react.strict_mode"),Jx=Symbol.for("react.profiler"),Zx=Symbol.for("react.provider"),eb=Symbol.for("react.context"),tb=Symbol.for("react.forward_ref"),nb=Symbol.for("react.suspense"),sb=Symbol.for("react.memo"),rb=Symbol.for("react.lazy"),ov=Symbol.iterator;function ib(t){return t===null||typeof t!="object"?null:(t=ov&&t[ov]||t["@@iterator"],typeof t=="function"?t:null)}var j2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O2=Object.assign,V2={};function ia(t,e,n){this.props=t,this.context=e,this.refs=V2,this.updater=n||j2}ia.prototype.isReactComponent={};ia.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ia.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function M2(){}M2.prototype=ia.prototype;function kp(t,e,n){this.props=t,this.context=e,this.refs=V2,this.updater=n||j2}var Ap=kp.prototype=new M2;Ap.constructor=kp;O2(Ap,ia.prototype);Ap.isPureReactComponent=!0;var av=Array.isArray,L2=Object.prototype.hasOwnProperty,Np={current:null},F2={key:!0,ref:!0,__self:!0,__source:!0};function z2(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)L2.call(e,s)&&!F2.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:ol,type:t,key:i,ref:o,props:r,_owner:Np.current}}function ob(t,e){return{$$typeof:ol,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ol}function ab(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cv=/\/+/g;function ef(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ab(""+t.key):e.toString(36)}function vu(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ol:case Qx:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+ef(o,0):s,av(r)?(n="",t!=null&&(n=t.replace(cv,"$&/")+"/"),vu(r,e,n,"",function(d){return d})):r!=null&&(Pp(r)&&(r=ob(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(cv,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",av(t))for(var a=0;a<t.length;a++){i=t[a];var c=s+ef(i,a);o+=vu(i,e,n,c,r)}else if(c=ib(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=s+ef(i,a++),o+=vu(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $l(t,e,n){if(t==null)return t;var s=[],r=0;return vu(t,s,"","",function(i){return e.call(n,i,r++)}),s}function cb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},wu={transition:null},lb={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:wu,ReactCurrentOwner:Np};function U2(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:$l,forEach:function(t,e,n){$l(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $l(t,function(){e++}),e},toArray:function(t){return $l(t,function(e){return e})||[]},only:function(t){if(!Pp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=ia;ve.Fragment=Yx;ve.Profiler=Jx;ve.PureComponent=kp;ve.StrictMode=Xx;ve.Suspense=nb;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lb;ve.act=U2;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=O2({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Np.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)L2.call(e,c)&&!F2.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];s.children=a}return{$$typeof:ol,type:t.type,key:r,ref:i,props:s,_owner:o}};ve.createContext=function(t){return t={$$typeof:eb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Zx,_context:t},t.Consumer=t};ve.createElement=z2;ve.createFactory=function(t){var e=z2.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:tb,render:t}};ve.isValidElement=Pp;ve.lazy=function(t){return{$$typeof:rb,_payload:{_status:-1,_result:t},_init:cb}};ve.memo=function(t,e){return{$$typeof:sb,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=wu.transition;wu.transition={};try{t()}finally{wu.transition=e}};ve.unstable_act=U2;ve.useCallback=function(t,e){return $t.current.useCallback(t,e)};ve.useContext=function(t){return $t.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};ve.useEffect=function(t,e){return $t.current.useEffect(t,e)};ve.useId=function(){return $t.current.useId()};ve.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return $t.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};ve.useRef=function(t){return $t.current.useRef(t)};ve.useState=function(t){return $t.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return $t.current.useTransition()};ve.version="18.3.1";D2.exports=ve;var N=D2.exports;const ws=C2(N),ub=Kx({__proto__:null,default:ws},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db=N,hb=Symbol.for("react.element"),fb=Symbol.for("react.fragment"),mb=Object.prototype.hasOwnProperty,pb=db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gb={key:!0,ref:!0,__self:!0,__source:!0};function B2(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)mb.call(e,s)&&!gb.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:hb,type:t,key:i,ref:o,props:r,_owner:pb.current}}Gd.Fragment=fb;Gd.jsx=B2;Gd.jsxs=B2;R2.exports=Gd;var u=R2.exports,qf={},$2={exports:{}},dn={},q2={exports:{}},W2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Y){var se=U.length;U.push(Y);e:for(;0<se;){var me=se-1>>>1,ae=U[me];if(0<r(ae,Y))U[me]=Y,U[se]=ae,se=me;else break e}}function n(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var Y=U[0],se=U.pop();if(se!==Y){U[0]=se;e:for(var me=0,ae=U.length,Se=ae>>>1;me<Se;){var ot=2*(me+1)-1,pt=U[ot],Ze=ot+1,Wt=U[Ze];if(0>r(pt,se))Ze<ae&&0>r(Wt,pt)?(U[me]=Wt,U[Ze]=se,me=Ze):(U[me]=pt,U[ot]=se,me=ot);else if(Ze<ae&&0>r(Wt,se))U[me]=Wt,U[Ze]=se,me=Ze;else break e}}return Y}function r(U,Y){var se=U.sortIndex-Y.sortIndex;return se!==0?se:U.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],f=1,m=null,g=3,E=!1,S=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(U){for(var Y=n(d);Y!==null;){if(Y.callback===null)s(d);else if(Y.startTime<=U)s(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(d)}}function j(U){if(A=!1,I(U),!S)if(n(c)!==null)S=!0,X(L);else{var Y=n(d);Y!==null&&ee(j,Y.startTime-U)}}function L(U,Y){S=!1,A&&(A=!1,x(y),y=-1),E=!0;var se=g;try{for(I(Y),m=n(c);m!==null&&(!(m.expirationTime>Y)||U&&!R());){var me=m.callback;if(typeof me=="function"){m.callback=null,g=m.priorityLevel;var ae=me(m.expirationTime<=Y);Y=t.unstable_now(),typeof ae=="function"?m.callback=ae:m===n(c)&&s(c),I(Y)}else s(c);m=n(c)}if(m!==null)var Se=!0;else{var ot=n(d);ot!==null&&ee(j,ot.startTime-Y),Se=!1}return Se}finally{m=null,g=se,E=!1}}var M=!1,_=null,y=-1,T=5,k=-1;function R(){return!(t.unstable_now()-k<T)}function P(){if(_!==null){var U=t.unstable_now();k=U;var Y=!0;try{Y=_(!0,U)}finally{Y?b():(M=!1,_=null)}}else M=!1}var b;if(typeof v=="function")b=function(){v(P)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,he=ie.port2;ie.port1.onmessage=P,b=function(){he.postMessage(null)}}else b=function(){C(P,0)};function X(U){_=U,M||(M=!0,b())}function ee(U,Y){y=C(function(){U(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){S||E||(S=!0,X(L))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var se=g;g=Y;try{return U()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var se=g;g=U;try{return Y()}finally{g=se}},t.unstable_scheduleCallback=function(U,Y,se){var me=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?me+se:me):se=me,U){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=se+ae,U={id:f++,callback:Y,priorityLevel:U,startTime:se,expirationTime:ae,sortIndex:-1},se>me?(U.sortIndex=se,e(d,U),n(c)===null&&U===n(d)&&(A?(x(y),y=-1):A=!0,ee(j,se-me))):(U.sortIndex=ae,e(c,U),S||E||(S=!0,X(L))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var Y=g;return function(){var se=g;g=Y;try{return U.apply(this,arguments)}finally{g=se}}}})(W2);q2.exports=W2;var yb=q2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb=N,ln=yb;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G2=new Set,Ic={};function Vi(t,e){Mo(t,e),Mo(t+"Capture",e)}function Mo(t,e){for(Ic[t]=e,t=0;t<e.length;t++)G2.add(e[t])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wf=Object.prototype.hasOwnProperty,wb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lv={},uv={};function _b(t){return Wf.call(uv,t)?!0:Wf.call(lv,t)?!1:wb.test(t)?uv[t]=!0:(lv[t]=!0,!1)}function Eb(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Tb(t,e,n,s){if(e===null||typeof e>"u"||Eb(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cp=/[\-:]([a-z])/g;function Rp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cp,Rp);It[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cp,Rp);It[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cp,Rp);It[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dp(t,e,n,s){var r=It.hasOwnProperty(e)?It[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Tb(e,n,r,s)&&(n=null),s||r===null?_b(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Ps=vb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ql=Symbol.for("react.element"),mo=Symbol.for("react.portal"),po=Symbol.for("react.fragment"),jp=Symbol.for("react.strict_mode"),Gf=Symbol.for("react.profiler"),H2=Symbol.for("react.provider"),K2=Symbol.for("react.context"),Op=Symbol.for("react.forward_ref"),Hf=Symbol.for("react.suspense"),Kf=Symbol.for("react.suspense_list"),Vp=Symbol.for("react.memo"),Ys=Symbol.for("react.lazy"),Q2=Symbol.for("react.offscreen"),dv=Symbol.iterator;function Da(t){return t===null||typeof t!="object"?null:(t=dv&&t[dv]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,tf;function Ha(t){if(tf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tf=e&&e[1]||""}return`
`+tf+t}var nf=!1;function sf(t,e){if(!t||nf)return"";nf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{nf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ha(t):""}function Ib(t){switch(t.tag){case 5:return Ha(t.type);case 16:return Ha("Lazy");case 13:return Ha("Suspense");case 19:return Ha("SuspenseList");case 0:case 2:case 15:return t=sf(t.type,!1),t;case 11:return t=sf(t.type.render,!1),t;case 1:return t=sf(t.type,!0),t;default:return""}}function Qf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case po:return"Fragment";case mo:return"Portal";case Gf:return"Profiler";case jp:return"StrictMode";case Hf:return"Suspense";case Kf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case K2:return(t.displayName||"Context")+".Consumer";case H2:return(t._context.displayName||"Context")+".Provider";case Op:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vp:return e=t.displayName||null,e!==null?e:Qf(t.type)||"Memo";case Ys:e=t._payload,t=t._init;try{return Qf(t(e))}catch{}}return null}function xb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qf(e);case 8:return e===jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Y2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bb(t){var e=Y2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wl(t){t._valueTracker||(t._valueTracker=bb(t))}function X2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Y2(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Gu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yf(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hv(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=br(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function J2(t,e){e=e.checked,e!=null&&Dp(t,"checked",e,!1)}function Xf(t,e){J2(t,e);var n=br(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jf(t,e.type,br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jf(t,e,n){(e!=="number"||Gu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ka=Array.isArray;function ko(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+br(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Zf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Ka(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:br(n)}}function Z2(t,e){var n=br(e.value),s=br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function pv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function e0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function em(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?e0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,t0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sb=["Webkit","ms","Moz","O"];Object.keys(rc).forEach(function(t){Sb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rc[e]=rc[t]})});function n0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rc.hasOwnProperty(t)&&rc[t]?(""+e).trim():e+"px"}function s0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=n0(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var kb=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tm(t,e){if(e){if(kb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function nm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sm=null;function Mp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rm=null,Ao=null,No=null;function gv(t){if(t=ll(t)){if(typeof rm!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Xd(e),rm(t.stateNode,t.type,e))}}function r0(t){Ao?No?No.push(t):No=[t]:Ao=t}function i0(){if(Ao){var t=Ao,e=No;if(No=Ao=null,gv(t),e)for(t=0;t<e.length;t++)gv(e[t])}}function o0(t,e){return t(e)}function a0(){}var rf=!1;function c0(t,e,n){if(rf)return t(e,n);rf=!0;try{return o0(t,e,n)}finally{rf=!1,(Ao!==null||No!==null)&&(a0(),i0())}}function bc(t,e){var n=t.stateNode;if(n===null)return null;var s=Xd(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var im=!1;if(Ts)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){im=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{im=!1}function Ab(t,e,n,s,r,i,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ic=!1,Hu=null,Ku=!1,om=null,Nb={onError:function(t){ic=!0,Hu=t}};function Pb(t,e,n,s,r,i,o,a,c){ic=!1,Hu=null,Ab.apply(Nb,arguments)}function Cb(t,e,n,s,r,i,o,a,c){if(Pb.apply(this,arguments),ic){if(ic){var d=Hu;ic=!1,Hu=null}else throw Error(W(198));Ku||(Ku=!0,om=d)}}function Mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function l0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yv(t){if(Mi(t)!==t)throw Error(W(188))}function Rb(t){var e=t.alternate;if(!e){if(e=Mi(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return yv(r),t;if(i===s)return yv(r),e;i=i.sibling}throw Error(W(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==s)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function u0(t){return t=Rb(t),t!==null?d0(t):null}function d0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=d0(t);if(e!==null)return e;t=t.sibling}return null}var h0=ln.unstable_scheduleCallback,vv=ln.unstable_cancelCallback,Db=ln.unstable_shouldYield,jb=ln.unstable_requestPaint,et=ln.unstable_now,Ob=ln.unstable_getCurrentPriorityLevel,Lp=ln.unstable_ImmediatePriority,f0=ln.unstable_UserBlockingPriority,Qu=ln.unstable_NormalPriority,Vb=ln.unstable_LowPriority,m0=ln.unstable_IdlePriority,Hd=null,Yn=null;function Mb(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Hd,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:zb,Lb=Math.log,Fb=Math.LN2;function zb(t){return t>>>=0,t===0?32:31-(Lb(t)/Fb|0)|0}var Hl=64,Kl=4194304;function Qa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yu(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=Qa(a):(i&=o,i!==0&&(s=Qa(i)))}else o=n&~r,o!==0?s=Qa(o):i!==0&&(s=Qa(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Cn(e),r=1<<n,s|=t[n],e&=~r;return s}function Ub(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bb(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Cn(i),a=1<<o,c=r[o];c===-1?(!(a&n)||a&s)&&(r[o]=Ub(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function am(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p0(){var t=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),t}function of(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function $b(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Cn(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Fp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Cn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var Pe=0;function g0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var y0,zp,v0,w0,_0,cm=!1,Ql=[],ur=null,dr=null,hr=null,Sc=new Map,kc=new Map,Js=[],qb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wv(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kc.delete(e.pointerId)}}function Oa(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=ll(e),e!==null&&zp(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Wb(t,e,n,s,r){switch(e){case"focusin":return ur=Oa(ur,t,e,n,s,r),!0;case"dragenter":return dr=Oa(dr,t,e,n,s,r),!0;case"mouseover":return hr=Oa(hr,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Sc.set(i,Oa(Sc.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,kc.set(i,Oa(kc.get(i)||null,t,e,n,s,r)),!0}return!1}function E0(t){var e=ci(t.target);if(e!==null){var n=Mi(e);if(n!==null){if(e=n.tag,e===13){if(e=l0(n),e!==null){t.blockedOn=e,_0(t.priority,function(){v0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _u(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);sm=s,n.target.dispatchEvent(s),sm=null}else return e=ll(n),e!==null&&zp(e),t.blockedOn=n,!1;e.shift()}return!0}function _v(t,e,n){_u(t)&&n.delete(e)}function Gb(){cm=!1,ur!==null&&_u(ur)&&(ur=null),dr!==null&&_u(dr)&&(dr=null),hr!==null&&_u(hr)&&(hr=null),Sc.forEach(_v),kc.forEach(_v)}function Va(t,e){t.blockedOn===e&&(t.blockedOn=null,cm||(cm=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,Gb)))}function Ac(t){function e(r){return Va(r,t)}if(0<Ql.length){Va(Ql[0],t);for(var n=1;n<Ql.length;n++){var s=Ql[n];s.blockedOn===t&&(s.blockedOn=null)}}for(ur!==null&&Va(ur,t),dr!==null&&Va(dr,t),hr!==null&&Va(hr,t),Sc.forEach(e),kc.forEach(e),n=0;n<Js.length;n++)s=Js[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Js.length&&(n=Js[0],n.blockedOn===null);)E0(n),n.blockedOn===null&&Js.shift()}var Po=Ps.ReactCurrentBatchConfig,Xu=!0;function Hb(t,e,n,s){var r=Pe,i=Po.transition;Po.transition=null;try{Pe=1,Up(t,e,n,s)}finally{Pe=r,Po.transition=i}}function Kb(t,e,n,s){var r=Pe,i=Po.transition;Po.transition=null;try{Pe=4,Up(t,e,n,s)}finally{Pe=r,Po.transition=i}}function Up(t,e,n,s){if(Xu){var r=lm(t,e,n,s);if(r===null)gf(t,e,s,Ju,n),wv(t,s);else if(Wb(r,t,e,n,s))s.stopPropagation();else if(wv(t,s),e&4&&-1<qb.indexOf(t)){for(;r!==null;){var i=ll(r);if(i!==null&&y0(i),i=lm(t,e,n,s),i===null&&gf(t,e,s,Ju,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else gf(t,e,s,null,n)}}var Ju=null;function lm(t,e,n,s){if(Ju=null,t=Mp(s),t=ci(t),t!==null)if(e=Mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=l0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ju=t,null}function T0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ob()){case Lp:return 1;case f0:return 4;case Qu:case Vb:return 16;case m0:return 536870912;default:return 16}default:return 16}}var or=null,Bp=null,Eu=null;function I0(){if(Eu)return Eu;var t,e=Bp,n=e.length,s,r="value"in or?or.value:or.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return Eu=r.slice(t,1<s?1-s:void 0)}function Tu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yl(){return!0}function Ev(){return!1}function hn(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yl:Ev,this.isPropagationStopped=Ev,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yl)},persist:function(){},isPersistent:Yl}),e}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$p=hn(oa),cl=Ke({},oa,{view:0,detail:0}),Qb=hn(cl),af,cf,Ma,Kd=Ke({},cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ma&&(Ma&&t.type==="mousemove"?(af=t.screenX-Ma.screenX,cf=t.screenY-Ma.screenY):cf=af=0,Ma=t),af)},movementY:function(t){return"movementY"in t?t.movementY:cf}}),Tv=hn(Kd),Yb=Ke({},Kd,{dataTransfer:0}),Xb=hn(Yb),Jb=Ke({},cl,{relatedTarget:0}),lf=hn(Jb),Zb=Ke({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),eS=hn(Zb),tS=Ke({},oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nS=hn(tS),sS=Ke({},oa,{data:0}),Iv=hn(sS),rS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oS[t])?!!e[t]:!1}function qp(){return aS}var cS=Ke({},cl,{key:function(t){if(t.key){var e=rS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qp,charCode:function(t){return t.type==="keypress"?Tu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lS=hn(cS),uS=Ke({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xv=hn(uS),dS=Ke({},cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qp}),hS=hn(dS),fS=Ke({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),mS=hn(fS),pS=Ke({},Kd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gS=hn(pS),yS=[9,13,27,32],Wp=Ts&&"CompositionEvent"in window,oc=null;Ts&&"documentMode"in document&&(oc=document.documentMode);var vS=Ts&&"TextEvent"in window&&!oc,x0=Ts&&(!Wp||oc&&8<oc&&11>=oc),bv=" ",Sv=!1;function b0(t,e){switch(t){case"keyup":return yS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var go=!1;function wS(t,e){switch(t){case"compositionend":return S0(e);case"keypress":return e.which!==32?null:(Sv=!0,bv);case"textInput":return t=e.data,t===bv&&Sv?null:t;default:return null}}function _S(t,e){if(go)return t==="compositionend"||!Wp&&b0(t,e)?(t=I0(),Eu=Bp=or=null,go=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return x0&&e.locale!=="ko"?null:e.data;default:return null}}var ES={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ES[t.type]:e==="textarea"}function k0(t,e,n,s){r0(s),e=Zu(e,"onChange"),0<e.length&&(n=new $p("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ac=null,Nc=null;function TS(t){L0(t,0)}function Qd(t){var e=wo(t);if(X2(e))return t}function IS(t,e){if(t==="change")return e}var A0=!1;if(Ts){var uf;if(Ts){var df="oninput"in document;if(!df){var Av=document.createElement("div");Av.setAttribute("oninput","return;"),df=typeof Av.oninput=="function"}uf=df}else uf=!1;A0=uf&&(!document.documentMode||9<document.documentMode)}function Nv(){ac&&(ac.detachEvent("onpropertychange",N0),Nc=ac=null)}function N0(t){if(t.propertyName==="value"&&Qd(Nc)){var e=[];k0(e,Nc,t,Mp(t)),c0(TS,e)}}function xS(t,e,n){t==="focusin"?(Nv(),ac=e,Nc=n,ac.attachEvent("onpropertychange",N0)):t==="focusout"&&Nv()}function bS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qd(Nc)}function SS(t,e){if(t==="click")return Qd(e)}function kS(t,e){if(t==="input"||t==="change")return Qd(e)}function AS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dn=typeof Object.is=="function"?Object.is:AS;function Pc(t,e){if(Dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Wf.call(e,r)||!Dn(t[r],e[r]))return!1}return!0}function Pv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cv(t,e){var n=Pv(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pv(n)}}function P0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?P0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function C0(){for(var t=window,e=Gu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gu(t.document)}return e}function Gp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NS(t){var e=C0(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&P0(n.ownerDocument.documentElement,n)){if(s!==null&&Gp(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=Cv(n,i);var o=Cv(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PS=Ts&&"documentMode"in document&&11>=document.documentMode,yo=null,um=null,cc=null,dm=!1;function Rv(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dm||yo==null||yo!==Gu(s)||(s=yo,"selectionStart"in s&&Gp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),cc&&Pc(cc,s)||(cc=s,s=Zu(um,"onSelect"),0<s.length&&(e=new $p("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=yo)))}function Xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vo={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},hf={},R0={};Ts&&(R0=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function Yd(t){if(hf[t])return hf[t];if(!vo[t])return t;var e=vo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R0)return hf[t]=e[n];return t}var D0=Yd("animationend"),j0=Yd("animationiteration"),O0=Yd("animationstart"),V0=Yd("transitionend"),M0=new Map,Dv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){M0.set(t,e),Vi(e,[t])}for(var ff=0;ff<Dv.length;ff++){var mf=Dv[ff],CS=mf.toLowerCase(),RS=mf[0].toUpperCase()+mf.slice(1);Rr(CS,"on"+RS)}Rr(D0,"onAnimationEnd");Rr(j0,"onAnimationIteration");Rr(O0,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(V0,"onTransitionEnd");Mo("onMouseEnter",["mouseout","mouseover"]);Mo("onMouseLeave",["mouseout","mouseover"]);Mo("onPointerEnter",["pointerout","pointerover"]);Mo("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ya));function jv(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,Cb(s,e,void 0,t),t.currentTarget=null}function L0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&r.isPropagationStopped())break e;jv(r,a,d),i=c}else for(o=0;o<s.length;o++){if(a=s[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&r.isPropagationStopped())break e;jv(r,a,d),i=c}}}if(Ku)throw t=om,Ku=!1,om=null,t}function Me(t,e){var n=e[gm];n===void 0&&(n=e[gm]=new Set);var s=t+"__bubble";n.has(s)||(F0(e,t,2,!1),n.add(s))}function pf(t,e,n){var s=0;e&&(s|=4),F0(n,t,s,e)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Cc(t){if(!t[Jl]){t[Jl]=!0,G2.forEach(function(n){n!=="selectionchange"&&(DS.has(n)||pf(n,!1,t),pf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jl]||(e[Jl]=!0,pf("selectionchange",!1,e))}}function F0(t,e,n,s){switch(T0(e)){case 1:var r=Hb;break;case 4:r=Kb;break;default:r=Up}n=r.bind(null,e,n,t),r=void 0,!im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function gf(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ci(a),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}a=a.parentNode}}s=s.return}c0(function(){var d=i,f=Mp(n),m=[];e:{var g=M0.get(t);if(g!==void 0){var E=$p,S=t;switch(t){case"keypress":if(Tu(n)===0)break e;case"keydown":case"keyup":E=lS;break;case"focusin":S="focus",E=lf;break;case"focusout":S="blur",E=lf;break;case"beforeblur":case"afterblur":E=lf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Tv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Xb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=hS;break;case D0:case j0:case O0:E=eS;break;case V0:E=mS;break;case"scroll":E=Qb;break;case"wheel":E=gS;break;case"copy":case"cut":case"paste":E=nS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=xv}var A=(e&4)!==0,C=!A&&t==="scroll",x=A?g!==null?g+"Capture":null:g;A=[];for(var v=d,I;v!==null;){I=v;var j=I.stateNode;if(I.tag===5&&j!==null&&(I=j,x!==null&&(j=bc(v,x),j!=null&&A.push(Rc(v,j,I)))),C)break;v=v.return}0<A.length&&(g=new E(g,S,null,n,f),m.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==sm&&(S=n.relatedTarget||n.fromElement)&&(ci(S)||S[Is]))break e;if((E||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,E?(S=n.relatedTarget||n.toElement,E=d,S=S?ci(S):null,S!==null&&(C=Mi(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(E=null,S=d),E!==S)){if(A=Tv,j="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=xv,j="onPointerLeave",x="onPointerEnter",v="pointer"),C=E==null?g:wo(E),I=S==null?g:wo(S),g=new A(j,v+"leave",E,n,f),g.target=C,g.relatedTarget=I,j=null,ci(f)===d&&(A=new A(x,v+"enter",S,n,f),A.target=I,A.relatedTarget=C,j=A),C=j,E&&S)t:{for(A=E,x=S,v=0,I=A;I;I=eo(I))v++;for(I=0,j=x;j;j=eo(j))I++;for(;0<v-I;)A=eo(A),v--;for(;0<I-v;)x=eo(x),I--;for(;v--;){if(A===x||x!==null&&A===x.alternate)break t;A=eo(A),x=eo(x)}A=null}else A=null;E!==null&&Ov(m,g,E,A,!1),S!==null&&C!==null&&Ov(m,C,S,A,!0)}}e:{if(g=d?wo(d):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var L=IS;else if(kv(g))if(A0)L=kS;else{L=bS;var M=xS}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=SS);if(L&&(L=L(t,d))){k0(m,L,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Jf(g,"number",g.value)}switch(M=d?wo(d):window,t){case"focusin":(kv(M)||M.contentEditable==="true")&&(yo=M,um=d,cc=null);break;case"focusout":cc=um=yo=null;break;case"mousedown":dm=!0;break;case"contextmenu":case"mouseup":case"dragend":dm=!1,Rv(m,n,f);break;case"selectionchange":if(PS)break;case"keydown":case"keyup":Rv(m,n,f)}var _;if(Wp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else go?b0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(x0&&n.locale!=="ko"&&(go||y!=="onCompositionStart"?y==="onCompositionEnd"&&go&&(_=I0()):(or=f,Bp="value"in or?or.value:or.textContent,go=!0)),M=Zu(d,y),0<M.length&&(y=new Iv(y,t,null,n,f),m.push({event:y,listeners:M}),_?y.data=_:(_=S0(n),_!==null&&(y.data=_)))),(_=vS?wS(t,n):_S(t,n))&&(d=Zu(d,"onBeforeInput"),0<d.length&&(f=new Iv("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=_))}L0(m,e)})}function Rc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zu(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=bc(t,n),i!=null&&s.unshift(Rc(t,i,r)),i=bc(t,e),i!=null&&s.push(Rc(t,i,r))),t=t.return}return s}function eo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ov(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===s)break;a.tag===5&&d!==null&&(a=d,r?(c=bc(n,i),c!=null&&o.unshift(Rc(n,c,a))):r||(c=bc(n,i),c!=null&&o.push(Rc(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jS=/\r\n?/g,OS=/\u0000|\uFFFD/g;function Vv(t){return(typeof t=="string"?t:""+t).replace(jS,`
`).replace(OS,"")}function Zl(t,e,n){if(e=Vv(e),Vv(t)!==e&&n)throw Error(W(425))}function ed(){}var hm=null,fm=null;function mm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pm=typeof setTimeout=="function"?setTimeout:void 0,VS=typeof clearTimeout=="function"?clearTimeout:void 0,Mv=typeof Promise=="function"?Promise:void 0,MS=typeof queueMicrotask=="function"?queueMicrotask:typeof Mv<"u"?function(t){return Mv.resolve(null).then(t).catch(LS)}:pm;function LS(t){setTimeout(function(){throw t})}function yf(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Ac(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Ac(e)}function fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var aa=Math.random().toString(36).slice(2),qn="__reactFiber$"+aa,Dc="__reactProps$"+aa,Is="__reactContainer$"+aa,gm="__reactEvents$"+aa,FS="__reactListeners$"+aa,zS="__reactHandles$"+aa;function ci(t){var e=t[qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Is]||n[qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lv(t);t!==null;){if(n=t[qn])return n;t=Lv(t)}return e}t=n,n=t.parentNode}return null}function ll(t){return t=t[qn]||t[Is],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Xd(t){return t[Dc]||null}var ym=[],_o=-1;function Dr(t){return{current:t}}function Le(t){0>_o||(t.current=ym[_o],ym[_o]=null,_o--)}function Oe(t,e){_o++,ym[_o]=t.current,t.current=e}var Sr={},Ot=Dr(Sr),Yt=Dr(!1),wi=Sr;function Lo(t,e){var n=t.type.contextTypes;if(!n)return Sr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Xt(t){return t=t.childContextTypes,t!=null}function td(){Le(Yt),Le(Ot)}function Fv(t,e,n){if(Ot.current!==Sr)throw Error(W(168));Oe(Ot,e),Oe(Yt,n)}function z0(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(W(108,xb(t)||"Unknown",r));return Ke({},n,s)}function nd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sr,wi=Ot.current,Oe(Ot,t),Oe(Yt,Yt.current),!0}function zv(t,e,n){var s=t.stateNode;if(!s)throw Error(W(169));n?(t=z0(t,e,wi),s.__reactInternalMemoizedMergedChildContext=t,Le(Yt),Le(Ot),Oe(Ot,t)):Le(Yt),Oe(Yt,n)}var fs=null,Jd=!1,vf=!1;function U0(t){fs===null?fs=[t]:fs.push(t)}function US(t){Jd=!0,U0(t)}function jr(){if(!vf&&fs!==null){vf=!0;var t=0,e=Pe;try{var n=fs;for(Pe=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}fs=null,Jd=!1}catch(r){throw fs!==null&&(fs=fs.slice(t+1)),h0(Lp,jr),r}finally{Pe=e,vf=!1}}return null}var Eo=[],To=0,sd=null,rd=0,mn=[],pn=0,_i=null,ms=1,ps="";function Zr(t,e){Eo[To++]=rd,Eo[To++]=sd,sd=t,rd=e}function B0(t,e,n){mn[pn++]=ms,mn[pn++]=ps,mn[pn++]=_i,_i=t;var s=ms;t=ps;var r=32-Cn(s)-1;s&=~(1<<r),n+=1;var i=32-Cn(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,ms=1<<32-Cn(e)+r|n<<r|s,ps=i+t}else ms=1<<i|n<<r|s,ps=t}function Hp(t){t.return!==null&&(Zr(t,1),B0(t,1,0))}function Kp(t){for(;t===sd;)sd=Eo[--To],Eo[To]=null,rd=Eo[--To],Eo[To]=null;for(;t===_i;)_i=mn[--pn],mn[pn]=null,ps=mn[--pn],mn[pn]=null,ms=mn[--pn],mn[pn]=null}var cn=null,on=null,ze=!1,Nn=null;function $0(t,e){var n=gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Uv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,on=fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_i!==null?{id:ms,overflow:ps}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,on=null,!0):!1;default:return!1}}function vm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wm(t){if(ze){var e=on;if(e){var n=e;if(!Uv(t,e)){if(vm(t))throw Error(W(418));e=fr(n.nextSibling);var s=cn;e&&Uv(t,e)?$0(s,n):(t.flags=t.flags&-4097|2,ze=!1,cn=t)}}else{if(vm(t))throw Error(W(418));t.flags=t.flags&-4097|2,ze=!1,cn=t}}}function Bv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function eu(t){if(t!==cn)return!1;if(!ze)return Bv(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mm(t.type,t.memoizedProps)),e&&(e=on)){if(vm(t))throw q0(),Error(W(418));for(;e;)$0(t,e),e=fr(e.nextSibling)}if(Bv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=cn?fr(t.stateNode.nextSibling):null;return!0}function q0(){for(var t=on;t;)t=fr(t.nextSibling)}function Fo(){on=cn=null,ze=!1}function Qp(t){Nn===null?Nn=[t]:Nn.push(t)}var BS=Ps.ReactCurrentBatchConfig;function La(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var s=n.stateNode}if(!s)throw Error(W(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function tu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $v(t){var e=t._init;return e(t._payload)}function W0(t){function e(x,v){if(t){var I=x.deletions;I===null?(x.deletions=[v],x.flags|=16):I.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function s(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function r(x,v){return x=yr(x,v),x.index=0,x.sibling=null,x}function i(x,v,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<v?(x.flags|=2,v):I):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,v,I,j){return v===null||v.tag!==6?(v=bf(I,x.mode,j),v.return=x,v):(v=r(v,I),v.return=x,v)}function c(x,v,I,j){var L=I.type;return L===po?f(x,v,I.props.children,j,I.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ys&&$v(L)===v.type)?(j=r(v,I.props),j.ref=La(x,v,I),j.return=x,j):(j=Nu(I.type,I.key,I.props,null,x.mode,j),j.ref=La(x,v,I),j.return=x,j)}function d(x,v,I,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Sf(I,x.mode,j),v.return=x,v):(v=r(v,I.children||[]),v.return=x,v)}function f(x,v,I,j,L){return v===null||v.tag!==7?(v=pi(I,x.mode,j,L),v.return=x,v):(v=r(v,I),v.return=x,v)}function m(x,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=bf(""+v,x.mode,I),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ql:return I=Nu(v.type,v.key,v.props,null,x.mode,I),I.ref=La(x,null,v),I.return=x,I;case mo:return v=Sf(v,x.mode,I),v.return=x,v;case Ys:var j=v._init;return m(x,j(v._payload),I)}if(Ka(v)||Da(v))return v=pi(v,x.mode,I,null),v.return=x,v;tu(x,v)}return null}function g(x,v,I,j){var L=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return L!==null?null:a(x,v,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ql:return I.key===L?c(x,v,I,j):null;case mo:return I.key===L?d(x,v,I,j):null;case Ys:return L=I._init,g(x,v,L(I._payload),j)}if(Ka(I)||Da(I))return L!==null?null:f(x,v,I,j,null);tu(x,I)}return null}function E(x,v,I,j,L){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(I)||null,a(v,x,""+j,L);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ql:return x=x.get(j.key===null?I:j.key)||null,c(v,x,j,L);case mo:return x=x.get(j.key===null?I:j.key)||null,d(v,x,j,L);case Ys:var M=j._init;return E(x,v,I,M(j._payload),L)}if(Ka(j)||Da(j))return x=x.get(I)||null,f(v,x,j,L,null);tu(v,j)}return null}function S(x,v,I,j){for(var L=null,M=null,_=v,y=v=0,T=null;_!==null&&y<I.length;y++){_.index>y?(T=_,_=null):T=_.sibling;var k=g(x,_,I[y],j);if(k===null){_===null&&(_=T);break}t&&_&&k.alternate===null&&e(x,_),v=i(k,v,y),M===null?L=k:M.sibling=k,M=k,_=T}if(y===I.length)return n(x,_),ze&&Zr(x,y),L;if(_===null){for(;y<I.length;y++)_=m(x,I[y],j),_!==null&&(v=i(_,v,y),M===null?L=_:M.sibling=_,M=_);return ze&&Zr(x,y),L}for(_=s(x,_);y<I.length;y++)T=E(_,x,y,I[y],j),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?y:T.key),v=i(T,v,y),M===null?L=T:M.sibling=T,M=T);return t&&_.forEach(function(R){return e(x,R)}),ze&&Zr(x,y),L}function A(x,v,I,j){var L=Da(I);if(typeof L!="function")throw Error(W(150));if(I=L.call(I),I==null)throw Error(W(151));for(var M=L=null,_=v,y=v=0,T=null,k=I.next();_!==null&&!k.done;y++,k=I.next()){_.index>y?(T=_,_=null):T=_.sibling;var R=g(x,_,k.value,j);if(R===null){_===null&&(_=T);break}t&&_&&R.alternate===null&&e(x,_),v=i(R,v,y),M===null?L=R:M.sibling=R,M=R,_=T}if(k.done)return n(x,_),ze&&Zr(x,y),L;if(_===null){for(;!k.done;y++,k=I.next())k=m(x,k.value,j),k!==null&&(v=i(k,v,y),M===null?L=k:M.sibling=k,M=k);return ze&&Zr(x,y),L}for(_=s(x,_);!k.done;y++,k=I.next())k=E(_,x,y,k.value,j),k!==null&&(t&&k.alternate!==null&&_.delete(k.key===null?y:k.key),v=i(k,v,y),M===null?L=k:M.sibling=k,M=k);return t&&_.forEach(function(P){return e(x,P)}),ze&&Zr(x,y),L}function C(x,v,I,j){if(typeof I=="object"&&I!==null&&I.type===po&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ql:e:{for(var L=I.key,M=v;M!==null;){if(M.key===L){if(L=I.type,L===po){if(M.tag===7){n(x,M.sibling),v=r(M,I.props.children),v.return=x,x=v;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ys&&$v(L)===M.type){n(x,M.sibling),v=r(M,I.props),v.ref=La(x,M,I),v.return=x,x=v;break e}n(x,M);break}else e(x,M);M=M.sibling}I.type===po?(v=pi(I.props.children,x.mode,j,I.key),v.return=x,x=v):(j=Nu(I.type,I.key,I.props,null,x.mode,j),j.ref=La(x,v,I),j.return=x,x=j)}return o(x);case mo:e:{for(M=I.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(x,v.sibling),v=r(v,I.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=Sf(I,x.mode,j),v.return=x,x=v}return o(x);case Ys:return M=I._init,C(x,v,M(I._payload),j)}if(Ka(I))return S(x,v,I,j);if(Da(I))return A(x,v,I,j);tu(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(x,v.sibling),v=r(v,I),v.return=x,x=v):(n(x,v),v=bf(I,x.mode,j),v.return=x,x=v),o(x)):n(x,v)}return C}var zo=W0(!0),G0=W0(!1),id=Dr(null),od=null,Io=null,Yp=null;function Xp(){Yp=Io=od=null}function Jp(t){var e=id.current;Le(id),t._currentValue=e}function _m(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Co(t,e){od=t,Yp=Io=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(Yp!==t)if(t={context:t,memoizedValue:e,next:null},Io===null){if(od===null)throw Error(W(308));Io=t,od.dependencies={lanes:0,firstContext:t}}else Io=Io.next=t;return e}var li=null;function Zp(t){li===null?li=[t]:li.push(t)}function H0(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Zp(e)):(n.next=r.next,r.next=n),e.interleaved=n,xs(t,s)}function xs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xs=!1;function eg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _s(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,be&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,xs(t,n)}return r=s.interleaved,r===null?(e.next=e,Zp(s)):(e.next=r.next,r.next=e),s.interleaved=e,xs(t,n)}function Iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Fp(t,n)}}function qv(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ad(t,e,n,s){var r=t.updateQueue;Xs=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=r.baseState;o=0,f=d=c=null,a=i;do{var g=a.lane,E=a.eventTime;if((s&g)===g){f!==null&&(f=f.next={eventTime:E,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,A=a;switch(g=e,E=n,A.tag){case 1:if(S=A.payload,typeof S=="function"){m=S.call(E,m,g);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=A.payload,g=typeof S=="function"?S.call(E,m,g):S,g==null)break e;m=Ke({},m,g);break e;case 2:Xs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=r.effects,g===null?r.effects=[a]:g.push(a))}else E={eventTime:E,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=E,c=m):f=f.next=E,o|=g;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;g=a,a=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);if(f===null&&(c=m),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Ti|=o,t.lanes=o,t.memoizedState=m}}function Wv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(W(191,r));r.call(s)}}}var ul={},Xn=Dr(ul),jc=Dr(ul),Oc=Dr(ul);function ui(t){if(t===ul)throw Error(W(174));return t}function tg(t,e){switch(Oe(Oc,e),Oe(jc,t),Oe(Xn,ul),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:em(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=em(e,t)}Le(Xn),Oe(Xn,e)}function Uo(){Le(Xn),Le(jc),Le(Oc)}function Q0(t){ui(Oc.current);var e=ui(Xn.current),n=em(e,t.type);e!==n&&(Oe(jc,t),Oe(Xn,n))}function ng(t){jc.current===t&&(Le(Xn),Le(jc))}var $e=Dr(0);function cd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wf=[];function sg(){for(var t=0;t<wf.length;t++)wf[t]._workInProgressVersionPrimary=null;wf.length=0}var xu=Ps.ReactCurrentDispatcher,_f=Ps.ReactCurrentBatchConfig,Ei=0,We=null,at=null,ft=null,ld=!1,lc=!1,Vc=0,$S=0;function St(){throw Error(W(321))}function rg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dn(t[n],e[n]))return!1;return!0}function ig(t,e,n,s,r,i){if(Ei=i,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xu.current=t===null||t.memoizedState===null?HS:KS,t=n(s,r),lc){i=0;do{if(lc=!1,Vc=0,25<=i)throw Error(W(301));i+=1,ft=at=null,e.updateQueue=null,xu.current=QS,t=n(s,r)}while(lc)}if(xu.current=ud,e=at!==null&&at.next!==null,Ei=0,ft=at=We=null,ld=!1,e)throw Error(W(300));return t}function og(){var t=Vc!==0;return Vc=0,t}function Bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?We.memoizedState=ft=t:ft=ft.next=t,ft}function En(){if(at===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=ft===null?We.memoizedState:ft.next;if(e!==null)ft=e,at=t;else{if(t===null)throw Error(W(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},ft===null?We.memoizedState=ft=t:ft=ft.next=t}return ft}function Mc(t,e){return typeof e=="function"?e(t):e}function Ef(t){var e=En(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var s=at,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,c=null,d=i;do{var f=d.lane;if((Ei&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=m,o=s):c=c.next=m,We.lanes|=f,Ti|=f}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=a,Dn(s,e.memoizedState)||(Kt=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,We.lanes|=i,Ti|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tf(t){var e=En(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Dn(i,e.memoizedState)||(Kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function Y0(){}function X0(t,e){var n=We,s=En(),r=e(),i=!Dn(s.memoizedState,r);if(i&&(s.memoizedState=r,Kt=!0),s=s.queue,ag(e1.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Lc(9,Z0.bind(null,n,s,r,e),void 0,null),mt===null)throw Error(W(349));Ei&30||J0(n,e,r)}return r}function J0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Z0(t,e,n,s){e.value=n,e.getSnapshot=s,t1(e)&&n1(t)}function e1(t,e,n){return n(function(){t1(e)&&n1(t)})}function t1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dn(t,n)}catch{return!0}}function n1(t){var e=xs(t,1);e!==null&&Rn(e,t,1,-1)}function Gv(t){var e=Bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mc,lastRenderedState:t},e.queue=t,t=t.dispatch=GS.bind(null,We,t),[e.memoizedState,t]}function Lc(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function s1(){return En().memoizedState}function bu(t,e,n,s){var r=Bn();We.flags|=t,r.memoizedState=Lc(1|e,n,void 0,s===void 0?null:s)}function Zd(t,e,n,s){var r=En();s=s===void 0?null:s;var i=void 0;if(at!==null){var o=at.memoizedState;if(i=o.destroy,s!==null&&rg(s,o.deps)){r.memoizedState=Lc(e,n,i,s);return}}We.flags|=t,r.memoizedState=Lc(1|e,n,i,s)}function Hv(t,e){return bu(8390656,8,t,e)}function ag(t,e){return Zd(2048,8,t,e)}function r1(t,e){return Zd(4,2,t,e)}function i1(t,e){return Zd(4,4,t,e)}function o1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function a1(t,e,n){return n=n!=null?n.concat([t]):null,Zd(4,4,o1.bind(null,e,t),n)}function cg(){}function c1(t,e){var n=En();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&rg(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function l1(t,e){var n=En();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&rg(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function u1(t,e,n){return Ei&21?(Dn(n,e)||(n=p0(),We.lanes|=n,Ti|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function qS(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var s=_f.transition;_f.transition={};try{t(!1),e()}finally{Pe=n,_f.transition=s}}function d1(){return En().memoizedState}function WS(t,e,n){var s=gr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},h1(t))f1(e,n);else if(n=H0(t,e,n,s),n!==null){var r=zt();Rn(n,t,s,r),m1(n,e,s)}}function GS(t,e,n){var s=gr(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(h1(t))f1(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,Dn(a,o)){var c=e.interleaved;c===null?(r.next=r,Zp(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=H0(t,e,r,s),n!==null&&(r=zt(),Rn(n,t,s,r),m1(n,e,s))}}function h1(t){var e=t.alternate;return t===We||e!==null&&e===We}function f1(t,e){lc=ld=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function m1(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Fp(t,n)}}var ud={readContext:_n,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},HS={readContext:_n,useCallback:function(t,e){return Bn().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:Hv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bu(4194308,4,o1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bu(4194308,4,t,e)},useInsertionEffect:function(t,e){return bu(4,2,t,e)},useMemo:function(t,e){var n=Bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Bn();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=WS.bind(null,We,t),[s.memoizedState,t]},useRef:function(t){var e=Bn();return t={current:t},e.memoizedState=t},useState:Gv,useDebugValue:cg,useDeferredValue:function(t){return Bn().memoizedState=t},useTransition:function(){var t=Gv(!1),e=t[0];return t=qS.bind(null,t[1]),Bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=We,r=Bn();if(ze){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),mt===null)throw Error(W(349));Ei&30||J0(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Hv(e1.bind(null,s,i,t),[t]),s.flags|=2048,Lc(9,Z0.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=Bn(),e=mt.identifierPrefix;if(ze){var n=ps,s=ms;n=(s&~(1<<32-Cn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$S++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KS={readContext:_n,useCallback:c1,useContext:_n,useEffect:ag,useImperativeHandle:a1,useInsertionEffect:r1,useLayoutEffect:i1,useMemo:l1,useReducer:Ef,useRef:s1,useState:function(){return Ef(Mc)},useDebugValue:cg,useDeferredValue:function(t){var e=En();return u1(e,at.memoizedState,t)},useTransition:function(){var t=Ef(Mc)[0],e=En().memoizedState;return[t,e]},useMutableSource:Y0,useSyncExternalStore:X0,useId:d1,unstable_isNewReconciler:!1},QS={readContext:_n,useCallback:c1,useContext:_n,useEffect:ag,useImperativeHandle:a1,useInsertionEffect:r1,useLayoutEffect:i1,useMemo:l1,useReducer:Tf,useRef:s1,useState:function(){return Tf(Mc)},useDebugValue:cg,useDeferredValue:function(t){var e=En();return at===null?e.memoizedState=t:u1(e,at.memoizedState,t)},useTransition:function(){var t=Tf(Mc)[0],e=En().memoizedState;return[t,e]},useMutableSource:Y0,useSyncExternalStore:X0,useId:d1,unstable_isNewReconciler:!1};function Sn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Em(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eh={isMounted:function(t){return(t=t._reactInternals)?Mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=zt(),r=gr(t),i=_s(s,r);i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,r),e!==null&&(Rn(e,t,r,s),Iu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=zt(),r=gr(t),i=_s(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,r),e!==null&&(Rn(e,t,r,s),Iu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),s=gr(t),r=_s(n,s);r.tag=2,e!=null&&(r.callback=e),e=mr(t,r,s),e!==null&&(Rn(e,t,s,n),Iu(e,t,s))}};function Kv(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Pc(n,s)||!Pc(r,i):!0}function p1(t,e,n){var s=!1,r=Sr,i=e.contextType;return typeof i=="object"&&i!==null?i=_n(i):(r=Xt(e)?wi:Ot.current,s=e.contextTypes,i=(s=s!=null)?Lo(t,r):Sr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eh,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Qv(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&eh.enqueueReplaceState(e,e.state,null)}function Tm(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},eg(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=_n(i):(i=Xt(e)?wi:Ot.current,r.context=Lo(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Em(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&eh.enqueueReplaceState(r,r.state,null),ad(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Bo(t,e){try{var n="",s=e;do n+=Ib(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function If(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Im(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YS=typeof WeakMap=="function"?WeakMap:Map;function g1(t,e,n){n=_s(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){hd||(hd=!0,Dm=s),Im(t,e)},n}function y1(t,e,n){n=_s(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){Im(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Im(t,e),typeof s!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Yv(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new YS;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=uk.bind(null,t,e,n),e.then(t,t))}function Xv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jv(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_s(-1,1),e.tag=2,mr(n,e,1))),n.lanes|=1),t)}var XS=Ps.ReactCurrentOwner,Kt=!1;function Lt(t,e,n,s){e.child=t===null?G0(e,null,n,s):zo(e,t.child,n,s)}function Zv(t,e,n,s,r){n=n.render;var i=e.ref;return Co(e,r),s=ig(t,e,n,s,i,r),n=og(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,bs(t,e,r)):(ze&&n&&Hp(e),e.flags|=1,Lt(t,e,s,r),e.child)}function ew(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!gg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,v1(t,e,i,s,r)):(t=Nu(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Pc,n(o,s)&&t.ref===e.ref)return bs(t,e,r)}return e.flags|=1,t=yr(i,s),t.ref=e.ref,t.return=e,e.child=t}function v1(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Pc(i,s)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,bs(t,e,r)}return xm(t,e,n,s,r)}function w1(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(bo,tn),tn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(bo,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Oe(bo,tn),tn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,Oe(bo,tn),tn|=s;return Lt(t,e,r,n),e.child}function _1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xm(t,e,n,s,r){var i=Xt(n)?wi:Ot.current;return i=Lo(e,i),Co(e,r),n=ig(t,e,n,s,i,r),s=og(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,bs(t,e,r)):(ze&&s&&Hp(e),e.flags|=1,Lt(t,e,n,r),e.child)}function tw(t,e,n,s,r){if(Xt(n)){var i=!0;nd(e)}else i=!1;if(Co(e,r),e.stateNode===null)Su(t,e),p1(e,n,s),Tm(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=_n(d):(d=Xt(n)?wi:Ot.current,d=Lo(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||c!==d)&&Qv(e,o,s,d),Xs=!1;var g=e.memoizedState;o.state=g,ad(e,s,o,r),c=e.memoizedState,a!==s||g!==c||Yt.current||Xs?(typeof f=="function"&&(Em(e,n,f,s),c=e.memoizedState),(a=Xs||Kv(e,n,a,s,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=d,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,K0(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Sn(e.type,a),o.props=d,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=_n(c):(c=Xt(n)?wi:Ot.current,c=Lo(e,c));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==c)&&Qv(e,o,s,c),Xs=!1,g=e.memoizedState,o.state=g,ad(e,s,o,r);var S=e.memoizedState;a!==m||g!==S||Yt.current||Xs?(typeof E=="function"&&(Em(e,n,E,s),S=e.memoizedState),(d=Xs||Kv(e,n,d,s,g,S,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=S),o.props=s,o.state=S,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return bm(t,e,n,s,i,r)}function bm(t,e,n,s,r,i){_1(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&zv(e,n,!1),bs(t,e,i);s=e.stateNode,XS.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=zo(e,t.child,null,i),e.child=zo(e,null,a,i)):Lt(t,e,a,i),e.memoizedState=s.state,r&&zv(e,n,!0),e.child}function E1(t){var e=t.stateNode;e.pendingContext?Fv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fv(t,e.context,!1),tg(t,e.containerInfo)}function nw(t,e,n,s,r){return Fo(),Qp(r),e.flags|=256,Lt(t,e,n,s),e.child}var Sm={dehydrated:null,treeContext:null,retryLane:0};function km(t){return{baseLanes:t,cachePool:null,transitions:null}}function T1(t,e,n){var s=e.pendingProps,r=$e.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Oe($e,r&1),t===null)return wm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=sh(o,s,0,null),t=pi(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=km(n),e.memoizedState=Sm,t):lg(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return JS(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=yr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=yr(a,i):(i=pi(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?km(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Sm,s}return i=t.child,t=i.sibling,s=yr(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function lg(t,e){return e=sh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nu(t,e,n,s){return s!==null&&Qp(s),zo(e,t.child,null,n),t=lg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JS(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=If(Error(W(422))),nu(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=sh({mode:"visible",children:s.children},r,0,null),i=pi(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&zo(e,t.child,null,o),e.child.memoizedState=km(o),e.memoizedState=Sm,i);if(!(e.mode&1))return nu(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(W(419)),s=If(i,s,void 0),nu(t,e,o,s)}if(a=(o&t.childLanes)!==0,Kt||a){if(s=mt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,xs(t,r),Rn(s,t,r,-1))}return pg(),s=If(Error(W(421))),nu(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=dk.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,on=fr(r.nextSibling),cn=e,ze=!0,Nn=null,t!==null&&(mn[pn++]=ms,mn[pn++]=ps,mn[pn++]=_i,ms=t.id,ps=t.overflow,_i=e),e=lg(e,s.children),e.flags|=4096,e)}function sw(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),_m(t.return,e,n)}function xf(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function I1(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Lt(t,e,s.children,n),s=$e.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sw(t,n,e);else if(t.tag===19)sw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Oe($e,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&cd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),xf(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&cd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}xf(e,!0,n,null,i);break;case"together":xf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Su(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ti|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ZS(t,e,n){switch(e.tag){case 3:E1(e),Fo();break;case 5:Q0(e);break;case 1:Xt(e.type)&&nd(e);break;case 4:tg(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Oe(id,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Oe($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?T1(t,e,n):(Oe($e,$e.current&1),t=bs(t,e,n),t!==null?t.sibling:null);Oe($e,$e.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return I1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Oe($e,$e.current),s)break;return null;case 22:case 23:return e.lanes=0,w1(t,e,n)}return bs(t,e,n)}var x1,Am,b1,S1;x1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Am=function(){};b1=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,ui(Xn.current);var i=null;switch(n){case"input":r=Yf(t,r),s=Yf(t,s),i=[];break;case"select":r=Ke({},r,{value:void 0}),s=Ke({},s,{value:void 0}),i=[];break;case"textarea":r=Zf(t,r),s=Zf(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=ed)}tm(n,s);var o;n=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var a=r[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ic.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(a=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ic.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Me("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};S1=function(t,e,n,s){n!==s&&(e.flags|=4)};function Fa(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function ek(t,e,n){var s=e.pendingProps;switch(Kp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return Xt(e.type)&&td(),kt(e),null;case 3:return s=e.stateNode,Uo(),Le(Yt),Le(Ot),sg(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(eu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(Vm(Nn),Nn=null))),Am(t,e),kt(e),null;case 5:ng(e);var r=ui(Oc.current);if(n=e.type,t!==null&&e.stateNode!=null)b1(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(W(166));return kt(e),null}if(t=ui(Xn.current),eu(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[qn]=e,s[Dc]=i,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(r=0;r<Ya.length;r++)Me(Ya[r],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":hv(s,i),Me("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Me("invalid",s);break;case"textarea":mv(s,i),Me("invalid",s)}tm(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Zl(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Zl(s.textContent,a,t),r=["children",""+a]):Ic.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",s)}switch(n){case"input":Wl(s),fv(s,i,!0);break;case"textarea":Wl(s),pv(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=ed)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=e0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[qn]=e,t[Dc]=s,x1(t,e,!1,!1),e.stateNode=t;e:{switch(o=nm(n,s),n){case"dialog":Me("cancel",t),Me("close",t),r=s;break;case"iframe":case"object":case"embed":Me("load",t),r=s;break;case"video":case"audio":for(r=0;r<Ya.length;r++)Me(Ya[r],t);r=s;break;case"source":Me("error",t),r=s;break;case"img":case"image":case"link":Me("error",t),Me("load",t),r=s;break;case"details":Me("toggle",t),r=s;break;case"input":hv(t,s),r=Yf(t,s),Me("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ke({},s,{value:void 0}),Me("invalid",t);break;case"textarea":mv(t,s),r=Zf(t,s),Me("invalid",t);break;default:r=s}tm(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?s0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&t0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xc(t,c):typeof c=="number"&&xc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ic.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Me("scroll",t):c!=null&&Dp(t,i,c,o))}switch(n){case"input":Wl(t),fv(t,s,!1);break;case"textarea":Wl(t),pv(t);break;case"option":s.value!=null&&t.setAttribute("value",""+br(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?ko(t,!!s.multiple,i,!1):s.defaultValue!=null&&ko(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ed)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)S1(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(W(166));if(n=ui(Oc.current),ui(Xn.current),eu(e)){if(s=e.stateNode,n=e.memoizedProps,s[qn]=e,(i=s.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:Zl(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zl(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[qn]=e,e.stateNode=s}return kt(e),null;case 13:if(Le($e),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&on!==null&&e.mode&1&&!(e.flags&128))q0(),Fo(),e.flags|=98560,i=!1;else if(i=eu(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[qn]=e}else Fo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),i=!1}else Nn!==null&&(Vm(Nn),Nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?ct===0&&(ct=3):pg())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return Uo(),Am(t,e),t===null&&Cc(e.stateNode.containerInfo),kt(e),null;case 10:return Jp(e.type._context),kt(e),null;case 17:return Xt(e.type)&&td(),kt(e),null;case 19:if(Le($e),i=e.memoizedState,i===null)return kt(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Fa(i,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=cd(t),o!==null){for(e.flags|=128,Fa(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe($e,$e.current&1|2),e.child}t=t.sibling}i.tail!==null&&et()>$o&&(e.flags|=128,s=!0,Fa(i,!1),e.lanes=4194304)}else{if(!s)if(t=cd(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ze)return kt(e),null}else 2*et()-i.renderingStartTime>$o&&n!==1073741824&&(e.flags|=128,s=!0,Fa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=et(),e.sibling=null,n=$e.current,Oe($e,s?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return mg(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?tn&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function tk(t,e){switch(Kp(e),e.tag){case 1:return Xt(e.type)&&td(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Uo(),Le(Yt),Le(Ot),sg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ng(e),null;case 13:if(Le($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Fo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le($e),null;case 4:return Uo(),null;case 10:return Jp(e.type._context),null;case 22:case 23:return mg(),null;case 24:return null;default:return null}}var su=!1,Ct=!1,nk=typeof WeakSet=="function"?WeakSet:Set,te=null;function xo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Xe(t,e,s)}else n.current=null}function Nm(t,e,n){try{n()}catch(s){Xe(t,e,s)}}var rw=!1;function sk(t,e){if(hm=Xu,t=C0(),Gp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var E;m!==n||r!==0&&m.nodeType!==3||(a=o+r),m!==i||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(E=m.firstChild)!==null;)g=m,m=E;for(;;){if(m===t)break t;if(g===n&&++d===r&&(a=o),g===i&&++f===s&&(c=o),(E=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=E}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(fm={focusedElem:t,selectionRange:n},Xu=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,C=S.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?A:Sn(e.type,A),C);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(j){Xe(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return S=rw,rw=!1,S}function uc(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Nm(e,n,i)}r=r.next}while(r!==s)}}function th(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Pm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function k1(t){var e=t.alternate;e!==null&&(t.alternate=null,k1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qn],delete e[Dc],delete e[gm],delete e[FS],delete e[zS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function A1(t){return t.tag===5||t.tag===3||t.tag===4}function iw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||A1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ed));else if(s!==4&&(t=t.child,t!==null))for(Cm(t,e,n),t=t.sibling;t!==null;)Cm(t,e,n),t=t.sibling}function Rm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Rm(t,e,n),t=t.sibling;t!==null;)Rm(t,e,n),t=t.sibling}var wt=null,kn=!1;function qs(t,e,n){for(n=n.child;n!==null;)N1(t,e,n),n=n.sibling}function N1(t,e,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Hd,n)}catch{}switch(n.tag){case 5:Ct||xo(n,e);case 6:var s=wt,r=kn;wt=null,qs(t,e,n),wt=s,kn=r,wt!==null&&(kn?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(kn?(t=wt,n=n.stateNode,t.nodeType===8?yf(t.parentNode,n):t.nodeType===1&&yf(t,n),Ac(t)):yf(wt,n.stateNode));break;case 4:s=wt,r=kn,wt=n.stateNode.containerInfo,kn=!0,qs(t,e,n),wt=s,kn=r;break;case 0:case 11:case 14:case 15:if(!Ct&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Nm(n,e,o),r=r.next}while(r!==s)}qs(t,e,n);break;case 1:if(!Ct&&(xo(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Xe(n,e,a)}qs(t,e,n);break;case 21:qs(t,e,n);break;case 22:n.mode&1?(Ct=(s=Ct)||n.memoizedState!==null,qs(t,e,n),Ct=s):qs(t,e,n);break;default:qs(t,e,n)}}function ow(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nk),e.forEach(function(s){var r=hk.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function bn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,kn=!1;break e;case 3:wt=a.stateNode.containerInfo,kn=!0;break e;case 4:wt=a.stateNode.containerInfo,kn=!0;break e}a=a.return}if(wt===null)throw Error(W(160));N1(i,o,r),wt=null,kn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Xe(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)P1(e,t),e=e.sibling}function P1(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bn(e,t),Un(t),s&4){try{uc(3,t,t.return),th(3,t)}catch(A){Xe(t,t.return,A)}try{uc(5,t,t.return)}catch(A){Xe(t,t.return,A)}}break;case 1:bn(e,t),Un(t),s&512&&n!==null&&xo(n,n.return);break;case 5:if(bn(e,t),Un(t),s&512&&n!==null&&xo(n,n.return),t.flags&32){var r=t.stateNode;try{xc(r,"")}catch(A){Xe(t,t.return,A)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&J2(r,i),nm(a,o);var d=nm(a,i);for(o=0;o<c.length;o+=2){var f=c[o],m=c[o+1];f==="style"?s0(r,m):f==="dangerouslySetInnerHTML"?t0(r,m):f==="children"?xc(r,m):Dp(r,f,m,d)}switch(a){case"input":Xf(r,i);break;case"textarea":Z2(r,i);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?ko(r,!!i.multiple,E,!1):g!==!!i.multiple&&(i.defaultValue!=null?ko(r,!!i.multiple,i.defaultValue,!0):ko(r,!!i.multiple,i.multiple?[]:"",!1))}r[Dc]=i}catch(A){Xe(t,t.return,A)}}break;case 6:if(bn(e,t),Un(t),s&4){if(t.stateNode===null)throw Error(W(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(A){Xe(t,t.return,A)}}break;case 3:if(bn(e,t),Un(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ac(e.containerInfo)}catch(A){Xe(t,t.return,A)}break;case 4:bn(e,t),Un(t);break;case 13:bn(e,t),Un(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(hg=et())),s&4&&ow(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(d=Ct)||f,bn(e,t),Ct=d):bn(e,t),Un(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(te=t,f=t.child;f!==null;){for(m=te=f;te!==null;){switch(g=te,E=g.child,g.tag){case 0:case 11:case 14:case 15:uc(4,g,g.return);break;case 1:xo(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){s=g,n=g.return;try{e=s,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(A){Xe(s,n,A)}}break;case 5:xo(g,g.return);break;case 22:if(g.memoizedState!==null){cw(m);continue}}E!==null?(E.return=g,te=E):cw(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{r=m.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=n0("display",o))}catch(A){Xe(t,t.return,A)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(A){Xe(t,t.return,A)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:bn(e,t),Un(t),s&4&&ow(t);break;case 21:break;default:bn(e,t),Un(t)}}function Un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(A1(n)){var s=n;break e}n=n.return}throw Error(W(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(xc(r,""),s.flags&=-33);var i=iw(t);Rm(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=iw(t);Cm(t,a,o);break;default:throw Error(W(161))}}catch(c){Xe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rk(t,e,n){te=t,C1(t)}function C1(t,e,n){for(var s=(t.mode&1)!==0;te!==null;){var r=te,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||su;if(!o){var a=r.alternate,c=a!==null&&a.memoizedState!==null||Ct;a=su;var d=Ct;if(su=o,(Ct=c)&&!d)for(te=r;te!==null;)o=te,c=o.child,o.tag===22&&o.memoizedState!==null?lw(r):c!==null?(c.return=o,te=c):lw(r);for(;i!==null;)te=i,C1(i),i=i.sibling;te=r,su=a,Ct=d}aw(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,te=i):aw(t)}}function aw(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||th(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Ct)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Sn(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wv(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ac(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Ct||e.flags&512&&Pm(e)}catch(g){Xe(e,e.return,g)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function cw(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function lw(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{th(4,e)}catch(c){Xe(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Xe(e,r,c)}}var i=e.return;try{Pm(e)}catch(c){Xe(e,i,c)}break;case 5:var o=e.return;try{Pm(e)}catch(c){Xe(e,o,c)}}}catch(c){Xe(e,e.return,c)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var ik=Math.ceil,dd=Ps.ReactCurrentDispatcher,ug=Ps.ReactCurrentOwner,vn=Ps.ReactCurrentBatchConfig,be=0,mt=null,nt=null,Tt=0,tn=0,bo=Dr(0),ct=0,Fc=null,Ti=0,nh=0,dg=0,dc=null,Ht=null,hg=0,$o=1/0,hs=null,hd=!1,Dm=null,pr=null,ru=!1,ar=null,fd=0,hc=0,jm=null,ku=-1,Au=0;function zt(){return be&6?et():ku!==-1?ku:ku=et()}function gr(t){return t.mode&1?be&2&&Tt!==0?Tt&-Tt:BS.transition!==null?(Au===0&&(Au=p0()),Au):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:T0(t.type)),t):1}function Rn(t,e,n,s){if(50<hc)throw hc=0,jm=null,Error(W(185));al(t,n,s),(!(be&2)||t!==mt)&&(t===mt&&(!(be&2)&&(nh|=n),ct===4&&Zs(t,Tt)),Jt(t,s),n===1&&be===0&&!(e.mode&1)&&($o=et()+500,Jd&&jr()))}function Jt(t,e){var n=t.callbackNode;Bb(t,e);var s=Yu(t,t===mt?Tt:0);if(s===0)n!==null&&vv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&vv(n),e===1)t.tag===0?US(uw.bind(null,t)):U0(uw.bind(null,t)),MS(function(){!(be&6)&&jr()}),n=null;else{switch(g0(s)){case 1:n=Lp;break;case 4:n=f0;break;case 16:n=Qu;break;case 536870912:n=m0;break;default:n=Qu}n=F1(n,R1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function R1(t,e){if(ku=-1,Au=0,be&6)throw Error(W(327));var n=t.callbackNode;if(Ro()&&t.callbackNode!==n)return null;var s=Yu(t,t===mt?Tt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=md(t,s);else{e=s;var r=be;be|=2;var i=j1();(mt!==t||Tt!==e)&&(hs=null,$o=et()+500,mi(t,e));do try{ck();break}catch(a){D1(t,a)}while(!0);Xp(),dd.current=i,be=r,nt!==null?e=0:(mt=null,Tt=0,e=ct)}if(e!==0){if(e===2&&(r=am(t),r!==0&&(s=r,e=Om(t,r))),e===1)throw n=Fc,mi(t,0),Zs(t,s),Jt(t,et()),n;if(e===6)Zs(t,s);else{if(r=t.current.alternate,!(s&30)&&!ok(r)&&(e=md(t,s),e===2&&(i=am(t),i!==0&&(s=i,e=Om(t,i))),e===1))throw n=Fc,mi(t,0),Zs(t,s),Jt(t,et()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(W(345));case 2:ei(t,Ht,hs);break;case 3:if(Zs(t,s),(s&130023424)===s&&(e=hg+500-et(),10<e)){if(Yu(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){zt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=pm(ei.bind(null,t,Ht,hs),e);break}ei(t,Ht,hs);break;case 4:if(Zs(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Cn(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=et()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*ik(s/1960))-s,10<s){t.timeoutHandle=pm(ei.bind(null,t,Ht,hs),s);break}ei(t,Ht,hs);break;case 5:ei(t,Ht,hs);break;default:throw Error(W(329))}}}return Jt(t,et()),t.callbackNode===n?R1.bind(null,t):null}function Om(t,e){var n=dc;return t.current.memoizedState.isDehydrated&&(mi(t,e).flags|=256),t=md(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&Vm(e)),t}function Vm(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function ok(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Dn(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zs(t,e){for(e&=~dg,e&=~nh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),s=1<<n;t[n]=-1,e&=~s}}function uw(t){if(be&6)throw Error(W(327));Ro();var e=Yu(t,0);if(!(e&1))return Jt(t,et()),null;var n=md(t,e);if(t.tag!==0&&n===2){var s=am(t);s!==0&&(e=s,n=Om(t,s))}if(n===1)throw n=Fc,mi(t,0),Zs(t,e),Jt(t,et()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ei(t,Ht,hs),Jt(t,et()),null}function fg(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&($o=et()+500,Jd&&jr())}}function Ii(t){ar!==null&&ar.tag===0&&!(be&6)&&Ro();var e=be;be|=1;var n=vn.transition,s=Pe;try{if(vn.transition=null,Pe=1,t)return t()}finally{Pe=s,vn.transition=n,be=e,!(be&6)&&jr()}}function mg(){tn=bo.current,Le(bo)}function mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,VS(n)),nt!==null)for(n=nt.return;n!==null;){var s=n;switch(Kp(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&td();break;case 3:Uo(),Le(Yt),Le(Ot),sg();break;case 5:ng(s);break;case 4:Uo();break;case 13:Le($e);break;case 19:Le($e);break;case 10:Jp(s.type._context);break;case 22:case 23:mg()}n=n.return}if(mt=t,nt=t=yr(t.current,null),Tt=tn=e,ct=0,Fc=null,dg=nh=Ti=0,Ht=dc=null,li!==null){for(e=0;e<li.length;e++)if(n=li[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}li=null}return t}function D1(t,e){do{var n=nt;try{if(Xp(),xu.current=ud,ld){for(var s=We.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}ld=!1}if(Ei=0,ft=at=We=null,lc=!1,Vc=0,ug.current=null,n===null||n.return===null){ct=1,Fc=e,nt=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Tt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=Xv(o);if(E!==null){E.flags&=-257,Jv(E,o,a,i,e),E.mode&1&&Yv(i,d,e),e=E,c=d;var S=e.updateQueue;if(S===null){var A=new Set;A.add(c),e.updateQueue=A}else S.add(c);break e}else{if(!(e&1)){Yv(i,d,e),pg();break e}c=Error(W(426))}}else if(ze&&a.mode&1){var C=Xv(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Jv(C,o,a,i,e),Qp(Bo(c,a));break e}}i=c=Bo(c,a),ct!==4&&(ct=2),dc===null?dc=[i]:dc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=g1(i,c,e);qv(i,x);break e;case 1:a=c;var v=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(pr===null||!pr.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=y1(i,a,e);qv(i,j);break e}}i=i.return}while(i!==null)}V1(n)}catch(L){e=L,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function j1(){var t=dd.current;return dd.current=ud,t===null?ud:t}function pg(){(ct===0||ct===3||ct===2)&&(ct=4),mt===null||!(Ti&268435455)&&!(nh&268435455)||Zs(mt,Tt)}function md(t,e){var n=be;be|=2;var s=j1();(mt!==t||Tt!==e)&&(hs=null,mi(t,e));do try{ak();break}catch(r){D1(t,r)}while(!0);if(Xp(),be=n,dd.current=s,nt!==null)throw Error(W(261));return mt=null,Tt=0,ct}function ak(){for(;nt!==null;)O1(nt)}function ck(){for(;nt!==null&&!Db();)O1(nt)}function O1(t){var e=L1(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?V1(t):nt=e,ug.current=null}function V1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tk(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,nt=null;return}}else if(n=ek(n,e,tn),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);ct===0&&(ct=5)}function ei(t,e,n){var s=Pe,r=vn.transition;try{vn.transition=null,Pe=1,lk(t,e,n,s)}finally{vn.transition=r,Pe=s}return null}function lk(t,e,n,s){do Ro();while(ar!==null);if(be&6)throw Error(W(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if($b(t,i),t===mt&&(nt=mt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ru||(ru=!0,F1(Qu,function(){return Ro(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vn.transition,vn.transition=null;var o=Pe;Pe=1;var a=be;be|=4,ug.current=null,sk(t,n),P1(n,t),NS(fm),Xu=!!hm,fm=hm=null,t.current=n,rk(n),jb(),be=a,Pe=o,vn.transition=i}else t.current=n;if(ru&&(ru=!1,ar=t,fd=r),i=t.pendingLanes,i===0&&(pr=null),Mb(n.stateNode),Jt(t,et()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(hd)throw hd=!1,t=Dm,Dm=null,t;return fd&1&&t.tag!==0&&Ro(),i=t.pendingLanes,i&1?t===jm?hc++:(hc=0,jm=t):hc=0,jr(),null}function Ro(){if(ar!==null){var t=g0(fd),e=vn.transition,n=Pe;try{if(vn.transition=null,Pe=16>t?16:t,ar===null)var s=!1;else{if(t=ar,ar=null,fd=0,be&6)throw Error(W(331));var r=be;for(be|=4,te=t.current;te!==null;){var i=te,o=i.child;if(te.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(te=d;te!==null;){var f=te;switch(f.tag){case 0:case 11:case 15:uc(8,f,i)}var m=f.child;if(m!==null)m.return=f,te=m;else for(;te!==null;){f=te;var g=f.sibling,E=f.return;if(k1(f),f===d){te=null;break}if(g!==null){g.return=E,te=g;break}te=E}}}var S=i.alternate;if(S!==null){var A=S.child;if(A!==null){S.child=null;do{var C=A.sibling;A.sibling=null,A=C}while(A!==null)}}te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,te=o;else e:for(;te!==null;){if(i=te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:uc(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,te=x;break e}te=i.return}}var v=t.current;for(te=v;te!==null;){o=te;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,te=I;else e:for(o=v;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:th(9,a)}}catch(L){Xe(a,a.return,L)}if(a===o){te=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,te=j;break e}te=a.return}}if(be=r,jr(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Hd,t)}catch{}s=!0}return s}finally{Pe=n,vn.transition=e}}return!1}function dw(t,e,n){e=Bo(n,e),e=g1(t,e,1),t=mr(t,e,1),e=zt(),t!==null&&(al(t,1,e),Jt(t,e))}function Xe(t,e,n){if(t.tag===3)dw(t,t,n);else for(;e!==null;){if(e.tag===3){dw(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(pr===null||!pr.has(s))){t=Bo(n,t),t=y1(e,t,1),e=mr(e,t,1),t=zt(),e!==null&&(al(e,1,t),Jt(e,t));break}}e=e.return}}function uk(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(Tt&n)===n&&(ct===4||ct===3&&(Tt&130023424)===Tt&&500>et()-hg?mi(t,0):dg|=n),Jt(t,e)}function M1(t,e){e===0&&(t.mode&1?(e=Kl,Kl<<=1,!(Kl&130023424)&&(Kl=4194304)):e=1);var n=zt();t=xs(t,e),t!==null&&(al(t,e,n),Jt(t,n))}function dk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),M1(t,n)}function hk(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(W(314))}s!==null&&s.delete(e),M1(t,n)}var L1;L1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,ZS(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,ze&&e.flags&1048576&&B0(e,rd,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Su(t,e),t=e.pendingProps;var r=Lo(e,Ot.current);Co(e,n),r=ig(null,e,s,t,r,n);var i=og();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(s)?(i=!0,nd(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,eg(e),r.updater=eh,e.stateNode=r,r._reactInternals=e,Tm(e,s,t,n),e=bm(null,e,s,!0,i,n)):(e.tag=0,ze&&i&&Hp(e),Lt(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Su(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=mk(s),t=Sn(s,t),r){case 0:e=xm(null,e,s,t,n);break e;case 1:e=tw(null,e,s,t,n);break e;case 11:e=Zv(null,e,s,t,n);break e;case 14:e=ew(null,e,s,Sn(s.type,t),n);break e}throw Error(W(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Sn(s,r),xm(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Sn(s,r),tw(t,e,s,r,n);case 3:e:{if(E1(e),t===null)throw Error(W(387));s=e.pendingProps,i=e.memoizedState,r=i.element,K0(t,e),ad(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Bo(Error(W(423)),e),e=nw(t,e,s,n,r);break e}else if(s!==r){r=Bo(Error(W(424)),e),e=nw(t,e,s,n,r);break e}else for(on=fr(e.stateNode.containerInfo.firstChild),cn=e,ze=!0,Nn=null,n=G0(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fo(),s===r){e=bs(t,e,n);break e}Lt(t,e,s,n)}e=e.child}return e;case 5:return Q0(e),t===null&&wm(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,mm(s,r)?o=null:i!==null&&mm(s,i)&&(e.flags|=32),_1(t,e),Lt(t,e,o,n),e.child;case 6:return t===null&&wm(e),null;case 13:return T1(t,e,n);case 4:return tg(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=zo(e,null,s,n):Lt(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Sn(s,r),Zv(t,e,s,r,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Oe(id,s._currentValue),s._currentValue=o,i!==null)if(Dn(i.value,o)){if(i.children===r.children&&!Yt.current){e=bs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=_s(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),_m(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_m(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Lt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Co(e,n),r=_n(r),s=s(r),e.flags|=1,Lt(t,e,s,n),e.child;case 14:return s=e.type,r=Sn(s,e.pendingProps),r=Sn(s.type,r),ew(t,e,s,r,n);case 15:return v1(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Sn(s,r),Su(t,e),e.tag=1,Xt(s)?(t=!0,nd(e)):t=!1,Co(e,n),p1(e,s,r),Tm(e,s,r,n),bm(null,e,s,!0,t,n);case 19:return I1(t,e,n);case 22:return w1(t,e,n)}throw Error(W(156,e.tag))};function F1(t,e){return h0(t,e)}function fk(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,e,n,s){return new fk(t,e,n,s)}function gg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mk(t){if(typeof t=="function")return gg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Op)return 11;if(t===Vp)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nu(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")gg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case po:return pi(n.children,r,i,e);case jp:o=8,r|=8;break;case Gf:return t=gn(12,n,e,r|2),t.elementType=Gf,t.lanes=i,t;case Hf:return t=gn(13,n,e,r),t.elementType=Hf,t.lanes=i,t;case Kf:return t=gn(19,n,e,r),t.elementType=Kf,t.lanes=i,t;case Q2:return sh(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case H2:o=10;break e;case K2:o=9;break e;case Op:o=11;break e;case Vp:o=14;break e;case Ys:o=16,s=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=gn(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function pi(t,e,n,s){return t=gn(7,t,s,e),t.lanes=n,t}function sh(t,e,n,s){return t=gn(22,t,s,e),t.elementType=Q2,t.lanes=n,t.stateNode={isHidden:!1},t}function bf(t,e,n){return t=gn(6,t,null,e),t.lanes=n,t}function Sf(t,e,n){return e=gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pk(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=of(0),this.expirationTimes=of(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=of(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function yg(t,e,n,s,r,i,o,a,c){return t=new pk(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=gn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eg(i),t}function gk(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mo,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function z1(t){if(!t)return Sr;t=t._reactInternals;e:{if(Mi(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Xt(n))return z0(t,n,e)}return e}function U1(t,e,n,s,r,i,o,a,c){return t=yg(n,s,!0,t,r,i,o,a,c),t.context=z1(null),n=t.current,s=zt(),r=gr(n),i=_s(s,r),i.callback=e??null,mr(n,i,r),t.current.lanes=r,al(t,r,s),Jt(t,s),t}function rh(t,e,n,s){var r=e.current,i=zt(),o=gr(r);return n=z1(n),e.context===null?e.context=n:e.pendingContext=n,e=_s(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=mr(r,e,o),t!==null&&(Rn(t,r,o,i),Iu(t,r,o)),o}function pd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vg(t,e){hw(t,e),(t=t.alternate)&&hw(t,e)}function yk(){return null}var B1=typeof reportError=="function"?reportError:function(t){console.error(t)};function wg(t){this._internalRoot=t}ih.prototype.render=wg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));rh(t,e,null,null)};ih.prototype.unmount=wg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ii(function(){rh(null,t,null,null)}),e[Is]=null}};function ih(t){this._internalRoot=t}ih.prototype.unstable_scheduleHydration=function(t){if(t){var e=w0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Js.length&&e!==0&&e<Js[n].priority;n++);Js.splice(n,0,t),n===0&&E0(t)}};function _g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function oh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fw(){}function vk(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=pd(o);i.call(d)}}var o=U1(e,s,t,0,null,!1,!1,"",fw);return t._reactRootContainer=o,t[Is]=o.current,Cc(t.nodeType===8?t.parentNode:t),Ii(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var d=pd(c);a.call(d)}}var c=yg(t,0,!1,null,null,!1,!1,"",fw);return t._reactRootContainer=c,t[Is]=c.current,Cc(t.nodeType===8?t.parentNode:t),Ii(function(){rh(e,c,n,s)}),c}function ah(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var c=pd(o);a.call(c)}}rh(e,o,t,r)}else o=vk(n,e,t,r,s);return pd(o)}y0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qa(e.pendingLanes);n!==0&&(Fp(e,n|1),Jt(e,et()),!(be&6)&&($o=et()+500,jr()))}break;case 13:Ii(function(){var s=xs(t,1);if(s!==null){var r=zt();Rn(s,t,1,r)}}),vg(t,1)}};zp=function(t){if(t.tag===13){var e=xs(t,134217728);if(e!==null){var n=zt();Rn(e,t,134217728,n)}vg(t,134217728)}};v0=function(t){if(t.tag===13){var e=gr(t),n=xs(t,e);if(n!==null){var s=zt();Rn(n,t,e,s)}vg(t,e)}};w0=function(){return Pe};_0=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};rm=function(t,e,n){switch(e){case"input":if(Xf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Xd(s);if(!r)throw Error(W(90));X2(s),Xf(s,r)}}}break;case"textarea":Z2(t,n);break;case"select":e=n.value,e!=null&&ko(t,!!n.multiple,e,!1)}};o0=fg;a0=Ii;var wk={usingClientEntryPoint:!1,Events:[ll,wo,Xd,r0,i0,fg]},za={findFiberByHostInstance:ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_k={bundleType:za.bundleType,version:za.version,rendererPackageName:za.rendererPackageName,rendererConfig:za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=u0(t),t===null?null:t.stateNode},findFiberByHostInstance:za.findFiberByHostInstance||yk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{Hd=iu.inject(_k),Yn=iu}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wk;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_g(e))throw Error(W(200));return gk(t,e,null,n)};dn.createRoot=function(t,e){if(!_g(t))throw Error(W(299));var n=!1,s="",r=B1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=yg(t,1,!1,null,null,n,!1,s,r),t[Is]=e.current,Cc(t.nodeType===8?t.parentNode:t),new wg(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=u0(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return Ii(t)};dn.hydrate=function(t,e,n){if(!oh(e))throw Error(W(200));return ah(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!_g(t))throw Error(W(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=B1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=U1(e,null,t,1,n??null,r,!1,i,o),t[Is]=e.current,Cc(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new ih(e)};dn.render=function(t,e,n){if(!oh(e))throw Error(W(200));return ah(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!oh(t))throw Error(W(40));return t._reactRootContainer?(Ii(function(){ah(null,null,t,!1,function(){t._reactRootContainer=null,t[Is]=null})}),!0):!1};dn.unstable_batchedUpdates=fg;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!oh(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return ah(t,e,n,!1,s)};dn.version="18.3.1-next-f1338f8080-20240426";function $1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($1)}catch(t){console.error(t)}}$1(),$2.exports=dn;var Ek=$2.exports,mw=Ek;qf.createRoot=mw.createRoot,qf.hydrateRoot=mw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zc(){return zc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},zc.apply(this,arguments)}var cr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(cr||(cr={}));const pw="popstate";function Tk(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:o,hash:a}=s.location;return Mm("",{pathname:i,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:gd(r)}return xk(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function q1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ik(){return Math.random().toString(36).substr(2,8)}function gw(t,e){return{usr:t.state,key:t.key,idx:e}}function Mm(t,e,n,s){return n===void 0&&(n=null),zc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ca(e):e,{state:n,key:e&&e.key||s||Ik()})}function gd(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ca(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function xk(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,a=cr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(zc({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){a=cr.Pop;let C=f(),x=C==null?null:C-d;d=C,c&&c({action:a,location:A.location,delta:x})}function g(C,x){a=cr.Push;let v=Mm(A.location,C,x);d=f()+1;let I=gw(v,d),j=A.createHref(v);try{o.pushState(I,"",j)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(j)}i&&c&&c({action:a,location:A.location,delta:1})}function E(C,x){a=cr.Replace;let v=Mm(A.location,C,x);d=f();let I=gw(v,d),j=A.createHref(v);o.replaceState(I,"",j),i&&c&&c({action:a,location:A.location,delta:0})}function S(C){let x=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof C=="string"?C:gd(C);return v=v.replace(/ $/,"%20"),Ge(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let A={get action(){return a},get location(){return t(r,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(pw,m),c=C,()=>{r.removeEventListener(pw,m),c=null}},createHref(C){return e(r,C)},createURL:S,encodeLocation(C){let x=S(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:E,go(C){return o.go(C)}};return A}var yw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yw||(yw={}));function bk(t,e,n){return n===void 0&&(n="/"),Sk(t,e,n)}function Sk(t,e,n,s){let r=typeof e=="string"?ca(e):e,i=qo(r.pathname||"/",n);if(i==null)return null;let o=W1(t);kk(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=Lk(i);a=Vk(o[c],d)}return a}function W1(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ge(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=vr([s,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(Ge(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),W1(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:jk(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))r(i,o);else for(let c of G1(i.path))r(i,o,c)}),e}function G1(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=G1(s.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function kk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Ok(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const Ak=/^:[\w-]+$/,Nk=3,Pk=2,Ck=1,Rk=10,Dk=-2,vw=t=>t==="*";function jk(t,e){let n=t.split("/"),s=n.length;return n.some(vw)&&(s+=Dk),e&&(s+=Pk),n.filter(r=>!vw(r)).reduce((r,i)=>r+(Ak.test(i)?Nk:i===""?Ck:Rk),s)}function Ok(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function Vk(t,e,n){let{routesMeta:s}=t,r={},i="/",o=[];for(let a=0;a<s.length;++a){let c=s[a],d=a===s.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Lm({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!m)return null;Object.assign(r,m.params),o.push({params:r,pathname:vr([i,m.pathname]),pathnameBase:Bk(vr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=vr([i,m.pathnameBase]))}return o}function Lm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=Mk(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce((d,f,m)=>{let{paramName:g,isOptional:E}=f;if(g==="*"){let A=a[m]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const S=a[m];return E&&!S?d[g]=void 0:d[g]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Mk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),q1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(s.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function Lk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return q1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function Fk(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?ca(t):t;return{pathname:n?n.startsWith("/")?n:zk(n,e):e,search:$k(s),hash:qk(r)}}function zk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function kf(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Uk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Eg(t,e){let n=Uk(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Tg(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=ca(t):(r=zc({},t),Ge(!r.pathname||!r.pathname.includes("?"),kf("?","pathname","search",r)),Ge(!r.pathname||!r.pathname.includes("#"),kf("#","pathname","hash",r)),Ge(!r.search||!r.search.includes("#"),kf("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;r.pathname=g.join("/")}a=m>=0?e[m]:"/"}let c=Fk(r,a),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const vr=t=>t.join("/").replace(/\/\/+/g,"/"),Bk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$k=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Wk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const H1=["post","put","patch","delete"];new Set(H1);const Gk=["get",...H1];new Set(Gk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Uc.apply(this,arguments)}const ch=N.createContext(null),K1=N.createContext(null),Cs=N.createContext(null),lh=N.createContext(null),Rs=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Q1=N.createContext(null);function Hk(t,e){let{relative:n}=e===void 0?{}:e;la()||Ge(!1);let{basename:s,navigator:r}=N.useContext(Cs),{hash:i,pathname:o,search:a}=dh(t,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:vr([s,o])),r.createHref({pathname:c,search:a,hash:i})}function la(){return N.useContext(lh)!=null}function ua(){return la()||Ge(!1),N.useContext(lh).location}function Y1(t){N.useContext(Cs).static||N.useLayoutEffect(t)}function uh(){let{isDataRoute:t}=N.useContext(Rs);return t?cA():Kk()}function Kk(){la()||Ge(!1);let t=N.useContext(ch),{basename:e,future:n,navigator:s}=N.useContext(Cs),{matches:r}=N.useContext(Rs),{pathname:i}=ua(),o=JSON.stringify(Eg(r,n.v7_relativeSplatPath)),a=N.useRef(!1);return Y1(()=>{a.current=!0}),N.useCallback(function(d,f){if(f===void 0&&(f={}),!a.current)return;if(typeof d=="number"){s.go(d);return}let m=Tg(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:vr([e,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[e,s,o,i,t])}const Qk=N.createContext(null);function Yk(t){let e=N.useContext(Rs).outlet;return e&&N.createElement(Qk.Provider,{value:t},e)}function dh(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=N.useContext(Cs),{matches:r}=N.useContext(Rs),{pathname:i}=ua(),o=JSON.stringify(Eg(r,s.v7_relativeSplatPath));return N.useMemo(()=>Tg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Xk(t,e){return Jk(t,e)}function Jk(t,e,n,s){la()||Ge(!1);let{navigator:r}=N.useContext(Cs),{matches:i}=N.useContext(Rs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=ua(),f;if(e){var m;let C=typeof e=="string"?ca(e):e;c==="/"||(m=C.pathname)!=null&&m.startsWith(c)||Ge(!1),f=C}else f=d;let g=f.pathname||"/",E=g;if(c!=="/"){let C=c.replace(/^\//,"").split("/");E="/"+g.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=bk(t,{pathname:E}),A=sA(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:vr([c,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:vr([c,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,s);return e&&A?N.createElement(lh.Provider,{value:{location:Uc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:cr.Pop}},A):A}function Zk(){let t=aA(),e=Wk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:r},n):null,null)}const eA=N.createElement(Zk,null);class tA extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Rs.Provider,{value:this.props.routeContext},N.createElement(Q1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nA(t){let{routeContext:e,match:n,children:s}=t,r=N.useContext(ch);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Rs.Provider,{value:e},s)}function sA(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let f=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);f>=0||Ge(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:E}=n,S=m.route.loader&&g[m.route.id]===void 0&&(!E||E[m.route.id]===void 0);if(m.route.lazy||S){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let E,S=!1,A=null,C=null;n&&(E=a&&m.route.id?a[m.route.id]:void 0,A=m.route.errorElement||eA,c&&(d<0&&g===0?(lA("route-fallback"),S=!0,C=null):d===g&&(S=!0,C=m.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),v=()=>{let I;return E?I=A:S?I=C:m.route.Component?I=N.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=f,N.createElement(nA,{match:m,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:I})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?N.createElement(tA,{location:n.location,revalidation:n.revalidation,component:A,error:E,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var X1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(X1||{}),J1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(J1||{});function rA(t){let e=N.useContext(ch);return e||Ge(!1),e}function iA(t){let e=N.useContext(K1);return e||Ge(!1),e}function oA(t){let e=N.useContext(Rs);return e||Ge(!1),e}function Z1(t){let e=oA(),n=e.matches[e.matches.length-1];return n.route.id||Ge(!1),n.route.id}function aA(){var t;let e=N.useContext(Q1),n=iA(),s=Z1();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function cA(){let{router:t}=rA(X1.UseNavigateStable),e=Z1(J1.UseNavigateStable),n=N.useRef(!1);return Y1(()=>{n.current=!0}),N.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Uc({fromRouteId:e},i)))},[t,e])}const ww={};function lA(t,e,n){ww[t]||(ww[t]=!0)}function uA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function yd(t){let{to:e,replace:n,state:s,relative:r}=t;la()||Ge(!1);let{future:i,static:o}=N.useContext(Cs),{matches:a}=N.useContext(Rs),{pathname:c}=ua(),d=uh(),f=Tg(e,Eg(a,i.v7_relativeSplatPath),c,r==="path"),m=JSON.stringify(f);return N.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:r}),[d,m,r,n,s]),null}function dA(t){return Yk(t.context)}function fn(t){Ge(!1)}function hA(t){let{basename:e="/",children:n=null,location:s,navigationType:r=cr.Pop,navigator:i,static:o=!1,future:a}=t;la()&&Ge(!1);let c=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:c,navigator:i,static:o,future:Uc({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof s=="string"&&(s=ca(s));let{pathname:f="/",search:m="",hash:g="",state:E=null,key:S="default"}=s,A=N.useMemo(()=>{let C=qo(f,c);return C==null?null:{location:{pathname:C,search:m,hash:g,state:E,key:S},navigationType:r}},[c,f,m,g,E,S,r]);return A==null?null:N.createElement(Cs.Provider,{value:d},N.createElement(lh.Provider,{children:n,value:A}))}function fA(t){let{children:e,location:n}=t;return Xk(Fm(e),n)}new Promise(()=>{});function Fm(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(s,r)=>{if(!N.isValidElement(s))return;let i=[...e,r];if(s.type===N.Fragment){n.push.apply(n,Fm(s.props.children,i));return}s.type!==fn&&Ge(!1),!s.props.index||!s.props.children||Ge(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Fm(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},vd.apply(this,arguments)}function eE(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function mA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pA(t,e){return t.button===0&&(!e||e==="_self")&&!mA(t)}const gA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],vA="6";try{window.__reactRouterVersion=vA}catch{}const wA=N.createContext({isTransitioning:!1}),_A="startTransition",_w=ub[_A];function EA(t){let{basename:e,children:n,future:s,window:r}=t,i=N.useRef();i.current==null&&(i.current=Tk({window:r,v5Compat:!0}));let o=i.current,[a,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},f=N.useCallback(m=>{d&&_w?_w(()=>c(m)):c(m)},[c,d]);return N.useLayoutEffect(()=>o.listen(f),[o,f]),N.useEffect(()=>uA(s),[s]),N.createElement(hA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:s})}const TA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xA=N.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:o,state:a,target:c,to:d,preventScrollReset:f,viewTransition:m}=e,g=eE(e,gA),{basename:E}=N.useContext(Cs),S,A=!1;if(typeof d=="string"&&IA.test(d)&&(S=d,TA))try{let I=new URL(window.location.href),j=d.startsWith("//")?new URL(I.protocol+d):new URL(d),L=qo(j.pathname,E);j.origin===I.origin&&L!=null?d=L+j.search+j.hash:A=!0}catch{}let C=Hk(d,{relative:r}),x=SA(d,{replace:o,state:a,target:c,preventScrollReset:f,relative:r,viewTransition:m});function v(I){s&&s(I),I.defaultPrevented||x(I)}return N.createElement("a",vd({},g,{href:S||C,onClick:A||i?s:v,ref:n,target:c}))}),to=N.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:r=!1,className:i="",end:o=!1,style:a,to:c,viewTransition:d,children:f}=e,m=eE(e,yA),g=dh(c,{relative:m.relative}),E=ua(),S=N.useContext(K1),{navigator:A,basename:C}=N.useContext(Cs),x=S!=null&&kA(g)&&d===!0,v=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,I=E.pathname,j=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(I=I.toLowerCase(),j=j?j.toLowerCase():null,v=v.toLowerCase()),j&&C&&(j=qo(j,C)||j);const L=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let M=I===v||!o&&I.startsWith(v)&&I.charAt(L)==="/",_=j!=null&&(j===v||!o&&j.startsWith(v)&&j.charAt(v.length)==="/"),y={isActive:M,isPending:_,isTransitioning:x},T=M?s:void 0,k;typeof i=="function"?k=i(y):k=[i,M?"active":null,_?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(y):a;return N.createElement(xA,vd({},m,{"aria-current":T,className:k,ref:n,style:R,to:c,viewTransition:d}),typeof f=="function"?f(y):f)});var zm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(zm||(zm={}));var Ew;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ew||(Ew={}));function bA(t){let e=N.useContext(ch);return e||Ge(!1),e}function SA(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,c=uh(),d=ua(),f=dh(t,{relative:o});return N.useCallback(m=>{if(pA(m,n)){m.preventDefault();let g=s!==void 0?s:gd(d)===gd(f);c(t,{replace:g,state:r,preventScrollReset:i,relative:o,viewTransition:a})}},[d,c,f,s,r,n,t,i,o,a])}function kA(t,e){e===void 0&&(e={});let n=N.useContext(wA);n==null&&Ge(!1);let{basename:s}=bA(zm.useViewTransitionState),r=dh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=qo(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=qo(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Lm(r.pathname,o)!=null||Lm(r.pathname,i)!=null}const AA=()=>{};var Tw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},NA=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},nE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,f=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|d>>6,E=d&63;c||(E=64,o||(g=64)),s.push(n[f],n[m],n[g],n[E])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||d==null||m==null)throw new PA;const g=i<<2|a>>4;if(s.push(g),d!==64){const E=a<<4&240|d>>2;if(s.push(E),m!==64){const S=d<<6&192|m;s.push(S)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CA=function(t){const e=tE(t);return nE.encodeByteArray(e,!0)},wd=function(t){return CA(t).replace(/\./g,"")},sE=function(t){try{return nE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=()=>rE().__FIREBASE_DEFAULTS__,DA=()=>{if(typeof process>"u"||typeof Tw>"u")return;const t=Tw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sE(t[1]);return e&&JSON.parse(e)},hh=()=>{try{return AA()||RA()||DA()||jA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iE=t=>{var e,n;return(n=(e=hh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oE=t=>{const e=iE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},aE=()=>{var t;return(t=hh())===null||t===void 0?void 0:t.config},cE=t=>{var e;return(e=hh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){return t.endsWith(".cloudworkstations.dev")}async function Ig(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wd(JSON.stringify(n)),wd(JSON.stringify(o)),""].join(".")}const fc={};function MA(){const t={prod:[],emulator:[]};for(const e of Object.keys(fc))fc[e]?t.emulator.push(e):t.prod.push(e);return t}function LA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Iw=!1;function xg(t,e){if(typeof window>"u"||typeof document>"u"||!Li(window.location.host)||fc[t]===e||fc[t]||Iw)return;fc[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=MA().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,E){g.setAttribute("width","24"),g.setAttribute("id",E),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Iw=!0,o()},g}function f(g,E){g.setAttribute("id",E),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=LA(s),E=n("text"),S=document.getElementById(E)||document.createElement("span"),A=n("learnmore"),C=document.getElementById(A)||document.createElement("a"),x=n("preprendIcon"),v=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;a(I),f(C,A);const j=d();c(v,x),I.append(v,S,C,j),document.body.appendChild(I)}i?(S.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function lE(){var t;const e=(t=hh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $A(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uE(){return!lE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dE(){return!lE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function hE(){try{return typeof indexedDB=="object"}catch{return!1}}function qA(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="FirebaseError";class Ds extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=WA,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?GA(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ds(r,a,s)}}function GA(t,e){return t.replace(HA,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const HA=/\{\$([^}]+)}/g;function KA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xi(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(xw(i)&&xw(o)){if(!xi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function xw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Ja(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function QA(t,e){const n=new YA(t,e);return n.subscribe.bind(n)}class YA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");XA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Af),r.error===void 0&&(r.error=Af),r.complete===void 0&&(r.complete=Af);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Af(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class kr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new OA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eN(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ZA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZA(t){return t===ti?void 0:t}function eN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const nN={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},sN=we.INFO,rN={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},iN=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=rN[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bg{constructor(e){this.name=e,this._logLevel=sN,this._logHandler=iN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const oN=(t,e)=>e.some(n=>t instanceof n);let bw,Sw;function aN(){return bw||(bw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cN(){return Sw||(Sw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fE=new WeakMap,Um=new WeakMap,mE=new WeakMap,Nf=new WeakMap,Sg=new WeakMap;function lN(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wr(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&fE.set(n,t)}).catch(()=>{}),Sg.set(e,t),e}function uN(t){if(Um.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Um.set(t,e)}let Bm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Um.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dN(t){Bm=t(Bm)}function hN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Pf(this),e,...n);return mE.set(s,e.sort?e.sort():[e]),wr(s)}:cN().includes(t)?function(...e){return t.apply(Pf(this),e),wr(fE.get(this))}:function(...e){return wr(t.apply(Pf(this),e))}}function fN(t){return typeof t=="function"?hN(t):(t instanceof IDBTransaction&&uN(t),oN(t,aN())?new Proxy(t,Bm):t)}function wr(t){if(t instanceof IDBRequest)return lN(t);if(Nf.has(t))return Nf.get(t);const e=fN(t);return e!==t&&(Nf.set(t,e),Sg.set(e,t)),e}const Pf=t=>Sg.get(t);function mN(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=wr(o);return s&&o.addEventListener("upgradeneeded",c=>{s(wr(o.result),c.oldVersion,c.newVersion,wr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const pN=["get","getKey","getAll","getAllKeys","count"],gN=["put","add","delete","clear"],Cf=new Map;function kw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cf.get(e))return Cf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=gN.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||pN.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),r&&c.done]))[0]};return Cf.set(e,i),i}dN(t=>({...t,get:(e,n,s)=>kw(e,n)||t.get(e,n,s),has:(e,n)=>!!kw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vN(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function vN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $m="@firebase/app",Aw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new bg("@firebase/app"),wN="@firebase/app-compat",_N="@firebase/analytics-compat",EN="@firebase/analytics",TN="@firebase/app-check-compat",IN="@firebase/app-check",xN="@firebase/auth",bN="@firebase/auth-compat",SN="@firebase/database",kN="@firebase/data-connect",AN="@firebase/database-compat",NN="@firebase/functions",PN="@firebase/functions-compat",CN="@firebase/installations",RN="@firebase/installations-compat",DN="@firebase/messaging",jN="@firebase/messaging-compat",ON="@firebase/performance",VN="@firebase/performance-compat",MN="@firebase/remote-config",LN="@firebase/remote-config-compat",FN="@firebase/storage",zN="@firebase/storage-compat",UN="@firebase/firestore",BN="@firebase/ai",$N="@firebase/firestore-compat",qN="firebase",WN="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="[DEFAULT]",GN={[$m]:"fire-core",[wN]:"fire-core-compat",[EN]:"fire-analytics",[_N]:"fire-analytics-compat",[IN]:"fire-app-check",[TN]:"fire-app-check-compat",[xN]:"fire-auth",[bN]:"fire-auth-compat",[SN]:"fire-rtdb",[kN]:"fire-data-connect",[AN]:"fire-rtdb-compat",[NN]:"fire-fn",[PN]:"fire-fn-compat",[CN]:"fire-iid",[RN]:"fire-iid-compat",[DN]:"fire-fcm",[jN]:"fire-fcm-compat",[ON]:"fire-perf",[VN]:"fire-perf-compat",[MN]:"fire-rc",[LN]:"fire-rc-compat",[FN]:"fire-gcs",[zN]:"fire-gcs-compat",[UN]:"fire-fst",[$N]:"fire-fst-compat",[BN]:"fire-vertex","fire-js":"fire-js",[qN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Map,HN=new Map,Wm=new Map;function Nw(t,e){try{t.container.addComponent(e)}catch(n){Ss.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bi(t){const e=t.name;if(Wm.has(e))return Ss.debug(`There were multiple attempts to register component ${e}.`),!1;Wm.set(e,t);for(const n of _d.values())Nw(n,t);for(const n of HN.values())Nw(n,t);return!0}function fh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new dl("app","Firebase",KN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=WN;function pE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:qm,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw _r.create("bad-app-name",{appName:String(r)});if(n||(n=aE()),!n)throw _r.create("no-options");const i=_d.get(r);if(i){if(xi(n,i.options)&&xi(s,i.config))return i;throw _r.create("duplicate-app",{appName:r})}const o=new tN(r);for(const c of Wm.values())o.addComponent(c);const a=new QN(n,s,o);return _d.set(r,a),a}function kg(t=qm){const e=_d.get(t);if(!e&&t===qm&&aE())return pE();if(!e)throw _r.create("no-app",{appName:t});return e}function Jn(t,e,n){var s;let r=(s=GN[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ss.warn(a.join(" "));return}bi(new kr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="firebase-heartbeat-database",XN=1,Bc="firebase-heartbeat-store";let Rf=null;function gE(){return Rf||(Rf=mN(YN,XN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bc)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),Rf}async function JN(t){try{const n=(await gE()).transaction(Bc),s=await n.objectStore(Bc).get(yE(t));return await n.done,s}catch(e){if(e instanceof Ds)Ss.warn(e.message);else{const n=_r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ss.warn(n.message)}}}async function Pw(t,e){try{const s=(await gE()).transaction(Bc,"readwrite");await s.objectStore(Bc).put(e,yE(t)),await s.done}catch(n){if(n instanceof Ds)Ss.warn(n.message);else{const s=_r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ss.warn(s.message)}}}function yE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=1024,eP=30;class tP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sP(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Cw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>eP){const o=rP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ss.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Cw(),{heartbeatsToSend:s,unsentEntries:r}=nP(this._heartbeatsCache.heartbeats),i=wd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ss.warn(n),""}}}function Cw(){return new Date().toISOString().substring(0,10)}function nP(t,e=ZN){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Rw(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Rw(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class sP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hE()?qA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await JN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Pw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Pw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Rw(t){return wd(JSON.stringify({version:2,heartbeats:t})).length}function rP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t){bi(new kr("platform-logger",e=>new yN(e),"PRIVATE")),bi(new kr("heartbeat",e=>new tP(e),"PRIVATE")),Jn($m,Aw,t),Jn($m,Aw,"esm2017"),Jn("fire-js","")}iP("");function Ag(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function vE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oP=vE,wE=new dl("auth","Firebase",vE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new bg("@firebase/auth");function aP(t,...e){Ed.logLevel<=we.WARN&&Ed.warn(`Auth (${da}): ${t}`,...e)}function Pu(t,...e){Ed.logLevel<=we.ERROR&&Ed.error(`Auth (${da}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,...e){throw Ng(t,...e)}function Zn(t,...e){return Ng(t,...e)}function _E(t,e,n){const s=Object.assign(Object.assign({},oP()),{[e]:n});return new dl("auth","Firebase",s).create(e,{appName:t.name})}function Es(t){return _E(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ng(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return wE.create(t,...e)}function ue(t,e,...n){if(!t)throw Ng(e,...n)}function gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pu(e),new Error(e)}function ks(t,e){t||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cP(){return Dw()==="http:"||Dw()==="https:"}function Dw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cP()||UA()||"connection"in navigator)?navigator.onLine:!0}function uP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ks(n>e,"Short delay should be less than long delay!"),this.isMobile=FA()||BA()}get(){return lP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t,e){ks(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fP=new fl(3e4,6e4);function Or(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vr(t,e,n,s,r={}){return TE(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=hl(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return zA()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Li(t.emulatorConfig.host)&&(d.credentials="include"),EE.fetch()(await IE(t,t.config.apiHost,n,a),d)})}async function TE(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},dP),e);try{const r=new pP(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ou(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ou(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ou(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ou(t,"user-disabled",o);const f=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _E(t,f,d);jn(t,f)}}catch(r){if(r instanceof Ds)throw r;jn(t,"network-request-failed",{message:String(r)})}}async function ml(t,e,n,s,r={}){const i=await Vr(t,e,n,s,r);return"mfaPendingCredential"in i&&jn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function IE(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Pg(t.config,r):`${t.config.apiScheme}://${r}`;return hP.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function mP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Zn(this.auth,"network-request-failed")),fP.get())})}}function ou(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Zn(t,e,s);return r.customData._tokenResponse=n,r}function jw(t){return t!==void 0&&t.enterprise!==void 0}class gP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return mP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yP(t,e){return Vr(t,"GET","/v2/recaptchaConfig",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(t,e){return Vr(t,"POST","/v1/accounts:delete",e)}async function Td(t,e){return Vr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wP(t,e=!1){const n=rt(t),s=await n.getIdToken(e),r=Cg(s);ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:mc(Df(r.auth_time)),issuedAtTime:mc(Df(r.iat)),expirationTime:mc(Df(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Df(t){return Number(t)*1e3}function Cg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Pu("JWT malformed, contained fewer than 3 sections"),null;try{const r=sE(n);return r?JSON.parse(r):(Pu("Failed to decode base64 JWT payload"),null)}catch(r){return Pu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Ow(t){const e=Cg(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ds&&_P(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function _P({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(t){var e;const n=t.auth,s=await t.getIdToken(),r=await $c(t,Td(n,{idToken:s}));ue(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?xE(i.providerUserInfo):[],a=IP(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=c?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Hm(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function TP(t){const e=rt(t);await Id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IP(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function xE(t){return t.map(e=>{var{providerId:n}=e,s=Ag(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(t,e){const n=await TE(t,{},async()=>{const s=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await IE(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:s};return t.emulatorConfig&&Li(t.emulatorConfig.host)&&(c.credentials="include"),EE.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function bP(t,e){return Vr(t,"POST","/v2/accounts:revokeToken",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ow(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=Ow(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await xP(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Do;return s&&(ue(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(ue(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pn{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=Ag(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $c(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wP(this,e)}reload(){return TP(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Id(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(Es(this.auth));const e=await this.getIdToken();return await $c(this,vP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,a,c,d,f;const m=(s=n.displayName)!==null&&s!==void 0?s:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,E=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:I,emailVerified:j,isAnonymous:L,providerData:M,stsTokenManager:_}=n;ue(I&&_,e,"internal-error");const y=Do.fromJSON(this.name,_);ue(typeof I=="string",e,"internal-error"),Ws(m,e.name),Ws(g,e.name),ue(typeof j=="boolean",e,"internal-error"),ue(typeof L=="boolean",e,"internal-error"),Ws(E,e.name),Ws(S,e.name),Ws(A,e.name),Ws(C,e.name),Ws(x,e.name),Ws(v,e.name);const T=new Pn({uid:I,auth:e,email:g,emailVerified:j,displayName:m,isAnonymous:L,photoURL:S,phoneNumber:E,tenantId:A,stsTokenManager:y,createdAt:x,lastLoginAt:v});return M&&Array.isArray(M)&&(T.providerData=M.map(k=>Object.assign({},k))),C&&(T._redirectEventId=C),T}static async _fromIdTokenResponse(e,n,s=!1){const r=new Do;r.updateFromServerResponse(n);const i=new Pn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Id(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ue(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?xE(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),a=new Do;a.updateFromIdToken(s);const c=new Pn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Hm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=new Map;function ys(t){ks(t instanceof Function,"Expected a class definition");let e=Vw.get(t);return e?(ks(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Vw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bE.type="NONE";const Mw=bE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t,e,n){return`firebase:${t}:${e}:${n}`}class jo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Cu(this.userKey,r.apiKey,i),this.fullPersistenceKey=Cu("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Td(this.auth,{idToken:e}).catch(()=>{});return n?Pn._fromGetAccountInfoResponse(this.auth,n,e):null}return Pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new jo(ys(Mw),e,s);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=r[0]||ys(Mw);const o=Cu(s,e.config.apiKey,e.name);let a=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await Td(e,{idToken:f}).catch(()=>{});if(!g)break;m=await Pn._fromGetAccountInfoResponse(e,g,f)}else m=Pn._fromJSON(e,f);d!==i&&(a=m),i=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new jo(i,e,s):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new jo(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CE(e))return"Blackberry";if(RE(e))return"Webos";if(kE(e))return"Safari";if((e.includes("chrome/")||AE(e))&&!e.includes("edge/"))return"Chrome";if(PE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function SE(t=lt()){return/firefox\//i.test(t)}function kE(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AE(t=lt()){return/crios\//i.test(t)}function NE(t=lt()){return/iemobile/i.test(t)}function PE(t=lt()){return/android/i.test(t)}function CE(t=lt()){return/blackberry/i.test(t)}function RE(t=lt()){return/webos/i.test(t)}function Rg(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SP(t=lt()){var e;return Rg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kP(){return $A()&&document.documentMode===10}function DE(t=lt()){return Rg(t)||PE(t)||RE(t)||CE(t)||/windows phone/i.test(t)||NE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t,e=[]){let n;switch(t){case"Browser":n=Lw(lt());break;case"Worker":n=`${Lw(lt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${da}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(t,e={}){return Vr(t,"GET","/v2/passwordPolicy",Or(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=6;class CP{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fw(this),this.idTokenSubscription=new Fw(this),this.beforeStateQueue=new AP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ys(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Td(this,{idToken:e}),s=await Pn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Id(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(Es(this));const n=e?rt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(Es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(Es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NP(this),n=new CP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await bP(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ys(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[ys(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&aP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fi(t){return rt(t)}class Fw{constructor(e){this.auth=e,this.observer=null,this.addObserver=QA(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DP(t){mh=t}function OE(t){return mh.loadJS(t)}function jP(){return mh.recaptchaEnterpriseScript}function OP(){return mh.gapiScript}function VP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class MP{constructor(){this.enterprise=new LP}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class LP{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const FP="recaptcha-enterprise",VE="NO_RECAPTCHA";class zP{constructor(e){this.type=FP,this.auth=Fi(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{yP(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new gP(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})})}function r(i,o,a){const c=window.grecaptcha;jw(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(VE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MP().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&jw(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=jP();c.length!==0&&(c+=a),OE(c).then(()=>{r(a,i,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function zw(t,e,n,s=!1,r=!1){const i=new zP(t);let o;if(r)o=VE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,d=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Km(t,e,n,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await zw(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await zw(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t,e){const n=fh(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(xi(i,e??{}))return r;jn(r,"already-initialized")}return n.initialize({options:e})}function BP(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ys);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function $P(t,e,n){const s=Fi(t);ue(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=ME(e),{host:o,port:a}=qP(e),c=a===null?"":`:${a}`,d={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){ue(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ue(xi(d,s.config.emulator)&&xi(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Li(o)?(Ig(`${i}//${o}${c}`),xg("Auth",!0)):WP()}function ME(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qP(t){const e=ME(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Uw(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Uw(o)}}}function Uw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,n){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function GP(t,e){return Vr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(t,e){return ml(t,"POST","/v1/accounts:signInWithPassword",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(t,e){return ml(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))}async function QP(t,e){return ml(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Dg{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new qc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new qc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Km(e,n,"signInWithPassword",HP);case"emailLink":return KP(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Km(e,s,"signUpPassword",GP);case"emailLink":return QP(e,{idToken:n,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(t,e){return ml(t,"POST","/v1/accounts:signInWithIdp",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="http://localhost";class Si extends Dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=Ag(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new Si(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Oo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Oo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oo(e,n)}buildRequest(){const e={requestUri:YP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JP(t){const e=Xa(Ja(t)).link,n=e?Xa(Ja(e)).deep_link_id:null,s=Xa(Ja(t)).deep_link_id;return(s?Xa(Ja(s)).link:null)||s||n||e||t}class jg{constructor(e){var n,s,r,i,o,a;const c=Xa(Ja(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(s=c.oobCode)!==null&&s!==void 0?s:null,m=XP((r=c.mode)!==null&&r!==void 0?r:null);ue(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=JP(e);try{return new jg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.providerId=ha.PROVIDER_ID}static credential(e,n){return qc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=jg.parseLink(n);return ue(s,"argument-error"),qc._fromEmailAndCode(e,s.code,s.tenantId)}}ha.PROVIDER_ID="password";ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends LE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends pl{constructor(){super("facebook.com")}static credential(e){return Si._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.FACEBOOK_SIGN_IN_METHOD="facebook.com";er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Si._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return tr.credential(n,s)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends pl{constructor(){super("github.com")}static credential(e){return Si._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends pl{constructor(){super("twitter.com")}static credential(e,n){return Si._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return sr.credential(n,s)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(t,e){return ml(t,"POST","/v1/accounts:signUp",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Pn._fromIdTokenResponse(e,s,r),o=Bw(s);return new ki({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Bw(s);return new ki({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Bw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends Ds{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,xd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new xd(e,n,s,r)}}function FE(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?xd._fromErrorAndOperation(t,i,e,s):i})}async function eC(t,e,n=!1){const s=await $c(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ki._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(t,e,n=!1){const{auth:s}=t;if(sn(s.app))return Promise.reject(Es(s));const r="reauthenticate";try{const i=await $c(t,FE(s,r,e,t),n);ue(i.idToken,s,"internal-error");const o=Cg(i.idToken);ue(o,s,"internal-error");const{sub:a}=o;return ue(t.uid===a,s,"user-mismatch"),ki._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&jn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(t,e,n=!1){if(sn(t.app))return Promise.reject(Es(t));const s="signIn",r=await FE(t,s,e),i=await ki._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function nC(t,e){return zE(Fi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UE(t){const e=Fi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BE(t,e,n){if(sn(t.app))return Promise.reject(Es(t));const s=Fi(t),o=await Km(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZP).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&UE(t),c}),a=await ki._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function $E(t,e,n){return sn(t.app)?Promise.reject(Es(t)):nC(rt(t),ha.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&UE(t),s})}function sC(t,e,n,s){return rt(t).onIdTokenChanged(e,n,s)}function rC(t,e,n){return rt(t).beforeAuthStateChanged(e,n)}function iC(t,e,n,s){return rt(t).onAuthStateChanged(e,n,s)}function qE(t){return rt(t).signOut()}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=1e3,aC=10;class GE extends WE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);kP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,aC):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},oC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}GE.type="LOCAL";const cC=GE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE extends WE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}HE.type="SESSION";const KE=HE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new ph(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async d=>d(n.origin,i)),c=await lC(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const d=Og("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function dC(t){es().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function hC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mC(){return QE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="firebaseLocalStorageDb",pC=1,Sd="firebaseLocalStorage",XE="fbase_key";class gl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gh(t,e){return t.transaction([Sd],e?"readwrite":"readonly").objectStore(Sd)}function gC(){const t=indexedDB.deleteDatabase(YE);return new gl(t).toPromise()}function Qm(){const t=indexedDB.open(YE,pC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Sd,{keyPath:XE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Sd)?e(s):(s.close(),await gC(),e(await Qm()))})})}async function $w(t,e,n){const s=gh(t,!0).put({[XE]:e,value:n});return new gl(s).toPromise()}async function yC(t,e){const n=gh(t,!1).get(e),s=await new gl(n).toPromise();return s===void 0?null:s.value}function qw(t,e){const n=gh(t,!0).delete(e);return new gl(n).toPromise()}const vC=800,wC=3;class JE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>wC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ph._getInstance(mC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await hC(),!this.activeServiceWorker)return;this.sender=new uC(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await $w(e,bd,"1"),await qw(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>$w(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>yC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=gh(r,!1).getAll();return new gl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JE.type="LOCAL";const _C=JE;new fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t,e){return e?ys(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends Dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TC(t){return zE(t.auth,new Vg(t),t.bypassAuthState)}function IC(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),tC(n,new Vg(t),t.bypassAuthState)}async function xC(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),eC(n,new Vg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TC;case"linkViaPopup":case"linkViaRedirect":return xC;case"reauthViaPopup":case"reauthViaRedirect":return IC;default:jn(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new fl(2e3,1e4);class So extends ZE{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){ks(this.filter.length===1,"Popup operations only handle one event");const e=Og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bC.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="pendingRedirect",Ru=new Map;class kC extends ZE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Ru.get(this.auth._key());if(!e){try{const s=await AC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Ru.set(this.auth._key(),e)}return this.bypassAuthState||Ru.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AC(t,e){const n=CC(e),s=PC(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function NC(t,e){Ru.set(t._key(),e)}function PC(t){return ys(t._redirectPersistence)}function CC(t){return Cu(SC,t.config.apiKey,t.name)}async function RC(t,e,n=!1){if(sn(t.app))return Promise.reject(Es(t));const s=Fi(t),r=EC(s,e),o=await new kC(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=10*60*1e3;class jC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!eT(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ww(e))}saveEventToCache(e){this.cachedEventUids.add(Ww(e)),this.lastProcessedEventTime=Date.now()}}function Ww(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function OC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t,e={}){return Vr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LC=/^https?/;async function FC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VC(t);for(const n of e)try{if(zC(n))return}catch{}jn(t,"unauthorized-domain")}function zC(t){const e=Gm(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!LC.test(n))return!1;if(MC.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new fl(3e4,6e4);function Gw(){const t=es().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function BC(t){return new Promise((e,n)=>{var s,r,i;function o(){Gw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gw(),n(Zn(t,"network-request-failed"))},timeout:UC.get()})}if(!((r=(s=es().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=es().gapi)===null||i===void 0)&&i.load)o();else{const a=VP("iframefcb");return es()[a]=()=>{gapi.load?o():n(Zn(t,"network-request-failed"))},OE(`${OP()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Du=null,e})}let Du=null;function $C(t){return Du=Du||BC(t),Du}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new fl(5e3,15e3),WC="__/auth/iframe",GC="emulator/auth/iframe",HC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QC(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pg(e,GC):`https://${t.config.authDomain}/${WC}`,s={apiKey:e.apiKey,appName:t.name,v:da},r=KC.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${hl(s).slice(1)}`}async function YC(t){const e=await $C(t),n=es().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:QC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HC,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Zn(t,"network-request-failed"),a=es().setTimeout(()=>{i(o)},qC.get());function c(){es().clearTimeout(a),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JC=500,ZC=600,eR="_blank",tR="http://localhost";class Hw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nR(t,e,n,s=JC,r=ZC){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},XC),{width:s.toString(),height:r.toString(),top:i,left:o}),d=lt().toLowerCase();n&&(a=AE(d)?eR:n),SE(d)&&(e=e||tR,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[E,S])=>`${g}${E}=${S},`,"");if(SP(d)&&a!=="_self")return sR(e||"",a),new Hw(null);const m=window.open(e||"",a,f);ue(m,t,"popup-blocked");try{m.focus()}catch{}return new Hw(m)}function sR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="__/auth/handler",iR="emulator/auth/handler",oR=encodeURIComponent("fac");async function Kw(t,e,n,s,r,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:da,eventId:r};if(e instanceof LE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",KA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof pl){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const c=await t._getAppCheckToken(),d=c?`#${oR}=${encodeURIComponent(c)}`:"";return`${aR(t)}?${hl(a).slice(1)}${d}`}function aR({config:t}){return t.emulator?Pg(t,iR):`https://${t.authDomain}/${rR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="webStorageSupport";class cR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KE,this._completeRedirectFn=RC,this._overrideRedirectResult=NC}async _openPopup(e,n,s,r){var i;ks((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Kw(e,n,s,Gm(),r);return nR(e,o,Og())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Kw(e,n,s,Gm(),r);return dC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(ks(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await YC(e),s=new jC(e);return n.register("authEvent",r=>(ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jf,{type:jf},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[jf];o!==void 0&&n(!!o),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return DE()||kE()||Rg()}}const lR=cR;var Qw="@firebase/auth",Yw="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hR(t){bi(new kr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jE(t)},d=new RP(s,r,i,c);return BP(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),bi(new kr("auth-internal",e=>{const n=Fi(e.getProvider("auth").getImmediate());return(s=>new uR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jn(Qw,Yw,dR(t)),Jn(Qw,Yw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=5*60,mR=cE("authIdTokenMaxAge")||fR;let Xw=null;const pR=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>mR)return;const r=n==null?void 0:n.token;Xw!==r&&(Xw=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function tT(t=kg()){const e=fh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=UP(t,{popupRedirectResolver:lR,persistence:[_C,cC,KE]}),s=cE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=pR(i.toString());rC(n,o,()=>o(n.currentUser)),sC(n,a=>o(a))}}const r=iE("auth");return r&&$P(n,`http://${r}`),n}function gR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}DP({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Zn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",gR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hR("Browser");var Jw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Er,nT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function T(){}T.prototype=y.prototype,_.D=y.prototype,_.prototype=new T,_.prototype.constructor=_,_.C=function(k,R,P){for(var b=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)b[ie-2]=arguments[ie];return y.prototype[R].apply(k,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(_,y,T){T||(T=0);var k=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)k[R]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(R=0;16>R;++R)k[R]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=_.g[0],T=_.g[1],R=_.g[2];var P=_.g[3],b=y+(P^T&(R^P))+k[0]+3614090360&4294967295;y=T+(b<<7&4294967295|b>>>25),b=P+(R^y&(T^R))+k[1]+3905402710&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(T^P&(y^T))+k[2]+606105819&4294967295,R=P+(b<<17&4294967295|b>>>15),b=T+(y^R&(P^y))+k[3]+3250441966&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(P^T&(R^P))+k[4]+4118548399&4294967295,y=T+(b<<7&4294967295|b>>>25),b=P+(R^y&(T^R))+k[5]+1200080426&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(T^P&(y^T))+k[6]+2821735955&4294967295,R=P+(b<<17&4294967295|b>>>15),b=T+(y^R&(P^y))+k[7]+4249261313&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(P^T&(R^P))+k[8]+1770035416&4294967295,y=T+(b<<7&4294967295|b>>>25),b=P+(R^y&(T^R))+k[9]+2336552879&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(T^P&(y^T))+k[10]+4294925233&4294967295,R=P+(b<<17&4294967295|b>>>15),b=T+(y^R&(P^y))+k[11]+2304563134&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(P^T&(R^P))+k[12]+1804603682&4294967295,y=T+(b<<7&4294967295|b>>>25),b=P+(R^y&(T^R))+k[13]+4254626195&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(T^P&(y^T))+k[14]+2792965006&4294967295,R=P+(b<<17&4294967295|b>>>15),b=T+(y^R&(P^y))+k[15]+1236535329&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(R^P&(T^R))+k[1]+4129170786&4294967295,y=T+(b<<5&4294967295|b>>>27),b=P+(T^R&(y^T))+k[6]+3225465664&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(P^y))+k[11]+643717713&4294967295,R=P+(b<<14&4294967295|b>>>18),b=T+(P^y&(R^P))+k[0]+3921069994&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(R^P&(T^R))+k[5]+3593408605&4294967295,y=T+(b<<5&4294967295|b>>>27),b=P+(T^R&(y^T))+k[10]+38016083&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(P^y))+k[15]+3634488961&4294967295,R=P+(b<<14&4294967295|b>>>18),b=T+(P^y&(R^P))+k[4]+3889429448&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(R^P&(T^R))+k[9]+568446438&4294967295,y=T+(b<<5&4294967295|b>>>27),b=P+(T^R&(y^T))+k[14]+3275163606&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(P^y))+k[3]+4107603335&4294967295,R=P+(b<<14&4294967295|b>>>18),b=T+(P^y&(R^P))+k[8]+1163531501&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(R^P&(T^R))+k[13]+2850285829&4294967295,y=T+(b<<5&4294967295|b>>>27),b=P+(T^R&(y^T))+k[2]+4243563512&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(P^y))+k[7]+1735328473&4294967295,R=P+(b<<14&4294967295|b>>>18),b=T+(P^y&(R^P))+k[12]+2368359562&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(T^R^P)+k[5]+4294588738&4294967295,y=T+(b<<4&4294967295|b>>>28),b=P+(y^T^R)+k[8]+2272392833&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^T)+k[11]+1839030562&4294967295,R=P+(b<<16&4294967295|b>>>16),b=T+(R^P^y)+k[14]+4259657740&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(T^R^P)+k[1]+2763975236&4294967295,y=T+(b<<4&4294967295|b>>>28),b=P+(y^T^R)+k[4]+1272893353&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^T)+k[7]+4139469664&4294967295,R=P+(b<<16&4294967295|b>>>16),b=T+(R^P^y)+k[10]+3200236656&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(T^R^P)+k[13]+681279174&4294967295,y=T+(b<<4&4294967295|b>>>28),b=P+(y^T^R)+k[0]+3936430074&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^T)+k[3]+3572445317&4294967295,R=P+(b<<16&4294967295|b>>>16),b=T+(R^P^y)+k[6]+76029189&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(T^R^P)+k[9]+3654602809&4294967295,y=T+(b<<4&4294967295|b>>>28),b=P+(y^T^R)+k[12]+3873151461&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^T)+k[15]+530742520&4294967295,R=P+(b<<16&4294967295|b>>>16),b=T+(R^P^y)+k[2]+3299628645&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(R^(T|~P))+k[0]+4096336452&4294967295,y=T+(b<<6&4294967295|b>>>26),b=P+(T^(y|~R))+k[7]+1126891415&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~T))+k[14]+2878612391&4294967295,R=P+(b<<15&4294967295|b>>>17),b=T+(P^(R|~y))+k[5]+4237533241&4294967295,T=R+(b<<21&4294967295|b>>>11),b=y+(R^(T|~P))+k[12]+1700485571&4294967295,y=T+(b<<6&4294967295|b>>>26),b=P+(T^(y|~R))+k[3]+2399980690&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~T))+k[10]+4293915773&4294967295,R=P+(b<<15&4294967295|b>>>17),b=T+(P^(R|~y))+k[1]+2240044497&4294967295,T=R+(b<<21&4294967295|b>>>11),b=y+(R^(T|~P))+k[8]+1873313359&4294967295,y=T+(b<<6&4294967295|b>>>26),b=P+(T^(y|~R))+k[15]+4264355552&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~T))+k[6]+2734768916&4294967295,R=P+(b<<15&4294967295|b>>>17),b=T+(P^(R|~y))+k[13]+1309151649&4294967295,T=R+(b<<21&4294967295|b>>>11),b=y+(R^(T|~P))+k[4]+4149444226&4294967295,y=T+(b<<6&4294967295|b>>>26),b=P+(T^(y|~R))+k[11]+3174756917&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~T))+k[2]+718787259&4294967295,R=P+(b<<15&4294967295|b>>>17),b=T+(P^(R|~y))+k[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,_.g[2]=_.g[2]+R&4294967295,_.g[3]=_.g[3]+P&4294967295}s.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var T=y-this.blockSize,k=this.B,R=this.h,P=0;P<y;){if(R==0)for(;P<=T;)r(this,_,P),P+=this.blockSize;if(typeof _=="string"){for(;P<y;)if(k[R++]=_.charCodeAt(P++),R==this.blockSize){r(this,k),R=0;break}}else for(;P<y;)if(k[R++]=_[P++],R==this.blockSize){r(this,k),R=0;break}}this.h=R,this.o+=y},s.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var T=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=T&255,T/=256;for(this.u(_),_=Array(16),y=T=0;4>y;++y)for(var k=0;32>k;k+=8)_[T++]=this.g[y]>>>k&255;return _};function i(_,y){var T=a;return Object.prototype.hasOwnProperty.call(T,_)?T[_]:T[_]=y(_)}function o(_,y){this.h=y;for(var T=[],k=!0,R=_.length-1;0<=R;R--){var P=_[R]|0;k&&P==y||(T[R]=P,k=!1)}this.g=T}var a={};function c(_){return-128<=_&&128>_?i(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return m;if(0>_)return C(d(-_));for(var y=[],T=1,k=0;_>=T;k++)y[k]=_/T|0,T*=4294967296;return new o(y,0)}function f(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return C(f(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(y,8)),k=m,R=0;R<_.length;R+=8){var P=Math.min(8,_.length-R),b=parseInt(_.substring(R,R+P),y);8>P?(P=d(Math.pow(y,P)),k=k.j(P).add(d(b))):(k=k.j(T),k=k.add(d(b)))}return k}var m=c(0),g=c(1),E=c(16777216);t=o.prototype,t.m=function(){if(A(this))return-C(this).m();for(var _=0,y=1,T=0;T<this.g.length;T++){var k=this.i(T);_+=(0<=k?k:4294967296+k)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S(this))return"0";if(A(this))return"-"+C(this).toString(_);for(var y=d(Math.pow(_,6)),T=this,k="";;){var R=j(T,y).g;T=x(T,R.j(y));var P=((0<T.g.length?T.g[0]:T.h)>>>0).toString(_);if(T=R,S(T))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function S(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function A(_){return _.h==-1}t.l=function(_){return _=x(this,_),A(_)?-1:S(_)?0:1};function C(_){for(var y=_.g.length,T=[],k=0;k<y;k++)T[k]=~_.g[k];return new o(T,~_.h).add(g)}t.abs=function(){return A(this)?C(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),T=[],k=0,R=0;R<=y;R++){var P=k+(this.i(R)&65535)+(_.i(R)&65535),b=(P>>>16)+(this.i(R)>>>16)+(_.i(R)>>>16);k=b>>>16,P&=65535,b&=65535,T[R]=b<<16|P}return new o(T,T[T.length-1]&-2147483648?-1:0)};function x(_,y){return _.add(C(y))}t.j=function(_){if(S(this)||S(_))return m;if(A(this))return A(_)?C(this).j(C(_)):C(C(this).j(_));if(A(_))return C(this.j(C(_)));if(0>this.l(E)&&0>_.l(E))return d(this.m()*_.m());for(var y=this.g.length+_.g.length,T=[],k=0;k<2*y;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<_.g.length;R++){var P=this.i(k)>>>16,b=this.i(k)&65535,ie=_.i(R)>>>16,he=_.i(R)&65535;T[2*k+2*R]+=b*he,v(T,2*k+2*R),T[2*k+2*R+1]+=P*he,v(T,2*k+2*R+1),T[2*k+2*R+1]+=b*ie,v(T,2*k+2*R+1),T[2*k+2*R+2]+=P*ie,v(T,2*k+2*R+2)}for(k=0;k<y;k++)T[k]=T[2*k+1]<<16|T[2*k];for(k=y;k<2*y;k++)T[k]=0;return new o(T,0)};function v(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function I(_,y){this.g=_,this.h=y}function j(_,y){if(S(y))throw Error("division by zero");if(S(_))return new I(m,m);if(A(_))return y=j(C(_),y),new I(C(y.g),C(y.h));if(A(y))return y=j(_,C(y)),new I(C(y.g),y.h);if(30<_.g.length){if(A(_)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var T=g,k=y;0>=k.l(_);)T=L(T),k=L(k);var R=M(T,1),P=M(k,1);for(k=M(k,2),T=M(T,2);!S(k);){var b=P.add(k);0>=b.l(_)&&(R=R.add(T),P=b),k=M(k,1),T=M(T,1)}return y=x(_,R.j(y)),new I(R,y)}for(R=m;0<=_.l(y);){for(T=Math.max(1,Math.floor(_.m()/y.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=d(T),b=P.j(y);A(b)||0<b.l(_);)T-=k,P=d(T),b=P.j(y);S(P)&&(P=g),R=R.add(P),_=x(_,b)}return new I(R,_)}t.A=function(_){return j(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),T=[],k=0;k<y;k++)T[k]=this.i(k)&_.i(k);return new o(T,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),T=[],k=0;k<y;k++)T[k]=this.i(k)|_.i(k);return new o(T,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),T=[],k=0;k<y;k++)T[k]=this.i(k)^_.i(k);return new o(T,this.h^_.h)};function L(_){for(var y=_.g.length+1,T=[],k=0;k<y;k++)T[k]=_.i(k)<<1|_.i(k-1)>>>31;return new o(T,_.h)}function M(_,y){var T=y>>5;y%=32;for(var k=_.g.length-T,R=[],P=0;P<k;P++)R[P]=0<y?_.i(P+T)>>>y|_.i(P+T+1)<<32-y:_.i(P+T);return new o(R,_.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,nT=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Er=o}).apply(typeof Jw<"u"?Jw:typeof self<"u"?self:typeof window<"u"?window:{});var au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sT,Za,rT,ju,Ym,iT,oT,aT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof au=="object"&&au];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(l,h){if(h)e:{var p=s;l=l.split(".");for(var w=0;w<l.length-1;w++){var V=l[w];if(!(V in p))break e;p=p[V]}l=l[l.length-1],w=p[l],h=h(w),h!=w&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,w=!1,V={next:function(){if(!w&&p<l.length){var F=p++;return{value:h(F,l[F]),done:!1}}return w=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,w),l.apply(h,V)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function E(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var w=p.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function S(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(w,V,F){for(var H=Array(arguments.length-2),De=2;De<arguments.length;De++)H[De-2]=arguments[De];return h.prototype[V].apply(w,H)}}function A(l){const h=l.length;if(0<h){const p=Array(h);for(let w=0;w<h;w++)p[w]=l[w];return p}return[]}function C(l,h){for(let p=1;p<arguments.length;p++){const w=arguments[p];if(c(w)){const V=l.length||0,F=w.length||0;l.length=V+F;for(let H=0;H<F;H++)l[V+H]=w[H]}else l.push(w)}}class x{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(l){return/^[\s\xa0]*$/.test(l)}function I(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var L=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function M(l,h,p){for(const w in l)h.call(p,l[w],w,l)}function _(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,h){let p,w;for(let V=1;V<arguments.length;V++){w=arguments[V];for(p in w)l[p]=w[p];for(let F=0;F<T.length;F++)p=T[F],Object.prototype.hasOwnProperty.call(w,p)&&(l[p]=w[p])}}function R(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){a.setTimeout(()=>{throw l},0)}function b(){var l=Y;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class ie{constructor(){this.h=this.g=null}add(h,p){const w=he.get();w.set(h,p),this.h?this.h.next=w:this.g=w,this.h=w}}var he=new x(()=>new X,l=>l.reset());class X{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,U=!1,Y=new ie,se=()=>{const l=a.Promise.resolve(void 0);ee=()=>{l.then(me)}};var me=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(p){P(p)}var h=he;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}U=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var ot=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function pt(l,h){if(Se.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{j(h.nodeName);var V=!0;break e}catch{}V=!1}V||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ze[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&pt.aa.h.call(this)}}S(pt,Se);var Ze={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Wt="closure_listenable_"+(1e6*Math.random()|0),re=0;function Ee(l,h,p,w,V){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!w,this.ha=V,this.key=++re,this.da=this.fa=!1}function ye(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Re(l){this.src=l,this.g={},this.h=0}Re.prototype.add=function(l,h,p,w,V){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var H=ss(l,h,w,V);return-1<H?(h=l[H],p||(h.fa=!1)):(h=new Ee(h,this.src,F,!!w,V),h.fa=p,l.push(h)),h};function Vt(l,h){var p=h.type;if(p in l.g){var w=l.g[p],V=Array.prototype.indexOf.call(w,h,void 0),F;(F=0<=V)&&Array.prototype.splice.call(w,V,1),F&&(ye(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function ss(l,h,p,w){for(var V=0;V<l.length;++V){var F=l[V];if(!F.da&&F.listener==h&&F.capture==!!p&&F.ha==w)return V}return-1}var Vs="closure_lm_"+(1e6*Math.random()|0),zr={};function $i(l,h,p,w,V){if(Array.isArray(h)){for(var F=0;F<h.length;F++)$i(l,h[F],p,w,V);return null}return p=bl(p),l&&l[Wt]?l.K(h,p,d(w)?!!w.capture:!1,V):$h(l,h,p,!1,w,V)}function $h(l,h,p,w,V,F){if(!h)throw Error("Invalid event type");var H=d(V)?!!V.capture:!!V,De=Wi(l);if(De||(l[Vs]=De=new Re(l)),p=De.add(h,p,w,H,F),p.proxy)return p;if(w=qh(),p.proxy=w,w.src=l,w.listener=p,l.addEventListener)ot||(V=H),V===void 0&&(V=!1),l.addEventListener(h.toString(),w,V);else if(l.attachEvent)l.attachEvent(Ur(h.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return p}function qh(){function l(p){return h.call(l.src,l.listener,p)}const h=Wh;return l}function qi(l,h,p,w,V){if(Array.isArray(h))for(var F=0;F<h.length;F++)qi(l,h[F],p,w,V);else w=d(w)?!!w.capture:!!w,p=bl(p),l&&l[Wt]?(l=l.i,h=String(h).toString(),h in l.g&&(F=l.g[h],p=ss(F,p,w,V),-1<p&&(ye(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete l.g[h],l.h--)))):l&&(l=Wi(l))&&(h=l.g[h.toString()],l=-1,h&&(l=ss(h,p,w,V)),(p=-1<l?h[l]:null)&&On(p))}function On(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Wt])Vt(h.i,l);else{var p=l.type,w=l.proxy;h.removeEventListener?h.removeEventListener(p,w,l.capture):h.detachEvent?h.detachEvent(Ur(p),w):h.addListener&&h.removeListener&&h.removeListener(w),(p=Wi(h))?(Vt(p,l),p.h==0&&(p.src=null,h[Vs]=null)):ye(l)}}}function Ur(l){return l in zr?zr[l]:zr[l]="on"+l}function Wh(l,h){if(l.da)l=!0;else{h=new pt(h,this);var p=l.listener,w=l.ha||l.src;l.fa&&On(l),l=p.call(w,h)}return l}function Wi(l){return l=l[Vs],l instanceof Re?l:null}var va="__closure_events_fn_"+(1e9*Math.random()>>>0);function bl(l){return typeof l=="function"?l:(l[va]||(l[va]=function(h){return l.handleEvent(h)}),l[va])}function dt(){ae.call(this),this.i=new Re(this),this.M=this,this.F=null}S(dt,ae),dt.prototype[Wt]=!0,dt.prototype.removeEventListener=function(l,h,p,w){qi(this,l,h,p,w)};function gt(l,h){var p,w=l.F;if(w)for(p=[];w;w=w.F)p.push(w);if(l=l.M,w=h.type||h,typeof h=="string")h=new Se(h,l);else if(h instanceof Se)h.target=h.target||l;else{var V=h;h=new Se(w,l),k(h,V)}if(V=!0,p)for(var F=p.length-1;0<=F;F--){var H=h.g=p[F];V=Gi(H,w,!0,h)&&V}if(H=h.g=l,V=Gi(H,w,!0,h)&&V,V=Gi(H,w,!1,h)&&V,p)for(F=0;F<p.length;F++)H=h.g=p[F],V=Gi(H,w,!1,h)&&V}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],w=0;w<p.length;w++)ye(p[w]);delete l.g[h],l.h--}}this.F=null},dt.prototype.K=function(l,h,p,w){return this.i.add(String(l),h,!1,p,w)},dt.prototype.L=function(l,h,p,w){return this.i.add(String(l),h,!0,p,w)};function Gi(l,h,p,w){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var V=!0,F=0;F<h.length;++F){var H=h[F];if(H&&!H.da&&H.capture==p){var De=H.listener,vt=H.ha||H.src;H.fa&&Vt(l.i,H),V=De.call(vt,w)!==!1&&V}}return V&&!w.defaultPrevented}function Sl(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function kl(l){l.g=Sl(()=>{l.g=null,l.i&&(l.i=!1,kl(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Gh extends ae{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:kl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(l){ae.call(this),this.h=l,this.g={}}S(Br,ae);var Al=[];function Nl(l){M(l.g,function(h,p){this.g.hasOwnProperty(p)&&On(h)},l),l.g={}}Br.prototype.N=function(){Br.aa.N.call(this),Nl(this)},Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wa=a.JSON.stringify,Hh=a.JSON.parse,Kh=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Hi(){}Hi.prototype.h=null;function Pl(l){return l.h||(l.h=l.i())}function Vn(){}var $r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _a(){Se.call(this,"d")}S(_a,Se);function Ea(){Se.call(this,"c")}S(Ea,Se);var Mn={},D=null;function B(){return D=D||new dt}Mn.La="serverreachability";function G(l){Se.call(this,Mn.La,l)}S(G,Se);function J(l){const h=B();gt(h,new G(h))}Mn.STAT_EVENT="statevent";function le(l,h){Se.call(this,Mn.STAT_EVENT,l),this.stat=h}S(le,Se);function Z(l){const h=B();gt(h,new le(h,l))}Mn.Ma="timingevent";function pe(l,h){Se.call(this,Mn.Ma,l),this.size=h}S(pe,Se);function je(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Be(){this.g=!0}Be.prototype.xa=function(){this.g=!1};function Ta(l,h,p,w,V,F){l.info(function(){if(l.g)if(F)for(var H="",De=F.split("&"),vt=0;vt<De.length;vt++){var ke=De[vt].split("=");if(1<ke.length){var xt=ke[0];ke=ke[1];var bt=xt.split("_");H=2<=bt.length&&bt[1]=="type"?H+(xt+"="+ke+"&"):H+(xt+"=redacted&")}}else H=null;else H=F;return"XMLHTTP REQ ("+w+") [attempt "+V+"]: "+h+`
`+p+`
`+H})}function Cl(l,h,p,w,V,F,H){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+V+"]: "+h+`
`+p+`
`+F+" "+H})}function rs(l,h,p,w){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+qr(l,p)+(w?" "+w:"")})}function Ia(l,h){l.info(function(){return"TIMEOUT: "+h})}Be.prototype.info=function(){};function qr(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var w=p[l];if(!(2>w.length)){var V=w[1];if(Array.isArray(V)&&!(1>V.length)){var F=V[0];if(F!="noop"&&F!="stop"&&F!="close")for(var H=1;H<V.length;H++)V[H]=""}}}}return wa(p)}catch{return h}}var Ln={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},is;function os(){}S(os,Hi),os.prototype.g=function(){return new XMLHttpRequest},os.prototype.i=function(){return{}},is=new os;function Gt(l,h,p,w){this.j=l,this.i=h,this.l=p,this.R=w||1,this.U=new Br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gr}function Gr(){this.i=null,this.g="",this.h=!1}var xa={},Ki={};function as(l,h,p){l.L=1,l.v=jl(us(h)),l.m=p,l.P=!0,Ms(l,null)}function Ms(l,h){l.F=Date.now(),cs(l),l.A=us(l.v);var p=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Ly(p.i,"t",w),l.C=0,p=l.j.J,l.h=new Gr,l.g=nv(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Gh(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,w=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(Al[0]=V.toString()),V=Al);for(var F=0;F<V.length;F++){var H=$i(p,V[F],w||h.handleEvent,!1,h.h||h);if(!H)break;h.g[H.key]=H}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),J(),Ta(l.i,l.u,l.A,l.l,l.R,l.m)}Gt.prototype.ca=function(l){l=l.target;const h=this.M;h&&ds(l)==3?h.j():this.Y(l)},Gt.prototype.Y=function(l){try{if(l==this.g)e:{const bt=ds(this.g);var h=this.g.Ba();const Zi=this.g.Z();if(!(3>bt)&&(bt!=3||this.g&&(this.h.h||this.g.oa()||Wy(this.g)))){this.J||bt!=4||h==7||(h==8||0>=Zi?J(3):J(2)),Fs(this);var p=this.g.Z();this.X=p;t:if(Hr(this)){var w=Wy(this.g);l="";var V=w.length,F=ds(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),zs(this);var H="";break t}this.h.i=new a.TextDecoder}for(h=0;h<V;h++)this.h.h=!0,l+=this.h.i.decode(w[h],{stream:!(F&&h==V-1)});w.length=0,this.h.g+=l,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=p==200,Cl(this.i,this.u,this.A,this.l,this.R,bt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var De,vt=this.g;if((De=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(De)){var ke=De;break t}}ke=null}if(p=ke)rs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ls(this,p);else{this.o=!1,this.s=3,Z(12),Fn(this),zs(this);break e}}if(this.P){p=!0;let xn;for(;!this.J&&this.C<H.length;)if(xn=Qi(this,H),xn==Ki){bt==4&&(this.s=4,Z(14),p=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==xa){this.s=4,Z(15),rs(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else rs(this.i,this.l,xn,null),ls(this,xn);if(Hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bt!=4||H.length!=0||this.h.h||(this.s=1,Z(16),p=!1),this.o=this.o&&p,!p)rs(this.i,this.l,H,"[Invalid Chunked Response]"),Fn(this),zs(this);else if(0<H.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Jh(xt),xt.M=!0,Z(11))}}else rs(this.i,this.l,H,null),ls(this,H);bt==4&&Fn(this),this.o&&!this.J&&(bt==4?Jy(this.j,this):(this.o=!1,cs(this)))}else Gx(this.g),p==400&&0<H.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),Fn(this),zs(this)}}}catch{}finally{}};function Hr(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Qi(l,h){var p=l.C,w=h.indexOf(`
`,p);return w==-1?Ki:(p=Number(h.substring(p,w)),isNaN(p)?xa:(w+=1,w+p>h.length?Ki:(h=h.slice(w,w+p),l.C=w+p,h)))}Gt.prototype.cancel=function(){this.J=!0,Fn(this)};function cs(l){l.S=Date.now()+l.I,Ls(l,l.I)}function Ls(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=je(g(l.ba,l),h)}function Fs(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Gt.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ia(this.i,this.A),this.L!=2&&(J(),Z(17)),Fn(this),this.s=2,zs(this)):Ls(this,this.S-l)};function zs(l){l.j.G==0||l.J||Jy(l.j,l)}function Fn(l){Fs(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Nl(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function ls(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Qe(p.h,l))){if(!l.K&&Qe(p.h,l)&&p.G==3){try{var w=p.Da.g.parse(h)}catch{w=null}if(Array.isArray(w)&&w.length==3){var V=w;if(V[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)zl(p),Ll(p);else break e;Xh(p),Z(18)}}else p.za=V[1],0<p.za-p.T&&37500>V[2]&&p.F&&p.v==0&&!p.C&&(p.C=je(g(p.Za,p),6e3));if(1>=Yi(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Xr(p,11)}else if((l.K||p.g==l)&&zl(p),!v(h))for(V=p.Da.g.parse(h),h=0;h<V.length;h++){let ke=V[h];if(p.T=ke[0],ke=ke[1],p.G==2)if(ke[0]=="c"){p.K=ke[1],p.ia=ke[2];const xt=ke[3];xt!=null&&(p.la=xt,p.j.info("VER="+p.la));const bt=ke[4];bt!=null&&(p.Aa=bt,p.j.info("SVER="+p.Aa));const Zi=ke[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(w=1.5*Zi,p.L=w,p.j.info("backChannelRequestTimeoutMs_="+w)),w=p;const xn=l.g;if(xn){const Bl=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bl){var F=w.h;F.g||Bl.indexOf("spdy")==-1&&Bl.indexOf("quic")==-1&&Bl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(yt(F,F.h),F.h=null))}if(w.D){const Zh=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zh&&(w.ya=Zh,Ve(w.I,w.D,Zh))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),w=p;var H=l;if(w.qa=tv(w,w.J?w.ia:null,w.W),H.K){Mt(w.h,H);var De=H,vt=w.L;vt&&(De.I=vt),De.B&&(Fs(De),cs(De)),w.g=H}else Yy(w);0<p.i.length&&Fl(p)}else ke[0]!="stop"&&ke[0]!="close"||Xr(p,7);else p.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Xr(p,7):Yh(p):ke[0]!="noop"&&p.l&&p.l.ta(ke),p.v=0)}}J(4)}catch{}}var Kr=class{constructor(l,h){this.g=l,this.map=h}};function Qr(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Us(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Yi(l){return l.h?1:l.g?l.g.size:0}function Qe(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function yt(l,h){l.g?l.g.add(h):l.h=h}function Mt(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Qr.prototype.cancel=function(){if(this.i=zn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function zn(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return A(l.i)}function ba(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,w=0;w<p;w++)h.push(l[w]);return h}h=[],p=0;for(w in l)h[p++]=l[w];return h}function Rx(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const w in l)h[p++]=w;return h}}}function Ry(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=Rx(l),w=ba(l),V=w.length,F=0;F<V;F++)h.call(void 0,w[F],p&&p[F],l)}var Dy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dx(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var w=l[p].indexOf("="),V=null;if(0<=w){var F=l[p].substring(0,w);V=l[p].substring(w+1)}else F=l[p];h(F,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Yr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Yr){this.h=l.h,Rl(this,l.j),this.o=l.o,this.g=l.g,Dl(this,l.s),this.l=l.l;var h=l.i,p=new Aa;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),jy(this,p),this.m=l.m}else l&&(h=String(l).match(Dy))?(this.h=!1,Rl(this,h[1]||"",!0),this.o=Sa(h[2]||""),this.g=Sa(h[3]||"",!0),Dl(this,h[4]),this.l=Sa(h[5]||"",!0),jy(this,h[6]||"",!0),this.m=Sa(h[7]||"")):(this.h=!1,this.i=new Aa(null,this.h))}Yr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(ka(h,Oy,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(ka(h,Oy,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(ka(p,p.charAt(0)=="/"?Vx:Ox,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",ka(p,Lx)),l.join("")};function us(l){return new Yr(l)}function Rl(l,h,p){l.j=p?Sa(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Dl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function jy(l,h,p){h instanceof Aa?(l.i=h,Fx(l.i,l.h)):(p||(h=ka(h,Mx)),l.i=new Aa(h,l.h))}function Ve(l,h,p){l.i.set(h,p)}function jl(l){return Ve(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Sa(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ka(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,jx),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function jx(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Oy=/[#\/\?@]/g,Ox=/[#\?:]/g,Vx=/[#\?]/g,Mx=/[#\?@]/g,Lx=/#/g;function Aa(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Bs(l){l.g||(l.g=new Map,l.h=0,l.i&&Dx(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Aa.prototype,t.add=function(l,h){Bs(this),this.i=null,l=Xi(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Vy(l,h){Bs(l),h=Xi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function My(l,h){return Bs(l),h=Xi(l,h),l.g.has(h)}t.forEach=function(l,h){Bs(this),this.g.forEach(function(p,w){p.forEach(function(V){l.call(h,V,w,this)},this)},this)},t.na=function(){Bs(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let w=0;w<h.length;w++){const V=l[w];for(let F=0;F<V.length;F++)p.push(h[w])}return p},t.V=function(l){Bs(this);let h=[];if(typeof l=="string")My(this,l)&&(h=h.concat(this.g.get(Xi(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return Bs(this),this.i=null,l=Xi(this,l),My(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Ly(l,h,p){Vy(l,h),0<p.length&&(l.i=null,l.g.set(Xi(l,h),A(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var w=h[p];const F=encodeURIComponent(String(w)),H=this.V(w);for(w=0;w<H.length;w++){var V=F;H[w]!==""&&(V+="="+encodeURIComponent(String(H[w]))),l.push(V)}}return this.i=l.join("&")};function Xi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Fx(l,h){h&&!l.j&&(Bs(l),l.i=null,l.g.forEach(function(p,w){var V=w.toLowerCase();w!=V&&(Vy(this,w),Ly(this,V,p))},l)),l.j=h}function zx(l,h){const p=new Be;if(a.Image){const w=new Image;w.onload=E($s,p,"TestLoadImage: loaded",!0,h,w),w.onerror=E($s,p,"TestLoadImage: error",!1,h,w),w.onabort=E($s,p,"TestLoadImage: abort",!1,h,w),w.ontimeout=E($s,p,"TestLoadImage: timeout",!1,h,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else h(!1)}function Ux(l,h){const p=new Be,w=new AbortController,V=setTimeout(()=>{w.abort(),$s(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:w.signal}).then(F=>{clearTimeout(V),F.ok?$s(p,"TestPingServer: ok",!0,h):$s(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),$s(p,"TestPingServer: error",!1,h)})}function $s(l,h,p,w,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),w(p)}catch{}}function Bx(){this.g=new Kh}function $x(l,h,p){const w=p||"";try{Ry(l,function(V,F){let H=V;d(V)&&(H=wa(V)),h.push(w+F+"="+encodeURIComponent(H))})}catch(V){throw h.push(w+"type="+encodeURIComponent("_badmap")),V}}function Ol(l){this.l=l.Ub||null,this.j=l.eb||!1}S(Ol,Hi),Ol.prototype.g=function(){return new Vl(this.l,this.j)},Ol.prototype.i=function(l){return function(){return l}}({});function Vl(l,h){dt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Vl,dt),t=Vl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Pa(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Na(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Pa(this)),this.g&&(this.readyState=3,Pa(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fy(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fy(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Na(this):Pa(this),this.readyState==3&&Fy(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Na(this))},t.Qa=function(l){this.g&&(this.response=l,Na(this))},t.ga=function(){this.g&&Na(this)};function Na(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Pa(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Pa(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function zy(l){let h="";return M(l,function(p,w){h+=w,h+=":",h+=p,h+=`\r
`}),h}function Qh(l,h,p){e:{for(w in p){var w=!1;break e}w=!0}w||(p=zy(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ve(l,h,p))}function Ye(l){dt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ye,dt);var qx=/^https?$/i,Wx=["POST","PUT"];t=Ye.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():is.g(),this.v=this.o?Pl(this.o):Pl(is),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(F){Uy(this,F);return}if(l=p||"",p=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var V in w)p.set(V,w[V]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const F of w.keys())p.set(F,w.get(F));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Wx,h,void 0))||w||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,H]of p)this.g.setRequestHeader(F,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qy(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){Uy(this,F)}};function Uy(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,By(l),Ml(l)}function By(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,gt(this,"complete"),gt(this,"abort"),Ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ml(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$y(this):this.bb())},t.bb=function(){$y(this)};function $y(l){if(l.h&&typeof o<"u"&&(!l.v[1]||ds(l)!=4||l.Z()!=2)){if(l.u&&ds(l)==4)Sl(l.Ea,0,l);else if(gt(l,"readystatechange"),ds(l)==4){l.h=!1;try{const H=l.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var w;if(w=H===0){var V=String(l.D).match(Dy)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),w=!qx.test(V?V.toLowerCase():"")}p=w}if(p)gt(l,"complete"),gt(l,"success");else{l.m=6;try{var F=2<ds(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",By(l)}}finally{Ml(l)}}}}function Ml(l,h){if(l.g){qy(l);const p=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||gt(l,"ready");try{p.onreadystatechange=w}catch{}}}function qy(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function ds(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<ds(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Hh(h)}};function Wy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Gx(l){const h={};l=(l.g&&2<=ds(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(v(l[w]))continue;var p=R(l[w]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const F=h[V]||[];h[V]=F,F.push(p)}_(h,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Gy(l){this.Aa=0,this.i=[],this.j=new Be,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ca("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ca("baseRetryDelayMs",5e3,l),this.cb=Ca("retryDelaySeedMs",1e4,l),this.Wa=Ca("forwardChannelMaxRetries",2,l),this.wa=Ca("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Qr(l&&l.concurrentRequestLimit),this.Da=new Bx,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Gy.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,w){Z(0),this.W=l,this.H=h||{},p&&w!==void 0&&(this.H.OSID=p,this.H.OAID=w),this.F=this.X,this.I=tv(this,null,this.W),Fl(this)};function Yh(l){if(Hy(l),l.G==3){var h=l.U++,p=us(l.I);if(Ve(p,"SID",l.K),Ve(p,"RID",h),Ve(p,"TYPE","terminate"),Ra(l,p),h=new Gt(l,l.j,h),h.L=2,h.v=jl(us(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=nv(h.j,null),h.g.ea(h.v)),h.F=Date.now(),cs(h)}ev(l)}function Ll(l){l.g&&(Jh(l),l.g.cancel(),l.g=null)}function Hy(l){Ll(l),l.u&&(a.clearTimeout(l.u),l.u=null),zl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Fl(l){if(!Us(l.h)&&!l.s){l.s=!0;var h=l.Ga;ee||se(),U||(ee(),U=!0),Y.add(h,l),l.B=0}}function Hx(l,h){return Yi(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=je(g(l.Ga,l,h),Zy(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const V=new Gt(this,this.j,l);let F=this.o;if(this.S&&(F?(F=y(F),k(F,this.S)):F=this.S),this.m!==null||this.O||(V.H=F,F=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var w=this.i[p];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(h+=w,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Qy(this,V,h),p=us(this.I),Ve(p,"RID",l),Ve(p,"CVER",22),this.D&&Ve(p,"X-HTTP-Session-Id",this.D),Ra(this,p),F&&(this.O?h="headers="+encodeURIComponent(String(zy(F)))+"&"+h:this.m&&Qh(p,this.m,F)),yt(this.h,V),this.Ua&&Ve(p,"TYPE","init"),this.P?(Ve(p,"$req",h),Ve(p,"SID","null"),V.T=!0,as(V,p,null)):as(V,p,h),this.G=2}}else this.G==3&&(l?Ky(this,l):this.i.length==0||Us(this.h)||Ky(this))};function Ky(l,h){var p;h?p=h.l:p=l.U++;const w=us(l.I);Ve(w,"SID",l.K),Ve(w,"RID",p),Ve(w,"AID",l.T),Ra(l,w),l.m&&l.o&&Qh(w,l.m,l.o),p=new Gt(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Qy(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),yt(l.h,p),as(p,w,h)}function Ra(l,h){l.H&&M(l.H,function(p,w){Ve(h,w,p)}),l.l&&Ry({},function(p,w){Ve(h,w,p)})}function Qy(l,h,p){p=Math.min(l.i.length,p);var w=l.l?g(l.l.Na,l.l,l):null;e:{var V=l.i;let F=-1;for(;;){const H=["count="+p];F==-1?0<p?(F=V[0].g,H.push("ofs="+F)):F=0:H.push("ofs="+F);let De=!0;for(let vt=0;vt<p;vt++){let ke=V[vt].g;const xt=V[vt].map;if(ke-=F,0>ke)F=Math.max(0,V[vt].g-100),De=!1;else try{$x(xt,H,"req"+ke+"_")}catch{w&&w(xt)}}if(De){w=H.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,w}function Yy(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ee||se(),U||(ee(),U=!0),Y.add(h,l),l.v=0}}function Xh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=je(g(l.Fa,l),Zy(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Xy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=je(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),Ll(this),Xy(this))};function Jh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Xy(l){l.g=new Gt(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=us(l.qa);Ve(h,"RID","rpc"),Ve(h,"SID",l.K),Ve(h,"AID",l.T),Ve(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ve(h,"TO",l.ja),Ve(h,"TYPE","xmlhttp"),Ra(l,h),l.m&&l.o&&Qh(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=jl(us(h)),p.m=null,p.P=!0,Ms(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Ll(this),Xh(this),Z(19))};function zl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Jy(l,h){var p=null;if(l.g==h){zl(l),Jh(l),l.g=null;var w=2}else if(Qe(l.h,h))p=h.D,Mt(l.h,h),w=1;else return;if(l.G!=0){if(h.o)if(w==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var V=l.B;w=B(),gt(w,new pe(w,p)),Fl(l)}else Yy(l);else if(V=h.s,V==3||V==0&&0<h.X||!(w==1&&Hx(l,h)||w==2&&Xh(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),V){case 1:Xr(l,5);break;case 4:Xr(l,10);break;case 3:Xr(l,6);break;default:Xr(l,2)}}}function Zy(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Xr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),w=l.Xa;const V=!w;w=new Yr(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rl(w,"https"),jl(w),V?zx(w.toString(),p):Ux(w.toString(),p)}else Z(2);l.G=0,l.l&&l.l.sa(h),ev(l),Hy(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function ev(l){if(l.G=0,l.ka=[],l.l){const h=zn(l.h);(h.length!=0||l.i.length!=0)&&(C(l.ka,h),C(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function tv(l,h,p){var w=p instanceof Yr?us(p):new Yr(p);if(w.g!="")h&&(w.g=h+"."+w.g),Dl(w,w.s);else{var V=a.location;w=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;var F=new Yr(null);w&&Rl(F,w),h&&(F.g=h),V&&Dl(F,V),p&&(F.l=p),w=F}return p=l.D,h=l.ya,p&&h&&Ve(w,p,h),Ve(w,"VER",l.la),Ra(l,w),w}function nv(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ye(new Ol({eb:p})):new Ye(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sv(){}t=sv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ul(){}Ul.prototype.g=function(l,h){return new Zt(l,h)};function Zt(l,h){dt.call(this),this.g=new Gy(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!v(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ji(this)}S(Zt,dt),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Yh(this.g)},Zt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=wa(l),l=p);h.i.push(new Kr(h.Ya++,l)),h.G==3&&Fl(h)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Yh(this.g),delete this.g,Zt.aa.N.call(this)};function rv(l){_a.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(rv,_a);function iv(){Ea.call(this),this.status=1}S(iv,Ea);function Ji(l){this.g=l}S(Ji,sv),Ji.prototype.ua=function(){gt(this.g,"a")},Ji.prototype.ta=function(l){gt(this.g,new rv(l))},Ji.prototype.sa=function(l){gt(this.g,new iv)},Ji.prototype.ra=function(){gt(this.g,"b")},Ul.prototype.createWebChannel=Ul.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,aT=function(){return new Ul},oT=function(){return B()},iT=Mn,Ym={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ln.NO_ERROR=0,Ln.TIMEOUT=8,Ln.HTTP_ERROR=6,ju=Ln,Wr.COMPLETE="complete",rT=Wr,Vn.EventType=$r,$r.OPEN="a",$r.CLOSE="b",$r.ERROR="c",$r.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Za=Vn,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,sT=Ye}).apply(typeof au<"u"?au:typeof self<"u"?self:typeof window<"u"?window:{});const Zw="@firebase/firestore",e_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new bg("@firebase/firestore");function co(){return Ai.logLevel}function q(t,...e){if(Ai.logLevel<=we.DEBUG){const n=e.map(Mg);Ai.debug(`Firestore (${fa}): ${t}`,...n)}}function Ft(t,...e){if(Ai.logLevel<=we.ERROR){const n=e.map(Mg);Ai.error(`Firestore (${fa}): ${t}`,...n)}}function Ni(t,...e){if(Ai.logLevel<=we.WARN){const n=e.map(Mg);Ai.warn(`Firestore (${fa}): ${t}`,...n)}}function Mg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,cT(t,s,n)}function cT(t,e,n){let s=`FIRESTORE (${fa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ft(s),new Error(s)}function oe(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||cT(e,r,s)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class vR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wR{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ts,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ts)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(oe(typeof s.accessToken=="string",31837,{l:s}),new lT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new _t(e)}}class _R{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ER{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new _R(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class t_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const s=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new t_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new t_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=IR(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function de(t,e){return t<e?-1:t>e?1:0}function Xm(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return de(s,r);{const i=uT(),o=xR(i.encode(n_(t,n)),i.encode(n_(e,n)));return o!==0?o:de(s,r)}}n+=s>65535?2:1}return de(t.length,e.length)}function n_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function xR(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return de(t[n],e[n]);return de(t.length,e.length)}function Wo(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}function hT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=-62135596800,r_=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*r_);return new He(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<s_)throw new K(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/r_}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-s_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new He(0,0))}static max(){return new ce(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="__name__";class $n{constructor(e,n,s){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ne(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return $n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $n?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=$n.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return de(e.length,n.length)}static compareSegments(e,n){const s=$n.isNumericId(e),r=$n.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?$n.extractNumericId(e).compare($n.extractNumericId(n)):Xm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Er.fromString(e.substring(4,e.length-2))}}class Ae extends $n{construct(e,n,s){return new Ae(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new K(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const bR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends $n{construct(e,n,s){return new qe(e,n,s)}static isValidIdentifier(e){return bR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i_}static keyField(){return new qe([i_])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new K(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new K(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new K(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Ae.fromString(e))}static fromName(e){return new Q(Ae.fromString(e).popFirst(5))}static empty(){return new Q(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=-1;class kd{constructor(e,n,s,r){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=r}}function Jm(t){return t.fields.find(e=>e.kind===2)}function ni(t){return t.fields.filter(e=>e.kind!==2)}kd.UNKNOWN_ID=-1;class Ou{constructor(e,n){this.fieldPath=e,this.kind=n}}class Gc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Gc(0,un.min())}}function SR(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ce.fromTimestamp(s===1e9?new He(n+1,0):new He(n,s));return new un(r,Q.empty(),e)}function fT(t){return new un(t.readTime,t.key,Wc)}class un{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new un(ce.min(),Q.empty(),Wc)}static max(){return new un(ce.max(),Q.empty(),Wc)}}function Lg(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==mT)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,s)=>{n(e)})}static reject(e){return new O((n,s)=>{s(e)})}static waitFor(e){return new O((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=O.resolve(!1);for(const s of e)n=n.next(r=>r?O.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new O((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++a,a===i&&s(o)},f=>r(f))}})}static doWhile(e,n){return new O((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="SimpleDb";class yh{static open(e,n,s,r){try{return new yh(n,e.transaction(r,s))}catch(i){throw new pc(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ts,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new pc(e,n.error)):this.S.resolve()},this.transaction.onerror=s=>{const r=Fg(s.target.error);this.S.reject(new pc(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(q(nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new AR(n)}}class Tr{static delete(e){return q(nn,"Removing database:",e),ri(rE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!hE())return!1;if(Tr.F())return!0;const e=lt(),n=Tr.M(e),s=0<n&&n<10,r=gT(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,n,s){this.name=e,this.version=n,this.B=s,this.L=null,Tr.M(lt())===12.2&&Ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(q(nn,"Opening database:",this.name),this.db=await new Promise((n,s)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=i=>{const o=i.target.result;n(o)},r.onblocked=()=>{s(new pc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=i=>{const o=i.target.error;o.name==="VersionError"?s(new K(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?s(new K(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):s(new pc(e,o))},r.onupgradeneeded=i=>{q(nn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;if(this.L!==null&&this.L!==i.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${i.oldVersion}, event.newVersion=${i.newVersion}, db.version=${o.version}`);this.B.q(o,r.transaction,i.oldVersion,this.version).next(()=>{q(nn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",n=>{const s=n.target;this.L=s.version},{passive:!0})),this.$&&(this.db.onversionchange=n=>this.$(n)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,s,r){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=yh.open(this.db,e,i?"readonly":"readwrite",s),c=r(a).next(d=>(a.v(),d)).catch(d=>(a.abort(d),O.reject(d))).toPromise();return c.catch(()=>{}),await a.D,c}catch(a){const c=a,d=c.name!=="FirebaseError"&&o<3;if(q(nn,"Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function gT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class kR{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return ri(this.K.delete())}}class pc extends K{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Mr(t){return t.name==="IndexedDbTransactionError"}class AR{constructor(e){this.store=e}put(e,n){let s;return n!==void 0?(q(nn,"PUT",this.store.name,e,n),s=this.store.put(n,e)):(q(nn,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ri(s)}add(e){return q(nn,"ADD",this.store.name,e,e),ri(this.store.add(e))}get(e){return ri(this.store.get(e)).next(n=>(n===void 0&&(n=null),q(nn,"GET",this.store.name,e,n),n))}delete(e){return q(nn,"DELETE",this.store.name,e),ri(this.store.delete(e))}count(){return q(nn,"COUNT",this.store.name),ri(this.store.count())}J(e,n){const s=this.options(e,n),r=s.index?this.store.index(s.index):this.store;if(typeof r.getAll=="function"){const i=r.getAll(s.range);return new O((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(s),o=[];return this.Y(i,(a,c)=>{o.push(c)}).next(()=>o)}}Z(e,n){const s=this.store.getAll(e,n===null?void 0:n);return new O((r,i)=>{s.onerror=o=>{i(o.target.error)},s.onsuccess=o=>{r(o.target.result)}})}X(e,n){q(nn,"DELETE ALL",this.store.name);const s=this.options(e,n);s.ee=!1;const r=this.cursor(s);return this.Y(r,(i,o,a)=>a.delete())}te(e,n){let s;n?s=e:(s={},n=e);const r=this.cursor(s);return this.Y(r,n)}ne(e){const n=this.cursor({});return new O((s,r)=>{n.onerror=i=>{const o=Fg(i.target.error);r(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():s()}):s()}})}Y(e,n){const s=[];return new O((r,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const c=new kR(a),d=n(a.primaryKey,a.value,c);if(d instanceof O){const f=d.catch(m=>(c.done(),O.reject(m)));s.push(f)}c.isDone?r():c.j===null?a.continue():a.continue(c.j)}}).next(()=>O.waitFor(s))}options(e,n){let s;return e!==void 0&&(typeof e=="string"?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.ee?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ri(t){return new O((e,n)=>{t.onsuccess=s=>{const r=s.target.result;e(r)},t.onerror=s=>{const r=Fg(s.target.error);n(r)}})}let o_=!1;function Fg(t){const e=Tr.M(lt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const s=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return o_||(o_=!0,setTimeout(()=>{throw s},0)),s}}return t}const gc="IndexBackfiller";class NR{constructor(e,n){this.asyncQueue=e,this.re=n,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){q(gc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.re.se();q(gc,`Documents written: ${n}`)}catch(n){Mr(n)?q(gc,"Ignoring IndexedDB error during index backfill: ",n):await zi(n)}await this.ie(6e4)})}}class PR{constructor(e,n){this.localStore=e,this.persistence=n}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.oe(n,e))}oe(e,n){const s=new Set;let r=n,i=!0;return O.doWhile(()=>i===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!s.has(o))return q(gc,`Processing collection: ${o}`),this._e(e,o,r).next(a=>{r-=a,s.add(o)});i=!1})).next(()=>n-r)}_e(e,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,s).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ae(r,i)).next(a=>(q(gc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ae(e,n){let s=e;return n.changes.forEach((r,i)=>{const o=fT(i);Lg(o,s)>0&&(s=o)}),new un(s.readTime,s.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}yn.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=-1;function vh(t){return t==null}function Hc(t){return t===0&&1/t==-1/0}function CR(t){return typeof t=="number"&&Number.isInteger(t)&&!Hc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="";function jt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=a_(e)),e=RR(t.get(n),e);return a_(e)}function RR(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Ad:n+="";break;default:n+=i}}return n}function a_(t){return t+Ad+""}function Wn(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===Ad&&t.charAt(1)==="",56145,{path:t}),Ae.emptyPath();const n=e-2,s=[];let r="";for(let i=0;i<e;){const o=t.indexOf(Ad,i);switch((o<0||o>n)&&ne(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;r.length===0?c=a:(r+=a,c=r,r=""),s.push(c);break;case"":r+=t.substring(i,o),r+="\0";break;case"":r+=t.substring(i,o+1);break;default:ne(61167,{path:t})}i=o+2}return new Ae(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si="remoteDocuments",yl="owner",no="owner",Kc="mutationQueues",DR="userId",An="mutations",c_="batchId",di="userMutationsIndex",l_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t,e){return[t,jt(e)]}function yT(t,e,n){return[t,jt(e),n]}const jR={},Go="documentMutations",Nd="remoteDocumentsV14",OR=["prefixPath","collectionGroup","readTime","documentId"],Mu="documentKeyIndex",VR=["prefixPath","collectionGroup","documentId"],vT="collectionGroupIndex",MR=["collectionGroup","readTime","prefixPath","documentId"],Qc="remoteDocumentGlobal",Zm="remoteDocumentGlobalKey",Ho="targets",wT="queryTargetsIndex",LR=["canonicalId","targetId"],Ko="targetDocuments",FR=["targetId","path"],zg="documentTargetsIndex",zR=["path","targetId"],Pd="targetGlobalKey",yi="targetGlobal",Yc="collectionParents",UR=["collectionId","parent"],Qo="clientMetadata",BR="clientId",wh="bundles",$R="bundleId",_h="namedQueries",qR="name",Ug="indexConfiguration",WR="indexId",ep="collectionGroupIndex",GR="collectionGroup",yc="indexState",HR=["indexId","uid"],_T="sequenceNumberIndex",KR=["uid","sequenceNumber"],vc="indexEntries",QR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ET="documentKeyIndex",YR=["indexId","uid","orderedDocumentKey"],Eh="documentOverlays",XR=["userId","collectionPath","documentId"],tp="collectionPathOverlayIndex",JR=["userId","collectionPath","largestBatchId"],TT="collectionGroupOverlayIndex",ZR=["userId","collectionGroup","largestBatchId"],Bg="globals",eD="name",IT=[Kc,An,Go,si,Ho,yl,yi,Ko,Qo,Qc,Yc,wh,_h],tD=[...IT,Eh],xT=[Kc,An,Go,Nd,Ho,yl,yi,Ko,Qo,Qc,Yc,wh,_h,Eh],bT=xT,$g=[...bT,Ug,yc,vc],nD=$g,ST=[...$g,Bg],sD=ST;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends pT{constructor(e,n){super(),this.he=e,this.currentSequenceNumber=n}}function ut(t,e){const n=fe(t);return Tr.N(n.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}}class cu{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Et.RED,this.left=r??Et.EMPTY,this.right=i??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Et(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Et.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new d_(this.data.getIterator())}getIteratorFrom(e){return new d_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ce)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ce(this.comparator);return n.data=e,n}}class d_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function so(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.fields=e,e.sort(qe.comparator)}static empty(){return new Qt([])}unionWith(e){let n=new Ce(qe.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new AT("Invalid base64 string: "+i):i}}(e);return new it(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const rD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=rD.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ns(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="server_timestamp",PT="__type__",CT="__previous_value__",RT="__local_write_time__";function qg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[PT])===null||n===void 0?void 0:n.stringValue)===NT}function Th(t){const e=t.mapValue.fields[CT];return qg(e)?Th(e):e}function Xc(t){const e=As(t.mapValue.fields[RT].timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n,s,r,i,o,a,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Cd="(default)";class Pi{constructor(e,n){this.projectId=e,this.database=n||Cd}static empty(){return new Pi("","")}get isDefaultDatabase(){return this.database===Cd}isEqual(e){return e instanceof Pi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="__type__",DT="__max__",lr={mapValue:{fields:{__type__:{stringValue:DT}}}},Gg="__vector__",Yo="value",Lu={nullValue:"NULL_VALUE"};function Ar(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qg(t)?4:jT(t)?9007199254740991:Ih(t)?10:11:ne(28295,{value:t})}function ns(t,e){if(t===e)return!0;const n=Ar(t);if(n!==Ar(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xc(t).isEqual(Xc(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=As(r.timestampValue),a=As(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ns(r.bytesValue).isEqual(Ns(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Fe(r.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(r.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Fe(r.integerValue)===Fe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Fe(r.doubleValue),a=Fe(i.doubleValue);return o===a?Hc(o)===Hc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Wo(t.arrayValue.values||[],e.arrayValue.values||[],ns);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(u_(o)!==u_(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ns(o[c],a[c])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Jc(t,e){return(t.values||[]).find(n=>ns(n,e))!==void 0}function Nr(t,e){if(t===e)return 0;const n=Ar(t),s=Ar(e);if(n!==s)return de(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Fe(i.integerValue||i.doubleValue),c=Fe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return h_(t.timestampValue,e.timestampValue);case 4:return h_(Xc(t),Xc(e));case 5:return Xm(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ns(i),c=Ns(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){const f=de(a[d],c[d]);if(f!==0)return f}return de(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=de(Fe(i.latitude),Fe(o.latitude));return a!==0?a:de(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return f_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,d,f;const m=i.fields||{},g=o.fields||{},E=(a=m[Yo])===null||a===void 0?void 0:a.arrayValue,S=(c=g[Yo])===null||c===void 0?void 0:c.arrayValue,A=de(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:f_(E,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===lr.mapValue&&o===lr.mapValue)return 0;if(i===lr.mapValue)return 1;if(o===lr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const g=Xm(c[m],f[m]);if(g!==0)return g;const E=Nr(a[c[m]],d[f[m]]);if(E!==0)return E}return de(c.length,f.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{Pe:n})}}function h_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=As(t),s=As(e),r=de(n.seconds,s.seconds);return r!==0?r:de(n.nanos,s.nanos)}function f_(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Nr(n[r],s[r]);if(i)return i}return de(n.length,s.length)}function Xo(t){return sp(t)}function sp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=As(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ns(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=sp(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${sp(n.fields[o])}`;return r+"}"}(t.mapValue):ne(61005,{value:t})}function Fu(t){switch(Ar(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Th(t);return e?16+Fu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ns(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Fu(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Lr(s.fields,(i,o)=>{r+=i.length+Fu(o)}),r}(t.mapValue);default:throw ne(13486,{value:t})}}function Zc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rp(t){return!!t&&"integerValue"in t}function el(t){return!!t&&"arrayValue"in t}function m_(t){return!!t&&"nullValue"in t}function p_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zu(t){return!!t&&"mapValue"in t}function Ih(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Wg])===null||n===void 0?void 0:n.stringValue)===Gg}function wc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Lr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=wc(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===DT}const OT={mapValue:{fields:{[Wg]:{stringValue:Gg},[Yo]:{arrayValue:{}}}}};function oD(t){return"nullValue"in t?Lu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Zc(Pi.empty(),Q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Ih(t)?OT:{mapValue:{}}:ne(35942,{value:t})}function aD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Zc(Pi.empty(),Q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?OT:"mapValue"in t?Ih(t)?{mapValue:{}}:lr:ne(61959,{value:t})}function g_(t,e){const n=Nr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function y_(t,e){const n=Nr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!zu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wc(n)}setAll(e){let n=qe.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=wc(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());zu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ns(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];zu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Lr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Rt(wc(this.value))}}function VT(t){const e=[];return Lr(t.fields,(n,s)=>{const r=new qe([n]);if(zu(s)){const i=VT(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Je(e,0,ce.min(),ce.min(),ce.min(),Rt.empty(),0)}static newFoundDocument(e,n,s,r){return new Je(e,1,n,ce.min(),s,r,0)}static newNoDocument(e,n){return new Je(e,2,n,ce.min(),ce.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new Je(e,3,n,ce.min(),ce.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.position=e,this.inclusive=n}}function v_(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Q.comparator(Q.fromName(o.referenceValue),n.key):s=Nr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function w_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ns(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n="asc"){this.field=e,this.dir=n}}function cD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{}class _e extends MT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new lD(e,n,s):n==="array-contains"?new hD(e,s):n==="in"?new $T(e,s):n==="not-in"?new fD(e,s):n==="array-contains-any"?new mD(e,s):new _e(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new uD(e,s):new dD(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Nr(n,this.value)):n!==null&&Ar(this.value)===Ar(n)&&this.matchesComparison(Nr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ne extends MT{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Ne(e,n)}matches(e){return Zo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Zo(t){return t.op==="and"}function ip(t){return t.op==="or"}function Hg(t){return LT(t)&&Zo(t)}function LT(t){for(const e of t.filters)if(e instanceof Ne)return!1;return!0}function op(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+Xo(t.value);if(Hg(t))return t.filters.map(e=>op(e)).join(",");{const e=t.filters.map(n=>op(n)).join(",");return`${t.op}(${e})`}}function FT(t,e){return t instanceof _e?function(s,r){return r instanceof _e&&s.op===r.op&&s.field.isEqual(r.field)&&ns(s.value,r.value)}(t,e):t instanceof Ne?function(s,r){return r instanceof Ne&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&FT(o,r.filters[a]),!0):!1}(t,e):void ne(19439)}function zT(t,e){const n=t.filters.concat(e);return Ne.create(n,t.op)}function UT(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${Xo(n.value)}`}(t):t instanceof Ne?function(n){return n.op.toString()+" {"+n.getFilters().map(UT).join(" ,")+"}"}(t):"Filter"}class lD extends _e{constructor(e,n,s){super(e,n,s),this.key=Q.fromName(s.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class uD extends _e{constructor(e,n){super(e,"in",n),this.keys=BT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dD extends _e{constructor(e,n){super(e,"not-in",n),this.keys=BT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Q.fromName(s.referenceValue))}class hD extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return el(n)&&Jc(n.arrayValue,this.value)}}class $T extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jc(this.value.arrayValue,n)}}class fD extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jc(this.value.arrayValue,n)}}class mD extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!el(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Jc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function ap(t,e=null,n=[],s=[],r=null,i=null,o=null){return new pD(t,e,n,s,r,i,o)}function Ci(t){const e=fe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>op(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Xo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Xo(s)).join(",")),e.Ie=n}return e.Ie}function vl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!w_(t.startAt,e.startAt)&&w_(t.endAt,e.endAt)}function Rd(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Dd(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function __(t,e,n){let s=Lu,r=!0;for(const i of Dd(t,e)){let o=Lu,a=!0;switch(i.op){case"<":case"<=":o=oD(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Lu}g_({value:s,inclusive:r},{value:o,inclusive:a})<0&&(s=o,r=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];g_({value:s,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(s=o,r=n.inclusive);break}}return{value:s,inclusive:r}}function E_(t,e,n){let s=lr,r=!0;for(const i of Dd(t,e)){let o=lr,a=!0;switch(i.op){case">=":case">":o=aD(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=lr}y_({value:s,inclusive:r},{value:o,inclusive:a})>0&&(s=o,r=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];y_({value:s,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(s=o,r=n.inclusive);break}}return{value:s,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function gD(t,e,n,s,r,i,o,a){return new ma(t,e,n,s,r,i,o,a)}function xh(t){return new ma(t)}function T_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qT(t){return t.collectionGroup!==null}function _c(t){const e=fe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ce(qe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new tl(i,s))}),n.has(qe.keyField().canonicalString())||e.Ee.push(new tl(qe.keyField(),s))}return e.Ee}function wn(t){const e=fe(t);return e.de||(e.de=yD(e,_c(t))),e.de}function yD(t,e){if(t.limitType==="F")return ap(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new tl(r.field,i)});const n=t.endAt?new Jo(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Jo(t.startAt.position,t.startAt.inclusive):null;return ap(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function cp(t,e){const n=t.filters.concat([e]);return new ma(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function lp(t,e,n){return new ma(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bh(t,e){return vl(wn(t),wn(e))&&t.limitType===e.limitType}function WT(t){return`${Ci(wn(t))}|lt:${t.limitType}`}function lo(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>UT(r)).join(", ")}]`),vh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Xo(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Xo(r)).join(",")),`Target(${s})`}(wn(t))}; limitType=${t.limitType})`}function wl(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Q.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of _c(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,c){const d=v_(o,a,c);return o.inclusive?d<=0:d<0}(s.startAt,_c(s),r)||s.endAt&&!function(o,a,c){const d=v_(o,a,c);return o.inclusive?d>=0:d>0}(s.endAt,_c(s),r))}(t,e)}function vD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GT(t){return(e,n)=>{let s=!1;for(const r of _c(t)){const i=wD(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function wD(t,e,n){const s=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),d=a.data.field(i);return c!==null&&d!==null?Nr(c,d):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Lr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return kT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new Ue(Q.comparator);function an(){return _D}const HT=new Ue(Q.comparator);function ec(...t){let e=HT;for(const n of t)e=e.insert(n.key,n);return e}function KT(t){let e=HT;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Gn(){return Ec()}function QT(){return Ec()}function Ec(){return new js(t=>t.toString(),(t,e)=>t.isEqual(e))}const ED=new Ue(Q.comparator),TD=new Ce(Q.comparator);function ge(...t){let e=TD;for(const n of t)e=e.add(n);return e}const ID=new Ce(de);function xD(){return ID}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hc(e)?"-0":e}}function YT(t){return{integerValue:""+t}}function bD(t,e){return CR(e)?YT(e):Kg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this._=void 0}}function SD(t,e,n){return t instanceof nl?function(r,i){const o={fields:{[PT]:{stringValue:NT},[RT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&qg(i)&&(i=Th(i)),i&&(o.fields[CT]=i),{mapValue:o}}(n,e):t instanceof ea?JT(t,e):t instanceof ta?ZT(t,e):function(r,i){const o=XT(r,i),a=I_(o)+I_(r.Re);return rp(o)&&rp(r.Re)?YT(a):Kg(r.serializer,a)}(t,e)}function kD(t,e,n){return t instanceof ea?JT(t,e):t instanceof ta?ZT(t,e):n}function XT(t,e){return t instanceof sl?function(s){return rp(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class nl extends Sh{}class ea extends Sh{constructor(e){super(),this.elements=e}}function JT(t,e){const n=eI(e);for(const s of t.elements)n.some(r=>ns(r,s))||n.push(s);return{arrayValue:{values:n}}}class ta extends Sh{constructor(e){super(),this.elements=e}}function ZT(t,e){let n=eI(e);for(const s of t.elements)n=n.filter(r=>!ns(r,s));return{arrayValue:{values:n}}}class sl extends Sh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function I_(t){return Fe(t.integerValue||t.doubleValue)}function eI(t){return el(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n){this.field=e,this.transform=n}}function ND(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof ea&&r instanceof ea||s instanceof ta&&r instanceof ta?Wo(s.elements,r.elements,ns):s instanceof sl&&r instanceof sl?ns(s.Re,r.Re):s instanceof nl&&r instanceof nl}(t.transform,e.transform)}class PD{constructor(e,n){this.version=e,this.transformResults=n}}class Dt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dt}static exists(e){return new Dt(void 0,e)}static updateTime(e){return new Dt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kh{}function tI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ah(t.key,Dt.none()):new pa(t.key,t.data,Dt.none());{const n=t.data,s=Rt.empty();let r=new Ce(qe.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Os(t.key,s,new Qt(r.toArray()),Dt.none())}}function CD(t,e,n){t instanceof pa?function(r,i,o){const a=r.value.clone(),c=b_(r.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Os?function(r,i,o){if(!Uu(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=b_(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(nI(r)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Tc(t,e,n,s){return t instanceof pa?function(i,o,a,c){if(!Uu(i.precondition,o))return a;const d=i.value.clone(),f=S_(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Os?function(i,o,a,c){if(!Uu(i.precondition,o))return a;const d=S_(i.fieldTransforms,c,o),f=o.data;return f.setAll(nI(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(i,o,a){return Uu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function RD(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=XT(s.transform,r||null);i!=null&&(n===null&&(n=Rt.empty()),n.set(s.field,i))}return n||null}function x_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Wo(s,r,(i,o)=>ND(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pa extends kh{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Os extends kh{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function b_(t,e,n){const s=new Map;oe(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,kD(o,a,n[r]))}return s}function S_(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,SD(i,o,e))}return s}class Ah extends kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sI extends kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&CD(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Tc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Tc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=QT();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const c=tI(o,a);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,(n,s)=>x_(n,s))&&Wo(this.baseMutations,e.baseMutations,(n,s)=>x_(n,s))}}class Yg{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){oe(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let r=function(){return ED}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Yg(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,Ie;function jD(t){switch(t){case z.OK:return ne(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function rI(t){if(t===void 0)return Ft("GRPC error has no .code"),z.UNKNOWN;switch(t){case tt.OK:return z.OK;case tt.CANCELLED:return z.CANCELLED;case tt.UNKNOWN:return z.UNKNOWN;case tt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case tt.INTERNAL:return z.INTERNAL;case tt.UNAVAILABLE:return z.UNAVAILABLE;case tt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case tt.NOT_FOUND:return z.NOT_FOUND;case tt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case tt.ABORTED:return z.ABORTED;case tt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case tt.DATA_LOSS:return z.DATA_LOSS;default:return ne(39323,{code:t})}}(Ie=tt||(tt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new Er([4294967295,4294967295],0);function k_(t){const e=uT().encode(t),n=new nT;return n.update(e),new Uint8Array(n.digest())}function A_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Er([n,s],0),new Er([r,i],0)]}class Jg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new tc(`Invalid padding: ${n}`);if(s<0)throw new tc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new tc(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Er.fromNumber(this.pe)}we(e,n,s){let r=e.add(n.multiply(Er.fromNumber(s)));return r.compare(OD)===1&&(r=new Er([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=k_(e),[s,r]=A_(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);if(!this.be(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Jg(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=k_(e),[s,r]=A_(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,_l.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Nh(ce.min(),r,new Ue(de),an(),ge())}}class _l{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new _l(s,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n,s,r){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=r}}class iI{constructor(e,n){this.targetId=e,this.Ce=n}}class oI{constructor(e,n,s=it.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class N_{constructor(){this.Fe=0,this.Me=P_(),this.xe=it.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ge(),n=ge(),s=ge();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ne(38017,{changeType:i})}}),new _l(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=P_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,oe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class VD{constructor(e){this.ze=e,this.je=new Map,this.He=an(),this.Je=lu(),this.Ye=lu(),this.Ze=new Ue(de)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,s=e.Ce.count,r=this._t(n);if(r){const i=r.target;if(Rd(i))if(s===0){const o=new Q(i.path);this.tt(n,o,Je.newNoDocument(o,ce.min()))}else oe(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const a=this.ct(e),c=a?this.lt(a,e,o):1;if(c!==0){this.st(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Ns(s).toUint8Array()}catch(c){if(c instanceof AT)return Ni("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Jg(o,r,i)}catch(c){return Ni(c instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),r++)}),r}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&Rd(a.target)){const c=new Q(a.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Je.newNoDocument(c,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let s=ge();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const d=this._t(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const r=new Nh(e,n,this.Ze,this.He,s);return this.He=an(),this.Je=lu(),this.Ye=lu(),this.Ze=new Ue(de),r}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new N_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ce(de),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ce(de),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new N_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function lu(){return new Ue(Q.comparator)}function P_(){return new Ue(Q.comparator)}const MD={asc:"ASCENDING",desc:"DESCENDING"},LD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FD={and:"AND",or:"OR"};class zD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function up(t,e){return t.useProto3Json||vh(e)?e:{value:e}}function na(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UD(t,e){return na(t,e.toTimestamp())}function Ut(t){return oe(!!t,49232),ce.fromTimestamp(function(n){const s=As(n);return new He(s.seconds,s.nanos)}(t))}function Zg(t,e){return dp(t,e).canonicalString()}function dp(t,e){const n=function(r){return new Ae(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cI(t){const e=Ae.fromString(t);return oe(yI(e),10190,{key:e.toString()}),e}function jd(t,e){return Zg(t.databaseId,e.path)}function vi(t,e){const n=cI(e);if(n.get(1)!==t.databaseId.projectId)throw new K(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(dI(n))}function lI(t,e){return Zg(t.databaseId,e)}function uI(t){const e=cI(t);return e.length===4?Ae.emptyPath():dI(e)}function hp(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dI(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function C_(t,e,n){return{name:jd(t,e),fields:n.value.mapValue.fields}}function BD(t,e,n){const s=vi(t,e.name),r=Ut(e.updateTime),i=e.createTime?Ut(e.createTime):ce.min(),o=new Rt({mapValue:{fields:e.fields}}),a=Je.newFoundDocument(s,r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function $D(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(oe(f===void 0||typeof f=="string",58123),it.fromBase64String(f||"")):(oe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),it.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=d.code===void 0?z.UNKNOWN:rI(d.code);return new K(f,d.message||"")}(o);n=new oI(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=vi(t,s.document.name),i=Ut(s.document.updateTime),o=s.document.createTime?Ut(s.document.createTime):ce.min(),a=new Rt({mapValue:{fields:s.document.fields}}),c=Je.newFoundDocument(r,i,o,a),d=s.targetIds||[],f=s.removedTargetIds||[];n=new Bu(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=vi(t,s.document),i=s.readTime?Ut(s.readTime):ce.min(),o=Je.newNoDocument(r,i),a=s.removedTargetIds||[];n=new Bu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=vi(t,s.document),i=s.removedTargetIds||[];n=new Bu([],i,r,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new DD(r,i),a=s.targetId;n=new iI(a,o)}}return n}function Od(t,e){let n;if(e instanceof pa)n={update:C_(t,e.key,e.value)};else if(e instanceof Ah)n={delete:jd(t,e.key)};else if(e instanceof Os)n={update:C_(t,e.key,e.data),updateMask:QD(e.fieldMask)};else{if(!(e instanceof sI))return ne(16599,{ft:e.type});n={verify:jd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof nl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ea)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ta)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sl)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw ne(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:UD(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function fp(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Dt.updateTime(Ut(i.updateTime)):i.exists!==void 0?Dt.exists(i.exists):Dt.none()}(e.currentDocument):Dt.none(),s=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new nl;else if("appendMissingElements"in a){const f=a.appendMissingElements.values||[];c=new ea(f)}else if("removeAllFromArray"in a){const f=a.removeAllFromArray.values||[];c=new ta(f)}else"increment"in a?c=new sl(o,a.increment):ne(16584,{proto:a});const d=qe.fromServerFormat(a.fieldPath);return new AD(d,c)}(t,r)):[];if(e.update){e.update.name;const r=vi(t,e.update.name),i=new Rt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const d=c.fieldPaths||[];return new Qt(d.map(f=>qe.fromServerFormat(f)))}(e.updateMask);return new Os(r,i,o,n,s)}return new pa(r,i,n,s)}if(e.delete){const r=vi(t,e.delete);return new Ah(r,n)}if(e.verify){const r=vi(t,e.verify);return new sI(r,n)}return ne(1463,{proto:e})}function qD(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Ut(r.updateTime):Ut(i);return o.isEqual(ce.min())&&(o=Ut(i)),new PD(o,r.transformResults||[])}(n,e))):[]}function hI(t,e){return{documents:[lI(t,e.path)]}}function fI(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=lI(t,r);const i=function(d){if(d.length!==0)return gI(Ne.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:uo(g.field),direction:GD(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=up(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:r}}function mI(t){let e=uI(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){oe(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=pI(m);return g instanceof Ne&&Hg(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(S){return new tl(ho(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,vh(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,E=m.values||[];return new Jo(E,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,E=m.values||[];return new Jo(E,g)}(n.endAt)),gD(e,r,o,i,a,"F",c,d)}function WD(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ho(n.unaryFilter.field);return _e.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ho(n.unaryFilter.field);return _e.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ho(n.unaryFilter.field);return _e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ho(n.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return _e.create(ho(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ne.create(n.compositeFilter.filters.map(s=>pI(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function GD(t){return MD[t]}function HD(t){return LD[t]}function KD(t){return FD[t]}function uo(t){return{fieldPath:t.canonicalString()}}function ho(t){return qe.fromServerFormat(t.fieldPath)}function gI(t){return t instanceof _e?function(n){if(n.op==="=="){if(p_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NAN"}};if(m_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NAN"}};if(m_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(n.field),op:HD(n.op),value:n.value}}}(t):t instanceof Ne?function(n){const s=n.getFilters().map(r=>gI(r));return s.length===1?s[0]:{compositeFilter:{op:KD(n.op),filters:s}}}(t):ne(54877,{filter:t})}function QD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n,s,r,i=ce.min(),o=ce.min(),a=it.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.wt=e}}function YD(t,e){let n;if(e.document)n=BD(t.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Q.fromSegments(e.noDocument.path),r=Di(e.noDocument.readTime);n=Je.newNoDocument(s,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne(56709);{const s=Q.fromSegments(e.unknownDocument.path),r=Di(e.unknownDocument.version);n=Je.newUnknownDocument(s,r)}}return e.readTime&&n.setReadTime(function(r){const i=new He(r[0],r[1]);return ce.fromTimestamp(i)}(e.readTime)),n}function R_(t,e){const n=e.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=function(i,o){return{name:jd(i,o.key),fields:o.data.value.mapValue.fields,updateTime:na(i,o.version.toTimestamp()),createTime:na(i,o.createTime.toTimestamp())}}(t.wt,e);else if(e.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:Ri(e.version)};else{if(!e.isUnknownDocument())return ne(57904,{document:e});s.unknownDocument={path:n.path.toArray(),version:Ri(e.version)}}return s}function Vd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ri(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Di(t){const e=new He(t.seconds,t.nanoseconds);return ce.fromTimestamp(e)}function ii(t,e){const n=(e.baseMutations||[]).map(i=>fp(t.wt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const s=e.mutations.map(i=>fp(t.wt,i)),r=He.fromMillis(e.localWriteTimeMs);return new Qg(e.batchId,r,n,s)}function nc(t){const e=Di(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Di(t.lastLimboFreeSnapshotVersion):ce.min();let s;return s=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return oe(o===1,1966,{count:o}),wn(xh(uI(i.documents[0])))}(t.query):function(i){return wn(mI(i))}(t.query),new vs(s,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,it.fromBase64String(t.resumeToken))}function wI(t,e){const n=Ri(e.snapshotVersion),s=Ri(e.lastLimboFreeSnapshotVersion);let r;r=Rd(e.target)?hI(t.wt,e.target):fI(t.wt,e.target).gt;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ci(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:r}}function _I(t){const e=mI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lp(e,e.limit,"L"):e}function Of(t,e){return new Xg(e.largestBatchId,fp(t.wt,e.overlayMutation))}function D_(t,e){const n=e.path.lastSegment();return[t,jt(e.path.popLast()),n]}function j_(t,e,n,s){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ri(s.readTime),documentKey:jt(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{getBundleMetadata(e,n){return O_(e).get(n).next(s=>{if(s)return function(i){return{id:i.bundleId,createTime:Di(i.createTime),version:i.version}}(s)})}saveBundleMetadata(e,n){return O_(e).put(function(r){return{bundleId:r.id,createTime:Ri(Ut(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return V_(e).get(n).next(s=>{if(s)return function(i){return{name:i.name,query:_I(i.bundledQuery),readTime:Di(i.readTime)}}(s)})}saveNamedQuery(e,n){return V_(e).put(function(r){return{name:r.name,readTime:Ri(Ut(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function O_(t){return ut(t,wh)}function V_(t){return ut(t,_h)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.serializer=e,this.userId=n}static bt(e,n){const s=n.uid||"";return new Ph(e,s)}getOverlay(e,n){return Ua(e).get(D_(this.userId,n)).next(s=>s?Of(this.serializer,s):null)}getOverlays(e,n){const s=Gn();return O.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){const r=[];return s.forEach((i,o)=>{const a=new Xg(n,o);r.push(this.St(e,a))}),O.waitFor(r)}removeOverlaysForBatchId(e,n,s){const r=new Set;n.forEach(o=>r.add(jt(o.getCollectionPath())));const i=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,s],[this.userId,o,s+1],!1,!0);i.push(Ua(e).X(tp,a))}),O.waitFor(i)}getOverlaysForCollection(e,n,s){const r=Gn(),i=jt(n),o=IDBKeyRange.bound([this.userId,i,s],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ua(e).J(tp,o).next(a=>{for(const c of a){const d=Of(this.serializer,c);r.set(d.getKey(),d)}return r})}getOverlaysForCollectionGroup(e,n,s,r){const i=Gn();let o;const a=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ua(e).te({index:TT,range:a},(c,d,f)=>{const m=Of(this.serializer,d);i.size()<r||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>i)}St(e,n){return Ua(e).put(function(r,i,o){const[a,c,d]=D_(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Od(r.wt,o.mutation)}}(this.serializer,this.userId,n))}}function Ua(t){return ut(t,Eh)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{Dt(e){return ut(e,Bg)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(n=>{const s=n==null?void 0:n.value;return s?it.fromUint8Array(s):it.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Dt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(Fe(e.integerValue));else if("doubleValue"in e){const s=Fe(e.doubleValue);isNaN(s)?this.Mt(n,13):(this.Mt(n,15),Hc(s)?n.xt(0):n.xt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Mt(n,20),typeof s=="string"&&(s=As(s)),n.Ot(`${s.seconds||""}`),n.xt(s.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(Ns(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.Mt(n,45),n.xt(s.latitude||0),n.xt(s.longitude||0)}else"mapValue"in e?jT(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):Ih(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):ne(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){const s=e.fields||{};this.Mt(n,55);for(const r of Object.keys(s))this.Nt(r,n),this.Ct(s[r],n)}qt(e,n){var s,r;const i=e.fields||{};this.Mt(n,53);const o=Yo,a=((r=(s=i[o].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.length)||0;this.Mt(n,15),n.xt(Fe(a)),this.Nt(o,n),this.Ct(i[o],n)}$t(e,n){const s=e.values||[];this.Mt(n,50);for(const r of s)this.Ct(r,n)}kt(e,n){this.Mt(n,37),Q.fromName(e).path.forEach(s=>{this.Mt(n,60),this.Kt(s,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}}oi.Wt=new oi;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=255;function ZD(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function M_(t){const e=64-function(s){let r=0;for(let i=0;i<8;++i){const o=ZD(255&s[i]);if(r+=o,o!==8)break}return r}(t);return Math.ceil(e/8)}class ej{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.zt(s.value),s=n.next();this.jt()}Ht(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Jt(s.value),s=n.next();this.Yt()}Zt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.zt(s);else if(s<2048)this.zt(960|s>>>6),this.zt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.zt(480|s>>>12),this.zt(128|63&s>>>6),this.zt(128|63&s);else{const r=n.codePointAt(0);this.zt(240|r>>>18),this.zt(128|63&r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r)}}this.jt()}Xt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Yt()}en(e){const n=this.tn(e),s=M_(n);this.nn(1+s),this.buffer[this.position++]=255&s;for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=255&n[r]}rn(e){const n=this.tn(e),s=M_(n);this.nn(1+s),this.buffer[this.position++]=~(255&s);for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}sn(){this._n(ro),this._n(255)}an(){this.un(ro),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),s=!!(128&n[0]);n[0]^=s?255:128;for(let r=1;r<n.length;++r)n[r]^=s?255:0;return n}zt(e){const n=255&e;n===0?(this._n(0),this._n(255)):n===ro?(this._n(ro),this._n(0)):this._n(n)}Jt(e){const n=255&e;n===0?(this.un(0),this.un(255)):n===ro?(this.un(ro),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const n=e+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const r=new Uint8Array(s);r.set(this.buffer),this.buffer=r}}class tj{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class nj{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class Ba{constructor(){this.ln=new ej,this.hn=new tj(this.ln),this.Pn=new nj(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,s,r){this.In=e,this.En=n,this.dn=s,this.An=r}Rn(){const e=this.An.length,n=e===0||this.An[e-1]===255?e+1:e,s=new Uint8Array(n);return s.set(this.An,0),n!==e?s.set([0],this.An.length):++s[s.length-1],new ai(this.In,this.En,this.dn,s)}Vn(e,n,s){return{indexId:this.In,uid:e,arrayValue:$u(this.dn),directionalValue:$u(this.An),orderedDocumentKey:$u(n),documentKey:s.path.toArray()}}mn(e,n,s){const r=this.Vn(e,n,s);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Gs(t,e){let n=t.In-e.In;return n!==0?n:(n=L_(t.dn,e.dn),n!==0?n:(n=L_(t.An,e.An),n!==0?n:Q.comparator(t.En,e.En)))}function L_(t,e){for(let n=0;n<t.length&&n<e.length;++n){const s=t[n]-e[n];if(s!==0)return s}return t.length-e.length}function $u(t){return dE()?function(n){let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}(t):t}function F_(t){return typeof t!="string"?t:function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(t)}class z_{constructor(e){this.fn=new Ce((n,s)=>qe.comparator(n.field,s.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const n of e.filters){const s=n;s.isInequality()?this.fn=this.fn.add(s):this.pn.push(s)}}get yn(){return this.fn.size>1}wn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const n=Jm(e);if(n!==void 0&&!this.bn(n))return!1;const s=ni(e);let r=new Set,i=0,o=0;for(;i<s.length&&this.bn(s[i]);++i)r=r.add(s[i].fieldPath.canonicalString());if(i===s.length)return!0;if(this.fn.size>0){const a=this.fn.getIterator().getNext();if(!r.has(a.field.canonicalString())){const c=s[i];if(!this.Sn(a,c)||!this.Dn(this.gn[o++],c))return!1}++i}for(;i<s.length;++i){const a=s[i];if(o>=this.gn.length||!this.Dn(this.gn[o++],a))return!1}return!0}vn(){if(this.yn)return null;let e=new Ce(qe.comparator);const n=[];for(const s of this.pn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")n.push(new Ou(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),n.push(new Ou(s.field,0))}for(const s of this.gn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),n.push(new Ou(s.field,s.dir==="asc"?0:1)));return new kd(kd.UNKNOWN_ID,this.collectionId,n,Gc.empty())}bn(e){for(const n of this.pn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===s}Dn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(t){var e,n;if(oe(t instanceof _e||t instanceof Ne,20012),t instanceof _e){if(t instanceof $T){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>_e.create(t.field,"==",i)))||[];return Ne.create(r,"or")}return t}const s=t.filters.map(r=>EI(r));return Ne.create(s,t.op)}function sj(t){if(t.getFilters().length===0)return[];const e=gp(EI(t));return oe(TI(e),7391),mp(e)||pp(e)?[e]:e.getFilters()}function mp(t){return t instanceof _e}function pp(t){return t instanceof Ne&&Hg(t)}function TI(t){return mp(t)||pp(t)||function(n){if(n instanceof Ne&&ip(n)){for(const s of n.getFilters())if(!mp(s)&&!pp(s))return!1;return!0}return!1}(t)}function gp(t){if(oe(t instanceof _e||t instanceof Ne,34018),t instanceof _e)return t;if(t.filters.length===1)return gp(t.filters[0]);const e=t.filters.map(s=>gp(s));let n=Ne.create(e,t.op);return n=Md(n),TI(n)?n:(oe(n instanceof Ne,64498),oe(Zo(n),40251),oe(n.filters.length>1,57927),n.filters.reduce((s,r)=>ey(s,r)))}function ey(t,e){let n;return oe(t instanceof _e||t instanceof Ne,38388),oe(e instanceof _e||e instanceof Ne,25473),n=t instanceof _e?e instanceof _e?function(r,i){return Ne.create([r,i],"and")}(t,e):U_(t,e):e instanceof _e?U_(e,t):function(r,i){if(oe(r.filters.length>0&&i.filters.length>0,48005),Zo(r)&&Zo(i))return zT(r,i.getFilters());const o=ip(r)?r:i,a=ip(r)?i:r,c=o.filters.map(d=>ey(d,a));return Ne.create(c,"or")}(t,e),Md(n)}function U_(t,e){if(Zo(e))return zT(e,t.getFilters());{const n=e.filters.map(s=>ey(t,s));return Ne.create(n,"or")}}function Md(t){if(oe(t instanceof _e||t instanceof Ne,11850),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return Md(e[0]);if(LT(t))return t;const n=e.map(r=>Md(r)),s=[];return n.forEach(r=>{r instanceof _e?s.push(r):r instanceof Ne&&(r.op===t.op?s.push(...r.filters):s.push(r))}),s.length===1?s[0]:Ne.create(s,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.Cn=new ty}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(un.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(un.min())}updateCollectionGroup(e,n,s){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class ty{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Ce(Ae.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ce(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="IndexedDbIndexManager",uu=new Uint8Array(0);class ij{constructor(e,n){this.databaseId=n,this.Fn=new ty,this.Mn=new js(s=>Ci(s),(s,r)=>vl(s,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Fn.has(n)){const s=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.Fn.add(n)});const i={collectionId:s,parent:jt(r)};return $_(e).put(i)}return O.resolve()}getCollectionParents(e,n){const s=[],r=IDBKeyRange.bound([n,""],[hT(n),""],!1,!0);return $_(e).J(r).next(i=>{for(const o of i){if(o.collectionId!==n)break;s.push(Wn(o.parent))}return s})}addFieldIndex(e,n){const s=$a(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const i=s.add(r);if(n.indexState){const o=oo(e);return i.next(a=>{o.put(j_(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const s=$a(e),r=oo(e),i=io(e);return s.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=$a(e),s=io(e),r=oo(e);return n.X().next(()=>s.X()).next(()=>r.X())}createTargetIndexes(e,n){return O.forEach(this.xn(n),s=>this.getIndexType(e,s).next(r=>{if(r===0||r===1){const i=new z_(s).vn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const s=io(e);let r=!0;const i=new Map;return O.forEach(this.xn(n),o=>this.On(e,o).next(a=>{r&&(r=!!a),i.set(o,a)})).next(()=>{if(r){let o=ge();const a=[];return O.forEach(i,(c,d)=>{q(B_,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(j=>`${j.fieldPath}:${j.kind}`).join(",")}`}(c)} to execute ${Ci(n)}`);const f=function(I,j){const L=Jm(j);if(L===void 0)return null;for(const M of Dd(I,L.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(d,c),m=function(I,j){const L=new Map;for(const M of ni(j))for(const _ of Dd(I,M.fieldPath))switch(_.op){case"==":case"in":L.set(M.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return L.set(M.fieldPath.canonicalString(),_.value),Array.from(L.values())}return null}(d,c),g=function(I,j){const L=[];let M=!0;for(const _ of ni(j)){const y=_.kind===0?__(I,_.fieldPath,I.startAt):E_(I,_.fieldPath,I.startAt);L.push(y.value),M&&(M=y.inclusive)}return new Jo(L,M)}(d,c),E=function(I,j){const L=[];let M=!0;for(const _ of ni(j)){const y=_.kind===0?E_(I,_.fieldPath,I.endAt):__(I,_.fieldPath,I.endAt);L.push(y.value),M&&(M=y.inclusive)}return new Jo(L,M)}(d,c),S=this.Nn(c,d,g),A=this.Nn(c,d,E),C=this.Bn(c,d,m),x=this.Ln(c.indexId,f,S,g.inclusive,A,E.inclusive,C);return O.forEach(x,v=>s.Z(v,n.limit).next(I=>{I.forEach(j=>{const L=Q.fromSegments(j.documentKey);o.has(L)||(o=o.add(L),a.push(L))})}))}).next(()=>a)}return O.resolve(null)})}xn(e){let n=this.Mn.get(e);return n||(e.filters.length===0?n=[e]:n=sj(Ne.create(e.filters,"and")).map(s=>ap(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,n),n)}Ln(e,n,s,r,i,o,a){const c=(n!=null?n.length:1)*Math.max(s.length,i.length),d=c/(n!=null?n.length:1),f=[];for(let m=0;m<c;++m){const g=n?this.kn(n[m/d]):uu,E=this.qn(e,g,s[m%d],r),S=this.Qn(e,g,i[m%d],o),A=a.map(C=>this.qn(e,g,C,!0));f.push(...this.createRange(E,S,A))}return f}qn(e,n,s,r){const i=new ai(e,Q.empty(),n,s);return r?i:i.Rn()}Qn(e,n,s,r){const i=new ai(e,Q.empty(),n,s);return r?i.Rn():i}On(e,n){const s=new z_(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(i=>{let o=null;for(const a of i)s.wn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let s=2;const r=this.xn(n);return O.forEach(r,i=>this.On(e,i).next(o=>{o?s!==0&&o.fields.length<function(c){let d=new Ce(qe.comparator),f=!1;for(const m of c.filters)for(const g of m.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:d=d.add(g.field));for(const m of c.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(f?1:0)}(i)&&(s=1):s=0})).next(()=>function(o){return o.limit!==null}(n)&&r.length>1&&s===2?1:s)}$n(e,n){const s=new Ba;for(const r of ni(e)){const i=n.data.field(r.fieldPath);if(i==null)return null;const o=s.Tn(r.kind);oi.Wt.vt(i,o)}return s.cn()}kn(e){const n=new Ba;return oi.Wt.vt(e,n.Tn(0)),n.cn()}Un(e,n){const s=new Ba;return oi.Wt.vt(Zc(this.databaseId,n),s.Tn(function(i){const o=ni(i);return o.length===0?0:o[o.length-1].kind}(e))),s.cn()}Bn(e,n,s){if(s===null)return[];let r=[];r.push(new Ba);let i=0;for(const o of ni(e)){const a=s[i++];for(const c of r)if(this.Kn(n,o.fieldPath)&&el(a))r=this.Wn(r,o,a);else{const d=c.Tn(o.kind);oi.Wt.vt(a,d)}}return this.Gn(r)}Nn(e,n,s){return this.Bn(e,n,s.position)}Gn(e){const n=[];for(let s=0;s<e.length;++s)n[s]=e[s].cn();return n}Wn(e,n,s){const r=[...e],i=[];for(const o of s.arrayValue.values||[])for(const a of r){const c=new Ba;c.seed(a.cn()),oi.Wt.vt(o,c.Tn(n.kind)),i.push(c)}return i}Kn(e,n){return!!e.filters.find(s=>s instanceof _e&&s.field.isEqual(n)&&(s.op==="in"||s.op==="not-in"))}getFieldIndexes(e,n){const s=$a(e),r=oo(e);return(n?s.J(ep,IDBKeyRange.bound(n,n)):s.J()).next(i=>{const o=[];return O.forEach(i,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const g=m?new Gc(m.sequenceNumber,new un(Di(m.readTime),new Q(Wn(m.documentKey)),m.largestBatchId)):Gc.empty(),E=f.fields.map(([S,A])=>new Ou(qe.fromServerFormat(S),A));return new kd(f.indexId,f.collectionGroup,E,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((s,r)=>{const i=s.indexState.sequenceNumber-r.indexState.sequenceNumber;return i!==0?i:de(s.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,s){const r=$a(e),i=oo(e);return this.zn(e).next(o=>r.J(ep,IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,c=>i.put(j_(c.indexId,this.uid,o,s)))))}updateIndexEntries(e,n){const s=new Map;return O.forEach(n,(r,i)=>{const o=s.get(r.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(s.set(r.collectionGroup,a),O.forEach(a,c=>this.jn(e,r,c).next(d=>{const f=this.Hn(i,c);return d.isEqual(f)?O.resolve():this.Jn(e,i,c,d,f)}))))})}Yn(e,n,s,r){return io(e).put(r.Vn(this.uid,this.Un(s,n.key),n.key))}Zn(e,n,s,r){return io(e).delete(r.mn(this.uid,this.Un(s,n.key),n.key))}jn(e,n,s){const r=io(e);let i=new Ce(Gs);return r.te({index:ET,range:IDBKeyRange.only([s.indexId,this.uid,$u(this.Un(s,n))])},(o,a)=>{i=i.add(new ai(s.indexId,n,F_(a.arrayValue),F_(a.directionalValue)))}).next(()=>i)}Hn(e,n){let s=new Ce(Gs);const r=this.$n(n,e);if(r==null)return s;const i=Jm(n);if(i!=null){const o=e.data.field(i.fieldPath);if(el(o))for(const a of o.arrayValue.values||[])s=s.add(new ai(n.indexId,e.key,this.kn(a),r))}else s=s.add(new ai(n.indexId,e.key,uu,r));return s}Jn(e,n,s,r,i){q(B_,"Updating index entries for document '%s'",n.key);const o=[];return function(c,d,f,m,g){const E=c.getIterator(),S=d.getIterator();let A=so(E),C=so(S);for(;A||C;){let x=!1,v=!1;if(A&&C){const I=f(A,C);I<0?v=!0:I>0&&(x=!0)}else A!=null?v=!0:x=!0;x?(m(C),C=so(S)):v?(g(A),A=so(E)):(A=so(E),C=so(S))}}(r,i,Gs,a=>{o.push(this.Yn(e,n,s,a))},a=>{o.push(this.Zn(e,n,s,a))}),O.waitFor(o)}zn(e){let n=1;return oo(e).te({index:_T,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,r,i)=>{i.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,s){s=s.sort((o,a)=>Gs(o,a)).filter((o,a,c)=>!a||Gs(o,c[a-1])!==0);const r=[];r.push(e);for(const o of s){const a=Gs(o,e),c=Gs(o,n);if(a===0)r[0]=e.Rn();else if(a>0&&c<0)r.push(o),r.push(o.Rn());else if(c>0)break}r.push(n);const i=[];for(let o=0;o<r.length;o+=2){if(this.Xn(r[o],r[o+1]))return[];const a=r[o].mn(this.uid,uu,Q.empty()),c=r[o+1].mn(this.uid,uu,Q.empty());i.push(IDBKeyRange.bound(a,c))}return i}Xn(e,n){return Gs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(q_)}getMinOffset(e,n){return O.mapArray(this.xn(n),s=>this.On(e,s).next(r=>r||ne(44426))).next(q_)}}function $_(t){return ut(t,Yc)}function io(t){return ut(t,vc)}function $a(t){return ut(t,Ug)}function oo(t){return ut(t,yc)}function q_(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let s=1;s<t.length;s++){const r=t[s].indexState.offset;Lg(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new un(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},II=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t,e,n){const s=t.store(An),r=t.store(Go),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=s.te({range:o},(f,m,g)=>(a++,g.delete()));i.push(c.next(()=>{oe(a===1,47070,{batchId:n.batchId})}));const d=[];for(const f of n.mutations){const m=yT(e,f.key.path,n.batchId);i.push(r.delete(m)),d.push(f.key)}return O.waitFor(i).next(()=>d)}function Ld(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(II,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);class Ch{constructor(e,n,s,r){this.userId=e,this.serializer=n,this.indexManager=s,this.referenceDelegate=r,this.er={}}static bt(e,n,s,r){oe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Ch(i,n,s,r)}checkEmpty(e){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hs(e).te({index:di,range:s},(r,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,s,r){const i=fo(e),o=Hs(e);return o.add({}).next(a=>{oe(typeof a=="number",49019);const c=new Qg(a,n,s,r),d=function(E,S,A){const C=A.baseMutations.map(v=>Od(E.wt,v)),x=A.mutations.map(v=>Od(E.wt,v));return{userId:S,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:C,mutations:x}}(this.serializer,this.userId,c),f=[];let m=new Ce((g,E)=>de(g.canonicalString(),E.canonicalString()));for(const g of r){const E=yT(this.userId,g.key.path,a);m=m.add(g.key.path.popLast()),f.push(o.put(d)),f.push(i.put(E,jR))}return m.forEach(g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.er[a]=c.keys()}),O.waitFor(f).next(()=>c)})}lookupMutationBatch(e,n){return Hs(e).get(n).next(s=>s?(oe(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:n}),ii(this.serializer,s)):null)}tr(e,n){return this.er[n]?O.resolve(this.er[n]):this.lookupMutationBatch(e,n).next(s=>{if(s){const r=s.keys();return this.er[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=IDBKeyRange.lowerBound([this.userId,s]);let i=null;return Hs(e).te({index:di,range:r},(o,a,c)=>{a.userId===this.userId&&(oe(a.batchId>=s,47524,{nr:s}),i=ii(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=gi;return Hs(e).te({index:di,range:n,reverse:!0},(r,i,o)=>{s=i.batchId,o.done()}).next(()=>s)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,gi],[this.userId,Number.POSITIVE_INFINITY]);return Hs(e).J(di,n).next(s=>s.map(r=>ii(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const s=Vu(this.userId,n.path),r=IDBKeyRange.lowerBound(s),i=[];return fo(e).te({range:r},(o,a,c)=>{const[d,f,m]=o,g=Wn(f);if(d===this.userId&&n.path.isEqual(g))return Hs(e).get(m).next(E=>{if(!E)throw ne(61480,{rr:o,batchId:m});oe(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:m}),i.push(ii(this.serializer,E))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ce(de);const r=[];return n.forEach(i=>{const o=Vu(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=fo(e).te({range:a},(d,f,m)=>{const[g,E,S]=d,A=Wn(E);g===this.userId&&i.path.isEqual(A)?s=s.add(S):m.done()});r.push(c)}),O.waitFor(r).next(()=>this.ir(e,s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1,i=Vu(this.userId,s),o=IDBKeyRange.lowerBound(i);let a=new Ce(de);return fo(e).te({range:o},(c,d,f)=>{const[m,g,E]=c,S=Wn(g);m===this.userId&&s.isPrefixOf(S)?S.length===r&&(a=a.add(E)):f.done()}).next(()=>this.ir(e,a))}ir(e,n){const s=[],r=[];return n.forEach(i=>{r.push(Hs(e).get(i).next(o=>{if(o===null)throw ne(35274,{batchId:i});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),s.push(ii(this.serializer,o))}))}),O.waitFor(r).next(()=>s)}removeMutationBatch(e,n){return xI(e.he,this.userId,n).next(s=>(e.addOnCommittedListener(()=>{this.sr(n.batchId)}),O.forEach(s,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const s=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return fo(e).te({range:s},(i,o,a)=>{if(i[0]===this.userId){const c=Wn(i[1]);r.push(c)}else a.done()}).next(()=>{oe(r.length===0,56720,{_r:r.map(i=>i.canonicalString())})})})}containsKey(e,n){return bI(e,this.userId,n)}ar(e){return SI(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:gi,lastStreamToken:""})}}function bI(t,e,n){const s=Vu(e,n.path),r=s[1],i=IDBKeyRange.lowerBound(s);let o=!1;return fo(t).te({range:i,ee:!0},(a,c,d)=>{const[f,m,g]=a;f===e&&m===r&&(o=!0),d.done()}).next(()=>o)}function Hs(t){return ut(t,An)}function fo(t){return ut(t,Go)}function SI(t){return ut(t,Kc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ji(0)}static lr(){return new ji(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.hr(e).next(n=>{const s=new ji(n.highestTargetId);return n.highestTargetId=s.next(),this.Pr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(n=>ce.fromTimestamp(new He(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,s){return this.hr(e).next(r=>(r.highestListenSequenceNumber=n,s&&(r.lastRemoteSnapshotVersion=s.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Pr(e,r)))}addTargetData(e,n){return this.Tr(e,n).next(()=>this.hr(e).next(s=>(s.targetCount+=1,this.Ir(n,s),this.Pr(e,s))))}updateTargetData(e,n){return this.Tr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ao(e).delete(n.targetId)).next(()=>this.hr(e)).next(s=>(oe(s.targetCount>0,8065),s.targetCount-=1,this.Pr(e,s)))}removeTargets(e,n,s){let r=0;const i=[];return ao(e).te((o,a)=>{const c=nc(a);c.sequenceNumber<=n&&s.get(c.targetId)===null&&(r++,i.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(i)).next(()=>r)}forEachTarget(e,n){return ao(e).te((s,r)=>{const i=nc(r);n(i)})}hr(e){return G_(e).get(Pd).next(n=>(oe(n!==null,2888),n))}Pr(e,n){return G_(e).put(Pd,n)}Tr(e,n){return ao(e).put(wI(this.serializer,n))}Ir(e,n){let s=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,s=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.hr(e).next(n=>n.targetCount)}getTargetData(e,n){const s=Ci(n),r=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let i=null;return ao(e).te({range:r,index:wT},(o,a,c)=>{const d=nc(a);vl(n,d.target)&&(i=d,c.done())}).next(()=>i)}addMatchingKeys(e,n,s){const r=[],i=rr(e);return n.forEach(o=>{const a=jt(o.path);r.push(i.put({targetId:s,path:a})),r.push(this.referenceDelegate.addReference(e,s,o))}),O.waitFor(r)}removeMatchingKeys(e,n,s){const r=rr(e);return O.forEach(n,i=>{const o=jt(i.path);return O.waitFor([r.delete([s,o]),this.referenceDelegate.removeReference(e,s,i)])})}removeMatchingKeysForTargetId(e,n){const s=rr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(r)}getMatchingKeysForTargetId(e,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),r=rr(e);let i=ge();return r.te({range:s,ee:!0},(o,a,c)=>{const d=Wn(o[1]),f=new Q(d);i=i.add(f)}).next(()=>i)}containsKey(e,n){const s=jt(n.path),r=IDBKeyRange.bound([s],[hT(s)],!1,!0);let i=0;return rr(e).te({index:zg,ee:!0,range:r},([o,a],c,d)=>{o!==0&&(i++,d.done())}).next(()=>i>0)}Rt(e,n){return ao(e).get(n).next(s=>s?nc(s):null)}}function ao(t){return ut(t,Ho)}function G_(t){return ut(t,yi)}function rr(t){return ut(t,Ko)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="LruGarbageCollector",aj=1048576;function K_([t,e],[n,s]){const r=de(t,n);return r===0?de(e,s):r}class cj{constructor(e){this.Er=e,this.buffer=new Ce(K_),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();K_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){q(H_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mr(n)?q(H_,"Ignoring IndexedDB error during garbage collection: ",n):await zi(n)}await this.mr(3e5)})}}class lj{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return O.resolve(yn.le);const s=new cj(n);return this.gr.forEachTarget(e,r=>s.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>s.Rr(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(W_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W_):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,r,i,o,a,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,o=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(s=m,a=Date.now(),this.removeTargets(e,s,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),co()<=we.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:m})))}}function AI(t,e){return new lj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n){this.db=e,this.garbageCollector=AI(this,n)}pr(e){const n=this.br(e);return this.db.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}yr(e,n){return this.Sr(e,(s,r)=>n(r))}addReference(e,n,s){return du(e,s)}removeReference(e,n,s){return du(e,s)}removeTargets(e,n,s){return this.db.getTargetCache().removeTargets(e,n,s)}markPotentiallyOrphaned(e,n){return du(e,n)}Dr(e,n){return function(r,i){let o=!1;return SI(r).ne(a=>bI(r,a,i).next(c=>(c&&(o=!0),O.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const c=this.Dr(e,o).next(d=>{if(!d)return i++,s.getEntry(e,o).next(()=>(s.removeEntry(o,ce.min()),rr(e).delete(function(m){return[0,jt(m.path)]}(o))))});r.push(c)}}).next(()=>O.waitFor(r)).next(()=>s.apply(e)).next(()=>i)}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,n){return du(e,n)}Sr(e,n){const s=rr(e);let r,i=yn.le;return s.te({index:zg},([o,a],{path:c,sequenceNumber:d})=>{o===0?(i!==yn.le&&n(new Q(Wn(r)),i),i=d,r=c):i=yn.le}).next(()=>{i!==yn.le&&n(new Q(Wn(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function du(t,e){return rr(t).put(function(s,r){return{targetId:0,path:jt(s.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.changes=new js(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?O.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,s){return Jr(e).put(s)}removeEntry(e,n,s){return Jr(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Vd(o),a[a.length-1]]}(n,s))}updateMetadata(e,n){return this.getMetadata(e).next(s=>(s.byteSize+=n,this.vr(e,s)))}getEntry(e,n){let s=Je.newInvalidDocument(n);return Jr(e).te({index:Mu,range:IDBKeyRange.only(qa(n))},(r,i)=>{s=this.Cr(n,i)}).next(()=>s)}Fr(e,n){let s={size:0,document:Je.newInvalidDocument(n)};return Jr(e).te({index:Mu,range:IDBKeyRange.only(qa(n))},(r,i)=>{s={document:this.Cr(n,i),size:Ld(i)}}).next(()=>s)}getEntries(e,n){let s=an();return this.Mr(e,n,(r,i)=>{const o=this.Cr(r,i);s=s.insert(r,o)}).next(()=>s)}Or(e,n){let s=an(),r=new Ue(Q.comparator);return this.Mr(e,n,(i,o)=>{const a=this.Cr(i,o);s=s.insert(i,a),r=r.insert(i,Ld(o))}).next(()=>({documents:s,Nr:r}))}Mr(e,n,s){if(n.isEmpty())return O.resolve();let r=new Ce(X_);n.forEach(c=>r=r.add(c));const i=IDBKeyRange.bound(qa(r.first()),qa(r.last())),o=r.getIterator();let a=o.getNext();return Jr(e).te({index:Mu,range:i},(c,d,f)=>{const m=Q.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&X_(a,m)<0;)s(a,null),a=o.getNext();a&&a.isEqual(m)&&(s(a,d),a=o.hasNext()?o.getNext():null),a?f.H(qa(a)):f.done()}).next(()=>{for(;a;)s(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,s,r,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Vd(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jr(e).J(IDBKeyRange.bound(a,c,!0)).next(d=>{i==null||i.incrementDocumentReadCount(d.length);let f=an();for(const m of d){const g=this.Cr(Q.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);g.isFoundDocument()&&(wl(n,g)||r.has(g.key))&&(f=f.insert(g.key,g))}return f})}getAllFromCollectionGroup(e,n,s,r){let i=an();const o=Y_(n,s),a=Y_(n,un.max());return Jr(e).te({index:vT,range:IDBKeyRange.bound(o,a,!0)},(c,d,f)=>{const m=this.Cr(Q.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);i=i.insert(m.key,m),i.size===r&&f.done()}).next(()=>i)}newChangeBuffer(e){return new hj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Q_(e).get(Zm).next(n=>(oe(!!n,20021),n))}vr(e,n){return Q_(e).put(Zm,n)}Cr(e,n){if(n){const s=YD(this.serializer,n);if(!(s.isNoDocument()&&s.version.isEqual(ce.min())))return s}return Je.newInvalidDocument(e)}}function PI(t){return new dj(t)}class hj extends NI{constructor(e,n){super(),this.Br=e,this.trackRemovals=n,this.Lr=new js(s=>s.toString(),(s,r)=>s.isEqual(r))}applyChanges(e){const n=[];let s=0,r=new Ce((i,o)=>de(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Lr.get(i);if(n.push(this.Br.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=R_(this.Br.serializer,o);r=r.add(i.path.popLast());const d=Ld(c);s+=d-a.size,n.push(this.Br.addEntry(e,i,c))}else if(s-=a.size,this.trackRemovals){const c=R_(this.Br.serializer,o.convertToNoDocument(ce.min()));n.push(this.Br.addEntry(e,i,c))}}),r.forEach(i=>{n.push(this.Br.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Br.updateMetadata(e,s)),O.waitFor(n)}getFromCache(e,n){return this.Br.Fr(e,n).next(s=>(this.Lr.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,n){return this.Br.Or(e,n).next(({documents:s,Nr:r})=>(r.forEach((i,o)=>{this.Lr.set(i,{size:o,readTime:s.get(i).readTime})}),s))}}function Q_(t){return ut(t,Qc)}function Jr(t){return ut(t,Nd)}function qa(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Y_(t,e){const n=e.documentKey.path.toArray();return[t,Vd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function X_(t,e){const n=t.path.toArray(),s=e.path.toArray();let r=0;for(let i=0;i<n.length-2&&i<s.length-2;++i)if(r=de(n[i],s[i]),r)return r;return r=de(n.length,s.length),r||(r=de(n[n.length-2],s[s.length-2]),r||de(n[n.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Tc(s.mutation,r,Qt.empty(),He.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ge()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ge()){const r=Gn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=ec();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Gn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ge()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=an();const o=Ec(),a=function(){return Ec()}();return n.forEach((c,d)=>{const f=s.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof Os)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Tc(f.mutation,d,f.mutation.getFieldMask(),He.now())):o.set(d.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return a.set(d,new fj(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const s=Ec();let r=new Ue((o,a)=>o-a),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=s.get(c)||Qt.empty();f=a.applyToLocalView(d,f),s.set(c,f);const m=(r.get(a.batchId)||ge()).add(c);r=r.insert(a.batchId,m)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),d=c.key,f=c.value,m=QT();f.forEach(g=>{if(!i.has(g)){const E=tI(n.get(g),s.get(g));E!==null&&m.set(g,E),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return O.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):O.resolve(Gn());let a=Wc,c=i;return o.next(d=>O.forEach(d,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ge())).next(f=>({batchId:a,changes:KT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(s=>{let r=ec();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=ec();return this.indexManager.getCollectionParents(e,i).next(a=>O.forEach(a,c=>{const d=function(m,g){return new ma(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,r).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Je.newInvalidDocument(f)))});let a=ec();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Tc(f.mutation,d,Qt.empty(),He.now()),wl(n,d)&&(a=a.insert(c,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return O.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ut(r.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:_I(r.bundledQuery),readTime:Ut(r.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.overlays=new Ue(Q.comparator),this.Qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Gn();return O.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),O.resolve()}getOverlaysForCollection(e,n,s){const r=Gn(),i=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return O.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ue((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let f=i.get(d.largestBatchId);f===null&&(f=Gn(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=Gn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=r)););return O.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(s.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Xg(n,s));let i=this.Qr.get(n);i===void 0&&(i=ge(),this.Qr.set(n,i)),this.Qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.$r=new Ce(ht.Ur),this.Kr=new Ce(ht.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new ht(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new ht(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Q(new Ae([])),s=new ht(n,e),r=new ht(n,e+1),i=[];return this.Kr.forEachInRange([s,r],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Q(new Ae([])),s=new ht(n,e),r=new ht(n,e+1);let i=ge();return this.Kr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ht(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ht{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Q.comparator(e.key,n.key)||de(e.Zr,n.Zr)}static Wr(e,n){return de(e.Zr,n.Zr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ce(ht.Ur)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Qg(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Xr=this.Xr.add(new ht(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ti(s),i=r<0?0:r;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?gi:this.nr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ht(n,0),r=new ht(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,r],o=>{const a=this.ei(o.Zr);i.push(a)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ce(de);return n.forEach(r=>{const i=new ht(r,0),o=new ht(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{s=s.add(a.Zr)})}),O.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Q.isDocumentKey(i)||(i=i.child(""));const o=new ht(new Q(i),0);let a=new Ce(de);return this.Xr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===r&&(a=a.add(c.Zr)),!0)},o),O.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(s=>{const r=this.ei(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){oe(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return O.forEach(n.mutations,r=>{const i=new ht(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new ht(n,0),r=this.Xr.firstAfterOrEqual(s);return O.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.ii=e,this.docs=function(){return new Ue(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return O.resolve(s?s.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(e,n){let s=an();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Je.newInvalidDocument(r))}),O.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=an();const o=n.path,a=new Q(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Lg(fT(f),s)<=0||(r.has(f.key)||wl(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ne(9500)}si(e,n){return O.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new wj(this)}getSize(e){return O.resolve(this.size)}}class wj extends NI{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(s)}),O.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this.persistence=e,this.oi=new js(n=>Ci(n),vl),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this._i=0,this.ai=new ny,this.targetCount=0,this.ui=ji.cr()}forEachTarget(e,n){return this.oi.forEach((s,r)=>n(r)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),O.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new ji(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Tr(n),O.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),O.waitFor(i).next(()=>r)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return O.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),O.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return O.resolve(s)}containsKey(e,n){return O.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n){this.ci={},this.overlays={},this.li=new yn(0),this.hi=!1,this.hi=!0,this.Pi=new gj,this.referenceDelegate=e(this),this.Ti=new _j(this),this.indexManager=new rj,this.remoteDocumentCache=function(r){return new vj(r)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new vI(n),this.Ei=new mj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new yj(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){q("MemoryPersistence","Starting transaction:",e);const r=new Ej(this.li.next());return this.referenceDelegate.di(),s(r).next(i=>this.referenceDelegate.Ai(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ri(e,n){return O.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class Ej extends pT{constructor(e){super(),this.currentSequenceNumber=e}}class Rh{constructor(e){this.persistence=e,this.Vi=new ny,this.mi=null}static fi(e){return new Rh(e)}get gi(){if(this.mi)return this.mi;throw ne(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),O.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.gi,s=>{const r=Q.fromPath(s);return this.pi(e,r).next(i=>{i||n.removeEntry(r,ce.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return O.or([()=>O.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Fd{constructor(e,n){this.persistence=e,this.yi=new js(s=>jt(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=AI(this,n)}static fi(e,n){return new Fd(e,n)}di(){}Ai(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return O.forEach(this.yi,(s,r)=>this.Dr(e,s,r).next(i=>i?O.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,o=>this.Dr(e,o,n).next(a=>{a||(s++,i.removeEntry(o,ce.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),O.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),O.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fu(e.data.value)),n}Dr(e,n,s){return O.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return O.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.serializer=e}q(e,n,s,r){const i=new yh("createOrUpgrade",n);s<1&&r>=1&&(function(c){c.createObjectStore(yl)}(e),function(c){c.createObjectStore(Kc,{keyPath:DR}),c.createObjectStore(An,{keyPath:c_,autoIncrement:!0}).createIndex(di,l_,{unique:!0}),c.createObjectStore(Go)}(e),J_(e),function(c){c.createObjectStore(si)}(e));let o=O.resolve();return s<3&&r>=3&&(s!==0&&(function(c){c.deleteObjectStore(Ko),c.deleteObjectStore(Ho),c.deleteObjectStore(yi)}(e),J_(e)),o=o.next(()=>function(c){const d=c.store(yi),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ce.min().toTimestamp(),targetCount:0};return d.put(Pd,f)}(i))),s<4&&r>=4&&(s!==0&&(o=o.next(()=>function(c,d){return d.store(An).J().next(m=>{c.deleteObjectStore(An),c.createObjectStore(An,{keyPath:c_,autoIncrement:!0}).createIndex(di,l_,{unique:!0});const g=d.store(An),E=m.map(S=>g.put(S));return O.waitFor(E)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore(Qo,{keyPath:BR})})(e)})),s<5&&r>=5&&(o=o.next(()=>this.wi(i))),s<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore(Qc)}(e),this.bi(i)))),s<7&&r>=7&&(o=o.next(()=>this.Si(i))),s<8&&r>=8&&(o=o.next(()=>this.Di(e,i))),s<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),s<10&&r>=10&&(o=o.next(()=>this.Ci(i))),s<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(wh,{keyPath:$R})})(e),function(c){c.createObjectStore(_h,{keyPath:qR})}(e)})),s<12&&r>=12&&(o=o.next(()=>{(function(c){const d=c.createObjectStore(Eh,{keyPath:XR});d.createIndex(tp,JR,{unique:!1}),d.createIndex(TT,ZR,{unique:!1})})(e)})),s<13&&r>=13&&(o=o.next(()=>function(c){const d=c.createObjectStore(Nd,{keyPath:OR});d.createIndex(Mu,VR),d.createIndex(vT,MR)}(e)).next(()=>this.Fi(e,i)).next(()=>e.deleteObjectStore(si))),s<14&&r>=14&&(o=o.next(()=>this.Mi(e,i))),s<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore(Ug,{keyPath:WR,autoIncrement:!0}).createIndex(ep,GR,{unique:!1}),c.createObjectStore(yc,{keyPath:HR}).createIndex(_T,KR,{unique:!1}),c.createObjectStore(vc,{keyPath:QR}).createIndex(ET,YR,{unique:!1})}(e))),s<16&&r>=16&&(o=o.next(()=>{n.objectStore(yc).clear()}).next(()=>{n.objectStore(vc).clear()})),s<17&&r>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(Bg,{keyPath:eD})})(e)})),s<18&&r>=18&&dE()&&(o=o.next(()=>{n.objectStore(yc).clear()}).next(()=>{n.objectStore(vc).clear()})),o}bi(e){let n=0;return e.store(si).te((s,r)=>{n+=Ld(r)}).next(()=>{const s={byteSize:n};return e.store(Qc).put(Zm,s)})}wi(e){const n=e.store(Kc),s=e.store(An);return n.J().next(r=>O.forEach(r,i=>{const o=IDBKeyRange.bound([i.userId,gi],[i.userId,i.lastAcknowledgedBatchId]);return s.J(di,o).next(a=>O.forEach(a,c=>{oe(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const d=ii(this.serializer,c);return xI(e,i.userId,d).next(()=>{})}))}))}Si(e){const n=e.store(Ko),s=e.store(si);return e.store(yi).get(Pd).next(r=>{const i=[];return s.te((o,a)=>{const c=new Ae(o),d=function(m){return[0,jt(m)]}(c);i.push(n.get(d).next(f=>f?O.resolve():(m=>n.put({targetId:0,path:jt(m),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(i))})}Di(e,n){e.createObjectStore(Yc,{keyPath:UR});const s=n.store(Yc),r=new ty,i=o=>{if(r.add(o)){const a=o.lastSegment(),c=o.popLast();return s.put({collectionId:a,parent:jt(c)})}};return n.store(si).te({ee:!0},(o,a)=>{const c=new Ae(o);return i(c.popLast())}).next(()=>n.store(Go).te({ee:!0},([o,a,c],d)=>{const f=Wn(a);return i(f.popLast())}))}Ci(e){const n=e.store(Ho);return n.te((s,r)=>{const i=nc(r),o=wI(this.serializer,i);return n.put(o)})}Fi(e,n){const s=n.store(si),r=[];return s.te((i,o)=>{const a=n.store(Nd),c=function(m){return m.document?new Q(Ae.fromString(m.document.name).popFirst(5)):m.noDocument?Q.fromSegments(m.noDocument.path):m.unknownDocument?Q.fromSegments(m.unknownDocument.path):ne(36783)}(o).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(d))}).next(()=>O.waitFor(r))}Mi(e,n){const s=n.store(An),r=PI(this.serializer),i=new sy(Rh.fi,this.serializer.wt);return s.J().next(o=>{const a=new Map;return o.forEach(c=>{var d;let f=(d=a.get(c.userId))!==null&&d!==void 0?d:ge();ii(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),O.forEach(a,(c,d)=>{const f=new _t(d),m=Ph.bt(this.serializer,f),g=i.getIndexManager(f),E=Ch.bt(f,this.serializer,g,i.referenceDelegate);return new CI(r,E,m,g).recalculateAndSaveOverlaysForDocumentKeys(new np(n,yn.le),c).next()})})}}function J_(t){t.createObjectStore(Ko,{keyPath:FR}).createIndex(zg,zR,{unique:!0}),t.createObjectStore(Ho,{keyPath:"targetId"}).createIndex(wT,LR,{unique:!0}),t.createObjectStore(yi)}const Ks="IndexedDbPersistence",Vf=18e5,Mf=5e3,Lf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ij="main";class ry{constructor(e,n,s,r,i,o,a,c,d,f,m=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=s,this.xi=i,this.window=o,this.document=a,this.Oi=d,this.Ni=f,this.Bi=m,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=g=>Promise.resolve(),!ry.C())throw new K(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uj(this,r),this.Ui=n+Ij,this.serializer=new vI(c),this.Ki=new Tr(this.Ui,this.Bi,new Tj(this.serializer)),this.Pi=new JD,this.Ti=new oj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PI(this.serializer),this.Ei=new XD,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,f===!1&&Ft(Ks,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(z.FAILED_PRECONDITION,Lf);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new yn(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(n=>{n||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(n=>this.isPrimary&&!n?this.Xi(e).next(()=>!1):!!n&&this.es(e).next(()=>!0))).catch(e=>{if(Mr(e))return q(Ks,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q(Ks,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return Wa(e).get(no).next(n=>O.resolve(this.ts(n)))}ns(e){return hu(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Vf)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const s=ut(n,Qo);return s.J().next(r=>{const i=this._s(r,Vf),o=r.filter(a=>i.indexOf(a)===-1);return O.forEach(o,a=>s.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Wi)for(const n of e)this.Wi.removeItem(this.us(n.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?O.resolve(!0):Wa(e).get(no).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,Mf)&&!this.cs(n.ownerId)){if(this.ts(n)&&this.networkEnabled)return!0;if(!this.ts(n)){if(!n.allowTabSynchronization)throw new K(z.FAILED_PRECONDITION,Lf);return!1}}return!(!this.networkEnabled||!this.inForeground)||hu(e).J().next(s=>this._s(s,Mf).find(r=>{if(this.clientId!==r.clientId){const i=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q(Ks,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[yl,Qo],e=>{const n=new np(e,yn.le);return this.Xi(n).next(()=>this.ns(n))}),this.Ki.close(),this.Ts()}_s(e,n){return e.filter(s=>this.ss(s.updateTimeMs,n)&&!this.cs(s.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>hu(e).J().next(n=>this._s(n,Vf).map(s=>s.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,n){return Ch.bt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ij(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Ph.bt(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,n,s){q(Ks,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",i=function(c){return c===18?sD:c===17?ST:c===16?nD:c===15?$g:c===14?bT:c===13?xT:c===12?tD:c===11?IT:void ne(60245)}(this.Bi);let o;return this.Ki.runTransaction(e,r,i,a=>(o=new np(a,this.li?this.li.next():yn.le),n==="readwrite-primary"?this.Yi(o).next(c=>!!c||this.Zi(o)).next(c=>{if(!c)throw Ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new K(z.FAILED_PRECONDITION,mT);return s(o)}).next(c=>this.es(o).next(()=>c)):this.Es(o).next(()=>s(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Es(e){return Wa(e).get(no).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,Mf)&&!this.cs(n.ownerId)&&!this.ts(n)&&!(this.Ni||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K(z.FAILED_PRECONDITION,Lf)})}es(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wa(e).put(no,n)}static C(){return Tr.C()}Xi(e){const n=Wa(e);return n.get(no).next(s=>this.ts(s)?(q(Ks,"Releasing primary lease."),n.delete(no)):O.resolve())}ss(e,n){const s=Date.now();return!(e<s-n)&&(!(e>s)||(Ft(`Detected an update time that is in the future: ${e} > ${s}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const n=/(?:Version|Mobile)\/1[456]/;uE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var n;try{const s=((n=this.Wi)===null||n===void 0?void 0:n.getItem(this.us(e)))!==null;return q(Ks,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ft(Ks,"Failed to get zombied client id.",s),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){Ft("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wa(t){return ut(t,yl)}function hu(t){return ut(t,Qo)}function xj(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.ds=s,this.As=r}static Rs(e,n){let s=ge(),r=ge();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new iy(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return uE()?8:gT(lt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new bj;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,s,r){return s.documentReadCount<this.gs?(co()<=we.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),O.resolve()):(co()<=we.DEBUG&&q("QueryEngine","Query:",lo(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ps*r?(co()<=we.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):O.resolve())}ws(e,n){if(T_(n))return O.resolve(null);let s=wn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=lp(n,null,"F"),s=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=ge(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.vs(n,a);return this.Cs(n,d,o,c.readTime)?this.ws(e,lp(n,null,"F")):this.Fs(e,d,n,c)}))})))}bs(e,n,s,r){return T_(n)||r.isEqual(ce.min())?O.resolve(null):this.ys.getDocuments(e,s).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,s,r)?O.resolve(null):(co()<=we.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lo(n)),this.Fs(e,o,n,SR(r,Wc)).next(a=>a))})}vs(e,n){let s=new Ce(GT(e));return n.forEach((r,i)=>{wl(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return co()<=we.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",lo(n)),this.ys.getDocumentsMatchingQuery(e,n,un.min(),s)}Fs(e,n,s,r){return this.ys.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="LocalStore",Sj=3e8;class kj{constructor(e,n,s,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new Ue(de),this.Os=new js(i=>Ci(i),vl),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function DI(t,e,n,s){return new kj(t,e,n,s)}async function jI(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let c=ge();for(const d of r){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(s,c).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:a}))})})}function Aj(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,f){const m=d.batch,g=m.keys();let E=O.resolve();return g.forEach(S=>{E=E.next(()=>f.getEntry(c,S)).next(A=>{const C=d.docVersions.get(S);oe(C!==null,48541),A.version.compareTo(C)<0&&(m.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),f.addEntry(A)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let c=ge();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function OI(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function Nj(t,e){const n=fe(t),s=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const a=[];e.targetChanges.forEach((f,m)=>{const g=r.get(m);if(!g)return;a.push(n.Ti.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,f.addedDocuments,m)));let E=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(it.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,s)),r=r.insert(m,E),function(A,C,x){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=Sj?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,E,f)&&a.push(n.Ti.updateTargetData(i,E))});let c=an(),d=ge();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(Pj(i,o,e.documentUpdates).next(f=>{c=f.qs,d=f.Qs})),!s.isEqual(ce.min())){const f=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(f)}return O.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.xs=r,i))}function Pj(t,e,n){let s=ge(),r=ge();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=an();return n.forEach((a,c)=>{const d=i.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):q(oy,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{qs:o,Qs:r}})}function Cj(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=gi),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Rj(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ti.getTargetData(s,e).next(i=>i?(r=i,O.resolve(r)):n.Ti.allocateTargetId(s).next(o=>(r=new vs(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.xs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function yp(t,e,n){const s=fe(t),r=s.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Mr(o))throw o;q(oy,`Failed to update sequence numbers for target ${e}: ${o}`)}s.xs=s.xs.remove(e),s.Os.delete(r.target)}function Z_(t,e,n){const s=fe(t);let r=ce.min(),i=ge();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const m=fe(c),g=m.Os.get(f);return g!==void 0?O.resolve(m.xs.get(g)):m.Ti.getTargetData(d,f)}(s,o,wn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,e,n?r:ce.min(),n?i:ge())).next(a=>(Dj(s,vD(e),a),{documents:a,$s:i})))}function Dj(t,e,n){let s=t.Ns.get(e)||ce.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ns.set(e,s)}class e2{constructor(){this.activeTargetIds=xD()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VI{constructor(){this.xo=new e2,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new e2,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="ConnectivityMonitor";class n2{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){q(t2,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){q(t2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=null;function vp(){return fu===null?fu=function(){return 268435456+Math.round(2147483648*Math.random())}():fu++,"0x"+fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="RestConnection",Oj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vj{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${r}`,this.Go=this.databaseId.database===Cd?`project_id=${s}`:`project_id=${s}&database_id=${r}`}zo(e,n,s,r,i){const o=vp(),a=this.jo(e,n.toUriEncodedString());q(Ff,`Sending RPC '${e}' ${o}:`,a,s);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,r,i);const{host:d}=new URL(a),f=Li(d);return this.Jo(e,a,c,s,f).then(m=>(q(Ff,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ni(Ff,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",s),m})}Yo(e,n,s,r,i,o){return this.zo(e,n,s,r,i)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}jo(e,n){const s=Oj[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="WebChannelConnection";class Lj extends Vj{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=vp();return new Promise((a,c)=>{const d=new sT;d.setWithCredentials(!0),d.listenOnce(rT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ju.NO_ERROR:const m=d.getResponseJson();q(At,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case ju.TIMEOUT:q(At,`RPC '${e}' ${o} timed out`),c(new K(z.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:const g=d.getStatus();if(q(At,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E==null?void 0:E.error;if(S&&S.status&&S.message){const A=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(v)>=0?v:z.UNKNOWN}(S.status);c(new K(A,S.message))}else c(new K(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new K(z.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{q(At,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);q(At,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",f,s,15)})}I_(e,n,s){const r=vp(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aT(),a=oT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const f=i.join("");q(At,`Creating RPC '${e}' stream ${r}: ${f}`,c);const m=o.createWebChannel(f,c);this.E_(m);let g=!1,E=!1;const S=new Mj({Zo:C=>{E?q(At,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(g||(q(At,`Opening RPC '${e}' stream ${r} transport.`),m.open(),g=!0),q(At,`RPC '${e}' stream ${r} sending:`,C),m.send(C))},Xo:()=>m.close()}),A=(C,x,v)=>{C.listen(x,I=>{try{v(I)}catch(j){setTimeout(()=>{throw j},0)}})};return A(m,Za.EventType.OPEN,()=>{E||(q(At,`RPC '${e}' stream ${r} transport opened.`),S.__())}),A(m,Za.EventType.CLOSE,()=>{E||(E=!0,q(At,`RPC '${e}' stream ${r} transport closed`),S.u_(),this.d_(m))}),A(m,Za.EventType.ERROR,C=>{E||(E=!0,Ni(At,`RPC '${e}' stream ${r} transport errored. Name:`,C.name,"Message:",C.message),S.u_(new K(z.UNAVAILABLE,"The operation could not be completed")))}),A(m,Za.EventType.MESSAGE,C=>{var x;if(!E){const v=C.data[0];oe(!!v,16349);const I=v,j=(I==null?void 0:I.error)||((x=I[0])===null||x===void 0?void 0:x.error);if(j){q(At,`RPC '${e}' stream ${r} received error:`,j);const L=j.status;let M=function(T){const k=tt[T];if(k!==void 0)return rI(k)}(L),_=j.message;M===void 0&&(M=z.INTERNAL,_="Unknown error status: "+L+" with message "+j.message),E=!0,S.u_(new K(M,_)),m.close()}else q(At,`RPC '${e}' stream ${r} received:`,v),S.c_(v)}}),A(a,iT.STAT_EVENT,C=>{C.stat===Ym.PROXY?q(At,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===Ym.NOPROXY&&q(At,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.a_()},0),S}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(){return typeof window<"u"?window:null}function qu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t){return new zD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n,s=1e3,r=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=r,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),r=Math.max(0,n-s);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="PersistentStream";class LI{constructor(e,n,s,r,i,o,a,c){this.xi=e,this.S_=s,this.D_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new MI(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Ft(n.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.v_===n&&this.z_(s,r)},s=>{e(()=>{const r=new K(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(r)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{s(()=>this.j_(r))}),this.stream.onMessage(r=>{s(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return q(s2,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(q(s2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zj extends LI{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=$D(this.serializer,e),s=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?Ut(o.readTime):ce.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=hp(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Rd(c)?{documents:hI(i,c)}:{query:fI(i,c).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=aI(i,o.resumeToken);const d=up(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=na(i,o.snapshotVersion.toTimestamp());const d=up(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const s=WD(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=hp(this.serializer),n.removeTarget=e,this.Q_(n)}}class Uj extends LI{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=qD(e.writeResults,e.commitTime),s=Ut(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=hp(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Od(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{}class $j extends Bj{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new K(z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,dp(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(z.UNKNOWN,i.toString())})}Yo(e,n,s,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,dp(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(z.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class qj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ft(n),this.ua=!1):q("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="RemoteStore";class Wj{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{s.enqueueAndForget(async()=>{Ui(this)&&(q(Oi,"Restarting streams for network reachability change."),await async function(c){const d=fe(c);d.da.add(4),await El(d),d.Va.set("Unknown"),d.da.delete(4),await jh(d)}(this))})}),this.Va=new qj(s,r)}}async function jh(t){if(Ui(t))for(const e of t.Aa)await e(!0)}async function El(t){for(const e of t.Aa)await e(!1)}function FI(t,e){const n=fe(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),uy(n)?ly(n):ga(n).N_()&&cy(n,e))}function ay(t,e){const n=fe(t),s=ga(n);n.Ea.delete(e),s.N_()&&zI(n,e),n.Ea.size===0&&(s.N_()?s.k_():Ui(n)&&n.Va.set("Unknown"))}function cy(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ga(t).Z_(e)}function zI(t,e){t.ma.Ke(e),ga(t).X_(e)}function ly(t){t.ma=new VD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),ga(t).start(),t.Va.ca()}function uy(t){return Ui(t)&&!ga(t).O_()&&t.Ea.size>0}function Ui(t){return fe(t).da.size===0}function UI(t){t.ma=void 0}async function Gj(t){t.Va.set("Online")}async function Hj(t){t.Ea.forEach((e,n)=>{cy(t,e)})}async function Kj(t,e){UI(t),uy(t)?(t.Va.Pa(e),ly(t)):t.Va.set("Unknown")}async function Qj(t,e,n){if(t.Va.set("Online"),e instanceof oI&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ea.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ea.delete(a),r.ma.removeTarget(a))}(t,e)}catch(s){q(Oi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await zd(t,s)}else if(e instanceof Bu?t.ma.Xe(e):e instanceof iI?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ce.min()))try{const s=await OI(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.ma.It(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ea.get(d);f&&i.Ea.set(d,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{const f=i.Ea.get(c);if(!f)return;i.Ea.set(c,f.withResumeToken(it.EMPTY_BYTE_STRING,f.snapshotVersion)),zI(i,c);const m=new vs(f.target,c,d,f.sequenceNumber);cy(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){q(Oi,"Failed to raise snapshot:",s),await zd(t,s)}}async function zd(t,e,n){if(!Mr(e))throw e;t.da.add(1),await El(t),t.Va.set("Offline"),n||(n=()=>OI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Oi,"Retrying IndexedDB access"),await n(),t.da.delete(1),await jh(t)})}function BI(t,e){return e().catch(n=>zd(t,n,e))}async function Tl(t){const e=fe(t),n=Pr(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:gi;for(;Yj(e);)try{const r=await Cj(e.localStore,s);if(r===null){e.Ia.length===0&&n.k_();break}s=r.batchId,Xj(e,r)}catch(r){await zd(e,r)}$I(e)&&qI(e)}function Yj(t){return Ui(t)&&t.Ia.length<10}function Xj(t,e){t.Ia.push(e);const n=Pr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function $I(t){return Ui(t)&&!Pr(t).O_()&&t.Ia.length>0}function qI(t){Pr(t).start()}async function Jj(t){Pr(t).ia()}async function Zj(t){const e=Pr(t);for(const n of t.Ia)e.ta(n.mutations)}async function e3(t,e,n){const s=t.Ia.shift(),r=Yg.from(s,e,n);await BI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Tl(t)}async function t3(t,e){e&&Pr(t).ea&&await async function(s,r){if(function(o){return jD(o)&&o!==z.ABORTED}(r.code)){const i=s.Ia.shift();Pr(s).L_(),await BI(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Tl(s)}}(t,e),$I(t)&&qI(t)}async function r2(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),q(Oi,"RemoteStore received new credentials");const s=Ui(n);n.da.add(3),await El(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await jh(n)}async function n3(t,e){const n=fe(t);e?(n.da.delete(2),await jh(n)):e||(n.da.add(2),await El(n),n.Va.set("Unknown"))}function ga(t){return t.fa||(t.fa=function(n,s,r){const i=fe(n);return i.oa(),new zj(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:Gj.bind(null,t),n_:Hj.bind(null,t),i_:Kj.bind(null,t),Y_:Qj.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),uy(t)?ly(t):t.Va.set("Unknown")):(await t.fa.stop(),UI(t))})),t.fa}function Pr(t){return t.ga||(t.ga=function(n,s,r){const i=fe(n);return i.oa(),new Uj(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:Jj.bind(null,t),i_:t3.bind(null,t),na:Zj.bind(null,t),ra:e3.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Tl(t)):(await t.ga.stop(),t.Ia.length>0&&(q(Oi,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new dy(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(t,e){if(Ft("AsyncQueue",`${e}: ${t}`),Mr(t))return new K(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Q.comparator(n.key,s.key):(n,s)=>Q.comparator(n.key,s.key),this.keyedMap=ec(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Vo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.pa=new Ue(Q.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class sa{constructor(e,n,s,r,i,o,a,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new sa(e,n,Vo.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class r3{constructor(){this.queries=o2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=fe(n),i=r.queries;r.queries=o2(),i.forEach((o,a)=>{for(const c of a.Sa)c.onError(s)})})(this,new K(z.ABORTED,"Firestore shutting down"))}}function o2(){return new js(t=>WT(t),bh)}async function WI(t,e){const n=fe(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.Da()&&e.va()&&(s=2):(i=new s3,s=e.va()?0:1);try{switch(s){case 0:i.ba=await n.onListen(r,!0);break;case 1:i.ba=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=hy(o,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&fy(n)}async function GI(t,e){const n=fe(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.va()?0:1:!i.Da()&&e.va()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function i3(t,e){const n=fe(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Ma(r)&&(s=!0);o.ba=r}}s&&fy(n)}function o3(t,e,n){const s=fe(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function fy(t){t.Ca.forEach(e=>{e.next()})}var wp,a2;(a2=wp||(wp={})).xa="default",a2.Cache="cache";class HI{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new sa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==wp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.key=e}}class QI{constructor(e){this.key=e}}class a3{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ge(),this.mutatedKeys=ge(),this.Za=GT(e),this.Xa=new Vo(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new i2,r=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{const g=r.get(f),E=wl(this.query,m)?m:null,S=!!g&&this.mutatedKeys.has(g.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let C=!1;g&&E?g.data.isEqual(E.data)?S!==A&&(s.track({type:3,doc:E}),C=!0):this.ru(g,E)||(s.track({type:2,doc:E}),C=!0,(c&&this.Za(E,c)>0||d&&this.Za(E,d)<0)&&(a=!0)):!g&&E?(s.track({type:0,doc:E}),C=!0):g&&!E&&(s.track({type:1,doc:g}),C=!0,(c||d)&&(a=!0)),C&&(E?(o=o.add(E),i=A?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{Xa:o,nu:s,Cs:a,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((f,m)=>function(E,S){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:C})}};return A(E)-A(S)}(f.type,m.type)||this.Za(f.doc,m.doc)),this.iu(s),r=r!=null&&r;const a=n&&!r?this.su():[],c=this.Ya.size===0&&this.current&&!r?1:0,d=c!==this.Ja;return this.Ja=c,o.length!==0||d?{snapshot:new sa(this.query,e.Xa,i,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new i2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ge(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new QI(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new KI(s))}),n}au(e){this.Ha=e.$s,this.Ya=ge();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return sa.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const my="SyncEngine";class c3{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class l3{constructor(e){this.key=e,this.cu=!1}}class u3{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new js(a=>WT(a),bh),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ue(Q.comparator),this.Eu=new Map,this.du=new ny,this.Au={},this.Ru=new Map,this.Vu=ji.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function d3(t,e,n=!0){const s=tx(t);let r;const i=s.hu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.uu()):r=await YI(s,e,n,!0),r}async function h3(t,e){const n=tx(t);await YI(n,e,!0,!1)}async function YI(t,e,n,s){const r=await Rj(t.localStore,wn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await f3(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&FI(t.remoteStore,r),a}async function f3(t,e,n,s,r){t.fu=(m,g,E)=>async function(A,C,x,v){let I=C.view.tu(x);I.Cs&&(I=await Z_(A.localStore,C.query,!1).then(({documents:_})=>C.view.tu(_,I)));const j=v&&v.targetChanges.get(C.targetId),L=v&&v.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(I,A.isPrimaryClient,j,L);return l2(A,C.targetId,M.ou),M.snapshot}(t,m,g,E);const i=await Z_(t.localStore,e,!0),o=new a3(e,i.$s),a=o.tu(i.documents),c=_l.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),d=o.applyChanges(a,t.isPrimaryClient,c);l2(t,n,d.ou);const f=new c3(e,n,o);return t.hu.set(e,f),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function m3(t,e,n){const s=fe(t),r=s.hu.get(e),i=s.Pu.get(r.targetId);if(i.length>1)return s.Pu.set(r.targetId,i.filter(o=>!bh(o,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await yp(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&ay(s.remoteStore,r.targetId),_p(s,r.targetId)}).catch(zi)):(_p(s,r.targetId),await yp(s.localStore,r.targetId,!0))}async function p3(t,e){const n=fe(t),s=n.hu.get(e),r=n.Pu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ay(n.remoteStore,s.targetId))}async function g3(t,e,n){const s=nx(t);try{const r=await function(o,a){const c=fe(o),d=He.now(),f=a.reduce((E,S)=>E.add(S.key),ge());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=an(),A=ge();return c.Bs.getEntries(E,f).next(C=>{S=C,S.forEach((x,v)=>{v.isValidDocument()||(A=A.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,S)).next(C=>{m=C;const x=[];for(const v of a){const I=RD(v,m.get(v.key).overlayedDocument);I!=null&&x.push(new Os(v.key,I,VT(I.value.mapValue),Dt.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,x,a)}).next(C=>{g=C;const x=C.applyToLocalDocumentSet(m,A);return c.documentOverlayCache.saveOverlays(E,C.batchId,x)})}).then(()=>({batchId:g.batchId,changes:KT(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let d=o.Au[o.currentUser.toKey()];d||(d=new Ue(de)),d=d.insert(a,c),o.Au[o.currentUser.toKey()]=d}(s,r.batchId,n),await Il(s,r.changes),await Tl(s.remoteStore)}catch(r){const i=hy(r,"Failed to persist write");n.reject(i)}}async function XI(t,e){const n=fe(t);try{const s=await Nj(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Eu.get(i);o&&(oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.cu=!0:r.modifiedDocuments.size>0?oe(o.cu,14607):r.removedDocuments.size>0&&(oe(o.cu,42227),o.cu=!1))}),await Il(n,s,e)}catch(s){await zi(s)}}function c2(t,e,n){const s=fe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.hu.forEach((i,o)=>{const a=o.view.Fa(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const c=fe(o);c.onlineState=a;let d=!1;c.queries.forEach((f,m)=>{for(const g of m.Sa)g.Fa(a)&&(d=!0)}),d&&fy(c)}(s.eventManager,e),r.length&&s.lu.Y_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function y3(t,e,n){const s=fe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Eu.get(e),i=r&&r.key;if(i){let o=new Ue(Q.comparator);o=o.insert(i,Je.newNoDocument(i,ce.min()));const a=ge().add(i),c=new Nh(ce.min(),new Map,new Ue(de),o,a);await XI(s,c),s.Iu=s.Iu.remove(i),s.Eu.delete(e),py(s)}else await yp(s.localStore,e,!1).then(()=>_p(s,e,n)).catch(zi)}async function v3(t,e){const n=fe(t),s=e.batch.batchId;try{const r=await Aj(n.localStore,e);ZI(n,s,null),JI(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Il(n,r)}catch(r){await zi(r)}}async function w3(t,e,n){const s=fe(t);try{const r=await function(o,a){const c=fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,a).next(m=>(oe(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(s.localStore,e);ZI(s,e,n),JI(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Il(s,r)}catch(r){await zi(r)}}function JI(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function ZI(t,e,n){const s=fe(t);let r=s.Au[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Au[s.currentUser.toKey()]=r}}function _p(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Pu.get(e))t.hu.delete(s),n&&t.lu.gu(s,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(s=>{t.du.containsKey(s)||ex(t,s)})}function ex(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(ay(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),py(t))}function l2(t,e,n){for(const s of n)s instanceof KI?(t.du.addReference(s.key,e),_3(t,s)):s instanceof QI?(q(my,"Document no longer in limbo: "+s.key),t.du.removeReference(s.key,e),t.du.containsKey(s.key)||ex(t,s.key)):ne(19791,{pu:s})}function _3(t,e){const n=e.key,s=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(s)||(q(my,"New document in limbo: "+n),t.Tu.add(s),py(t))}function py(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Q(Ae.fromString(e)),s=t.Vu.next();t.Eu.set(s,new l3(n)),t.Iu=t.Iu.insert(n,s),FI(t.remoteStore,new vs(wn(xh(n.path)),s,"TargetPurposeLimboResolution",yn.le))}}async function Il(t,e,n){const s=fe(t),r=[],i=[],o=[];s.hu.isEmpty()||(s.hu.forEach((a,c)=>{o.push(s.fu(c,e,n).then(d=>{var f;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;s.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){r.push(d);const m=iy.Rs(c.targetId,d);i.push(m)}}))}),await Promise.all(o),s.lu.Y_(r),await async function(c,d){const f=fe(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(d,g=>O.forEach(g.ds,E=>f.persistence.referenceDelegate.addReference(m,g.targetId,E)).next(()=>O.forEach(g.As,E=>f.persistence.referenceDelegate.removeReference(m,g.targetId,E)))))}catch(m){if(!Mr(m))throw m;q(oy,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const E=f.xs.get(g),S=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(S);f.xs=f.xs.insert(g,A)}}}(s.localStore,i))}async function E3(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){q(my,"User change. New user:",e.toKey());const s=await jI(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(a=>{a.forEach(c=>{c.reject(new K(z.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Il(n,s.ks)}}function T3(t,e){const n=fe(t),s=n.Eu.get(e);if(s&&s.cu)return ge().add(s.key);{let r=ge();const i=n.Pu.get(e);if(!i)return r;for(const o of i){const a=n.hu.get(o);r=r.unionWith(a.view.eu)}return r}}function tx(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=XI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y3.bind(null,e),e.lu.Y_=i3.bind(null,e.eventManager),e.lu.gu=o3.bind(null,e.eventManager),e}function nx(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w3.bind(null,e),e}class rl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return DI(this.persistence,new RI,e.initialUser,this.serializer)}Su(e){return new sy(Rh.fi,this.serializer)}bu(e){return new VI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rl.provider={build:()=>new rl};class I3 extends rl{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){oe(this.persistence.referenceDelegate instanceof Fd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new kI(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new sy(s=>Fd.fi(s,n),this.serializer)}}class x3 extends rl{constructor(e,n,s){super(),this.Fu=e,this.cacheSizeBytes=n,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Fu.initialize(this,e),await nx(this.Fu.syncEngine),await Tl(this.Fu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Du(e){return DI(this.persistence,new RI,e.initialUser,this.serializer)}vu(e,n){const s=this.persistence.referenceDelegate.garbageCollector;return new kI(s,e.asyncQueue,n)}Cu(e,n){const s=new PR(n,this.persistence);return new NR(e.asyncQueue,s)}Su(e){const n=xj(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new ry(this.synchronizeTabs,n,e.clientId,s,e.asyncQueue,Fj(),qu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new VI}}class Ud{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>c2(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=E3.bind(null,this.syncEngine),await n3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new r3}()}createDatastore(e){const n=Dh(e.databaseInfo.databaseId),s=function(i){return new Lj(i)}(e.databaseInfo);return function(i,o,a,c){return new $j(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new Wj(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>c2(this.syncEngine,n,0),function(){return n2.C()?new n2:new jj}())}createSyncEngine(e,n){return function(r,i,o,a,c,d,f){const m=new u3(r,i,o,a,c,d);return f&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=fe(r);q(Oi,"RemoteStore shutting down."),i.da.add(5),await El(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ud.provider={build:()=>new Ud};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ft("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="FirestoreClient";class b3{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=_t.UNAUTHENTICATED,this.clientId=dT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{q(Cr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(q(Cr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=hy(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function zf(t,e){t.asyncQueue.verifyOperationInProgress(),q(Cr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await jI(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function u2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await S3(t);q(Cr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>r2(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>r2(e.remoteStore,r)),t._onlineComponents=e}async function S3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Cr,"Using user provided OfflineComponentProvider");try{await zf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ni("Error using user provided cache. Falling back to memory cache: "+n),await zf(t,new rl)}}else q(Cr,"Using default OfflineComponentProvider"),await zf(t,new I3(void 0));return t._offlineComponents}async function rx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Cr,"Using user provided OnlineComponentProvider"),await u2(t,t._uninitializedComponentsProvider._online)):(q(Cr,"Using default OnlineComponentProvider"),await u2(t,new Ud))),t._onlineComponents}function k3(t){return rx(t).then(e=>e.syncEngine)}async function ix(t){const e=await rx(t),n=e.eventManager;return n.onListen=d3.bind(null,e.syncEngine),n.onUnlisten=m3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=h3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=p3.bind(null,e.syncEngine),n}function A3(t,e,n={}){const s=new ts;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const f=new sx({next:g=>{f.xu(),o.enqueueAndForget(()=>GI(i,m));const E=g.docs.has(a);!E&&g.fromCache?d.reject(new K(z.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&c&&c.source==="server"?d.reject(new K(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new HI(xh(a.path),f,{includeMetadataChanges:!0,Qa:!0});return WI(i,m)}(await ix(t),t.asyncQueue,e,n,s)),s.promise}function N3(t,e,n={}){const s=new ts;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const f=new sx({next:g=>{f.xu(),o.enqueueAndForget(()=>GI(i,m)),g.fromCache&&c.source==="server"?d.reject(new K(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new HI(a,f,{includeMetadataChanges:!0,Qa:!0});return WI(i,m)}(await ix(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t,e,n){if(!n)throw new K(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P3(t,e,n,s){if(e===!0&&s===!0)throw new K(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function h2(t){if(!Q.isDocumentKey(t))throw new K(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function f2(t){if(Q.isDocumentKey(t))throw new K(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Oh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Oh(t);throw new K(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="firestore.googleapis.com",m2=!0;class p2{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new K(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cx,this.ssl=m2}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:m2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=II;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aj)throw new K(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ox((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vh{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new yR;switch(s.type){case"firstParty":return new ER(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new K(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=d2.get(n);s&&(q("ComponentProvider","Removing Datastore"),d2.delete(n),s.terminate())}(this),Promise.resolve()}}function C3(t,e,n,s={}){var r;t=Tn(t,Vh);const i=Li(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(Ig(`https://${c}`),xg("Firestore",!0)),o.host!==cx&&o.host!==c&&Ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:s});if(!xi(d,a)&&(t._setSettings(d),s.mockUserToken)){let f,m;if(typeof s.mockUserToken=="string")f=s.mockUserToken,m=_t.MOCK_USER;else{f=VA(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new K(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new _t(g)}t._authCredentials=new vR(new lT(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class Bt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}}class Ir extends Bi{constructor(e,n,s){super(e,n,xh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Q(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function rn(t,e,...n){if(t=rt(t),ax("collection","path",e),t instanceof Vh){const s=Ae.fromString(e,...n);return f2(s),new Ir(t,null,s)}{if(!(t instanceof Bt||t instanceof Ir))throw new K(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ae.fromString(e,...n));return f2(s),new Ir(t.firestore,null,s)}}function st(t,e,...n){if(t=rt(t),arguments.length===1&&(e=dT.newId()),ax("doc","path",e),t instanceof Vh){const s=Ae.fromString(e,...n);return h2(s),new Bt(t,null,new Q(s))}{if(!(t instanceof Bt||t instanceof Ir))throw new K(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ae.fromString(e,...n));return h2(s),new Bt(t.firestore,t instanceof Ir?t.converter:null,new Q(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="AsyncQueue";class y2{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new MI(this,"async_queue_retry"),this.rc=()=>{const s=qu();s&&q(g2,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=qu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=qu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ts;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Mr(e))throw e;q(g2,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Ft("INTERNAL UNHANDLED ERROR: ",v2(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const r=dy.createAndSchedule(this,e,n,s,i=>this.uc(i));return this.Zu.push(r),r}oc(){this.Xu&&ne(47125,{cc:v2(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function v2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Fr extends Vh{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new y2,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y2(e),this._firestoreClient=void 0,await e}}}function R3(t,e){const n=typeof t=="object"?t:kg(),s=typeof t=="string"?t:Cd,r=fh(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=oE("firestore");i&&C3(r,...i)}return r}function gy(t){if(t._terminated)throw new K(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lx(t),t._firestoreClient}function lx(t){var e,n,s;const r=t._freezeSettings(),i=function(a,c,d,f){return new iD(a,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,ox(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new b3(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}function D3(t,e){Ni("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return j3(t,Ud.provider,{build:s=>new x3(s,n.cacheSizeBytes,void 0)}),Promise.resolve()}function j3(t,e,n){if((t=Tn(t,Fr))._firestoreClient||t._terminated)throw new K(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new K(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},lx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(it.fromBase64String(e))}catch(n){throw new K(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ra(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=/^__.*__$/;class V3{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,n,this.fieldTransforms):new pa(e,this.data,n,this.fieldTransforms)}}class ux{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ic:t})}}class _y{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new _y(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:s,Rc:!1});return r.Vc(e),r}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:s,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Bd(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(dx(this.Ic)&&O3.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class M3{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Dh(e)}bc(e,n,s,r=!1){return new _y({Ic:e,methodName:n,wc:s,path:qe.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lh(t){const e=t._freezeSettings(),n=Dh(t._databaseId);return new M3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hx(t,e,n,s,r,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,r);Ey("Data must be an object, but it was:",o,s);const a=fx(s,o);let c,d;if(i.merge)c=new Qt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=Ep(e,m,n);if(!o.contains(g))throw new K(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);px(f,g)||f.push(g)}c=new Qt(f),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new V3(new Rt(a),c,d)}class Fh extends yy{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fh}}function L3(t,e,n,s){const r=t.bc(1,e,n);Ey("Data must be an object, but it was:",r,s);const i=[],o=Rt.empty();Lr(s,(c,d)=>{const f=Ty(e,c,n);d=rt(d);const m=r.mc(f);if(d instanceof Fh)i.push(f);else{const g=xl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const a=new Qt(i);return new ux(o,a,r.fieldTransforms)}function F3(t,e,n,s,r,i){const o=t.bc(1,e,n),a=[Ep(e,s,n)],c=[r];if(i.length%2!=0)throw new K(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(Ep(e,i[g])),c.push(i[g+1]);const d=[],f=Rt.empty();for(let g=a.length-1;g>=0;--g)if(!px(d,a[g])){const E=a[g];let S=c[g];S=rt(S);const A=o.mc(E);if(S instanceof Fh)d.push(E);else{const C=xl(S,A);C!=null&&(d.push(E),f.set(E,C))}}const m=new Qt(d);return new ux(f,m,o.fieldTransforms)}function z3(t,e,n,s=!1){return xl(n,t.bc(s?4:3,e))}function xl(t,e){if(mx(t=rt(t)))return Ey("Unsupported field value:",e,t),fx(t,e);if(t instanceof yy)return function(s,r){if(!dx(r.Ic))throw r.gc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let c=xl(a,r.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=rt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return bD(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=He.fromDate(s);return{timestampValue:na(r.serializer,i)}}if(s instanceof He){const i=new He(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:na(r.serializer,i)}}if(s instanceof vy)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ra)return{bytesValue:aI(r.serializer,s._byteString)};if(s instanceof Bt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zg(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof wy)return function(o,a){return{mapValue:{fields:{[Wg]:{stringValue:Gg},[Yo]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.gc("VectorValues must only contain numeric values.");return Kg(a.serializer,d)})}}}}}}(s,r);throw r.gc(`Unsupported field value: ${Oh(s)}`)}(t,e)}function fx(t,e){const n={};return kT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(t,(s,r)=>{const i=xl(r,e.Ac(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function mx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof vy||t instanceof ra||t instanceof Bt||t instanceof yy||t instanceof wy)}function Ey(t,e,n){if(!mx(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=Oh(n);throw s==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+s)}}function Ep(t,e,n){if((e=rt(e))instanceof Mh)return e._internalPath;if(typeof e=="string")return Ty(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const U3=new RegExp("[~\\*/\\[\\]]");function Ty(t,e,n){if(e.search(U3)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mh(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new K(z.INVALID_ARGUMENT,a+t+c)}function px(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class B3 extends gx{data(){return super.data()}}function zh(t,e){return typeof e=="string"?Ty(t,e):e instanceof Mh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Iy{}class yx extends Iy{}function Hn(t,e,...n){let s=[];e instanceof Iy&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof xy).length,a=i.filter(c=>c instanceof Uh).length;if(o>1||o>0&&a>0)throw new K(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Uh extends yx{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Uh(e,n,s)}_apply(e){const n=this._parse(e);return vx(e._query,n),new Bi(e.firestore,e.converter,cp(e._query,n))}_parse(e){const n=Lh(e.firestore);return function(i,o,a,c,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){_2(m,f);const S=[];for(const A of m)S.push(w2(c,i,A));g={arrayValue:{values:S}}}else g=w2(c,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||_2(m,f),g=z3(a,o,m,f==="in"||f==="not-in");return _e.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pt(t,e,n){const s=e,r=zh("where",t);return Uh._create(r,s,n)}class xy extends Iy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xy(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ne.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const c of a)vx(o,c),o=cp(o,c)}(e._query,n),new Bi(e.firestore,e.converter,cp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class by extends yx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new by(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new K(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new K(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tl(i,o)}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new ma(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Kn(t,e="asc"){const n=e,s=zh("orderBy",t);return by._create(s,n)}function w2(t,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new K(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qT(e)&&n.indexOf("/")!==-1)throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ae.fromString(n));if(!Q.isDocumentKey(s))throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Zc(t,new Q(s))}if(n instanceof Bt)return Zc(t,n._key);throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oh(n)}.`)}function _2(t,e){if(!Array.isArray(t)||t.length===0)throw new K(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vx(t,e){const n=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class q3{convertValue(e,n="none"){switch(Ar(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Lr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[Yo].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>Fe(o.doubleValue));return new wy(i)}convertGeoPoint(e){return new vy(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Th(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const n=As(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ae.fromString(e);oe(yI(s),9688,{name:e});const r=new Pi(s.get(1),s.get(3)),i=new Q(s.popFirst(5));return r.isEqual(n)||Ft(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _x extends gx{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(zh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Wu extends _x{data(e={}){return super.data(e)}}class W3{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new sc(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Wu(this._firestore,this._userDataWriter,s.key,s,new sc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const c=new Wu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new sc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Wu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new sc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:G3(a.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function G3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t){t=Tn(t,Bt);const e=Tn(t.firestore,Fr);return A3(gy(e),t._key).then(n=>H3(e,t,n))}class Ex extends q3{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function Qn(t){t=Tn(t,Bi);const e=Tn(t.firestore,Fr),n=gy(e),s=new Ex(e);return $3(t._query),N3(n,t._query).then(r=>new W3(e,s,t,r))}function $d(t,e,n){t=Tn(t,Bt);const s=Tn(t.firestore,Fr),r=wx(t.converter,e,n);return Bh(s,[hx(Lh(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Dt.none())])}function xr(t,e,n,...s){t=Tn(t,Bt);const r=Tn(t.firestore,Fr),i=Lh(r);let o;return o=typeof(e=rt(e))=="string"||e instanceof Mh?F3(i,"updateDoc",t._key,e,n,s):L3(i,"updateDoc",t._key,e),Bh(r,[o.toMutation(t._key,Dt.exists(!0))])}function Sy(t){return Bh(Tn(t.firestore,Fr),[new Ah(t._key,Dt.none())])}function ky(t,e){const n=Tn(t.firestore,Fr),s=st(t),r=wx(t.converter,e);return Bh(n,[hx(Lh(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,Dt.exists(!1))]).then(()=>s)}function Bh(t,e){return function(s,r){const i=new ts;return s.asyncQueue.enqueueAndForget(async()=>g3(await k3(s),r,i)),i.promise}(gy(t),e)}function H3(t,e,n){const s=n.docs.get(e._key),r=new Ex(t);return new _x(t,r,e._key,s,new sc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){fa=r})(da),bi(new kr("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Fr(new wR(s.getProvider("auth-internal")),new TR(o,s.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pi(d.options.projectId,f)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Jn(Zw,e_,e),Jn(Zw,e_,"esm2017")})();var K3="firebase",Q3="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn(K3,Q3,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n,s,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,sn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||s.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r==null||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="us-central1";class X3{constructor(e,n,s,r,i=Tp,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Y3(e,n,s,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Tp}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function J3(t,e,n){const s=Li(e);t.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(Ig(t.emulatorOrigin),xg("Functions",!0))}const E2="@firebase/functions",T2="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="auth-internal",eO="app-check-internal",tO="messaging-internal";function nO(t){const e=(n,{instanceIdentifier:s})=>{const r=n.getProvider("app").getImmediate(),i=n.getProvider(Z3),o=n.getProvider(tO),a=n.getProvider(eO);return new X3(r,i,o,a,s)};bi(new kr(Tx,e,"PUBLIC").setMultipleInstances(!0)),Jn(E2,T2,t),Jn(E2,T2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t=kg(),e=Tp){const s=fh(rt(t),Tx).getImmediate({identifier:e}),r=oE("functions");return r&&rO(s,...r),s}function rO(t,e,n){J3(rt(t),e,n)}nO();const iO={apiKey:"AIzaSyBn2jG-T2SesKFr0TsfeQa04wlBmDeEoG4",authDomain:"clarity-311c3.firebaseapp.com",projectId:"clarity-311c3",storageBucket:"clarity-311c3.firebasestorage.app",messagingSenderId:"459484415688",appId:"1:459484415688:web:bac719ee243bbd9821c7fd"},Ay=pE(iO),hi=tT(Ay),xe=R3(Ay);D3(xe).catch(t=>{t.code==="failed-precondition"?console.warn("Firestore persistence failed: multiple tabs open"):t.code==="unimplemented"&&console.warn("Firestore persistence is not available in this browser")});sO(Ay,"us-central1");const Ix=N.createContext(),In=()=>{const t=N.useContext(Ix);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},xx=({children:t})=>{const[e,n]=N.useState(null),[s,r]=N.useState(null),[i,o]=N.useState("free"),[a,c]=N.useState(!0),[d,f]=N.useState(!1),m=N.useRef(!0),g=(j,L)=>{if(!j||!L)return{isTrialActive:!1,daysRemaining:0};const M=L.seconds?new Date(L.seconds*1e3):new Date(L),_=new Date,y=_<M,T=Math.ceil((M-_)/(24*60*60*1e3));return{isTrialActive:y,daysRemaining:Math.max(0,T),trialEndDate:M}},E=async j=>{try{const L=await ya(st(xe,"users",j));if(L.exists()){const M=L.data(),_=g(M.trialStartDate,M.trialEndDate);if(console.log("🔍 Profile Data:",M),console.log("📅 Trial Status:",_),!m.current)return;if(M.subscription==="trial"&&!_.isTrialActive){const y={...M,subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date};await xr(st(xe,"users",j),{subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date}),m.current&&(r({...y,..._}),o("free"))}else m.current&&(r({...M,..._}),o(M.subscription))}}catch(L){console.error("Error fetching user profile:",L),m.current&&c(!1)}};N.useEffect(()=>iC(hi,async L=>{console.log("🔥 Auth state changed:",L?"User logged in":"User logged out");try{if(!m.current)return;n(L),f(!!L),L?await E(L.uid):m.current&&(r(null),o("free"))}catch(M){console.error("Error in auth state change:",M)}finally{m.current&&c(!1)}}),[]),N.useEffect(()=>()=>{m.current=!1},[]);const S=async(j,L,M={})=>{try{const{user:_}=await BE(hi,j,L),y={email:_.email,uid:_.uid,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date,firstName:M.firstName||"",lastName:M.lastName||"",exerciseGoalMinutes:M.exerciseGoalMinutes||30,waterGoalOz:M.waterGoalOz||64,meditationGoalMinutes:M.meditationGoalMinutes||10};if(await $d(st(xe,"users",_.uid),y),m.current){const T=g(y.trialStartDate,y.trialEndDate);r({...y,...T}),o("trial")}return{success:!0,user:_}}catch(_){throw console.error("Signup error:",_),_}},A=async(j,L)=>{try{const{user:M}=await $E(hi,j,L);return console.log("✅ Login successful, Firebase will trigger auth state change"),{success:!0,user:M}}catch(M){throw console.error("Login error:",M),M}},C=async()=>{try{return await qE(hi),m.current&&(n(null),r(null),o("free"),f(!1)),{success:!0}}catch(j){throw console.error("Logout error:",j),j}},x=async()=>{try{if(e!=null&&e.uid){const j={subscription:"premium",subscriptionStatus:"premium_paid",premiumStartDate:new Date,updatedAt:new Date};return await xr(st(xe,"users",e.uid),j),m.current&&(o("premium"),r(L=>({...L,...j}))),{success:!0}}}catch(j){throw console.error("Error upgrading to premium:",j),j}},v=async()=>{try{if(e!=null&&e.uid){const j={subscription:"free",subscriptionCancelledAt:new Date,updatedAt:new Date};return await xr(st(xe,"users",e.uid),j),m.current&&(o("free"),r(L=>({...L,...j}))),{success:!0}}}catch(j){throw console.error("Error cancelling subscription:",j),j}},I={user:e,userProfile:s,userSubscription:i,isAuthenticated:d,isPremium:i==="premium"||i==="trial",isTrialActive:(s==null?void 0:s.isTrialActive)||!1,trialDaysRemaining:(s==null?void 0:s.daysRemaining)||0,loading:a,signup:S,login:A,logout:C,upgradeToPremium:x,cancelSubscription:v,fetchUserProfile:E,authKey:(e==null?void 0:e.uid)||"no-user"};return u.jsx(Ix.Provider,{value:I,children:t})},bx="/assets/Logo-BuPYrDrj.png";var Sx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},I2=ws.createContext&&ws.createContext(Sx),oO=["attr","size","title"];function aO(t,e){if(t==null)return{};var n=cO(t,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function cO(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},qd.apply(this,arguments)}function x2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Wd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x2(Object(n),!0).forEach(function(s){lO(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x2(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function lO(t,e,n){return e=uO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uO(t){var e=dO(t,"string");return typeof e=="symbol"?e:e+""}function dO(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kx(t){return t&&t.map((e,n)=>ws.createElement(e.tag,Wd({key:n},e.attr),kx(e.child)))}function hO(t){return e=>ws.createElement(fO,qd({attr:Wd({},t.attr)},e),kx(t.child))}function fO(t){var e=n=>{var{attr:s,size:r,title:i}=t,o=aO(t,oO),a=r||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),ws.createElement("svg",qd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:c,style:Wd(Wd({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&ws.createElement("title",null,i),t.children)};return I2!==void 0?ws.createElement(I2.Consumer,null,n=>e(n)):e(Sx)}function mO(t){return hO({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(t)}async function pO(t,e){try{const n=st(xe,"users",t),s=await ya(n);let r=0;return s.exists()&&typeof s.data().points=="number"&&(r=s.data().points),await xr(n,{points:r+e,updatedAt:new Date}),{success:!0,newPoints:r+e}}catch(n){return console.error("Error adding points:",n),{success:!1,error:n}}}async function gO(t,e){try{const n=st(xe,"users",t),s=await ya(n);let r=0;return s.exists()&&typeof s.data().points=="number"&&(r=s.data().points),r<e?{success:!1,error:"Not enough points"}:(await xr(n,{points:r-e,updatedAt:new Date}),{success:!0,newPoints:r-e})}catch(n){return console.error("Error deducting points:",n),{success:!1,error:n}}}async function yO(t){try{const e=st(xe,"users",t),n=await ya(e);return n.exists()&&typeof n.data().points=="number"?n.data().points:0}catch(e){return console.error("Error getting points:",e),0}}async function vO(t,e,n="daily"){try{const s=new Date;let r;if(n==="daily")r=s.toISOString().split("T")[0];else if(n==="weekly"){const o=s.getFullYear(),a=Math.ceil(((s-new Date(o,0,1))/864e5+new Date(o,0,1).getDay()+1)/7);r=`${o}-W${a}`}else r="unknown";const i=st(xe,`users/${t}/challenges`,`${e}_${r}`);return await $d(i,{challengeId:e,period:n,periodKey:r,completedAt:new Date}),{success:!0}}catch(s){return console.error("Error completing challenge:",s),{success:!1,error:s}}}async function wO(t,e,n="daily"){try{const s=new Date;let r;if(n==="daily")r=s.toISOString().split("T")[0];else if(n==="weekly"){const a=s.getFullYear(),c=Math.ceil(((s-new Date(a,0,1))/864e5+new Date(a,0,1).getDay()+1)/7);r=`${a}-W${c}`}else r="unknown";const i=st(xe,`users/${t}/challenges`,`${e}_${r}`);return(await ya(i)).exists()}catch(s){return console.error("Error checking challenge completion:",s),!1}}const Te={async register(t){try{const e=await BE(hi,t.email,t.password);return await $d(st(xe,"users",e.user.uid),{username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,exerciseGoalMinutes:t.exerciseGoalMinutes||30,waterGoalOz:t.waterGoalOz||64,meditationGoalMinutes:t.meditationGoalMinutes||10,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date}),{user:e.user}}catch(e){throw new Error(e.message)}},async login(t,e){try{return{user:(await $E(hi,t,e)).user}}catch{throw new Error("Invalid credentials")}},async logout(){try{return await qE(hi),{message:"success"}}catch(t){throw new Error(t.message)}},async getUserProfile(t){try{const e=await ya(st(xe,"users",t));if(!e.exists())throw new Error("User not found");return{user:{id:t,...e.data()}}}catch(e){throw new Error(e.message)}},async updateUserProfile(t,e){try{const n=st(xe,"users",t);return await $d(n,{...e,updatedAt:new Date},{merge:!0}),{user:{id:t,...e}}}catch(n){throw new Error("Error updating profile: "+n.message)}},addPoints:pO,deductPoints:gO,getPoints:yO,completeChallenge:vO,isChallengeCompleted:wO};function _O(){const{user:t,logout:e}=In(),n=uh(),[s,r]=N.useState(!1),[i,o]=N.useState(null),[a,c]=N.useState(!1),d=N.useRef();N.useEffect(()=>{const S=async()=>{if(t!=null&&t.uid)try{c(!0);const A=await Te.getUserProfile(t.uid);o(A.user)}catch(A){console.error("Error fetching user profile:",A)}finally{c(!1)}};t!=null&&t.uid&&S()},[t]);const f=S=>{S.stopPropagation(),r(!s)};N.useEffect(()=>{if(!s)return;const S=A=>{d.current&&!d.current.contains(A.target)&&r(!1)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[s]);const m=async S=>{S.preventDefault(),r(!1);try{await e(),n("/welcome")}catch(A){console.error("Error logging out:",A),n("/welcome")}},g=()=>{r(!1),n("/profile")};if(!t)return null;const E="profile-dropdown"+(s?"":" hidden");return u.jsxs("div",{className:"profile-button-container",children:[u.jsx("button",{onClick:f,className:"profile-button",children:u.jsx(mO,{className:"profile-icon"})}),u.jsxs("ul",{className:E,ref:d,children:[u.jsx("li",{className:"profile-info",children:u.jsx("div",{className:"user-details",children:u.jsx("span",{className:"user-name",children:i!=null&&i.firstName&&(i!=null&&i.lastName)?`${i.firstName} ${i.lastName}`:(i==null?void 0:i.username)||"User"})})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:g,className:"dropdown-button",children:"👤 Edit Profile"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>{r(!1),n("/dashboard")},className:"dropdown-button",children:"📊 Dashboard"})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:m,className:"dropdown-button logout-button",children:"🚪 Sign Out"})})]})]})}function EO(){const{userSubscription:t,isTrialActive:e,trialDaysRemaining:n,upgradeToPremium:s}=In();if(t==="premium"||t==="free"||!e)return null;const r=n<=3,i=(14-n)/14*100,o=()=>n===1?"Last day of premium!":n<=3?`Only ${n} days left!`:`${n} days remaining`,a=()=>n===1?"Keep Premium - $4.99/mo":n<=3?"Don't Lose Premium!":"Keep Premium - $4.99/mo";return u.jsxs("div",{className:`trial-banner ${r?"urgent":""}`,children:[u.jsxs("div",{className:"trial-content",children:[u.jsxs("div",{className:"trial-info",children:[u.jsx("span",{className:"trial-icon",children:r?"⏰":"✨"}),u.jsxs("div",{className:"trial-text",children:[u.jsx("h4",{children:r?"Premium Trial Ending!":"Premium Trial Active"}),u.jsx("p",{children:o()})]})]}),u.jsx("button",{onClick:s,className:"trial-upgrade-btn",children:a()})]}),u.jsx("div",{className:"trial-progress",children:u.jsx("div",{className:"trial-progress-bar",style:{width:`${i}%`}})})]})}function TO(){return u.jsxs("div",{className:"navigation-container",children:[u.jsxs("div",{className:"top-header",children:[u.jsxs("div",{className:"logo-container",children:[u.jsx("img",{src:bx,alt:"Clarity logo",className:"logo"}),u.jsx("span",{className:"logo-text",children:"Your Mind + Wellness Tracker"})]}),u.jsx("a",{href:"mailto:help@loveclaritywellness.com",className:"help-icon",title:"Contact Support",style:{marginRight:"16px",fontSize:"1.6rem",textDecoration:"none"},children:"❓"}),u.jsx(_O,{})]}),u.jsx(EO,{}),u.jsx("main",{className:"main-content",children:u.jsx(dA,{})}),u.jsxs("nav",{className:"bottom-navigation",children:[u.jsxs(to,{to:"/dashboard",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"📊"}),u.jsx("span",{className:"nav-label",children:"Home"})]}),u.jsxs(to,{to:"/workout",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🏋️"}),u.jsx("span",{className:"nav-label",children:"Workout"})]}),u.jsxs(to,{to:"/meditation",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🧘‍♀️"}),u.jsx("span",{className:"nav-label",children:"Meditate"})]}),u.jsxs(to,{to:"/water",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"💧"}),u.jsx("span",{className:"nav-label",children:"Water"})]}),u.jsxs(to,{to:"/games",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🎮"}),u.jsx("span",{className:"nav-label",children:"Games"})]}),u.jsxs(to,{to:"/goals",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🎯"}),u.jsx("span",{className:"nav-label",children:"Goals"})]})]})]})}function IO(){const{user:t,loading:e}=In(),[n,s]=N.useState(""),[r,i]=N.useState(""),[o,a]=N.useState(""),[c,d]=N.useState(""),[f,m]=N.useState(""),[g,E]=N.useState(""),[S,A]=N.useState(""),[C,x]=N.useState("30"),[v,I]=N.useState("64"),[j,L]=N.useState("10"),[M,_]=N.useState({}),[y,T]=N.useState(!1),[k,R]=N.useState(!1),[P,b]=N.useState("pulse");if(N.useEffect(()=>{const X=[setTimeout(()=>b("open"),2500),setTimeout(()=>b("form"),4500)];return()=>X.forEach(clearTimeout)},[]),e)return u.jsx("div",{children:"Loading..."});if(t)return u.jsx(yd,{to:"/dashboard",replace:!0});const ie=async X=>{X.preventDefault(),_({}),R(!0);try{await Te.login(n,r)}catch(ee){_({credential:ee.message})}finally{R(!1)}},he=async X=>{if(X.preventDefault(),r!==S){_({confirmPassword:"Confirm Password field must be the same as the Password field"});return}_({}),R(!0);try{await Te.register({email:o,password:r,username:c,firstName:f,lastName:g,exerciseGoalMinutes:parseInt(C),waterGoalOz:parseInt(v),meditationGoalMinutes:parseInt(j)})}catch(ee){_({general:ee.message})}finally{R(!1)}};return u.jsxs("div",{className:"welcome-container",children:[P!=="form"&&u.jsx("div",{className:`awakening-bg ${P}`,children:u.jsx("div",{className:"awakening-eye"})}),u.jsxs("div",{className:`welcome-card ${P==="form"?"visible":""}`,children:[u.jsxs("div",{className:"welcome-header",children:[u.jsx("img",{src:bx,alt:"Clarity logo"}),u.jsx("p",{children:"Begin your wellness today"})]}),y?u.jsxs("form",{className:"welcome-form",onSubmit:he,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Email"}),u.jsx("input",{type:"email",value:o,onChange:X=>a(X.target.value),required:!0,placeholder:"Enter your email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username"}),u.jsx("input",{type:"text",value:c,onChange:X=>d(X.target.value),required:!0,placeholder:"Choose a username"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"First Name"}),u.jsx("input",{type:"text",value:f,onChange:X=>m(X.target.value),required:!0,placeholder:"Enter your first name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Last Name"}),u.jsx("input",{type:"text",value:g,onChange:X=>E(X.target.value),required:!0,placeholder:"Enter your last name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:r,onChange:X=>i(X.target.value),required:!0,placeholder:"Create a password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Confirm Password"}),u.jsx("input",{type:"password",value:S,onChange:X=>A(X.target.value),required:!0,placeholder:"Confirm your password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Exercise Goal (minutes)"}),u.jsx("input",{type:"number",value:C,onChange:X=>x(X.target.value),required:!0,placeholder:"Daily exercise goal in minutes"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Water Goal (oz)"}),u.jsx("input",{type:"number",value:v,onChange:X=>I(X.target.value),required:!0,placeholder:"Daily water goal in ounces"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Meditation Goal (minutes)"}),u.jsx("input",{type:"number",value:j,onChange:X=>L(X.target.value),required:!0,placeholder:"Daily meditation goal in minutes"})]}),M.confirmPassword&&u.jsx("p",{className:"error-message",children:M.confirmPassword}),M.general&&u.jsx("p",{className:"error-message",children:M.general}),u.jsx("button",{type:"submit",className:"primary-button",disabled:k,children:k?"Creating Account...":"Sign Up"})]}):u.jsxs("form",{className:"welcome-form",onSubmit:ie,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username or Email"}),u.jsx("input",{type:"text",value:n,onChange:X=>s(X.target.value),required:!0,placeholder:"Enter your username or email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:r,onChange:X=>i(X.target.value),required:!0,placeholder:"Enter your password"})]}),M.credential&&u.jsx("p",{className:"error-message",children:M.credential}),u.jsx("button",{type:"submit",className:"primary-button",disabled:k,children:k?"Logging In...":"Log In"})]}),u.jsx("button",{className:"secondary-button",onClick:()=>T(!y),disabled:k,children:y?"Already have an account? Log In":"Don't have an account? Sign Up"})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ip=function(t,e){return Ip=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r])},Ip(t,e)};function xO(t,e){Ip(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var bO=100,SO=100,b2=50,xp=50,bp=50;function S2(t){var e=t.className,n=t.counterClockwise,s=t.dashRatio,r=t.pathRadius,i=t.strokeWidth,o=t.style;return N.createElement("path",{className:e,style:Object.assign({},o,AO({pathRadius:r,dashRatio:s,counterClockwise:n})),d:kO({pathRadius:r,counterClockwise:n}),strokeWidth:i,fillOpacity:0})}function kO(t){var e=t.pathRadius,n=t.counterClockwise,s=e,r=n?1:0;return`
      M `+xp+","+bp+`
      m 0,-`+s+`
      a `+s+","+s+" "+r+" 1 1 0,"+2*s+`
      a `+s+","+s+" "+r+" 1 1 0,-"+2*s+`
    `}function AO(t){var e=t.counterClockwise,n=t.dashRatio,s=t.pathRadius,r=Math.PI*2*s,i=(1-n)*r;return{strokeDasharray:r+"px "+r+"px",strokeDashoffset:(e?-i:i)+"px"}}var Uf=function(t){xO(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return b2-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var n=this.props,s=n.value,r=n.minValue,i=n.maxValue,o=Math.min(Math.max(s,r),i);return(o-r)/(i-r)},e.prototype.render=function(){var n=this.props,s=n.circleRatio,r=n.className,i=n.classes,o=n.counterClockwise,a=n.styles,c=n.strokeWidth,d=n.text,f=this.getPathRadius(),m=this.getPathRatio();return N.createElement("svg",{className:i.root+" "+r,style:a.root,viewBox:"0 0 "+bO+" "+SO,"data-test-id":"CircularProgressbar"},this.props.background?N.createElement("circle",{className:i.background,style:a.background,cx:xp,cy:bp,r:b2}):null,N.createElement(S2,{className:i.trail,counterClockwise:o,dashRatio:s,pathRadius:f,strokeWidth:c,style:a.trail}),N.createElement(S2,{className:i.path,counterClockwise:o,dashRatio:m*s,pathRadius:f,strokeWidth:c,style:a.path}),d?N.createElement("text",{className:i.text,style:a.text,x:xp,y:bp},d):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(N.Component);function Bf(t){var e=t.rotation,n=t.strokeLinecap,s=t.textColor,r=t.textSize,i=t.pathColor,o=t.pathTransition,a=t.pathTransitionDuration,c=t.trailColor,d=t.backgroundColor,f=e==null?void 0:"rotate("+e+"turn)",m=e==null?void 0:"center center";return{root:{},path:mu({stroke:i,strokeLinecap:n,transform:f,transformOrigin:m,transition:o,transitionDuration:a==null?void 0:a+"s"}),trail:mu({stroke:c,strokeLinecap:n,transform:f,transformOrigin:m}),text:mu({fill:s,fontSize:r}),background:mu({fill:d})}}function mu(t){return Object.keys(t).forEach(function(e){t[e]==null&&delete t[e]}),t}const $={getUserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone},getCurrentLocalTime(){return new Date},getStartOfDay(t=new Date){const e=new Date(t);return e.setHours(0,0,0,0),e},getEndOfDay(t=new Date){const e=new Date(t);return e.setHours(23,59,59,999),e},formatLocalDate(t){return t.toLocaleDateString("en-CA")},formatLocalDateTime(t){return t.toLocaleString()},formatLocalTime(t){return t.toLocaleTimeString()},getLocalDateRange(t=7){const e=this.getEndOfDay(new Date),n=this.getStartOfDay(new Date);return n.setDate(n.getDate()-(t-1)),{startDate:n,endDate:e}},isToday(t){const e=new Date;return this.formatLocalDate(t)===this.formatLocalDate(e)},isSameLocalDay(t,e){return this.formatLocalDate(t)===this.formatLocalDate(e)},toLocalTimezone(t){return new Date(t)},getRelativeTime(t){const n=new Date-t,s=Math.floor(n/6e4),r=Math.floor(s/60),i=Math.floor(r/24);return s<1?"Just now":s<60?`${s} minutes ago`:r<24?`${r} hours ago`:i===1?"Yesterday":i<7?`${i} days ago`:this.formatLocalDate(t)},getCurrentWeekRange(){const t=new Date,e=t.getDay(),n=new Date(t);n.setHours(0,0,0,0),n.setDate(t.getDate()-e);const s=new Date(n);return s.setDate(n.getDate()+6),s.setHours(23,59,59,999),{startDate:n,endDate:s}}},fi={async logWorkout(t,e){try{console.log("🌍 Logging workout in timezone:",$.getUserTimezone());let n=$.getCurrentLocalTime();e.date&&(n=$.toLocalTimezone(e.date));const s={title:e.title,type:e.type||"General",durationMinutes:e.durationMinutes,date:n,notes:e.notes||"",caloriesBurned:e.caloriesBurned||0,completed:!0,createdAt:$.getCurrentLocalTime(),updatedAt:$.getCurrentLocalTime(),userTimezone:$.getUserTimezone(),sentiment:e.sentiment||null},r=await ky(rn(xe,`users/${t}/workouts`),s);return{id:r.id,success:!0,workout:{...e,id:r.id}}}catch(n){throw new Error("Error logging workout: "+n.message)}},async fetchWorkoutsByUser(t){try{const e=Hn(rn(xe,`users/${t}/workouts`),Kn("date","desc"));return{workouts:(await Qn(e)).docs.map(r=>{var i,o,a,c;return{id:r.id,...r.data(),date:(i=r.data().date)==null?void 0:i.toDate(),localDate:$.formatLocalDate((o=r.data().date)==null?void 0:o.toDate()),localDateTime:$.formatLocalDateTime((a=r.data().date)==null?void 0:a.toDate()),relativeTime:$.getRelativeTime((c=r.data().date)==null?void 0:c.toDate())}})}}catch(e){throw new Error("Error fetching workouts: "+e.message)}},async updateWorkout(t,e,n){try{const s=st(xe,`users/${t}/workouts`,e),r={...n,updatedAt:$.getCurrentLocalTime(),userTimezone:$.getUserTimezone()};return n.date&&(r.date=$.toLocalTimezone(n.date)),await xr(s,r),{success:!0,workout:{id:e,...n}}}catch(s){throw new Error("Error updating workout: "+s.message)}},async deleteWorkout(t,e){try{return await Sy(st(xe,`users/${t}/workouts`,e)),{success:!0,message:"Workout deleted successfully"}}catch(n){throw new Error("Error deleting workout: "+n.message)}},async getWorkoutSummary(t){try{const{startDate:e,endDate:n}=$.getCurrentWeekRange();console.log("🌍 Weekly workout query for timezone:",$.getUserTimezone()),console.log("📅 Query range:",$.formatLocalDateTime(e),"to",$.formatLocalDateTime(n));const s=Hn(rn(xe,`users/${t}/workouts`),Pt("date",">=",e),Pt("date","<=",n),Kn("date","desc")),i=(await Qn(s)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),o=i.reduce((c,d)=>c+(d.durationMinutes||0),0),a=i.reduce((c,d)=>c+(d.caloriesBurned||0),0);return{totalWorkouts:i.length,totalMinutes:o,totalCalories:a,workouts:i.slice(0,5),period:"This week",userTimezone:$.getUserTimezone()}}catch(e){throw new Error("Error fetching workout summary: "+e.message)}},async getDailyWorkoutSummary(t,e=new Date){try{const{startDate:n,endDate:s}={startDate:$.getStartOfDay(e),endDate:$.getEndOfDay(e)};console.log("🌍 Daily workout query for timezone:",$.getUserTimezone()),console.log("📅 Query range:",$.formatLocalDateTime(n),"to",$.formatLocalDateTime(s));const r=Hn(rn(xe,`users/${t}/workouts`),Pt("date",">=",n),Pt("date","<=",s),Kn("date","desc")),o=(await Qn(r)).docs.map(f=>{var m;return{id:f.id,...f.data(),date:(m=f.data().date)==null?void 0:m.toDate()}});console.log("💪 Found workouts for today:",o.length);const a=o.reduce((f,m)=>f+(m.durationMinutes||0),0),c=o.length,d=o.reduce((f,m)=>f+(m.caloriesBurned||0),0);return{date:$.formatLocalDate(e),totalWorkouts:c,completedWorkouts:c,totalMinutes:a,caloriesBurned:d,lastWorkout:o.length>0?o[0]:null,workouts:o,hasWorkoutsToday:o.length>0,mostCommonType:o.length>0?this.getMostCommonWorkoutType(o):null,userTimezone:$.getUserTimezone()}}catch(n){return console.error("Error fetching daily workout summary:",n),this.getEmptyDailySummary(e)}},async getWorkoutAnalytics(t,e=30){try{const s=(await this.fetchWorkoutsByUser(t)).workouts;if(s.length===0)return{totalEntries:0,averageDuration:0,averageSentiment:0,sentimentTrend:"neutral"};const r=s.reduce((c,d)=>c+(d.durationMinutes||0),0),i=s.map(c=>typeof c.sentiment=="number"?c.sentiment:0),o=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:0;let a="neutral";return o>0?a="positive":o<0&&(a="negative"),{totalEntries:s.length,averageDuration:r/s.length,averageSentiment:o,sentimentTrend:a}}catch(n){throw new Error("Error fetching workout analytics: "+n.message)}},async getPersonalizedWorkoutRecommendations(t){try{const e=await this.getWorkoutAnalytics(t),n=[];return e.averageSentiment<0&&n.push({type:"sentiment",message:"Your workout notes have been a bit negative. Try celebrating small wins and focusing on progress, not perfection!",action:"Reflect on what went well after each workout."}),e.averageDuration<20&&n.push({type:"duration",message:"Your average workout duration is below 20 minutes. Consider increasing your session length for better results.",action:"Try a 30-minute session this week."}),{recommendations:n}}catch(e){throw new Error("Error generating workout recommendations: "+e.message)}},getMostCommonWorkoutType(t){if(t.length===0)return null;const e={};return t.forEach(n=>{e[n.type]=(e[n.type]||0)+1}),Object.keys(e).reduce((n,s)=>e[n]>e[s]?n:s)},getEmptyDailySummary(t){return{date:$.formatLocalDate(t),totalWorkouts:0,completedWorkouts:0,totalMinutes:0,caloriesBurned:0,lastWorkout:null,workouts:[],hasWorkoutsToday:!1,mostCommonType:null,userTimezone:$.getUserTimezone()}}},en={async logWaterIntake(t,e){try{const n={amount:e.amount,date:$.toLocalTimezone(e.date||new Date),userId:t,createdAt:$.getCurrentLocalTime(),userTimezone:$.getUserTimezone(),sentiment:e.sentiment||null},s=await ky(rn(xe,`users/${t}/waterIntake`),n);return{id:s.id,success:!0,waterIntake:{...e,id:s.id}}}catch(n){throw new Error("Error logging water intake: "+n.message)}},async fetchWaterIntakeByUser(t,e=30){try{const n=$.getStartOfDay(new Date);n.setDate(n.getDate()-e),console.log("💧 fetchWaterIntakeByUser - Start date:",n.toLocaleDateString());const s=Hn(rn(xe,`users/${t}/waterIntake`),Pt("date",">=",n),Kn("date","desc")),i=(await Qn(s)).docs.map(o=>{var c;const a=o.data();return{id:o.id,...a,date:(c=a.date)!=null&&c.toDate?a.date.toDate():a.date}});return console.log("💧 fetchWaterIntakeByUser - Found intakes:",i.length),{waterIntakes:i}}catch(n){throw console.error("💧 fetchWaterIntakeByUser error:",n),new Error("Error fetching water intake: "+n.message)}},async updateWaterIntake(t,e,n){try{const s=st(xe,`users/${t}/waterIntake`,e);return await xr(s,{...n,updatedAt:new Date}),{success:!0,waterIntake:{id:e,...n}}}catch(s){throw new Error("Error updating water intake: "+s.message)}},async deleteWaterIntake(t,e){try{return await Sy(st(xe,`users/${t}/waterIntake`,e)),{success:!0,message:"Water intake deleted successfully"}}catch(n){throw new Error("Error deleting water intake: "+n.message)}},async getTodayWaterIntake(t){try{const e=$.getStartOfDay(new Date),n=$.getEndOfDay(new Date);n.setMilliseconds(n.getMilliseconds()+1),console.log("💧 getTodayWaterIntake - Date range:",{today:e.toLocaleDateString(),tomorrow:n.toLocaleDateString(),todayISO:e.toISOString(),tomorrowISO:n.toISOString()});const s=Hn(rn(xe,`users/${t}/waterIntake`),Pt("date",">=",e),Pt("date","<",n),Kn("date","desc")),i=(await Qn(s)).docs.map(a=>{var d;const c=a.data();return{...c,date:(d=c.date)!=null&&d.toDate?c.date.toDate():c.date}});return console.log("💧 getTodayWaterIntake - Found intakes:",i.length),i.forEach(a=>{var c;console.log("  -",a.amount,"oz on",(c=a.date)==null?void 0:c.toLocaleDateString())}),{totalOz:i.reduce((a,c)=>a+(c.amount||0),0),intakeCount:i.length,intakes:i}}catch(e){throw console.error("💧 getTodayWaterIntake error:",e),new Error("Error fetching today's water intake: "+e.message)}},async getWaterSummary(t){try{const{startDate:e,endDate:n}=$.getCurrentWeekRange(),s=Hn(rn(xe,`users/${t}/waterIntake`),Pt("date",">=",e),Pt("date","<=",n),Kn("date","desc")),i=(await Qn(s)).docs.map(f=>f.data()),o={};i.forEach(f=>{const m=f.date.toDate().toDateString();o[m]=(o[m]||0)+f.amount});const a=i.reduce((f,m)=>f+(m.amount||0),0),c=7,d=c>0?a/c:0;return{totalOz:a,averageOz:d,dailyTotals:o,intakeCount:i.length}}catch(e){throw new Error("Error fetching water summary: "+e.message)}},async getDailyWaterIntake(t,e=new Date){try{const n=$.getStartOfDay(e),s=$.getEndOfDay(e),r=Hn(rn(xe,`users/${t}/waterIntake`),Pt("date",">=",n),Pt("date","<=",s),Kn("date","desc")),o=(await Qn(r)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),a=o.reduce((c,d)=>c+(d.amount||0),0);return{date:$.formatLocalDate(e),totalOz:a,totalEntries:o.length,entries:o,hasWaterToday:o.length>0,userTimezone:$.getUserTimezone()}}catch(n){return console.error("Error fetching daily water intake:",n),{date:$.formatLocalDate(e),totalOz:0,totalEntries:0,entries:[],hasWaterToday:!1,userTimezone:$.getUserTimezone()}}},async getWaterAnalytics(t,e=30){try{const s=(await this.fetchWaterIntakeByUser(t,e)).waterIntakes;if(s.length===0)return{totalEntries:0,averageAmount:0,averageSentiment:0,sentimentTrend:"neutral"};const r=s.reduce((c,d)=>c+(d.amount||0),0),i=s.map(c=>typeof c.sentiment=="number"?c.sentiment:0),o=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:0;let a="neutral";return o>0?a="positive":o<0&&(a="negative"),{totalEntries:s.length,averageAmount:r/s.length,averageSentiment:o,sentimentTrend:a}}catch(n){throw new Error("Error fetching water analytics: "+n.message)}},async getPersonalizedWaterRecommendations(t){try{const e=await this.getWaterAnalytics(t),n=[];return e.averageSentiment<0&&n.push({type:"sentiment",message:"Your water intake notes have been a bit negative. Try associating hydration with positive routines or rewards!",action:"Pair water breaks with something you enjoy."}),e.averageAmount<32&&n.push({type:"hydration",message:"Your average daily water intake is below recommended levels. Aim for at least 64oz per day.",action:"Set reminders to drink more water."}),{recommendations:n}}catch(e){throw new Error("Error generating water recommendations: "+e.message)}},calculateHourlyWaterIntake(t){const e={};return t.forEach(n=>{const s=n.date.getHours();e[s]=(e[s]||0)+n.amount}),e}},ir={async logMeditation(t,e){try{const n={title:e.title||"Meditation Session",type:e.type||"mindfulness",soundscape:e.soundscape||"silence",durationMinutes:e.durationMinutes,targetDuration:e.targetDuration||e.durationMinutes,completed:e.completed||!1,deepStateAchieved:e.deepStateAchieved||!1,date:$.toLocalTimezone(e.date||new Date),notes:e.notes||"",moodBefore:e.moodBefore||"",moodAfter:e.moodAfter||"",guidedSession:e.guidedSession||!1,interruptions:e.interruptions||0,heartRateData:e.heartRateData||null,brainwaveFrequency:e.brainwaveFrequency||null,focusLevel:e.focusLevel||null,createdAt:$.getCurrentLocalTime(),updatedAt:$.getCurrentLocalTime(),userTimezone:$.getUserTimezone(),sentiment:e.sentiment||null},s=await ky(rn(xe,`users/${t}/meditations`),n);return{id:s.id,success:!0,meditation:{...n,id:s.id}}}catch(n){throw new Error("Error logging meditation: "+n.message)}},async fetchMeditationsByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const s=Hn(rn(xe,`users/${t}/meditations`),Pt("date",">=",n),Kn("date","desc"));return{meditations:(await Qn(s)).docs.map(o=>{var a;return{id:o.id,...o.data(),date:(a=o.data().date)==null?void 0:a.toDate()}})}}catch(n){throw new Error("Error fetching meditations: "+n.message)}},async getMeditationAnalytics(t,e=30){try{const s=(await this.fetchMeditationsByUser(t,e)).meditations;if(s.length===0)return{totalSessions:0,deepStateSuccessRate:0,averageDuration:0,favoriteTime:"morning",favoriteSound:"silence",moodImprovement:0};const i=s.filter(f=>f.deepStateAchieved).length/s.length*100,o={},a={},c=[],d=[];return s.forEach(f=>{o[f.soundscape]=(o[f.soundscape]||0)+1;const m=f.date.getHours(),g=m<12?"morning":m<18?"afternoon":"evening";if(a[g]=(a[g]||0)+1,f.moodBefore&&f.moodAfter){const E={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6},S=E[f.moodBefore]||3,A=E[f.moodAfter]||3;c.push(A-S)}f.sentiment&&d.push(f.sentiment)}),{totalSessions:s.length,deepStateSuccessRate:Math.round(i),averageDuration:s.reduce((f,m)=>f+m.durationMinutes,0)/s.length,favoriteTime:Object.keys(a).reduce((f,m)=>a[f]>a[m]?f:m,"morning"),favoriteSound:Object.keys(o).reduce((f,m)=>o[f]>o[m]?f:m,"silence"),moodImprovement:c.length>0?c.reduce((f,m)=>f+m,0)/c.length:0,consistency:s.length/e,averageSentiment:d.length>0?d.reduce((f,m)=>f+m,0)/d.length:0}}catch(n){throw new Error("Error fetching meditation analytics: "+n.message)}},async getPersonalizedRecommendations(t){try{const e=await this.getMeditationAnalytics(t),n=[];return e.deepStateSuccessRate<50&&n.push({type:"duration",message:"Try longer sessions (7-10 minutes) to achieve deeper states",action:"Increase session length"}),e.favoriteSound==="silence"&&n.push({type:"soundscape",message:'Research shows binaural beats can enhance focus. Try our "Deep Focus" soundscape.',action:"Try binaural beats"}),e.consistency<.5&&n.push({type:"consistency",message:`Your best time is ${e.favoriteTime}. Set a daily reminder for consistent practice.`,action:"Set daily reminder"}),e.averageSentiment<4&&n.push({type:"sentiment",message:"Your recent meditations have been on the lower end of the scale. Try to maintain a more positive mindset during your sessions.",action:"Focus on positive thoughts"}),{recommendations:n}}catch(e){throw new Error("Error generating recommendations: "+e.message)}},async updateMeditation(t,e,n){try{const s=st(xe,`users/${t}/meditations`,e);return await xr(s,{...n,updatedAt:new Date}),{success:!0,meditation:{id:e,...n}}}catch(s){throw new Error("Error updating meditation: "+s.message)}},async deleteMeditation(t,e){try{return await Sy(st(xe,`users/${t}/meditations`,e)),{success:!0,message:"Meditation deleted successfully"}}catch(n){throw new Error("Error deleting meditation: "+n.message)}},async getMeditationSummary(t){try{const{startDate:e,endDate:n}=$.getCurrentWeekRange(),s=Hn(rn(xe,`users/${t}/meditations`),Pt("date",">=",e),Pt("date","<=",n),Kn("date","desc")),i=(await Qn(s)).docs.map(d=>d.data()),o=i.reduce((d,f)=>d+(f.durationMinutes||0),0),a=i.length>0?o/i.length:0,c=i.length>0?i.filter(d=>d.deepStateAchieved).length/i.length*100:0;return{totalSessions:i.length,totalMinutes:o,averageDuration:a,deepStateSuccessRate:c,favoriteSoundscape:i.length>0?this.getMostFrequent(i,"soundscape"):"silence",favoriteTime:i.length>0?this.getMostFrequent(i,"timeOfDay"):"morning",moodImprovement:this.calculateMoodImprovement(i)}}catch(e){throw console.error("Error fetching meditation summary:",e),new Error("Error fetching meditation summary: "+e.message)}},getMostFrequent(t,e){const n={};return t.forEach(s=>{const r=e==="timeOfDay"?this.getTimeOfDay(s.date):s[e];n[r]=(n[r]||0)+1}),Object.keys(n).reduce((s,r)=>n[s]>n[r]?s:r)},getTimeOfDay(t){let e;if(t instanceof Date)e=t;else if(typeof t=="string")e=new Date(t);else if(t&&t.seconds)e=new Date(t.seconds*1e3);else return console.warn("Invalid date format:",t),"unknown";if(isNaN(e.getTime()))return console.warn("Invalid date object:",t),"unknown";const n=e.getHours();return n<6?"night":n<12?"morning":n<17?"afternoon":n<21?"evening":"night"},calculateMoodImprovement(t){const e={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6};let n=0,s=0;return t.forEach(r=>{const i=e[r.moodBefore]||3,o=e[r.moodAfter]||3;n+=o-i,s++}),s>0?n/s:0},async getDailyMeditationSummary(t,e=new Date){try{const n=$.getStartOfDay(e),s=$.getEndOfDay(e);console.log("🌍 Daily meditation query for timezone:",$.getUserTimezone());const r=Hn(rn(xe,`users/${t}/meditations`),Pt("date",">=",n),Pt("date","<=",s),Kn("date","desc")),o=(await Qn(r)).docs.map(C=>{var x;return{id:C.id,...C.data(),date:(x=C.data().date)==null?void 0:x.toDate()}}),a=o.reduce((C,x)=>C+(x.durationMinutes||0),0),c=o.filter(C=>C.completed).length,d=o.length>0?a/o.length:0,f=o.filter(C=>C.deepStateAchieved).length,m=o.length>0?f/o.length*100:0,g=o.length>0?o[0]:null,E=o.length>0?this.getMostFrequent(o,"soundscape"):"silence",S=o.length>0?this.getMostFrequent(o,"timeOfDay"):"morning",A=this.calculateMoodImprovement(o);return{date:$.formatLocalDate(e),totalSessions:o.length,completedSessions:c,totalMinutes:a,averageDuration:Math.round(d*10)/10,deepStateAchieved:f,deepStateSuccessRate:Math.round(m),lastSession:g,favoriteSoundscape:E,favoriteTime:S,moodImprovement:Math.round(A*100)/100,sessions:o,hasSessionsToday:o.length>0,mostRecentType:(g==null?void 0:g.type)||"mindfulness",mostRecentSoundscape:(g==null?void 0:g.soundscape)||"silence",timeOfLastSession:(g==null?void 0:g.date)||null,totalInterruptions:o.reduce((C,x)=>C+(x.interruptions||0),0),averageFocusLevel:o.length>0?o.reduce((C,x)=>C+(x.focusLevel||5),0)/o.length:0,userTimezone:$.getUserTimezone()}}catch(n){return console.error("Error fetching daily meditation summary:",n),{date:e.toISOString().split("T")[0],totalSessions:0,completedSessions:0,totalMinutes:0,averageDuration:0,deepStateAchieved:0,deepStateSuccessRate:0,lastSession:null,favoriteSoundscape:"silence",favoriteTime:"morning",moodImprovement:0,sessions:[],hasSessionsToday:!1,mostRecentType:"mindfulness",mostRecentSoundscape:"silence",timeOfLastSession:null,totalInterruptions:0,averageFocusLevel:0,userTimezone:$.getUserTimezone()}}}},k2=["You are capable of amazing things.","You are loved.","You are strong.","You are beautiful.","You are enough.","You are worthy.","You are important.","You are talented.","You are special.","I am capable and strong","I am loved and loving","I am healthy and happy","I am wealthy and wise","Believe in yourself and all that you are.","You are amazing.","You are stronger than you think.","You are braver than you believe.","Every day is a new opportunity.","You are worth it.","You are worthy of all the good things.","You are deserving of love and happiness.","Stay positive, work hard, make it happen.","You are enough just as you are.","You are doing great.","Your potential is limitless.","You are a work of art.","You are doing great.","You are a gift to the world.","Keep going, you are getting there.","You are a masterpiece."],A2="https://createstripecheckoutsession-z5fchdkthq-uc.a.run.app";async function il(){const t=tT().currentUser;if(!t){alert("You must be logged in to upgrade.");return}try{console.log("🔧 Starting Stripe upgrade with direct HTTP call"),console.log("👤 User ID:",t.uid),console.log("🌐 Function URL:",A2);const e=await fetch(A2,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t.uid})});if(console.log("📡 Response status:",e.status),console.log("📡 Response headers:",e.headers),!e.ok){const r=await e.text();throw console.error("❌ HTTP error response:",r),new Error(`HTTP error! status: ${e.status}, body: ${r}`)}const n=await e.json();console.log("✅ Function call successful:",n);const{url:s}=n;console.log("🔗 Redirecting to Stripe checkout:",s),window.location.href=s}catch(e){console.error("❌ Error creating Stripe checkout session:",e),console.error("❌ Error details:",e.message),alert("Error creating checkout session. Please try again.")}}function N2(){const t=Math.floor(Math.random()*k2.length);return k2[t]}function NO(){const t=uh(),{user:e,loading:n,isPremium:s}=In(),[r,i]=N.useState(null),[o,a]=N.useState({workout:{totalMinutes:0,sessions:0,hasWorkoutsToday:!1},meditation:{totalMinutes:0,sessions:0,hasSessionsToday:!1,deepStateAchieved:0},water:{totalOz:0,entries:0,hasWaterToday:!1}}),[c,d]=N.useState(30),[f,m]=N.useState(10),[g,E]=N.useState(64),[S,A]=N.useState(N2()),[C,x]=N.useState(!0),[v,I]=N.useState(!1),[j,L]=N.useState(0),[M,_]=N.useState([]);if(N.useEffect(()=>{if(!n&&!e){t("/welcome",{replace:!0});return}},[e,n,t]),N.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{x(!0);const b=$.getCurrentLocalTime();console.log("🌍 Dashboard timezone:",$.getUserTimezone()),console.log("📅 Local today:",$.formatLocalDateTime(b));const ie=await Te.getUserProfile(e.uid);i(ie.user),d(ie.user.exerciseGoalMinutes||30),m(ie.user.meditationGoalMinutes||10),E(ie.user.waterGoalOz||64),console.log("📊 Fetching workout data for date:",b);const[he,X,ee]=await Promise.all([fi.getDailyWorkoutSummary(e.uid,b),ir.getDailyMeditationSummary(e.uid,b),en.getDailyWaterIntake(e.uid,b)]);console.log("📊 Raw workout data from Dashboard:",he),console.log("🧘 Raw meditation data:",X),console.log("💧 Raw water data:",ee),a({workout:{totalMinutes:he.totalMinutes||0,sessions:he.totalWorkouts||0,hasWorkoutsToday:he.hasWorkoutsToday||he.totalMinutes>0,calories:he.caloriesBurned||0,lastWorkoutType:he.mostCommonType},meditation:{totalMinutes:X.totalMinutes||0,sessions:X.totalSessions||0,hasSessionsToday:X.hasSessionsToday||!1,deepStateAchieved:X.deepStateAchieved||0,moodImprovement:X.moodImprovement||0,lastSessionType:X.mostRecentType},water:{totalOz:ee.totalOz||0,entries:ee.totalEntries||ee.entries||0,hasWaterToday:(ee.totalOz||0)>0,averagePerEntry:ee.averagePerEntry||0,isOnTrack:(ee.totalOz||0)>=(ie.user.waterGoalOz||64)*.75}})}catch(b){console.error("Error fetching daily data:",b)}finally{x(!1)}})()},[e]),N.useEffect(()=>{const P=localStorage.getItem("affirmation"),b=localStorage.getItem("affirmationDate"),ie=new Date().toISOString().split("T")[0];if(P&&b===ie)A(P);else{const he=N2();A(he),localStorage.setItem("affirmation",he),localStorage.setItem("affirmationDate",ie)}},[]),N.useEffect(()=>{if(console.log("Trial modal effect running",r),r&&r.subscriptionStatus==="trial_expired"&&r.subscription==="free"){const P=localStorage.getItem("dontRemindTrial"),b=localStorage.getItem("lastTrialReminded");console.log("dontRemindTrial:",P),console.log("lastReminded:",b);const ie=1e3*60*60*24*7,he=Date.now();P||(!b||he-Number(b)>ie)&&(I(!0),localStorage.setItem("lastTrialReminded",he),console.log("Showing trial modal!"))}},[r]),N.useEffect(()=>{(async()=>{if(e!=null&&e.uid){const b=await Te.getPoints(e.uid);L(b)}})()},[e]),N.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{const[b,ie,he]=await Promise.all([ir.getPersonalizedRecommendations(e.uid),en.getPersonalizedWaterRecommendations(e.uid),fi.getPersonalizedWorkoutRecommendations(e.uid)]),X=[...(b==null?void 0:b.recommendations)||[],...(ie==null?void 0:ie.recommendations)||[],...(he==null?void 0:he.recommendations)||[]];_(X)}catch(b){console.error("Error fetching recommendations:",b)}})()},[e]),n||C)return u.jsx("div",{className:"dashboard-loading",children:"Loading..."});if(!e)return u.jsx("div",{className:"dashboard-loading",children:"Redirecting..."});if(!r)return u.jsx("div",{className:"dashboard-loading",children:"Loading user data..."});if(!r.firstName||!r.exerciseGoalMinutes||!r.waterGoalOz||!r.meditationGoalMinutes)return u.jsx("div",{className:"dashboard-loading",children:"Loading user profile..."});const y=Math.min(o.workout.totalMinutes/c*100,100)||0,T=Math.min(o.meditation.totalMinutes/f*100,100)||0,k=Math.min(o.water.totalOz/g*100,100)||0,R=Math.max(c-o.workout.totalMinutes,0);return r.subscriptionStatus==="trial_expired"&&r.subscription,u.jsxs("div",{className:"dashboard-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:"⭐"})," ",j," Points"]}),u.jsxs("div",{className:"welcome-section",children:[u.jsxs("h1",{children:["Welcome back, ",r.firstName,"!"]}),u.jsx("p",{children:"Here's your wellness progress for today"})]}),u.jsxs("div",{className:"progress-bars",children:[u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"💪 Today's Workout"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",c," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.workout.totalMinutes," / ",c," min"]}),u.jsx(Uf,{value:y,text:`${Math.round(y)}%`,styles:Bf({pathColor:`rgba(62, 152, 199, ${Math.max(y/100,.3)})`,textColor:"#3e98c7"})}),u.jsx("div",{className:"daily-stats",children:o.workout.hasWorkoutsToday?u.jsxs("span",{children:["✅ ",o.workout.sessions," workouts logged"]}):u.jsx("span",{children:"No workouts logged today"})}),u.jsx("button",{className:"track-button",onClick:()=>t("/workout"),children:"Log Workout"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"🧘‍♀️ Today's Meditation"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",f," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.meditation.totalMinutes," / ",f," min"]}),u.jsx(Uf,{value:T,text:`${Math.round(T)}%`,styles:Bf({pathColor:`rgba(138, 43, 226, ${Math.max(T/100,.3)})`,textColor:"#8a2be2"})}),u.jsxs("div",{className:"daily-stats",children:[o.meditation.hasSessionsToday?u.jsxs("span",{children:["✅ ",o.meditation.sessions," sessions completed"]}):u.jsx("span",{children:"No meditation logged today"}),o.meditation.deepStateAchieved>0&&u.jsxs("span",{className:"deep-state",children:["🌟 ",o.meditation.deepStateAchieved," deep states"]})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/meditation"),children:"Start Meditation"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"💧 Today's Hydration"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",g," oz"]}),u.jsxs("p",{className:"current-text",children:[o.water.totalOz," / ",g," oz"]}),u.jsx(Uf,{value:k,text:`${Math.round(k)}%`,styles:Bf({pathColor:`rgba(30, 144, 255, ${Math.max(k/100,.3)})`,textColor:"#1e90ff"})}),u.jsxs("div",{className:"daily-stats",children:[o.water.hasWaterToday?u.jsxs("span",{children:["✅ ",o.water.entries," water entries"]}):u.jsx("span",{children:"No water logged today"}),o.water.isOnTrack&&u.jsx("span",{className:"on-track",children:"🎯 On track for hydration!"})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/water"),children:"Log Water"})]})]}),R>0&&u.jsx("div",{className:"notification-bar",children:u.jsxs("p",{children:["🔥 You are ",R," minutes away from your daily workout goal!"]})}),y>=100&&T>=100&&k>=100&&u.jsx("div",{className:"celebration-bar",children:u.jsx("p",{children:"🎉 Congratulations! You've achieved all your daily wellness goals! 🎉"})}),u.jsxs("div",{className:"affirmation-bar",children:[u.jsx("p",{children:"🌸 Daily Affirmation 🌸"}),u.jsx("h2",{children:S})]}),u.jsxs("div",{className:"quick-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.workout.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Exercised Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.water.totalOz}),u.jsx("span",{className:"stat-label",children:"Ounces of Water Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.meditation.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Meditated Today"})]})]}),(r.subscription==="premium"||r.subscription==="trial")&&u.jsxs("div",{className:"ai-coach-section soft-card",children:[u.jsxs("div",{className:"ai-coach-title-row",children:[u.jsx("h2",{className:"ai-coach-title",children:"🤖 Clarity AI Coach"}),u.jsx("span",{className:"ai-coach-premium-badge",children:"Premium"})]}),u.jsxs("div",{className:"ai-coach-avatar-row",children:[u.jsx("div",{className:"ai-coach-avatar","aria-label":"AI Coach",children:"🧠"}),u.jsx("div",{className:"ai-coach-chat",children:M.length>0?u.jsx("ul",{className:"ai-coach-chat-list",children:M.map((P,b)=>u.jsxs("li",{className:"ai-coach-message",children:[u.jsxs("div",{className:"ai-coach-bubble",children:[u.jsx("span",{className:"ai-coach-label",children:"Coach:"})," ",P.message,P.action&&u.jsxs("div",{className:"ai-coach-action",children:[u.jsx("span",{className:"ai-coach-action-label",children:"Try this:"})," ",P.action]})]}),P.type&&u.jsx("div",{className:"ai-coach-type-tag",children:P.type.charAt(0).toUpperCase()+P.type.slice(1)})]},b))}):u.jsxs("div",{className:"ai-coach-empty",children:[u.jsx("div",{className:"ai-coach-bubble ai-coach-bubble-empty",children:'"Log your workouts, meditations, water, and notes to unlock smart, personalized insights!"'}),u.jsx("div",{className:"ai-coach-tip",children:"The more you log, the smarter your AI Coach gets. Keep going! 💡"})]})})]})]}),v&&u.jsx("div",{className:"trial-modal-overlay",children:u.jsxs("div",{className:"trial-modal",children:[u.jsx("h2",{children:"Your free trial has ended"}),u.jsx("p",{children:"Upgrade to keep enjoying the AI Coach and other premium features!"}),u.jsx("button",{className:"primary-button",onClick:il,children:"Upgrade with Stripe"}),u.jsxs("div",{className:"trial-modal-actions",children:[u.jsx("button",{className:"secondary-button",onClick:()=>I(!1),children:"Remind me later"}),u.jsx("button",{className:"link-button",onClick:()=>{localStorage.setItem("dontRemindTrial","true"),I(!1)},children:"Don't remind me again"})]})]})})]})}var PO=function(t){return t.toLowerCase().replace(/\n/g," ").replace(/[.,\/#!?$%\^&\*;:{}=_`\"~()]/g," ").replace(/\s\s+/g," ").trim().split(" ")};function CO(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const RO={"😂":1,"❤":3,"♥":3,"😍":3,"😭":-1,"😘":3,"😊":3,"👌":2,"💕":3,"👏":2,"😁":2,"☺":3,"♡":3,"👍":2,"😩":-2,"🙏":2,"✌":2,"😏":1,"😉":2,"🙌":2,"🙈":2,"💪":2,"😄":2,"😒":-2,"💃":3,"💖":3,"😃":2,"😔":-1,"🎉":3,"😜":2,"🌸":3,"💜":3,"💙":3,"✨":1,"💗":3,"★":1,"█":-1,"☀":2,"😡":-1,"😎":2,"💋":3,"😋":3,"🙊":2,"😴":-1,"🎶":2,"💞":3,"😌":2,"🔫":-1,"💛":3,"💁":1,"💚":3,"♫":1,"😞":-1,"😆":2,"😝":2,"😪":-1,"😫":-1,"👊":1,"💀":-2,"😀":2,"😚":3,"😻":3,"💘":3,"☕":1,"👋":2,"🎊":3,"🍕":2,"❄":2,"😕":-2,"💔":-1,"😤":-2,"😈":1,"✈":2,"🔝":2,"😰":-1,"⚽":3,"😑":-2,"👑":3,"👉":1,"🍃":1,"🎁":3,"😠":-2,"🐧":2,"☆":2,"🍀":1,"🎈":3,"🎅":1,"😓":-1,"😣":-2,"😐":-2,"✊":2,"😨":-1,"😖":-1,"💤":1,"💓":3,"👎":-1,"💦":2,"✔":1,"😷":-1,"🙋":2,"🎄":2,"💩":-1,"🎵":2,"😛":3,"👯":2,"💎":2,"🌿":1,"🎂":3,"🌟":1,"🔮":1,"👫":1,"🏆":3,"✖":1,"☝":1,"😙":3,"⛄":2,"👅":2,"♪":2,"🍂":2,"💏":1,"🌴":2,"👈":2,"🌹":3,"🙆":2,"👻":1,"💰":1,"🍻":2,"🙅":-2,"🌞":2,"🍁":2,"⭐":2,"▪":1,"🎀":3,"🐷":1,"🙉":1,"🌺":2,"💅":1,"🐶":2,"🌚":2,"👽":1,"🎤":2,"👭":2,"🎧":2,"👆":1,"🍸":2,"🍷":2,"®":1,"🍉":3,"😇":3,"🏃":2,"😿":-2,"│":1,"🍺":2,"▶":1,"😲":-1,"🎸":2,"🍹":3,"💫":2,"📚":1,"😶":-1,"🌷":2,"💝":3,"💨":1,"🏈":2,"💍":2,"☔":1,"👸":3,"🇪":3,"░":-1,"🍩":1,"👾":1,"☁":1,"🌻":2,"↿":3,"🐯":2,"👼":1,"🍔":1,"😸":2,"👶":2,"↾":3,"💐":3,"🌊":2,"🍦":2,"🍓":3,"👇":1,"💆":1,"🍴":2,"😧":-1,"🇸":2,"😮":1,"🚫":-3,"😽":2,"🌈":2,"🙀":1,"⚠":-1,"🎮":2,"╯":-1,"🍆":2,"🍰":2,"✓":1,"👐":-1,"🍟":1,"🍌":2,"💑":3,"👬":-1,"🐣":2,"🎃":3,"▬":2,"￼":-3,"🐾":3,"🎓":2,"🏊":2,"📷":2,"👄":2,"🌼":4,"🚶":-1,"🐱":2,"🐸":-1,"🇺":2,"👿":-3,"🚬":2,"✿":1,"🐒":2,"🌍":3,"┊":5,"🐥":3,"🐼":1,"🎥":1,"💄":2,"⛔":2,"🏀":1,"💉":1,"💟":3,"🚗":1,"📝":1,"♦":2,"💭":1,"🌙":3,"🐟":3,"👣":1,"✂":-3,"🗿":2,"👪":-1,"🍭":1,"🌃":2,"❌":1,"🐰":3,"💊":2,"🚨":3,"😦":-2,"🍪":1,"🍣":-2,"✧":1,"🎆":3,"🎎":4,"🇩":3,"✅":2,"📱":1,"🙍":-2,"🍑":1,"🎼":1,"🔊":2,"🌌":2,"🍎":1,"🐻":2,"╰":-1,"💇":1,"♬":1,"🔴":2,"🍱":-2,"🍊":2,"🍒":1,"🐭":3,"👟":2,"🌎":1,"🍍":2,"🐮":3,"📲":1,"☼":1,"🌅":1,"🇷":3,"👠":1,"🌽":2,"💧":-1,"🍬":1,"😺":2,"🚀":2,"¦":3,"💢":1,"🎬":1,"🍧":1,"🍜":2,"🐏":3,"🏄":2,"➤":1,"⬆":1,"🍋":1,"🆗":2,"⚪":2,"📺":2,"🍅":1,"⛅":2,"🐢":1,"👙":2,"🏡":2,"🌾":2,"◉":1,"✏":1,"🐬":2,"🇹":3,"♣":1,"🐝":1,"🌝":1,"🇮":3,"🔋":-3,"🐍":1,"♔":2,"🔵":1,"😾":-2,"🌕":3,"🐨":2,"🔐":1,"💿":3,"🌳":2,"👰":2,"❀":2,"⚓":3,"🚴":3,"▀":-1,"👗":1,"➕":2,"💬":2,"▒":-1,"🔜":1,"🍨":1,"💲":1,"🍙":1,"🍥":-4,"▸":1,"♛":1,"😼":1,"🐙":2,"👨":2,"🍚":2,"♨":4,"🎹":1,"♕":2,"▃":5,"🇬":1,"🇧":1,"☠":-1,"🐠":2,"🚹":3,"💵":2,"✰":4,"╠":1,"👛":2,"🌱":3,"💻":1,"🌏":1,"▄":-1,"👓":1,"◄":1,"⚾":-1,"🌲":2,"👴":1,"🏠":2,"🍇":1,"🍘":2,"🐇":1,"🔞":-1,"👵":2,"◀":1,"🔙":1,"🌵":1,"🍮":-1,"🎇":3,"🐎":2,"➔":-1,"🐤":2,"╩":1,"🌑":2,"🚲":2,"🐑":-1,"🏁":2,"🎾":3,"╚":1,"🈹":1,"👮":-2,"☹":-3,"🐵":2,"✪":1,"◕":2,"🗼":3,"▐":-1,"♠":1,"┳":-2,"👺":-2,"🐚":1,"👂":-1,"🗽":1,"🍵":2,"🆒":2,"🐺":1,"⇨":2,"🌓":3,"🔒":1,"╬":-1,"👳":3,"🌂":1,"🚌":1,"♩":3,"🍡":-1,"❥":1,"🎡":1,"💌":2,"🐩":2,"🌜":2,"⌚":1,"🚿":3,"🔆":3,"🌛":3,"💂":-1,"🐔":1,"🙎":-1,"🏩":2,"🇫":2,"🔨":-1,"📢":2,"🐦":2,"🐲":-1,"♻":2,"🌘":3,"🌔":3,"👖":2,"😗":3,"🐄":1,"◟":-1,"🍢":-1,"🎨":1,"⬇":2,"🚼":3,"🇴":2,"🌗":3,"🌖":3,"🔅":5,"👜":1,"🐌":3,"💼":3,"🐹":1,"🌠":3,"🐈":1,"🌁":1,"⚫":1,"♧":2,"🏰":1,"🚵":2,"🎢":2,"🎷":3,"🎐":1,"┈":-4,"╗":2,"🌇":3,"⏰":2,"🚂":1,"◠":2,"🎿":2,"🆔":4,"🌒":3,"🐪":3,"╔":1,"╝":2,"👔":2,"🆓":1,"🐋":1,"▽":2,"🐛":1,"👕":2,"💳":2,"🏧":5,"💡":3,"⬅":2,"🐫":2,"🇱":2,"📹":2,"👞":2,"👚":3,"□":-2,"🚣":3,"🏉":3,"🗻":3,"╦":2,"⛺":3,"🐕":1,"🏂":2,"👡":2,"📻":2,"✒":1,"🌰":3,"🏢":1,"🎒":3,"⌒":3,"🏫":-2,"📴":4,"🚢":1,"🚚":-1,"🐉":1,"❒":1,"🔔":5,"◢":4,"🏥":1,"🚖":-1,"▌":-2,"☛":2,"💒":3,"🚤":2,"🐐":2,"■":-2,"🔚":2,"🎻":2,"🔷":1,"🎽":2,"📅":1,"🎺":3,"🍈":-3,"✉":1,"◤":5,"○":3,"🍼":3,"🚛":-2,"📓":1,"☉":1,"💴":-2,"➰":-1,"🔌":-1,"📕":1,"📣":2,"🚓":1,"🐗":3,"⛳":4,"┻":-3,"┛":3,"┃":2,"💺":1,"🏇":-1,"☻":1,"📞":2,"Ⓐ":-1,"🌉":3,"🚩":-2,"✎":3,"📃":2,"🏨":1,"📌":-3,"♎":-1,"💷":2,"🚄":3,"▲":3,"⛵":3,"🔸":1,"🚜":5,"🐆":2,"👒":1,"❕":1,"🔛":2,"♢":2,"🇲":2,"❅":4,"👝":2,"✞":2,"◡":1,"🎋":3,"👥":1,"🐡":1,"◆":4,"🔭":2,"🎪":1,"🐜":3,"♌":4,"☐":-5,"👷":1,"🔈":1,"📄":5,"🚐":4,"🌋":3,"📡":1,"🚳":5,"✘":4,"🅰":1,"🇼":2,"┓":3,"┣":3,"Ⓛ":2,"Ⓔ":2,"👤":4,"🚁":1,"🎠":3,"🐁":-2,"📗":1,"┐":-1,"♂":1,"📯":-1,"🔩":1,"👢":4,"◂":2,"📰":1,"📶":2,"🌄":1,"🗾":2,"🔶":2,"🏤":2,"🎩":2,"Ⓜ":1,"🔧":-4,"🐅":1,"♮":1,"🅾":-1,"📦":1,"🚊":1,"🔲":3,"△":1,"📆":5,"❛":2,"📉":2,"▵":2,"🔎":3,"☜":1,"🇯":2,"🇵":2,"📘":1,"ⓔ":3,"🔑":1,"⭕":2,"🔘":1,"🚭":5,"🚉":3,"🚪":3,"➳":2,"🚃":3,"┯":-3,"🆙":2,"🆖":1,"┗":5,"Ⓞ":2,"❇":3,"✴":3,"☊":5,"🔕":-2,"⬛":-2,"🚞":3,"🍶":3,"🌐":3,"♀":1,"🚅":3,"🚒":-2,"♋":1,"♍":3,"🕝":-2,"ⓐ":5,"📙":1,"Ⓢ":1,"📋":3,"🎱":1,"🐞":1,"🔺":1,"ⓡ":5,"♤":3,"🎯":3,"🔉":3,"↩":5,"🚾":1,"🎣":-4,"🔣":1,"❎":-5,"➥":1,"🎌":5,"◣":1,"⏬":5,"♭":1,"ⓞ":5,"🔳":2,"🏭":2,"🎳":-3,"☚":5,"➽":2,"➫":2,"➖":-5,"꒰":2,"꒱":2,"◝":-3,"📑":5,"ⓧ":5,"🔟":5,"〓":5,"ⓜ":2,"➠":5,"🚆":2,"℅":-5,"☃":2,"🚽":5,"ⓝ":5,"⇦":5,"👲":2,"🚡":-3,"🔬":5,"➗":-3,"📈":2,"⏪":2,"◎":5,"꒦":-5,"📎":5,"⑅":5,"✭":5,"♓":2,"┏":5,"☇":5,"࿎":-5,"👘":5,"↙":5,"Ⓕ":2,"Ⓦ":2,"Ⓟ":2,"🕑":2,"🕛":5,"♈":-5,"↬":5,"✍":5,"🏦":5,"🔻":5,"ⓟ":5,"ⓕ":5,"ⓘ":5,"♿":5,"⇗":5,"⇘":5,"ⓨ":5,"ⓙ":5,"▫":5,"🔇":5,"⌃":-5,"🔖":5,"📜":5,"🚝":5,"┘":-5,"✝":-5,"⍣":-5,"📮":-5,"🕕":-5,"🔯":5,"➸":5,"꒵":5,"🕥":-5,"✽":5,"📼":5,"🕐":-5,"🀄":5,"✬":5,"✫":5,"🕔":-5,"❣":5,"📫":5,"🉐":5,"🈂":-5,"🎰":-5,"҂":-5,"╤":-5,"📔":5},DO=-2,jO=-2,OO=-2,VO=-2,MO=-2,LO=-2,FO=-3,zO=-3,UO=-3,BO=-3,$O=2,qO=2,WO=1,GO=-1,HO=-1,KO=-1,QO=-1,YO=2,XO=2,JO=2,ZO=2,eV=1,tV=-3,nV=-3,sV=-3,rV=-3,iV=-3,oV=1,aV=1,cV=1,lV=1,uV=1,dV=1,hV=1,fV=-2,mV=-2,pV=-2,gV=-2,yV=2,vV=2,wV=2,_V=2,EV=2,TV=2,IV=2,xV=2,bV=-2,SV=-2,kV=-2,AV=-2,NV=-2,PV=-2,CV=-2,RV=1,DV=-2,jV=2,OV=2,VV=2,MV=2,LV=-3,FV=1,zV=1,UV=3,BV=3,$V=3,qV=3,WV=-1,GV=-1,HV=-1,KV=-2,QV=-2,YV=1,XV=1,JV=3,ZV=3,eM=3,tM=3,nM=3,sM=3,rM=3,iM=1,oM=2,aM=2,cM=2,lM=2,uM=2,dM=2,hM=2,fM=-1,mM=1,pM=-1,gM=3,yM=3,vM=3,wM=-1,_M=2,EM=-1,TM=2,IM=-2,xM=-2,bM=-2,SM=-2,kM=-2,AM=-2,NM=-2,PM=-2,CM=-2,RM=-2,DM=2,jM=-3,OM=-3,VM=-3,MM=-3,LM=-3,FM=-3,zM=-3,UM=-3,BM=1,$M=2,qM=1,WM=1,GM=1,HM=-2,KM=-2,QM=-2,YM=-2,XM=-1,JM=-1,ZM=-2,eL=1,tL=-2,nL=-2,sL=-2,rL=1,iL=2,oL=-2,aL=2,cL=2,lL=2,uL=2,dL=4,hL=2,fL=-1,mL=2,pL=3,gL=3,yL=3,vL=3,wL=-3,_L=-3,EL=-3,TL=-3,IL=-3,xL=-3,bL=-2,SL=-2,kL=-2,AL=-2,NL=-2,PL=-2,CL=-2,RL=-1,DL=1,jL=-2,OL=-2,VL=-3,ML=-3,LL=-3,FL=-2,zL=-1,UL=-1,BL=-1,$L=-1,qL=-1,WL=-1,GL=-1,HL=-1,KL=-1,QL=-2,YL=-2,XL=2,JL=2,ZL=2,e4=2,t4=2,n4=2,s4=2,r4=2,i4=2,o4=2,a4=2,c4=2,l4=2,u4=2,d4=2,h4=-2,f4=2,m4=2,p4=2,g4=2,y4=2,v4=1,w4=-2,_4=-3,E4=-2,T4=-2,I4=-4,x4=-2,b4=-2,S4=-4,k4=-3,A4=-3,N4=-2,P4=-2,C4=2,R4=2,D4=-4,j4=-4,O4=2,V4=3,M4=3,L4=3,F4=3,z4=3,U4=-3,B4=-3,$4=-1,q4=-1,W4=-1,G4=-1,H4=1,K4=1,Q4=2,Y4=2,X4=2,J4=2,Z4=2,eF=2,tF=1,nF=3,sF=1,rF=1,iF=-2,oF=-2,aF=-2,cF=-2,lF=-2,uF=-2,dF=-1,hF=-1,fF=-1,mF=2,pF=-1,gF=-1,yF=-1,vF=-1,wF=-1,_F=3,EF=3,TF=3,IF=4,xF=-3,bF=-2,SF=-1,kF=-1,AF=1,NF=2,PF=1,CF=-3,RF=-3,DF=-3,jF=-3,OF=-2,VF=1,MF=-2,LF=-2,FF=-2,zF=-2,UF=-1,BF=-3,$F=-3,qF=-3,WF=-2,GF=-2,HF=-2,KF=-2,QF=2,YF=-2,XF=-5,JF=-5,ZF=-1,ez=-1,tz=-1,nz=-2,sz=-2,rz=3,iz=-1,oz=3,az=3,cz=3,lz=3,uz=3,dz=2,hz=2,fz=-2,mz=-2,pz=3,gz=2,yz=2,vz=2,wz=2,_z=2,Ez=2,Tz=3,Iz=-2,xz=-2,bz=-2,Sz=-2,kz=3,Az=-3,Nz=-3,Pz=-3,Cz=-3,Rz=-3,Dz=2,jz=-1,Oz=-2,Vz=1,Mz=-5,Lz=-5,Fz=-2,zz=-2,Uz=-2,Bz=-2,$z=-3,qz=-3,Wz=-3,Gz=-3,Hz=-2,Kz=-2,Qz=-2,Yz=-2,Xz=-2,Jz=2,Zz=2,e5=3,t5=3,n5=-1,s5=3,r5=3,i5=2,o5=-1,a5=-1,c5=-2,l5=3,u5=-1,d5=-1,h5=-1,f5=-3,m5=-2,p5=-2,g5=2,y5=2,v5=-1,w5=1,_5=1,E5=1,T5=1,I5=-2,x5=-2,b5=-3,S5=-2,k5=-2,A5=-2,N5=-2,P5=-2,C5=-2,R5=-2,D5=-2,j5=-3,O5=2,V5=2,M5=2,L5=3,F5=-2,z5=-2,U5=-2,B5=-2,$5=3,q5=5,W5=-3,G5=-3,H5=-3,K5=-3,Q5=1,Y5=2,X5=1,J5=4,Z5=3,e6=3,t6=2,n6=-1,s6=-1,r6=-2,i6=-3,o6=-3,a6=-2,c6=-4,l6=-2,u6=-2,d6=-2,h6=2,f6=-2,m6=-2,p6=-2,g6=-2,y6=-2,v6=-2,w6=2,_6=2,E6=2,T6=2,I6=-1,x6=-1,b6=-1,S6=-1,k6=-1,A6=1,N6=1,P6=1,C6=3,R6=2,D6=1,j6=2,O6=2,V6=2,M6=-2,L6=2,F6=2,z6=-2,U6=-3,B6=-4,$6=-1,q6=3,W6=3,G6=3,H6=3,K6=3,Q6=3,Y6=-2,X6=-2,J6=-2,Z6=1,eU=-2,tU=-2,nU=-1,sU=2,rU=2,iU=2,oU=2,aU=2,cU=-2,lU=-2,uU=-3,dU=-2,hU=2,fU=2,mU=3,pU=3,gU=3,yU=-3,vU=-3,wU=-3,_U=-3,EU=-3,TU=-3,IU=-3,xU=-3,bU=-3,SU=-3,kU=-3,AU=2,NU=2,PU=2,CU=2,RU=2,DU=-2,jU=2,OU=3,VU=2,MU=2,LU=2,FU=2,zU=2,UU=-3,BU=-3,$U=-3,qU=-3,WU=-2,GU=-1,HU=-2,KU=-2,QU=-2,YU=-2,XU=2,JU=2,ZU=-2,e9=3,t9=2,n9=2,s9=1,r9=1,i9=1,o9=1,a9=2,c9=-1,l9=-2,u9=-5,d9=-5,h9=-5,f9=-2,m9=-2,p9=-2,g9=-2,y9=-2,v9=-2,w9=-2,_9=-1,E9=-1,T9=-1,I9=-2,x9=-2,b9=-3,S9=-1,k9=-1,A9=1,N9=2,P9=2,C9=2,R9=2,D9=2,j9=1,O9=2,V9=2,M9=1,L9=2,F9=1,z9=1,U9=1,B9=2,$9=2,q9=1,W9=1,G9=2,H9=2,K9=-2,Q9=-2,Y9=-2,X9=-2,J9=-2,Z9=-2,eB=-2,tB=-2,nB=2,sB=2,rB=2,iB=2,oB=-2,aB=2,cB=2,lB=2,uB=2,dB=-2,hB=-2,fB=-2,mB=-2,pB=2,gB=2,yB=2,vB=-2,wB=-2,_B=-2,EB=-2,TB=-2,IB=-2,xB=-2,bB=2,SB=2,kB=2,AB=2,NB=2,PB=2,CB=2,RB=-3,DB=-2,jB=-2,OB=-2,VB=-2,MB=-1,LB=-2,FB=-2,zB=-2,UB=-2,BB=-2,$B=-2,qB=-2,WB=-2,GB=-2,HB=-2,KB=-2,QB=-2,YB=-1,XB=-1,JB=-1,ZB=-2,e$=-2,t$=-2,n$=-2,s$=-2,r$=-2,i$=-2,o$=1,a$=1,c$=1,l$=2,u$=1,d$=-2,h$=-1,f$=-3,m$=-3,p$=-3,g$=-3,y$=-3,v$=-2,w$=2,_$=2,E$=2,T$=2,I$=2,x$=2,b$=-2,S$=-2,k$=2,A$=-1,N$=-3,P$=-3,C$=-2,R$=-2,D$=-2,j$=-2,O$=2,V$=-2,M$=-2,L$=-2,F$=-3,z$=-3,U$=-3,B$=-3,$$=-3,q$=-3,W$=-3,G$=-3,H$=-2,K$=-2,Q$=-2,Y$=-2,X$=-2,J$=-2,Z$=-2,eq=-2,tq=-2,nq=-2,sq=-2,rq=-2,iq=-1,oq=-1,aq=-3,cq=-3,lq=-1,uq=-2,dq=-1,hq=-1,fq=-1,mq=-2,pq=2,gq=-5,yq=1,vq=-1,wq=-1,_q=-2,Eq=-2,Tq=2,Iq=-1,xq=-1,bq=-2,Sq=-2,kq=-2,Aq=-3,Nq=-3,Pq=-3,Cq=-3,Rq=-2,Dq=-4,jq=-4,Oq=-2,Vq=-2,Mq=-2,Lq=2,Fq=2,zq=-2,Uq=-1,Bq=2,$q=3,qq=-3,Wq=-2,Gq=-2,Hq=-3,Kq=-1,Qq=2,Yq=3,Xq=-2,Jq=-2,Zq=2,e8=-2,t8=-3,n8=-3,s8=-3,r8=-3,i8=-3,o8=-3,a8=-3,c8=-3,l8=1,u8=2,d8=2,h8=-2,f8=-2,m8=-3,p8=-3,g8=-3,y8=2,v8=2,w8=-2,_8=-1,E8=-1,T8=-1,I8=-2,x8=-2,b8=-2,S8=-2,k8=-2,A8=-2,N8=-2,P8=-3,C8=-3,R8=2,D8=-2,j8=-2,O8=-2,V8=-2,M8=-2,L8=-2,F8=-2,z8=-2,U8=-2,B8=-2,$8=-2,q8=-2,W8=-1,G8=-1,H8=3,K8=3,Q8=3,Y8=3,X8=3,J8=3,Z8=3,eW=3,tW=-1,nW=-1,sW=-1,rW=-1,iW=-1,oW=-2,aW=-2,cW=-2,lW=-2,uW=-2,dW=-2,hW=-2,fW=-2,mW=-2,pW=-2,gW=-2,yW=-2,vW=-2,wW=-2,_W=-2,EW=-3,TW=-3,IW=-3,xW=-3,bW=-2,SW=-2,kW=-2,AW=-2,NW=-2,PW=-2,CW=-2,RW=-2,DW=-3,jW=-2,OW=-2,VW=-2,MW=-2,LW=-2,FW=-2,zW=-2,UW=-2,BW=-2,$W=2,qW=1,WW=2,GW=2,HW=-3,KW=-3,QW=-3,YW=-3,XW=-3,JW=-3,ZW=-3,e7=-3,t7=-3,n7=-3,s7=-3,r7=-3,i7=-1,o7=-2,a7=-2,c7=-2,l7=-2,u7=-2,d7=-2,h7=-2,f7=2,m7=-2,p7=-1,g7=-1,y7=-1,v7=-2,w7=-2,_7=-2,E7=-2,T7=-2,I7=3,x7=2,b7=2,S7=1,k7=-4,A7=-4,N7=-3,P7=-3,C7=-1,R7=-2,D7=2,j7=-1,O7=2,V7=-3,M7=-3,L7=-3,F7=-2,z7=-2,U7=-2,B7=-2,$7=-2,q7=-2,W7=-1,G7=-2,H7=-2,K7=-2,Q7=-2,Y7=-2,X7=-1,J7=-1,Z7=-1,eG=-2,tG=-2,nG=-2,sG=-2,rG=-2,iG=-2,oG=-2,aG=-2,cG=-2,lG=-2,uG=-2,dG=-2,hG=-2,fG=-2,mG=-3,pG=-2,gG=-1,yG=-1,vG=-1,wG=-1,_G=2,EG=-2,TG=-2,IG=-2,xG=-2,bG=-2,SG=-1,kG=-2,AG=-2,NG=-2,PG=-2,CG=-2,RG=-2,DG=-2,jG=-2,OG=-1,VG=-1,MG=-2,LG=-2,FG=-1,zG=-1,UG=-1,BG=-1,$G=-3,qG=-3,WG=-3,GG=-3,HG=-2,KG=-2,QG=-2,YG=-2,XG=-2,JG=-2,ZG=-2,eH=-2,tH=-2,nH=-2,sH=-2,rH=-2,iH=-2,oH=-2,aH=-2,cH=-2,lH=-2,uH=-2,dH=-2,hH=-2,fH=-2,mH=-2,pH=-2,gH=-2,yH=-2,vH=-2,wH=-2,_H=-2,EH=-2,TH=-2,IH=-2,xH=-2,bH=-2,SH=-2,kH=-2,AH=-2,NH=-2,PH=-2,CH=-2,RH=-2,DH=-2,jH=-2,OH=-2,VH=2,MH=-2,LH=-2,FH=-2,zH=-2,UH=-2,BH=-2,$H=-2,qH=-2,WH=-2,GH=-2,HH=-2,KH=-2,QH=-3,YH=-3,XH=-2,JH=-2,ZH=-2,eK=-2,tK=-2,nK=-1,sK=-1,rK=-2,iK=-2,oK=-2,aK=2,cK=2,lK=2,uK=2,dK=2,hK=-2,fK=-2,mK=-1,pK=-1,gK=-1,yK=-1,vK=-1,wK=-3,_K=-3,EK=-2,TK=-2,IK=-2,xK=-2,bK=-2,SK=-1,kK=-1,AK=-1,NK=-2,PK=-2,CK=-2,RK=-3,DK=-2,jK=1,OK=1,VK=-2,MK=-2,LK=-1,FK=-1,zK=-2,UK=-2,BK=-2,$K=-2,qK=-2,WK=-2,GK=-2,HK=-2,KK=-3,QK=-3,YK=-1,XK=-2,JK=-1,ZK=-2,eQ=-2,tQ=-2,nQ=2,sQ=-3,rQ=-2,iQ=2,oQ=2,aQ=2,cQ=1,lQ=4,uQ=-2,dQ=-2,hQ=2,fQ=2,mQ=2,pQ=2,gQ=3,yQ=3,vQ=2,wQ=2,_Q=-2,EQ=-2,TQ=-2,IQ=-2,xQ=-2,bQ=-3,SQ=-2,kQ=1,AQ=-2,NQ=2,PQ=2,CQ=2,RQ=-1,DQ=-1,jQ=2,OQ=2,VQ=2,MQ=2,LQ=2,FQ=2,zQ=2,UQ=2,BQ=2,$Q=2,qQ=-2,WQ=-2,GQ=2,HQ=1,KQ=1,QQ=1,YQ=3,XQ=2,JQ=2,ZQ=2,eY=2,tY=2,nY=2,sY=2,rY=2,iY=2,oY=-2,aY=-2,cY=-2,lY=-2,uY=-2,dY=3,hY=-2,fY=-2,mY=-2,pY=1,gY=1,yY=1,vY=2,wY=3,_Y=3,EY=1,TY=2,IY=-1,xY=-2,bY=-1,SY=-1,kY=-2,AY=-2,NY=-2,PY=-1,CY=-1,RY=2,DY=2,jY=2,OY=3,VY=4,MY=-1,LY=-1,FY=-1,zY=-1,UY=-1,BY=2,$Y=2,qY=-3,WY=-1,GY=-3,HY=-2,KY=-2,QY=-2,YY=-2,XY=-2,JY=-2,ZY=-2,eX=-2,tX=-2,nX=-2,sX=-2,rX=-2,iX=3,oX=3,aX=3,cX=3,lX=3,uX=3,dX=-1,hX=-2,fX=-1,mX=2,pX=-1,gX=-1,yX=-1,vX=-2,wX=3,_X=3,EX=3,TX=2,IX=2,xX=2,bX=2,SX=1,kX=1,AX=-2,NX=-2,PX=-2,CX=-2,RX=2,DX=-2,jX=-2,OX=-2,VX=-2,MX=1,LX=1,FX=-1,zX=-1,UX=-1,BX=-1,$X=3,qX=1,WX=-2,GX=-2,HX=4,KX=3,QX=3,YX=4,XX=4,JX=-2,ZX=-3,eJ=-3,tJ=-3,nJ=-2,sJ=-2,rJ=-2,iJ=-2,oJ=-2,aJ=-2,cJ=-2,lJ=2,uJ=2,dJ=1,hJ=3,fJ=-3,mJ=-3,pJ=-3,gJ=-3,yJ=-2,vJ=-1,wJ=-2,_J=-3,EJ=-3,TJ=1,IJ=-2,xJ=2,bJ=3,SJ=4,kJ=-1,AJ=3,NJ=3,PJ=3,CJ=3,RJ=3,DJ=-2,jJ=-2,OJ=-3,VJ=-3,MJ=-3,LJ=-2,FJ=-2,zJ=-2,UJ=-2,BJ=2,$J=2,qJ=2,WJ=2,GJ=2,HJ=2,KJ=2,QJ=2,YJ=2,XJ=2,JJ=2,ZJ=2,eZ=2,tZ=2,nZ=2,sZ=2,rZ=-2,iZ=-2,oZ=-2,aZ=-2,cZ=2,lZ=2,uZ=-2,dZ=-2,hZ=1,fZ=-3,mZ=-3,pZ=2,gZ=2,yZ=2,vZ=2,wZ=-2,_Z=-3,EZ=-2,TZ=-1,IZ=-2,xZ=2,bZ=-2,SZ=3,kZ=-2,AZ=-2,NZ=-2,PZ=1,CZ=1,RZ=-2,DZ=-2,jZ=2,OZ=-2,VZ=-3,MZ=2,LZ=2,FZ=-2,zZ=-1,UZ=-2,BZ=-2,$Z=-2,qZ=-2,WZ=2,GZ=2,HZ=2,KZ=-2,QZ=-2,YZ=-2,XZ=-1,JZ=-2,ZZ=-2,eee=-1,tee=-2,nee=-2,see=1,ree=-1,iee=-2,oee=-1,aee=1,cee=1,lee=-1,uee=-1,dee=2,hee=2,fee=2,mee=-3,pee=-1,gee=-4,yee=-4,vee=-4,wee=-4,_ee=-4,Eee=-4,Tee=-2,Iee=1,xee=2,bee=2,See=-3,kee=1,Aee=1,Nee=2,Pee=2,Cee=2,Ree=-2,Dee=-2,jee=-3,Oee=-2,Vee=2,Mee=-1,Lee=-2,Fee=-2,zee=-2,Uee=-2,Bee=-2,$ee=-2,qee=3,Wee=-4,Gee=-4,Hee=-4,Kee=-4,Qee=-4,Yee=-4,Xee=-4,Jee=-4,Zee=-4,ete=-3,tte=-4,nte=-4,ste=2,rte=2,ite=2,ote=2,ate=-2,cte=4,lte=-1,ute=-1,dte=2,hte=4,fte=4,mte=-3,pte=-2,gte=-2,yte=-2,vte=2,wte=2,_te=2,Ete=2,Tte=3,Ite=3,xte=3,bte=-1,Ste=3,kte=2,Ate=2,Nte=3,Pte=-2,Cte=-1,Rte=-2,Dte=2,jte=3,Ote=3,Vte=3,Mte=3,Lte=3,Fte=-1,zte=-2,Ute=2,Bte=2,$te=-2,qte=1,Wte=-3,Gte=4,Hte=2,Kte=3,Qte=3,Yte=1,Xte=3,Jte=3,Zte=-2,ene=-2,tne=1,nne=2,sne=3,rne=3,ine=1,one=1,ane=1,cne=1,lne=3,une=2,dne=-2,hne=-1,fne=-2,mne=3,pne=3,gne=3,yne=3,vne=-3,wne=-2,_ne=-3,Ene=-3,Tne=-3,Ine=-3,xne=1,bne=1,Sne=1,kne=2,Ane=1,Nne=-1,Pne=-2,Cne=-2,Rne=-2,Dne=2,jne=-2,One=-2,Vne=-2,Mne=-2,Lne=-2,Fne=1,zne=2,Une=2,Bne=-3,$ne=1,qne=-3,Wne=-3,Gne=-2,Hne=-2,Kne=-1,Qne=2,Yne=-1,Xne=3,Jne=3,Zne=3,ese=2,tse=2,nse=3,sse=1,rse=3,ise=-2,ose=-2,ase=3,cse=3,lse=3,use=-3,dse=-3,hse=-3,fse=-3,mse=-3,pse=-1,gse=2,yse=-2,vse=2,wse=-2,_se=-2,Ese=-2,Tse=-2,Ise=2,xse=2,bse=2,Sse=-2,kse=-2,Ase=-2,Nse=-2,Pse=-2,Cse=-2,Rse=-3,Dse=-3,jse=-3,Ose=-3,Vse=-3,Mse=-3,Lse=-3,Fse=-1,zse=-2,Use=1,Bse=-1,$se=-2,qse=-3,Wse=-2,Gse=2,Hse=-3,Kse=-3,Qse=3,Yse=-2,Xse=3,Jse=2,Zse=4,ere=-2,tre=2,nre=-4,sre=-2,rre=2,ire=2,ore=2,are=-2,cre=2,lre=2,ure=2,dre=3,hre=-2,fre=-2,mre=-1,pre=-1,gre=-3,yre=-1,vre=-1,wre=2,_re=2,Ere=-2,Tre=-2,Ire=-2,xre=-1,bre=-2,Sre=-2,kre=-2,Are=-2,Nre=2,Pre=2,Cre=2,Rre=2,Dre=2,jre=2,Ore=2,Vre=-2,Mre=-2,Lre=-2,Fre=2,zre=2,Ure=2,Bre=-2,$re=-2,qre=2,Wre=2,Gre=-3,Hre=-3,Kre=-3,Qre=-3,Yre=-3,Xre=-2,Jre=-2,Zre=-2,eie=2,tie=1,nie=2,sie=2,rie=1,iie=-2,oie=3,aie=-3,cie=-3,lie=2,uie=2,die=2,hie=2,fie=-2,mie=5,pie=-2,gie=-2,yie=-2,vie=-2,wie=-3,_ie=-3,Eie=-3,Tie=-3,Iie=-3,xie=-3,bie=-3,Sie=-2,kie=-2,Aie=-1,Nie=-2,Pie=-1,Cie=-2,Rie=-3,Die=-3,jie=-3,Oie=-2,Vie=-2,Mie=-2,Lie=-2,Fie=2,zie=-3,Uie=-1,Bie=2,$ie=1,qie=-2,Wie=-2,Gie=-2,Hie=-2,Kie=-2,Qie=-2,Yie=-3,Xie=-3,Jie=-2,Zie=-2,eoe=-2,toe=-2,noe=-2,soe=-2,roe=2,ioe=2,ooe=-1,aoe=-1,coe=-1,loe=-1,uoe=-2,doe=-2,hoe=3,foe=3,moe=3,poe=3,goe=-2,yoe=-2,voe=-2,woe=-2,_oe=2,Eoe=2,Toe=2,Ioe=2,xoe=2,boe=-2,Soe=-2,koe=-2,Aoe=-2,Noe=-2,Poe=-2,Coe=-2,Roe=-2,Doe=-2,joe=-2,Ooe=-2,Voe=-2,Moe=-2,Loe=-2,Foe=-2,zoe=-2,Uoe=-1,Boe=-2,$oe=-2,qoe=-2,Woe=-2,Goe=1,Hoe=1,Koe=-2,Qoe=2,Yoe=-2,Xoe=-2,Joe=-2,Zoe=-2,eae=-2,tae=-2,nae=-2,sae=-2,rae=-2,iae=-2,oae=-3,aae=-3,cae=-2,lae=-2,uae=-2,dae=-2,hae=-2,fae=-2,mae=-2,pae=-2,gae=-2,yae=-2,vae=2,wae=2,_ae=-2,Eae=-2,Tae=-2,Iae=-2,xae=-2,bae=-2,Sae=-2,kae=-2,Aae=-2,Nae=-2,Pae=-2,Cae=-2,Rae=-2,Dae=-2,jae=-2,Oae=-2,Vae=-2,Mae=2,Lae=-2,Fae=-2,zae=-2,Uae=-2,Bae=-2,$ae=-2,qae=-2,Wae=-2,Gae=-2,Hae=-1,Kae=-2,Qae=-2,Yae=-2,Xae=-2,Jae=-2,Zae=1,ece=1,tce=1,nce=2,sce=-2,rce=-2,ice=2,oce=-2,ace=-2,cce=-2,lce=-2,uce=-2,dce=-2,hce=-2,fce=-2,mce=-2,pce=2,gce=2,yce=2,vce=2,wce=2,_ce=3,Ece=-2,Tce=-2,Ice=-2,xce=-2,bce=-2,Sce=-2,kce=-2,Ace=2,Nce=2,Pce=2,Cce=1,Rce=1,Dce=2,jce=2,Oce=1,Vce=-2,Mce=-2,Lce=-2,Fce=-2,zce=-2,Uce=-2,Bce=2,$ce=-2,qce=-2,Wce=-2,Gce=-2,Hce=-2,Kce=-2,Qce=-2,Yce=2,Xce=1,Jce=-1,Zce=2,ele=1,tle=1,nle=2,sle=-3,rle=-1,ile=-1,ole=-1,ale=-2,cle=-2,lle=2,ule=2,dle=-2,hle=-2,fle=-2,mle=-1,ple=-1,gle=-3,yle=-3,vle=-3,wle=-3,_le=-1,Ele=-2,Tle=-4,Ile=-4,xle=-2,ble=2,Sle=-2,kle=-2,Ale=-2,Nle=-3,Ple=1,Cle=1,Rle=1,Dle=2,jle=1,Ole=2,Vle=2,Mle=2,Lle=2,Fle=3,zle=3,Ule=3,Ble=-2,$le=3,qle=3,Wle=-1,Gle=2,Hle=2,Kle=2,Qle=1,Yle=-3,Xle=-3,Jle=-2,Zle=-2,eue=-2,tue=-2,nue=-2,sue=-3,rue=-3,iue=-3,oue=-3,aue=2,cue=2,lue=2,uue=2,due=3,hue=-2,fue=-2,mue=-1,pue=-2,gue=-2,yue=-2,vue=-2,wue=2,_ue=-1,Eue=-1,Tue=1,Iue=1,xue=1,bue=1,Sue=1,kue=1,Aue=3,Nue=-2,Pue=-2,Cue=-1,Rue=1,Due=2,jue=-1,Oue=-1,Vue=-1,Mue=1,Lue=1,Fue=1,zue=-2,Uue=-2,Bue=-2,$ue=-2,que=-3,Wue=-3,Gue=-2,Hue=-2,Kue=-1,Que=4,Yue=1,Xue=2,Jue=2,Zue=2,ede=2,tde=2,nde=2,sde=2,rde=-1,ide=-1,ode=-1,ade=-1,cde=-2,lde=2,ude=-2,dde=4,hde=4,fde=-3,mde=-3,pde=-3,gde=-3,yde=-3,vde=-2,wde=-2,_de=-2,Ede=-2,Tde=-2,Ide=3,xde=4,bde=4,Sde=4,kde=-2,Ade=-2,Nde=-1,Pde=3,Cde=-1,Rde=-1,Dde=-1,jde=-1,Ode=3,Vde=3,Mde=-3,Lde=-3,Fde=-3,zde=-3,Ude=-3,Bde=-3,$de=-3,qde=-2,Wde=3,Gde=3,Hde=3,Kde=3,Qde=3,Yde=3,Xde=2,Jde=-1,Zde=3,ehe=3,the=3,nhe=3,she=3,rhe=3,ihe=-3,ohe=-2,ahe=-3,che=-3,lhe=-1,uhe=-1,dhe=-1,hhe=2,fhe=-2,mhe=-3,phe=-3,ghe=-3,yhe=-3,vhe=3,whe=-2,_he=-2,Ehe=-2,The=-1,Ihe=-1,xhe=-1,bhe=-1,She=-3,khe=3,Ahe=3,Nhe=3,Phe=4,Che=4,Rhe=1,Dhe=1,jhe=2,Ohe=2,Vhe=-2,Mhe=3,Lhe=-3,Fhe=1,zhe=-2,Uhe=1,Bhe=-2,$he=-2,qhe=-2,Whe=-2,Ghe=2,Hhe=3,Khe=3,Qhe=-2,Yhe=-2,Xhe=2,Jhe=2,Zhe=-2,efe=4,tfe=3,nfe=3,sfe=3,rfe=-2,ife=-2,ofe=-2,afe=-2,cfe=-3,lfe=-2,ufe=-1,dfe=-1,hfe=-2,ffe=-2,mfe=-2,pfe=-2,gfe=-2,yfe=-2,vfe=-2,wfe=-3,_fe=-3,Efe=-2,Tfe=-2,Ife=-2,xfe=-2,bfe=-2,Sfe=-2,kfe=-2,Afe=-3,Nfe=-3,Pfe=-3,Cfe=-3,Rfe=-2,Dfe=-2,jfe=-2,Ofe=-2,Vfe=-3,Mfe=-1,Lfe=-2,Ffe=-2,zfe=-2,Ufe=-2,Bfe=-2,$fe=-2,qfe=-2,Wfe=-2,Gfe=-2,Hfe=-2,Kfe=-2,Qfe=-2,Yfe=-2,Xfe=-2,Jfe=-2,Zfe=-2,eme=-2,tme=-2,nme=-2,sme=-2,rme=-2,ime=-2,ome=-2,ame=-2,cme=-2,lme=-2,ume=-2,dme=-2,hme=-2,fme=-2,mme=-2,pme=-2,gme=-2,yme=2,vme=2,wme=2,_me=2,Eme=-2,Tme=-2,Ime=-2,xme=-2,bme=-2,Sme=-1,kme=-1,Ame=-1,Nme=-1,Pme=-3,Cme=-5,Rme=-5,Dme=1,jme=2,Ome=2,Vme=1,Mme=-2,Lme=-2,Fme=-2,zme=-2,Ume=-2,Bme=-2,$me=-2,qme=-2,Wme=-2,Gme=-3,Hme=-3,Kme=-2,Qme=-2,Yme=-1,Xme=-2,Jme=-2,Zme=-2,epe=-3,tpe=1,npe=-2,spe=-2,rpe=-2,ipe=-2,ope=-2,ape=-2,cpe=-2,lpe=-1,upe=-2,dpe=-2,hpe=3,fpe=2,mpe=-5,ppe=-5,gpe=-1,ype=2,vpe=2,wpe=-1,_pe=-2,Epe=-2,Tpe=-2,Ipe=2,xpe=2,bpe=-2,Spe=2,kpe=-1,Ape=2,Npe=-3,Ppe=-2,Cpe=-2,Rpe=-3,Dpe=-2,jpe=-2,Ope=2,Vpe=-2,Mpe=-2,Lpe=-2,Fpe=-2,zpe=-2,Upe=-2,Bpe=-2,$pe=-2,qpe=-2,Wpe=-2,Gpe=-2,Hpe=-2,Kpe=-2,Qpe=-2,Ype=-2,Xpe=-2,Jpe=-2,Zpe=-2,ege=-2,tge=-2,nge=-2,sge=-1,rge=2,ige=3,oge=-2,age=2,cge=2,lge=-2,uge=-2,dge=-2,hge=-2,fge=2,mge=2,pge=-2,gge=-2,yge=-2,vge=-2,wge=-2,_ge=-2,Ege=-2,Tge=-2,Ige=-2,xge=-2,bge=-2,Sge=-2,kge=-3,Age=-3,Nge=-3,Pge=2,Cge=5,Rge=4,Dge=-1,jge=-1,Oge=-2,Vge=-2,Mge=-2,Lge=-2,Fge=-2,zge=-2,Uge=-2,Bge=-2,$ge=-2,qge=-2,Wge=-1,Gge=-2,Hge=-2,Kge=-2,Qge=-2,Yge=-2,Xge=-2,Jge=-2,Zge=-1,eye=-3,tye=-1,nye=-2,sye=-2,rye=-2,iye=-3,oye=-3,aye=-3,cye=3,lye=-1,uye=2,dye=2,hye=2,fye=2,mye=-1,pye=1,gye=2,yye=-1,vye=-1,wye=-2,_ye=-1,Eye=2,Tye=2,Iye=2,xye=-2,bye=-2,Sye=-2,kye=-2,Aye=-2,Nye=-1,Pye=3,Cye=2,Rye=3,Dye=3,jye=2,Oye=-2,Vye=-3,Mye=-2,Lye=-2,Fye=-2,zye=-2,Uye=-2,Bye=-2,$ye=-2,qye=-2,Wye=-2,Gye=-3,Hye=-2,Kye=-2,Qye=-2,Yye=-2,Xye=2,Jye=-2,Zye=2,eve=-1,tve=-2,nve=-2,sve=-2,rve=-4,ive=-4,ove=-3,ave=-2,cve=-1,lve=-2,uve=-3,dve=-3,hve=-3,fve=-3,mve=2,pve=3,gve=1,yve=3,vve=3,wve=3,_ve=-2,Eve=2,Tve=-2,Ive=-2,xve=-2,bve=-2,Sve=-2,kve=2,Ave=2,Nve=2,Pve=-2,Cve=-2,Rve=-2,Dve=-2,jve=-2,Ove=-2,Vve=-2,Mve=-2,Lve=-2,Fve=-2,zve=-2,Uve=3,Bve=3,$ve=2,qve=2,Wve=-2,Gve=-1,Hve=-1,Kve=-1,Qve=-1,Yve=-1,Xve=2,Jve=-2,Zve=3,ewe=3,twe=3,nwe=3,swe=1,rwe=1,iwe=1,owe=-2,awe=-2,cwe=-2,lwe=1,uwe=-1,dwe=-2,hwe=-1,fwe=-1,mwe=-1,pwe=1,gwe=-1,ywe=-1,vwe=-1,wwe=-1,_we=-5,Ewe=-2,Twe=-2,Iwe=-2,xwe=2,bwe=2,Swe=-2,kwe=-2,Awe=2,Nwe=2,Pwe=-2,Cwe=2,Rwe=2,Dwe=-1,jwe=-1,Owe=2,Vwe=1,Mwe=1,Lwe=1,Fwe=1,zwe=1,Uwe=1,Bwe=1,$we=1,qwe=-2,Wwe=-1,Gwe=-2,Hwe=-1,Kwe=-1,Qwe=1,Ywe=1,Xwe=3,Jwe=3,Zwe=1,e_e=1,t_e=-2,n_e=-2,s_e=-2,r_e=-2,i_e=2,o_e=2,a_e=-1,c_e=-1,l_e=-1,u_e=-1,d_e=2,h_e=-3,f_e=-2,m_e=-2,p_e=-2,g_e=-2,y_e=-2,v_e=-2,w_e=1,__e=1,E_e=2,T_e=-1,I_e=-2,x_e=-2,b_e=2,S_e=2,k_e=-2,A_e=-1,N_e=-1,P_e=-3,C_e=-3,R_e=-3,D_e=-2,j_e=-2,O_e=-1,V_e=-3,M_e=-3,L_e=-3,F_e=-3,z_e=-4,U_e=-4,B_e=-4,$_e=2,q_e=2,W_e=2,G_e=4,H_e=-2,K_e=2,Q_e=1,Y_e=1,X_e=1,J_e=1,Z_e=1,e2e=1,t2e=1,n2e=2,s2e=-2,r2e=-2,i2e=-2,o2e=-2,a2e=-2,c2e=2,l2e=2,u2e=2,d2e=2,h2e=2,f2e=1,m2e=1,p2e=1,g2e=2,y2e=-2,v2e=-2,w2e=-2,_2e=-2,E2e=-2,T2e=-2,I2e=-2,x2e=-2,b2e=-2,S2e=1,k2e=-1,A2e=-1,N2e=-1,P2e=-2,C2e=-1,R2e=4,D2e=4,j2e=4,O2e=4,V2e=2,M2e=-1,L2e=2,F2e=2,z2e=2,U2e=2,B2e=1,$2e=2,q2e=1,W2e=2,G2e=2,H2e=2,K2e=-2,Q2e=-2,Y2e=-2,X2e=-2,J2e=-2,Z2e=-2,e0e=-2,t0e=-2,n0e=-1,s0e=-2,r0e=-2,i0e=2,o0e=2,a0e=2,c0e=-2,l0e=-1,u0e=-1,d0e=-1,h0e=-1,f0e=2,m0e=2,p0e=2,g0e=2,y0e=2,v0e=2,w0e=2,_0e=2,E0e=2,T0e=1,I0e=2,x0e=2,b0e=2,S0e=-2,k0e=1,A0e=1,N0e=1,P0e=1,C0e=-2,R0e=-2,D0e=-2,j0e=-2,O0e=-1,V0e=-2,M0e=-1,L0e=-2,F0e=-2,z0e=-1,U0e=-2,B0e=-2,$0e=2,q0e=2,W0e=2,G0e=-2,H0e=2,K0e=2,Q0e=2,Y0e=2,X0e=2,J0e=2,Z0e=-3,e1e=-1,t1e=-1,n1e=2,s1e=2,r1e=2,i1e=3,o1e=3,a1e=-2,c1e=-2,l1e=1,u1e=1,d1e=-2,h1e=-2,f1e=-2,m1e=3,p1e=-2,g1e=-2,y1e=-2,v1e=-2,w1e=-2,_1e=2,E1e=4,T1e=4,I1e=4,x1e=2,b1e=2,S1e=2,k1e=1,A1e=4,N1e=4,P1e=4,C1e=-3,R1e=-2,D1e=-2,j1e=-2,O1e=-2,V1e=-2,M1e=-2,L1e=-2,F1e=-2,z1e=-2,U1e=-2,B1e=1,$1e=1,q1e=2,W1e=1,G1e=1,H1e=2,K1e=2,Q1e=2,Y1e=2,X1e=2,J1e=-1,Z1e=-2,eEe=2,tEe=-2,nEe=-2,sEe=2,rEe=2,iEe=1,oEe=-2,aEe=-2,cEe=-3,lEe=-3,uEe=-3,dEe=-2,hEe=-2,fEe=-2,mEe=-2,pEe=-2,gEe=-2,yEe=-2,vEe=-2,wEe=-2,_Ee=3,EEe=-2,TEe=-2,IEe=-2,xEe=-2,bEe=-2,SEe=-2,kEe=-2,AEe=-3,NEe=-4,PEe=2,CEe=2,REe=2,DEe=2,jEe=2,OEe=-2,VEe=-2,MEe=-1,LEe=-3,FEe=-3,zEe=-2,UEe=-2,BEe=-2,$Ee=-2,qEe=2,WEe=1,GEe=1,HEe=-2,KEe=-2,QEe=-2,YEe=-2,XEe=3,JEe=-2,ZEe=-2,eTe=-2,tTe=-2,nTe=1,sTe=1,rTe=1,iTe=-2,oTe=-4,aTe=-4,cTe=-3,lTe=-2,uTe=-2,dTe=-2,hTe=-2,fTe=-2,mTe=-1,pTe=-2,gTe=-2,yTe=-4,vTe=-1,wTe=-2,_Te=-2,ETe=-2,TTe=1,ITe=1,xTe=-1,bTe=-1,STe=1,kTe=-2,ATe=2,NTe=2,PTe=2,CTe=2,RTe=-3,DTe=-2,jTe=-2,OTe=-2,VTe=-2,MTe=-2,LTe=-2,FTe=-2,zTe=-2,UTe=-2,BTe=-2,$Te=-2,qTe=-2,WTe=-3,GTe=-3,HTe=-3,KTe=-2,QTe=2,YTe=2,XTe=2,JTe=-1,ZTe=-2,eIe=-2,tIe=-1,nIe=-5,sIe=1,rIe=2,iIe=2,oIe=-2,aIe=2,cIe=2,lIe=2,uIe=2,dIe=-2,hIe=-2,fIe=-2,mIe=-2,pIe=-2,gIe=-1,yIe=-2,vIe=-2,wIe=-2,_Ie=-2,EIe=-2,TIe=-2,IIe=-2,xIe=-2,bIe=1,SIe=-1,kIe=2,AIe=2,NIe=2,PIe=2,CIe=2,RIe=2,DIe=1,jIe=1,OIe=1,VIe=1,MIe=1,LIe=1,FIe=-2,zIe=3,UIe=3,BIe=3,$Ie=2,qIe=-1,WIe=-2,GIe=-2,HIe=-1,KIe=1,QIe=-2,YIe=-3,XIe=-3,JIe=-2,ZIe=1,exe=3,txe=3,nxe=3,sxe=2,rxe=-2,ixe=1,oxe=2,axe=-2,cxe=-2,lxe=3,uxe=-2,dxe=-2,hxe=2,fxe=2,mxe=-2,pxe=-2,gxe=-2,yxe=-2,vxe=-1,wxe=-2,_xe=-2,Exe=2,Txe=-2,Ixe=-2,xxe=-2,bxe=-2,Sxe=2,kxe=-2,Axe=-2,Nxe=-2,Pxe=3,Cxe=-2,Rxe=-2,Dxe=-2,jxe=-2,Oxe=2,Vxe=-2,Mxe=-2,Lxe=-2,Fxe=-2,zxe=-2,Uxe=-1,Bxe=1,$xe=1,qxe=1,Wxe=2,Gxe=-2,Hxe=-2,Kxe=-2,Qxe=-2,Yxe=-2,Xxe=-2,Jxe=-2,Zxe=-2,ebe=-2,tbe=-1,nbe=-1,sbe=-1,rbe=-1,ibe=2,obe=1,abe=-1,cbe=-1,lbe=-2,ube=2,dbe=2,hbe=2,fbe=2,mbe=2,pbe=2,gbe=-1,ybe=-2,vbe=-2,wbe=-2,_be=-2,Ebe=-1,Tbe=-2,Ibe=-1,xbe=2,bbe=2,Sbe=2,kbe=-1,Abe=-2,Nbe=-2,Pbe=-2,Cbe=-2,Rbe=-2,Dbe=-2,jbe=-2,Obe=4,Vbe=-2,Mbe=-3,Lbe=-2,Fbe=2,zbe=-2,Ube=1,Bbe=1,$be=-2,qbe=3,Wbe=3,Gbe=3,Hbe=3,Kbe=2,Qbe=3,Ybe=3,Xbe=-3,Jbe=-3,Zbe=-2,eSe=-2,tSe=-2,nSe=-2,sSe=-2,rSe=-2,iSe=-2,oSe=-2,aSe=-2,cSe=-2,lSe=-2,uSe=-2,dSe=-2,hSe=-2,fSe=2,mSe=2,pSe=-2,gSe=-2,ySe=-2,vSe=2,wSe=5,_Se=2,ESe=2,TSe=2,ISe=1,xSe=1,bSe=1,SSe=2,kSe=2,ASe=4,NSe=2,PSe=2,CSe=2,RSe=-1,DSe=-1,jSe=-1,OSe=-1,VSe=-1,MSe=-1,LSe=-2,FSe=1,zSe=2,USe=2,BSe=-2,$Se=-2,qSe=-2,WSe=2,GSe=3,HSe=3,KSe=2,QSe=2,YSe=-3,XSe=-3,JSe=-3,ZSe=2,eke=2,tke=-2,nke=-2,ske=2,rke=-2,ike=-2,oke=-2,ake=-2,cke=-2,lke=2,uke=2,dke=-2,hke=-1,fke=-3,mke=-3,pke=4,gke=4,yke=-3,vke=-3,wke=-2,_ke=-2,Eke=-3,Tke=-3,Ike=-3,xke=2,bke=2,Ske=2,kke=-2,Ake=2,Nke=-2,Pke=-2,Cke=-2,Rke=-2,Dke=-2,jke=-2,Oke=-2,Vke=5,Mke=-2,Lke=-2,Fke=-2,zke=-2,Uke=-2,Bke=-2,$ke=-2,qke=-2,Wke=2,Gke=2,Hke=-2,Kke=2,Qke=2,Yke=-2,Xke=-4,Jke=-4,Zke=-4,eAe=-4,tAe=-2,nAe=-2,sAe=-2,rAe=-2,iAe=-2,oAe=-2,aAe=-3,cAe=-2,lAe=-2,uAe=-2,dAe=2,hAe=-2,fAe=-2,mAe=-2,pAe=-2,gAe=-1,yAe=-2,vAe=-1,wAe=-3,_Ae=-3,EAe=-2,TAe=-3,IAe=-3,xAe=2,bAe=2,SAe=-2,kAe=-2,AAe=-2,NAe=-2,PAe=-2,CAe=2,RAe=-2,DAe=-2,jAe=4,OAe=4,VAe=-2,MAe=-2,LAe=-2,FAe=-2,zAe=-2,UAe=1,BAe=2,$Ae=1,qAe=-2,WAe=-5,GAe=-3,HAe=-3,KAe=-3,QAe=-3,YAe=-3,XAe=2,JAe=-2,ZAe=-3,eNe=-3,tNe=-2,nNe=-2,sNe=-2,rNe=-2,iNe=-2,oNe=-2,aNe=-1,cNe=-2,lNe=-2,uNe=-2,dNe=-1,hNe=-1,fNe=2,mNe=-1,pNe=-1,gNe=-2,yNe=-2,vNe=-1,wNe=-1,_Ne=-1,ENe=-1,TNe=-2,INe=-1,xNe=-1,bNe=-1,SNe=-1,kNe=-2,ANe=-2,NNe=-2,PNe=-2,CNe=-2,RNe=-2,DNe=-2,jNe=-2,ONe=-2,VNe=-2,MNe=-2,LNe=-1,FNe=-2,zNe=-1,UNe=2,BNe=-2,$Ne=-2,qNe=-2,WNe=-2,GNe=-2,HNe=-2,KNe=-2,QNe=-3,YNe=-2,XNe=-2,JNe=-2,ZNe=-2,ePe=-3,tPe=-2,nPe=-2,sPe=-2,rPe=-2,iPe=1,oPe=-2,aPe=-2,cPe=-2,lPe=-2,uPe=-2,dPe=-2,hPe=1,fPe=-2,mPe=-1,pPe=-2,gPe=-2,yPe=1,vPe=-2,wPe=-2,_Pe=-2,EPe=-2,TPe=-2,IPe=-2,xPe=1,bPe=-2,SPe=-2,kPe=-2,APe=-2,NPe=-2,PPe=-2,CPe=2,RPe=-1,DPe=-1,jPe=-2,OPe=-2,VPe=-2,MPe=2,LPe=-2,FPe=-2,zPe=-2,UPe=-1,BPe=2,$Pe=-2,qPe=-2,WPe=-2,GPe=2,HPe=-3,KPe=-2,QPe=-2,YPe=-2,XPe=-2,JPe=-1,ZPe=2,eCe=2,tCe=-2,nCe=-2,sCe=-2,rCe=1,iCe=1,oCe=1,aCe=1,cCe=-2,lCe=-1,uCe=-1,dCe=1,hCe=-2,fCe=-2,mCe=3,pCe=-2,gCe=-3,yCe=-3,vCe=-3,wCe=-3,_Ce=-3,ECe=-3,TCe=-3,ICe=3,xCe=3,bCe=3,SCe=3,kCe=3,ACe=3,NCe=-3,PCe=2,CCe=2,RCe=2,DCe=2,jCe=-2,OCe=-2,VCe=-2,MCe=-2,LCe=-2,FCe=-2,zCe=-3,UCe=-3,BCe=-3,$Ce=2,qCe=-2,WCe=1,GCe=3,HCe=1,KCe=1,QCe=3,YCe=1,XCe=-3,JCe=3,ZCe=2,eRe=-1,tRe=-3,nRe=-3,sRe=-3,rRe=-3,iRe=-2,oRe=-2,aRe=-2,cRe=-2,lRe=-3,uRe=1,dRe=-2,hRe=-2,fRe=1,mRe=2,pRe=2,gRe=2,yRe=-2,vRe=-2,wRe=-3,_Re=-3,ERe=-2,TRe=-1,IRe=-2,xRe=-2,bRe=-1,SRe=-2,kRe=-2,ARe=-2,NRe=-2,PRe=3,CRe=2,RRe=2,DRe=-2,jRe=-2,ORe=-2,VRe=-2,MRe=2,LRe=2,FRe=2,zRe=1,URe=-3,BRe=-4,$Re=-2,qRe=-1,WRe=2,GRe=4,HRe=4,KRe=4,QRe=4,YRe=3,XRe=1,JRe=1,ZRe=1,eDe=1,tDe=-3,nDe=2,sDe=-2,rDe=-3,iDe=3,oDe=4,aDe=4,cDe=3,lDe=3,uDe=4,dDe=4,hDe=-1,fDe=-3,mDe=-3,pDe=-3,gDe=-3,yDe=-3,vDe=-3,wDe=-3,_De=-3,EDe=-3,TDe=3,IDe=-3,xDe=2,bDe=-2,SDe=2,kDe=4,ADe=4,NDe=4,PDe=-3,CDe=-2,RDe=-2,DDe=-2,jDe=-2,ODe=-2,VDe=-2,MDe=-2,LDe=-2,FDe=-2,zDe=-4,UDe=-4,BDe=-4,$De=3,qDe=3,WDe=4,GDe=4,HDe=1,KDe=1,QDe=2,YDe=1,XDe=2,JDe=-2,ZDe=3,eje=-2,tje=-2,nje=2,sje={abandon:DO,abandoned:jO,abandons:OO,abducted:VO,abduction:MO,abductions:LO,abhor:FO,abhorred:zO,abhorrent:UO,abhors:BO,abilities:$O,ability:qO,aboard:WO,aborted:GO,aborts:HO,absentee:KO,absentees:QO,absolve:YO,absolved:XO,absolves:JO,absolving:ZO,absorbed:eV,abuse:tV,abused:nV,abuses:sV,abusing:rV,abusive:iV,accept:oV,acceptable:aV,acceptance:cV,accepted:lV,accepting:uV,accepts:dV,accessible:hV,accident:fV,accidental:mV,accidentally:pV,accidents:gV,acclaim:yV,acclaimed:vV,accolade:wV,accomplish:_V,accomplished:EV,accomplishes:TV,accomplishment:IV,accomplishments:xV,accusation:bV,accusations:SV,accuse:kV,accused:AV,accuses:NV,accusing:PV,ache:CV,achievable:RV,aching:DV,acquit:jV,acquits:OV,acquitted:VV,acquitting:MV,acrimonious:LV,active:FV,adequate:zV,admire:UV,admired:BV,admires:$V,admiring:qV,admit:WV,admits:GV,admitted:HV,admonish:KV,admonished:QV,adopt:YV,adopts:XV,adorable:JV,adoration:ZV,adore:eM,adored:tM,adores:nM,adoring:sM,adoringly:rM,advanced:iM,advantage:oM,advantageous:aM,advantageously:cM,advantages:lM,adventure:uM,adventures:dM,adventurous:hM,adversary:fM,advisable:mM,affected:pM,affection:gM,affectionate:yM,affectionateness:vM,afflicted:wM,affordable:_M,affronted:EM,aficionados:TM,afraid:IM,aggravate:xM,aggravated:bM,aggravates:SM,aggravating:kM,aggression:AM,aggressions:NM,aggressive:PM,aggressiveness:CM,aghast:RM,agog:DM,agonise:jM,agonised:OM,agonises:VM,agonising:MM,agonize:LM,agonized:FM,agonizes:zM,agonizing:UM,agree:BM,agreeable:$M,agreed:qM,agreement:WM,agrees:GM,alarm:HM,alarmed:KM,alarmist:QM,alarmists:YM,alas:XM,alert:JM,alienation:ZM,alive:eL,allegation:tL,allegations:nL,allergic:sL,allow:rL,ally:iL,alone:oL,altruistic:aL,amaze:cL,amazed:lL,amazes:uL,amazing:dL,ambitious:hL,ambivalent:fL,amicable:mL,amuse:pL,amused:gL,amusement:yL,amusements:vL,anger:wL,angered:_L,angers:EL,angry:TL,anguish:IL,anguished:xL,animosity:bL,annoy:SL,annoyance:kL,annoyed:AL,annoying:NL,annoys:PL,antagonistic:CL,anti:RL,anticipation:DL,anxiety:jL,anxious:OL,apathetic:VL,apathy:ML,apeshit:LL,apocalyptic:FL,apologise:zL,apologised:UL,apologises:BL,apologising:$L,apologize:qL,apologized:WL,apologizes:GL,apologizing:HL,apology:KL,appalled:QL,appalling:YL,appealing:XL,appease:JL,appeased:ZL,appeases:e4,appeasing:t4,applaud:n4,applauded:s4,applauding:r4,applauds:i4,applause:o4,appreciate:a4,appreciated:c4,appreciates:l4,appreciating:u4,appreciation:d4,apprehensive:h4,appropriate:f4,appropriately:m4,approval:p4,approved:g4,approves:y4,ardent:v4,arrest:w4,arrested:_4,arrests:E4,arrogant:T4,arsehole:I4,ashame:x4,ashamed:b4,ass:S4,assassination:k4,assassinations:A4,assault:N4,assaults:P4,asset:C4,assets:R4,assfucking:D4,asshole:j4,astonished:O4,astound:V4,astounded:M4,astounding:L4,astoundingly:F4,astounds:z4,atrocious:U4,atrocity:B4,attack:$4,attacked:q4,attacking:W4,attacks:G4,attract:H4,attracted:K4,attracting:Q4,attraction:Y4,attractions:X4,attractive:J4,attractively:Z4,attractiveness:eF,attracts:tF,audacious:nF,aura:sF,authority:rF,avenge:iF,avenged:oF,avenger:aF,avengers:cF,avenges:lF,avenging:uF,avert:dF,averted:hF,averts:fF,avid:mF,avoid:pF,avoided:gF,avoids:yF,await:-1,awaited:vF,awaits:wF,award:_F,awarded:EF,awards:TF,awesome:IF,awful:xF,awkward:bF,axe:SF,axed:kF,backed:AF,backing:NF,backs:PF,bad:CF,"bad luck":-2,badass:RF,badly:DF,badness:jF,bailout:OF,balanced:VF,bamboozle:MF,bamboozled:LF,bamboozles:FF,ban:zF,banish:UF,bankrupt:BF,bankruptcy:$F,bankster:qF,banned:WF,barbarian:GF,barbaric:HF,barbarous:KF,bargain:QF,barrier:YF,bastard:XF,bastards:JF,battle:ZF,battled:ez,battles:tz,battling:nz,beaten:sz,beatific:rz,beating:iz,beauties:oz,beautiful:az,beautifully:cz,beautify:lz,beauty:uz,befit:dz,befitting:hz,belittle:fz,belittled:mz,beloved:pz,benefactor:gz,benefactors:yz,benefit:vz,benefits:wz,benefitted:_z,benefitting:Ez,benevolent:Tz,bereave:Iz,bereaved:xz,bereaves:bz,bereaving:Sz,best:kz,"best damn":4,betray:Az,betrayal:Nz,betrayed:Pz,betraying:Cz,betrays:Rz,better:Dz,bias:jz,biased:Oz,big:Vz,bitch:Mz,bitches:Lz,bitter:Fz,bitterest:zz,bitterly:Uz,bizarre:Bz,blackmail:$z,blackmailed:qz,blackmailing:Wz,blackmails:Gz,blah:Hz,blame:Kz,blamed:Qz,blames:Yz,blaming:Xz,bless:Jz,blesses:Zz,blessing:e5,blessings:t5,blind:n5,bliss:s5,blissful:r5,blithe:i5,bloated:o5,block:a5,blockade:c5,blockbuster:l5,blocked:u5,blocking:d5,blocks:h5,bloody:f5,blurry:m5,boastful:p5,bold:g5,boldly:y5,bomb:v5,boost:w5,boosted:_5,boosting:E5,boosts:T5,bore:I5,bored:x5,boring:b5,bother:S5,bothered:k5,bothers:A5,bothersome:N5,boycott:P5,boycotted:C5,boycotting:R5,boycotts:D5,brainwashing:j5,brave:O5,braveness:V5,bravery:M5,bravura:L5,breach:F5,breached:z5,breaches:U5,breaching:B5,breakthrough:$5,breathtaking:q5,bribe:W5,bribed:G5,bribes:H5,bribing:K5,bright:Q5,brightest:Y5,brightness:X5,brilliant:J5,brilliance:Z5,brilliances:e6,brisk:t6,broke:n6,broken:s6,brooding:r6,brutal:i6,brutally:o6,bullied:a6,bullshit:c6,bully:l6,bullying:u6,bummer:d6,buoyant:h6,burden:f6,burdened:m6,burdening:p6,burdens:g6,burglar:y6,burglary:v6,calm:w6,calmed:_6,calming:E6,calms:T6,"can't stand":-3,cancel:I6,cancelled:x6,cancelling:b6,cancels:S6,cancer:k6,capabilities:A6,capability:N6,capable:P6,captivated:C6,care:R6,carefree:D6,careful:j6,carefully:O6,carefulness:V6,careless:M6,cares:L6,caring:F6,"cashing in":-2,casualty:z6,catastrophe:U6,catastrophic:B6,cautious:$6,celebrate:q6,celebrated:W6,celebrates:G6,celebrating:H6,celebration:K6,celebrations:Q6,censor:Y6,censored:X6,censors:J6,certain:Z6,chagrin:eU,chagrined:tU,challenge:nU,champion:sU,championed:rU,champions:iU,chance:oU,chances:aU,chaos:cU,chaotic:lU,charged:uU,charges:dU,charisma:hU,charitable:fU,charm:mU,charming:pU,charmingly:gU,charmless:yU,chastise:vU,chastised:wU,chastises:_U,chastising:EU,cheat:TU,cheated:IU,cheater:xU,cheaters:bU,cheating:SU,cheats:kU,cheer:AU,cheered:NU,cheerful:PU,cheerfully:CU,cheering:RU,cheerless:DU,cheers:jU,cheery:OU,cherish:VU,cherished:MU,cherishes:LU,cherishing:FU,chic:zU,chide:UU,chided:BU,chides:$U,chiding:qU,childish:WU,chilling:GU,choke:HU,choked:KU,chokes:QU,choking:YU,clarifies:XU,clarity:JU,clash:ZU,classy:e9,clean:t9,cleaner:n9,clear:s9,cleared:r9,clearly:i9,clears:o9,clever:a9,clouded:c9,clueless:l9,cock:u9,cocksucker:d9,cocksuckers:h9,cocky:f9,coerced:m9,coercion:p9,collapse:g9,collapsed:y9,collapses:v9,collapsing:w9,collide:_9,collides:E9,colliding:T9,collision:I9,collisions:x9,colluding:b9,combat:S9,combats:k9,comedy:A9,comfort:N9,comfortable:P9,comfortably:C9,comforting:R9,comforts:D9,comic:j9,commend:O9,commended:V9,commit:M9,commitment:L9,commits:F9,committed:z9,committing:U9,compassion:B9,compassionate:$9,compelled:q9,competencies:W9,competent:G9,competitive:H9,complacent:K9,complain:Q9,complained:Y9,complaining:X9,complains:J9,complaint:Z9,complaints:eB,complicating:tB,compliment:nB,complimented:sB,compliments:rB,comprehensive:iB,concerned:oB,conciliate:aB,conciliated:cB,conciliates:lB,conciliating:uB,condemn:dB,condemnation:hB,condemned:fB,condemns:mB,confidence:pB,confident:gB,confidently:yB,conflict:vB,conflicting:wB,conflictive:_B,conflicts:EB,confuse:TB,confused:IB,confusing:xB,congrats:bB,congratulate:SB,congratulation:kB,congratulations:AB,consent:NB,consents:PB,consolable:CB,conspiracy:RB,constipation:DB,constrained:jB,contagion:OB,contagions:VB,contagious:MB,contaminant:LB,contaminants:FB,contaminate:zB,contaminated:UB,contaminates:BB,contaminating:$B,contamination:qB,contaminations:WB,contempt:GB,contemptible:HB,contemptuous:KB,contemptuously:QB,contend:YB,contender:XB,contending:JB,contentious:ZB,contestable:e$,controversial:t$,controversially:n$,controversies:s$,controversy:r$,convicted:i$,convince:o$,convinced:a$,convinces:c$,convivial:l$,cool:u$,"cool stuff":3,cornered:d$,corpse:h$,corrupt:f$,corrupted:m$,corrupting:p$,corruption:g$,corrupts:y$,costly:v$,courage:w$,courageous:_$,courageously:E$,courageousness:T$,courteous:I$,courtesy:x$,"cover-up":-3,coward:b$,cowardly:S$,coziness:k$,cramp:A$,crap:N$,crappy:P$,crash:C$,crazier:R$,craziest:D$,crazy:j$,creative:O$,crestfallen:V$,cried:M$,cries:L$,crime:F$,crimes:z$,criminal:U$,criminals:B$,criminate:$$,criminated:q$,criminates:W$,crisis:G$,critic:H$,criticise:K$,criticised:Q$,criticises:Y$,criticising:X$,criticism:J$,criticize:Z$,criticized:eq,criticizes:tq,criticizing:nq,critics:sq,critique:rq,crowding:iq,crude:oq,cruel:aq,cruelty:cq,crush:lq,crushed:uq,crushes:dq,crushing:hq,cry:fq,crying:mq,cunning:pq,cunt:gq,curious:yq,curse:vq,cut:wq,cutback:_q,cutbacks:Eq,cute:Tq,cuts:Iq,cutting:xq,cynic:bq,cynical:Sq,cynicism:kq,damage:Aq,damaged:Nq,damages:Pq,damaging:Cq,damn:Rq,"damn cute":3,"damn good":4,damned:Dq,damnit:jq,danger:Oq,dangerous:Vq,dangerously:Mq,daredevil:Lq,daring:Fq,darkest:zq,darkness:Uq,dauntless:Bq,dazzling:$q,dead:qq,deadening:Wq,deadlock:Gq,deadly:Hq,deafening:Kq,dear:Qq,dearly:Yq,death:Xq,deaths:Jq,debonair:Zq,debt:e8,deceit:t8,deceitful:n8,deceive:s8,deceived:r8,deceives:i8,deceiving:o8,deception:a8,deceptive:c8,decisive:l8,dedicated:u8,dedication:d8,defeat:h8,defeated:f8,defect:m8,defective:p8,defects:g8,defender:y8,defenders:v8,defenseless:w8,defer:_8,deferring:E8,defiant:T8,deficient:I8,deficiency:x8,deficiencies:b8,deficit:S8,deformed:k8,deformities:A8,deformity:N8,defraud:P8,defrauds:C8,deft:R8,defunct:D8,degrade:j8,degraded:O8,degrades:V8,dehumanize:M8,dehumanized:L8,dehumanizes:F8,dehumanizing:z8,deject:U8,dejected:B8,dejecting:$8,dejects:q8,delay:W8,delayed:G8,delectable:H8,delicious:K8,delight:Q8,delighted:Y8,delightful:X8,delightfully:J8,delighting:Z8,delights:eW,demand:tW,demanded:nW,demanding:sW,demands:rW,demonstration:iW,demoralize:oW,demoralized:aW,demoralizes:cW,demoralizing:lW,denial:uW,denials:dW,denied:hW,denier:fW,deniers:mW,denies:pW,denounce:gW,denounces:yW,dent:vW,deny:wW,denying:_W,deplore:EW,deplored:TW,deplores:IW,deploring:xW,deport:bW,deported:SW,deporting:kW,deports:AW,deportation:NW,deportations:PW,depressed:CW,depressing:RW,deprivation:DW,derail:jW,derailed:OW,derails:VW,derelict:MW,deride:LW,derided:FW,derides:zW,deriding:UW,derision:BW,desirable:$W,desire:qW,desired:WW,desirous:GW,despair:HW,despairing:KW,despairs:QW,desperate:YW,desperately:XW,despondent:JW,destroy:ZW,destroyed:e7,destroying:t7,destroys:n7,destruction:s7,destructive:r7,detached:i7,detain:o7,detained:a7,detention:c7,deteriorate:l7,deteriorated:u7,deteriorates:d7,deteriorating:h7,determined:f7,deterrent:m7,detract:p7,detracted:g7,detracts:y7,devastate:v7,devastated:w7,devastating:_7,devastation:E7,devastations:T7,devoted:I7,devotion:x7,devotional:b7,diamond:S7,dick:k7,dickhead:A7,die:N7,died:P7,difficult:C7,diffident:R7,dignity:D7,dilemma:j7,dilligence:O7,dipshit:V7,dire:M7,direful:L7,dirt:F7,dirtier:z7,dirtiest:U7,dirty:B7,disabilities:$7,disability:q7,disabling:W7,disadvantage:G7,disadvantaged:H7,disagree:K7,disagreeable:Q7,disagreement:Y7,disappear:X7,disappeared:J7,disappears:Z7,disappoint:eG,disappointed:tG,disappointing:nG,disappointment:sG,disappointments:rG,disappoints:iG,disapproval:oG,disapprovals:aG,disapprove:cG,disapproved:lG,disapproves:uG,disapproving:dG,disaster:hG,disasters:fG,disastrous:mG,disbelieve:pG,discard:gG,discarded:yG,discarding:vG,discards:wG,discernment:_G,discomfort:EG,disconsolate:TG,disconsolation:IG,discontented:xG,discord:bG,discounted:SG,discouraged:kG,discredited:AG,discriminate:NG,discriminated:PG,discriminates:CG,discriminating:RG,discriminatory:DG,disdain:jG,disease:OG,diseases:VG,disgrace:MG,disgraced:LG,disguise:FG,disguised:zG,disguises:UG,disguising:BG,disgust:$G,disgusted:qG,disgustful:WG,disgusting:GG,disheartened:HG,dishonest:KG,disillusioned:QG,disinclined:YG,disjointed:XG,dislike:JG,disliked:ZG,dislikes:eH,dismal:tH,dismayed:nH,dismissed:sH,disorder:rH,disorders:iH,disorganized:oH,disoriented:aH,disparage:cH,disparaged:lH,disparages:uH,disparaging:dH,displeased:hH,displeasure:fH,disproportionate:mH,dispute:pH,disputed:gH,disputes:yH,disputing:vH,disqualified:wH,disquiet:_H,disregard:EH,disregarded:TH,disregarding:IH,disregards:xH,disrespect:bH,disrespected:SH,disrupt:kH,disrupted:AH,disrupting:NH,disruption:PH,disruptions:CH,disruptive:RH,disrupts:DH,dissatisfied:jH,distasteful:OH,distinguished:VH,distort:MH,distorted:LH,distorting:FH,distorts:zH,distract:UH,distracted:BH,distraction:$H,distracts:qH,distress:WH,distressed:GH,distresses:HH,distressing:KH,distrust:QH,distrustful:YH,disturb:XH,disturbed:JH,disturbing:ZH,disturbs:eK,dithering:tK,diverting:nK,dizzy:sK,dodging:rK,dodgy:iK,"does not work":-3,dolorous:oK,donate:aK,donated:cK,donates:lK,donating:uK,donation:dK,"dont like":-2,doom:hK,doomed:fK,doubt:mK,doubted:pK,doubtful:gK,doubting:yK,doubts:vK,douche:wK,douchebag:_K,dour:EK,downcast:TK,downer:IK,downhearted:xK,downside:bK,drag:SK,dragged:kK,drags:AK,drained:NK,dread:PK,dreaded:CK,dreadful:RK,dreading:DK,dream:jK,dreams:OK,dreary:VK,droopy:MK,drop:LK,dropped:FK,drown:zK,drowned:UK,drowns:BK,drudgery:$K,drunk:qK,dubious:WK,dud:GK,dull:HK,dumb:KK,dumbass:QK,dump:YK,dumped:XK,dumps:JK,dupe:ZK,duped:eQ,dupery:tQ,durable:nQ,dying:sQ,dysfunction:rQ,eager:iQ,earnest:oQ,ease:aQ,easy:cQ,ecstatic:lQ,eerie:uQ,eery:dQ,effective:hQ,effectively:fQ,effectiveness:mQ,effortlessly:pQ,elated:gQ,elation:yQ,elegant:vQ,elegantly:wQ,embarrass:_Q,embarrassed:EQ,embarrasses:TQ,embarrassing:IQ,embarrassment:xQ,embezzlement:bQ,embittered:SQ,embrace:kQ,emergency:AQ,empathetic:NQ,empower:PQ,empowerment:CQ,emptiness:RQ,empty:DQ,enchanted:jQ,encourage:OQ,encouraged:VQ,encouragement:MQ,encourages:LQ,encouraging:FQ,endorse:zQ,endorsed:UQ,endorsement:BQ,endorses:$Q,enemies:qQ,enemy:WQ,energetic:GQ,engage:HQ,engages:KQ,engrossed:QQ,engrossing:YQ,enjoy:XQ,enjoyable:JQ,enjoyed:ZQ,enjoying:eY,enjoys:tY,enlighten:nY,enlightened:sY,enlightening:rY,enlightens:iY,ennui:oY,enrage:aY,enraged:cY,enrages:lY,enraging:uY,enrapture:dY,enslave:hY,enslaved:fY,enslaves:mY,ensure:pY,ensuring:gY,enterprising:yY,entertaining:vY,enthral:wY,enthusiastic:_Y,entitled:EY,entrusted:TY,envies:IY,envious:xY,"environment-friendly":2,envy:bY,envying:SY,erroneous:kY,error:AY,errors:NY,escape:-1,escapes:PY,escaping:CY,esteem:RY,esteemed:DY,ethical:jY,euphoria:OY,euphoric:VY,evacuate:MY,evacuated:LY,evacuates:FY,evacuating:zY,evacuation:UY,evergreen:BY,evergreens:$Y,evergreening:qY,eviction:WY,evil:GY,exacerbate:HY,exacerbated:KY,exacerbates:QY,exacerbating:YY,exaggerate:XY,exaggerated:JY,exaggerates:ZY,exaggerating:eX,exasparate:tX,exasperated:nX,exasperates:sX,exasperating:rX,excellence:iX,excellent:oX,excite:aX,excited:cX,excitement:lX,exciting:uX,exclude:dX,excluded:hX,exclusion:fX,exclusive:mX,excruciatingly:pX,excuse:gX,exempt:yX,exhausted:vX,exhilarated:wX,exhilarates:_X,exhilarating:EX,exonerate:TX,exonerated:IX,exonerates:xX,exonerating:bX,expand:SX,expands:kX,expel:AX,expelled:NX,expelling:PX,expels:CX,expertly:RX,exploit:DX,exploited:jX,exploiting:OX,exploits:VX,exploration:MX,explorations:LX,expose:FX,exposed:zX,exposes:UX,exposing:BX,exquisite:$X,extend:qX,extends:1,extremist:WX,extremists:GX,exuberant:HX,exultant:KX,exultantly:QX,fabulous:YX,fabulously:XX,fad:JX,fag:ZX,faggot:eJ,faggots:tJ,fail:nJ,failed:sJ,failing:rJ,fails:iJ,failure:oJ,failures:aJ,fainthearted:cJ,fair:lJ,fairness:uJ,faith:dJ,faithful:hJ,fake:fJ,faker:mJ,fakes:pJ,faking:gJ,fallen:yJ,falling:vJ,false:-1,falsely:wJ,falsified:_J,falsify:EJ,fame:TJ,famine:IJ,famous:xJ,fan:bJ,fantastic:SJ,farce:kJ,fascinate:AJ,fascinated:NJ,fascinates:PJ,fascinating:CJ,fascination:RJ,fascist:DJ,fascists:jJ,fatal:OJ,fatalities:VJ,fatality:MJ,fatigue:LJ,fatigued:FJ,fatigues:zJ,fatiguing:UJ,favor:BJ,favorable:$J,favorably:qJ,favored:WJ,favorite:GJ,favorited:HJ,favorites:KJ,favors:QJ,favour:YJ,favourable:XJ,favourably:JJ,favoured:ZJ,favourite:eZ,favourited:tZ,favourites:nZ,favours:sZ,fear:rZ,fearful:iZ,fearfully:oZ,fearing:aZ,fearless:cZ,fearlessness:lZ,fearsome:uZ,"fed up":-3,feeble:dZ,feeling:hZ,felonies:fZ,felony:mZ,fertile:pZ,fervent:gZ,fervid:yZ,festive:vZ,fever:wZ,fiasco:_Z,fidgety:EZ,fight:TZ,fighting:IZ,fine:xZ,fines:bZ,finest:SZ,fire:kZ,fired:AZ,firing:NZ,fit:PZ,fitness:CZ,filth:RZ,filthy:DZ,flagship:jZ,flaw:OZ,flawed:VZ,flawless:MZ,flawlessly:LZ,flaws:FZ,flees:zZ,flop:UZ,flops:BZ,flu:$Z,flustered:qZ,focused:WZ,fond:GZ,fondness:HZ,fool:KZ,foolish:QZ,fools:YZ,forbid:XZ,forbidden:JZ,forbidding:ZZ,forced:eee,foreclosure:tee,foreclosures:nee,forefront:see,forget:ree,forgetful:iee,forgettable:oee,forgive:aee,forgiving:cee,forgot:lee,forgotten:uee,fortune:dee,fortunate:hee,fortunately:fee,foul:mee,frantic:pee,fraud:gee,frauds:yee,fraudster:vee,fraudsters:wee,fraudulence:_ee,fraudulent:Eee,freak:Tee,free:Iee,freedom:xee,freedoms:bee,frenzy:See,fresh:kee,friend:Aee,friendliness:Nee,friendly:Pee,friendship:Cee,fright:Ree,frightened:Dee,frightening:jee,frikin:Oee,frisky:Vee,frowning:Mee,fruitless:Lee,frustrate:Fee,frustrated:zee,frustrates:Uee,frustrating:Bee,frustration:$ee,ftw:qee,fuck:Wee,fucked:Gee,fucker:Hee,fuckers:Kee,fuckface:Qee,fuckhead:Yee,fuckin:Xee,fucking:Jee,"fucking amazing":4,"fucking beautiful":4,"fucking cute":4,"fucking fantastic":4,"fucking good":4,"fucking great":4,"fucking hot":2,"fucking love":4,"fucking loves":4,"fucking perfect":4,fucktard:Zee,fud:ete,fuked:tte,fuking:nte,fulfill:ste,fulfilled:rte,fulfillment:ite,fulfills:ote,fuming:ate,fun:cte,funeral:lte,funerals:ute,funky:dte,funnier:hte,funny:fte,furious:mte,futile:pte,gag:gte,gagged:yte,gain:vte,gained:wte,gaining:_te,gains:Ete,gallant:Tte,gallantly:Ite,gallantry:xte,"game-changing":3,garbage:bte,gem:Ste,generous:kte,generously:Ate,genial:Nte,ghastly:Pte,ghost:Cte,giddy:Rte,gift:Dte,glad:jte,glamorous:Ote,glamourous:Vte,glee:Mte,gleeful:Lte,gloom:Fte,gloomy:zte,glorious:Ute,glory:Bte,glum:$te,god:qte,goddamn:Wte,godsend:Gte,gold:Hte,good:Kte,goodlooking:Qte,goodmorning:Yte,goodness:Xte,goodwill:Jte,goofiness:Zte,goofy:ene,grace:tne,graceful:nne,gracious:sne,grand:rne,grant:ine,granted:one,granting:ane,grants:cne,grateful:lne,gratification:une,grave:dne,gray:hne,grisly:fne,gr8:mne,great:pne,greater:gne,greatest:yne,greed:vne,greedy:wne,"green wash":-3,"green washing":-3,greenwash:_ne,greenwasher:Ene,greenwashers:Tne,greenwashing:Ine,greet:xne,greeted:bne,greeting:Sne,greetings:kne,greets:Ane,grey:Nne,grief:Pne,grieved:Cne,grim:Rne,gripping:Dne,groan:jne,groaned:One,groaning:Vne,groans:Mne,gross:Lne,growing:Fne,growth:zne,growths:Une,gruesome:Bne,guarantee:$ne,guilt:qne,guilty:Wne,gullibility:Gne,gullible:Hne,gun:Kne,ha:Qne,hacked:Yne,haha:Xne,hahaha:Jne,hahahah:Zne,hail:ese,hailed:tse,hallelujah:nse,handpicked:sse,handsome:rse,hapless:ise,haplessness:ose,happiest:ase,happiness:cse,happy:lse,harass:use,harassed:dse,harasses:hse,harassing:fse,harassment:mse,hard:pse,hardier:gse,hardship:yse,hardy:vse,harm:wse,harmed:_se,harmful:Ese,harming:Tse,harmony:Ise,harmonious:xse,harmoniously:bse,harms:Sse,harried:kse,harsh:Ase,harsher:Nse,harshest:Pse,harshly:Cse,hate:Rse,hated:Dse,hater:jse,haters:Ose,hates:Vse,hating:Mse,hatred:Lse,haunt:Fse,haunted:zse,haunting:Use,haunts:Bse,havoc:$se,hazardous:qse,headache:Wse,healthy:Gse,heartbreaking:Hse,heartbroken:Kse,heartfelt:Qse,heartless:Yse,heartwarming:Xse,heaven:Jse,heavenly:Zse,heavyhearted:ere,hehe:tre,hell:nre,hellish:sre,help:rre,helpful:ire,helping:ore,helpless:are,helps:cre,hero:lre,heroes:ure,heroic:dre,hesitant:hre,hesitate:fre,hid:mre,hide:pre,hideous:gre,hides:yre,hiding:vre,highlight:wre,hilarious:_re,hinder:Ere,hindrance:Tre,hoax:Ire,hollow:xre,homeless:bre,homesick:Sre,homicide:kre,homicides:Are,honest:Nre,honor:Pre,honored:Cre,honoring:Rre,honour:Dre,honoured:jre,honouring:Ore,hooligan:Vre,hooliganism:Mre,hooligans:Lre,hope:Fre,hopeful:zre,hopefully:Ure,hopeless:Bre,hopelessness:$re,hopes:qre,hoping:Wre,horrendous:Gre,horrid:Hre,horrible:Kre,horrific:Qre,horrified:Yre,hospitalized:Xre,hostile:Jre,huckster:Zre,hug:eie,huge:tie,hugs:nie,humane:sie,humble:rie,humbug:iie,humerous:oie,humiliated:aie,humiliation:cie,humor:lie,humorous:uie,humour:die,humourous:hie,hunger:fie,hurrah:mie,hurt:pie,hurting:gie,hurts:yie,hypocritical:vie,hysteria:wie,hysterical:_ie,hysterics:Eie,icky:Tie,idiocy:Iie,idiot:xie,idiotic:bie,ignorance:Sie,ignorant:kie,ignore:Aie,ignored:Nie,ignores:Pie,ill:Cie,"ill-fated":-2,illegal:Rie,illegally:Die,illegitimate:jie,illiteracy:Oie,illness:Vie,illnesses:Mie,illogical:Lie,imaginative:Fie,imbecile:zie,immobilized:Uie,immortal:Bie,immune:$ie,impair:qie,impaired:Wie,impairing:Gie,impairment:Hie,impairs:Kie,impatient:Qie,impeachment:Yie,impeachments:Xie,impede:Jie,impeded:Zie,impedes:eoe,impeding:toe,impedingly:noe,imperfect:soe,importance:roe,important:ioe,impose:ooe,imposed:aoe,imposes:coe,imposing:loe,imposter:uoe,impotent:doe,impress:hoe,impressed:foe,impresses:moe,impressive:poe,imprisoned:goe,imprisonment:yoe,improper:voe,improperly:woe,improve:_oe,improved:Eoe,improvement:Toe,improves:Ioe,improving:xoe,inability:boe,inaction:Soe,inadequate:koe,inadvertently:Aoe,inappropriate:Noe,incapable:Poe,incapacitated:Coe,incapacitates:Roe,incapacitating:Doe,incense:joe,incensed:Ooe,incenses:Voe,incensing:Moe,incoherent:Loe,incompetence:Foe,incompetent:zoe,incomplete:Uoe,incomprehensible:Boe,inconsiderate:$oe,inconvenience:qoe,inconvenient:Woe,increase:Goe,increased:Hoe,indecisive:Koe,indestructible:Qoe,indicted:Yoe,indifference:Xoe,indifferent:Joe,indignant:Zoe,indignation:eae,indoctrinate:tae,indoctrinated:nae,indoctrinates:sae,indoctrinating:rae,inediable:iae,inexorable:oae,inexcusable:aae,ineffective:cae,ineffectively:lae,ineffectual:uae,inefficiency:dae,inefficient:hae,inefficiently:fae,inept:mae,ineptitude:pae,infantile:gae,infantilized:yae,infatuated:vae,infatuation:wae,infect:_ae,infected:Eae,infecting:Tae,infection:Iae,infections:xae,infectious:bae,infects:Sae,inferior:kae,infest:Aae,infested:Nae,infesting:Pae,infests:Cae,inflamed:Rae,inflict:Dae,inflicted:jae,inflicting:Oae,inflicts:Vae,influential:Mae,infract:Lae,infracted:Fae,infracting:zae,infracts:Uae,infringement:Bae,infuriate:$ae,infuriated:qae,infuriates:Wae,infuriating:Gae,inhibit:Hae,inhuman:Kae,injured:Qae,injuries:Yae,injury:Xae,injustice:Jae,innovate:Zae,innovates:ece,innovation:tce,innovative:nce,inoperative:sce,inquisition:rce,inquisitive:ice,insane:oce,insanity:ace,insecure:cce,insensitive:lce,insensitivity:uce,insignificant:dce,insipid:hce,insolvent:fce,insomnia:mce,inspiration:pce,inspirational:gce,inspire:yce,inspired:vce,inspires:wce,inspiring:_ce,insufficiency:Ece,insufficient:Tce,insufficiently:Ice,insult:xce,insulted:bce,insulting:Sce,insults:kce,intact:Ace,integrity:Nce,intelligent:Pce,intense:Cce,interest:Rce,interested:Dce,interesting:jce,interests:Oce,interrogated:Vce,interrupt:Mce,interrupted:Lce,interrupting:Fce,interruption:zce,interrupts:Uce,intimacy:Bce,intimidate:$ce,intimidated:qce,intimidates:Wce,intimidating:Gce,intimidation:Hce,intransigence:Kce,intransigency:Qce,intricate:Yce,intrigues:Xce,invasion:Jce,invincible:Zce,invite:ele,inviting:tle,invulnerable:nle,irate:sle,ironic:rle,irony:ile,irrational:ole,irreparable:ale,irreproducible:cle,irresistible:lle,irresistibly:ule,irresolute:dle,irresponsible:hle,irresponsibly:fle,irreversible:mle,irreversibly:ple,irritate:gle,irritated:yle,irritates:vle,irritating:wle,isolated:_le,itchy:Ele,jackass:Tle,jackasses:Ile,jailed:xle,jaunty:ble,jealous:Sle,jealousy:kle,jeopardy:Ale,jerk:Nle,jesus:Ple,jewel:Cle,jewels:Rle,jocular:Dle,join:jle,joke:Ole,jokes:Vle,jolly:Mle,jovial:Lle,joy:Fle,joyful:zle,joyfully:Ule,joyless:Ble,joyous:$le,jubilant:qle,jumpy:Wle,justice:Gle,justifiably:Hle,justified:Kle,keen:Qle,kickback:Yle,kickbacks:Xle,kidnap:Jle,kidnapped:Zle,kidnapping:eue,kidnappings:tue,kidnaps:nue,kill:sue,killed:rue,killing:iue,kills:oue,kind:aue,"kind of":0,kinder:cue,kindness:lue,kiss:uue,kudos:due,lack:hue,lackadaisical:fue,lag:mue,lagged:pue,lagging:gue,lags:yue,lame:vue,landmark:wue,lapse:_ue,lapsed:Eue,laugh:Tue,laughed:Iue,laughing:xue,laughs:bue,laughting:Sue,launched:kue,lawl:Aue,lawsuit:Nue,lawsuits:Pue,lazy:Cue,leadership:Rue,leading:Due,leak:jue,leaked:Oue,leave:Vue,legal:Mue,legally:Lue,lenient:Fue,lethal:zue,lethality:Uue,lethargic:Bue,lethargy:$ue,liar:que,liars:Wue,libelous:Gue,lied:Hue,lifeless:Kue,lifesaver:Que,lighthearted:Yue,likable:Xue,like:Jue,likeable:Zue,liked:ede,likers:tde,likes:nde,liking:sde,limitation:rde,limited:ide,limits:ode,litigation:ade,litigious:cde,lively:lde,livid:ude,lmao:dde,lmfao:hde,loathe:fde,loathed:mde,loathes:pde,loathing:gde,loathsome:yde,lobbied:vde,lobby:wde,lobbying:_de,lobbyist:Ede,lobbyists:Tde,lol:Ide,lolol:xde,lololol:bde,lolololol:Sde,lonely:kde,lonesome:Ade,longing:Nde,lool:Pde,loom:Cde,loomed:Rde,looming:Dde,looms:jde,loool:Ode,looool:Vde,loose:Mde,looses:Lde,loser:Fde,losing:zde,loss:Ude,losses:Bde,lost:$de,lousy:qde,lovable:Wde,love:Gde,loved:Hde,lovelies:Kde,lovely:Qde,loves:Yde,loving:Xde,"loving-kindness":3,lowest:Jde,loyal:Zde,loyalty:ehe,luck:the,luckily:nhe,lucky:she,lucrative:rhe,ludicrous:ihe,lugubrious:ohe,lunatic:ahe,lunatics:che,lurk:lhe,lurking:uhe,lurks:dhe,luxury:hhe,macabre:fhe,mad:mhe,maddening:phe,"made-up":-1,madly:ghe,madness:yhe,magnificent:vhe,maladaption:whe,maldevelopment:_he,maltreatment:Ehe,mandatory:The,manipulated:Ihe,manipulating:xhe,manipulation:bhe,manslaughter:She,marvel:khe,marvelous:Ahe,marvels:Nhe,masterpiece:Phe,masterpieces:Che,matter:Rhe,matters:Dhe,mature:jhe,meaningful:Ohe,meaningless:Vhe,medal:Mhe,mediocrity:Lhe,meditative:Fhe,melancholy:zhe,memorable:Uhe,memoriam:Bhe,menace:$he,menaced:qhe,menaces:Whe,mercy:Ghe,merry:Hhe,mesmerizing:Khe,mess:Qhe,messed:Yhe,"messing up":-2,methodical:Xhe,methodically:Jhe,mindless:Zhe,miracle:efe,mirth:tfe,mirthful:nfe,mirthfully:sfe,misbehave:rfe,misbehaved:ife,misbehaves:ofe,misbehaving:afe,misbranding:cfe,miscast:lfe,mischief:ufe,mischiefs:dfe,misclassified:hfe,misclassifies:ffe,misclassify:mfe,misconduct:pfe,misconducted:gfe,misconducting:yfe,misconducts:vfe,miserable:wfe,miserably:_fe,misery:Efe,misfire:Tfe,misfortune:Ife,misgiving:xfe,misinformation:bfe,misinformed:Sfe,misinterpreted:kfe,mislead:Afe,misleaded:Nfe,misleading:Pfe,misleads:Cfe,misplace:Rfe,misplaced:Dfe,misplaces:jfe,misplacing:Ofe,mispricing:Vfe,misread:Mfe,misreport:Lfe,misreported:Ffe,misreporting:zfe,misreports:Ufe,misrepresent:Bfe,misrepresentation:$fe,misrepresentations:qfe,misrepresented:Wfe,misrepresenting:Gfe,misrepresents:Hfe,miss:Kfe,missed:Qfe,missing:Yfe,mistake:Xfe,mistaken:Jfe,mistakes:Zfe,mistaking:eme,misunderstand:tme,misunderstanding:nme,misunderstands:sme,misunderstood:rme,misuse:ime,misused:ome,misuses:ame,misusing:cme,moan:lme,moaned:ume,moaning:dme,moans:hme,mock:fme,mocked:mme,mocking:pme,mocks:gme,modernize:yme,modernized:vme,modernizes:wme,modernizing:_me,mongering:Eme,monopolize:Tme,monopolized:Ime,monopolizes:xme,monopolizing:bme,monotone:Sme,moody:kme,mope:Ame,moping:Nme,moron:Pme,motherfucker:Cme,motherfucking:Rme,motivate:Dme,motivated:jme,motivating:Ome,motivation:Vme,mourn:Mme,mourned:Lme,mournful:Fme,mourning:zme,mourns:Ume,muddy:Bme,mumpish:$me,murder:qme,murderer:Wme,murdering:Gme,murderous:Hme,murders:Kme,murky:Qme,myth:Yme,n00b:Xme,naive:Jme,narcissism:Zme,nasty:epe,natural:tpe,naïve:-2,needy:npe,negative:spe,negativity:rpe,neglect:ipe,neglected:ope,neglecting:ape,neglects:cpe,nerves:lpe,nervous:upe,nervously:dpe,nice:hpe,nifty:fpe,niggas:mpe,nigger:ppe,no:gpe,"no fun":-3,noble:ype,noblest:vpe,noisy:wpe,"non-approved":-2,nonsense:_pe,noob:Epe,nosey:Tpe,"not good":-2,"not working":-3,notable:Ipe,noticeable:xpe,notorious:bpe,novel:Spe,numb:kpe,nurturing:Ape,nuts:Npe,obliterate:Ppe,obliterated:Cpe,obnoxious:Rpe,obscene:Dpe,obscenity:jpe,obsessed:Ope,obsolete:Vpe,obstacle:Mpe,obstacles:Lpe,obstinate:Fpe,obstruct:zpe,obstructed:Upe,obstructing:Bpe,obstruction:$pe,obstructs:qpe,odd:Wpe,offence:Gpe,offences:Hpe,offend:Kpe,offended:Qpe,offender:Ype,offending:Xpe,offends:Jpe,offense:Zpe,offenses:ege,offensive:tge,offensively:nge,offline:sge,oks:rge,ominous:ige,"once-in-a-lifetime":3,oops:oge,opportunities:age,opportunity:cge,oppressed:lge,oppression:uge,oppressions:dge,oppressive:hge,optimism:fge,optimistic:mge,optionless:pge,ostracize:gge,ostracized:yge,ostracizes:vge,ouch:wge,outage:_ge,outages:Ege,outbreak:Tge,outbreaks:Ige,outcry:xge,outmaneuvered:bge,outnumbered:Sge,outrage:kge,outraged:Age,outrageous:Nge,outreach:Pge,outstanding:Cge,overjoyed:Rge,overload:Dge,overlooked:jge,overprotective:Oge,overran:Vge,overreact:Mge,overreacted:Lge,overreacting:Fge,overreaction:zge,overreacts:Uge,oversell:Bge,overselling:$ge,oversells:qge,oversight:Wge,oversimplification:Gge,oversimplified:Hge,oversimplifies:Kge,oversimplify:Qge,oversold:Yge,overstatement:Xge,overstatements:Jge,overweight:Zge,overwrought:eye,oxymoron:tye,pain:nye,pained:sye,painful:rye,panic:iye,panicked:oye,panics:aye,paradise:cye,paradox:lye,pardon:uye,pardoned:dye,pardoning:hye,pardons:fye,parley:mye,passion:pye,passionate:gye,passive:yye,passively:vye,pathetic:wye,pay:_ye,peace:Eye,peaceful:Tye,peacefully:Iye,penalize:xye,penalized:bye,penalizes:Sye,penalizing:kye,penalty:Aye,pensive:Nye,perfect:Pye,perfected:Cye,perfection:Rye,perfectly:Dye,perfects:jye,peril:Oye,perjury:Vye,perpetrated:Mye,perpetrator:Lye,perpetrators:Fye,perplexed:zye,persecute:Uye,persecuted:Bye,persecutes:$ye,persecuting:qye,perturbed:Wye,pervert:Gye,pesky:Hye,pessimism:Kye,pessimistic:Qye,petrified:Yye,philanthropy:Xye,phobic:Jye,picturesque:Zye,pileup:eve,pillage:tve,pique:nve,piqued:sve,piss:rve,pissed:ive,pissing:ove,piteous:ave,pitied:cve,pity:lve,plague:uve,plagued:dve,plagues:hve,plaguing:fve,playful:mve,pleasant:pve,please:gve,pleased:yve,pleasurable:vve,pleasure:wve,plodding:_ve,poignant:Eve,pointless:Tve,poised:Ive,poison:xve,poisoned:bve,poisons:Sve,polished:kve,polite:Ave,politeness:Nve,pollutant:Pve,pollute:Cve,polluted:Rve,polluter:Dve,polluters:jve,pollutes:Ove,pollution:Vve,poor:Mve,poorer:Lve,poorest:Fve,poorly:zve,popular:Uve,popularity:Bve,positive:$ve,positively:qve,possessive:Wve,"post-traumatic":-2,postpone:Gve,postponed:Hve,postpones:Kve,postponing:Qve,poverty:Yve,powerful:Xve,powerless:Jve,praise:Zve,praised:ewe,praises:twe,praising:nwe,pray:swe,praying:rwe,prays:iwe,prblm:owe,prblms:awe,predatory:cwe,prepared:lwe,pressure:uwe,pressured:dwe,pretend:hwe,pretending:fwe,pretends:mwe,pretty:pwe,prevent:gwe,prevented:ywe,preventing:vwe,prevents:wwe,prick:_we,prison:Ewe,prisoner:Twe,prisoners:Iwe,privileged:xwe,proactive:bwe,problem:Swe,problems:kwe,profit:Awe,profitable:Nwe,profiteer:Pwe,profits:Cwe,progress:Rwe,prohibit:Dwe,prohibits:jwe,prominent:Owe,promise:Vwe,promised:Mwe,promises:Lwe,promote:Fwe,promoted:zwe,promotes:Uwe,promoting:Bwe,promptly:$we,propaganda:qwe,prosecute:Wwe,prosecuted:Gwe,prosecutes:Hwe,prosecution:Kwe,prospect:Qwe,prospects:Ywe,prosperity:Xwe,prosperous:Jwe,protect:Zwe,protected:1,protects:e_e,protest:t_e,protesters:n_e,protesting:s_e,protests:r_e,proud:i_e,proudly:o_e,provoke:a_e,provoked:c_e,provokes:l_e,provoking:u_e,prudence:d_e,pseudoscience:h_e,psychopathic:f_e,punish:m_e,punished:p_e,punishes:g_e,punishing:y_e,punitive:v_e,pure:w_e,purest:__e,purposeful:E_e,pushy:T_e,puzzled:I_e,quaking:x_e,qualities:b_e,quality:S_e,questionable:k_e,questioned:A_e,questioning:N_e,racism:P_e,racist:C_e,racists:R_e,rage:D_e,rageful:j_e,rainy:O_e,rant:V_e,ranter:M_e,ranters:L_e,rants:F_e,rape:z_e,raped:U_e,rapist:B_e,rapture:$_e,raptured:q_e,raptures:W_e,rapturous:G_e,rash:H_e,ratified:K_e,reach:Q_e,reached:Y_e,reaches:X_e,reaching:J_e,reassure:Z_e,reassured:e2e,reassures:t2e,reassuring:n2e,rebel:s2e,rebellion:r2e,rebels:i2e,recession:o2e,reckless:a2e,recognition:c2e,recommend:l2e,recommended:u2e,recommends:d2e,redeemed:h2e,refine:f2e,refined:m2e,refines:p2e,refreshingly:g2e,refuse:y2e,refused:v2e,refuses:w2e,refusing:_2e,regret:E2e,regretful:T2e,regrets:I2e,regretted:x2e,regretting:b2e,reigning:S2e,reject:k2e,rejected:A2e,rejecting:N2e,rejection:P2e,rejects:C2e,rejoice:R2e,rejoiced:D2e,rejoices:j2e,rejoicing:O2e,relaxed:V2e,relentless:M2e,reliability:L2e,reliable:F2e,reliably:z2e,reliant:U2e,relieve:B2e,relieved:$2e,relieves:q2e,relieving:W2e,relishing:G2e,remarkable:H2e,remorse:K2e,repellent:Q2e,repercussion:Y2e,repercussions:X2e,reprimand:J2e,reprimanded:Z2e,reprimanding:e0e,reprimands:t0e,repulse:n0e,repulsed:s0e,repulsive:r0e,rescue:i0e,rescued:o0e,rescues:a0e,resentful:c0e,resign:l0e,resigned:u0e,resigning:d0e,resigns:h0e,resolute:f0e,resolution:m0e,resolve:p0e,resolved:g0e,resolves:y0e,resolving:v0e,respect:w0e,respected:_0e,respects:E0e,responsibility:T0e,responsible:I0e,responsive:x0e,restful:b0e,restless:S0e,restore:k0e,restored:A0e,restores:N0e,restoring:P0e,restrict:C0e,restricted:R0e,restricting:D0e,restriction:j0e,restrictive:O0e,restricts:V0e,retained:M0e,retard:L0e,retarded:F0e,retreat:z0e,revenge:U0e,revengeful:B0e,revered:$0e,revive:q0e,revives:W0e,revolting:G0e,reward:H0e,rewarded:K0e,rewarding:Q0e,rewards:Y0e,rich:X0e,richly:J0e,ridiculous:Z0e,rig:e1e,rigged:t1e,"right direction":3,righteousness:n1e,rightful:s1e,rightfully:r1e,rigorous:i1e,rigorously:o1e,riot:a1e,riots:c1e,rise:l1e,rises:u1e,risk:d1e,risks:h1e,risky:f1e,riveting:m1e,rob:p1e,robber:g1e,robed:y1e,robing:v1e,robs:w1e,robust:_1e,rofl:E1e,roflcopter:T1e,roflmao:I1e,romance:x1e,romantical:b1e,romantically:S1e,rose:k1e,rotfl:A1e,rotflmfao:N1e,rotflol:P1e,rotten:C1e,rude:R1e,ruin:D1e,ruined:j1e,ruining:O1e,ruins:V1e,sabotage:M1e,sad:L1e,sadden:F1e,saddened:z1e,sadly:U1e,safe:B1e,safely:$1e,safer:q1e,safety:W1e,salient:G1e,salute:H1e,saluted:K1e,salutes:Q1e,saluting:Y1e,salvation:X1e,sappy:J1e,sarcastic:Z1e,satisfied:eEe,savange:tEe,savanges:nEe,save:sEe,saved:rEe,savings:iEe,scam:oEe,scams:aEe,scandal:cEe,scandalous:lEe,scandals:uEe,scapegoat:dEe,scapegoats:hEe,scare:fEe,scared:mEe,scar:pEe,scars:gEe,scary:yEe,sceptical:vEe,scold:wEe,scoop:_Ee,scorn:EEe,scornful:TEe,scream:IEe,screamed:xEe,screaming:bEe,screams:SEe,screwed:kEe,"screwed up":-3,scum:AEe,scumbag:NEe,seamless:PEe,seamlessly:CEe,secure:REe,secured:DEe,secures:jEe,sedition:OEe,seditious:VEe,seduced:MEe,"self-abuse":-2,"self-confident":2,"self-contradictory":-2,"self-deluded":-2,selfish:LEe,selfishness:FEe,sentence:zEe,sentenced:UEe,sentences:BEe,sentencing:$Ee,serene:qEe,settlement:WEe,settlements:GEe,severe:HEe,severely:KEe,sexist:QEe,sexistic:YEe,sexy:XEe,shaky:JEe,shame:ZEe,shamed:eTe,shameful:tTe,share:nTe,shared:sTe,shares:rTe,shattered:iTe,shit:oTe,shithead:aTe,shitty:cTe,shock:lTe,shocked:uTe,shocking:dTe,shocks:hTe,shoody:fTe,shoot:mTe,"short-sighted":-2,"short-sightedness":-2,shortage:pTe,shortages:gTe,shrew:yTe,shy:vTe,sick:wTe,sickness:_Te,"side-effect":-2,"side-effects":-2,sigh:ETe,significance:TTe,significant:ITe,silencing:xTe,silly:bTe,simplicity:STe,sin:kTe,sincere:ATe,sincerely:NTe,sincerest:PTe,sincerity:CTe,sinful:RTe,singleminded:DTe,sinister:jTe,sins:OTe,skeptic:VTe,skeptical:MTe,skepticism:LTe,skeptics:FTe,slam:zTe,slash:UTe,slashed:BTe,slashes:$Te,slashing:qTe,slave:WTe,slavery:GTe,slaves:HTe,sleeplessness:KTe,slick:QTe,slicker:YTe,slickest:XTe,slip:JTe,sloppy:ZTe,sluggish:eIe,slumping:tIe,slut:nIe,smart:sIe,smarter:rIe,smartest:iIe,smear:oIe,smile:aIe,smiled:cIe,smiles:lIe,smiling:uIe,smog:dIe,smuggle:hIe,smuggled:fIe,smuggling:mIe,smuggles:pIe,sneaky:gIe,sneeze:yIe,sneezed:vIe,sneezes:wIe,sneezing:_Ie,snub:EIe,snubbed:TIe,snubbing:IIe,snubs:xIe,sobering:bIe,solemn:SIe,solid:kIe,solidarity:AIe,solidified:NIe,solidifies:PIe,solidify:CIe,solidifying:RIe,solution:DIe,solutions:jIe,solve:OIe,solved:VIe,solves:MIe,solving:LIe,somber:FIe,"some kind":0,"son-of-a-bitch":-5,soothe:zIe,soothed:UIe,soothing:BIe,sophisticated:$Ie,sore:qIe,sorrow:WIe,sorrowful:GIe,sorry:HIe,spacious:KIe,spam:QIe,spammer:YIe,spammers:XIe,spamming:JIe,spark:ZIe,sparkle:exe,sparkles:txe,sparkling:nxe,spearhead:sxe,speculative:rxe,spirit:ixe,spirited:oxe,spiritless:axe,spiteful:cxe,splendid:lxe,spoiled:uxe,spoilt:dxe,spotless:hxe,sprightly:fxe,squander:mxe,squandered:pxe,squandering:gxe,squanders:yxe,squelched:vxe,stab:wxe,stabbed:_xe,stable:Exe,stabs:Txe,stall:Ixe,stalled:xxe,stalling:bxe,stamina:Sxe,stampede:kxe,stank:Axe,startled:Nxe,startling:Pxe,starve:Cxe,starved:Rxe,starves:Dxe,starving:jxe,steadfast:Oxe,steal:Vxe,stealing:Mxe,steals:Lxe,stereotype:Fxe,stereotyped:zxe,stifled:Uxe,stimulate:Bxe,stimulated:$xe,stimulates:qxe,stimulating:Wxe,stingy:Gxe,stink:Hxe,stinked:Kxe,stinker:Qxe,stinking:Yxe,stinks:Xxe,stinky:Jxe,stole:Zxe,stolen:ebe,stop:tbe,stopped:nbe,stopping:sbe,stops:rbe,stout:ibe,straight:obe,strange:abe,strangely:cbe,strangled:lbe,strength:ube,strengthen:dbe,strengthened:hbe,strengthening:fbe,strengthens:mbe,strengths:pbe,stress:gbe,stressed:ybe,stressor:vbe,stressors:wbe,stricken:_be,strike:Ebe,strikers:Tbe,strikes:Ibe,strong:xbe,stronger:bbe,strongest:Sbe,struck:kbe,struggle:Abe,struggled:Nbe,struggles:Pbe,struggling:Cbe,stubborn:Rbe,stuck:Dbe,stunned:jbe,stunning:Obe,stupid:Vbe,stupidity:Mbe,stupidly:Lbe,suave:Fbe,subpoena:zbe,substantial:Ube,substantially:Bbe,subversive:$be,succeed:qbe,succeeded:Wbe,succeeding:Gbe,succeeds:Hbe,success:Kbe,successful:Qbe,successfully:Ybe,suck:Xbe,sucks:Jbe,sue:Zbe,sued:eSe,sueing:tSe,sues:nSe,suffer:sSe,suffered:rSe,sufferer:iSe,sufferers:oSe,suffering:aSe,suffers:cSe,suicidal:lSe,suicide:uSe,suicides:dSe,suing:hSe,suitable:fSe,suited:mSe,sulking:pSe,sulky:gSe,sullen:ySe,sunshine:vSe,super:3,superb:wSe,superior:_Se,support:ESe,supported:TSe,supporter:ISe,supporters:xSe,supporting:bSe,supportive:SSe,supports:kSe,supreme:ASe,survived:NSe,surviving:PSe,survivor:CSe,suspect:RSe,suspected:DSe,suspecting:jSe,suspects:OSe,suspend:VSe,suspended:MSe,suspicious:LSe,sustainability:FSe,sustainable:zSe,sustainably:USe,swear:BSe,swearing:$Se,swears:qSe,sweet:WSe,sweeter:GSe,sweetest:HSe,swift:KSe,swiftly:QSe,swindle:YSe,swindles:XSe,swindling:JSe,sympathetic:ZSe,sympathy:eke,taint:tke,tainted:nke,talent:ske,tard:rke,tarnish:ike,tarnished:oke,tarnishes:ake,tears:cke,tender:lke,tenderness:uke,tense:dke,tension:hke,terrible:fke,terribly:mke,terrific:pke,terrifically:gke,terrified:yke,terror:vke,terrorist:wke,terrorists:_ke,terrorize:Eke,terrorized:Tke,terrorizes:Ike,thank:xke,thankful:bke,thanks:Ske,thorny:kke,thoughtful:Ake,thoughtless:Nke,threat:Pke,threaten:Cke,threatened:Rke,threatening:Dke,threatens:jke,threats:Oke,thrilled:Vke,thwart:Mke,thwarted:Lke,thwarting:Fke,thwarts:zke,timid:Uke,timorous:Bke,tired:$ke,tits:qke,tolerance:Wke,tolerant:Gke,toothless:Hke,top:Kke,tops:Qke,torn:Yke,torture:Xke,tortured:Jke,tortures:Zke,torturing:eAe,totalitarian:tAe,totalitarianism:nAe,tout:sAe,touted:rAe,touting:iAe,touts:oAe,toxic:aAe,tragedies:cAe,tragedy:lAe,tragic:uAe,tranquil:dAe,transgress:hAe,transgressed:fAe,transgresses:mAe,transgressing:pAe,trap:gAe,trapped:yAe,traps:vAe,trauma:wAe,traumatic:_Ae,travesty:EAe,treason:TAe,treasonous:IAe,treasure:xAe,treasures:bAe,trembling:SAe,tremor:kAe,tremors:AAe,tremulous:NAe,tribulation:PAe,tribute:CAe,tricked:RAe,trickery:DAe,triumph:jAe,triumphant:OAe,troll:VAe,trouble:MAe,troubled:LAe,troubles:FAe,troubling:zAe,true:2,trust:UAe,trusted:BAe,trusts:$Ae,tumor:qAe,twat:WAe,tyran:GAe,tyrannic:HAe,tyrannical:KAe,tyrannically:QAe,tyrans:YAe,ubiquitous:XAe,ugh:JAe,ugliness:ZAe,ugly:eNe,unable:tNe,unacceptable:nNe,unappeasable:sNe,unappreciated:rNe,unapproved:iNe,unattractive:oNe,unavailable:aNe,unavailing:cNe,unaware:lNe,unbearable:uNe,unbelievable:dNe,unbelieving:hNe,unbiased:fNe,uncertain:mNe,unclear:pNe,uncomfortable:gNe,unconcerned:yNe,unconfirmed:vNe,unconvinced:wNe,uncredited:_Ne,undecided:ENe,undercooked:TNe,underestimate:INe,underestimated:xNe,underestimates:bNe,underestimating:SNe,undermine:kNe,undermined:ANe,undermines:NNe,undermining:PNe,underperform:CNe,underperformed:RNe,underperforming:DNe,underperforms:jNe,undeserving:ONe,undesirable:VNe,uneasy:MNe,unemployed:LNe,unemployment:FNe,unequal:zNe,unequaled:UNe,unethical:BNe,uneventful:$Ne,unfair:qNe,unfavorable:WNe,unfit:GNe,unfitted:HNe,unfocused:KNe,unforgivable:QNe,unforgiving:YNe,unfulfilled:XNe,unfunny:JNe,ungenerous:ZNe,ungrateful:ePe,unhappy:tPe,unhappiness:nPe,unhealthy:sPe,unhygienic:rPe,unified:iPe,unimaginative:oPe,unimpressed:aPe,uninspired:cPe,unintelligent:lPe,unintentional:uPe,uninvolving:dPe,united:hPe,unjust:fPe,unlikely:mPe,unlovable:pPe,unloved:gPe,unmatched:yPe,unmotivated:vPe,unoriginal:wPe,unparliamentary:_Pe,unpleasant:EPe,unpleasantness:TPe,unprofessional:IPe,unravel:xPe,unreleting:bPe,unresearched:SPe,unsafe:kPe,unsatisfied:APe,unscientific:NPe,unsecured:PPe,unselfish:CPe,unsettled:RPe,unsold:DPe,unsophisticated:jPe,unsound:OPe,unstable:VPe,unstoppable:MPe,unsuccessful:LPe,unsuccessfully:FPe,unsupported:zPe,unsure:UPe,untarnished:BPe,untrue:$Pe,unwanted:qPe,unworthy:WPe,uplifting:GPe,uproar:HPe,upset:KPe,upsets:QPe,upsetting:YPe,uptight:XPe,urgent:JPe,useful:ZPe,usefulness:eCe,useless:tCe,uselessness:nCe,vague:sCe,validate:rCe,validated:iCe,validates:oCe,validating:aCe,vapid:cCe,verdict:lCe,verdicts:uCe,vested:dCe,vexation:hCe,vexing:fCe,vibrant:mCe,vicious:pCe,victim:gCe,victimization:yCe,victimize:vCe,victimized:wCe,victimizes:_Ce,victimizing:ECe,victims:TCe,victor:ICe,victors:xCe,victory:bCe,victories:SCe,vigilant:kCe,vigor:ACe,vile:NCe,vindicate:PCe,vindicated:CCe,vindicates:RCe,vindicating:DCe,violate:jCe,violated:OCe,violates:VCe,violating:MCe,violation:LCe,violations:FCe,violence:zCe,"violence-related":-3,violent:UCe,violently:BCe,virtuous:$Ce,virulent:qCe,vision:WCe,visionary:GCe,visioning:HCe,visions:KCe,vitality:QCe,vitamin:YCe,vitriolic:XCe,vivacious:JCe,vividly:ZCe,vociferous:eRe,vomit:tRe,vomited:nRe,vomiting:sRe,vomits:rRe,vulnerability:iRe,vulnerable:oRe,walkout:aRe,walkouts:cRe,wanker:lRe,want:uRe,war:dRe,warfare:hRe,warm:fRe,warmhearted:mRe,warmness:pRe,warmth:gRe,warn:yRe,warned:vRe,warning:wRe,warnings:_Re,warns:ERe,waste:TRe,wasted:IRe,wasting:xRe,wavering:bRe,weak:SRe,weakened:kRe,weakness:ARe,weaknesses:NRe,wealth:PRe,wealthier:CRe,wealthy:RRe,weary:DRe,weep:jRe,weeping:ORe,weird:VRe,welcome:MRe,welcomed:LRe,welcomes:FRe,"well-being":2,"well-championed":3,"well-developed":2,"well-established":2,"well-focused":2,"well-groomed":2,"well-proportioned":2,whimsical:zRe,whitewash:URe,whore:BRe,wicked:$Re,widowed:qRe,willingness:WRe,win:GRe,winner:HRe,winning:KRe,wins:QRe,winwin:YRe,wisdom:XRe,wish:JRe,wishes:ZRe,wishing:eDe,withdrawal:tDe,wits:nDe,woebegone:sDe,woeful:rDe,won:iDe,wonderful:oDe,wonderfully:aDe,woo:cDe,woohoo:lDe,wooo:uDe,woow:dDe,worn:hDe,worried:fDe,worries:mDe,worry:pDe,worrying:gDe,worse:yDe,worsen:vDe,worsened:wDe,worsening:_De,worsens:EDe,worshiped:TDe,worst:IDe,worth:xDe,worthless:bDe,worthy:SDe,wow:kDe,wowow:ADe,wowww:NDe,wrathful:PDe,wreck:CDe,wrenching:RDe,wrong:DDe,wrongdoing:jDe,wrongdoings:ODe,wronged:VDe,wrongful:MDe,wrongfully:LDe,wrongly:FDe,wtf:zDe,wtff:UDe,wtfff:BDe,xo:$De,xoxo:qDe,xoxoxo:WDe,xoxoxoxo:GDe,yeah:HDe,yearning:KDe,yeees:QDe,yes:YDe,youthful:XDe,yucky:JDe,yummy:ZDe,zealot:eje,zealots:tje,zealous:nje},rje=1,ije=1,oje=1,aje=1,cje=1,lje=1,uje=1,dje={cant:rje,"can't":1,dont:ije,"don't":1,doesnt:oje,"doesn't":1,not:aje,non:cje,wont:lje,"won't":1,isnt:uje,"isn't":1};var hje=dje,fje={apply:function(t,e,n){if(e>0){var s=t[e-1];hje[s]&&(n=-n)}return n}},mje={labels:sje,scoringStrategy:fje},Ax=RO,Nx=mje;Object.assign(Nx.labels,Ax);var pu={en:Nx},pje={addLanguage:function(t,e){if(!e.labels)throw new Error("language.labels must be defined!");Object.assign(e.labels,Ax),pu[t]=e},getLanguage:function(t){if(!t)return pu.en;if(!pu[t])try{var e=CO("../languages/"+t+"/index");this.addLanguage(t,e)}catch{throw new Error("No language found: "+t)}return pu[t]},getLabels:function(t){var e=this.getLanguage(t);return e.labels},applyScoringStrategy:function(t,e,n,s){var r=this.getLanguage(t),i=r.scoringStrategy||gje;return i.apply(e,n,s)}},gje={apply:function(t,e,n){return n}},yje=PO,Sp=pje,Ny=function(t){this.options=t};Ny.prototype.registerLanguage=function(t,e){Sp.addLanguage(t,e)};Ny.prototype.analyze=function(t,e,n){typeof t>"u"&&(t=""),typeof e=="function"&&(n=e,e={}),e=e||{};var s=e.language||"en",r=Sp.getLabels(s);typeof e.extras=="object"&&(r=Object.assign(r,e.extras));for(var i=yje(t),o=0,a=[],c=[],d=[],f=[],m=i.length;m--;){var g=i[m];if(r.hasOwnProperty(g)){a.push(g);var E=r[g];E=Sp.applyScoringStrategy(s,i,m,E),E>0&&c.push(g),E<0&&d.push(g),o+=E;var S={};S[g]=E,f.push(S)}}var A={score:o,comparative:i.length>0?o/i.length:0,calculation:f,tokens:i,words:a,positive:c,negative:d};if(typeof n=="function")process.nextTick(function(){n(null,A)});else return A};var vje=Ny;const wje=C2(vje),_je=new wje;function Px(t){return!t||t.trim()===""?null:_je.analyze(t)}const Eje="https://us-central1-clarity-311c3.cloudfunctions.net/analyzeText";async function Py(t){var e;try{const n=await fetch(Eje,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t})});if(!n.ok)throw new Error("AI analytics request failed");const s=await n.json();return{sentiment:((e=s.sentiment)==null?void 0:e.score)??null,entities:s.entities??[],source:"cloud"}}catch(n){console.error("AI analytics error (falling back to local):",n);const s=Px(t);return{sentiment:(s==null?void 0:s.score)??null,entities:[],source:"local"}}}function Cy(t,e){if(!e||e.length===0)return null;const n=e.map(s=>s.toLowerCase());return(n.includes("tired")||n.includes("fatigue")||n.includes("stressed")||n.includes("stress"))&&t!==null&&t<0?"Sorry you're feeling tired or stressed. Try a 10-minute guided meditation or a relaxing soundscape to unwind.":(n.includes("sleep")||n.includes("insomnia"))&&t!==null&&t<0?"Having trouble sleeping? Try a sleep meditation or a calming bedtime routine tonight.":(n.includes("sore")||n.includes("soreness"))&&n.includes("workout")?"Great job on your workout! Since you're sore, consider a gentle stretching session or a rest day tomorrow.":n.includes("water")||n.includes("hydration")?"Remember to stay hydrated! Try setting a water reminder or keeping a bottle at your desk.":n.includes("motivation")&&t!==null&&t<0?"Feeling unmotivated? Try a short walk, a new workout, or listen to an uplifting playlist!":(n.includes("work")||n.includes("meeting"))&&(n.includes("stress")||n.includes("tired"))?"Work can be draining. Take a mindful break or try a breathing exercise after your next meeting.":n.includes("workout")&&t!==null&&t>0?"Awesome job on your workout! Keep up the great work and celebrate your progress!":t!==null&&t<-.3?"It's okay to have tough days. Be kind to yourself and try a wellness activity you enjoy.":t!==null&&t>.5?"You're on a roll! Keep up the positive momentum!":null}function Tje(){const{user:t}=In(),[e,n]=N.useState([]),[s,r]=N.useState({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),[i,o]=N.useState(!1),[a,c]=N.useState(null),[d,f]=N.useState(!0),[m,g]=N.useState(!1),[E,S]=N.useState(""),[A,C]=N.useState(null),[x,v]=N.useState(!1),[I,j]=N.useState(null),L=new Date().toISOString().split("T")[0];N.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const b=await fi.fetchWorkoutsByUser(t.uid);n(b.workouts||[])}catch(b){console.error("Error fetching workouts:",b),S("Failed to load workouts")}finally{f(!1)}})()},[t]);const M=P=>{const{name:b,value:ie}=P.target;r(he=>({...he,[b]:ie}))},_=async P=>{if(P.preventDefault(),console.log("🚀 Workout submit started"),console.log("📊 Form data:",s),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),S("Please log in to save workouts");return}if(!s.title||!s.durationMinutes||!s.date){S("Please fill in all required fields");return}try{g(!0),S("");let b;if(s.date){const X=s.date.split("-"),ee=parseInt(X[0]),U=parseInt(X[1]),Y=parseInt(X[2]),se=new Date;b=new Date(ee,U-1,Y,se.getHours(),se.getMinutes(),se.getSeconds())}else b=$.getCurrentLocalTime();const ie={title:s.title,type:s.type,durationMinutes:parseInt(s.durationMinutes),date:b,notes:s.notes,caloriesBurned:s.caloriesBurned?parseInt(s.caloriesBurned):0};let he;if(i&&a)he=await fi.updateWorkout(t.uid,a,ie),n(X=>X.map(ee=>ee.id===a?{...ee,...ie}:ee)),o(!1),c(null);else{const X=await Py(s.notes);C({score:X.sentiment}),v(X.sentiment!==null),j(Cy(X.sentiment,X.entities));const ee={...ie,sentiment:X.sentiment,entities:X.entities};he=await fi.logWorkout(t.uid,ee),n(U=>[{...ee,id:he.id},...U])}r({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),S("")}catch(b){console.error("💥 Workout logging error:",b),S("Failed to save workout. Please try again.")}finally{g(!1)}},y=P=>{var ie,he;o(!0),c(P.id);const b=P.date instanceof Date?P.date.toISOString().split("T")[0]:new Date(P.date).toISOString().split("T")[0];r({date:b,durationMinutes:((ie=P.durationMinutes)==null?void 0:ie.toString())||"",title:P.title||"",type:P.type||"General",notes:P.notes||"",caloriesBurned:((he=P.caloriesBurned)==null?void 0:he.toString())||""})},T=async P=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this workout?"))try{await fi.deleteWorkout(t.uid,P),n(b=>b.filter(ie=>ie.id!==P))}catch(b){console.error("Error deleting workout:",b),S("Failed to delete workout")}},k=()=>{o(!1),c(null),r({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""})},R=e.filter(P=>(P.date instanceof Date?P.date.toISOString().split("T")[0]:new Date(P.date).toISOString().split("T")[0])===L);return d?u.jsx("div",{className:"workout-loading",children:"Loading workouts..."}):u.jsxs("div",{className:"workout-page",children:[u.jsxs("div",{className:"workout-card",children:[u.jsx("h1",{className:"workout-title",children:i?"Edit Workout Session":"Log Workout Session"}),E&&u.jsx("div",{className:"error-message",children:E}),u.jsxs("form",{onSubmit:_,className:"workout-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:s.date,onChange:M,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Title",u.jsx("input",{type:"text",name:"title",value:s.title,onChange:M,className:"form-input",placeholder:"e.g., Morning Run, Gym Session",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Type",u.jsxs("select",{name:"type",value:s.type,onChange:M,className:"form-input",children:[u.jsx("option",{value:"General",children:"General"}),u.jsx("option",{value:"Cardio",children:"Cardio"}),u.jsx("option",{value:"Strength",children:"Strength Training"}),u.jsx("option",{value:"Yoga",children:"Yoga"}),u.jsx("option",{value:"Running",children:"Running"}),u.jsx("option",{value:"Cycling",children:"Cycling"}),u.jsx("option",{value:"Swimming",children:"Swimming"}),u.jsx("option",{value:"Walking",children:"Walking"}),u.jsx("option",{value:"HIIT",children:"HIIT"}),u.jsx("option",{value:"Other",children:"Other"})]})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration / Length (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:s.durationMinutes,onChange:M,className:"form-input",min:"1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Calories Burned (Optional)",u.jsx("input",{type:"number",name:"caloriesBurned",value:s.caloriesBurned,onChange:M,className:"form-input",min:"0",placeholder:"0"})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:s.notes,onChange:M,className:"form-input form-textarea",placeholder:"How did it feel? Any achievements?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Workout":"Log Workout"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:k,disabled:m,children:"Cancel"})]})]})]}),u.jsxs("div",{className:"workout-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Workouts (",R.length,")"]}),R.length===0?u.jsx("p",{className:"no-workouts",children:"No workouts logged for today. Start your fitness journey!"}):u.jsx("ul",{className:"log-list",children:R.map(P=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"workout-info",children:[u.jsx("span",{className:"workout-title-display",children:P.title}),u.jsx("span",{className:"workout-type",children:P.type}),u.jsxs("span",{className:"workout-duration",children:[P.durationMinutes," min"]}),P.caloriesBurned>0&&u.jsxs("span",{className:"workout-calories",children:[P.caloriesBurned," cal"]}),P.notes&&u.jsx("span",{className:"workout-notes",children:P.notes})]}),u.jsxs("div",{className:"workout-actions",children:[u.jsx("button",{onClick:()=>y(P),className:"edit-button",disabled:m,children:"Edit"}),u.jsx("button",{onClick:()=>T(P.id),className:"delete-button",disabled:m,children:"Delete"})]})]},P.id))})]}),A&&x&&u.jsx("div",{className:"sentiment-modal-overlay",children:u.jsxs("div",{className:"sentiment-modal",children:[u.jsxs("span",{className:"sentiment-message",children:[A.score>0&&"Your note sounds positive! 😊",A.score<0&&"Your note sounds a bit negative. 😟",A.score===0&&"Your note sounds neutral. 😐"]}),I&&u.jsxs("div",{className:"ai-recommendation",children:[u.jsx("strong",{children:"AI Suggestion:"})," ",I]}),u.jsx("button",{className:"close-modal-btn",onClick:()=>v(!1),children:"Dismiss"})]})})]})}const Qs={silence:{name:"Silence",description:"Pure silence for traditional meditation",icon:"🤫",neurological:"Promotes introspection and self-awareness",frequency:null,baseFreq:null},pink_noise_rain:{name:"Pink Noise Rain",description:"Synthetic pink noise for deep relaxation",icon:"🌧️",neurological:"Pink noise (1/f) - enhances deep sleep and memory consolidation",frequency:"pink_noise",baseFreq:200,waveType:"sawtooth"},alpha_waves:{name:"Ocean Waves",description:"Realistic ocean waves with alpha wave entrainment",icon:"🌊",neurological:"Ocean rhythms (0.1 Hz) naturally entrain alpha waves (8-12 Hz) for relaxation",frequency:"ocean_waves",waveFrequency:.1,baseFreq:60,highFreq:200,alphaCarrier:200,alphaBeat:10,waveType:"sine"},earth_frequency:{name:"Earth Resonance",description:"Schumann resonance for grounding",icon:"🌲",neurological:"Earth frequency (7.83 Hz) - natural grounding and balance",frequency:"earth_binaural",carrierFreq:136.1,waveType:"sine"},white_noise:{name:"White Noise",description:"Full spectrum noise for focus",icon:"📻",neurological:"White noise - masks distractions, improves concentration",frequency:"white_noise",baseFreq:440,waveType:"square"},gamma_focus:{name:"Gamma Focus",description:"High-frequency binaural beats for peak concentration",icon:"🎧",neurological:"Gamma waves (40 Hz) - heightened awareness and cognitive performance",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},theta_deep:{name:"Theta Deep State",description:"Deep theta waves for profound meditation",icon:"🌙",neurological:"Theta waves (6 Hz) - deep meditation, creativity, and memory consolidation",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},healing_bowls:{name:"Healing Harmonics",description:"432 Hz healing frequency with natural harmonics",icon:"🎵",neurological:'432 Hz "healing frequency" with harmonic overtones for cellular resonance',frequency:"harmonic",baseFreq:432,harmonics:[432,648,864,1296],waveType:"triangle",premium:!0},delta_deep_sleep:{name:"Delta Deep Sleep",description:"0.5-4 Hz for deep sleep and regeneration",icon:"😴",neurological:"Delta waves (0.5-4 Hz) - deep sleep, physical healing, and immune system boost",frequency:"delta",baseFreq:2,binauralBeat:2,leftEar:200,rightEar:202,waveType:"sine",premium:!0},theta_creativity:{name:"Theta Creativity",description:"4-8 Hz for creativity and insight",icon:"🎨",neurological:"Theta waves (4-8 Hz) - enhanced creativity, insight, and problem-solving",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},alpha_relaxation:{name:"Alpha Relaxation",description:"8-12 Hz for relaxation and stress reduction",icon:"😌",neurological:"Alpha waves (8-12 Hz) - relaxation, stress reduction, and improved learning",frequency:"alpha",baseFreq:10,binauralBeat:10,leftEar:200,rightEar:210,waveType:"sine",premium:!0},beta_focus:{name:"Beta Focus",description:"13-30 Hz for focus and alertness",icon:"🎯",neurological:"Beta waves (13-30 Hz) - focused attention, alertness, and cognitive performance",frequency:"beta",baseFreq:20,binauralBeat:20,leftEar:200,rightEar:220,waveType:"sine",premium:!0},gamma_insight:{name:"Gamma Insight",description:"30-100 Hz for insight and peak performance",icon:"💡",neurological:"Gamma waves (30-100 Hz) - insight, peak performance, and heightened awareness",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},anxiety_relief_528:{name:"Anxiety Relief (528 Hz)",description:"528 Hz frequency for anxiety and stress relief",icon:"🧘",neurological:'528 Hz "Love frequency" - reduces anxiety, promotes healing, and DNA repair',frequency:"single_tone",baseFreq:528,waveType:"sine",premium:!0},depression_lift_639:{name:"Depression Lift (639 Hz)",description:"639 Hz frequency for emotional balance",icon:"🌈",neurological:'639 Hz "Connection frequency" - improves relationships, emotional balance, and communication',frequency:"single_tone",baseFreq:639,waveType:"sine",premium:!0},confidence_boost_741:{name:"Confidence Boost (741 Hz)",description:"741 Hz frequency for self-expression and confidence",icon:"💪",neurological:'741 Hz "Expression frequency" - enhances self-expression, confidence, and creativity',frequency:"single_tone",baseFreq:741,waveType:"sine",premium:!0},intuition_852:{name:"Intuition (852 Hz)",description:"852 Hz frequency for intuition and spiritual awareness",icon:"🔮",neurological:'852 Hz "Intuition frequency" - enhances intuition, spiritual awareness, and inner wisdom',frequency:"single_tone",baseFreq:852,waveType:"sine",premium:!0},solfeggio_396:{name:"Liberation (396 Hz)",description:"396 Hz Solfeggio frequency for fear and guilt release",icon:"🕊️",neurological:'396 Hz "Liberation frequency" - releases fear, guilt, and negative emotions',frequency:"single_tone",baseFreq:396,waveType:"sine",premium:!0},solfeggio_417:{name:"Transformation (417 Hz)",description:"417 Hz Solfeggio frequency for change and transformation",icon:"🦋",neurological:'417 Hz "Transformation frequency" - facilitates change, transformation, and new beginnings',frequency:"single_tone",baseFreq:417,waveType:"sine",premium:!0},solfeggio_963:{name:"Awakening (963 Hz)",description:"963 Hz Solfeggio frequency for spiritual awakening",icon:"✨",neurological:'963 Hz "Awakening frequency" - spiritual awakening, connection to higher consciousness',frequency:"single_tone",baseFreq:963,waveType:"sine",premium:!0}},gu={mindfulness:{name:"Mindfulness",description:"Present-moment awareness practice",duration:[5,10,15,20],icon:"🧘‍♀️"},breathing:{name:"Breathing",description:"Focused breathwork exercises",duration:[3,5,10],icon:"💨"},body_scan:{name:"Body Scan",description:"Progressive muscle relaxation",duration:[10,15,20],icon:"🫁"},loving_kindness:{name:"Loving Kindness",description:"Compassion and heart-opening meditation",duration:[5,10,15],icon:"💖"},flow_state:{name:"Flow State",description:"Neurologically optimized for peak performance",duration:[5,7,10],icon:"🎯",premium:!0}};function Cx({children:t,fallback:e,showUpgrade:n=!0,feature:s="this feature",className:r=""}){const{isPremium:i,upgradeToPremium:o}=In();return i?t:e||u.jsx("div",{className:`premium-gate ${r}`,children:u.jsxs("div",{className:"premium-lock",children:[u.jsx("div",{className:"lock-icon",children:"🔒"}),u.jsx("h3",{children:"Premium Feature"}),u.jsxs("p",{children:["Upgrade to unlock ",s]}),n&&u.jsx("button",{onClick:il,className:"unlock-button",children:"Upgrade to Premium - $4.99/month"})]})})}function Ije(){const{user:t,isPremium:e}=In(),[n,s]=N.useState([]),[r,i]=N.useState({date:$.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),[o,a]=N.useState(!1),[c,d]=N.useState(null),[f,m]=N.useState(!0),[g,E]=N.useState(!1),[S,A]=N.useState(""),[C,x]=N.useState(null),[v,I]=N.useState(!1),[j,L]=N.useState([]),[M,_]=N.useState(""),[y,T]=N.useState(""),[k,R]=N.useState(""),[P,b]=N.useState(!1),[ie,he]=N.useState(0),[X,ee]=N.useState(5),[U,Y]=N.useState(!1),[se,me]=N.useState(!1),[ae,Se]=N.useState("silence");N.useEffect(()=>{console.log("🔍 currentSoundscape changed to:",ae)},[ae]);const[ot,pt]=N.useState(""),[Ze,Wt]=N.useState(null),[re,Ee]=N.useState(null),[ye,Re]=N.useState(null),[Vt,ss]=N.useState(null),[Vs,zr]=N.useState(null),[$i,$h]=N.useState(!1),[qh,qi]=N.useState(!1),On=N.useRef(null);$.formatLocalDate(new Date),N.useEffect(()=>{(()=>{const B="wakeLock"in navigator;$h(B),console.log("🔒 Wake Lock API supported:",B)})()},[]),N.useEffect(()=>{const D=async()=>{if(t!=null&&t.uid)try{m(!0),console.log("🌍 Fetching meditations for timezone:",$.getUserTimezone());const G=((await ir.fetchMeditationsByUser(t.uid)).meditations||[]).map(J=>({...J,localDate:$.formatLocalDate(J.date),localDateTime:$.formatLocalDateTime(J.date),relativeTime:$.getRelativeTime(J.date),isToday:$.isToday(J.date)}));s(G),console.log("🧘 Loaded meditations with timezone data:",G.length)}catch(B){console.error("Error fetching meditations:",B),A("Failed to load meditation sessions")}finally{m(!1)}};t!=null&&t.uid&&D()},[t]),N.useEffect(()=>(console.log("🎵 Audio effect triggered - isSessionActive:",P,"currentSoundscape:",ae),P&&ae!=="silence"&&(console.log("🔊 Setting up audio for soundscape:",ae),bl()),()=>{if(ye)try{Array.isArray(ye)?ye.forEach(D=>{D.stop&&D.stop()}):ye.stop&&ye.stop()}catch(D){console.log("Audio cleanup error:",D)}}),[P,ae]),N.useEffect(()=>(P&&!U?On.current=setInterval(()=>{he(D=>{const B=D+1;return B>=180&&!se&&(me(!0),Nl()),B})},1e3):clearInterval(On.current),()=>clearInterval(On.current)),[P,U,se]),N.useEffect(()=>{P&&ie>=X*60&&(console.log("⏰ Timer completed! Auto-stopping session..."),console.log("📊 Final session stats:"),console.log("  - Duration:",Math.floor(ie/60),"minutes"),console.log("  - Target:",X,"minutes"),console.log("  - Soundscape:",ae),console.log("  - Deep state achieved:",se),console.log("  - Start time:",$.formatLocalDateTime(Ze)),wa(),Hi())},[P,ie,X,ae,se,Ze]);const Ur=n.filter(D=>D.isToday||$.isToday(D.date));console.log("📋 Today's meditations:",Ur.length),N.useEffect(()=>()=>{Wi(),On.current&&clearInterval(On.current)},[]);const Wh=async()=>{try{if(!$i)return console.log("🔒 Wake Lock API not supported, using fallback methods"),!1;const D=await navigator.wakeLock.request("screen");return zr(D),qi(!0),console.log("🔒 Wake lock activated"),D.addEventListener("release",()=>{console.log("🔒 Wake lock was released"),qi(!1),zr(null)}),!0}catch(D){return console.error("🔒 Failed to request wake lock:",D),!1}},Wi=()=>{try{Vs&&(Vs.release(),zr(null),qi(!1),console.log("🔒 Wake lock released"))}catch(D){console.error("🔒 Error releasing wake lock:",D)}},va=()=>!$i&&(console.log("🔒 Using fallback keep-awake methods"),re&&re.state==="suspended"&&re.resume(),"vibrate"in navigator)?setInterval(()=>{navigator.vibrate(1)},3e4):null,bl=()=>{try{const D=new(window.AudioContext||window.webkitAudioContext);Ee(D);const B=D.createGain();B.connect(D.destination),B.gain.value=.1,ss(B);const G=Qs[ae];if(!(G!=null&&G.frequency)){console.log("🔇 Silence selected");return}switch(G.frequency){case"gamma":case"theta":dt(D,B,G);break;case"alpha":gt(D,B,G);break;case"ocean_waves":Al(D,B,G);break;case"earth_binaural":Gi(D,B,G);break;case"harmonic":kl(D,B,G.harmonics||[G.baseFreq]);break;case"pink_noise":Gh(D,B);break;case"white_noise":Br(D,B);break;case"single_tone":case"natural":Sl(D,B,G.baseFreq,G.waveType||"sine");break;default:console.log("🔇 Unknown frequency type:",G.frequency)}}catch(D){console.error("Audio setup failed:",D)}},dt=(D,B,G)=>{const J=D.createOscillator();J.frequency.setValueAtTime(G.leftEar,D.currentTime),J.type=G.waveType||"sine";const le=D.createOscillator();le.frequency.setValueAtTime(G.rightEar,D.currentTime),le.type=G.waveType||"sine";const Z=D.createStereoPanner();Z.pan.value=-1;const pe=D.createStereoPanner();pe.pan.value=1,J.connect(Z),Z.connect(B),le.connect(pe),pe.connect(B),J.start(),le.start(),Re([J,le]),console.log(`🎧 Binaural beats: ${G.leftEar}Hz (L) / ${G.rightEar}Hz (R) = ${G.binauralBeat}Hz beat`)},gt=(D,B,G)=>{const le=G.baseFreq,Z=D.createOscillator();Z.frequency.setValueAtTime(200,D.currentTime),Z.type=G.waveType||"sine";const pe=D.createOscillator();pe.frequency.setValueAtTime(200+le,D.currentTime),pe.type=G.waveType||"sine";const je=D.createStereoPanner();je.pan.value=-1;const Be=D.createStereoPanner();Be.pan.value=1,Z.connect(je),je.connect(B),pe.connect(Be),Be.connect(B),Z.start(),pe.start(),Re([Z,pe]),console.log(`🌊 Alpha binaural: 200Hz (L) / ${200+le}Hz (R) = ${le}Hz beat`)},Gi=(D,B,G)=>{const J=G.carrierFreq||136.1,le=7.83,Z=D.createOscillator();Z.frequency.setValueAtTime(J,D.currentTime),Z.type=G.waveType||"sine";const pe=D.createOscillator();pe.frequency.setValueAtTime(J+le,D.currentTime),pe.type=G.waveType||"sine";const je=D.createStereoPanner();je.pan.value=-1;const Be=D.createStereoPanner();Be.pan.value=1,Z.connect(je),je.connect(B),pe.connect(Be),Be.connect(B),Z.start(),pe.start(),Re([Z,pe]),console.log(`🌲 Earth binaural: ${J}Hz (L) / ${J+le}Hz (R) = ${le}Hz Schumann beat`)},Sl=(D,B,G,J="sine")=>{const le=D.createOscillator();le.frequency.setValueAtTime(G,D.currentTime),le.type=J,le.connect(B),le.start(),Re(le),console.log(`🎵 Single tone: ${G}Hz (${J})`)},kl=(D,B,G)=>{const J=G.map(le=>{const Z=D.createOscillator();Z.frequency.setValueAtTime(le,D.currentTime),Z.type="triangle";const pe=D.createGain();return pe.gain.value=.3/G.length,Z.connect(pe),pe.connect(B),Z.start(),Z});Re(J),console.log(`🎼 Harmonics: ${G.join(", ")}Hz`)},Gh=(D,B)=>{const G=D.sampleRate*2,J=D.createBuffer(1,G,D.sampleRate),le=J.getChannelData(0);for(let pe=0;pe<G;pe++){let je=0;for(let Be=0;Be<5;Be++)je+=(Math.random()*2-1)/Math.pow(2,Be);le[pe]=je*.1}const Z=D.createBufferSource();Z.buffer=J,Z.loop=!0,Z.connect(B),Z.start(),Re(Z),console.log("🌧️ Pink noise generated")},Br=(D,B)=>{const G=D.sampleRate*2,J=D.createBuffer(1,G,D.sampleRate),le=J.getChannelData(0);for(let pe=0;pe<G;pe++)le[pe]=(Math.random()*2-1)*.1;const Z=D.createBufferSource();Z.buffer=J,Z.loop=!0,Z.connect(B),Z.start(),Re(Z),console.log("📻 White noise generated")},Al=(D,B,G)=>{const J=[],le=D.createOscillator();le.frequency.setValueAtTime(20,D.currentTime),le.type="sine";const Z=D.createGain();Z.gain.value=.4;const pe=D.createOscillator();pe.frequency.setValueAtTime(396,D.currentTime),pe.type="sine";const je=D.createGain();je.gain.value=.05;const Be=D.createOscillator();Be.frequency.setValueAtTime(.15,D.currentTime),Be.type="sine";const Ta=D.createGain();Ta.gain.value=.3,Be.connect(Ta),Ta.connect(Z.gain),le.connect(Z),Z.connect(B),pe.connect(je),je.connect(B);const Cl=D.createBuffer(1,D.sampleRate*8,D.sampleRate),rs=Cl.getChannelData(0);let Ia=0;for(let Qe=0;Qe<rs.length;Qe++){const yt=Math.random()*2-1;Ia=(Ia+yt*.02)*.99;const Mt=Math.sin(Qe*.001)*.3+.7;rs[Qe]=Ia*Mt*.5}const qr=D.createBufferSource();qr.buffer=Cl,qr.loop=!0;const Ln=D.createOscillator();Ln.frequency.setValueAtTime(432,D.currentTime),Ln.type="triangle";const Wr=D.createGain();Wr.gain.value=.08;const is=D.createBiquadFilter();is.type="bandpass",is.frequency.setValueAtTime(300,D.currentTime),is.Q.setValueAtTime(.8,D.currentTime);const os=D.createGain();os.gain.value=.3;const Gt=D.createOscillator();Gt.frequency.setValueAtTime(.13,D.currentTime),Gt.type="triangle";const Gr=D.createGain();Gr.gain.value=.25,Gt.connect(Gr),Gr.connect(os.gain),Gr.connect(Wr.gain),qr.connect(is),is.connect(os),os.connect(B),Ln.connect(Wr),Wr.connect(B);const xa=D.createBuffer(1,D.sampleRate*6,D.sampleRate),Ki=xa.getChannelData(0);for(let Qe=0;Qe<Ki.length;Qe++){let yt=0;for(let zn=0;zn<3;zn++)yt+=(Math.random()*2-1)*Math.pow(.5,zn);const Mt=Math.random()>.98?(Math.random()*2-1)*.3:0;Ki[Qe]=(yt+Mt)*.15}const as=D.createBufferSource();as.buffer=xa,as.loop=!0;const Ms=D.createOscillator();Ms.frequency.setValueAtTime(528,D.currentTime),Ms.type="sine";const Hr=D.createGain();Hr.gain.value=.06;const Qi=D.createBiquadFilter();Qi.type="highpass",Qi.frequency.setValueAtTime(1500,D.currentTime);const cs=D.createGain();cs.gain.value=.12;const Ls=D.createOscillator();Ls.frequency.setValueAtTime(.5,D.currentTime),Ls.type="sine";const Fs=D.createGain();if(Fs.gain.value=.04,Ls.connect(Fs),Fs.connect(cs.gain),Fs.connect(Hr.gain),as.connect(Qi),Qi.connect(cs),cs.connect(B),Ms.connect(Hr),Hr.connect(B),G.alphaCarrier&&G.alphaBeat){const Qe=D.createOscillator();Qe.frequency.setValueAtTime(G.alphaCarrier,D.currentTime),Qe.type="sine";const yt=D.createOscillator();yt.frequency.setValueAtTime(G.alphaCarrier+G.alphaBeat,D.currentTime),yt.type="sine";const Mt=D.createGain();Mt.gain.value=.03;const zn=D.createStereoPanner();zn.pan.value=-1;const ba=D.createStereoPanner();ba.pan.value=1,Qe.connect(zn),zn.connect(Mt),yt.connect(ba),ba.connect(Mt),Mt.connect(B),J.push(Qe,yt),Qe.start(),yt.start()}const zs=D.createBuffer(1,D.sampleRate*10,D.sampleRate),Fn=zs.getChannelData(0);for(let Qe=0;Qe<Fn.length;Qe++){let yt=0;for(let Mt=0;Mt<4;Mt++)yt+=(Math.random()*2-1)/Math.pow(2,Mt*.7);Fn[Qe]=yt*.2}const ls=D.createBufferSource();ls.buffer=zs,ls.loop=!0;const Kr=D.createBiquadFilter();Kr.type="bandpass",Kr.frequency.setValueAtTime(150,D.currentTime),Kr.Q.setValueAtTime(.4,D.currentTime);const Qr=D.createGain();Qr.gain.value=.15;const Us=D.createOscillator();Us.frequency.setValueAtTime(.07,D.currentTime),Us.type="sine";const Yi=D.createGain();Yi.gain.value=.1,Us.connect(Yi),Yi.connect(Qr.gain),ls.connect(Kr),Kr.connect(Qr),Qr.connect(B),le.start(),pe.start(),Be.start(),qr.start(),Ln.start(),Gt.start(),as.start(),Ms.start(),Ls.start(),ls.start(),Us.start(),J.push(le,pe,Be,qr,Ln,Gt,as,Ms,Ls,ls,Us),Re(J),console.log("🌊✨ Healing Ocean Waves: 396Hz (Liberation) + 432Hz (Earth) + 528Hz (Love) + Alpha binaural beats + Realistic ocean sounds")},Nl=()=>{console.log("🌟 Deep state achieved at:",$.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Deep State Achieved! 🧘‍♀️",{body:`You've entered a deep meditative state at ${$.formatLocalTime(new Date)}. Well done!`,icon:"/meditation-icon.png"})},wa=()=>{console.log("🎉 Session completed at:",$.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Meditation Complete! 🎉",{body:`Great job! You completed your ${X}-minute meditation session.`,icon:"/meditation-icon.png"});try{const D=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAcugtTxzD2sLYPs7lkgCBl5gQEDgVs+l4G6tGEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAc=");D.volume=.3,D.play().catch(()=>{})}catch{}},Hh=async(D,B,G)=>{const J=$.getCurrentLocalTime();if(console.log("🌍 Starting meditation session in timezone:",$.getUserTimezone()),console.log("🧘 Session start time:",$.formatLocalDateTime(J)),console.log("🎵 Selected soundscape:",G),ee(D),he(0),b(!0),Y(!1),me(!1),Wt(J),!await Wh()){console.log("🔒 Wake lock failed, using fallback methods");const Z=va();Z&&(On.current=Z)}"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},Kh=()=>{const D=$.getCurrentLocalTime();console.log("⏸️ Session paused at:",$.formatLocalDateTime(D)),Y(!U),ye&&re&&(U?re.resume():re.suspend())},Hi=async()=>{const D=$.getCurrentLocalTime();if(console.log("⏹️ Session ended at:",$.formatLocalDateTime(D)),console.log("📊 Session duration:",Math.floor(ie/60),"minutes"),console.log("🎯 Target duration:",X,"minutes"),console.log("✅ Session completed?",ie>=X*60),Wi(),ye){if(Array.isArray(ye))ye.forEach(B=>{try{B.stop?B.stop():B.disconnect&&B.disconnect()}catch(G){console.log("Oscillator cleanup:",G)}});else try{ye.stop?ye.stop():ye.disconnect&&ye.disconnect()}catch(B){console.log("Oscillator cleanup:",B)}Re(null)}if(re){try{await re.close()}catch(B){console.log("AudioContext cleanup:",B)}Ee(null)}if(b(!1),Y(!1),ie>=60){console.log("💾 Auto-logging session (duration >= 1 minute)"),console.log("🔍 Session time check:",ie,"seconds"),console.log("🔍 Firebase user:",t==null?void 0:t.uid),console.log("🔍 Session start time:",Ze);try{await Pl(),console.log("✅ Auto-log completed successfully")}catch(B){console.error("❌ Auto-log failed:",B)}}else console.log("⚠️ Session too short, not logging (< 1 minute)");console.log("🔇 Audio stopped and session ended successfully")},Pl=async()=>{var D;if(!(!(t!=null&&t.uid)||!Ze))try{console.log("📝 Auto-logging session with timezone data"),console.log("🧘 Session start time:",$.formatLocalDateTime(Ze)),console.log("⏰ Session duration:",Math.floor(ie/60),"minutes");const B={date:Ze,durationMinutes:Math.floor(ie/60),type:"mindfulness",soundscape:ae,completed:ie>=X*60,deepStateAchieved:se,moodBefore:ot,targetDuration:X,sessionStartTime:Ze,sessionEndTime:$.getCurrentLocalTime(),userTimezone:$.getUserTimezone(),notes:r.notes,sentiment:r.notes?(D=Px(r.notes))==null?void 0:D.score:null};console.log("📊 Session data being saved:",B);const G=await ir.logMeditation(t.uid,B);console.log("✅ API Response:",G);const J={...G.meditation,localDate:$.formatLocalDate(G.meditation.date),localDateTime:$.formatLocalDateTime(G.meditation.date),relativeTime:$.getRelativeTime(G.meditation.date),isToday:$.isToday(G.meditation.date)};console.log("🔄 Adding meditation to UI:",J),console.log("📅 Is today?",J.isToday),console.log("📅 Local date:",J.localDate),s(le=>{const Z=[J,...le];return console.log("📋 Updated meditations list:",Z.length,"total"),Z}),console.log("✅ Session auto-logged and added to UI successfully")}catch(B){console.error("💥 Error auto-logging session:",B),console.error("💥 Error details:",B.message)}},Vn=D=>{const{name:B,value:G}=D.target;i(J=>({...J,[B]:G}))},$r=async D=>{if(D.preventDefault(),!!(t!=null&&t.uid))try{E(!0),A("");let B;if(r.date){const J=r.date.split("-"),le=parseInt(J[0]),Z=parseInt(J[1]),pe=parseInt(J[2]),je=new Date;B=new Date(le,Z-1,pe,je.getHours(),je.getMinutes(),je.getSeconds())}else B=$.getCurrentLocalTime();const G={...r,date:B,durationMinutes:parseInt(r.durationMinutes),userTimezone:$.getUserTimezone()};if(o)await ir.updateMeditation(t.uid,c,G),s(J=>J.map(le=>le.id===c?{...le,...G,localDate:$.formatLocalDate(B),localDateTime:$.formatLocalDateTime(B),relativeTime:$.getRelativeTime(B),isToday:$.isToday(B)}:le)),a(!1),d(null);else{const J=await Py(r.notes);x({score:J.sentiment}),I(J.sentiment!==null),setAiRecommendation(Cy(J.sentiment,J.entities));const le={...G,sentiment:J.sentiment,entities:J.entities},Z=await ir.logMeditation(t.uid,le),pe={...Z.meditation,localDate:$.formatLocalDate(Z.meditation.date),localDateTime:$.formatLocalDateTime(Z.meditation.date),relativeTime:$.getRelativeTime(Z.meditation.date),isToday:$.isToday(Z.meditation.date)};s(je=>[pe,...je])}i({date:$.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),A("")}catch(B){console.error("Error saving meditation:",B),A(o?"Failed to update meditation":"Failed to log meditation")}finally{E(!1)}},_a=D=>{var B;console.log("✏️ Editing meditation from:",$.formatLocalDateTime(D.date)),i({date:$.formatLocalDate(D.date),durationMinutes:((B=D.durationMinutes)==null?void 0:B.toString())||"",type:D.type||"mindfulness",soundscape:D.soundscape||"silence",moodBefore:D.moodBefore||"",moodAfter:D.moodAfter||"",notes:D.notes||""}),a(!0),d(D.id)},Ea=async D=>{if(!(t!=null&&t.uid))return;const B=n.find(J=>J.id===D),G=`Are you sure you want to delete the meditation session from ${(B==null?void 0:B.localDateTime)||"unknown time"}?`;if(window.confirm(G))try{await ir.deleteMeditation(t.uid,D),s(J=>J.filter(le=>le.id!==D)),console.log("🗑️ Meditation deleted successfully")}catch(J){console.error("Error deleting meditation:",J),A("Failed to delete meditation")}},Mn=D=>{const B=Math.floor(D/60),G=D%60;return`${B}:${G.toString().padStart(2,"0")}`};return f?u.jsxs("div",{className:"meditation-loading",children:[u.jsx("p",{children:"Loading meditations..."}),u.jsxs("small",{children:["Timezone: ",$.getUserTimezone()]})]}):u.jsxs("div",{className:"meditation-page",children:[P&&u.jsxs("div",{className:"session-interface",children:[u.jsxs("div",{className:"session-header",children:[u.jsx("h2",{children:"🧘‍♀️ Meditation Session"}),u.jsxs("div",{className:"session-info",children:[u.jsxs("div",{className:"session-soundscape",children:[Qs[ae].icon," ",Qs[ae].name]}),u.jsxs("div",{className:"session-time-info",children:["Started: ",Ze?$.formatLocalTime(Ze):"Now",u.jsx("br",{}),u.jsx("small",{children:$.getUserTimezone()})]}),u.jsx("div",{className:"wake-lock-status",children:qh?u.jsx("span",{className:"wake-lock-active",title:"Screen will stay awake during meditation",children:"🔒 Screen Awake"}):$i?u.jsx("span",{className:"wake-lock-inactive",title:"Screen may sleep during meditation",children:"⚠️ Screen May Sleep"}):u.jsx("span",{className:"wake-lock-unsupported",title:"Wake lock not supported on this device",children:"📱 Using Fallback"})})]})]}),u.jsxs("div",{className:"session-timer",children:[u.jsxs("div",{className:"time-display",children:[u.jsx("span",{className:"current-time",children:Mn(ie)}),u.jsxs("span",{className:"target-time",children:["/ ",Mn(X*60)]})]}),u.jsx("div",{className:"progress-ring",children:u.jsx("div",{className:"meditation-progress-fill",style:{background:`conic-gradient(#4CAF50 ${ie/(X*60)*360}deg, #eee 0deg)`}})})]}),u.jsxs("div",{className:"session-status",children:[se&&u.jsxs("div",{className:"deep-state-indicator",children:["✨ Deep State Achieved at ",$.formatLocalTime(new Date)," ✨"]}),u.jsx("div",{className:"neurological-info",children:u.jsx("p",{children:Qs[ae].neurological})})]}),u.jsxs("div",{className:"session-controls",children:[u.jsxs("button",{onClick:Kh,className:"pause-btn",children:[U?"▶️":"⏸️"," ",U?"Resume":"Pause"]}),u.jsx("button",{onClick:Hi,className:"stop-btn",children:"⏹️ End Session"})]})]}),!P&&u.jsxs("div",{className:"quick-start",children:[u.jsx("h1",{className:"meditation-title",children:"🧘‍♀️ Meditation Studio"}),u.jsxs("p",{className:"subtitle",children:["Neurologically optimized for deep meditation states",u.jsx("br",{})]}),u.jsxs("div",{className:"soundscape-section",children:[u.jsx("h3",{children:"🎵 Step 1: Choose Your Soundscape"}),u.jsx("div",{className:"soundscape-instructions",children:u.jsx("p",{children:"Select a soundscape below (or choose silence for quiet meditation). Click again to deselect."})}),u.jsx("div",{className:"soundscape-grid",children:Object.entries(Qs).map(([D,B])=>u.jsxs("div",{className:`soundscape-option ${B.premium?"premium":""} ${ae===D?"selected":""} ${B.premium&&!e?"locked":""}`,children:[u.jsxs("div",{className:"soundscape-header",children:[u.jsx("span",{className:"soundscape-icon",children:B.icon}),B.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsxs("div",{className:"soundscape-content",onClick:G=>{G.stopPropagation(),G.preventDefault(),console.log("🎵 Soundscape clicked:",D,"current selection:",ae),!B.premium||e?ae===D?(console.log("🔇 Deselecting soundscape to silence"),Se("silence")):(console.log("🔊 Selecting soundscape:",D),Se(D)):alert("This soundscape requires Clarity Premium. Upgrade to access premium features!")},children:[u.jsx("h4",{children:B.name}),u.jsx("p",{className:"soundscape-description",children:B.description}),u.jsx("small",{className:"neurological-note",children:B.neurological})]}),B.premium&&!e&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"lock-icon",children:"🔒"})})]},D))})]}),u.jsxs("div",{className:"quick-start-grid",children:[u.jsx("h3",{children:"⏰ Step 2: Choose Your Session"}),Object.entries(gu).map(([D,B])=>u.jsxs("div",{className:`meditation-type ${B.premium?"premium":""}`,children:[u.jsxs("div",{className:"type-header",children:[u.jsx("span",{className:"type-icon",children:B.icon}),u.jsx("h3",{children:B.name}),B.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsx("p",{className:"type-description",children:B.description}),u.jsx("div",{className:"duration-options",children:B.duration.map(G=>u.jsxs("button",{onClick:()=>{ot||pt(prompt("How are you feeling right now? (😊😔😴😤😌🤔🎉😰)")||"😐"),Hh(G,D,ae)},className:"duration-btn",disabled:B.premium&&!e,children:[G,"min"]},G))})]},D))]})]}),!P&&u.jsxs("div",{className:"meditation-card",children:[u.jsx("h2",{className:"form-title",children:o?"Edit Meditation Session":"Manually Log Session"}),S&&u.jsx("div",{className:"error-message",children:S}),u.jsxs("form",{onSubmit:$r,className:"meditation-form",children:[u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date (",$.getUserTimezone(),")",u.jsx("input",{type:"date",name:"date",value:r.date,onChange:Vn,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:r.durationMinutes,onChange:Vn,className:"form-input",min:"1",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Meditation Type",u.jsx("select",{name:"type",value:r.type,onChange:Vn,className:"form-input",children:Object.entries(gu).map(([D,B])=>u.jsx("option",{value:D,children:B.name},D))})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Soundscape Used",u.jsx("select",{name:"soundscape",value:r.soundscape,onChange:Vn,className:"form-input",children:Object.entries(Qs).map(([D,B])=>u.jsx("option",{value:D,children:B.name},D))})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood Before",u.jsxs("select",{name:"moodBefore",value:r.moodBefore,onChange:Vn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"😊",children:"😊 Happy"}),u.jsx("option",{value:"😔",children:"😔 Sad"}),u.jsx("option",{value:"😴",children:"😴 Tired"}),u.jsx("option",{value:"😤",children:"😤 Frustrated"}),u.jsx("option",{value:"😌",children:"😌 Peaceful"}),u.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),u.jsx("option",{value:"🎉",children:"🎉 Excited"}),u.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood After",u.jsxs("select",{name:"moodAfter",value:r.moodAfter,onChange:Vn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"😊",children:"😊 Happy"}),u.jsx("option",{value:"😔",children:"😔 Sad"}),u.jsx("option",{value:"😴",children:"😴 Tired"}),u.jsx("option",{value:"😤",children:"😤 Frustrated"}),u.jsx("option",{value:"😌",children:"😌 Peaceful"}),u.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),u.jsx("option",{value:"🎉",children:"🎉 Excited"}),u.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:r.notes,onChange:Vn,className:"form-input form-textarea",placeholder:"How did the session feel? Any insights?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:g,children:g?o?"Updating...":"Logging...":o?"Update Session":"Log Session"}),o&&u.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{a(!1),d(null),i({date:$.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})},disabled:g,children:"Cancel"})]})]})]}),C&&v&&u.jsx("div",{className:"sentiment-modal-overlay",children:u.jsxs("div",{className:"sentiment-modal",children:[u.jsxs("span",{className:"sentiment-message",children:[C.score>0&&"Your note sounds positive! 😊",C.score<0&&"Your note sounds a bit negative. 😟",C.score===0&&"Your note sounds neutral. 😐"]}),aiRecommendation&&u.jsxs("div",{className:"ai-recommendation",children:[u.jsx("strong",{children:"AI Suggestion:"})," ",aiRecommendation]}),u.jsx("button",{className:"close-modal-btn",onClick:()=>I(!1),children:"Dismiss"})]})}),!P&&u.jsxs("div",{className:"meditation-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Sessions (",Ur.length,")",u.jsx("br",{}),u.jsxs("small",{children:[$.formatLocalDate(new Date)," - ",$.getUserTimezone()]})]}),Ur.length===0?u.jsxs("p",{className:"no-sessions",children:["No meditation sessions today. Start your mindfulness journey!",u.jsx("br",{}),u.jsxs("small",{children:["Local time: ",$.formatLocalDateTime(new Date)]})]}):u.jsx("ul",{className:"log-list",children:Ur.map(D=>{var B,G,J,le;return u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"meditation-info",children:[u.jsxs("div",{className:"meditation-header",children:[u.jsxs("span",{className:"meditation-type",children:[(B=gu[D.type])==null?void 0:B.icon," ",((G=gu[D.type])==null?void 0:G.name)||D.type]}),u.jsxs("span",{className:"meditation-time",children:[D.localDateTime,u.jsxs("small",{children:[" (",D.relativeTime,")"]})]})]}),u.jsxs("div",{className:"meditation-details",children:[u.jsxs("span",{className:"meditation-duration",children:[D.durationMinutes," min"]}),u.jsxs("span",{className:"meditation-soundscape",children:[(J=Qs[D.soundscape])==null?void 0:J.icon," ",(le=Qs[D.soundscape])==null?void 0:le.name]}),D.deepStateAchieved&&u.jsx("span",{className:"deep-state-badge",children:"✨ Deep State"}),D.moodBefore&&D.moodAfter&&u.jsxs("span",{className:"mood-change",children:[D.moodBefore," → ",D.moodAfter]})]}),D.notes&&u.jsx("div",{className:"meditation-notes",children:D.notes})]}),u.jsxs("div",{className:"meditation-actions",children:[u.jsx("button",{onClick:()=>_a(D),className:"edit-button",disabled:g,children:"Edit"}),u.jsx("button",{onClick:()=>Ea(D.id),className:"delete-button",disabled:g,children:"Delete"})]})]},D.id)})})]}),!P&&u.jsxs("div",{className:"recommended-videos",children:[u.jsx("h2",{className:"recommended-title",children:"🎥 Guided Meditation Videos"}),u.jsxs("p",{className:"timezone-note",children:["Perfect for any time of day in ",$.getUserTimezone()]}),u.jsxs("div",{className:"video-tiles",children:[u.jsxs("a",{href:"https://www.youtube.com/watch?v=VpHz8Mb13_Y",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"🌸"}),u.jsx("p",{className:"video-title",children:"Relaxation and Positivity"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=CqnWMPuyT0g",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"💖"}),u.jsx("p",{className:"video-title",children:"Self Love"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=056qll-07ak",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"🧠"}),u.jsx("p",{className:"video-title",children:"Stop Thinking"})]})]})]}),u.jsx(Cx,{feature:"exclusive meditation experiences",children:u.jsxs("div",{className:"premium-meditation-features",children:[u.jsx("h3",{children:"🧘‍♀️ Premium Meditation Experience"}),u.jsx("p",{children:"Unlock advanced features designed by neuroscientists:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"🎵 Premium binaural soundscapes"}),u.jsx("li",{children:"📊 Advanced session analytics"}),u.jsx("li",{children:"🧠 Personalized meditation recommendations"}),u.jsx("li",{children:"⏰ Smart session reminders based on your timezone"}),u.jsx("li",{children:"📈 Mood tracking and insights"})]})]})})]})}function xje(){const{user:t}=In(),[e,n]=N.useState([]),[s,r]=N.useState({date:"",amount:"",type:"water",notes:""}),[i,o]=N.useState(!1),[a,c]=N.useState(null),[d,f]=N.useState(!0),[m,g]=N.useState(!1),[E,S]=N.useState(""),[A,C]=N.useState(0),[x,v]=N.useState(64),[I,j]=N.useState(null),[L,M]=N.useState(!1),[_,y]=N.useState(null);new Date().toISOString().split("T")[0],N.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const U=await en.fetchWaterIntakeByUser(t.uid);n(U.waterIntakes||[]);const Y=await en.getTodayWaterIntake(t.uid);C(Y.totalOz||0),v(64)}catch(U){console.error("Error fetching water data:",U),S("Failed to load water intake data")}finally{f(!1)}})()},[t]);const T=ee=>{const{name:U,value:Y}=ee.target;r(se=>({...se,[U]:Y}))},k=async ee=>{if(ee.preventDefault(),console.log("💧 Water submit started"),console.log("📊 Form data:",s),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),S("Please log in to save water intake");return}if(!s.amount||!s.date){S("Please fill in all required fields");return}try{g(!0),S("");let U;if(s.date){const me=s.date.split("-"),ae=parseInt(me[0]),Se=parseInt(me[1]),ot=parseInt(me[2]),pt=new Date;console.log("🔍 Water date parsing debug:"),console.log("  Form input:",s.date),console.log("  Split parts:",me),console.log("  Parsed year:",ae),console.log("  Parsed month (human readable):",Se),console.log("  Parsed day:",ot),console.log("  Month for Date constructor (0-indexed):",Se-1),U=new Date(ae,Se-1,ot,pt.getHours(),pt.getMinutes(),pt.getSeconds()),console.log("📅 Created water date:",U),console.log("📅 Verify - Year:",U.getFullYear()),console.log("📅 Verify - Month (0-indexed):",U.getMonth()),console.log("📅 Verify - Month (human):",U.getMonth()+1),console.log("📅 Verify - Day:",U.getDate()),console.log("📅 Final formatted:",U.toLocaleDateString())}else U=new Date;const Y={date:U,amount:parseFloat(s.amount),type:s.type,notes:s.notes};if(console.log("💧 Final water data:",Y),console.log("📅 Will be saved as:",Y.date.toLocaleDateString()),i)await en.updateWaterIntake(t.uid,a,Y),n(me=>me.map(ae=>ae.id===a?{...ae,...Y}:ae)),o(!1),c(null);else{const me=await Py(s.notes);j({score:me.sentiment}),M(me.sentiment!==null),y(Cy(me.sentiment,me.entities));const ae={...Y,sentiment:me.sentiment,entities:me.entities},Se=await en.logWaterIntake(t.uid,ae);n(ot=>[Se.waterIntake,...ot])}const se=await en.getTodayWaterIntake(t.uid);C(se.totalOz||0),r({date:"",amount:"",type:"water",notes:""}),console.log("✅ Water intake logged successfully!")}catch(U){console.error("💥 Water logging error:",U),S(i?"Failed to update water intake":"Failed to log water intake")}finally{g(!1)}},R=ee=>{var Y;o(!0),c(ee.id);const U=ee.date instanceof Date?ee.date.toISOString().split("T")[0]:new Date(ee.date).toISOString().split("T")[0];r({date:U,amount:((Y=ee.amount)==null?void 0:Y.toString())||"",type:ee.type||"water",notes:ee.notes||""})},P=async ee=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this water intake?"))try{await en.deleteWaterIntake(t.uid,ee),n(Y=>Y.filter(se=>se.id!==ee));const U=await en.getTodayWaterIntake(t.uid);C(U.totalOz||0)}catch(U){console.error("Error deleting water intake:",U),S("Failed to delete water intake")}},b=()=>{o(!1),c(null),r({date:"",amount:"",type:"water",notes:""})},ie=async ee=>{if(t!=null&&t.uid)try{g(!0);const U=new Date,Y=new Date(U.getFullYear(),U.getMonth(),U.getDate(),U.getHours(),U.getMinutes(),U.getSeconds());console.log("💧 Quick add date:",Y),console.log("📅 Quick add formatted:",Y.toLocaleDateString()),await en.logWaterIntake(t.uid,{date:Y,amount:ee,type:"water",notes:"",sentiment:null});const se=await en.fetchWaterIntakeByUser(t.uid);n(se.waterIntakes||[]);const me=await en.getTodayWaterIntake(t.uid);C(me.totalOz||0),console.log("✅ Quick add water successful!")}catch(U){console.error("💥 Error quick adding water:",U),S("Failed to log water intake")}finally{g(!1)}},he=e.filter(ee=>{const U=ee.date instanceof Date?ee.date:new Date(ee.date),Y=$.isToday(U);return console.log("🔍 Comparing dates:",{waterDate:U.toLocaleDateString(),today:new Date().toLocaleDateString(),isToday:Y,waterDateObj:U,waterDateType:typeof ee.date}),Y}),X=Math.min(A/x*100,100);return d?u.jsx("div",{className:"water-loading",children:"Loading water data..."}):u.jsxs("div",{className:"water-page",children:[u.jsxs("div",{className:"water-progress",children:[u.jsx("h2",{children:"Daily Hydration Progress"}),u.jsx("div",{className:"progress-info",children:u.jsx("div",{className:"water-progress-bar",children:u.jsx("div",{className:"water-progress-fill",style:{width:`${X}%`}})})}),A>=x&&u.jsx("div",{className:"goal-achieved",children:"🎉 Daily goal achieved! Great job! 🎉"})]}),u.jsxs("div",{className:"quick-add-section",children:[u.jsx("h3",{children:"Quick Add"}),u.jsxs("div",{className:"quick-add-buttons",children:[u.jsxs("button",{onClick:()=>ie(8),className:"quick-add-btn",disabled:m,children:["8 oz",u.jsx("br",{}),u.jsx("small",{children:"Glass"})]}),u.jsxs("button",{onClick:()=>ie(16),className:"quick-add-btn",disabled:m,children:["16 oz",u.jsx("br",{}),u.jsx("small",{children:"Bottle"})]}),u.jsxs("button",{onClick:()=>ie(20),className:"quick-add-btn",disabled:m,children:["20 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Bottle"})]}),u.jsxs("button",{onClick:()=>ie(32),className:"quick-add-btn",disabled:m,children:["32 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Cup"})]})]})]}),u.jsxs("div",{className:"water-card",children:[u.jsx("h1",{className:"water-title",children:i?"Edit Water Intake":"Log Water Intake"}),E&&u.jsx("div",{className:"error-message",children:E}),u.jsxs("form",{onSubmit:k,className:"water-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:s.date,onChange:T,className:"form-input",required:!0})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Amount (oz)",u.jsx("input",{type:"number",name:"amount",value:s.amount,onChange:T,className:"form-input",min:"0.1",step:"0.1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Drink Type",u.jsxs("select",{name:"type",value:s.type,onChange:T,className:"form-input",children:[u.jsx("option",{value:"water",children:"Water"}),u.jsx("option",{value:"tea",children:"Tea"}),u.jsx("option",{value:"coffee",children:"Coffee"}),u.jsx("option",{value:"juice",children:"Juice"}),u.jsx("option",{value:"sports_drink",children:"Sports Drink"}),u.jsx("option",{value:"other",children:"Other"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("input",{type:"text",name:"notes",value:s.notes,onChange:T,className:"form-input",placeholder:"e.g., with lemon, iced, etc."})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Intake":"Log Water"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:b,disabled:m,children:"Cancel"})]})]})]}),I&&L&&u.jsx("div",{className:"sentiment-modal-overlay",children:u.jsxs("div",{className:"sentiment-modal",children:[u.jsxs("span",{className:"sentiment-message",children:[I.score>0&&"Your note sounds positive! 😊",I.score<0&&"Your note sounds a bit negative. 😟",I.score===0&&"Your note sounds neutral. 😐"]}),_&&u.jsxs("div",{className:"ai-recommendation",children:[u.jsx("strong",{children:"AI Suggestion:"})," ",_]}),u.jsx("button",{className:"close-modal-btn",onClick:()=>M(!1),children:"Dismiss"})]})}),u.jsxs("div",{className:"water-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Water Intake (",he.length," entries)"]}),he.length===0?u.jsx("p",{className:"no-intake",children:"No water logged for today. Stay hydrated! 💧"}):u.jsx("ul",{className:"log-list",children:he.map(ee=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"water-info",children:[u.jsxs("span",{className:"water-amount",children:[ee.amount," oz"]}),u.jsx("span",{className:"water-type",children:ee.type}),ee.notes&&u.jsx("span",{className:"water-notes",children:ee.notes})]}),u.jsxs("div",{className:"water-actions",children:[u.jsx("button",{onClick:()=>R(ee),className:"edit-button",disabled:m,children:"Edit"}),u.jsx("button",{onClick:()=>P(ee.id),className:"delete-button",disabled:m,children:"Delete"})]})]},ee.id))})]})]})}function bje(){const{user:t,isPremium:e}=In(),[n,s]=N.useState({workout:{current:0,goal:210},water:{current:0,goal:448},meditation:{current:0,goal:105}}),[r,i]=N.useState([]),[o,a]=N.useState(0),[c,d]=N.useState(!0),[f,m]=N.useState(30),[g,E]=N.useState(64),[S,A]=N.useState(15),[C,x]=N.useState(0),[v,I]=N.useState(!1),[j,L]=N.useState(!1),[M,_]=N.useState(!1),[y,T]=N.useState(null),k=()=>{const Ee=new Date().getDay();return Ee===0?0:7-Ee};N.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{d(!0);const ye=(await Te.getUserProfile(t.uid)).user;m(ye.exerciseGoalMinutes||30),E(ye.waterGoalOz||64),A(ye.meditationGoalMinutes||15);const[Re,Vt,ss]=await Promise.all([fi.getWorkoutSummary(t.uid,7),en.getWaterSummary(t.uid,7),ir.getMeditationSummary(t.uid,7)]);s({workout:{current:Re.totalMinutes||0,goal:(ye.exerciseGoalMinutes||30)*7},water:{current:Vt.totalOz||0,goal:(ye.waterGoalOz||64)*7},meditation:{current:ss.totalMinutes||0,goal:(ye.meditationGoalMinutes||15)*7}}),setTimeout(()=>ae(),100)}catch(Ee){console.error("Error fetching weekly data:",Ee)}finally{d(!1)}})()},[t]),N.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const Ee=await Te.getPoints(t.uid);x(Ee)}})()},[t]),N.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const Ee=await Te.isChallengeCompleted(t.uid,"weekly_meditation_3","weekly");I(Ee)}})()},[t]),N.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const Ee=await Te.isChallengeCompleted(t.uid,"diamond_week","weekly"),ye=await Te.isChallengeCompleted(t.uid,"perfect_balance","weekly");L(Ee),_(ye)}})()},[t]),N.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const Ee=await Te.getUserProfile(t.uid);T(Ee.user.premiumSoundscapeUntil?new Date(Ee.user.premiumSoundscapeUntil):null)}})()},[t]);const R=new Date,P=C>=150&&(!y||y<R),b=y&&y>R,ie=async()=>{if(!(t!=null&&t.uid)||!P)return;await Te.deductPoints(t.uid,150);const re=new Date;re.setDate(re.getDate()+7),await Te.updateUserProfile(t.uid,{premiumSoundscapeUntil:re}),T(re);const Ee=await Te.getPoints(t.uid);x(Ee),alert("You unlocked Premium Soundscape for 1 week!")},he=n.meditation.current/(S||15),X=he>=3,ee=n.workout.current/n.workout.goal>=1.25&&n.water.current/n.water.goal>=1.25&&n.meditation.current/n.meditation.goal>=1.25,U=n.workout.current/n.workout.goal>=1&&n.water.current/n.water.goal>=1&&n.meditation.current/n.meditation.goal>=1,Y=async()=>{if(!(t!=null&&t.uid)||v||!X)return;await Te.addPoints(t.uid,50),await Te.completeChallenge(t.uid,"weekly_meditation_3","weekly"),I(!0);const re=await Te.getPoints(t.uid);x(re),alert("You claimed 50 points for the Weekly Meditation Challenge!")},se=async()=>{if(!(t!=null&&t.uid)||j||!ee)return;await Te.addPoints(t.uid,200),await Te.completeChallenge(t.uid,"diamond_week","weekly"),L(!0);const re=await Te.getPoints(t.uid);x(re),alert("You claimed 200 points for Diamond Week Challenge!")},me=async()=>{if(!(t!=null&&t.uid)||M||!U)return;await Te.addPoints(t.uid,150),await Te.completeChallenge(t.uid,"perfect_balance","weekly"),_(!0);const re=await Te.getPoints(t.uid);x(re),alert("You claimed 150 points for Perfect Balance Challenge!")},ae=()=>{const re=[];Object.entries(n).forEach(([Ee,ye])=>{const Re=ye.current/ye.goal*100;Re>=125?re.push({type:Ee,level:"diamond",percentage:Re}):Re>=100?re.push({type:Ee,level:"gold",percentage:Re}):Re>=75?re.push({type:Ee,level:"silver",percentage:Re}):Re>=50&&re.push({type:Ee,level:"bronze",percentage:Re})}),i(re)},Se=re=>{switch(re){case"diamond":return"💎";case"gold":return"🥇";case"silver":return"🥈";case"bronze":return"🥉";default:return"⭐"}},ot=re=>re>=100?"var(--sage-500)":re>=75?"var(--mint)":re>=50?"#FFD700":"var(--sage-300)",pt=re=>re>=100,Ze=async()=>{if(t!=null&&t.uid)try{d(!0);const re=f*7,Ee=g*7,ye=S*7,Re=await Te.updateUserProfile(t.uid,{exerciseGoalMinutes:f,meditationGoalMinutes:S,waterGoalOz:g});s(Vt=>({...Vt,workout:{...Vt.workout,goal:re},water:{...Vt.water,goal:Ee},meditation:{...Vt.meditation,goal:ye}})),setTimeout(()=>ae(),100),console.log("✅ Goals updated successfully")}catch(re){console.error("❌ Error updating goals:",re)}finally{d(!1)}};if(c)return u.jsx("div",{className:"goals-loading",children:"Loading weekly goals..."});const Wt=k();return u.jsxs("div",{className:"goals-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:"⭐"})," ",C," Points"]}),u.jsxs("div",{className:"weekly-header",children:[u.jsx("h1",{className:"goals-title",children:"Weekly Goals"}),u.jsx("p",{className:"goals-subtitle",children:"Track your progress and earn rewards"}),u.jsxs("div",{className:"week-info",children:[u.jsx("span",{className:"week-label",children:"Current Week"}),u.jsx("span",{className:"days-remaining",children:Wt===0?"Last day!":`${Wt} days remaining`})]})]}),u.jsx("div",{className:"weekly-progress",children:Object.entries(n).map(([re,Ee])=>{const ye=Math.min(Ee.current/Ee.goal*100,100),Re=pt(ye),Vt=2*Math.PI*45,ss=Vt,Vs=Vt-ye/100*Vt;return u.jsxs("div",{className:`weekly-ring ${Re?"completed":""}`,children:[u.jsxs("div",{className:"ring-container",children:[u.jsxs("svg",{className:"progress-ring",width:"120",height:"120",children:[u.jsx("circle",{className:"ring-background",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:"var(--sage-100)",strokeWidth:"8"}),u.jsx("circle",{className:"ring-progress",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:ot(ye),strokeWidth:"8",strokeLinecap:"round",strokeDasharray:ss,strokeDashoffset:Vs,transform:"rotate(-90 60 60)"})]}),u.jsxs("div",{className:"ring-content",children:[u.jsx("span",{className:"ring-value",children:Ee.current}),u.jsxs("span",{className:"ring-goal",children:["/ ",Ee.goal]}),u.jsx("span",{className:"ring-label",children:re})]})]}),u.jsxs("div",{className:"ring-percentage",children:[Math.round(ye),"%"]})]},re)})}),u.jsxs("div",{className:"achievement-gallery",children:[u.jsx("h2",{className:"section-title",children:"This Week's Achievements"}),r.length===0?u.jsxs("div",{className:"no-achievements",children:[u.jsx("span",{className:"no-achievement-icon",children:"🎯"}),u.jsx("p",{children:"Keep going! Your first achievement is waiting."})]}):u.jsx("div",{className:"achievements-grid",children:r.map((re,Ee)=>u.jsxs("div",{className:`achievement-card ${re.level}`,children:[u.jsx("div",{className:"achievement-icon",children:Se(re.level)}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:re.level.toUpperCase()}),u.jsx("p",{children:re.type.toUpperCase()}),u.jsxs("span",{className:"achievement-percentage",children:[Math.round(re.percentage),"%"]})]}),!e&&re.level==="diamond"&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"premium-badge",children:"PRO"})})]},Ee))})]}),u.jsxs("div",{className:"streak-section",children:[u.jsx("h2",{className:"section-title",children:"Weekly Streak"}),u.jsxs("div",{className:"streak-card",children:[u.jsx("div",{className:"streak-icon",children:"🔥"}),u.jsxs("div",{className:"streak-info",children:[u.jsx("span",{className:"streak-number",children:o}),u.jsx("span",{className:"streak-label",children:"Week Streak"})]}),u.jsxs("div",{className:"streak-next",children:[u.jsx("span",{children:"Next reward at 4 weeks"}),!e&&u.jsx("span",{className:"premium-hint",children:"PRO"})]})]})]}),u.jsxs("div",{className:"reward-marketplace",children:[u.jsx("h2",{className:"section-title",children:"Reward Marketplace"}),e?u.jsxs("div",{className:"rewards-grid",children:[u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:"🎵"}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Premium Soundscape"}),u.jsx("p",{children:"Unlock for 1 week"}),u.jsx("span",{className:"reward-cost",children:"150 points"}),u.jsx("button",{className:"claim-btn",onClick:ie,disabled:!P,children:b?"Active":"Redeem"}),b&&u.jsxs("div",{className:"reward-status",children:["Active until ",y==null?void 0:y.toLocaleDateString()]})]})]}),u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:"📱"}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Custom Badge"}),u.jsx("p",{children:"Design your own"}),u.jsx("span",{className:"reward-cost",children:"100 points"})]})]})]}):u.jsxs("div",{className:"premium-cta-card",children:[u.jsxs("div",{className:"cta-header",children:[u.jsx("h3",{children:"Unlock Premium Rewards"}),u.jsx("span",{className:"cta-price",children:"$4.99/month"})]}),u.jsxs("div",{className:"premium-features",children:[u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"💎"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"🎯"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"📊"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"🏆"}),u.jsx("span",{children:"Challenge competitions"})]})]}),u.jsx("button",{className:"upgrade-button",onClick:il,children:"Upgrade with Stripe"})]})]}),u.jsxs("div",{className:"weekly-challenges",children:[u.jsx("h2",{className:"section-title",children:"Weekly Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Mindful Monday"}),u.jsx("span",{className:"challenge-reward",children:"+50 points"}),u.jsx("button",{className:"claim-btn",onClick:Y,disabled:!X||v,children:v?"Claimed":"Claim"})]}),u.jsx("p",{className:"challenge-description",children:"Complete 3 meditation sessions this week"}),u.jsxs("div",{className:"challenge-progress",children:[u.jsx("div",{className:"challenge-bar",children:u.jsx("div",{className:"challenge-fill",style:{width:`${Math.min(he/3*100,100)}%`}})}),u.jsxs("span",{className:"challenge-status",children:[Math.floor(he),"/3 completed"]})]}),!e&&u.jsx("div",{className:"challenge-premium",children:u.jsx("span",{children:"Join Premium for exclusive challenges"})})]})]}),u.jsxs("div",{className:"custom-goals-section",children:[u.jsx("h2",{className:"section-title",children:"Goal Customization"}),u.jsxs("div",{className:"custom-goals-form",children:[u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Workout Goal: ",f," minutes"]}),u.jsx("input",{type:"range",min:"15",max:"120",value:f,onChange:re=>m(parseInt(re.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",f*7," minutes"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Water Goal: ",g," oz"]}),u.jsx("input",{type:"range",min:"32",max:"128",value:g,onChange:re=>E(parseInt(re.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",g*7," oz"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Meditation Goal: ",S," minutes"]}),u.jsx("input",{type:"range",min:"5",max:"60",value:S,onChange:re=>A(parseInt(re.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",S*7," minutes"]})]}),u.jsx("button",{className:"save-goals-btn",onClick:Ze,disabled:c,children:c?"Saving...":"Save Custom Goals"})]})]}),u.jsxs("div",{className:"premium-challenges",children:[u.jsx("h2",{className:"section-title",children:"Exclusive Challenges"}),u.jsx(Cx,{feature:"premium challenges",className:"feature-tease",children:u.jsxs("div",{className:"challenge-preview",children:[u.jsxs("div",{className:"challenge-card premium",children:[u.jsx("div",{className:"challenge-icon",children:"💎"}),u.jsxs("div",{className:"challenge-content",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Diamond Week Challenge"}),u.jsx("span",{className:"challenge-reward",children:"+200 points"}),u.jsx("button",{className:"claim-btn",onClick:se,disabled:!ee||j,children:j?"Claimed":"Claim"})]}),u.jsx("p",{children:"Complete 125% of all goals for 7 consecutive days"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:"🏆 1,247 participants this week"})})]})]}),u.jsxs("div",{className:"challenge-card premium",children:[u.jsx("div",{className:"challenge-icon",children:"🎯"}),u.jsxs("div",{className:"challenge-content",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Perfect Balance"}),u.jsx("span",{className:"challenge-reward",children:"+150 points"}),u.jsx("button",{className:"claim-btn",onClick:me,disabled:!U||M,children:M?"Claimed":"Claim"})]}),u.jsx("p",{children:"Hit exactly 100% on all three goals in one day"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:"🎉 892 members completed"})})]})]})]})})]})]})}function Sje(){const{user:t,loading:e,isPremium:n,userSubscription:s,trialDaysRemaining:r,upgradeToPremium:i,cancelSubscription:o}=In(),[a,c]=N.useState(null),[d,f]=N.useState({username:"",email:"",firstName:"",lastName:"",exerciseGoalMinutes:"",waterGoalOz:"",meditationGoalMinutes:""}),[m,g]=N.useState(!0),[E,S]=N.useState(!1),[A,C]=N.useState(""),[x,v]=N.useState("");N.useEffect(()=>{const M=async()=>{if(t!=null&&t.uid)try{g(!0);const _=await Te.getUserProfile(t.uid);c(_.user)}catch(_){console.error("Error fetching profile:",_),v("Failed to load profile data")}finally{g(!1)}};t!=null&&t.uid&&M()},[t]),N.useEffect(()=>{a&&f({username:a.username||"",email:a.email||"",firstName:a.firstName||"",lastName:a.lastName||"",exerciseGoalMinutes:a.exerciseGoalMinutes||"",waterGoalOz:a.waterGoalOz||"",meditationGoalMinutes:a.meditationGoalMinutes||""})},[a]);const I=M=>{const{name:_,value:y}=M.target;f(T=>({...T,[_]:y}))},j=async M=>{if(M.preventDefault(),!!(t!=null&&t.uid)){S(!0),v(""),C("");try{console.log("Submitting profile update:",d);const _={...d,exerciseGoalMinutes:parseInt(d.exerciseGoalMinutes)||30,waterGoalOz:parseInt(d.waterGoalOz)||64,meditationGoalMinutes:parseInt(d.meditationGoalMinutes)||10};await Te.updateUserProfile(t.uid,_),c({...a,..._}),C("Profile updated successfully!"),setTimeout(()=>C(""),3e3)}catch(_){console.error("Error updating profile:",_),v("Failed to update profile. Please try again.")}finally{S(!1)}}},L=()=>{a&&f({username:a.username||"",email:a.email||"",firstName:a.firstName||"",lastName:a.lastName||"",exerciseGoalMinutes:a.exerciseGoalMinutes||"",waterGoalOz:a.waterGoalOz||"",meditationGoalMinutes:a.meditationGoalMinutes||""}),v(""),C("")};return e||m?u.jsx("div",{className:"profile-loading",children:"Loading profile..."}):t?u.jsx("div",{className:"profile-page",children:u.jsxs("div",{className:"profile-card",children:[u.jsxs("div",{className:"profile-header",children:[u.jsx("h1",{className:"profile-title",children:"Personal Information"}),u.jsx("p",{className:"profile-subtitle",children:"Update your profile and wellness goals"})]}),A&&u.jsx("div",{className:"success-message",children:A}),x&&u.jsx("div",{className:"error-message",children:x}),a&&u.jsxs("form",{onSubmit:j,className:"profile-form",children:[u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Account Information"}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Username",u.jsx("input",{type:"text",name:"username",value:d.username,onChange:I,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Email",u.jsx("input",{type:"email",name:"email",value:d.email,onChange:I,className:"form-input",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["First Name",u.jsx("input",{type:"text",name:"firstName",value:d.firstName,onChange:I,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Last Name",u.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:I,className:"form-input",required:!0})]})})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Daily Wellness Goals"}),u.jsx("p",{className:"section-description",children:"Set your daily targets to track your progress effectively"}),u.jsxs("div",{className:"goals-grid",children:[u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"🏋️"}),"Exercise Goal (Minutes)",u.jsx("input",{type:"number",name:"exerciseGoalMinutes",value:d.exerciseGoalMinutes,onChange:I,className:"form-input",min:"1",max:"300",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 30-60 minutes"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"💧"}),"Water Goal (Oz)",u.jsx("input",{type:"number",name:"waterGoalOz",value:d.waterGoalOz,onChange:I,className:"form-input",min:"1",max:"200",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 64-100 oz"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"🧘"}),"Meditation Goal (Minutes)",u.jsx("input",{type:"number",name:"meditationGoalMinutes",value:d.meditationGoalMinutes,onChange:I,className:"form-input",min:"1",max:"120",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 5-20 minutes"})]})})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"reset-button",onClick:L,disabled:E,children:"Reset Changes"}),u.jsx("button",{type:"submit",className:"save-button",disabled:E,children:E?"Saving...":"Save Profile"})]})]}),u.jsxs("div",{className:"profile-stats",children:[u.jsx("h3",{className:"section-title",children:"Account Summary"}),u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Member Since"}),u.jsx("span",{className:"stat-value",children:a!=null&&a.createdAt?new Date(a.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Profile Updated"}),u.jsx("span",{className:"stat-value",children:a!=null&&a.updatedAt?new Date(a.updatedAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Goals Set"}),u.jsxs("span",{className:"stat-value",children:[[d.exerciseGoalMinutes,d.waterGoalOz,d.meditationGoalMinutes].filter(M=>M&&M>0).length," / 3"]})]})]})]}),u.jsxs("div",{className:"subscription-section",children:[u.jsx("h2",{children:"Your Plan"}),s==="trial"&&u.jsx("div",{className:"trial-status",children:u.jsxs("div",{className:"status-card trial",children:[u.jsx("h3",{children:"Premium Trial"}),u.jsx("p",{children:"You're experiencing the full premium experience!"}),u.jsxs("div",{className:"trial-countdown",children:[u.jsx("span",{className:"days-remaining",children:r}),u.jsx("span",{className:"days-label",children:"days remaining"})]}),u.jsxs("div",{className:"trial-benefits",children:[u.jsx("p",{children:"Currently enjoying:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"✓ Custom goal setting"}),u.jsx("li",{children:"✓ Diamond achievements"}),u.jsx("li",{children:"✓ Premium soundscapes"}),u.jsx("li",{children:"✓ Advanced analytics"})]})]}),u.jsx("button",{onClick:il,className:"keep-premium-btn",children:"Keep Premium Access - $4.99/month"})]})}),s==="premium"&&u.jsx("div",{className:"premium-status",children:u.jsxs("div",{className:"status-card premium",children:[u.jsx("h3",{children:"💎 Premium Member"}),u.jsx("p",{children:"You have access to all premium features!"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Your Premium Benefits:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:o,className:"cancel-btn",children:"Cancel Subscription"})]})}),s==="free"&&u.jsx("div",{className:"free-status",children:u.jsxs("div",{className:"status-card free",children:[u.jsx("h3",{children:"🆓 Free Plan"}),u.jsx("p",{children:"Upgrade to unlock premium features and enhance your wellness journey"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Unlock with Premium:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🎯"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"💎"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🎵"}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"📊"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🏆"}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"⚡"}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:il,className:"upgrade-btn",children:"Upgrade to Premium - $4.99/month"})]})})]})]})}):u.jsx("div",{className:"profile-error",children:"Please log in to view your profile."})}function kje({children:t}){const{user:e,loading:n}=In();return console.log("🔐 ProtectedRoute - loading:",n,"user:",!!e),n?u.jsx("div",{className:"loading",children:"Loading..."}):e?(console.log("✅ Authenticated, rendering protected content"),t):(console.log("🚫 Not authenticated, redirecting to welcome"),u.jsx(yd,{to:"/welcome",replace:!0}))}const Aje="modulepreload",Nje=function(t){return"/"+t},P2={},Pje=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=Nje(c),c in P2)return;P2[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Aje,d||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((g,E)=>{m.addEventListener("load",g),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function Cje(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:r,onRegisteredSW:i,onRegisterError:o}=t;let a,c;const d=async(m=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(a=await Pje(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/sw.js",{scope:"/",type:"classic"})).catch(m=>{o==null||o(m)}),!a)return;a.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),a.addEventListener("installed",m=>{m.isUpdate||s==null||s()}),a.register({immediate:e}).then(m=>{i?i("/sw.js",m):r==null||r(m)}).catch(m=>{o==null||o(m)})}}return c=f(),d}const Rje=()=>{const[t,e]=N.useState(!1),[n,s]=N.useState(!1);N.useEffect(()=>{Cje({onNeedRefresh(){e(!0)},onOfflineReady(){s(!0)},onRegistered(o){console.log("SW registered: ",o)},onRegisterError(o){console.log("SW registration error",o)}})},[]);const r=()=>{s(!1),e(!1)},i=()=>{updateSW(),r()};return!t&&!n?null:u.jsxs("div",{className:"pwa-update-banner",children:[u.jsxs("div",{className:"pwa-update-content",children:[n&&u.jsxs("div",{className:"pwa-message",children:[u.jsx("span",{children:"App ready to work offline"}),u.jsx("button",{onClick:r,className:"pwa-close-btn",children:"Close"})]}),t&&u.jsxs("div",{className:"pwa-message",children:[u.jsx("span",{children:"New content available, click on reload button to update"}),u.jsx("button",{onClick:i,className:"pwa-update-btn",children:"Reload"}),u.jsx("button",{onClick:r,className:"pwa-close-btn",children:"Close"})]})]}),u.jsx("style",{jsx:!0,children:`
        .pwa-update-banner {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: #6c5ce7;
          color: white;
          padding: 1rem;
          z-index: 9999;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .pwa-update-content {
          max-width: 600px;
          margin: 0 auto;
        }
        
        .pwa-message {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 1rem;
        }
        
        .pwa-update-btn, .pwa-close-btn {
          background: rgba(255, 255, 255, 0.2);
          border: 1px solid rgba(255, 255, 255, 0.3);
          color: white;
          padding: 0.5rem 1rem;
          border-radius: 6px;
          cursor: pointer;
          font-size: 0.875rem;
          transition: background-color 0.2s;
        }
        
        .pwa-update-btn:hover, .pwa-close-btn:hover {
          background: rgba(255, 255, 255, 0.3);
        }
        
        @media (max-width: 768px) {
          .pwa-message {
            flex-direction: column;
            gap: 0.5rem;
          }
          
          .pwa-update-btn, .pwa-close-btn {
            width: 100%;
          }
        }
      `})]})},Dje=()=>{const[t,e]=N.useState(!1),[n,s]=N.useState(null),[r,i]=N.useState("unknown"),[o,a]=N.useState(!1);N.useEffect(()=>{const g=window.matchMedia("(display-mode: standalone)").matches,E=localStorage.getItem("clarity-pwa-dismissed")==="true";if(g||E)return;const S=/iPad|iPhone|iPod/.test(navigator.userAgent),A=/Android/.test(navigator.userAgent);i(S?"ios":A?"android":"desktop");const C=v=>{v.preventDefault(),o||(s(v),e(!0),a(!0))},x=()=>{e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",C),window.addEventListener("appinstalled",x),S&&!o){const v=setTimeout(()=>{o||(e(!0),a(!0))},3e3);return()=>clearTimeout(v)}return()=>{window.removeEventListener("beforeinstallprompt",C),window.removeEventListener("appinstalled",x)}},[o]);const c=async()=>{if(n){n.prompt();const{outcome:g}=await n.userChoice;g==="accepted"&&(e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true"))}},d=()=>{e(!1),localStorage.setItem("clarity-pwa-dismissed","true")};if(!t)return null;const m=(()=>{switch(r){case"ios":return{title:"Add Clarity to Home Screen",steps:["Tap the Share button (📤) at the bottom",'Scroll down and tap "Add to Home Screen"','Tap "Add" to install'],icon:"📱"};case"android":return{title:"Install Clarity App",steps:['Tap "Install" below to add to home screen','Or use the menu (⋮) → "Add to Home Screen"'],icon:"🤖"};case"desktop":return{title:"Install Clarity App",steps:["Click the install icon (📥) in your browser address bar",'Or use the menu → "Install Clarity"'],icon:"💻"};default:return{title:"Install Clarity",steps:["Look for an install option in your browser menu","Or add this page to your bookmarks"],icon:"📱"}}})();return u.jsxs("div",{className:"install-prompt-overlay",children:[u.jsxs("div",{className:"install-prompt",children:[u.jsx("button",{className:"install-close",onClick:d,children:"✕"}),u.jsxs("div",{className:"install-content",children:[u.jsx("div",{className:"install-icon",children:m.icon}),u.jsx("h3",{children:m.title}),u.jsx("div",{className:"install-steps",children:m.steps.map((g,E)=>u.jsxs("div",{className:"install-step",children:[u.jsx("span",{className:"step-number",children:E+1}),u.jsx("span",{className:"step-text",children:g})]},E))}),r==="android"&&n&&u.jsx("button",{className:"install-button",onClick:c,children:"Install Clarity"}),u.jsx("div",{className:"install-benefits",children:u.jsx("p",{children:"✨ Works offline • 🚀 Faster loading • 📱 App-like experience"})})]})]}),u.jsx("style",{jsx:!0,children:`
        .install-prompt-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          padding: 20px;
        }

        .install-prompt {
          background: white;
          border-radius: 16px;
          padding: 24px;
          max-width: 400px;
          width: 100%;
          position: relative;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .install-close {
          position: absolute;
          top: 12px;
          right: 12px;
          background: none;
          border: none;
          font-size: 20px;
          cursor: pointer;
          color: #666;
          padding: 4px;
        }

        .install-content {
          text-align: center;
        }

        .install-icon {
          font-size: 48px;
          margin-bottom: 16px;
        }

        .install-content h3 {
          color: #6b8069;
          margin-bottom: 20px;
          font-size: 20px;
        }

        .install-steps {
          text-align: left;
          margin-bottom: 20px;
        }

        .install-step {
          display: flex;
          align-items: center;
          margin-bottom: 12px;
          padding: 8px 0;
        }

        .step-number {
          background: #6b8069;
          color: white;
          width: 24px;
          height: 24px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 12px;
          font-weight: bold;
          margin-right: 12px;
          flex-shrink: 0;
        }

        .step-text {
          color: #333;
          font-size: 14px;
          line-height: 1.4;
        }

        .install-button {
          background: #6b8069;
          color: white;
          border: none;
          border-radius: 12px;
          padding: 12px 24px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          margin-bottom: 16px;
          transition: background-color 0.2s;
        }

        .install-button:hover {
          background: #556b54;
        }

        .install-benefits {
          background: #f6f7f6;
          border-radius: 8px;
          padding: 12px;
        }

        .install-benefits p {
          color: #6b8069;
          font-size: 12px;
          margin: 0;
        }

        @media (max-width: 480px) {
          .install-prompt {
            margin: 20px;
            padding: 20px;
          }
        }
      `})]})},jje=()=>{const[t,e]=N.useState(!1),[n,s]=N.useState(null),[r,i]=N.useState(!1),[o,a]=N.useState(!1);N.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const d=localStorage.getItem("clarity-pwa-dismissed")==="true",f=localStorage.getItem("clarity-pwa-installed")==="true";if(d||f)return;const m=S=>{S.preventDefault(),o||(s(S),e(!0),a(!0))},g=()=>{i(!0),e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",m),window.addEventListener("appinstalled",g),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!r&&!o){const S=setTimeout(()=>{o||(e(!0),a(!0))},5e3);return()=>clearTimeout(S)}return()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",g)}},[r,o]);const c=async()=>{if(n){n.prompt();const{outcome:d}=await n.userChoice;d==="accepted"&&(i(!0),e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true"))}else alert('To install: Use your browser menu → "Add to Home Screen" or "Install App"')};return!t||r?null:u.jsxs("div",{className:"floating-install-button",onClick:c,children:[u.jsx("div",{className:"install-icon",children:"📱"}),u.jsx("span",{className:"install-text",children:"Install"}),u.jsx("style",{jsx:!0,children:`
        .floating-install-button {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background: #6b8069;
          color: white;
          border-radius: 50px;
          padding: 12px 20px;
          display: flex;
          align-items: center;
          gap: 8px;
          cursor: pointer;
          box-shadow: 0 4px 12px rgba(107, 128, 105, 0.3);
          z-index: 1000;
          transition: all 0.2s ease;
          font-weight: 600;
          font-size: 14px;
        }

        .floating-install-button:hover {
          background: #556b54;
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(107, 128, 105, 0.4);
        }

        .floating-install-button:active {
          transform: translateY(0);
        }

        .install-icon {
          font-size: 18px;
        }

        .install-text {
          white-space: nowrap;
        }

        @media (max-width: 480px) {
          .floating-install-button {
            bottom: 16px;
            right: 16px;
            padding: 10px 16px;
            font-size: 13px;
          }
        }
      `})]})},$f={worry_worm:{name:"Worry Worm",icon:"🐛",color:"#8B4513",size:"small",technique:"breathing",description:"Those nagging worries that won't go away",tamedMessage:"Worry Worm is now peaceful! 🌱"},panic_bear:{name:"Panic Bear",icon:"🐻",color:"#DC143C",size:"large",technique:"progressive_relaxation",description:"Big scary feelings that make your heart race",tamedMessage:"Panic Bear is now your gentle guardian! 🧸"},overthink_octopus:{name:"Overthink Octopus",icon:"🐙",color:"#4B0082",size:"medium",technique:"mindfulness",description:"Eight arms of spiraling thoughts",tamedMessage:"Overthink Octopus is now zen and focused! 🧘‍♀️"},doom_dragon:{name:"Doom Dragon",icon:"🐉",color:"#8B0000",size:"boss",technique:"breathing",description:"The big bad of catastrophic thinking",tamedMessage:"Doom Dragon is now your wise protector! ✨"}},Ga={breathing:{name:"Deep Breathing",icon:"💨",instructions:["Breathe in for 4","Hold for 4","Breathe out for 6","Repeat"],duration:16e3,color:"#4CAF50"},progressive_relaxation:{name:"Progressive Relaxation",icon:"🧘‍♀️",instructions:["Tense your shoulders","Hold for 3 seconds","Release and relax","Feel the tension melt away"],duration:12e3,color:"#2196F3"},mindfulness:{name:"Mindfulness Anchor",icon:"⚓",instructions:["Notice 3 things you can see","Notice 2 things you can hear","Notice 1 thing you can feel","You are present"],duration:15e3,color:"#FF9800"}},yu={TAMED_MONSTERS:"anxiety_game_tamed_monsters",PLAYER_STATS:"anxiety_game_player_stats"};function Oje({user:t,onUpdateStats:e}){var L,M,_;const[n,s]=N.useState("menu"),[r,i]=N.useState(null),[o,a]=N.useState([]),[c,d]=N.useState({level:1,experience:0,calmness:100,monstersDefeated:0,sanctuaryPoints:0}),[f,m]=N.useState(0),[g,E]=N.useState(0),[S,A]=N.useState(!1),C=N.useRef(null);N.useEffect(()=>{try{const y=localStorage.getItem(yu.TAMED_MONSTERS);if(y){const R=JSON.parse(y).map(P=>({...$f[P],id:P}));a(R)}const T=localStorage.getItem(yu.PLAYER_STATS);if(T){const k=JSON.parse(T);d(k)}}catch(y){console.error("Error loading game data from localStorage:",y)}},[]);const x=()=>{const y=Object.keys($f),T=y[Math.floor(Math.random()*y.length)],k={...$f[T],id:T};i(k),s("encounter");const R=k.size==="boss"?30:k.size==="large"?20:10;d(P=>({...P,calmness:Math.max(0,P.calmness-R)}))},v=()=>{const y=Ga[r.technique]||Ga.breathing;s("technique"),m(0),E(0),I(y)},I=y=>{const T=y.duration/y.instructions.length;let k=0;const R=setInterval(()=>{E(k),m((k+1)/y.instructions.length*100),k===y.instructions.length-1?(clearInterval(R),setTimeout(()=>{j()},T)):k++},T);C.current=R},j=()=>{const y=r.size==="boss"?100:r.size==="large"?50:25,T=r.size==="boss"?20:10;a(k=>[...k,r]),d(k=>({...k,experience:k.experience+y,calmness:Math.min(100,k.calmness+30),monstersDefeated:k.monstersDefeated+1,sanctuaryPoints:k.sanctuaryPoints+T,level:Math.floor((k.experience+y)/100)+1})),s("victory"),e&&e({anxietyGameScore:c.monstersDefeated+1,mindfulnessPoints:T})};return N.useEffect(()=>{if(n==="technique"&&(r==null?void 0:r.technique)==="breathing"){const y=setInterval(()=>{A(T=>!T)},2e3);return()=>clearInterval(y)}},[n,r]),N.useEffect(()=>()=>{C.current&&clearInterval(C.current)},[]),N.useEffect(()=>{try{const y=o.map(T=>T.id);localStorage.setItem(yu.TAMED_MONSTERS,JSON.stringify(y))}catch(y){console.error("Error saving tamed monsters to localStorage:",y)}},[o]),N.useEffect(()=>{try{localStorage.setItem(yu.PLAYER_STATS,JSON.stringify(c))}catch(y){console.error("Error saving player stats to localStorage:",y)}},[c]),u.jsxs("div",{className:"monster-tamer-game",children:[n==="menu"&&u.jsxs("div",{className:"game-menu",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h2",{children:"👾 Anxiety Monster Tamer"}),u.jsx("p",{children:"Use mindfulness to tame your anxiety monsters!"})]}),u.jsxs("div",{className:"player-stats",children:[u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"⭐"}),u.jsxs("span",{children:["Level ",c.level]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("span",{children:["Calmness: ",c.calmness,"%"]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"👾"}),u.jsxs("span",{children:["Tamed: ",c.monstersDefeated]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"🏠"}),u.jsxs("span",{children:["Sanctuary: ",c.sanctuaryPoints]})]})]}),u.jsx("button",{className:"encounter-btn",onClick:x,disabled:c.calmness<10,children:c.calmness<10?"Rest First 😴":"Encounter Monster 👾"}),c.calmness<10&&u.jsx("button",{className:"rest-btn",onClick:()=>d(y=>({...y,calmness:Math.min(100,y.calmness+50)})),style:{background:"linear-gradient(135deg, #FF9800 0%, #FF5722 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"20px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"12px"},children:"Rest & Recover 🧘‍♀️ (+50 Calmness)"}),u.jsxs("div",{className:"tamed-collection",children:[u.jsx("h3",{children:"Your Tamed Monsters:"}),u.jsx("div",{className:"tamed-grid",children:o.length===0?u.jsx("p",{className:"no-tamed",children:"No monsters tamed yet. Start your journey!"}):o.map((y,T)=>u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon",children:y.icon}),u.jsx("span",{className:"monster-name",children:y.name})]},T))})]})]}),n==="encounter"&&r&&u.jsxs("div",{className:"monster-encounter",children:[u.jsxs("div",{className:"encounter-scene",children:[u.jsxs("div",{className:`monster ${r.size} ${r.id}`,children:[u.jsx("div",{className:"monster-icon",children:r.icon}),u.jsx("div",{className:"monster-shake"})]}),u.jsxs("div",{className:"encounter-text",children:[u.jsxs("h3",{children:["A wild ",r.name," appears!"]}),u.jsx("p",{children:r.description}),u.jsx("p",{className:"calmness-drop",children:"Your calmness dropped! 😰"})]})]}),u.jsxs("div",{className:"taming-options",children:[u.jsxs("button",{className:"tame-btn",onClick:v,children:[u.jsx("span",{className:"technique-icon",children:((L=Ga[r.technique])==null?void 0:L.icon)||"💨"}),"Use ",((M=Ga[r.technique])==null?void 0:M.name)||"Deep Breathing"]}),u.jsx("button",{className:"run-btn",onClick:()=>s("menu"),children:"Run Away 🏃‍♀️"})]})]}),n==="technique"&&r&&u.jsxs("div",{className:"taming-technique",children:[u.jsxs("div",{className:"technique-header",children:[u.jsxs("h3",{children:["Taming ",r.name]}),u.jsx("div",{className:"anxiety-progress",children:u.jsx("div",{className:"anxiety-progress-fill",style:{width:`${f}%`}})})]}),u.jsx("div",{className:`technique-visual ${S?"breathing":""}`,children:u.jsxs("div",{className:"monster-calming",children:[u.jsx("span",{className:"monster-icon",children:r.icon}),u.jsx("div",{className:"calming-aura"})]})}),u.jsx("div",{className:"technique-instructions",children:(_=Ga[r.technique])==null?void 0:_.instructions.map((y,T)=>u.jsx("div",{className:`instruction ${T===g?"active":T<g?"completed":""}`,children:y},T))})]}),n==="victory"&&r&&u.jsxs("div",{className:"victory-screen",children:[u.jsx("div",{className:"victory-animation",children:u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon happy",children:r.icon}),u.jsx("div",{className:"sparkles",children:"✨✨✨"})]})}),u.jsxs("div",{className:"victory-text",children:[u.jsx("h3",{children:"🎉 Monster Tamed!"}),u.jsx("p",{children:r.tamedMessage}),u.jsxs("div",{className:"rewards",children:[u.jsx("div",{className:"reward",children:"+30 Calmness 🧘‍♀️"}),u.jsxs("div",{className:"reward",children:["+",r.size==="boss"?100:r.size==="large"?50:25," Experience ⭐"]}),u.jsxs("div",{className:"reward",children:["+",r.size==="boss"?20:10," Sanctuary Points 🏠"]})]})]}),u.jsxs("div",{className:"victory-actions",children:[u.jsx("button",{className:"continue-btn",onClick:()=>s("menu"),children:"Continue Journey ➡️"}),u.jsx("button",{className:"sanctuary-btn",onClick:()=>s("sanctuary"),children:"Visit Sanctuary 🏛️"})]})]}),n==="sanctuary"&&u.jsxs("div",{className:"sanctuary-view",children:[u.jsxs("div",{className:"sanctuary-header",children:[u.jsx("h2",{children:"🏛️ Your Peaceful Sanctuary"}),u.jsx("p",{children:"A safe space built from your mindfulness journey"}),u.jsx("button",{className:"back-to-menu-btn",onClick:()=>s("menu"),children:"← Back to Adventure"})]}),u.jsxs("div",{className:"sanctuary-stats",children:[u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"🏠"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:c.sanctuaryPoints}),u.jsx("span",{className:"stat-label",children:"Sanctuary Points"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"👾"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:o.length}),u.jsx("span",{className:"stat-label",children:"Peaceful Companions"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"stat-info",children:[u.jsxs("span",{className:"stat-number",children:[c.calmness,"%"]}),u.jsx("span",{className:"stat-label",children:"Current Calmness"})]})]})]}),u.jsxs("div",{className:"sanctuary-garden",children:[u.jsx("h3",{children:"🌸 Mindfulness Garden"}),u.jsxs("div",{className:"garden-grid",children:[o.length===0?u.jsxs("div",{className:"empty-garden",children:[u.jsx("div",{className:"empty-garden-icon",children:"🌱"}),u.jsx("p",{children:"Your garden awaits your first peaceful companion..."}),u.jsx("small",{children:"Tame monsters to populate your sanctuary!"})]}):o.map((y,T)=>u.jsx("div",{className:"garden-companion",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"companion-icon",children:y.icon}),u.jsx("div",{className:"companion-aura"}),u.jsx("div",{className:"companion-name",children:y.name}),u.jsx("div",{className:"companion-effect",children:"Radiating peace ✨"})]})},T)),Array.from({length:Math.max(0,6-o.length)}).map((y,T)=>u.jsx("div",{className:"garden-companion empty",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"empty-spot",children:"?"}),u.jsx("div",{className:"spot-label",children:"Awaiting Friend"})]})},`empty-${T}`))]})]}),u.jsxs("div",{className:"sanctuary-upgrades",children:[u.jsx("h3",{children:"🏗️ Sanctuary Upgrades"}),u.jsxs("div",{className:"upgrades-grid",children:[u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=50?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"🌈"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Rainbow Bridge"}),u.jsx("p",{children:"Connects different areas of your sanctuary"}),u.jsx("span",{className:"upgrade-cost",children:"50 Points"})]}),c.sanctuaryPoints>=50?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=100?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"⛲"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Meditation Fountain"}),u.jsx("p",{children:"Restores calmness over time"}),u.jsx("span",{className:"upgrade-cost",children:"100 Points"})]}),c.sanctuaryPoints>=100?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=200?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"🏰"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Wisdom Tower"}),u.jsx("p",{children:"Unlock advanced meditation techniques"}),u.jsx("span",{className:"upgrade-cost",children:"200 Points"})]}),c.sanctuaryPoints>=200?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]})]})]}),u.jsxs("div",{className:"daily-affirmations",children:[u.jsx("h3",{children:"💭 Daily Affirmation"}),u.jsxs("div",{className:"affirmation-card",children:[u.jsx("div",{className:"affirmation-text",children:'"I am creating a sanctuary of peace within myself, one mindful moment at a time."'}),u.jsx("div",{className:"affirmation-author",children:"- Your Inner Wisdom"})]})]}),u.jsxs("div",{className:"sanctuary-actions",children:[u.jsx("button",{className:"meditation-btn",onClick:()=>{d(y=>({...y,calmness:Math.min(100,y.calmness+10)}))},children:"🧘‍♀️ Meditate in Sanctuary (+10 Calmness)"}),u.jsx("button",{className:"encounter-btn",onClick:()=>{s("menu"),setTimeout(()=>{x()},500)},children:"👾 Ready for Another Adventure"})]})]})]})}function Vje(){const{user:t}=In(),[e,n]=N.useState({anxietyGameScore:0,mindfulnessPoints:0,totalGamesPlayed:0,currentStreak:0}),[s,r]=N.useState(!1),[i,o]=N.useState(!1),[a,c]=N.useState(0);N.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const C=await Te.getPoints(t.uid);c(C)}})()},[t]),N.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const C=await Te.isChallengeCompleted(t.uid,"monster_tamer_daily","daily"),x=await Te.isChallengeCompleted(t.uid,"mindfulness_master_daily","daily");r(C),o(x)}})()},[t]),N.useEffect(()=>{try{const A=localStorage.getItem("clarity_game_stats");if(A){const x=JSON.parse(A);n(x),console.log("🎮 Loaded saved game stats:",x)}const C=localStorage.getItem("anxiety_game_tamed_monsters");if(C){const v=JSON.parse(C).length;n(I=>{const j={...I,anxietyGameScore:Math.max(I.anxietyGameScore,v)};return localStorage.setItem("clarity_game_stats",JSON.stringify(j)),console.log("🎮 Synced monster count:",v),j})}}catch(A){console.error("Error loading game stats:",A)}},[]);const d=A=>{console.log("🎮 handleUpdateStats called with:",A),n(C=>{const x={...C,anxietyGameScore:A.anxietyGameScore||C.anxietyGameScore,mindfulnessPoints:C.mindfulnessPoints+(A.mindfulnessPoints||0),totalGamesPlayed:C.totalGamesPlayed+1};try{localStorage.setItem("clarity_game_stats",JSON.stringify(x)),console.log("🎮 Saved game stats to localStorage:",x)}catch(v){console.error("Error saving game stats:",v)}return x}),console.log("🎮 Game stats updated:",A)},f=()=>{try{const A=localStorage.getItem("anxiety_game_tamed_monsters"),C=localStorage.getItem("anxiety_game_player_stats");if(console.log("🎮 Debug - Tamed monsters:",A),console.log("🎮 Debug - Player stats:",C),A){const v=JSON.parse(A).length;n(I=>({...I,anxietyGameScore:v})),console.log("🎮 Debug - Updated anxietyGameScore to:",v)}}catch(A){console.error("Error refreshing stats:",A)}},m=e.anxietyGameScore>=3,g=e.mindfulnessPoints>=100,E=async()=>{if(!(t!=null&&t.uid)||s||!m)return;await Te.addPoints(t.uid,50),await Te.completeChallenge(t.uid,"monster_tamer_daily","daily"),r(!0);const A=await Te.getPoints(t.uid);c(A),alert("You claimed 50 points for Monster Tamer Challenge!")},S=async()=>{if(!(t!=null&&t.uid)||i||!g)return;await Te.addPoints(t.uid,75),await Te.completeChallenge(t.uid,"mindfulness_master_daily","daily"),o(!0);const A=await Te.getPoints(t.uid);c(A),alert("You claimed 75 points for Mindfulness Master Challenge!")};return u.jsxs("div",{className:"games-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:"⭐"})," ",a," Points"]}),u.jsxs("div",{className:"games-header",children:[u.jsx("h1",{className:"games-title",children:"Mental Wellness Games"}),u.jsx("p",{className:"games-subtitle",children:"Play games to improve your mental health"})]}),u.jsxs("div",{className:"game-stats-section",children:[u.jsxs("div",{className:"stats-header",children:[u.jsx("h2",{className:"section-title",children:"Your Gaming Stats"}),u.jsx("button",{onClick:f,className:"refresh-stats-btn",title:"Refresh stats from game data",children:"🔄 Refresh"})]}),u.jsxs("div",{className:"game-stats-grid",children:[u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"👾"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.anxietyGameScore}),u.jsx("span",{className:"stat-label",children:"Monsters Tamed"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.mindfulnessPoints}),u.jsx("span",{className:"stat-label",children:"Mindfulness Points"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🎮"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.totalGamesPlayed}),u.jsx("span",{className:"stat-label",children:"Games Played"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🔥"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.currentStreak}),u.jsx("span",{className:"stat-label",children:"Day Streak"})]})]})]})]}),u.jsxs("div",{className:"available-games",children:[u.jsx("h2",{className:"section-title",children:"Available Games"}),u.jsxs("div",{className:"game-section",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h3",{className:"game-title",children:"🎮 Anxiety Monster Tamer"}),u.jsx("span",{className:"game-status",children:"Active"})]}),u.jsx("p",{className:"game-description",children:"Face your anxiety monsters and tame them through mindful interaction. Each monster represents different anxiety triggers. Practice coping strategies while earning points!"}),u.jsx("div",{className:"game-container",children:u.jsx(Oje,{user:t,onUpdateStats:d})})]}),u.jsxs("div",{className:"daily-challenges",children:[u.jsx("h2",{className:"section-title",children:"Daily Gaming Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:"👾"}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Monster Tamer Challenge"}),u.jsx("p",{children:"Tame 3 anxiety monsters today"}),u.jsx("div",{className:"challenge-progress",children:u.jsx("div",{className:"daily-challenge-bar",children:u.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.anxietyGameScore/3*100,100)}%`}})})})]}),u.jsxs("div",{className:"challenge-reward",children:[u.jsx("span",{children:"+50 points"}),u.jsx("button",{className:"claim-btn",onClick:E,disabled:!m||s,children:s?"Claimed":"Claim"})]})]}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Mindfulness Master"}),u.jsx("p",{children:"Earn 100 mindfulness points"}),u.jsx("div",{className:"challenge-progress",children:u.jsx("div",{className:"daily-challenge-bar",children:u.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.mindfulnessPoints/100*100,100)}%`}})})})]}),u.jsxs("div",{className:"challenge-reward",children:[u.jsx("span",{children:"+75 points"}),u.jsx("button",{className:"claim-btn",onClick:S,disabled:!g||i,children:i?"Claimed":"Claim"})]})]})]}),u.jsxs("div",{className:"game-achievements",children:[u.jsx("h2",{className:"section-title",children:"Gaming Achievements"}),u.jsxs("div",{className:"achievements-grid",children:[e.anxietyGameScore>=1&&u.jsxs("div",{className:"achievement-card bronze",children:[u.jsx("div",{className:"achievement-icon",children:"🥉"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"FIRST VICTORY"}),u.jsx("p",{children:"Tamed your first monster"})]})]}),e.anxietyGameScore>=5&&u.jsxs("div",{className:"achievement-card silver",children:[u.jsx("div",{className:"achievement-icon",children:"🥈"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MONSTER HUNTER"}),u.jsx("p",{children:"Tamed 5 monsters"})]})]}),e.anxietyGameScore>=10&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:"🥇"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"ANXIETY MASTER"}),u.jsx("p",{children:"Tamed 10 monsters"})]})]}),e.mindfulnessPoints>=100&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MINDFUL GURU"}),u.jsx("p",{children:"Earned 100+ mindfulness points"})]})]})]})]}),u.jsxs("div",{className:"coming-soon-games",children:[u.jsx("h3",{className:"section-title",children:"More Games Coming Soon"}),u.jsxs("div",{className:"game-preview-grid",children:[u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🌱"}),u.jsx("h4",{children:"Mindful Garden"}),u.jsx("p",{children:"Grow a virtual garden through daily meditation practice"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🌊"}),u.jsx("h4",{children:"Calm Waters"}),u.jsx("p",{children:"Navigate peaceful waters while practicing breathing exercises"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🎯"}),u.jsx("h4",{children:"Focus Quest"}),u.jsx("p",{children:"Complete challenges that improve concentration and focus"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]})]})]})]})]})}function Mje(){return u.jsx(xx,{children:u.jsxs(EA,{children:[u.jsxs(fA,{children:[u.jsx(fn,{path:"/welcome",element:u.jsx(IO,{})}),u.jsxs(fn,{path:"/",element:u.jsx(kje,{children:u.jsx(TO,{})}),children:[u.jsx(fn,{index:!0,element:u.jsx(yd,{to:"/dashboard",replace:!0})}),u.jsx(fn,{path:"dashboard",element:u.jsx(NO,{})}),u.jsx(fn,{path:"workout",element:u.jsx(Tje,{})}),u.jsx(fn,{path:"meditation",element:u.jsx(Ije,{})}),u.jsx(fn,{path:"water",element:u.jsx(xje,{})}),u.jsx(fn,{path:"goals",element:u.jsx(bje,{})}),u.jsx(fn,{path:"profile",element:u.jsx(Sje,{})}),u.jsx(fn,{path:"games",element:u.jsx(Vje,{})})]}),u.jsx(fn,{path:"*",element:u.jsx(yd,{to:"/welcome",replace:!0})})]}),u.jsx(Rje,{}),u.jsx(Dje,{}),u.jsx(jje,{})]})})}qf.createRoot(document.getElementById("root")).render(u.jsx(ws.StrictMode,{children:u.jsx(xx,{children:u.jsx(Mje,{})})}));
