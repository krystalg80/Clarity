function Hx(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function N2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var C2={exports:{}},Kd={},R2={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rl=Symbol.for("react.element"),Kx=Symbol.for("react.portal"),Qx=Symbol.for("react.fragment"),Yx=Symbol.for("react.strict_mode"),Xx=Symbol.for("react.profiler"),Jx=Symbol.for("react.provider"),Zx=Symbol.for("react.context"),eb=Symbol.for("react.forward_ref"),tb=Symbol.for("react.suspense"),nb=Symbol.for("react.memo"),sb=Symbol.for("react.lazy"),iv=Symbol.iterator;function rb(t){return t===null||typeof t!="object"?null:(t=iv&&t[iv]||t["@@iterator"],typeof t=="function"?t:null)}var D2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j2=Object.assign,V2={};function ta(t,e,n){this.props=t,this.context=e,this.refs=V2,this.updater=n||D2}ta.prototype.isReactComponent={};ta.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ta.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function O2(){}O2.prototype=ta.prototype;function kp(t,e,n){this.props=t,this.context=e,this.refs=V2,this.updater=n||D2}var Sp=kp.prototype=new O2;Sp.constructor=kp;j2(Sp,ta.prototype);Sp.isPureReactComponent=!0;var ov=Array.isArray,M2=Object.prototype.hasOwnProperty,Ap={current:null},L2={key:!0,ref:!0,__self:!0,__source:!0};function F2(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)M2.call(e,s)&&!L2.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:rl,type:t,key:i,ref:o,props:r,_owner:Ap.current}}function ib(t,e){return{$$typeof:rl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pp(t){return typeof t=="object"&&t!==null&&t.$$typeof===rl}function ob(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var av=/\/+/g;function Zh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ob(""+t.key):e.toString(36)}function _u(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rl:case Kx:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+Zh(o,0):s,ov(r)?(n="",t!=null&&(n=t.replace(av,"$&/")+"/"),_u(r,e,n,"",function(d){return d})):r!=null&&(Pp(r)&&(r=ib(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(av,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",ov(t))for(var a=0;a<t.length;a++){i=t[a];var c=s+Zh(i,a);o+=_u(i,e,n,c,r)}else if(c=rb(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=s+Zh(i,a++),o+=_u(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ql(t,e,n){if(t==null)return t;var s=[],r=0;return _u(t,s,"","",function(i){return e.call(n,i,r++)}),s}function ab(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},wu={transition:null},cb={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:wu,ReactCurrentOwner:Ap};function z2(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:ql,forEach:function(t,e,n){ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ql(t,function(){e++}),e},toArray:function(t){return ql(t,function(e){return e})||[]},only:function(t){if(!Pp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=ta;ve.Fragment=Qx;ve.Profiler=Xx;ve.PureComponent=kp;ve.StrictMode=Yx;ve.Suspense=tb;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cb;ve.act=z2;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=j2({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ap.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)M2.call(e,c)&&!L2.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];s.children=a}return{$$typeof:rl,type:t.type,key:r,ref:i,props:s,_owner:o}};ve.createContext=function(t){return t={$$typeof:Zx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jx,_context:t},t.Consumer=t};ve.createElement=F2;ve.createFactory=function(t){var e=F2.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:eb,render:t}};ve.isValidElement=Pp;ve.lazy=function(t){return{$$typeof:sb,_payload:{_status:-1,_result:t},_init:ab}};ve.memo=function(t,e){return{$$typeof:nb,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=wu.transition;wu.transition={};try{t()}finally{wu.transition=e}};ve.unstable_act=z2;ve.useCallback=function(t,e){return $t.current.useCallback(t,e)};ve.useContext=function(t){return $t.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};ve.useEffect=function(t,e){return $t.current.useEffect(t,e)};ve.useId=function(){return $t.current.useId()};ve.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return $t.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};ve.useRef=function(t){return $t.current.useRef(t)};ve.useState=function(t){return $t.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return $t.current.useTransition()};ve.version="18.3.1";R2.exports=ve;var P=R2.exports;const Es=N2(P),lb=Hx({__proto__:null,default:Es},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub=P,db=Symbol.for("react.element"),hb=Symbol.for("react.fragment"),fb=Object.prototype.hasOwnProperty,mb=ub.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pb={key:!0,ref:!0,__self:!0,__source:!0};function U2(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)fb.call(e,s)&&!pb.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:db,type:t,key:i,ref:o,props:r,_owner:mb.current}}Kd.Fragment=hb;Kd.jsx=U2;Kd.jsxs=U2;C2.exports=Kd;var u=C2.exports,$f={},B2={exports:{}},dn={},$2={exports:{}},q2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ie){var X=G.length;G.push(ie);e:for(;0<X;){var pe=X-1>>>1,ge=G[pe];if(0<r(ge,ie))G[pe]=ie,G[X]=ge,X=pe;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var ie=G[0],X=G.pop();if(X!==ie){G[0]=X;e:for(var pe=0,ge=G.length,Ce=ge>>>1;pe<Ce;){var je=2*(pe+1)-1,Jt=G[je],Ze=je+1,Mt=G[Ze];if(0>r(Jt,X))Ze<ge&&0>r(Mt,Jt)?(G[pe]=Mt,G[Ze]=X,pe=Ze):(G[pe]=Jt,G[je]=X,pe=je);else if(Ze<ge&&0>r(Mt,X))G[pe]=Mt,G[Ze]=X,pe=Ze;else break e}}return ie}function r(G,ie){var X=G.sortIndex-ie.sortIndex;return X!==0?X:G.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],f=1,m=null,g=3,T=!1,S=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(G){for(var ie=n(d);ie!==null;){if(ie.callback===null)s(d);else if(ie.startTime<=G)s(d),ie.sortIndex=ie.expirationTime,e(c,ie);else break;ie=n(d)}}function D(G){if(A=!1,b(G),!S)if(n(c)!==null)S=!0,$(L);else{var ie=n(d);ie!==null&&oe(D,ie.startTime-G)}}function L(G,ie){S=!1,A&&(A=!1,x(y),y=-1),T=!0;var X=g;try{for(b(ie),m=n(c);m!==null&&(!(m.expirationTime>ie)||G&&!N());){var pe=m.callback;if(typeof pe=="function"){m.callback=null,g=m.priorityLevel;var ge=pe(m.expirationTime<=ie);ie=t.unstable_now(),typeof ge=="function"?m.callback=ge:m===n(c)&&s(c),b(ie)}else s(c);m=n(c)}if(m!==null)var Ce=!0;else{var je=n(d);je!==null&&oe(D,je.startTime-ie),Ce=!1}return Ce}finally{m=null,g=X,T=!1}}var M=!1,E=null,y=-1,I=5,w=-1;function N(){return!(t.unstable_now()-w<I)}function R(){if(E!==null){var G=t.unstable_now();w=G;var ie=!0;try{ie=E(!0,G)}finally{ie?k():(M=!1,E=null)}}else M=!1}var k;if(typeof v=="function")k=function(){v(R)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,J=le.port2;le.port1.onmessage=R,k=function(){J.postMessage(null)}}else k=function(){C(R,0)};function $(G){E=G,M||(M=!0,k())}function oe(G,ie){y=C(function(){G(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){S||T||(S=!0,$(L))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var X=g;g=ie;try{return G()}finally{g=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ie){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var X=g;g=G;try{return ie()}finally{g=X}},t.unstable_scheduleCallback=function(G,ie,X){var pe=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?pe+X:pe):X=pe,G){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=X+ge,G={id:f++,callback:ie,priorityLevel:G,startTime:X,expirationTime:ge,sortIndex:-1},X>pe?(G.sortIndex=X,e(d,G),n(c)===null&&G===n(d)&&(A?(x(y),y=-1):A=!0,oe(D,X-pe))):(G.sortIndex=ge,e(c,G),S||T||(S=!0,$(L))),G},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(G){var ie=g;return function(){var X=g;g=ie;try{return G.apply(this,arguments)}finally{g=X}}}})(q2);$2.exports=q2;var gb=$2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb=P,ln=gb;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var W2=new Set,Ec={};function ji(t,e){Do(t,e),Do(t+"Capture",e)}function Do(t,e){for(Ec[t]=e,t=0;t<e.length;t++)W2.add(e[t])}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qf=Object.prototype.hasOwnProperty,vb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cv={},lv={};function _b(t){return qf.call(lv,t)?!0:qf.call(cv,t)?!1:vb.test(t)?lv[t]=!0:(cv[t]=!0,!1)}function wb(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Eb(t,e,n,s){if(e===null||typeof e>"u"||wb(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Np=/[\-:]([a-z])/g;function Cp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Np,Cp);Tt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Np,Cp);Tt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Np,Cp);Tt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rp(t,e,n,s){var r=Tt.hasOwnProperty(e)?Tt[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Eb(e,n,r,s)&&(n=null),s||r===null?_b(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Rs=yb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wl=Symbol.for("react.element"),lo=Symbol.for("react.portal"),uo=Symbol.for("react.fragment"),Dp=Symbol.for("react.strict_mode"),Wf=Symbol.for("react.profiler"),G2=Symbol.for("react.provider"),H2=Symbol.for("react.context"),jp=Symbol.for("react.forward_ref"),Gf=Symbol.for("react.suspense"),Hf=Symbol.for("react.suspense_list"),Vp=Symbol.for("react.memo"),Xs=Symbol.for("react.lazy"),K2=Symbol.for("react.offscreen"),uv=Symbol.iterator;function Ca(t){return t===null||typeof t!="object"?null:(t=uv&&t[uv]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,ef;function Wa(t){if(ef===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ef=e&&e[1]||""}return`
`+ef+t}var tf=!1;function nf(t,e){if(!t||tf)return"";tf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{tf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wa(t):""}function Tb(t){switch(t.tag){case 5:return Wa(t.type);case 16:return Wa("Lazy");case 13:return Wa("Suspense");case 19:return Wa("SuspenseList");case 0:case 2:case 15:return t=nf(t.type,!1),t;case 11:return t=nf(t.type.render,!1),t;case 1:return t=nf(t.type,!0),t;default:return""}}function Kf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case uo:return"Fragment";case lo:return"Portal";case Wf:return"Profiler";case Dp:return"StrictMode";case Gf:return"Suspense";case Hf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case H2:return(t.displayName||"Context")+".Consumer";case G2:return(t._context.displayName||"Context")+".Provider";case jp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vp:return e=t.displayName||null,e!==null?e:Kf(t.type)||"Memo";case Xs:e=t._payload,t=t._init;try{return Kf(t(e))}catch{}}return null}function Ib(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kf(e);case 8:return e===Dp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Q2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xb(t){var e=Q2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gl(t){t._valueTracker||(t._valueTracker=xb(t))}function Y2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Q2(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Hu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qf(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dv(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=br(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function X2(t,e){e=e.checked,e!=null&&Rp(t,"checked",e,!1)}function Yf(t,e){X2(t,e);var n=br(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xf(t,e.type,br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xf(t,e,n){(e!=="number"||Hu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ga=Array.isArray;function Io(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+br(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Jf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Ga(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:br(n)}}function J2(t,e){var n=br(e.value),s=br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function mv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Z2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Z2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hl,e0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hl=Hl||document.createElement("div"),Hl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bb=["Webkit","ms","Moz","O"];Object.keys(nc).forEach(function(t){bb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nc[e]=nc[t]})});function t0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nc.hasOwnProperty(t)&&nc[t]?(""+e).trim():e+"px"}function n0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=t0(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var kb=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function em(t,e){if(e){if(kb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function tm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nm=null;function Op(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sm=null,xo=null,bo=null;function pv(t){if(t=al(t)){if(typeof sm!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Zd(e),sm(t.stateNode,t.type,e))}}function s0(t){xo?bo?bo.push(t):bo=[t]:xo=t}function r0(){if(xo){var t=xo,e=bo;if(bo=xo=null,pv(t),e)for(t=0;t<e.length;t++)pv(e[t])}}function i0(t,e){return t(e)}function o0(){}var sf=!1;function a0(t,e,n){if(sf)return t(e,n);sf=!0;try{return i0(t,e,n)}finally{sf=!1,(xo!==null||bo!==null)&&(o0(),r0())}}function Ic(t,e){var n=t.stateNode;if(n===null)return null;var s=Zd(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var rm=!1;if(xs)try{var Ra={};Object.defineProperty(Ra,"passive",{get:function(){rm=!0}}),window.addEventListener("test",Ra,Ra),window.removeEventListener("test",Ra,Ra)}catch{rm=!1}function Sb(t,e,n,s,r,i,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var sc=!1,Ku=null,Qu=!1,im=null,Ab={onError:function(t){sc=!0,Ku=t}};function Pb(t,e,n,s,r,i,o,a,c){sc=!1,Ku=null,Sb.apply(Ab,arguments)}function Nb(t,e,n,s,r,i,o,a,c){if(Pb.apply(this,arguments),sc){if(sc){var d=Ku;sc=!1,Ku=null}else throw Error(W(198));Qu||(Qu=!0,im=d)}}function Vi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function c0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gv(t){if(Vi(t)!==t)throw Error(W(188))}function Cb(t){var e=t.alternate;if(!e){if(e=Vi(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return gv(r),t;if(i===s)return gv(r),e;i=i.sibling}throw Error(W(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==s)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function l0(t){return t=Cb(t),t!==null?u0(t):null}function u0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=u0(t);if(e!==null)return e;t=t.sibling}return null}var d0=ln.unstable_scheduleCallback,yv=ln.unstable_cancelCallback,Rb=ln.unstable_shouldYield,Db=ln.unstable_requestPaint,Je=ln.unstable_now,jb=ln.unstable_getCurrentPriorityLevel,Mp=ln.unstable_ImmediatePriority,h0=ln.unstable_UserBlockingPriority,Yu=ln.unstable_NormalPriority,Vb=ln.unstable_LowPriority,f0=ln.unstable_IdlePriority,Qd=null,Xn=null;function Ob(t){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(Qd,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:Fb,Mb=Math.log,Lb=Math.LN2;function Fb(t){return t>>>=0,t===0?32:31-(Mb(t)/Lb|0)|0}var Kl=64,Ql=4194304;function Ha(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xu(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=Ha(a):(i&=o,i!==0&&(s=Ha(i)))}else o=n&~r,o!==0?s=Ha(o):i!==0&&(s=Ha(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Mn(e),r=1<<n,s|=t[n],e&=~r;return s}function zb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ub(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mn(i),a=1<<o,c=r[o];c===-1?(!(a&n)||a&s)&&(r[o]=zb(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function om(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m0(){var t=Kl;return Kl<<=1,!(Kl&4194240)&&(Kl=64),t}function rf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function il(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function Bb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Mn(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Lp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Mn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var Pe=0;function p0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g0,Fp,y0,v0,_0,am=!1,Yl=[],ur=null,dr=null,hr=null,xc=new Map,bc=new Map,Zs=[],$b="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vv(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":xc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(e.pointerId)}}function Da(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=al(e),e!==null&&Fp(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function qb(t,e,n,s,r){switch(e){case"focusin":return ur=Da(ur,t,e,n,s,r),!0;case"dragenter":return dr=Da(dr,t,e,n,s,r),!0;case"mouseover":return hr=Da(hr,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return xc.set(i,Da(xc.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,bc.set(i,Da(bc.get(i)||null,t,e,n,s,r)),!0}return!1}function w0(t){var e=ai(t.target);if(e!==null){var n=Vi(e);if(n!==null){if(e=n.tag,e===13){if(e=c0(n),e!==null){t.blockedOn=e,_0(t.priority,function(){y0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Eu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);nm=s,n.target.dispatchEvent(s),nm=null}else return e=al(n),e!==null&&Fp(e),t.blockedOn=n,!1;e.shift()}return!0}function _v(t,e,n){Eu(t)&&n.delete(e)}function Wb(){am=!1,ur!==null&&Eu(ur)&&(ur=null),dr!==null&&Eu(dr)&&(dr=null),hr!==null&&Eu(hr)&&(hr=null),xc.forEach(_v),bc.forEach(_v)}function ja(t,e){t.blockedOn===e&&(t.blockedOn=null,am||(am=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,Wb)))}function kc(t){function e(r){return ja(r,t)}if(0<Yl.length){ja(Yl[0],t);for(var n=1;n<Yl.length;n++){var s=Yl[n];s.blockedOn===t&&(s.blockedOn=null)}}for(ur!==null&&ja(ur,t),dr!==null&&ja(dr,t),hr!==null&&ja(hr,t),xc.forEach(e),bc.forEach(e),n=0;n<Zs.length;n++)s=Zs[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Zs.length&&(n=Zs[0],n.blockedOn===null);)w0(n),n.blockedOn===null&&Zs.shift()}var ko=Rs.ReactCurrentBatchConfig,Ju=!0;function Gb(t,e,n,s){var r=Pe,i=ko.transition;ko.transition=null;try{Pe=1,zp(t,e,n,s)}finally{Pe=r,ko.transition=i}}function Hb(t,e,n,s){var r=Pe,i=ko.transition;ko.transition=null;try{Pe=4,zp(t,e,n,s)}finally{Pe=r,ko.transition=i}}function zp(t,e,n,s){if(Ju){var r=cm(t,e,n,s);if(r===null)pf(t,e,s,Zu,n),vv(t,s);else if(qb(r,t,e,n,s))s.stopPropagation();else if(vv(t,s),e&4&&-1<$b.indexOf(t)){for(;r!==null;){var i=al(r);if(i!==null&&g0(i),i=cm(t,e,n,s),i===null&&pf(t,e,s,Zu,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else pf(t,e,s,null,n)}}var Zu=null;function cm(t,e,n,s){if(Zu=null,t=Op(s),t=ai(t),t!==null)if(e=Vi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=c0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zu=t,null}function E0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jb()){case Mp:return 1;case h0:return 4;case Yu:case Vb:return 16;case f0:return 536870912;default:return 16}default:return 16}}var or=null,Up=null,Tu=null;function T0(){if(Tu)return Tu;var t,e=Up,n=e.length,s,r="value"in or?or.value:or.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return Tu=r.slice(t,1<s?1-s:void 0)}function Iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xl(){return!0}function wv(){return!1}function hn(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xl:wv,this.isPropagationStopped=wv,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),e}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bp=hn(na),ol=He({},na,{view:0,detail:0}),Kb=hn(ol),of,af,Va,Yd=He({},ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$p,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Va&&(Va&&t.type==="mousemove"?(of=t.screenX-Va.screenX,af=t.screenY-Va.screenY):af=of=0,Va=t),of)},movementY:function(t){return"movementY"in t?t.movementY:af}}),Ev=hn(Yd),Qb=He({},Yd,{dataTransfer:0}),Yb=hn(Qb),Xb=He({},ol,{relatedTarget:0}),cf=hn(Xb),Jb=He({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),Zb=hn(Jb),ek=He({},na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tk=hn(ek),nk=He({},na,{data:0}),Tv=hn(nk),sk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ik={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ok(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ik[t])?!!e[t]:!1}function $p(){return ok}var ak=He({},ol,{key:function(t){if(t.key){var e=sk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$p,charCode:function(t){return t.type==="keypress"?Iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ck=hn(ak),lk=He({},Yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iv=hn(lk),uk=He({},ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$p}),dk=hn(uk),hk=He({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),fk=hn(hk),mk=He({},Yd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pk=hn(mk),gk=[9,13,27,32],qp=xs&&"CompositionEvent"in window,rc=null;xs&&"documentMode"in document&&(rc=document.documentMode);var yk=xs&&"TextEvent"in window&&!rc,I0=xs&&(!qp||rc&&8<rc&&11>=rc),xv=" ",bv=!1;function x0(t,e){switch(t){case"keyup":return gk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ho=!1;function vk(t,e){switch(t){case"compositionend":return b0(e);case"keypress":return e.which!==32?null:(bv=!0,xv);case"textInput":return t=e.data,t===xv&&bv?null:t;default:return null}}function _k(t,e){if(ho)return t==="compositionend"||!qp&&x0(t,e)?(t=T0(),Tu=Up=or=null,ho=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return I0&&e.locale!=="ko"?null:e.data;default:return null}}var wk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wk[t.type]:e==="textarea"}function k0(t,e,n,s){s0(s),e=ed(e,"onChange"),0<e.length&&(n=new Bp("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ic=null,Sc=null;function Ek(t){M0(t,0)}function Xd(t){var e=po(t);if(Y2(e))return t}function Tk(t,e){if(t==="change")return e}var S0=!1;if(xs){var lf;if(xs){var uf="oninput"in document;if(!uf){var Sv=document.createElement("div");Sv.setAttribute("oninput","return;"),uf=typeof Sv.oninput=="function"}lf=uf}else lf=!1;S0=lf&&(!document.documentMode||9<document.documentMode)}function Av(){ic&&(ic.detachEvent("onpropertychange",A0),Sc=ic=null)}function A0(t){if(t.propertyName==="value"&&Xd(Sc)){var e=[];k0(e,Sc,t,Op(t)),a0(Ek,e)}}function Ik(t,e,n){t==="focusin"?(Av(),ic=e,Sc=n,ic.attachEvent("onpropertychange",A0)):t==="focusout"&&Av()}function xk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xd(Sc)}function bk(t,e){if(t==="click")return Xd(e)}function kk(t,e){if(t==="input"||t==="change")return Xd(e)}function Sk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:Sk;function Ac(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!qf.call(e,r)||!Fn(t[r],e[r]))return!1}return!0}function Pv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nv(t,e){var n=Pv(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pv(n)}}function P0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?P0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N0(){for(var t=window,e=Hu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hu(t.document)}return e}function Wp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ak(t){var e=N0(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&P0(n.ownerDocument.documentElement,n)){if(s!==null&&Wp(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=Nv(n,i);var o=Nv(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pk=xs&&"documentMode"in document&&11>=document.documentMode,fo=null,lm=null,oc=null,um=!1;function Cv(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;um||fo==null||fo!==Hu(s)||(s=fo,"selectionStart"in s&&Wp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),oc&&Ac(oc,s)||(oc=s,s=ed(lm,"onSelect"),0<s.length&&(e=new Bp("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=fo)))}function Jl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mo={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},df={},C0={};xs&&(C0=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function Jd(t){if(df[t])return df[t];if(!mo[t])return t;var e=mo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in C0)return df[t]=e[n];return t}var R0=Jd("animationend"),D0=Jd("animationiteration"),j0=Jd("animationstart"),V0=Jd("transitionend"),O0=new Map,Rv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){O0.set(t,e),ji(e,[t])}for(var hf=0;hf<Rv.length;hf++){var ff=Rv[hf],Nk=ff.toLowerCase(),Ck=ff[0].toUpperCase()+ff.slice(1);Rr(Nk,"on"+Ck)}Rr(R0,"onAnimationEnd");Rr(D0,"onAnimationIteration");Rr(j0,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(V0,"onTransitionEnd");Do("onMouseEnter",["mouseout","mouseover"]);Do("onMouseLeave",["mouseout","mouseover"]);Do("onPointerEnter",["pointerout","pointerover"]);Do("onPointerLeave",["pointerout","pointerover"]);ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ka));function Dv(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,Nb(s,e,void 0,t),t.currentTarget=null}function M0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&r.isPropagationStopped())break e;Dv(r,a,d),i=c}else for(o=0;o<s.length;o++){if(a=s[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&r.isPropagationStopped())break e;Dv(r,a,d),i=c}}}if(Qu)throw t=im,Qu=!1,im=null,t}function Me(t,e){var n=e[pm];n===void 0&&(n=e[pm]=new Set);var s=t+"__bubble";n.has(s)||(L0(e,t,2,!1),n.add(s))}function mf(t,e,n){var s=0;e&&(s|=4),L0(n,t,s,e)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function Pc(t){if(!t[Zl]){t[Zl]=!0,W2.forEach(function(n){n!=="selectionchange"&&(Rk.has(n)||mf(n,!1,t),mf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zl]||(e[Zl]=!0,mf("selectionchange",!1,e))}}function L0(t,e,n,s){switch(E0(e)){case 1:var r=Gb;break;case 4:r=Hb;break;default:r=zp}n=r.bind(null,e,n,t),r=void 0,!rm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function pf(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ai(a),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}a=a.parentNode}}s=s.return}a0(function(){var d=i,f=Op(n),m=[];e:{var g=O0.get(t);if(g!==void 0){var T=Bp,S=t;switch(t){case"keypress":if(Iu(n)===0)break e;case"keydown":case"keyup":T=ck;break;case"focusin":S="focus",T=cf;break;case"focusout":S="blur",T=cf;break;case"beforeblur":case"afterblur":T=cf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Ev;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Yb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=dk;break;case R0:case D0:case j0:T=Zb;break;case V0:T=fk;break;case"scroll":T=Kb;break;case"wheel":T=pk;break;case"copy":case"cut":case"paste":T=tk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Iv}var A=(e&4)!==0,C=!A&&t==="scroll",x=A?g!==null?g+"Capture":null:g;A=[];for(var v=d,b;v!==null;){b=v;var D=b.stateNode;if(b.tag===5&&D!==null&&(b=D,x!==null&&(D=Ic(v,x),D!=null&&A.push(Nc(v,D,b)))),C)break;v=v.return}0<A.length&&(g=new T(g,S,null,n,f),m.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==nm&&(S=n.relatedTarget||n.fromElement)&&(ai(S)||S[bs]))break e;if((T||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,T?(S=n.relatedTarget||n.toElement,T=d,S=S?ai(S):null,S!==null&&(C=Vi(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(T=null,S=d),T!==S)){if(A=Ev,D="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=Iv,D="onPointerLeave",x="onPointerEnter",v="pointer"),C=T==null?g:po(T),b=S==null?g:po(S),g=new A(D,v+"leave",T,n,f),g.target=C,g.relatedTarget=b,D=null,ai(f)===d&&(A=new A(x,v+"enter",S,n,f),A.target=b,A.relatedTarget=C,D=A),C=D,T&&S)t:{for(A=T,x=S,v=0,b=A;b;b=Yi(b))v++;for(b=0,D=x;D;D=Yi(D))b++;for(;0<v-b;)A=Yi(A),v--;for(;0<b-v;)x=Yi(x),b--;for(;v--;){if(A===x||x!==null&&A===x.alternate)break t;A=Yi(A),x=Yi(x)}A=null}else A=null;T!==null&&jv(m,g,T,A,!1),S!==null&&C!==null&&jv(m,C,S,A,!0)}}e:{if(g=d?po(d):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var L=Tk;else if(kv(g))if(S0)L=kk;else{L=xk;var M=Ik}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=bk);if(L&&(L=L(t,d))){k0(m,L,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Xf(g,"number",g.value)}switch(M=d?po(d):window,t){case"focusin":(kv(M)||M.contentEditable==="true")&&(fo=M,lm=d,oc=null);break;case"focusout":oc=lm=fo=null;break;case"mousedown":um=!0;break;case"contextmenu":case"mouseup":case"dragend":um=!1,Cv(m,n,f);break;case"selectionchange":if(Pk)break;case"keydown":case"keyup":Cv(m,n,f)}var E;if(qp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ho?x0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(I0&&n.locale!=="ko"&&(ho||y!=="onCompositionStart"?y==="onCompositionEnd"&&ho&&(E=T0()):(or=f,Up="value"in or?or.value:or.textContent,ho=!0)),M=ed(d,y),0<M.length&&(y=new Tv(y,t,null,n,f),m.push({event:y,listeners:M}),E?y.data=E:(E=b0(n),E!==null&&(y.data=E)))),(E=yk?vk(t,n):_k(t,n))&&(d=ed(d,"onBeforeInput"),0<d.length&&(f=new Tv("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=E))}M0(m,e)})}function Nc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ed(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Ic(t,n),i!=null&&s.unshift(Nc(t,i,r)),i=Ic(t,e),i!=null&&s.push(Nc(t,i,r))),t=t.return}return s}function Yi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jv(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===s)break;a.tag===5&&d!==null&&(a=d,r?(c=Ic(n,i),c!=null&&o.unshift(Nc(n,c,a))):r||(c=Ic(n,i),c!=null&&o.push(Nc(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Dk=/\r\n?/g,jk=/\u0000|\uFFFD/g;function Vv(t){return(typeof t=="string"?t:""+t).replace(Dk,`
`).replace(jk,"")}function eu(t,e,n){if(e=Vv(e),Vv(t)!==e&&n)throw Error(W(425))}function td(){}var dm=null,hm=null;function fm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mm=typeof setTimeout=="function"?setTimeout:void 0,Vk=typeof clearTimeout=="function"?clearTimeout:void 0,Ov=typeof Promise=="function"?Promise:void 0,Ok=typeof queueMicrotask=="function"?queueMicrotask:typeof Ov<"u"?function(t){return Ov.resolve(null).then(t).catch(Mk)}:mm;function Mk(t){setTimeout(function(){throw t})}function gf(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),kc(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);kc(e)}function fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sa=Math.random().toString(36).slice(2),Wn="__reactFiber$"+sa,Cc="__reactProps$"+sa,bs="__reactContainer$"+sa,pm="__reactEvents$"+sa,Lk="__reactListeners$"+sa,Fk="__reactHandles$"+sa;function ai(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bs]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mv(t);t!==null;){if(n=t[Wn])return n;t=Mv(t)}return e}t=n,n=t.parentNode}return null}function al(t){return t=t[Wn]||t[bs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function po(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Zd(t){return t[Cc]||null}var gm=[],go=-1;function Dr(t){return{current:t}}function Le(t){0>go||(t.current=gm[go],gm[go]=null,go--)}function De(t,e){go++,gm[go]=t.current,t.current=e}var kr={},Ot=Dr(kr),Qt=Dr(!1),yi=kr;function jo(t,e){var n=t.type.contextTypes;if(!n)return kr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Yt(t){return t=t.childContextTypes,t!=null}function nd(){Le(Qt),Le(Ot)}function Lv(t,e,n){if(Ot.current!==kr)throw Error(W(168));De(Ot,e),De(Qt,n)}function F0(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(W(108,Ib(t)||"Unknown",r));return He({},n,s)}function sd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,yi=Ot.current,De(Ot,t),De(Qt,Qt.current),!0}function Fv(t,e,n){var s=t.stateNode;if(!s)throw Error(W(169));n?(t=F0(t,e,yi),s.__reactInternalMemoizedMergedChildContext=t,Le(Qt),Le(Ot),De(Ot,t)):Le(Qt),De(Qt,n)}var fs=null,eh=!1,yf=!1;function z0(t){fs===null?fs=[t]:fs.push(t)}function zk(t){eh=!0,z0(t)}function jr(){if(!yf&&fs!==null){yf=!0;var t=0,e=Pe;try{var n=fs;for(Pe=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}fs=null,eh=!1}catch(r){throw fs!==null&&(fs=fs.slice(t+1)),d0(Mp,jr),r}finally{Pe=e,yf=!1}}return null}var yo=[],vo=0,rd=null,id=0,pn=[],gn=0,vi=null,gs=1,ys="";function Jr(t,e){yo[vo++]=id,yo[vo++]=rd,rd=t,id=e}function U0(t,e,n){pn[gn++]=gs,pn[gn++]=ys,pn[gn++]=vi,vi=t;var s=gs;t=ys;var r=32-Mn(s)-1;s&=~(1<<r),n+=1;var i=32-Mn(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,gs=1<<32-Mn(e)+r|n<<r|s,ys=i+t}else gs=1<<i|n<<r|s,ys=t}function Gp(t){t.return!==null&&(Jr(t,1),U0(t,1,0))}function Hp(t){for(;t===rd;)rd=yo[--vo],yo[vo]=null,id=yo[--vo],yo[vo]=null;for(;t===vi;)vi=pn[--gn],pn[gn]=null,ys=pn[--gn],pn[gn]=null,gs=pn[--gn],pn[gn]=null}var cn=null,on=null,ze=!1,Vn=null;function B0(t,e){var n=yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,on=fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vi!==null?{id:gs,overflow:ys}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,on=null,!0):!1;default:return!1}}function ym(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vm(t){if(ze){var e=on;if(e){var n=e;if(!zv(t,e)){if(ym(t))throw Error(W(418));e=fr(n.nextSibling);var s=cn;e&&zv(t,e)?B0(s,n):(t.flags=t.flags&-4097|2,ze=!1,cn=t)}}else{if(ym(t))throw Error(W(418));t.flags=t.flags&-4097|2,ze=!1,cn=t}}}function Uv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function tu(t){if(t!==cn)return!1;if(!ze)return Uv(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fm(t.type,t.memoizedProps)),e&&(e=on)){if(ym(t))throw $0(),Error(W(418));for(;e;)B0(t,e),e=fr(e.nextSibling)}if(Uv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=cn?fr(t.stateNode.nextSibling):null;return!0}function $0(){for(var t=on;t;)t=fr(t.nextSibling)}function Vo(){on=cn=null,ze=!1}function Kp(t){Vn===null?Vn=[t]:Vn.push(t)}var Uk=Rs.ReactCurrentBatchConfig;function Oa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var s=n.stateNode}if(!s)throw Error(W(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function nu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bv(t){var e=t._init;return e(t._payload)}function q0(t){function e(x,v){if(t){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function s(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function r(x,v){return x=yr(x,v),x.index=0,x.sibling=null,x}function i(x,v,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,v,b,D){return v===null||v.tag!==6?(v=xf(b,x.mode,D),v.return=x,v):(v=r(v,b),v.return=x,v)}function c(x,v,b,D){var L=b.type;return L===uo?f(x,v,b.props.children,D,b.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Xs&&Bv(L)===v.type)?(D=r(v,b.props),D.ref=Oa(x,v,b),D.return=x,D):(D=Nu(b.type,b.key,b.props,null,x.mode,D),D.ref=Oa(x,v,b),D.return=x,D)}function d(x,v,b,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=bf(b,x.mode,D),v.return=x,v):(v=r(v,b.children||[]),v.return=x,v)}function f(x,v,b,D,L){return v===null||v.tag!==7?(v=fi(b,x.mode,D,L),v.return=x,v):(v=r(v,b),v.return=x,v)}function m(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=xf(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Wl:return b=Nu(v.type,v.key,v.props,null,x.mode,b),b.ref=Oa(x,null,v),b.return=x,b;case lo:return v=bf(v,x.mode,b),v.return=x,v;case Xs:var D=v._init;return m(x,D(v._payload),b)}if(Ga(v)||Ca(v))return v=fi(v,x.mode,b,null),v.return=x,v;nu(x,v)}return null}function g(x,v,b,D){var L=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return L!==null?null:a(x,v,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Wl:return b.key===L?c(x,v,b,D):null;case lo:return b.key===L?d(x,v,b,D):null;case Xs:return L=b._init,g(x,v,L(b._payload),D)}if(Ga(b)||Ca(b))return L!==null?null:f(x,v,b,D,null);nu(x,b)}return null}function T(x,v,b,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return x=x.get(b)||null,a(v,x,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Wl:return x=x.get(D.key===null?b:D.key)||null,c(v,x,D,L);case lo:return x=x.get(D.key===null?b:D.key)||null,d(v,x,D,L);case Xs:var M=D._init;return T(x,v,b,M(D._payload),L)}if(Ga(D)||Ca(D))return x=x.get(b)||null,f(v,x,D,L,null);nu(v,D)}return null}function S(x,v,b,D){for(var L=null,M=null,E=v,y=v=0,I=null;E!==null&&y<b.length;y++){E.index>y?(I=E,E=null):I=E.sibling;var w=g(x,E,b[y],D);if(w===null){E===null&&(E=I);break}t&&E&&w.alternate===null&&e(x,E),v=i(w,v,y),M===null?L=w:M.sibling=w,M=w,E=I}if(y===b.length)return n(x,E),ze&&Jr(x,y),L;if(E===null){for(;y<b.length;y++)E=m(x,b[y],D),E!==null&&(v=i(E,v,y),M===null?L=E:M.sibling=E,M=E);return ze&&Jr(x,y),L}for(E=s(x,E);y<b.length;y++)I=T(E,x,y,b[y],D),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?y:I.key),v=i(I,v,y),M===null?L=I:M.sibling=I,M=I);return t&&E.forEach(function(N){return e(x,N)}),ze&&Jr(x,y),L}function A(x,v,b,D){var L=Ca(b);if(typeof L!="function")throw Error(W(150));if(b=L.call(b),b==null)throw Error(W(151));for(var M=L=null,E=v,y=v=0,I=null,w=b.next();E!==null&&!w.done;y++,w=b.next()){E.index>y?(I=E,E=null):I=E.sibling;var N=g(x,E,w.value,D);if(N===null){E===null&&(E=I);break}t&&E&&N.alternate===null&&e(x,E),v=i(N,v,y),M===null?L=N:M.sibling=N,M=N,E=I}if(w.done)return n(x,E),ze&&Jr(x,y),L;if(E===null){for(;!w.done;y++,w=b.next())w=m(x,w.value,D),w!==null&&(v=i(w,v,y),M===null?L=w:M.sibling=w,M=w);return ze&&Jr(x,y),L}for(E=s(x,E);!w.done;y++,w=b.next())w=T(E,x,y,w.value,D),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?y:w.key),v=i(w,v,y),M===null?L=w:M.sibling=w,M=w);return t&&E.forEach(function(R){return e(x,R)}),ze&&Jr(x,y),L}function C(x,v,b,D){if(typeof b=="object"&&b!==null&&b.type===uo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Wl:e:{for(var L=b.key,M=v;M!==null;){if(M.key===L){if(L=b.type,L===uo){if(M.tag===7){n(x,M.sibling),v=r(M,b.props.children),v.return=x,x=v;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Xs&&Bv(L)===M.type){n(x,M.sibling),v=r(M,b.props),v.ref=Oa(x,M,b),v.return=x,x=v;break e}n(x,M);break}else e(x,M);M=M.sibling}b.type===uo?(v=fi(b.props.children,x.mode,D,b.key),v.return=x,x=v):(D=Nu(b.type,b.key,b.props,null,x.mode,D),D.ref=Oa(x,v,b),D.return=x,x=D)}return o(x);case lo:e:{for(M=b.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),v=r(v,b.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=bf(b,x.mode,D),v.return=x,x=v}return o(x);case Xs:return M=b._init,C(x,v,M(b._payload),D)}if(Ga(b))return S(x,v,b,D);if(Ca(b))return A(x,v,b,D);nu(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),v=r(v,b),v.return=x,x=v):(n(x,v),v=xf(b,x.mode,D),v.return=x,x=v),o(x)):n(x,v)}return C}var Oo=q0(!0),W0=q0(!1),od=Dr(null),ad=null,_o=null,Qp=null;function Yp(){Qp=_o=ad=null}function Xp(t){var e=od.current;Le(od),t._currentValue=e}function _m(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function So(t,e){ad=t,Qp=_o=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(Qp!==t)if(t={context:t,memoizedValue:e,next:null},_o===null){if(ad===null)throw Error(W(308));_o=t,ad.dependencies={lanes:0,firstContext:t}}else _o=_o.next=t;return e}var ci=null;function Jp(t){ci===null?ci=[t]:ci.push(t)}function G0(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Jp(e)):(n.next=r.next,r.next=n),e.interleaved=n,ks(t,s)}function ks(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Js=!1;function Zp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ts(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,xe&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,ks(t,n)}return r=s.interleaved,r===null?(e.next=e,Jp(s)):(e.next=r.next,r.next=e),s.interleaved=e,ks(t,n)}function xu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Lp(t,n)}}function $v(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cd(t,e,n,s){var r=t.updateQueue;Js=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=r.baseState;o=0,f=d=c=null,a=i;do{var g=a.lane,T=a.eventTime;if((s&g)===g){f!==null&&(f=f.next={eventTime:T,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,A=a;switch(g=e,T=n,A.tag){case 1:if(S=A.payload,typeof S=="function"){m=S.call(T,m,g);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=A.payload,g=typeof S=="function"?S.call(T,m,g):S,g==null)break e;m=He({},m,g);break e;case 2:Js=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=r.effects,g===null?r.effects=[a]:g.push(a))}else T={eventTime:T,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=T,c=m):f=f.next=T,o|=g;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;g=a,a=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);if(f===null&&(c=m),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);wi|=o,t.lanes=o,t.memoizedState=m}}function qv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(W(191,r));r.call(s)}}}var cl={},Jn=Dr(cl),Rc=Dr(cl),Dc=Dr(cl);function li(t){if(t===cl)throw Error(W(174));return t}function eg(t,e){switch(De(Dc,e),De(Rc,t),De(Jn,cl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zf(e,t)}Le(Jn),De(Jn,e)}function Mo(){Le(Jn),Le(Rc),Le(Dc)}function K0(t){li(Dc.current);var e=li(Jn.current),n=Zf(e,t.type);e!==n&&(De(Rc,t),De(Jn,n))}function tg(t){Rc.current===t&&(Le(Jn),Le(Rc))}var Be=Dr(0);function ld(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vf=[];function ng(){for(var t=0;t<vf.length;t++)vf[t]._workInProgressVersionPrimary=null;vf.length=0}var bu=Rs.ReactCurrentDispatcher,_f=Rs.ReactCurrentBatchConfig,_i=0,qe=null,at=null,ft=null,ud=!1,ac=!1,jc=0,Bk=0;function St(){throw Error(W(321))}function sg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function rg(t,e,n,s,r,i){if(_i=i,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bu.current=t===null||t.memoizedState===null?Gk:Hk,t=n(s,r),ac){i=0;do{if(ac=!1,jc=0,25<=i)throw Error(W(301));i+=1,ft=at=null,e.updateQueue=null,bu.current=Kk,t=n(s,r)}while(ac)}if(bu.current=dd,e=at!==null&&at.next!==null,_i=0,ft=at=qe=null,ud=!1,e)throw Error(W(300));return t}function ig(){var t=jc!==0;return jc=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?qe.memoizedState=ft=t:ft=ft.next=t,ft}function Tn(){if(at===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=ft===null?qe.memoizedState:ft.next;if(e!==null)ft=e,at=t;else{if(t===null)throw Error(W(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},ft===null?qe.memoizedState=ft=t:ft=ft.next=t}return ft}function Vc(t,e){return typeof e=="function"?e(t):e}function wf(t){var e=Tn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var s=at,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,c=null,d=i;do{var f=d.lane;if((_i&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=m,o=s):c=c.next=m,qe.lanes|=f,wi|=f}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=a,Fn(s,e.memoizedState)||(Ht=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,qe.lanes|=i,wi|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ef(t){var e=Tn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Fn(i,e.memoizedState)||(Ht=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function Q0(){}function Y0(t,e){var n=qe,s=Tn(),r=e(),i=!Fn(s.memoizedState,r);if(i&&(s.memoizedState=r,Ht=!0),s=s.queue,og(Z0.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Oc(9,J0.bind(null,n,s,r,e),void 0,null),mt===null)throw Error(W(349));_i&30||X0(n,e,r)}return r}function X0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function J0(t,e,n,s){e.value=n,e.getSnapshot=s,e1(e)&&t1(t)}function Z0(t,e,n){return n(function(){e1(e)&&t1(t)})}function e1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fn(t,n)}catch{return!0}}function t1(t){var e=ks(t,1);e!==null&&Ln(e,t,1,-1)}function Wv(t){var e=$n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:t},e.queue=t,t=t.dispatch=Wk.bind(null,qe,t),[e.memoizedState,t]}function Oc(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function n1(){return Tn().memoizedState}function ku(t,e,n,s){var r=$n();qe.flags|=t,r.memoizedState=Oc(1|e,n,void 0,s===void 0?null:s)}function th(t,e,n,s){var r=Tn();s=s===void 0?null:s;var i=void 0;if(at!==null){var o=at.memoizedState;if(i=o.destroy,s!==null&&sg(s,o.deps)){r.memoizedState=Oc(e,n,i,s);return}}qe.flags|=t,r.memoizedState=Oc(1|e,n,i,s)}function Gv(t,e){return ku(8390656,8,t,e)}function og(t,e){return th(2048,8,t,e)}function s1(t,e){return th(4,2,t,e)}function r1(t,e){return th(4,4,t,e)}function i1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function o1(t,e,n){return n=n!=null?n.concat([t]):null,th(4,4,i1.bind(null,e,t),n)}function ag(){}function a1(t,e){var n=Tn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&sg(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function c1(t,e){var n=Tn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&sg(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function l1(t,e,n){return _i&21?(Fn(n,e)||(n=m0(),qe.lanes|=n,wi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function $k(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var s=_f.transition;_f.transition={};try{t(!1),e()}finally{Pe=n,_f.transition=s}}function u1(){return Tn().memoizedState}function qk(t,e,n){var s=gr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},d1(t))h1(e,n);else if(n=G0(t,e,n,s),n!==null){var r=zt();Ln(n,t,s,r),f1(n,e,s)}}function Wk(t,e,n){var s=gr(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(d1(t))h1(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,Fn(a,o)){var c=e.interleaved;c===null?(r.next=r,Jp(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=G0(t,e,r,s),n!==null&&(r=zt(),Ln(n,t,s,r),f1(n,e,s))}}function d1(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function h1(t,e){ac=ud=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function f1(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Lp(t,n)}}var dd={readContext:En,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},Gk={readContext:En,useCallback:function(t,e){return $n().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:Gv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ku(4194308,4,i1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ku(4194308,4,t,e)},useInsertionEffect:function(t,e){return ku(4,2,t,e)},useMemo:function(t,e){var n=$n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=$n();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=qk.bind(null,qe,t),[s.memoizedState,t]},useRef:function(t){var e=$n();return t={current:t},e.memoizedState=t},useState:Wv,useDebugValue:ag,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=Wv(!1),e=t[0];return t=$k.bind(null,t[1]),$n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=qe,r=$n();if(ze){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),mt===null)throw Error(W(349));_i&30||X0(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Gv(Z0.bind(null,s,i,t),[t]),s.flags|=2048,Oc(9,J0.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=$n(),e=mt.identifierPrefix;if(ze){var n=ys,s=gs;n=(s&~(1<<32-Mn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=jc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Bk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Hk={readContext:En,useCallback:a1,useContext:En,useEffect:og,useImperativeHandle:o1,useInsertionEffect:s1,useLayoutEffect:r1,useMemo:c1,useReducer:wf,useRef:n1,useState:function(){return wf(Vc)},useDebugValue:ag,useDeferredValue:function(t){var e=Tn();return l1(e,at.memoizedState,t)},useTransition:function(){var t=wf(Vc)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:Y0,useId:u1,unstable_isNewReconciler:!1},Kk={readContext:En,useCallback:a1,useContext:En,useEffect:og,useImperativeHandle:o1,useInsertionEffect:s1,useLayoutEffect:r1,useMemo:c1,useReducer:Ef,useRef:n1,useState:function(){return Ef(Vc)},useDebugValue:ag,useDeferredValue:function(t){var e=Tn();return at===null?e.memoizedState=t:l1(e,at.memoizedState,t)},useTransition:function(){var t=Ef(Vc)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:Y0,useId:u1,unstable_isNewReconciler:!1};function Rn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wm(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nh={isMounted:function(t){return(t=t._reactInternals)?Vi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=zt(),r=gr(t),i=Ts(s,r);i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,r),e!==null&&(Ln(e,t,r,s),xu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=zt(),r=gr(t),i=Ts(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,r),e!==null&&(Ln(e,t,r,s),xu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),s=gr(t),r=Ts(n,s);r.tag=2,e!=null&&(r.callback=e),e=mr(t,r,s),e!==null&&(Ln(e,t,s,n),xu(e,t,s))}};function Hv(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ac(n,s)||!Ac(r,i):!0}function m1(t,e,n){var s=!1,r=kr,i=e.contextType;return typeof i=="object"&&i!==null?i=En(i):(r=Yt(e)?yi:Ot.current,s=e.contextTypes,i=(s=s!=null)?jo(t,r):kr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nh,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Kv(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&nh.enqueueReplaceState(e,e.state,null)}function Em(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Zp(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=En(i):(i=Yt(e)?yi:Ot.current,r.context=jo(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wm(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&nh.enqueueReplaceState(r,r.state,null),cd(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Lo(t,e){try{var n="",s=e;do n+=Tb(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Tf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Qk=typeof WeakMap=="function"?WeakMap:Map;function p1(t,e,n){n=Ts(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){fd||(fd=!0,Rm=s),Tm(t,e)},n}function g1(t,e,n){n=Ts(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){Tm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Tm(t,e),typeof s!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Qv(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new Qk;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=lS.bind(null,t,e,n),e.then(t,t))}function Yv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xv(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ts(-1,1),e.tag=2,mr(n,e,1))),n.lanes|=1),t)}var Yk=Rs.ReactCurrentOwner,Ht=!1;function Lt(t,e,n,s){e.child=t===null?W0(e,null,n,s):Oo(e,t.child,n,s)}function Jv(t,e,n,s,r){n=n.render;var i=e.ref;return So(e,r),s=rg(t,e,n,s,i,r),n=ig(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ss(t,e,r)):(ze&&n&&Gp(e),e.flags|=1,Lt(t,e,s,r),e.child)}function Zv(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!pg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,y1(t,e,i,s,r)):(t=Nu(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ac,n(o,s)&&t.ref===e.ref)return Ss(t,e,r)}return e.flags|=1,t=yr(i,s),t.ref=e.ref,t.return=e,e.child=t}function y1(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Ac(i,s)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,Ss(t,e,r)}return Im(t,e,n,s,r)}function v1(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Eo,tn),tn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Eo,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,De(Eo,tn),tn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,De(Eo,tn),tn|=s;return Lt(t,e,r,n),e.child}function _1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Im(t,e,n,s,r){var i=Yt(n)?yi:Ot.current;return i=jo(e,i),So(e,r),n=rg(t,e,n,s,i,r),s=ig(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ss(t,e,r)):(ze&&s&&Gp(e),e.flags|=1,Lt(t,e,n,r),e.child)}function e_(t,e,n,s,r){if(Yt(n)){var i=!0;sd(e)}else i=!1;if(So(e,r),e.stateNode===null)Su(t,e),m1(e,n,s),Em(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=En(d):(d=Yt(n)?yi:Ot.current,d=jo(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||c!==d)&&Kv(e,o,s,d),Js=!1;var g=e.memoizedState;o.state=g,cd(e,s,o,r),c=e.memoizedState,a!==s||g!==c||Qt.current||Js?(typeof f=="function"&&(wm(e,n,f,s),c=e.memoizedState),(a=Js||Hv(e,n,a,s,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=d,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,H0(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Rn(e.type,a),o.props=d,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=En(c):(c=Yt(n)?yi:Ot.current,c=jo(e,c));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==c)&&Kv(e,o,s,c),Js=!1,g=e.memoizedState,o.state=g,cd(e,s,o,r);var S=e.memoizedState;a!==m||g!==S||Qt.current||Js?(typeof T=="function"&&(wm(e,n,T,s),S=e.memoizedState),(d=Js||Hv(e,n,d,s,g,S,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=S),o.props=s,o.state=S,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return xm(t,e,n,s,i,r)}function xm(t,e,n,s,r,i){_1(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Fv(e,n,!1),Ss(t,e,i);s=e.stateNode,Yk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Oo(e,t.child,null,i),e.child=Oo(e,null,a,i)):Lt(t,e,a,i),e.memoizedState=s.state,r&&Fv(e,n,!0),e.child}function w1(t){var e=t.stateNode;e.pendingContext?Lv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lv(t,e.context,!1),eg(t,e.containerInfo)}function t_(t,e,n,s,r){return Vo(),Kp(r),e.flags|=256,Lt(t,e,n,s),e.child}var bm={dehydrated:null,treeContext:null,retryLane:0};function km(t){return{baseLanes:t,cachePool:null,transitions:null}}function E1(t,e,n){var s=e.pendingProps,r=Be.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),De(Be,r&1),t===null)return vm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ih(o,s,0,null),t=fi(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=km(n),e.memoizedState=bm,t):cg(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Xk(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=yr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=yr(a,i):(i=fi(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?km(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=bm,s}return i=t.child,t=i.sibling,s=yr(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function cg(t,e){return e=ih({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function su(t,e,n,s){return s!==null&&Kp(s),Oo(e,t.child,null,n),t=cg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xk(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=Tf(Error(W(422))),su(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=ih({mode:"visible",children:s.children},r,0,null),i=fi(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Oo(e,t.child,null,o),e.child.memoizedState=km(o),e.memoizedState=bm,i);if(!(e.mode&1))return su(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(W(419)),s=Tf(i,s,void 0),su(t,e,o,s)}if(a=(o&t.childLanes)!==0,Ht||a){if(s=mt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,ks(t,r),Ln(s,t,r,-1))}return mg(),s=Tf(Error(W(421))),su(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=uS.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,on=fr(r.nextSibling),cn=e,ze=!0,Vn=null,t!==null&&(pn[gn++]=gs,pn[gn++]=ys,pn[gn++]=vi,gs=t.id,ys=t.overflow,vi=e),e=cg(e,s.children),e.flags|=4096,e)}function n_(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),_m(t.return,e,n)}function If(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function T1(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Lt(t,e,s.children,n),s=Be.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&n_(t,n,e);else if(t.tag===19)n_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(De(Be,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ld(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),If(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ld(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}If(e,!0,n,null,i);break;case"together":If(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Su(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ss(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jk(t,e,n){switch(e.tag){case 3:w1(e),Vo();break;case 5:K0(e);break;case 1:Yt(e.type)&&sd(e);break;case 4:eg(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;De(od,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(De(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?E1(t,e,n):(De(Be,Be.current&1),t=Ss(t,e,n),t!==null?t.sibling:null);De(Be,Be.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return T1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),De(Be,Be.current),s)break;return null;case 22:case 23:return e.lanes=0,v1(t,e,n)}return Ss(t,e,n)}var I1,Sm,x1,b1;I1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sm=function(){};x1=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,li(Jn.current);var i=null;switch(n){case"input":r=Qf(t,r),s=Qf(t,s),i=[];break;case"select":r=He({},r,{value:void 0}),s=He({},s,{value:void 0}),i=[];break;case"textarea":r=Jf(t,r),s=Jf(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=td)}em(n,s);var o;n=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var a=r[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ec.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(a=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ec.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Me("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};b1=function(t,e,n,s){n!==s&&(e.flags|=4)};function Ma(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function Zk(t,e,n){var s=e.pendingProps;switch(Hp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Yt(e.type)&&nd(),At(e),null;case 3:return s=e.stateNode,Mo(),Le(Qt),Le(Ot),ng(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(tu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vn!==null&&(Vm(Vn),Vn=null))),Sm(t,e),At(e),null;case 5:tg(e);var r=li(Dc.current);if(n=e.type,t!==null&&e.stateNode!=null)x1(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(W(166));return At(e),null}if(t=li(Jn.current),tu(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Wn]=e,s[Cc]=i,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(r=0;r<Ka.length;r++)Me(Ka[r],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":dv(s,i),Me("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Me("invalid",s);break;case"textarea":fv(s,i),Me("invalid",s)}em(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&eu(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&eu(s.textContent,a,t),r=["children",""+a]):Ec.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",s)}switch(n){case"input":Gl(s),hv(s,i,!0);break;case"textarea":Gl(s),mv(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=td)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Z2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Wn]=e,t[Cc]=s,I1(t,e,!1,!1),e.stateNode=t;e:{switch(o=tm(n,s),n){case"dialog":Me("cancel",t),Me("close",t),r=s;break;case"iframe":case"object":case"embed":Me("load",t),r=s;break;case"video":case"audio":for(r=0;r<Ka.length;r++)Me(Ka[r],t);r=s;break;case"source":Me("error",t),r=s;break;case"img":case"image":case"link":Me("error",t),Me("load",t),r=s;break;case"details":Me("toggle",t),r=s;break;case"input":dv(t,s),r=Qf(t,s),Me("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=He({},s,{value:void 0}),Me("invalid",t);break;case"textarea":fv(t,s),r=Jf(t,s),Me("invalid",t);break;default:r=s}em(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?n0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&e0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Tc(t,c):typeof c=="number"&&Tc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ec.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Me("scroll",t):c!=null&&Rp(t,i,c,o))}switch(n){case"input":Gl(t),hv(t,s,!1);break;case"textarea":Gl(t),mv(t);break;case"option":s.value!=null&&t.setAttribute("value",""+br(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?Io(t,!!s.multiple,i,!1):s.defaultValue!=null&&Io(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=td)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)b1(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(W(166));if(n=li(Dc.current),li(Jn.current),tu(e)){if(s=e.stateNode,n=e.memoizedProps,s[Wn]=e,(i=s.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:eu(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&eu(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Wn]=e,e.stateNode=s}return At(e),null;case 13:if(Le(Be),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&on!==null&&e.mode&1&&!(e.flags&128))$0(),Vo(),e.flags|=98560,i=!1;else if(i=tu(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[Wn]=e}else Vo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else Vn!==null&&(Vm(Vn),Vn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?ct===0&&(ct=3):mg())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return Mo(),Sm(t,e),t===null&&Pc(e.stateNode.containerInfo),At(e),null;case 10:return Xp(e.type._context),At(e),null;case 17:return Yt(e.type)&&nd(),At(e),null;case 19:if(Le(Be),i=e.memoizedState,i===null)return At(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Ma(i,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ld(t),o!==null){for(e.flags|=128,Ma(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(Be,Be.current&1|2),e.child}t=t.sibling}i.tail!==null&&Je()>Fo&&(e.flags|=128,s=!0,Ma(i,!1),e.lanes=4194304)}else{if(!s)if(t=ld(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ma(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ze)return At(e),null}else 2*Je()-i.renderingStartTime>Fo&&n!==1073741824&&(e.flags|=128,s=!0,Ma(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Je(),e.sibling=null,n=Be.current,De(Be,s?n&1|2:n&1),e):(At(e),null);case 22:case 23:return fg(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?tn&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function eS(t,e){switch(Hp(e),e.tag){case 1:return Yt(e.type)&&nd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mo(),Le(Qt),Le(Ot),ng(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tg(e),null;case 13:if(Le(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Vo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(Be),null;case 4:return Mo(),null;case 10:return Xp(e.type._context),null;case 22:case 23:return fg(),null;case 24:return null;default:return null}}var ru=!1,Rt=!1,tS=typeof WeakSet=="function"?WeakSet:Set,ee=null;function wo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Qe(t,e,s)}else n.current=null}function Am(t,e,n){try{n()}catch(s){Qe(t,e,s)}}var s_=!1;function nS(t,e){if(dm=Ju,t=N0(),Wp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var T;m!==n||r!==0&&m.nodeType!==3||(a=o+r),m!==i||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(T=m.firstChild)!==null;)g=m,m=T;for(;;){if(m===t)break t;if(g===n&&++d===r&&(a=o),g===i&&++f===s&&(c=o),(T=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=T}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hm={focusedElem:t,selectionRange:n},Ju=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,C=S.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?A:Rn(e.type,A),C);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(D){Qe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return S=s_,s_=!1,S}function cc(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Am(e,n,i)}r=r.next}while(r!==s)}}function sh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Pm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function k1(t){var e=t.alternate;e!==null&&(t.alternate=null,k1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[Cc],delete e[pm],delete e[Lk],delete e[Fk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function S1(t){return t.tag===5||t.tag===3||t.tag===4}function r_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||S1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=td));else if(s!==4&&(t=t.child,t!==null))for(Nm(t,e,n),t=t.sibling;t!==null;)Nm(t,e,n),t=t.sibling}function Cm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Cm(t,e,n),t=t.sibling;t!==null;)Cm(t,e,n),t=t.sibling}var vt=null,Dn=!1;function Ws(t,e,n){for(n=n.child;n!==null;)A1(t,e,n),n=n.sibling}function A1(t,e,n){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(Qd,n)}catch{}switch(n.tag){case 5:Rt||wo(n,e);case 6:var s=vt,r=Dn;vt=null,Ws(t,e,n),vt=s,Dn=r,vt!==null&&(Dn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(Dn?(t=vt,n=n.stateNode,t.nodeType===8?gf(t.parentNode,n):t.nodeType===1&&gf(t,n),kc(t)):gf(vt,n.stateNode));break;case 4:s=vt,r=Dn,vt=n.stateNode.containerInfo,Dn=!0,Ws(t,e,n),vt=s,Dn=r;break;case 0:case 11:case 14:case 15:if(!Rt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Am(n,e,o),r=r.next}while(r!==s)}Ws(t,e,n);break;case 1:if(!Rt&&(wo(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Qe(n,e,a)}Ws(t,e,n);break;case 21:Ws(t,e,n);break;case 22:n.mode&1?(Rt=(s=Rt)||n.memoizedState!==null,Ws(t,e,n),Rt=s):Ws(t,e,n);break;default:Ws(t,e,n)}}function i_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tS),e.forEach(function(s){var r=dS.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,Dn=!1;break e;case 3:vt=a.stateNode.containerInfo,Dn=!0;break e;case 4:vt=a.stateNode.containerInfo,Dn=!0;break e}a=a.return}if(vt===null)throw Error(W(160));A1(i,o,r),vt=null,Dn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Qe(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)P1(e,t),e=e.sibling}function P1(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),Bn(t),s&4){try{cc(3,t,t.return),sh(3,t)}catch(A){Qe(t,t.return,A)}try{cc(5,t,t.return)}catch(A){Qe(t,t.return,A)}}break;case 1:Cn(e,t),Bn(t),s&512&&n!==null&&wo(n,n.return);break;case 5:if(Cn(e,t),Bn(t),s&512&&n!==null&&wo(n,n.return),t.flags&32){var r=t.stateNode;try{Tc(r,"")}catch(A){Qe(t,t.return,A)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&X2(r,i),tm(a,o);var d=tm(a,i);for(o=0;o<c.length;o+=2){var f=c[o],m=c[o+1];f==="style"?n0(r,m):f==="dangerouslySetInnerHTML"?e0(r,m):f==="children"?Tc(r,m):Rp(r,f,m,d)}switch(a){case"input":Yf(r,i);break;case"textarea":J2(r,i);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?Io(r,!!i.multiple,T,!1):g!==!!i.multiple&&(i.defaultValue!=null?Io(r,!!i.multiple,i.defaultValue,!0):Io(r,!!i.multiple,i.multiple?[]:"",!1))}r[Cc]=i}catch(A){Qe(t,t.return,A)}}break;case 6:if(Cn(e,t),Bn(t),s&4){if(t.stateNode===null)throw Error(W(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(A){Qe(t,t.return,A)}}break;case 3:if(Cn(e,t),Bn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{kc(e.containerInfo)}catch(A){Qe(t,t.return,A)}break;case 4:Cn(e,t),Bn(t);break;case 13:Cn(e,t),Bn(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(dg=Je())),s&4&&i_(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Rt=(d=Rt)||f,Cn(e,t),Rt=d):Cn(e,t),Bn(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(ee=t,f=t.child;f!==null;){for(m=ee=f;ee!==null;){switch(g=ee,T=g.child,g.tag){case 0:case 11:case 14:case 15:cc(4,g,g.return);break;case 1:wo(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){s=g,n=g.return;try{e=s,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(A){Qe(s,n,A)}}break;case 5:wo(g,g.return);break;case 22:if(g.memoizedState!==null){a_(m);continue}}T!==null?(T.return=g,ee=T):a_(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{r=m.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=t0("display",o))}catch(A){Qe(t,t.return,A)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(A){Qe(t,t.return,A)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Cn(e,t),Bn(t),s&4&&i_(t);break;case 21:break;default:Cn(e,t),Bn(t)}}function Bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(S1(n)){var s=n;break e}n=n.return}throw Error(W(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Tc(r,""),s.flags&=-33);var i=r_(t);Cm(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=r_(t);Nm(t,a,o);break;default:throw Error(W(161))}}catch(c){Qe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sS(t,e,n){ee=t,N1(t)}function N1(t,e,n){for(var s=(t.mode&1)!==0;ee!==null;){var r=ee,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||ru;if(!o){var a=r.alternate,c=a!==null&&a.memoizedState!==null||Rt;a=ru;var d=Rt;if(ru=o,(Rt=c)&&!d)for(ee=r;ee!==null;)o=ee,c=o.child,o.tag===22&&o.memoizedState!==null?c_(r):c!==null?(c.return=o,ee=c):c_(r);for(;i!==null;)ee=i,N1(i),i=i.sibling;ee=r,ru=a,Rt=d}o_(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ee=i):o_(t)}}function o_(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||sh(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Rt)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Rn(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&qv(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&kc(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Rt||e.flags&512&&Pm(e)}catch(g){Qe(e,e.return,g)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function a_(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function c_(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sh(4,e)}catch(c){Qe(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Qe(e,r,c)}}var i=e.return;try{Pm(e)}catch(c){Qe(e,i,c)}break;case 5:var o=e.return;try{Pm(e)}catch(c){Qe(e,o,c)}}}catch(c){Qe(e,e.return,c)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var rS=Math.ceil,hd=Rs.ReactCurrentDispatcher,lg=Rs.ReactCurrentOwner,_n=Rs.ReactCurrentBatchConfig,xe=0,mt=null,st=null,Et=0,tn=0,Eo=Dr(0),ct=0,Mc=null,wi=0,rh=0,ug=0,lc=null,Gt=null,dg=0,Fo=1/0,hs=null,fd=!1,Rm=null,pr=null,iu=!1,ar=null,md=0,uc=0,Dm=null,Au=-1,Pu=0;function zt(){return xe&6?Je():Au!==-1?Au:Au=Je()}function gr(t){return t.mode&1?xe&2&&Et!==0?Et&-Et:Uk.transition!==null?(Pu===0&&(Pu=m0()),Pu):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:E0(t.type)),t):1}function Ln(t,e,n,s){if(50<uc)throw uc=0,Dm=null,Error(W(185));il(t,n,s),(!(xe&2)||t!==mt)&&(t===mt&&(!(xe&2)&&(rh|=n),ct===4&&er(t,Et)),Xt(t,s),n===1&&xe===0&&!(e.mode&1)&&(Fo=Je()+500,eh&&jr()))}function Xt(t,e){var n=t.callbackNode;Ub(t,e);var s=Xu(t,t===mt?Et:0);if(s===0)n!==null&&yv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&yv(n),e===1)t.tag===0?zk(l_.bind(null,t)):z0(l_.bind(null,t)),Ok(function(){!(xe&6)&&jr()}),n=null;else{switch(p0(s)){case 1:n=Mp;break;case 4:n=h0;break;case 16:n=Yu;break;case 536870912:n=f0;break;default:n=Yu}n=L1(n,C1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C1(t,e){if(Au=-1,Pu=0,xe&6)throw Error(W(327));var n=t.callbackNode;if(Ao()&&t.callbackNode!==n)return null;var s=Xu(t,t===mt?Et:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=pd(t,s);else{e=s;var r=xe;xe|=2;var i=D1();(mt!==t||Et!==e)&&(hs=null,Fo=Je()+500,hi(t,e));do try{aS();break}catch(a){R1(t,a)}while(!0);Yp(),hd.current=i,xe=r,st!==null?e=0:(mt=null,Et=0,e=ct)}if(e!==0){if(e===2&&(r=om(t),r!==0&&(s=r,e=jm(t,r))),e===1)throw n=Mc,hi(t,0),er(t,s),Xt(t,Je()),n;if(e===6)er(t,s);else{if(r=t.current.alternate,!(s&30)&&!iS(r)&&(e=pd(t,s),e===2&&(i=om(t),i!==0&&(s=i,e=jm(t,i))),e===1))throw n=Mc,hi(t,0),er(t,s),Xt(t,Je()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(W(345));case 2:Zr(t,Gt,hs);break;case 3:if(er(t,s),(s&130023424)===s&&(e=dg+500-Je(),10<e)){if(Xu(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){zt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=mm(Zr.bind(null,t,Gt,hs),e);break}Zr(t,Gt,hs);break;case 4:if(er(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Mn(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*rS(s/1960))-s,10<s){t.timeoutHandle=mm(Zr.bind(null,t,Gt,hs),s);break}Zr(t,Gt,hs);break;case 5:Zr(t,Gt,hs);break;default:throw Error(W(329))}}}return Xt(t,Je()),t.callbackNode===n?C1.bind(null,t):null}function jm(t,e){var n=lc;return t.current.memoizedState.isDehydrated&&(hi(t,e).flags|=256),t=pd(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&Vm(e)),t}function Vm(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function iS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Fn(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~ug,e&=~rh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),s=1<<n;t[n]=-1,e&=~s}}function l_(t){if(xe&6)throw Error(W(327));Ao();var e=Xu(t,0);if(!(e&1))return Xt(t,Je()),null;var n=pd(t,e);if(t.tag!==0&&n===2){var s=om(t);s!==0&&(e=s,n=jm(t,s))}if(n===1)throw n=Mc,hi(t,0),er(t,e),Xt(t,Je()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zr(t,Gt,hs),Xt(t,Je()),null}function hg(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Fo=Je()+500,eh&&jr())}}function Ei(t){ar!==null&&ar.tag===0&&!(xe&6)&&Ao();var e=xe;xe|=1;var n=_n.transition,s=Pe;try{if(_n.transition=null,Pe=1,t)return t()}finally{Pe=s,_n.transition=n,xe=e,!(xe&6)&&jr()}}function fg(){tn=Eo.current,Le(Eo)}function hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Vk(n)),st!==null)for(n=st.return;n!==null;){var s=n;switch(Hp(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&nd();break;case 3:Mo(),Le(Qt),Le(Ot),ng();break;case 5:tg(s);break;case 4:Mo();break;case 13:Le(Be);break;case 19:Le(Be);break;case 10:Xp(s.type._context);break;case 22:case 23:fg()}n=n.return}if(mt=t,st=t=yr(t.current,null),Et=tn=e,ct=0,Mc=null,ug=rh=wi=0,Gt=lc=null,ci!==null){for(e=0;e<ci.length;e++)if(n=ci[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}ci=null}return t}function R1(t,e){do{var n=st;try{if(Yp(),bu.current=dd,ud){for(var s=qe.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}ud=!1}if(_i=0,ft=at=qe=null,ac=!1,jc=0,lg.current=null,n===null||n.return===null){ct=1,Mc=e,st=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Et,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=Yv(o);if(T!==null){T.flags&=-257,Xv(T,o,a,i,e),T.mode&1&&Qv(i,d,e),e=T,c=d;var S=e.updateQueue;if(S===null){var A=new Set;A.add(c),e.updateQueue=A}else S.add(c);break e}else{if(!(e&1)){Qv(i,d,e),mg();break e}c=Error(W(426))}}else if(ze&&a.mode&1){var C=Yv(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Xv(C,o,a,i,e),Kp(Lo(c,a));break e}}i=c=Lo(c,a),ct!==4&&(ct=2),lc===null?lc=[i]:lc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=p1(i,c,e);$v(i,x);break e;case 1:a=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(pr===null||!pr.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=g1(i,a,e);$v(i,D);break e}}i=i.return}while(i!==null)}V1(n)}catch(L){e=L,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function D1(){var t=hd.current;return hd.current=dd,t===null?dd:t}function mg(){(ct===0||ct===3||ct===2)&&(ct=4),mt===null||!(wi&268435455)&&!(rh&268435455)||er(mt,Et)}function pd(t,e){var n=xe;xe|=2;var s=D1();(mt!==t||Et!==e)&&(hs=null,hi(t,e));do try{oS();break}catch(r){R1(t,r)}while(!0);if(Yp(),xe=n,hd.current=s,st!==null)throw Error(W(261));return mt=null,Et=0,ct}function oS(){for(;st!==null;)j1(st)}function aS(){for(;st!==null&&!Rb();)j1(st)}function j1(t){var e=M1(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?V1(t):st=e,lg.current=null}function V1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eS(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,st=null;return}}else if(n=Zk(n,e,tn),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);ct===0&&(ct=5)}function Zr(t,e,n){var s=Pe,r=_n.transition;try{_n.transition=null,Pe=1,cS(t,e,n,s)}finally{_n.transition=r,Pe=s}return null}function cS(t,e,n,s){do Ao();while(ar!==null);if(xe&6)throw Error(W(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Bb(t,i),t===mt&&(st=mt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||iu||(iu=!0,L1(Yu,function(){return Ao(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=_n.transition,_n.transition=null;var o=Pe;Pe=1;var a=xe;xe|=4,lg.current=null,nS(t,n),P1(n,t),Ak(hm),Ju=!!dm,hm=dm=null,t.current=n,sS(n),Db(),xe=a,Pe=o,_n.transition=i}else t.current=n;if(iu&&(iu=!1,ar=t,md=r),i=t.pendingLanes,i===0&&(pr=null),Ob(n.stateNode),Xt(t,Je()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(fd)throw fd=!1,t=Rm,Rm=null,t;return md&1&&t.tag!==0&&Ao(),i=t.pendingLanes,i&1?t===Dm?uc++:(uc=0,Dm=t):uc=0,jr(),null}function Ao(){if(ar!==null){var t=p0(md),e=_n.transition,n=Pe;try{if(_n.transition=null,Pe=16>t?16:t,ar===null)var s=!1;else{if(t=ar,ar=null,md=0,xe&6)throw Error(W(331));var r=xe;for(xe|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(ee=d;ee!==null;){var f=ee;switch(f.tag){case 0:case 11:case 15:cc(8,f,i)}var m=f.child;if(m!==null)m.return=f,ee=m;else for(;ee!==null;){f=ee;var g=f.sibling,T=f.return;if(k1(f),f===d){ee=null;break}if(g!==null){g.return=T,ee=g;break}ee=T}}}var S=i.alternate;if(S!==null){var A=S.child;if(A!==null){S.child=null;do{var C=A.sibling;A.sibling=null,A=C}while(A!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:cc(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ee=x;break e}ee=i.return}}var v=t.current;for(ee=v;ee!==null;){o=ee;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ee=b;else e:for(o=v;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sh(9,a)}}catch(L){Qe(a,a.return,L)}if(a===o){ee=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ee=D;break e}ee=a.return}}if(xe=r,jr(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(Qd,t)}catch{}s=!0}return s}finally{Pe=n,_n.transition=e}}return!1}function u_(t,e,n){e=Lo(n,e),e=p1(t,e,1),t=mr(t,e,1),e=zt(),t!==null&&(il(t,1,e),Xt(t,e))}function Qe(t,e,n){if(t.tag===3)u_(t,t,n);else for(;e!==null;){if(e.tag===3){u_(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(pr===null||!pr.has(s))){t=Lo(n,t),t=g1(e,t,1),e=mr(e,t,1),t=zt(),e!==null&&(il(e,1,t),Xt(e,t));break}}e=e.return}}function lS(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(Et&n)===n&&(ct===4||ct===3&&(Et&130023424)===Et&&500>Je()-dg?hi(t,0):ug|=n),Xt(t,e)}function O1(t,e){e===0&&(t.mode&1?(e=Ql,Ql<<=1,!(Ql&130023424)&&(Ql=4194304)):e=1);var n=zt();t=ks(t,e),t!==null&&(il(t,e,n),Xt(t,n))}function uS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),O1(t,n)}function dS(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(W(314))}s!==null&&s.delete(e),O1(t,n)}var M1;M1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,Jk(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,ze&&e.flags&1048576&&U0(e,id,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Su(t,e),t=e.pendingProps;var r=jo(e,Ot.current);So(e,n),r=rg(null,e,s,t,r,n);var i=ig();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(s)?(i=!0,sd(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Zp(e),r.updater=nh,e.stateNode=r,r._reactInternals=e,Em(e,s,t,n),e=xm(null,e,s,!0,i,n)):(e.tag=0,ze&&i&&Gp(e),Lt(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Su(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=fS(s),t=Rn(s,t),r){case 0:e=Im(null,e,s,t,n);break e;case 1:e=e_(null,e,s,t,n);break e;case 11:e=Jv(null,e,s,t,n);break e;case 14:e=Zv(null,e,s,Rn(s.type,t),n);break e}throw Error(W(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rn(s,r),Im(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rn(s,r),e_(t,e,s,r,n);case 3:e:{if(w1(e),t===null)throw Error(W(387));s=e.pendingProps,i=e.memoizedState,r=i.element,H0(t,e),cd(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Lo(Error(W(423)),e),e=t_(t,e,s,n,r);break e}else if(s!==r){r=Lo(Error(W(424)),e),e=t_(t,e,s,n,r);break e}else for(on=fr(e.stateNode.containerInfo.firstChild),cn=e,ze=!0,Vn=null,n=W0(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vo(),s===r){e=Ss(t,e,n);break e}Lt(t,e,s,n)}e=e.child}return e;case 5:return K0(e),t===null&&vm(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,fm(s,r)?o=null:i!==null&&fm(s,i)&&(e.flags|=32),_1(t,e),Lt(t,e,o,n),e.child;case 6:return t===null&&vm(e),null;case 13:return E1(t,e,n);case 4:return eg(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Oo(e,null,s,n):Lt(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rn(s,r),Jv(t,e,s,r,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,De(od,s._currentValue),s._currentValue=o,i!==null)if(Fn(i.value,o)){if(i.children===r.children&&!Qt.current){e=Ss(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Ts(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),_m(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_m(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Lt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,So(e,n),r=En(r),s=s(r),e.flags|=1,Lt(t,e,s,n),e.child;case 14:return s=e.type,r=Rn(s,e.pendingProps),r=Rn(s.type,r),Zv(t,e,s,r,n);case 15:return y1(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rn(s,r),Su(t,e),e.tag=1,Yt(s)?(t=!0,sd(e)):t=!1,So(e,n),m1(e,s,r),Em(e,s,r,n),xm(null,e,s,!0,t,n);case 19:return T1(t,e,n);case 22:return v1(t,e,n)}throw Error(W(156,e.tag))};function L1(t,e){return d0(t,e)}function hS(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,e,n,s){return new hS(t,e,n,s)}function pg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fS(t){if(typeof t=="function")return pg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jp)return 11;if(t===Vp)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nu(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")pg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case uo:return fi(n.children,r,i,e);case Dp:o=8,r|=8;break;case Wf:return t=yn(12,n,e,r|2),t.elementType=Wf,t.lanes=i,t;case Gf:return t=yn(13,n,e,r),t.elementType=Gf,t.lanes=i,t;case Hf:return t=yn(19,n,e,r),t.elementType=Hf,t.lanes=i,t;case K2:return ih(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case G2:o=10;break e;case H2:o=9;break e;case jp:o=11;break e;case Vp:o=14;break e;case Xs:o=16,s=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=yn(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function fi(t,e,n,s){return t=yn(7,t,s,e),t.lanes=n,t}function ih(t,e,n,s){return t=yn(22,t,s,e),t.elementType=K2,t.lanes=n,t.stateNode={isHidden:!1},t}function xf(t,e,n){return t=yn(6,t,null,e),t.lanes=n,t}function bf(t,e,n){return e=yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mS(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rf(0),this.expirationTimes=rf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rf(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function gg(t,e,n,s,r,i,o,a,c){return t=new mS(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=yn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zp(i),t}function pS(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lo,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function F1(t){if(!t)return kr;t=t._reactInternals;e:{if(Vi(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Yt(n))return F0(t,n,e)}return e}function z1(t,e,n,s,r,i,o,a,c){return t=gg(n,s,!0,t,r,i,o,a,c),t.context=F1(null),n=t.current,s=zt(),r=gr(n),i=Ts(s,r),i.callback=e??null,mr(n,i,r),t.current.lanes=r,il(t,r,s),Xt(t,s),t}function oh(t,e,n,s){var r=e.current,i=zt(),o=gr(r);return n=F1(n),e.context===null?e.context=n:e.pendingContext=n,e=Ts(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=mr(r,e,o),t!==null&&(Ln(t,r,o,i),xu(t,r,o)),o}function gd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function d_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yg(t,e){d_(t,e),(t=t.alternate)&&d_(t,e)}function gS(){return null}var U1=typeof reportError=="function"?reportError:function(t){console.error(t)};function vg(t){this._internalRoot=t}ah.prototype.render=vg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));oh(t,e,null,null)};ah.prototype.unmount=vg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ei(function(){oh(null,t,null,null)}),e[bs]=null}};function ah(t){this._internalRoot=t}ah.prototype.unstable_scheduleHydration=function(t){if(t){var e=v0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zs.length&&e!==0&&e<Zs[n].priority;n++);Zs.splice(n,0,t),n===0&&w0(t)}};function _g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function h_(){}function yS(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=gd(o);i.call(d)}}var o=z1(e,s,t,0,null,!1,!1,"",h_);return t._reactRootContainer=o,t[bs]=o.current,Pc(t.nodeType===8?t.parentNode:t),Ei(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var d=gd(c);a.call(d)}}var c=gg(t,0,!1,null,null,!1,!1,"",h_);return t._reactRootContainer=c,t[bs]=c.current,Pc(t.nodeType===8?t.parentNode:t),Ei(function(){oh(e,c,n,s)}),c}function lh(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var c=gd(o);a.call(c)}}oh(e,o,t,r)}else o=yS(n,e,t,r,s);return gd(o)}g0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ha(e.pendingLanes);n!==0&&(Lp(e,n|1),Xt(e,Je()),!(xe&6)&&(Fo=Je()+500,jr()))}break;case 13:Ei(function(){var s=ks(t,1);if(s!==null){var r=zt();Ln(s,t,1,r)}}),yg(t,1)}};Fp=function(t){if(t.tag===13){var e=ks(t,134217728);if(e!==null){var n=zt();Ln(e,t,134217728,n)}yg(t,134217728)}};y0=function(t){if(t.tag===13){var e=gr(t),n=ks(t,e);if(n!==null){var s=zt();Ln(n,t,e,s)}yg(t,e)}};v0=function(){return Pe};_0=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};sm=function(t,e,n){switch(e){case"input":if(Yf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Zd(s);if(!r)throw Error(W(90));Y2(s),Yf(s,r)}}}break;case"textarea":J2(t,n);break;case"select":e=n.value,e!=null&&Io(t,!!n.multiple,e,!1)}};i0=hg;o0=Ei;var vS={usingClientEntryPoint:!1,Events:[al,po,Zd,s0,r0,hg]},La={findFiberByHostInstance:ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_S={bundleType:La.bundleType,version:La.version,rendererPackageName:La.rendererPackageName,rendererConfig:La.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=l0(t),t===null?null:t.stateNode},findFiberByHostInstance:La.findFiberByHostInstance||gS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{Qd=ou.inject(_S),Xn=ou}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vS;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_g(e))throw Error(W(200));return pS(t,e,null,n)};dn.createRoot=function(t,e){if(!_g(t))throw Error(W(299));var n=!1,s="",r=U1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=gg(t,1,!1,null,null,n,!1,s,r),t[bs]=e.current,Pc(t.nodeType===8?t.parentNode:t),new vg(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=l0(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return Ei(t)};dn.hydrate=function(t,e,n){if(!ch(e))throw Error(W(200));return lh(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!_g(t))throw Error(W(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=U1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=z1(e,null,t,1,n??null,r,!1,i,o),t[bs]=e.current,Pc(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new ah(e)};dn.render=function(t,e,n){if(!ch(e))throw Error(W(200));return lh(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!ch(t))throw Error(W(40));return t._reactRootContainer?(Ei(function(){lh(null,null,t,!1,function(){t._reactRootContainer=null,t[bs]=null})}),!0):!1};dn.unstable_batchedUpdates=hg;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!ch(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return lh(t,e,n,!1,s)};dn.version="18.3.1-next-f1338f8080-20240426";function B1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B1)}catch(t){console.error(t)}}B1(),B2.exports=dn;var wS=B2.exports,f_=wS;$f.createRoot=f_.createRoot,$f.hydrateRoot=f_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lc(){return Lc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Lc.apply(this,arguments)}var cr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(cr||(cr={}));const m_="popstate";function ES(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:o,hash:a}=s.location;return Om("",{pathname:i,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:yd(r)}return IS(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TS(){return Math.random().toString(36).substr(2,8)}function p_(t,e){return{usr:t.state,key:t.key,idx:e}}function Om(t,e,n,s){return n===void 0&&(n=null),Lc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ra(e):e,{state:n,key:e&&e.key||s||TS()})}function yd(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ra(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function IS(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,a=cr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(Lc({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){a=cr.Pop;let C=f(),x=C==null?null:C-d;d=C,c&&c({action:a,location:A.location,delta:x})}function g(C,x){a=cr.Push;let v=Om(A.location,C,x);d=f()+1;let b=p_(v,d),D=A.createHref(v);try{o.pushState(b,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(D)}i&&c&&c({action:a,location:A.location,delta:1})}function T(C,x){a=cr.Replace;let v=Om(A.location,C,x);d=f();let b=p_(v,d),D=A.createHref(v);o.replaceState(b,"",D),i&&c&&c({action:a,location:A.location,delta:0})}function S(C){let x=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof C=="string"?C:yd(C);return v=v.replace(/ $/,"%20"),We(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let A={get action(){return a},get location(){return t(r,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(m_,m),c=C,()=>{r.removeEventListener(m_,m),c=null}},createHref(C){return e(r,C)},createURL:S,encodeLocation(C){let x=S(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:T,go(C){return o.go(C)}};return A}var g_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(g_||(g_={}));function xS(t,e,n){return n===void 0&&(n="/"),bS(t,e,n)}function bS(t,e,n,s){let r=typeof e=="string"?ra(e):e,i=zo(r.pathname||"/",n);if(i==null)return null;let o=q1(t);kS(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=MS(i);a=VS(o[c],d)}return a}function q1(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(We(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=vr([s,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(We(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),q1(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:DS(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))r(i,o);else for(let c of W1(i.path))r(i,o,c)}),e}function W1(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=W1(s.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function kS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const SS=/^:[\w-]+$/,AS=3,PS=2,NS=1,CS=10,RS=-2,y_=t=>t==="*";function DS(t,e){let n=t.split("/"),s=n.length;return n.some(y_)&&(s+=RS),e&&(s+=PS),n.filter(r=>!y_(r)).reduce((r,i)=>r+(SS.test(i)?AS:i===""?NS:CS),s)}function jS(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function VS(t,e,n){let{routesMeta:s}=t,r={},i="/",o=[];for(let a=0;a<s.length;++a){let c=s[a],d=a===s.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Mm({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!m)return null;Object.assign(r,m.params),o.push({params:r,pathname:vr([i,m.pathname]),pathnameBase:US(vr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=vr([i,m.pathnameBase]))}return o}function Mm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=OS(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce((d,f,m)=>{let{paramName:g,isOptional:T}=f;if(g==="*"){let A=a[m]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const S=a[m];return T&&!S?d[g]=void 0:d[g]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function OS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(s.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function MS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function zo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function LS(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?ra(t):t;return{pathname:n?n.startsWith("/")?n:FS(n,e):e,search:BS(s),hash:$S(r)}}function FS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function kf(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wg(t,e){let n=zS(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Eg(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=ra(t):(r=Lc({},t),We(!r.pathname||!r.pathname.includes("?"),kf("?","pathname","search",r)),We(!r.pathname||!r.pathname.includes("#"),kf("#","pathname","hash",r)),We(!r.search||!r.search.includes("#"),kf("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;r.pathname=g.join("/")}a=m>=0?e[m]:"/"}let c=LS(r,a),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const vr=t=>t.join("/").replace(/\/\/+/g,"/"),US=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$S=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const G1=["post","put","patch","delete"];new Set(G1);const WS=["get",...G1];new Set(WS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fc(){return Fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Fc.apply(this,arguments)}const uh=P.createContext(null),H1=P.createContext(null),Ds=P.createContext(null),dh=P.createContext(null),js=P.createContext({outlet:null,matches:[],isDataRoute:!1}),K1=P.createContext(null);function GS(t,e){let{relative:n}=e===void 0?{}:e;ia()||We(!1);let{basename:s,navigator:r}=P.useContext(Ds),{hash:i,pathname:o,search:a}=fh(t,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:vr([s,o])),r.createHref({pathname:c,search:a,hash:i})}function ia(){return P.useContext(dh)!=null}function oa(){return ia()||We(!1),P.useContext(dh).location}function Q1(t){P.useContext(Ds).static||P.useLayoutEffect(t)}function hh(){let{isDataRoute:t}=P.useContext(js);return t?aA():HS()}function HS(){ia()||We(!1);let t=P.useContext(uh),{basename:e,future:n,navigator:s}=P.useContext(Ds),{matches:r}=P.useContext(js),{pathname:i}=oa(),o=JSON.stringify(wg(r,n.v7_relativeSplatPath)),a=P.useRef(!1);return Q1(()=>{a.current=!0}),P.useCallback(function(d,f){if(f===void 0&&(f={}),!a.current)return;if(typeof d=="number"){s.go(d);return}let m=Eg(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:vr([e,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[e,s,o,i,t])}const KS=P.createContext(null);function QS(t){let e=P.useContext(js).outlet;return e&&P.createElement(KS.Provider,{value:t},e)}function fh(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=P.useContext(Ds),{matches:r}=P.useContext(js),{pathname:i}=oa(),o=JSON.stringify(wg(r,s.v7_relativeSplatPath));return P.useMemo(()=>Eg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function YS(t,e){return XS(t,e)}function XS(t,e,n,s){ia()||We(!1);let{navigator:r}=P.useContext(Ds),{matches:i}=P.useContext(js),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=oa(),f;if(e){var m;let C=typeof e=="string"?ra(e):e;c==="/"||(m=C.pathname)!=null&&m.startsWith(c)||We(!1),f=C}else f=d;let g=f.pathname||"/",T=g;if(c!=="/"){let C=c.replace(/^\//,"").split("/");T="/"+g.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=xS(t,{pathname:T}),A=nA(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:vr([c,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:vr([c,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,s);return e&&A?P.createElement(dh.Provider,{value:{location:Fc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:cr.Pop}},A):A}function JS(){let t=oA(),e=qS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:r},n):null,null)}const ZS=P.createElement(JS,null);class eA extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(js.Provider,{value:this.props.routeContext},P.createElement(K1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tA(t){let{routeContext:e,match:n,children:s}=t,r=P.useContext(uh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(js.Provider,{value:e},s)}function nA(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let f=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);f>=0||We(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:T}=n,S=m.route.loader&&g[m.route.id]===void 0&&(!T||T[m.route.id]===void 0);if(m.route.lazy||S){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let T,S=!1,A=null,C=null;n&&(T=a&&m.route.id?a[m.route.id]:void 0,A=m.route.errorElement||ZS,c&&(d<0&&g===0?(cA("route-fallback"),S=!0,C=null):d===g&&(S=!0,C=m.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),v=()=>{let b;return T?b=A:S?b=C:m.route.Component?b=P.createElement(m.route.Component,null):m.route.element?b=m.route.element:b=f,P.createElement(tA,{match:m,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:b})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?P.createElement(eA,{location:n.location,revalidation:n.revalidation,component:A,error:T,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var Y1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Y1||{}),X1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(X1||{});function sA(t){let e=P.useContext(uh);return e||We(!1),e}function rA(t){let e=P.useContext(H1);return e||We(!1),e}function iA(t){let e=P.useContext(js);return e||We(!1),e}function J1(t){let e=iA(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function oA(){var t;let e=P.useContext(K1),n=rA(),s=J1();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function aA(){let{router:t}=sA(Y1.UseNavigateStable),e=J1(X1.UseNavigateStable),n=P.useRef(!1);return Q1(()=>{n.current=!0}),P.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Fc({fromRouteId:e},i)))},[t,e])}const v_={};function cA(t,e,n){v_[t]||(v_[t]=!0)}function lA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function vd(t){let{to:e,replace:n,state:s,relative:r}=t;ia()||We(!1);let{future:i,static:o}=P.useContext(Ds),{matches:a}=P.useContext(js),{pathname:c}=oa(),d=hh(),f=Eg(e,wg(a,i.v7_relativeSplatPath),c,r==="path"),m=JSON.stringify(f);return P.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:r}),[d,m,r,n,s]),null}function uA(t){return QS(t.context)}function mn(t){We(!1)}function dA(t){let{basename:e="/",children:n=null,location:s,navigationType:r=cr.Pop,navigator:i,static:o=!1,future:a}=t;ia()&&We(!1);let c=e.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:c,navigator:i,static:o,future:Fc({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof s=="string"&&(s=ra(s));let{pathname:f="/",search:m="",hash:g="",state:T=null,key:S="default"}=s,A=P.useMemo(()=>{let C=zo(f,c);return C==null?null:{location:{pathname:C,search:m,hash:g,state:T,key:S},navigationType:r}},[c,f,m,g,T,S,r]);return A==null?null:P.createElement(Ds.Provider,{value:d},P.createElement(dh.Provider,{children:n,value:A}))}function hA(t){let{children:e,location:n}=t;return YS(Lm(e),n)}new Promise(()=>{});function Lm(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(s,r)=>{if(!P.isValidElement(s))return;let i=[...e,r];if(s.type===P.Fragment){n.push.apply(n,Lm(s.props.children,i));return}s.type!==mn&&We(!1),!s.props.index||!s.props.children||We(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Lm(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},_d.apply(this,arguments)}function Z1(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function fA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mA(t,e){return t.button===0&&(!e||e==="_self")&&!fA(t)}const pA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],yA="6";try{window.__reactRouterVersion=yA}catch{}const vA=P.createContext({isTransitioning:!1}),_A="startTransition",__=lb[_A];function wA(t){let{basename:e,children:n,future:s,window:r}=t,i=P.useRef();i.current==null&&(i.current=ES({window:r,v5Compat:!0}));let o=i.current,[a,c]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},f=P.useCallback(m=>{d&&__?__(()=>c(m)):c(m)},[c,d]);return P.useLayoutEffect(()=>o.listen(f),[o,f]),P.useEffect(()=>lA(s),[s]),P.createElement(dA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:s})}const EA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IA=P.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:o,state:a,target:c,to:d,preventScrollReset:f,viewTransition:m}=e,g=Z1(e,pA),{basename:T}=P.useContext(Ds),S,A=!1;if(typeof d=="string"&&TA.test(d)&&(S=d,EA))try{let b=new URL(window.location.href),D=d.startsWith("//")?new URL(b.protocol+d):new URL(d),L=zo(D.pathname,T);D.origin===b.origin&&L!=null?d=L+D.search+D.hash:A=!0}catch{}let C=GS(d,{relative:r}),x=bA(d,{replace:o,state:a,target:c,preventScrollReset:f,relative:r,viewTransition:m});function v(b){s&&s(b),b.defaultPrevented||x(b)}return P.createElement("a",_d({},g,{href:S||C,onClick:A||i?s:v,ref:n,target:c}))}),Xi=P.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:r=!1,className:i="",end:o=!1,style:a,to:c,viewTransition:d,children:f}=e,m=Z1(e,gA),g=fh(c,{relative:m.relative}),T=oa(),S=P.useContext(H1),{navigator:A,basename:C}=P.useContext(Ds),x=S!=null&&kA(g)&&d===!0,v=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,b=T.pathname,D=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(b=b.toLowerCase(),D=D?D.toLowerCase():null,v=v.toLowerCase()),D&&C&&(D=zo(D,C)||D);const L=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let M=b===v||!o&&b.startsWith(v)&&b.charAt(L)==="/",E=D!=null&&(D===v||!o&&D.startsWith(v)&&D.charAt(v.length)==="/"),y={isActive:M,isPending:E,isTransitioning:x},I=M?s:void 0,w;typeof i=="function"?w=i(y):w=[i,M?"active":null,E?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(y):a;return P.createElement(IA,_d({},m,{"aria-current":I,className:w,ref:n,style:N,to:c,viewTransition:d}),typeof f=="function"?f(y):f)});var Fm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Fm||(Fm={}));var w_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(w_||(w_={}));function xA(t){let e=P.useContext(uh);return e||We(!1),e}function bA(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,c=hh(),d=oa(),f=fh(t,{relative:o});return P.useCallback(m=>{if(mA(m,n)){m.preventDefault();let g=s!==void 0?s:yd(d)===yd(f);c(t,{replace:g,state:r,preventScrollReset:i,relative:o,viewTransition:a})}},[d,c,f,s,r,n,t,i,o,a])}function kA(t,e){e===void 0&&(e={});let n=P.useContext(vA);n==null&&We(!1);let{basename:s}=xA(Fm.useViewTransitionState),r=fh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=zo(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=zo(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Mm(r.pathname,o)!=null||Mm(r.pathname,i)!=null}const SA=()=>{};var E_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},AA=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},tE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,f=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|d>>6,T=d&63;c||(T=64,o||(g=64)),s.push(n[f],n[m],n[g],n[T])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||d==null||m==null)throw new PA;const g=i<<2|a>>4;if(s.push(g),d!==64){const T=a<<4&240|d>>2;if(s.push(T),m!==64){const S=d<<6&192|m;s.push(S)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NA=function(t){const e=eE(t);return tE.encodeByteArray(e,!0)},wd=function(t){return NA(t).replace(/\./g,"")},nE=function(t){try{return tE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=()=>sE().__FIREBASE_DEFAULTS__,RA=()=>{if(typeof process>"u"||typeof E_>"u")return;const t=E_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nE(t[1]);return e&&JSON.parse(e)},mh=()=>{try{return SA()||CA()||RA()||DA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rE=t=>{var e,n;return(n=(e=mh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},iE=t=>{const e=rE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},oE=()=>{var t;return(t=mh())===null||t===void 0?void 0:t.config},aE=t=>{var e;return(e=mh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t){return t.endsWith(".cloudworkstations.dev")}async function Tg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wd(JSON.stringify(n)),wd(JSON.stringify(o)),""].join(".")}const dc={};function OA(){const t={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?t.emulator.push(e):t.prod.push(e);return t}function MA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let T_=!1;function Ig(t,e){if(typeof window>"u"||typeof document>"u"||!Oi(window.location.host)||dc[t]===e||dc[t]||T_)return;dc[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=OA().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,T){g.setAttribute("width","24"),g.setAttribute("id",T),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{T_=!0,o()},g}function f(g,T){g.setAttribute("id",T),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=MA(s),T=n("text"),S=document.getElementById(T)||document.createElement("span"),A=n("learnmore"),C=document.getElementById(A)||document.createElement("a"),x=n("preprendIcon"),v=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const b=g.element;a(b),f(C,A);const D=d();c(v,x),b.append(v,S,C,D),document.body.appendChild(b)}i?(S.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function cE(){var t;const e=(t=mh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BA(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lE(){return!cE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uE(){return!cE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function dE(){try{return typeof indexedDB=="object"}catch{return!1}}function $A(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="FirebaseError";class Vs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=qA,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ll.prototype.create)}}class ll{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?WA(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Vs(r,a,s)}}function WA(t,e){return t.replace(GA,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const GA=/\{\$([^}]+)}/g;function HA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ti(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(I_(i)&&I_(o)){if(!Ti(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function I_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Qa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Ya(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function KA(t,e){const n=new QA(t,e);return n.subscribe.bind(n)}class QA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");YA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Sf),r.error===void 0&&(r.error=Sf),r.complete===void 0&&(r.complete=Sf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class Sr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new jA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZA(e))try{this.getOrInitializeService({instanceIdentifier:ei})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ei){return this.instances.has(e)}getOptions(e=ei){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:JA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ei){return this.component?this.component.multipleInstances?e:ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JA(t){return t===ei?void 0:t}function ZA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const tP={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},nP=_e.INFO,sP={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},rP=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=sP[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xg{constructor(e){this.name=e,this._logLevel=nP,this._logHandler=rP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const iP=(t,e)=>e.some(n=>t instanceof n);let x_,b_;function oP(){return x_||(x_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aP(){return b_||(b_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hE=new WeakMap,zm=new WeakMap,fE=new WeakMap,Af=new WeakMap,bg=new WeakMap;function cP(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_r(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hE.set(n,t)}).catch(()=>{}),bg.set(e,t),e}function lP(t){if(zm.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});zm.set(t,e)}let Um={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uP(t){Um=t(Um)}function dP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Pf(this),e,...n);return fE.set(s,e.sort?e.sort():[e]),_r(s)}:aP().includes(t)?function(...e){return t.apply(Pf(this),e),_r(hE.get(this))}:function(...e){return _r(t.apply(Pf(this),e))}}function hP(t){return typeof t=="function"?dP(t):(t instanceof IDBTransaction&&lP(t),iP(t,oP())?new Proxy(t,Um):t)}function _r(t){if(t instanceof IDBRequest)return cP(t);if(Af.has(t))return Af.get(t);const e=hP(t);return e!==t&&(Af.set(t,e),bg.set(e,t)),e}const Pf=t=>bg.get(t);function fP(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=_r(o);return s&&o.addEventListener("upgradeneeded",c=>{s(_r(o.result),c.oldVersion,c.newVersion,_r(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const mP=["get","getKey","getAll","getAllKeys","count"],pP=["put","add","delete","clear"],Nf=new Map;function k_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=pP.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||mP.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),r&&c.done]))[0]};return Nf.set(e,i),i}uP(t=>({...t,get:(e,n,s)=>k_(e,n)||t.get(e,n,s),has:(e,n)=>!!k_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yP(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function yP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bm="@firebase/app",S_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new xg("@firebase/app"),vP="@firebase/app-compat",_P="@firebase/analytics-compat",wP="@firebase/analytics",EP="@firebase/app-check-compat",TP="@firebase/app-check",IP="@firebase/auth",xP="@firebase/auth-compat",bP="@firebase/database",kP="@firebase/data-connect",SP="@firebase/database-compat",AP="@firebase/functions",PP="@firebase/functions-compat",NP="@firebase/installations",CP="@firebase/installations-compat",RP="@firebase/messaging",DP="@firebase/messaging-compat",jP="@firebase/performance",VP="@firebase/performance-compat",OP="@firebase/remote-config",MP="@firebase/remote-config-compat",LP="@firebase/storage",FP="@firebase/storage-compat",zP="@firebase/firestore",UP="@firebase/ai",BP="@firebase/firestore-compat",$P="firebase",qP="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="[DEFAULT]",WP={[Bm]:"fire-core",[vP]:"fire-core-compat",[wP]:"fire-analytics",[_P]:"fire-analytics-compat",[TP]:"fire-app-check",[EP]:"fire-app-check-compat",[IP]:"fire-auth",[xP]:"fire-auth-compat",[bP]:"fire-rtdb",[kP]:"fire-data-connect",[SP]:"fire-rtdb-compat",[AP]:"fire-fn",[PP]:"fire-fn-compat",[NP]:"fire-iid",[CP]:"fire-iid-compat",[RP]:"fire-fcm",[DP]:"fire-fcm-compat",[jP]:"fire-perf",[VP]:"fire-perf-compat",[OP]:"fire-rc",[MP]:"fire-rc-compat",[LP]:"fire-gcs",[FP]:"fire-gcs-compat",[zP]:"fire-fst",[BP]:"fire-fst-compat",[UP]:"fire-vertex","fire-js":"fire-js",[$P]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Map,GP=new Map,qm=new Map;function A_(t,e){try{t.container.addComponent(e)}catch(n){As.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ii(t){const e=t.name;if(qm.has(e))return As.debug(`There were multiple attempts to register component ${e}.`),!1;qm.set(e,t);for(const n of Ed.values())A_(n,t);for(const n of GP.values())A_(n,t);return!0}function ph(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new ll("app","Firebase",HP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=qP;function mE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:$m,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw wr.create("bad-app-name",{appName:String(r)});if(n||(n=oE()),!n)throw wr.create("no-options");const i=Ed.get(r);if(i){if(Ti(n,i.options)&&Ti(s,i.config))return i;throw wr.create("duplicate-app",{appName:r})}const o=new eP(r);for(const c of qm.values())o.addComponent(c);const a=new KP(n,s,o);return Ed.set(r,a),a}function kg(t=$m){const e=Ed.get(t);if(!e&&t===$m&&oE())return mE();if(!e)throw wr.create("no-app",{appName:t});return e}function Zn(t,e,n){var s;let r=(s=WP[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),As.warn(a.join(" "));return}Ii(new Sr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="firebase-heartbeat-database",YP=1,zc="firebase-heartbeat-store";let Cf=null;function pE(){return Cf||(Cf=fP(QP,YP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zc)}catch(n){console.warn(n)}}}}).catch(t=>{throw wr.create("idb-open",{originalErrorMessage:t.message})})),Cf}async function XP(t){try{const n=(await pE()).transaction(zc),s=await n.objectStore(zc).get(gE(t));return await n.done,s}catch(e){if(e instanceof Vs)As.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});As.warn(n.message)}}}async function P_(t,e){try{const s=(await pE()).transaction(zc,"readwrite");await s.objectStore(zc).put(e,gE(t)),await s.done}catch(n){if(n instanceof Vs)As.warn(n.message);else{const s=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});As.warn(s.message)}}}function gE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=1024,ZP=30;class eN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nN(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=N_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>ZP){const o=sN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){As.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=N_(),{heartbeatsToSend:s,unsentEntries:r}=tN(this._heartbeatsCache.heartbeats),i=wd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return As.warn(n),""}}}function N_(){return new Date().toISOString().substring(0,10)}function tN(t,e=JP){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),C_(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),C_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class nN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dE()?$A().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return P_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return P_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function C_(t){return wd(JSON.stringify({version:2,heartbeats:t})).length}function sN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){Ii(new Sr("platform-logger",e=>new gP(e),"PRIVATE")),Ii(new Sr("heartbeat",e=>new eN(e),"PRIVATE")),Zn(Bm,S_,t),Zn(Bm,S_,"esm2017"),Zn("fire-js","")}rN("");function Sg(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function yE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iN=yE,vE=new ll("auth","Firebase",yE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=new xg("@firebase/auth");function oN(t,...e){Td.logLevel<=_e.WARN&&Td.warn(`Auth (${aa}): ${t}`,...e)}function Cu(t,...e){Td.logLevel<=_e.ERROR&&Td.error(`Auth (${aa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,...e){throw Ag(t,...e)}function es(t,...e){return Ag(t,...e)}function _E(t,e,n){const s=Object.assign(Object.assign({},iN()),{[e]:n});return new ll("auth","Firebase",s).create(e,{appName:t.name})}function Is(t){return _E(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ag(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return vE.create(t,...e)}function ue(t,e,...n){if(!t)throw Ag(e,...n)}function vs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cu(e),new Error(e)}function Ps(t,e){t||vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aN(){return R_()==="http:"||R_()==="https:"}function R_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aN()||zA()||"connection"in navigator)?navigator.onLine:!0}function lN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ps(n>e,"Short delay should be less than long delay!"),this.isMobile=LA()||UA()}get(){return cN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t,e){Ps(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hN=new dl(3e4,6e4);function Vr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Or(t,e,n,s,r={}){return EE(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=ul(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return FA()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Oi(t.emulatorConfig.host)&&(d.credentials="include"),wE.fetch()(await TE(t,t.config.apiHost,n,a),d)})}async function EE(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},uN),e);try{const r=new mN(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw au(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw au(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw au(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw au(t,"user-disabled",o);const f=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _E(t,f,d);zn(t,f)}}catch(r){if(r instanceof Vs)throw r;zn(t,"network-request-failed",{message:String(r)})}}async function hl(t,e,n,s,r={}){const i=await Or(t,e,n,s,r);return"mfaPendingCredential"in i&&zn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function TE(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Pg(t.config,r):`${t.config.apiScheme}://${r}`;return dN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function fN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(es(this.auth,"network-request-failed")),hN.get())})}}function au(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=es(t,e,s);return r.customData._tokenResponse=n,r}function D_(t){return t!==void 0&&t.enterprise!==void 0}class pN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gN(t,e){return Or(t,"GET","/v2/recaptchaConfig",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t,e){return Or(t,"POST","/v1/accounts:delete",e)}async function Id(t,e){return Or(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vN(t,e=!1){const n=it(t),s=await n.getIdToken(e),r=Ng(s);ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:hc(Rf(r.auth_time)),issuedAtTime:hc(Rf(r.iat)),expirationTime:hc(Rf(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Rf(t){return Number(t)*1e3}function Ng(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Cu("JWT malformed, contained fewer than 3 sections"),null;try{const r=nE(n);return r?JSON.parse(r):(Cu("Failed to decode base64 JWT payload"),null)}catch(r){return Cu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function j_(t){const e=Ng(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Vs&&_N(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function _N({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(t){var e;const n=t.auth,s=await t.getIdToken(),r=await Uc(t,Id(n,{idToken:s}));ue(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?IE(i.providerUserInfo):[],a=TN(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=c?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Gm(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function EN(t){const e=it(t);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TN(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function IE(t){return t.map(e=>{var{providerId:n}=e,s=Sg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e){const n=await EE(t,{},async()=>{const s=ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await TE(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:s};return t.emulatorConfig&&Oi(t.emulatorConfig.host)&&(c.credentials="include"),wE.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xN(t,e){return Or(t,"POST","/v2/accounts:revokeToken",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):j_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=j_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await IN(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Po;return s&&(ue(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(ue(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Po,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class On{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=Sg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Gm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Uc(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vN(this,e)}reload(){return EN(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new On(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await xd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(Is(this.auth));const e=await this.getIdToken();return await Uc(this,yN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,a,c,d,f;const m=(s=n.displayName)!==null&&s!==void 0?s:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,T=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:b,emailVerified:D,isAnonymous:L,providerData:M,stsTokenManager:E}=n;ue(b&&E,e,"internal-error");const y=Po.fromJSON(this.name,E);ue(typeof b=="string",e,"internal-error"),Gs(m,e.name),Gs(g,e.name),ue(typeof D=="boolean",e,"internal-error"),ue(typeof L=="boolean",e,"internal-error"),Gs(T,e.name),Gs(S,e.name),Gs(A,e.name),Gs(C,e.name),Gs(x,e.name),Gs(v,e.name);const I=new On({uid:b,auth:e,email:g,emailVerified:D,displayName:m,isAnonymous:L,photoURL:S,phoneNumber:T,tenantId:A,stsTokenManager:y,createdAt:x,lastLoginAt:v});return M&&Array.isArray(M)&&(I.providerData=M.map(w=>Object.assign({},w))),C&&(I._redirectEventId=C),I}static async _fromIdTokenResponse(e,n,s=!1){const r=new Po;r.updateFromServerResponse(n);const i=new On({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await xd(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ue(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?IE(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),a=new Po;a.updateFromIdToken(s);const c=new On({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Gm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=new Map;function _s(t){Ps(t instanceof Function,"Expected a class definition");let e=V_.get(t);return e?(Ps(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,V_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xE.type="NONE";const O_=xE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t,e,n){return`firebase:${t}:${e}:${n}`}class No{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Ru(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ru("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Id(this.auth,{idToken:e}).catch(()=>{});return n?On._fromGetAccountInfoResponse(this.auth,n,e):null}return On._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new No(_s(O_),e,s);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=r[0]||_s(O_);const o=Ru(s,e.config.apiKey,e.name);let a=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await Id(e,{idToken:f}).catch(()=>{});if(!g)break;m=await On._fromGetAccountInfoResponse(e,g,f)}else m=On._fromJSON(e,f);d!==i&&(a=m),i=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new No(i,e,s):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new No(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NE(e))return"Blackberry";if(CE(e))return"Webos";if(kE(e))return"Safari";if((e.includes("chrome/")||SE(e))&&!e.includes("edge/"))return"Chrome";if(PE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function bE(t=lt()){return/firefox\//i.test(t)}function kE(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SE(t=lt()){return/crios\//i.test(t)}function AE(t=lt()){return/iemobile/i.test(t)}function PE(t=lt()){return/android/i.test(t)}function NE(t=lt()){return/blackberry/i.test(t)}function CE(t=lt()){return/webos/i.test(t)}function Cg(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bN(t=lt()){var e;return Cg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kN(){return BA()&&document.documentMode===10}function RE(t=lt()){return Cg(t)||PE(t)||CE(t)||NE(t)||/windows phone/i.test(t)||AE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t,e=[]){let n;switch(t){case"Browser":n=M_(lt());break;case"Worker":n=`${M_(lt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${aa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e={}){return Or(t,"GET","/v2/passwordPolicy",Vr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=6;class NN{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L_(this),this.idTokenSubscription=new L_(this),this.beforeStateQueue=new SN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_s(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await No.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Id(this,{idToken:e}),s=await On._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(Is(this));const n=e?it(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(Is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(Is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AN(this),n=new NN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ll("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await xN(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_s(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[_s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&oN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Mi(t){return it(t)}class L_{constructor(e){this.auth=e,this.observer=null,this.addObserver=KA(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RN(t){gh=t}function jE(t){return gh.loadJS(t)}function DN(){return gh.recaptchaEnterpriseScript}function jN(){return gh.gapiScript}function VN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ON{constructor(){this.enterprise=new MN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const LN="recaptcha-enterprise",VE="NO_RECAPTCHA";class FN{constructor(e){this.type=LN,this.auth=Mi(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{gN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new pN(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})})}function r(i,o,a){const c=window.grecaptcha;D_(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(VE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ON().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&D_(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=DN();c.length!==0&&(c+=a),jE(c).then(()=>{r(a,i,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function F_(t,e,n,s=!1,r=!1){const i=new FN(t);let o;if(r)o=VE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,d=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Hm(t,e,n,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await F_(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await F_(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t,e){const n=ph(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Ti(i,e??{}))return r;zn(r,"already-initialized")}return n.initialize({options:e})}function UN(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(_s);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function BN(t,e,n){const s=Mi(t);ue(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=OE(e),{host:o,port:a}=$N(e),c=a===null?"":`:${a}`,d={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){ue(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ue(Ti(d,s.config.emulator)&&Ti(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Oi(o)?(Tg(`${i}//${o}${c}`),Ig("Auth",!0)):qN()}function OE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $N(t){const e=OE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:z_(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:z_(o)}}}function z_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,n){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}async function WN(t,e){return Or(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e){return hl(t,"POST","/v1/accounts:signInWithPassword",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e){return hl(t,"POST","/v1/accounts:signInWithEmailLink",Vr(t,e))}async function KN(t,e){return hl(t,"POST","/v1/accounts:signInWithEmailLink",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Rg{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Bc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Bc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,n,"signInWithPassword",GN);case"emailLink":return HN(e,{email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,s,"signUpPassword",WN);case"emailLink":return KN(e,{idToken:n,email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(t,e){return hl(t,"POST","/v1/accounts:signInWithIdp",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="http://localhost";class xi extends Rg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=Sg(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new xi(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Co(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Co(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Co(e,n)}buildRequest(){const e={requestUri:QN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ul(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XN(t){const e=Qa(Ya(t)).link,n=e?Qa(Ya(e)).deep_link_id:null,s=Qa(Ya(t)).deep_link_id;return(s?Qa(Ya(s)).link:null)||s||n||e||t}class Dg{constructor(e){var n,s,r,i,o,a;const c=Qa(Ya(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(s=c.oobCode)!==null&&s!==void 0?s:null,m=YN((r=c.mode)!==null&&r!==void 0?r:null);ue(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=XN(e);try{return new Dg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.providerId=ca.PROVIDER_ID}static credential(e,n){return Bc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Dg.parseLink(n);return ue(s,"argument-error"),Bc._fromEmailAndCode(e,s.code,s.tenantId)}}ca.PROVIDER_ID="password";ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends ME{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends fl{constructor(){super("facebook.com")}static credential(e){return xi._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xi._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return nr.credential(n,s)}catch{return null}}}nr.GOOGLE_SIGN_IN_METHOD="google.com";nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends fl{constructor(){super("github.com")}static credential(e){return xi._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends fl{constructor(){super("twitter.com")}static credential(e,n){return xi._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return rr.credential(n,s)}catch{return null}}}rr.TWITTER_SIGN_IN_METHOD="twitter.com";rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e){return hl(t,"POST","/v1/accounts:signUp",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await On._fromIdTokenResponse(e,s,r),o=U_(s);return new bi({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=U_(s);return new bi({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function U_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends Vs{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,bd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new bd(e,n,s,r)}}function LE(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?bd._fromErrorAndOperation(t,i,e,s):i})}async function ZN(t,e,n=!1){const s=await Uc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bi._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(t,e,n=!1){const{auth:s}=t;if(sn(s.app))return Promise.reject(Is(s));const r="reauthenticate";try{const i=await Uc(t,LE(s,r,e,t),n);ue(i.idToken,s,"internal-error");const o=Ng(i.idToken);ue(o,s,"internal-error");const{sub:a}=o;return ue(t.uid===a,s,"user-mismatch"),bi._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&zn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FE(t,e,n=!1){if(sn(t.app))return Promise.reject(Is(t));const s="signIn",r=await LE(t,s,e),i=await bi._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function tC(t,e){return FE(Mi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(t){const e=Mi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UE(t,e,n){if(sn(t.app))return Promise.reject(Is(t));const s=Mi(t),o=await Hm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&zE(t),c}),a=await bi._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function BE(t,e,n){return sn(t.app)?Promise.reject(Is(t)):tC(it(t),ca.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&zE(t),s})}function nC(t,e,n,s){return it(t).onIdTokenChanged(e,n,s)}function sC(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function rC(t,e,n,s){return it(t).onAuthStateChanged(e,n,s)}function $E(t){return it(t).signOut()}const kd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kd,"1"),this.storage.removeItem(kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=1e3,oC=10;class WE extends qE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);kN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,oC):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},iC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WE.type="LOCAL";const aC=WE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE extends qE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GE.type="SESSION";const HE=GE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new yh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async d=>d(n.origin,i)),c=await cC(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const d=jg("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function uC(t){ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function dC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function fC(){return KE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firebaseLocalStorageDb",mC=1,Sd="firebaseLocalStorage",YE="fbase_key";class ml{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vh(t,e){return t.transaction([Sd],e?"readwrite":"readonly").objectStore(Sd)}function pC(){const t=indexedDB.deleteDatabase(QE);return new ml(t).toPromise()}function Km(){const t=indexedDB.open(QE,mC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Sd,{keyPath:YE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Sd)?e(s):(s.close(),await pC(),e(await Km()))})})}async function B_(t,e,n){const s=vh(t,!0).put({[YE]:e,value:n});return new ml(s).toPromise()}async function gC(t,e){const n=vh(t,!1).get(e),s=await new ml(n).toPromise();return s===void 0?null:s.value}function $_(t,e){const n=vh(t,!0).delete(e);return new ml(n).toPromise()}const yC=800,vC=3;class XE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Km(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>vC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yh._getInstance(fC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await dC(),!this.activeServiceWorker)return;this.sender=new lC(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Km();return await B_(e,kd,"1"),await $_(e,kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>B_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>gC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=vh(r,!1).getAll();return new ml(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XE.type="LOCAL";const _C=XE;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t,e){return e?_s(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends Rg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function EC(t){return FE(t.auth,new Vg(t),t.bypassAuthState)}function TC(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),eC(n,new Vg(t),t.bypassAuthState)}async function IC(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),ZN(n,new Vg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EC;case"linkViaPopup":case"linkViaRedirect":return IC;case"reauthViaPopup":case"reauthViaRedirect":return TC;default:zn(this.auth,"internal-error")}}resolve(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new dl(2e3,1e4);class To extends JE{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Ps(this.filter.length===1,"Popup operations only handle one event");const e=jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xC.get())};e()}}To.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="pendingRedirect",Du=new Map;class kC extends JE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Du.get(this.auth._key());if(!e){try{const s=await SC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Du.set(this.auth._key(),e)}return this.bypassAuthState||Du.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SC(t,e){const n=NC(e),s=PC(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function AC(t,e){Du.set(t._key(),e)}function PC(t){return _s(t._redirectPersistence)}function NC(t){return Ru(bC,t.config.apiKey,t.name)}async function CC(t,e,n=!1){if(sn(t.app))return Promise.reject(Is(t));const s=Mi(t),r=wC(s,e),o=await new kC(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=10*60*1e3;class DC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!ZE(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(es(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RC&&this.cachedEventUids.clear(),this.cachedEventUids.has(q_(e))}saveEventToCache(e){this.cachedEventUids.add(q_(e)),this.lastProcessedEventTime=Date.now()}}function q_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ZE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t,e={}){return Or(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MC=/^https?/;async function LC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VC(t);for(const n of e)try{if(FC(n))return}catch{}zn(t,"unauthorized-domain")}function FC(t){const e=Wm(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!MC.test(n))return!1;if(OC.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new dl(3e4,6e4);function W_(){const t=ts().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UC(t){return new Promise((e,n)=>{var s,r,i;function o(){W_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W_(),n(es(t,"network-request-failed"))},timeout:zC.get()})}if(!((r=(s=ts().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=ts().gapi)===null||i===void 0)&&i.load)o();else{const a=VN("iframefcb");return ts()[a]=()=>{gapi.load?o():n(es(t,"network-request-failed"))},jE(`${jN()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw ju=null,e})}let ju=null;function BC(t){return ju=ju||UC(t),ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new dl(5e3,15e3),qC="__/auth/iframe",WC="emulator/auth/iframe",GC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KC(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pg(e,WC):`https://${t.config.authDomain}/${qC}`,s={apiKey:e.apiKey,appName:t.name,v:aa},r=HC.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${ul(s).slice(1)}`}async function QC(t){const e=await BC(t),n=ts().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:KC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GC,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=es(t,"network-request-failed"),a=ts().setTimeout(()=>{i(o)},$C.get());function c(){ts().clearTimeout(a),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XC=500,JC=600,ZC="_blank",eR="http://localhost";class G_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tR(t,e,n,s=XC,r=JC){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},YC),{width:s.toString(),height:r.toString(),top:i,left:o}),d=lt().toLowerCase();n&&(a=SE(d)?ZC:n),bE(d)&&(e=e||eR,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[T,S])=>`${g}${T}=${S},`,"");if(bN(d)&&a!=="_self")return nR(e||"",a),new G_(null);const m=window.open(e||"",a,f);ue(m,t,"popup-blocked");try{m.focus()}catch{}return new G_(m)}function nR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="__/auth/handler",rR="emulator/auth/handler",iR=encodeURIComponent("fac");async function H_(t,e,n,s,r,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:aa,eventId:r};if(e instanceof ME){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",HA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof fl){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const c=await t._getAppCheckToken(),d=c?`#${iR}=${encodeURIComponent(c)}`:"";return`${oR(t)}?${ul(a).slice(1)}${d}`}function oR({config:t}){return t.emulator?Pg(t,rR):`https://${t.authDomain}/${sR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="webStorageSupport";class aR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HE,this._completeRedirectFn=CC,this._overrideRedirectResult=AC}async _openPopup(e,n,s,r){var i;Ps((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await H_(e,n,s,Wm(),r);return tR(e,o,jg())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await H_(e,n,s,Wm(),r);return uC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Ps(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await QC(e),s=new DC(e);return n.register("authEvent",r=>(ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Df,{type:Df},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Df];o!==void 0&&n(!!o),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RE()||kE()||Cg()}}const cR=aR;var K_="@firebase/auth",Q_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dR(t){Ii(new Sr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DE(t)},d=new CN(s,r,i,c);return UN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ii(new Sr("auth-internal",e=>{const n=Mi(e.getProvider("auth").getImmediate());return(s=>new lR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(K_,Q_,uR(t)),Zn(K_,Q_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=5*60,fR=aE("authIdTokenMaxAge")||hR;let Y_=null;const mR=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>fR)return;const r=n==null?void 0:n.token;Y_!==r&&(Y_=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function eT(t=kg()){const e=ph(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zN(t,{popupRedirectResolver:cR,persistence:[_C,aC,HE]}),s=aE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=mR(i.toString());sC(n,o,()=>o(n.currentUser)),nC(n,a=>o(a))}}const r=rE("auth");return r&&BN(n,`http://${r}`),n}function pR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RN({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=es("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",pR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dR("Browser");var X_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Er,tT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function I(){}I.prototype=y.prototype,E.D=y.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(w,N,R){for(var k=Array(arguments.length-2),le=2;le<arguments.length;le++)k[le-2]=arguments[le];return y.prototype[N].apply(w,k)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,y,I){I||(I=0);var w=Array(16);if(typeof y=="string")for(var N=0;16>N;++N)w[N]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(N=0;16>N;++N)w[N]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=E.g[0],I=E.g[1],N=E.g[2];var R=E.g[3],k=y+(R^I&(N^R))+w[0]+3614090360&4294967295;y=I+(k<<7&4294967295|k>>>25),k=R+(N^y&(I^N))+w[1]+3905402710&4294967295,R=y+(k<<12&4294967295|k>>>20),k=N+(I^R&(y^I))+w[2]+606105819&4294967295,N=R+(k<<17&4294967295|k>>>15),k=I+(y^N&(R^y))+w[3]+3250441966&4294967295,I=N+(k<<22&4294967295|k>>>10),k=y+(R^I&(N^R))+w[4]+4118548399&4294967295,y=I+(k<<7&4294967295|k>>>25),k=R+(N^y&(I^N))+w[5]+1200080426&4294967295,R=y+(k<<12&4294967295|k>>>20),k=N+(I^R&(y^I))+w[6]+2821735955&4294967295,N=R+(k<<17&4294967295|k>>>15),k=I+(y^N&(R^y))+w[7]+4249261313&4294967295,I=N+(k<<22&4294967295|k>>>10),k=y+(R^I&(N^R))+w[8]+1770035416&4294967295,y=I+(k<<7&4294967295|k>>>25),k=R+(N^y&(I^N))+w[9]+2336552879&4294967295,R=y+(k<<12&4294967295|k>>>20),k=N+(I^R&(y^I))+w[10]+4294925233&4294967295,N=R+(k<<17&4294967295|k>>>15),k=I+(y^N&(R^y))+w[11]+2304563134&4294967295,I=N+(k<<22&4294967295|k>>>10),k=y+(R^I&(N^R))+w[12]+1804603682&4294967295,y=I+(k<<7&4294967295|k>>>25),k=R+(N^y&(I^N))+w[13]+4254626195&4294967295,R=y+(k<<12&4294967295|k>>>20),k=N+(I^R&(y^I))+w[14]+2792965006&4294967295,N=R+(k<<17&4294967295|k>>>15),k=I+(y^N&(R^y))+w[15]+1236535329&4294967295,I=N+(k<<22&4294967295|k>>>10),k=y+(N^R&(I^N))+w[1]+4129170786&4294967295,y=I+(k<<5&4294967295|k>>>27),k=R+(I^N&(y^I))+w[6]+3225465664&4294967295,R=y+(k<<9&4294967295|k>>>23),k=N+(y^I&(R^y))+w[11]+643717713&4294967295,N=R+(k<<14&4294967295|k>>>18),k=I+(R^y&(N^R))+w[0]+3921069994&4294967295,I=N+(k<<20&4294967295|k>>>12),k=y+(N^R&(I^N))+w[5]+3593408605&4294967295,y=I+(k<<5&4294967295|k>>>27),k=R+(I^N&(y^I))+w[10]+38016083&4294967295,R=y+(k<<9&4294967295|k>>>23),k=N+(y^I&(R^y))+w[15]+3634488961&4294967295,N=R+(k<<14&4294967295|k>>>18),k=I+(R^y&(N^R))+w[4]+3889429448&4294967295,I=N+(k<<20&4294967295|k>>>12),k=y+(N^R&(I^N))+w[9]+568446438&4294967295,y=I+(k<<5&4294967295|k>>>27),k=R+(I^N&(y^I))+w[14]+3275163606&4294967295,R=y+(k<<9&4294967295|k>>>23),k=N+(y^I&(R^y))+w[3]+4107603335&4294967295,N=R+(k<<14&4294967295|k>>>18),k=I+(R^y&(N^R))+w[8]+1163531501&4294967295,I=N+(k<<20&4294967295|k>>>12),k=y+(N^R&(I^N))+w[13]+2850285829&4294967295,y=I+(k<<5&4294967295|k>>>27),k=R+(I^N&(y^I))+w[2]+4243563512&4294967295,R=y+(k<<9&4294967295|k>>>23),k=N+(y^I&(R^y))+w[7]+1735328473&4294967295,N=R+(k<<14&4294967295|k>>>18),k=I+(R^y&(N^R))+w[12]+2368359562&4294967295,I=N+(k<<20&4294967295|k>>>12),k=y+(I^N^R)+w[5]+4294588738&4294967295,y=I+(k<<4&4294967295|k>>>28),k=R+(y^I^N)+w[8]+2272392833&4294967295,R=y+(k<<11&4294967295|k>>>21),k=N+(R^y^I)+w[11]+1839030562&4294967295,N=R+(k<<16&4294967295|k>>>16),k=I+(N^R^y)+w[14]+4259657740&4294967295,I=N+(k<<23&4294967295|k>>>9),k=y+(I^N^R)+w[1]+2763975236&4294967295,y=I+(k<<4&4294967295|k>>>28),k=R+(y^I^N)+w[4]+1272893353&4294967295,R=y+(k<<11&4294967295|k>>>21),k=N+(R^y^I)+w[7]+4139469664&4294967295,N=R+(k<<16&4294967295|k>>>16),k=I+(N^R^y)+w[10]+3200236656&4294967295,I=N+(k<<23&4294967295|k>>>9),k=y+(I^N^R)+w[13]+681279174&4294967295,y=I+(k<<4&4294967295|k>>>28),k=R+(y^I^N)+w[0]+3936430074&4294967295,R=y+(k<<11&4294967295|k>>>21),k=N+(R^y^I)+w[3]+3572445317&4294967295,N=R+(k<<16&4294967295|k>>>16),k=I+(N^R^y)+w[6]+76029189&4294967295,I=N+(k<<23&4294967295|k>>>9),k=y+(I^N^R)+w[9]+3654602809&4294967295,y=I+(k<<4&4294967295|k>>>28),k=R+(y^I^N)+w[12]+3873151461&4294967295,R=y+(k<<11&4294967295|k>>>21),k=N+(R^y^I)+w[15]+530742520&4294967295,N=R+(k<<16&4294967295|k>>>16),k=I+(N^R^y)+w[2]+3299628645&4294967295,I=N+(k<<23&4294967295|k>>>9),k=y+(N^(I|~R))+w[0]+4096336452&4294967295,y=I+(k<<6&4294967295|k>>>26),k=R+(I^(y|~N))+w[7]+1126891415&4294967295,R=y+(k<<10&4294967295|k>>>22),k=N+(y^(R|~I))+w[14]+2878612391&4294967295,N=R+(k<<15&4294967295|k>>>17),k=I+(R^(N|~y))+w[5]+4237533241&4294967295,I=N+(k<<21&4294967295|k>>>11),k=y+(N^(I|~R))+w[12]+1700485571&4294967295,y=I+(k<<6&4294967295|k>>>26),k=R+(I^(y|~N))+w[3]+2399980690&4294967295,R=y+(k<<10&4294967295|k>>>22),k=N+(y^(R|~I))+w[10]+4293915773&4294967295,N=R+(k<<15&4294967295|k>>>17),k=I+(R^(N|~y))+w[1]+2240044497&4294967295,I=N+(k<<21&4294967295|k>>>11),k=y+(N^(I|~R))+w[8]+1873313359&4294967295,y=I+(k<<6&4294967295|k>>>26),k=R+(I^(y|~N))+w[15]+4264355552&4294967295,R=y+(k<<10&4294967295|k>>>22),k=N+(y^(R|~I))+w[6]+2734768916&4294967295,N=R+(k<<15&4294967295|k>>>17),k=I+(R^(N|~y))+w[13]+1309151649&4294967295,I=N+(k<<21&4294967295|k>>>11),k=y+(N^(I|~R))+w[4]+4149444226&4294967295,y=I+(k<<6&4294967295|k>>>26),k=R+(I^(y|~N))+w[11]+3174756917&4294967295,R=y+(k<<10&4294967295|k>>>22),k=N+(y^(R|~I))+w[2]+718787259&4294967295,N=R+(k<<15&4294967295|k>>>17),k=I+(R^(N|~y))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+R&4294967295}s.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var I=y-this.blockSize,w=this.B,N=this.h,R=0;R<y;){if(N==0)for(;R<=I;)r(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<y;)if(w[N++]=E.charCodeAt(R++),N==this.blockSize){r(this,w),N=0;break}}else for(;R<y;)if(w[N++]=E[R++],N==this.blockSize){r(this,w),N=0;break}}this.h=N,this.o+=y},s.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var I=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=I&255,I/=256;for(this.u(E),E=Array(16),y=I=0;4>y;++y)for(var w=0;32>w;w+=8)E[I++]=this.g[y]>>>w&255;return E};function i(E,y){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=y(E)}function o(E,y){this.h=y;for(var I=[],w=!0,N=E.length-1;0<=N;N--){var R=E[N]|0;w&&R==y||(I[N]=R,w=!1)}this.g=I}var a={};function c(E){return-128<=E&&128>E?i(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return C(d(-E));for(var y=[],I=1,w=0;E>=I;w++)y[w]=E/I|0,I*=4294967296;return new o(y,0)}function f(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return C(f(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(y,8)),w=m,N=0;N<E.length;N+=8){var R=Math.min(8,E.length-N),k=parseInt(E.substring(N,N+R),y);8>R?(R=d(Math.pow(y,R)),w=w.j(R).add(d(k))):(w=w.j(I),w=w.add(d(k)))}return w}var m=c(0),g=c(1),T=c(16777216);t=o.prototype,t.m=function(){if(A(this))return-C(this).m();for(var E=0,y=1,I=0;I<this.g.length;I++){var w=this.i(I);E+=(0<=w?w:4294967296+w)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S(this))return"0";if(A(this))return"-"+C(this).toString(E);for(var y=d(Math.pow(E,6)),I=this,w="";;){var N=D(I,y).g;I=x(I,N.j(y));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=N,S(I))return R+w;for(;6>R.length;)R="0"+R;w=R+w}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function S(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function A(E){return E.h==-1}t.l=function(E){return E=x(this,E),A(E)?-1:S(E)?0:1};function C(E){for(var y=E.g.length,I=[],w=0;w<y;w++)I[w]=~E.g[w];return new o(I,~E.h).add(g)}t.abs=function(){return A(this)?C(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],w=0,N=0;N<=y;N++){var R=w+(this.i(N)&65535)+(E.i(N)&65535),k=(R>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);w=k>>>16,R&=65535,k&=65535,I[N]=k<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function x(E,y){return E.add(C(y))}t.j=function(E){if(S(this)||S(E))return m;if(A(this))return A(E)?C(this).j(C(E)):C(C(this).j(E));if(A(E))return C(this.j(C(E)));if(0>this.l(T)&&0>E.l(T))return d(this.m()*E.m());for(var y=this.g.length+E.g.length,I=[],w=0;w<2*y;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var N=0;N<E.g.length;N++){var R=this.i(w)>>>16,k=this.i(w)&65535,le=E.i(N)>>>16,J=E.i(N)&65535;I[2*w+2*N]+=k*J,v(I,2*w+2*N),I[2*w+2*N+1]+=R*J,v(I,2*w+2*N+1),I[2*w+2*N+1]+=k*le,v(I,2*w+2*N+1),I[2*w+2*N+2]+=R*le,v(I,2*w+2*N+2)}for(w=0;w<y;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=y;w<2*y;w++)I[w]=0;return new o(I,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function b(E,y){this.g=E,this.h=y}function D(E,y){if(S(y))throw Error("division by zero");if(S(E))return new b(m,m);if(A(E))return y=D(C(E),y),new b(C(y.g),C(y.h));if(A(y))return y=D(E,C(y)),new b(C(y.g),y.h);if(30<E.g.length){if(A(E)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,w=y;0>=w.l(E);)I=L(I),w=L(w);var N=M(I,1),R=M(w,1);for(w=M(w,2),I=M(I,2);!S(w);){var k=R.add(w);0>=k.l(E)&&(N=N.add(I),R=k),w=M(w,1),I=M(I,1)}return y=x(E,N.j(y)),new b(N,y)}for(N=m;0<=E.l(y);){for(I=Math.max(1,Math.floor(E.m()/y.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),R=d(I),k=R.j(y);A(k)||0<k.l(E);)I-=w,R=d(I),k=R.j(y);S(R)&&(R=g),N=N.add(R),E=x(E,k)}return new b(N,E)}t.A=function(E){return D(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],w=0;w<y;w++)I[w]=this.i(w)&E.i(w);return new o(I,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],w=0;w<y;w++)I[w]=this.i(w)|E.i(w);return new o(I,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],w=0;w<y;w++)I[w]=this.i(w)^E.i(w);return new o(I,this.h^E.h)};function L(E){for(var y=E.g.length+1,I=[],w=0;w<y;w++)I[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(I,E.h)}function M(E,y){var I=y>>5;y%=32;for(var w=E.g.length-I,N=[],R=0;R<w;R++)N[R]=0<y?E.i(R+I)>>>y|E.i(R+I+1)<<32-y:E.i(R+I);return new o(N,E.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,tT=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Er=o}).apply(typeof X_<"u"?X_:typeof self<"u"?self:typeof window<"u"?window:{});var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nT,Xa,sT,Vu,Qm,rT,iT,oT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof cu=="object"&&cu];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(l,h){if(h)e:{var p=s;l=l.split(".");for(var _=0;_<l.length-1;_++){var O=l[_];if(!(O in p))break e;p=p[O]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,_=!1,O={next:function(){if(!_&&p<l.length){var F=p++;return{value:h(F,l[F]),done:!1}}return _=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}r("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,_),l.apply(h,O)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function T(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function S(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,O,F){for(var K=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)K[Re-2]=arguments[Re];return h.prototype[O].apply(_,K)}}function A(l){const h=l.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function C(l,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(c(_)){const O=l.length||0,F=_.length||0;l.length=O+F;for(let K=0;K<F;K++)l[O+K]=_[K]}else l.push(_)}}class x{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(l){return/^[\s\xa0]*$/.test(l)}function b(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var L=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function M(l,h,p){for(const _ in l)h.call(p,l[_],_,l)}function E(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,h){let p,_;for(let O=1;O<arguments.length;O++){_=arguments[O];for(p in _)l[p]=_[p];for(let F=0;F<I.length;F++)p=I[F],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function N(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function R(l){a.setTimeout(()=>{throw l},0)}function k(){var l=ie;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class le{constructor(){this.h=this.g=null}add(h,p){const _=J.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var J=new x(()=>new $,l=>l.reset());class ${constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,G=!1,ie=new le,X=()=>{const l=a.Promise.resolve(void 0);oe=()=>{l.then(pe)}};var pe=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(p){R(p)}var h=J;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}G=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var je=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function Jt(l,h){if(Ce.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{D(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ze[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Jt.aa.h.call(this)}}S(Jt,Ce);var Ze={2:"touch",3:"pen",4:"mouse"};Jt.prototype.h=function(){Jt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Mt="closure_listenable_"+(1e6*Math.random()|0),Z=0;function fe(l,h,p,_,O){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=O,this.key=++Z,this.da=this.fa=!1}function Ve(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function et(l){this.src=l,this.g={},this.h=0}et.prototype.add=function(l,h,p,_,O){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var K=bn(l,h,_,O);return-1<K?(h=l[K],p||(h.fa=!1)):(h=new fe(h,this.src,F,!!_,O),h.fa=p,l.push(h)),h};function pt(l,h){var p=h.type;if(p in l.g){var _=l.g[p],O=Array.prototype.indexOf.call(_,h,void 0),F;(F=0<=O)&&Array.prototype.splice.call(_,O,1),F&&(Ve(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function bn(l,h,p,_){for(var O=0;O<l.length;++O){var F=l[O];if(!F.da&&F.listener==h&&F.capture==!!p&&F.ha==_)return O}return-1}var rs="closure_lm_"+(1e6*Math.random()|0),ma={};function Il(l,h,p,_,O){if(Array.isArray(h)){for(var F=0;F<h.length;F++)Il(l,h[F],p,_,O);return null}return p=xl(p),l&&l[Mt]?l.K(h,p,d(_)?!!_.capture:!1,O):pa(l,h,p,!1,_,O)}function pa(l,h,p,_,O,F){if(!h)throw Error("Invalid event type");var K=d(O)?!!O.capture:!!O,Re=va(l);if(Re||(l[rs]=Re=new et(l)),p=Re.add(h,p,_,K,F),p.proxy)return p;if(_=Ls(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)je||(O=K),O===void 0&&(O=!1),l.addEventListener(h.toString(),_,O);else if(l.attachEvent)l.attachEvent(ya(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ls(){function l(p){return h.call(l.src,l.listener,p)}const h=Wh;return l}function zr(l,h,p,_,O){if(Array.isArray(h))for(var F=0;F<h.length;F++)zr(l,h[F],p,_,O);else _=d(_)?!!_.capture:!!_,p=xl(p),l&&l[Mt]?(l=l.i,h=String(h).toString(),h in l.g&&(F=l.g[h],p=bn(F,p,_,O),-1<p&&(Ve(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete l.g[h],l.h--)))):l&&(l=va(l))&&(h=l.g[h.toString()],l=-1,h&&(l=bn(h,p,_,O)),(p=-1<l?h[l]:null)&&ga(p))}function ga(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Mt])pt(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(ya(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=va(h))?(pt(p,l),p.h==0&&(p.src=null,h[rs]=null)):Ve(l)}}}function ya(l){return l in ma?ma[l]:ma[l]="on"+l}function Wh(l,h){if(l.da)l=!0;else{h=new Jt(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&ga(l),l=p.call(_,h)}return l}function va(l){return l=l[rs],l instanceof et?l:null}var _a="__closure_events_fn_"+(1e9*Math.random()>>>0);function xl(l){return typeof l=="function"?l:(l[_a]||(l[_a]=function(h){return l.handleEvent(h)}),l[_a])}function dt(){ge.call(this),this.i=new et(this),this.M=this,this.F=null}S(dt,ge),dt.prototype[Mt]=!0,dt.prototype.removeEventListener=function(l,h,p,_){zr(this,l,h,p,_)};function gt(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new Ce(h,l);else if(h instanceof Ce)h.target=h.target||l;else{var O=h;h=new Ce(_,l),w(h,O)}if(O=!0,p)for(var F=p.length-1;0<=F;F--){var K=h.g=p[F];O=Ui(K,_,!0,h)&&O}if(K=h.g=l,O=Ui(K,_,!0,h)&&O,O=Ui(K,_,!1,h)&&O,p)for(F=0;F<p.length;F++)K=h.g=p[F],O=Ui(K,_,!1,h)&&O}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)Ve(p[_]);delete l.g[h],l.h--}}this.F=null},dt.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},dt.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function Ui(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,F=0;F<h.length;++F){var K=h[F];if(K&&!K.da&&K.capture==p){var Re=K.listener,yt=K.ha||K.src;K.fa&&pt(l.i,K),O=Re.call(yt,_)!==!1&&O}}return O&&!_.defaultPrevented}function bl(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function kl(l){l.g=bl(()=>{l.g=null,l.i&&(l.i=!1,kl(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Gh extends ge{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:kl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(l){ge.call(this),this.h=l,this.g={}}S(Ur,ge);var Sl=[];function Al(l){M(l.g,function(h,p){this.g.hasOwnProperty(p)&&ga(h)},l),l.g={}}Ur.prototype.N=function(){Ur.aa.N.call(this),Al(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wa=a.JSON.stringify,Pl=a.JSON.parse,Hh=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function kn(){}kn.prototype.h=null;function Nl(l){return l.h||(l.h=l.i())}function Cl(){}var Br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bi(){Ce.call(this,"d")}S(Bi,Ce);function j(){Ce.call(this,"c")}S(j,Ce);var U={},H=null;function se(){return H=H||new dt}U.La="serverreachability";function ce(l){Ce.call(this,U.La,l)}S(ce,Ce);function ne(l){const h=se();gt(h,new ce(h))}U.STAT_EVENT="statevent";function me(l,h){Ce.call(this,U.STAT_EVENT,l),this.stat=h}S(me,Ce);function be(l){const h=se();gt(h,new me(h,l))}U.Ma="timingevent";function tt(l,h){Ce.call(this,U.Ma,l),this.size=h}S(tt,Ce);function is(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Fs(){this.g=!0}Fs.prototype.xa=function(){this.g=!1};function Rl(l,h,p,_,O,F){l.info(function(){if(l.g)if(F)for(var K="",Re=F.split("&"),yt=0;yt<Re.length;yt++){var ke=Re[yt].split("=");if(1<ke.length){var bt=ke[0];ke=ke[1];var kt=bt.split("_");K=2<=kt.length&&kt[1]=="type"?K+(bt+"="+ke+"&"):K+(bt+"=redacted&")}}else K=null;else K=F;return"XMLHTTP REQ ("+_+") [attempt "+O+"]: "+h+`
`+p+`
`+K})}function Ea(l,h,p,_,O,F,K){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+O+"]: "+h+`
`+p+`
`+F+" "+K})}function fn(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+$i(l,p)+(_?" "+_:"")})}function $r(l,h){l.info(function(){return"TIMEOUT: "+h})}Fs.prototype.info=function(){};function $i(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var O=_[1];if(Array.isArray(O)&&!(1>O.length)){var F=O[0];if(F!="noop"&&F!="stop"&&F!="close")for(var K=1;K<O.length;K++)O[K]=""}}}}return wa(p)}catch{return h}}var Un={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},os;function as(){}S(as,kn),as.prototype.g=function(){return new XMLHttpRequest},as.prototype.i=function(){return{}},os=new as;function Sn(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new Ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ta}function Ta(){this.i=null,this.g="",this.h=!1}var zs={},cs={};function Us(l,h,p){l.L=1,l.v=Vl(us(h)),l.m=p,l.P=!0,Wr(l,null)}function Wr(l,h){l.F=Date.now(),ls(l),l.A=us(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),My(p.i,"t",_),l.C=0,p=l.j.J,l.h=new Ta,l.g=tv(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Gh(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Sl[0]=O.toString()),O=Sl);for(var F=0;F<O.length;F++){var K=Il(p,O[F],_||h.handleEvent,!1,h.h||h);if(!K)break;h.g[K.key]=K}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),ne(),Rl(l.i,l.u,l.A,l.l,l.R,l.m)}Sn.prototype.ca=function(l){l=l.target;const h=this.M;h&&ds(l)==3?h.j():this.Y(l)},Sn.prototype.Y=function(l){try{if(l==this.g)e:{const kt=ds(this.g);var h=this.g.Ba();const Qi=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||qy(this.g)))){this.J||kt!=4||h==7||(h==8||0>=Qi?ne(3):ne(2)),qi(this);var p=this.g.Z();this.X=p;t:if(Gr(this)){var _=qy(this.g);l="";var O=_.length,F=ds(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),An(this);var K="";break t}this.h.i=new a.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(F&&h==O-1)});_.length=0,this.h.g+=l,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=p==200,Ea(this.i,this.u,this.A,this.l,this.R,kt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,yt=this.g;if((Re=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Re)){var ke=Re;break t}}ke=null}if(p=ke)fn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bs(this,p);else{this.o=!1,this.s=3,be(12),Zt(this),An(this);break e}}if(this.P){p=!0;let Nn;for(;!this.J&&this.C<K.length;)if(Nn=Hr(this,K),Nn==cs){kt==4&&(this.s=4,be(14),p=!1),fn(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==zs){this.s=4,be(15),fn(this.i,this.l,K,"[Invalid Chunk]"),p=!1;break}else fn(this.i,this.l,Nn,null),Bs(this,Nn);if(Gr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||K.length!=0||this.h.h||(this.s=1,be(16),p=!1),this.o=this.o&&p,!p)fn(this.i,this.l,K,"[Invalid Chunked Response]"),Zt(this),An(this);else if(0<K.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Xh(bt),bt.M=!0,be(11))}}else fn(this.i,this.l,K,null),Bs(this,K);kt==4&&Zt(this),this.o&&!this.J&&(kt==4?Xy(this.j,this):(this.o=!1,ls(this)))}else Wx(this.g),p==400&&0<K.indexOf("Unknown SID")?(this.s=3,be(12)):(this.s=0,be(13)),Zt(this),An(this)}}}catch{}finally{}};function Gr(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Hr(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?cs:(p=Number(h.substring(p,_)),isNaN(p)?zs:(_+=1,_+p>h.length?cs:(h=h.slice(_,_+p),l.C=_+p,h)))}Sn.prototype.cancel=function(){this.J=!0,Zt(this)};function ls(l){l.S=Date.now()+l.I,Ia(l,l.I)}function Ia(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=is(g(l.ba,l),h)}function qi(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Sn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?($r(this.i,this.A),this.L!=2&&(ne(),be(17)),Zt(this),this.s=2,An(this)):Ia(this,this.S-l)};function An(l){l.j.G==0||l.J||Xy(l.j,l)}function Zt(l){qi(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Al(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Bs(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||xt(p.h,l))){if(!l.K&&xt(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var O=_;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Ul(p),Fl(p);else break e;Yh(p),be(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=is(g(p.Za,p),6e3));if(1>=It(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Yr(p,11)}else if((l.K||p.g==l)&&Ul(p),!v(h))for(O=p.Da.g.parse(h),h=0;h<O.length;h++){let ke=O[h];if(p.T=ke[0],ke=ke[1],p.G==2)if(ke[0]=="c"){p.K=ke[1],p.ia=ke[2];const bt=ke[3];bt!=null&&(p.la=bt,p.j.info("VER="+p.la));const kt=ke[4];kt!=null&&(p.Aa=kt,p.j.info("SVER="+p.Aa));const Qi=ke[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(_=1.5*Qi,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Nn=l.g;if(Nn){const $l=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($l){var F=_.h;F.g||$l.indexOf("spdy")==-1&&$l.indexOf("quic")==-1&&$l.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Pn(F,F.h),F.h=null))}if(_.D){const Jh=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Jh&&(_.ya=Jh,Oe(_.I,_.D,Jh))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var K=l;if(_.qa=ev(_,_.J?_.ia:null,_.W),K.K){Gi(_.h,K);var Re=K,yt=_.L;yt&&(Re.I=yt),Re.B&&(qi(Re),ls(Re)),_.g=K}else Qy(_);0<p.i.length&&zl(p)}else ke[0]!="stop"&&ke[0]!="close"||Yr(p,7);else p.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Yr(p,7):Qh(p):ke[0]!="noop"&&p.l&&p.l.ta(ke),p.v=0)}}ne(4)}catch{}}var Kr=class{constructor(l,h){this.g=l,this.map=h}};function Wi(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function It(l){return l.h?1:l.g?l.g.size:0}function xt(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Pn(l,h){l.g?l.g.add(h):l.h=h}function Gi(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Wi.prototype.cancel=function(){if(this.i=Ny(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ny(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return A(l.i)}function Nx(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function Cx(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const _ in l)h[p++]=_;return h}}}function Cy(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=Cx(l),_=Nx(l),O=_.length,F=0;F<O;F++)h.call(void 0,_[F],p&&p[F],l)}var Ry=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rx(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),O=null;if(0<=_){var F=l[p].substring(0,_);O=l[p].substring(_+1)}else F=l[p];h(F,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Qr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Qr){this.h=l.h,Dl(this,l.j),this.o=l.o,this.g=l.g,jl(this,l.s),this.l=l.l;var h=l.i,p=new ka;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Dy(this,p),this.m=l.m}else l&&(h=String(l).match(Ry))?(this.h=!1,Dl(this,h[1]||"",!0),this.o=xa(h[2]||""),this.g=xa(h[3]||"",!0),jl(this,h[4]),this.l=xa(h[5]||"",!0),Dy(this,h[6]||"",!0),this.m=xa(h[7]||"")):(this.h=!1,this.i=new ka(null,this.h))}Qr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(ba(h,jy,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(ba(h,jy,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(ba(p,p.charAt(0)=="/"?Vx:jx,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",ba(p,Mx)),l.join("")};function us(l){return new Qr(l)}function Dl(l,h,p){l.j=p?xa(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function jl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Dy(l,h,p){h instanceof ka?(l.i=h,Lx(l.i,l.h)):(p||(h=ba(h,Ox)),l.i=new ka(h,l.h))}function Oe(l,h,p){l.i.set(h,p)}function Vl(l){return Oe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function xa(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ba(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,Dx),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Dx(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var jy=/[#\/\?@]/g,jx=/[#\?:]/g,Vx=/[#\?]/g,Ox=/[#\?@]/g,Mx=/#/g;function ka(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function $s(l){l.g||(l.g=new Map,l.h=0,l.i&&Rx(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ka.prototype,t.add=function(l,h){$s(this),this.i=null,l=Hi(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Vy(l,h){$s(l),h=Hi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Oy(l,h){return $s(l),h=Hi(l,h),l.g.has(h)}t.forEach=function(l,h){$s(this),this.g.forEach(function(p,_){p.forEach(function(O){l.call(h,O,_,this)},this)},this)},t.na=function(){$s(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const O=l[_];for(let F=0;F<O.length;F++)p.push(h[_])}return p},t.V=function(l){$s(this);let h=[];if(typeof l=="string")Oy(this,l)&&(h=h.concat(this.g.get(Hi(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return $s(this),this.i=null,l=Hi(this,l),Oy(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function My(l,h,p){Vy(l,h),0<p.length&&(l.i=null,l.g.set(Hi(l,h),A(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const F=encodeURIComponent(String(_)),K=this.V(_);for(_=0;_<K.length;_++){var O=F;K[_]!==""&&(O+="="+encodeURIComponent(String(K[_]))),l.push(O)}}return this.i=l.join("&")};function Hi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Lx(l,h){h&&!l.j&&($s(l),l.i=null,l.g.forEach(function(p,_){var O=_.toLowerCase();_!=O&&(Vy(this,_),My(this,O,p))},l)),l.j=h}function Fx(l,h){const p=new Fs;if(a.Image){const _=new Image;_.onload=T(qs,p,"TestLoadImage: loaded",!0,h,_),_.onerror=T(qs,p,"TestLoadImage: error",!1,h,_),_.onabort=T(qs,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=T(qs,p,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function zx(l,h){const p=new Fs,_=new AbortController,O=setTimeout(()=>{_.abort(),qs(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(F=>{clearTimeout(O),F.ok?qs(p,"TestPingServer: ok",!0,h):qs(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),qs(p,"TestPingServer: error",!1,h)})}function qs(l,h,p,_,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),_(p)}catch{}}function Ux(){this.g=new Hh}function Bx(l,h,p){const _=p||"";try{Cy(l,function(O,F){let K=O;d(O)&&(K=wa(O)),h.push(_+F+"="+encodeURIComponent(K))})}catch(O){throw h.push(_+"type="+encodeURIComponent("_badmap")),O}}function Ol(l){this.l=l.Ub||null,this.j=l.eb||!1}S(Ol,kn),Ol.prototype.g=function(){return new Ml(this.l,this.j)},Ol.prototype.i=function(l){return function(){return l}}({});function Ml(l,h){dt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Ml,dt),t=Ml.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Aa(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sa(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Aa(this)),this.g&&(this.readyState=3,Aa(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ly(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ly(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Sa(this):Aa(this),this.readyState==3&&Ly(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Sa(this))},t.Qa=function(l){this.g&&(this.response=l,Sa(this))},t.ga=function(){this.g&&Sa(this)};function Sa(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Aa(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Aa(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Fy(l){let h="";return M(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Kh(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Fy(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Oe(l,h,p))}function Ke(l){dt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ke,dt);var $x=/^https?$/i,qx=["POST","PUT"];t=Ke.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():os.g(),this.v=this.o?Nl(this.o):Nl(os),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(F){zy(this,F);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var O in _)p.set(O,_[O]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const F of _.keys())p.set(F,_.get(F));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),O=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qx,h,void 0))||_||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,K]of p)this.g.setRequestHeader(F,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$y(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){zy(this,F)}};function zy(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Uy(l),Ll(l)}function Uy(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,gt(this,"complete"),gt(this,"abort"),Ll(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ll(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?By(this):this.bb())},t.bb=function(){By(this)};function By(l){if(l.h&&typeof o<"u"&&(!l.v[1]||ds(l)!=4||l.Z()!=2)){if(l.u&&ds(l)==4)bl(l.Ea,0,l);else if(gt(l,"readystatechange"),ds(l)==4){l.h=!1;try{const K=l.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=K===0){var O=String(l.D).match(Ry)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),_=!$x.test(O?O.toLowerCase():"")}p=_}if(p)gt(l,"complete"),gt(l,"success");else{l.m=6;try{var F=2<ds(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",Uy(l)}}finally{Ll(l)}}}}function Ll(l,h){if(l.g){$y(l);const p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||gt(l,"ready");try{p.onreadystatechange=_}catch{}}}function $y(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function ds(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<ds(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Pl(h)}};function qy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Wx(l){const h={};l=(l.g&&2<=ds(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(v(l[_]))continue;var p=N(l[_]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const F=h[O]||[];h[O]=F,F.push(p)}E(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pa(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Wy(l){this.Aa=0,this.i=[],this.j=new Fs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pa("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pa("baseRetryDelayMs",5e3,l),this.cb=Pa("retryDelaySeedMs",1e4,l),this.Wa=Pa("forwardChannelMaxRetries",2,l),this.wa=Pa("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Wi(l&&l.concurrentRequestLimit),this.Da=new Ux,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wy.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,_){be(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=ev(this,null,this.W),zl(this)};function Qh(l){if(Gy(l),l.G==3){var h=l.U++,p=us(l.I);if(Oe(p,"SID",l.K),Oe(p,"RID",h),Oe(p,"TYPE","terminate"),Na(l,p),h=new Sn(l,l.j,h),h.L=2,h.v=Vl(us(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=tv(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ls(h)}Zy(l)}function Fl(l){l.g&&(Xh(l),l.g.cancel(),l.g=null)}function Gy(l){Fl(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ul(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function zl(l){if(!Xe(l.h)&&!l.s){l.s=!0;var h=l.Ga;oe||X(),G||(oe(),G=!0),ie.add(h,l),l.B=0}}function Gx(l,h){return It(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=is(g(l.Ga,l,h),Jy(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new Sn(this,this.j,l);let F=this.o;if(this.S&&(F?(F=y(F),w(F,this.S)):F=this.S),this.m!==null||this.O||(O.H=F,F=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Ky(this,O,h),p=us(this.I),Oe(p,"RID",l),Oe(p,"CVER",22),this.D&&Oe(p,"X-HTTP-Session-Id",this.D),Na(this,p),F&&(this.O?h="headers="+encodeURIComponent(String(Fy(F)))+"&"+h:this.m&&Kh(p,this.m,F)),Pn(this.h,O),this.Ua&&Oe(p,"TYPE","init"),this.P?(Oe(p,"$req",h),Oe(p,"SID","null"),O.T=!0,Us(O,p,null)):Us(O,p,h),this.G=2}}else this.G==3&&(l?Hy(this,l):this.i.length==0||Xe(this.h)||Hy(this))};function Hy(l,h){var p;h?p=h.l:p=l.U++;const _=us(l.I);Oe(_,"SID",l.K),Oe(_,"RID",p),Oe(_,"AID",l.T),Na(l,_),l.m&&l.o&&Kh(_,l.m,l.o),p=new Sn(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Ky(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Pn(l.h,p),Us(p,_,h)}function Na(l,h){l.H&&M(l.H,function(p,_){Oe(h,_,p)}),l.l&&Cy({},function(p,_){Oe(h,_,p)})}function Ky(l,h,p){p=Math.min(l.i.length,p);var _=l.l?g(l.l.Na,l.l,l):null;e:{var O=l.i;let F=-1;for(;;){const K=["count="+p];F==-1?0<p?(F=O[0].g,K.push("ofs="+F)):F=0:K.push("ofs="+F);let Re=!0;for(let yt=0;yt<p;yt++){let ke=O[yt].g;const bt=O[yt].map;if(ke-=F,0>ke)F=Math.max(0,O[yt].g-100),Re=!1;else try{Bx(bt,K,"req"+ke+"_")}catch{_&&_(bt)}}if(Re){_=K.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function Qy(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;oe||X(),G||(oe(),G=!0),ie.add(h,l),l.v=0}}function Yh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=is(g(l.Fa,l),Jy(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Yy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=is(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,be(10),Fl(this),Yy(this))};function Xh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Yy(l){l.g=new Sn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=us(l.qa);Oe(h,"RID","rpc"),Oe(h,"SID",l.K),Oe(h,"AID",l.T),Oe(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Oe(h,"TO",l.ja),Oe(h,"TYPE","xmlhttp"),Na(l,h),l.m&&l.o&&Kh(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Vl(us(h)),p.m=null,p.P=!0,Wr(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Fl(this),Yh(this),be(19))};function Ul(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Xy(l,h){var p=null;if(l.g==h){Ul(l),Xh(l),l.g=null;var _=2}else if(xt(l.h,h))p=h.D,Gi(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var O=l.B;_=se(),gt(_,new tt(_,p)),zl(l)}else Qy(l);else if(O=h.s,O==3||O==0&&0<h.X||!(_==1&&Gx(l,h)||_==2&&Yh(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),O){case 1:Yr(l,5);break;case 4:Yr(l,10);break;case 3:Yr(l,6);break;default:Yr(l,2)}}}function Jy(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Yr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),_=l.Xa;const O=!_;_=new Qr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Dl(_,"https"),Vl(_),O?Fx(_.toString(),p):zx(_.toString(),p)}else be(2);l.G=0,l.l&&l.l.sa(h),Zy(l),Gy(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))};function Zy(l){if(l.G=0,l.ka=[],l.l){const h=Ny(l.h);(h.length!=0||l.i.length!=0)&&(C(l.ka,h),C(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function ev(l,h,p){var _=p instanceof Qr?us(p):new Qr(p);if(_.g!="")h&&(_.g=h+"."+_.g),jl(_,_.s);else{var O=a.location;_=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var F=new Qr(null);_&&Dl(F,_),h&&(F.g=h),O&&jl(F,O),p&&(F.l=p),_=F}return p=l.D,h=l.ya,p&&h&&Oe(_,p,h),Oe(_,"VER",l.la),Na(l,_),_}function tv(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ke(new Ol({eb:p})):new Ke(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nv(){}t=nv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bl(){}Bl.prototype.g=function(l,h){return new en(l,h)};function en(l,h){dt.call(this),this.g=new Wy(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!v(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ki(this)}S(en,dt),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Qh(this.g)},en.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=wa(l),l=p);h.i.push(new Kr(h.Ya++,l)),h.G==3&&zl(h)},en.prototype.N=function(){this.g.l=null,delete this.j,Qh(this.g),delete this.g,en.aa.N.call(this)};function sv(l){Bi.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(sv,Bi);function rv(){j.call(this),this.status=1}S(rv,j);function Ki(l){this.g=l}S(Ki,nv),Ki.prototype.ua=function(){gt(this.g,"a")},Ki.prototype.ta=function(l){gt(this.g,new sv(l))},Ki.prototype.sa=function(l){gt(this.g,new rv)},Ki.prototype.ra=function(){gt(this.g,"b")},Bl.prototype.createWebChannel=Bl.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,oT=function(){return new Bl},iT=function(){return se()},rT=U,Qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Un.NO_ERROR=0,Un.TIMEOUT=8,Un.HTTP_ERROR=6,Vu=Un,qr.COMPLETE="complete",sT=qr,Cl.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Xa=Cl,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,nT=Ke}).apply(typeof cu<"u"?cu:typeof self<"u"?self:typeof window<"u"?window:{});const J_="@firebase/firestore",Z_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new xg("@firebase/firestore");function ro(){return ki.logLevel}function q(t,...e){if(ki.logLevel<=_e.DEBUG){const n=e.map(Og);ki.debug(`Firestore (${la}): ${t}`,...n)}}function Ft(t,...e){if(ki.logLevel<=_e.ERROR){const n=e.map(Og);ki.error(`Firestore (${la}): ${t}`,...n)}}function Si(t,...e){if(ki.logLevel<=_e.WARN){const n=e.map(Og);ki.warn(`Firestore (${la}): ${t}`,...n)}}function Og(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,aT(t,s,n)}function aT(t,e,n){let s=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ft(s),new Error(s)}function re(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||aT(e,r,s)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Vs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class yR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vR{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){re(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ns,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ns)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(re(typeof s.accessToken=="string",31837,{l:s}),new cT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string",2055,{h:e}),new _t(e)}}class _R{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new _R(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ew{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ER{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){re(this.o===void 0,3512);const s=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ew(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ew(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=TR(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function de(t,e){return t<e?-1:t>e?1:0}function Ym(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return de(s,r);{const i=lT(),o=IR(i.encode(tw(t,n)),i.encode(tw(e,n)));return o!==0?o:de(s,r)}}n+=s>65535?2:1}return de(t.length,e.length)}function tw(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function IR(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return de(t[n],e[n]);return de(t.length,e.length)}function Uo(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}function dT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=-62135596800,sw=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*sw);return new Ge(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nw)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sw}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-nw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ge(0,0))}static max(){return new ae(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="__name__";class qn{constructor(e,n,s){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&te(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return qn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=qn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return de(e.length,n.length)}static compareSegments(e,n){const s=qn.isNumericId(e),r=qn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?qn.extractNumericId(e).compare(qn.extractNumericId(n)):Ym(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Er.fromString(e.substring(4,e.length-2))}}class Se extends qn{construct(e,n,s){return new Se(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Q(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const xR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends qn{construct(e,n,s){return new $e(e,n,s)}static isValidIdentifier(e){return xR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rw}static keyField(){return new $e([rw])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Q(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Q(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Se.fromString(e))}static fromName(e){return new Y(Se.fromString(e).popFirst(5))}static empty(){return new Y(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Se(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=-1;class Ad{constructor(e,n,s,r){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=r}}function Xm(t){return t.fields.find(e=>e.kind===2)}function ti(t){return t.fields.filter(e=>e.kind!==2)}Ad.UNKNOWN_ID=-1;class Ou{constructor(e,n){this.fieldPath=e,this.kind=n}}class qc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new qc(0,un.min())}}function bR(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ae.fromTimestamp(s===1e9?new Ge(n+1,0):new Ge(n,s));return new un(r,Y.empty(),e)}function hT(t){return new un(t.readTime,t.key,$c)}class un{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new un(ae.min(),Y.empty(),$c)}static max(){return new un(ae.max(),Y.empty(),$c)}}function Mg(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Li(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==fT)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,s)=>{n(e)})}static reject(e){return new V((n,s)=>{s(e)})}static waitFor(e){return new V((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=V.resolve(!1);for(const s of e)n=n.next(r=>r?V.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new V((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++a,a===i&&s(o)},f=>r(f))}})}static doWhile(e,n){return new V((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="SimpleDb";class _h{static open(e,n,s,r){try{return new _h(n,e.transaction(r,s))}catch(i){throw new fc(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ns,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new fc(e,n.error)):this.S.resolve()},this.transaction.onerror=s=>{const r=Lg(s.target.error);this.S.reject(new fc(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(q(nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new SR(n)}}class Tr{static delete(e){return q(nn,"Removing database:",e),si(sE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!dE())return!1;if(Tr.F())return!0;const e=lt(),n=Tr.M(e),s=0<n&&n<10,r=pT(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,n,s){this.name=e,this.version=n,this.B=s,this.L=null,Tr.M(lt())===12.2&&Ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(q(nn,"Opening database:",this.name),this.db=await new Promise((n,s)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=i=>{const o=i.target.result;n(o)},r.onblocked=()=>{s(new fc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=i=>{const o=i.target.error;o.name==="VersionError"?s(new Q(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?s(new Q(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):s(new fc(e,o))},r.onupgradeneeded=i=>{q(nn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;if(this.L!==null&&this.L!==i.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${i.oldVersion}, event.newVersion=${i.newVersion}, db.version=${o.version}`);this.B.q(o,r.transaction,i.oldVersion,this.version).next(()=>{q(nn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",n=>{const s=n.target;this.L=s.version},{passive:!0})),this.$&&(this.db.onversionchange=n=>this.$(n)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,s,r){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=_h.open(this.db,e,i?"readonly":"readwrite",s),c=r(a).next(d=>(a.v(),d)).catch(d=>(a.abort(d),V.reject(d))).toPromise();return c.catch(()=>{}),await a.D,c}catch(a){const c=a,d=c.name!=="FirebaseError"&&o<3;if(q(nn,"Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function pT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class kR{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return si(this.K.delete())}}class fc extends Q{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Mr(t){return t.name==="IndexedDbTransactionError"}class SR{constructor(e){this.store=e}put(e,n){let s;return n!==void 0?(q(nn,"PUT",this.store.name,e,n),s=this.store.put(n,e)):(q(nn,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),si(s)}add(e){return q(nn,"ADD",this.store.name,e,e),si(this.store.add(e))}get(e){return si(this.store.get(e)).next(n=>(n===void 0&&(n=null),q(nn,"GET",this.store.name,e,n),n))}delete(e){return q(nn,"DELETE",this.store.name,e),si(this.store.delete(e))}count(){return q(nn,"COUNT",this.store.name),si(this.store.count())}J(e,n){const s=this.options(e,n),r=s.index?this.store.index(s.index):this.store;if(typeof r.getAll=="function"){const i=r.getAll(s.range);return new V((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(s),o=[];return this.Y(i,(a,c)=>{o.push(c)}).next(()=>o)}}Z(e,n){const s=this.store.getAll(e,n===null?void 0:n);return new V((r,i)=>{s.onerror=o=>{i(o.target.error)},s.onsuccess=o=>{r(o.target.result)}})}X(e,n){q(nn,"DELETE ALL",this.store.name);const s=this.options(e,n);s.ee=!1;const r=this.cursor(s);return this.Y(r,(i,o,a)=>a.delete())}te(e,n){let s;n?s=e:(s={},n=e);const r=this.cursor(s);return this.Y(r,n)}ne(e){const n=this.cursor({});return new V((s,r)=>{n.onerror=i=>{const o=Lg(i.target.error);r(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():s()}):s()}})}Y(e,n){const s=[];return new V((r,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const c=new kR(a),d=n(a.primaryKey,a.value,c);if(d instanceof V){const f=d.catch(m=>(c.done(),V.reject(m)));s.push(f)}c.isDone?r():c.j===null?a.continue():a.continue(c.j)}}).next(()=>V.waitFor(s))}options(e,n){let s;return e!==void 0&&(typeof e=="string"?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.ee?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function si(t){return new V((e,n)=>{t.onsuccess=s=>{const r=s.target.result;e(r)},t.onerror=s=>{const r=Lg(s.target.error);n(r)}})}let iw=!1;function Lg(t){const e=Tr.M(lt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const s=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iw||(iw=!0,setTimeout(()=>{throw s},0)),s}}return t}const mc="IndexBackfiller";class AR{constructor(e,n){this.asyncQueue=e,this.re=n,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){q(mc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.re.se();q(mc,`Documents written: ${n}`)}catch(n){Mr(n)?q(mc,"Ignoring IndexedDB error during index backfill: ",n):await Li(n)}await this.ie(6e4)})}}class PR{constructor(e,n){this.localStore=e,this.persistence=n}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.oe(n,e))}oe(e,n){const s=new Set;let r=n,i=!0;return V.doWhile(()=>i===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!s.has(o))return q(mc,`Processing collection: ${o}`),this._e(e,o,r).next(a=>{r-=a,s.add(o)});i=!1})).next(()=>n-r)}_e(e,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,s).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ae(r,i)).next(a=>(q(mc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ae(e,n){let s=e;return n.changes.forEach((r,i)=>{const o=hT(i);Mg(o,s)>0&&(s=o)}),new un(s.readTime,s.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}vn.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=-1;function wh(t){return t==null}function Wc(t){return t===0&&1/t==-1/0}function NR(t){return typeof t=="number"&&Number.isInteger(t)&&!Wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="";function Vt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ow(e)),e=CR(t.get(n),e);return ow(e)}function CR(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Pd:n+="";break;default:n+=i}}return n}function ow(t){return t+Pd+""}function Gn(t){const e=t.length;if(re(e>=2,64408,{path:t}),e===2)return re(t.charAt(0)===Pd&&t.charAt(1)==="",56145,{path:t}),Se.emptyPath();const n=e-2,s=[];let r="";for(let i=0;i<e;){const o=t.indexOf(Pd,i);switch((o<0||o>n)&&te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;r.length===0?c=a:(r+=a,c=r,r=""),s.push(c);break;case"":r+=t.substring(i,o),r+="\0";break;case"":r+=t.substring(i,o+1);break;default:te(61167,{path:t})}i=o+2}return new Se(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="remoteDocuments",pl="owner",Ji="owner",Gc="mutationQueues",RR="userId",jn="mutations",aw="batchId",ui="userMutationsIndex",cw=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t,e){return[t,Vt(e)]}function gT(t,e,n){return[t,Vt(e),n]}const DR={},Bo="documentMutations",Nd="remoteDocumentsV14",jR=["prefixPath","collectionGroup","readTime","documentId"],Lu="documentKeyIndex",VR=["prefixPath","collectionGroup","documentId"],yT="collectionGroupIndex",OR=["collectionGroup","readTime","prefixPath","documentId"],Hc="remoteDocumentGlobal",Jm="remoteDocumentGlobalKey",$o="targets",vT="queryTargetsIndex",MR=["canonicalId","targetId"],qo="targetDocuments",LR=["targetId","path"],Fg="documentTargetsIndex",FR=["path","targetId"],Cd="targetGlobalKey",pi="targetGlobal",Kc="collectionParents",zR=["collectionId","parent"],Wo="clientMetadata",UR="clientId",Eh="bundles",BR="bundleId",Th="namedQueries",$R="name",zg="indexConfiguration",qR="indexId",Zm="collectionGroupIndex",WR="collectionGroup",pc="indexState",GR=["indexId","uid"],_T="sequenceNumberIndex",HR=["uid","sequenceNumber"],gc="indexEntries",KR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wT="documentKeyIndex",QR=["indexId","uid","orderedDocumentKey"],Ih="documentOverlays",YR=["userId","collectionPath","documentId"],ep="collectionPathOverlayIndex",XR=["userId","collectionPath","largestBatchId"],ET="collectionGroupOverlayIndex",JR=["userId","collectionGroup","largestBatchId"],Ug="globals",ZR="name",TT=[Gc,jn,Bo,ni,$o,pl,pi,qo,Wo,Hc,Kc,Eh,Th],eD=[...TT,Ih],IT=[Gc,jn,Bo,Nd,$o,pl,pi,qo,Wo,Hc,Kc,Eh,Th,Ih],xT=IT,Bg=[...xT,zg,pc,gc],tD=Bg,bT=[...Bg,Ug],nD=bT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp extends mT{constructor(e,n){super(),this.he=e,this.currentSequenceNumber=n}}function ut(t,e){const n=he(t);return Tr.N(n.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lu(this.root,e,this.comparator,!1)}getReverseIterator(){return new lu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lu(this.root,e,this.comparator,!0)}}class lu{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??wt.RED,this.left=r??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new wt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return wt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uw(this.data.getIterator())}getIteratorFrom(e){return new uw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ne)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ne(this.comparator);return n.data=e,n}}class uw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zi(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new Ne($e.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ST("Invalid base64 string: "+i):i}}(e);return new ot(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const sD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(t){if(re(!!t,39018),typeof t=="string"){let e=0;const n=sD.exec(t);if(re(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="server_timestamp",PT="__type__",NT="__previous_value__",CT="__local_write_time__";function $g(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[PT])===null||n===void 0?void 0:n.stringValue)===AT}function xh(t){const e=t.mapValue.fields[NT];return $g(e)?xh(e):e}function Qc(t){const e=Ns(t.mapValue.fields[CT].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n,s,r,i,o,a,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Rd="(default)";class Ai{constructor(e,n){this.projectId=e,this.database=n||Rd}static empty(){return new Ai("","")}get isDefaultDatabase(){return this.database===Rd}isEqual(e){return e instanceof Ai&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="__type__",RT="__max__",lr={mapValue:{fields:{__type__:{stringValue:RT}}}},Wg="__vector__",Go="value",Fu={nullValue:"NULL_VALUE"};function Ar(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$g(t)?4:DT(t)?9007199254740991:bh(t)?10:11:te(28295,{value:t})}function ss(t,e){if(t===e)return!0;const n=Ar(t);if(n!==Ar(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qc(t).isEqual(Qc(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ns(r.timestampValue),a=Ns(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Cs(r.bytesValue).isEqual(Cs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Fe(r.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(r.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Fe(r.integerValue)===Fe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Fe(r.doubleValue),a=Fe(i.doubleValue);return o===a?Wc(o)===Wc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Uo(t.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(lw(o)!==lw(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ss(o[c],a[c])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Yc(t,e){return(t.values||[]).find(n=>ss(n,e))!==void 0}function Pr(t,e){if(t===e)return 0;const n=Ar(t),s=Ar(e);if(n!==s)return de(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Fe(i.integerValue||i.doubleValue),c=Fe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return dw(t.timestampValue,e.timestampValue);case 4:return dw(Qc(t),Qc(e));case 5:return Ym(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Cs(i),c=Cs(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){const f=de(a[d],c[d]);if(f!==0)return f}return de(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=de(Fe(i.latitude),Fe(o.latitude));return a!==0?a:de(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hw(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,d,f;const m=i.fields||{},g=o.fields||{},T=(a=m[Go])===null||a===void 0?void 0:a.arrayValue,S=(c=g[Go])===null||c===void 0?void 0:c.arrayValue,A=de(((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:hw(T,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===lr.mapValue&&o===lr.mapValue)return 0;if(i===lr.mapValue)return 1;if(o===lr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const g=Ym(c[m],f[m]);if(g!==0)return g;const T=Pr(a[c[m]],d[f[m]]);if(T!==0)return T}return de(c.length,f.length)}(t.mapValue,e.mapValue);default:throw te(23264,{Pe:n})}}function dw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Ns(t),s=Ns(e),r=de(n.seconds,s.seconds);return r!==0?r:de(n.nanos,s.nanos)}function hw(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Pr(n[r],s[r]);if(i)return i}return de(n.length,s.length)}function Ho(t){return np(t)}function np(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ns(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=np(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${np(n.fields[o])}`;return r+"}"}(t.mapValue):te(61005,{value:t})}function zu(t){switch(Ar(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xh(t);return e?16+zu(e):16;case 5:return 2*t.stringValue.length;case 6:return Cs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+zu(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Lr(s.fields,(i,o)=>{r+=i.length+zu(o)}),r}(t.mapValue);default:throw te(13486,{value:t})}}function Xc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sp(t){return!!t&&"integerValue"in t}function Jc(t){return!!t&&"arrayValue"in t}function fw(t){return!!t&&"nullValue"in t}function mw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uu(t){return!!t&&"mapValue"in t}function bh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qg])===null||n===void 0?void 0:n.stringValue)===Wg}function yc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Lr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=yc(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===RT}const jT={mapValue:{fields:{[qg]:{stringValue:Wg},[Go]:{arrayValue:{}}}}};function iD(t){return"nullValue"in t?Fu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Xc(Ai.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?bh(t)?jT:{mapValue:{}}:te(35942,{value:t})}function oD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Xc(Ai.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?jT:"mapValue"in t?bh(t)?{mapValue:{}}:lr:te(61959,{value:t})}function pw(t,e){const n=Pr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function gw(t,e){const n=Pr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Uu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yc(n)}setAll(e){let n=$e.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=yc(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Uu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Lr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Dt(yc(this.value))}}function VT(t){const e=[];return Lr(t.fields,(n,s)=>{const r=new $e([n]);if(Uu(s)){const i=VT(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ye(e,0,ae.min(),ae.min(),ae.min(),Dt.empty(),0)}static newFoundDocument(e,n,s,r){return new Ye(e,1,n,ae.min(),s,r,0)}static newNoDocument(e,n){return new Ye(e,2,n,ae.min(),ae.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Ye(e,3,n,ae.min(),ae.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ye&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ye(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n){this.position=e,this.inclusive=n}}function yw(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Y.comparator(Y.fromName(o.referenceValue),n.key):s=Pr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function vw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ss(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n="asc"){this.field=e,this.dir=n}}function aD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{}class we extends OT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new cD(e,n,s):n==="array-contains"?new dD(e,s):n==="in"?new BT(e,s):n==="not-in"?new hD(e,s):n==="array-contains-any"?new fD(e,s):new we(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new lD(e,s):new uD(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Pr(n,this.value)):n!==null&&Ar(this.value)===Ar(n)&&this.matchesComparison(Pr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ae extends OT{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Ae(e,n)}matches(e){return Qo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Qo(t){return t.op==="and"}function rp(t){return t.op==="or"}function Gg(t){return MT(t)&&Qo(t)}function MT(t){for(const e of t.filters)if(e instanceof Ae)return!1;return!0}function ip(t){if(t instanceof we)return t.field.canonicalString()+t.op.toString()+Ho(t.value);if(Gg(t))return t.filters.map(e=>ip(e)).join(",");{const e=t.filters.map(n=>ip(n)).join(",");return`${t.op}(${e})`}}function LT(t,e){return t instanceof we?function(s,r){return r instanceof we&&s.op===r.op&&s.field.isEqual(r.field)&&ss(s.value,r.value)}(t,e):t instanceof Ae?function(s,r){return r instanceof Ae&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&LT(o,r.filters[a]),!0):!1}(t,e):void te(19439)}function FT(t,e){const n=t.filters.concat(e);return Ae.create(n,t.op)}function zT(t){return t instanceof we?function(n){return`${n.field.canonicalString()} ${n.op} ${Ho(n.value)}`}(t):t instanceof Ae?function(n){return n.op.toString()+" {"+n.getFilters().map(zT).join(" ,")+"}"}(t):"Filter"}class cD extends we{constructor(e,n,s){super(e,n,s),this.key=Y.fromName(s.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class lD extends we{constructor(e,n){super(e,"in",n),this.keys=UT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uD extends we{constructor(e,n){super(e,"not-in",n),this.keys=UT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function UT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Y.fromName(s.referenceValue))}class dD extends we{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jc(n)&&Yc(n.arrayValue,this.value)}}class BT extends we{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yc(this.value.arrayValue,n)}}class hD extends we{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yc(this.value.arrayValue,n)}}class fD extends we{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Yc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function op(t,e=null,n=[],s=[],r=null,i=null,o=null){return new mD(t,e,n,s,r,i,o)}function Pi(t){const e=he(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>ip(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),wh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ho(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ho(s)).join(",")),e.Ie=n}return e.Ie}function gl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vw(t.startAt,e.startAt)&&vw(t.endAt,e.endAt)}function Dd(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function jd(t,e){return t.filters.filter(n=>n instanceof we&&n.field.isEqual(e))}function _w(t,e,n){let s=Fu,r=!0;for(const i of jd(t,e)){let o=Fu,a=!0;switch(i.op){case"<":case"<=":o=iD(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Fu}pw({value:s,inclusive:r},{value:o,inclusive:a})<0&&(s=o,r=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];pw({value:s,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(s=o,r=n.inclusive);break}}return{value:s,inclusive:r}}function ww(t,e,n){let s=lr,r=!0;for(const i of jd(t,e)){let o=lr,a=!0;switch(i.op){case">=":case">":o=oD(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=lr}gw({value:s,inclusive:r},{value:o,inclusive:a})>0&&(s=o,r=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];gw({value:s,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(s=o,r=n.inclusive);break}}return{value:s,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function pD(t,e,n,s,r,i,o,a){return new ua(t,e,n,s,r,i,o,a)}function kh(t){return new ua(t)}function Ew(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $T(t){return t.collectionGroup!==null}function vc(t){const e=he(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ne($e.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Zc(i,s))}),n.has($e.keyField().canonicalString())||e.Ee.push(new Zc($e.keyField(),s))}return e.Ee}function wn(t){const e=he(t);return e.de||(e.de=gD(e,vc(t))),e.de}function gD(t,e){if(t.limitType==="F")return op(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Zc(r.field,i)});const n=t.endAt?new Ko(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ko(t.startAt.position,t.startAt.inclusive):null;return op(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function ap(t,e){const n=t.filters.concat([e]);return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cp(t,e,n){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sh(t,e){return gl(wn(t),wn(e))&&t.limitType===e.limitType}function qT(t){return`${Pi(wn(t))}|lt:${t.limitType}`}function io(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>zT(r)).join(", ")}]`),wh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Ho(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Ho(r)).join(",")),`Target(${s})`}(wn(t))}; limitType=${t.limitType})`}function yl(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Y.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of vc(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,c){const d=yw(o,a,c);return o.inclusive?d<=0:d<0}(s.startAt,vc(s),r)||s.endAt&&!function(o,a,c){const d=yw(o,a,c);return o.inclusive?d>=0:d>0}(s.endAt,vc(s),r))}(t,e)}function yD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WT(t){return(e,n)=>{let s=!1;for(const r of vc(t)){const i=vD(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function vD(t,e,n){const s=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),d=a.data.field(i);return c!==null&&d!==null?Pr(c,d):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Lr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return kT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new Ue(Y.comparator);function an(){return _D}const GT=new Ue(Y.comparator);function Ja(...t){let e=GT;for(const n of t)e=e.insert(n.key,n);return e}function HT(t){let e=GT;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Hn(){return _c()}function KT(){return _c()}function _c(){return new Os(t=>t.toString(),(t,e)=>t.isEqual(e))}const wD=new Ue(Y.comparator),ED=new Ne(Y.comparator);function ye(...t){let e=ED;for(const n of t)e=e.add(n);return e}const TD=new Ne(de);function ID(){return TD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function QT(t){return{integerValue:""+t}}function xD(t,e){return NR(e)?QT(e):Hg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this._=void 0}}function bD(t,e,n){return t instanceof el?function(r,i){const o={fields:{[PT]:{stringValue:AT},[CT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&$g(i)&&(i=xh(i)),i&&(o.fields[NT]=i),{mapValue:o}}(n,e):t instanceof Yo?XT(t,e):t instanceof Xo?JT(t,e):function(r,i){const o=YT(r,i),a=Tw(o)+Tw(r.Re);return sp(o)&&sp(r.Re)?QT(a):Hg(r.serializer,a)}(t,e)}function kD(t,e,n){return t instanceof Yo?XT(t,e):t instanceof Xo?JT(t,e):n}function YT(t,e){return t instanceof tl?function(s){return sp(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class el extends Ah{}class Yo extends Ah{constructor(e){super(),this.elements=e}}function XT(t,e){const n=ZT(e);for(const s of t.elements)n.some(r=>ss(r,s))||n.push(s);return{arrayValue:{values:n}}}class Xo extends Ah{constructor(e){super(),this.elements=e}}function JT(t,e){let n=ZT(e);for(const s of t.elements)n=n.filter(r=>!ss(r,s));return{arrayValue:{values:n}}}class tl extends Ah{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Tw(t){return Fe(t.integerValue||t.doubleValue)}function ZT(t){return Jc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n){this.field=e,this.transform=n}}function AD(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Yo&&r instanceof Yo||s instanceof Xo&&r instanceof Xo?Uo(s.elements,r.elements,ss):s instanceof tl&&r instanceof tl?ss(s.Re,r.Re):s instanceof el&&r instanceof el}(t.transform,e.transform)}class PD{constructor(e,n){this.version=e,this.transformResults=n}}class jt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jt}static exists(e){return new jt(void 0,e)}static updateTime(e){return new jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ph{}function eI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nh(t.key,jt.none()):new da(t.key,t.data,jt.none());{const n=t.data,s=Dt.empty();let r=new Ne($e.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Ms(t.key,s,new Kt(r.toArray()),jt.none())}}function ND(t,e,n){t instanceof da?function(r,i,o){const a=r.value.clone(),c=xw(r.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ms?function(r,i,o){if(!Bu(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=xw(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(tI(r)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wc(t,e,n,s){return t instanceof da?function(i,o,a,c){if(!Bu(i.precondition,o))return a;const d=i.value.clone(),f=bw(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ms?function(i,o,a,c){if(!Bu(i.precondition,o))return a;const d=bw(i.fieldTransforms,c,o),f=o.data;return f.setAll(tI(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(i,o,a){return Bu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function CD(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=YT(s.transform,r||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(s.field,i))}return n||null}function Iw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Uo(s,r,(i,o)=>AD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class da extends Ph{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ms extends Ph{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function tI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function xw(t,e,n){const s=new Map;re(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,kD(o,a,n[r]))}return s}function bw(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,bD(i,o,e))}return s}class Nh extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nI extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&ND(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=wc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=wc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=KT();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const c=eI(o,a);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(n,s)=>Iw(n,s))&&Uo(this.baseMutations,e.baseMutations,(n,s)=>Iw(n,s))}}class Qg{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){re(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let r=function(){return wD}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Qg(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,Te;function DD(t){switch(t){case z.OK:return te(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function sI(t){if(t===void 0)return Ft("GRPC error has no .code"),z.UNKNOWN;switch(t){case nt.OK:return z.OK;case nt.CANCELLED:return z.CANCELLED;case nt.UNKNOWN:return z.UNKNOWN;case nt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case nt.INTERNAL:return z.INTERNAL;case nt.UNAVAILABLE:return z.UNAVAILABLE;case nt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case nt.NOT_FOUND:return z.NOT_FOUND;case nt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case nt.ABORTED:return z.ABORTED;case nt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case nt.DATA_LOSS:return z.DATA_LOSS;default:return te(39323,{code:t})}}(Te=nt||(nt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=new Er([4294967295,4294967295],0);function kw(t){const e=lT().encode(t),n=new tT;return n.update(e),new Uint8Array(n.digest())}function Sw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Er([n,s],0),new Er([r,i],0)]}class Xg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Za(`Invalid padding: ${n}`);if(s<0)throw new Za(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Za(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Za(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Er.fromNumber(this.pe)}we(e,n,s){let r=e.add(n.multiply(Er.fromNumber(s)));return r.compare(jD)===1&&(r=new Er([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=kw(e),[s,r]=Sw(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);if(!this.be(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xg(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=kw(e),[s,r]=Sw(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,vl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ch(ae.min(),r,new Ue(de),an(),ye())}}class vl{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new vl(s,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n,s,r){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=r}}class rI{constructor(e,n){this.targetId=e,this.Ce=n}}class iI{constructor(e,n,s=ot.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Aw{constructor(){this.Fe=0,this.Me=Pw(),this.xe=ot.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ye(),n=ye(),s=ye();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:te(38017,{changeType:i})}}),new vl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=Pw()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,re(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class VD{constructor(e){this.ze=e,this.je=new Map,this.He=an(),this.Je=uu(),this.Ye=uu(),this.Ze=new Ue(de)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,s=e.Ce.count,r=this._t(n);if(r){const i=r.target;if(Dd(i))if(s===0){const o=new Y(i.path);this.tt(n,o,Ye.newNoDocument(o,ae.min()))}else re(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const a=this.ct(e),c=a?this.lt(a,e,o):1;if(c!==0){this.st(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Cs(s).toUint8Array()}catch(c){if(c instanceof ST)return Si("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Xg(o,r,i)}catch(c){return Si(c instanceof Za?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),r++)}),r}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&Dd(a.target)){const c=new Y(a.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Ye.newNoDocument(c,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let s=ye();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const d=this._t(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const r=new Ch(e,n,this.Ze,this.He,s);return this.He=an(),this.Je=uu(),this.Ye=uu(),this.Ze=new Ue(de),r}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Aw,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ne(de),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ne(de),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Aw),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function uu(){return new Ue(Y.comparator)}function Pw(){return new Ue(Y.comparator)}const OD={asc:"ASCENDING",desc:"DESCENDING"},MD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LD={and:"AND",or:"OR"};class FD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lp(t,e){return t.useProto3Json||wh(e)?e:{value:e}}function Jo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zD(t,e){return Jo(t,e.toTimestamp())}function Ut(t){return re(!!t,49232),ae.fromTimestamp(function(n){const s=Ns(n);return new Ge(s.seconds,s.nanos)}(t))}function Jg(t,e){return up(t,e).canonicalString()}function up(t,e){const n=function(r){return new Se(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aI(t){const e=Se.fromString(t);return re(gI(e),10190,{key:e.toString()}),e}function Vd(t,e){return Jg(t.databaseId,e.path)}function gi(t,e){const n=aI(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(uI(n))}function cI(t,e){return Jg(t.databaseId,e)}function lI(t){const e=aI(t);return e.length===4?Se.emptyPath():uI(e)}function dp(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uI(t){return re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Nw(t,e,n){return{name:Vd(t,e),fields:n.value.mapValue.fields}}function UD(t,e,n){const s=gi(t,e.name),r=Ut(e.updateTime),i=e.createTime?Ut(e.createTime):ae.min(),o=new Dt({mapValue:{fields:e.fields}}),a=Ye.newFoundDocument(s,r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function BD(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(re(f===void 0||typeof f=="string",58123),ot.fromBase64String(f||"")):(re(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ot.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=d.code===void 0?z.UNKNOWN:sI(d.code);return new Q(f,d.message||"")}(o);n=new iI(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=gi(t,s.document.name),i=Ut(s.document.updateTime),o=s.document.createTime?Ut(s.document.createTime):ae.min(),a=new Dt({mapValue:{fields:s.document.fields}}),c=Ye.newFoundDocument(r,i,o,a),d=s.targetIds||[],f=s.removedTargetIds||[];n=new $u(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=gi(t,s.document),i=s.readTime?Ut(s.readTime):ae.min(),o=Ye.newNoDocument(r,i),a=s.removedTargetIds||[];n=new $u([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=gi(t,s.document),i=s.removedTargetIds||[];n=new $u([],i,r,null)}else{if(!("filter"in e))return te(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new RD(r,i),a=s.targetId;n=new rI(a,o)}}return n}function Od(t,e){let n;if(e instanceof da)n={update:Nw(t,e.key,e.value)};else if(e instanceof Nh)n={delete:Vd(t,e.key)};else if(e instanceof Ms)n={update:Nw(t,e.key,e.data),updateMask:KD(e.fieldMask)};else{if(!(e instanceof nI))return te(16599,{ft:e.type});n={verify:Vd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof el)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof tl)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw te(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:zD(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function hp(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?jt.updateTime(Ut(i.updateTime)):i.exists!==void 0?jt.exists(i.exists):jt.none()}(e.currentDocument):jt.none(),s=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)re(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new el;else if("appendMissingElements"in a){const f=a.appendMissingElements.values||[];c=new Yo(f)}else if("removeAllFromArray"in a){const f=a.removeAllFromArray.values||[];c=new Xo(f)}else"increment"in a?c=new tl(o,a.increment):te(16584,{proto:a});const d=$e.fromServerFormat(a.fieldPath);return new SD(d,c)}(t,r)):[];if(e.update){e.update.name;const r=gi(t,e.update.name),i=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const d=c.fieldPaths||[];return new Kt(d.map(f=>$e.fromServerFormat(f)))}(e.updateMask);return new Ms(r,i,o,n,s)}return new da(r,i,n,s)}if(e.delete){const r=gi(t,e.delete);return new Nh(r,n)}if(e.verify){const r=gi(t,e.verify);return new nI(r,n)}return te(1463,{proto:e})}function $D(t,e){return t&&t.length>0?(re(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Ut(r.updateTime):Ut(i);return o.isEqual(ae.min())&&(o=Ut(i)),new PD(o,r.transformResults||[])}(n,e))):[]}function dI(t,e){return{documents:[cI(t,e.path)]}}function hI(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=cI(t,r);const i=function(d){if(d.length!==0)return pI(Ae.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:oo(g.field),direction:WD(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=lp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:r}}function fI(t){let e=lI(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){re(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=mI(m);return g instanceof Ae&&Gg(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(S){return new Zc(ao(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,wh(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,T=m.values||[];return new Ko(T,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,T=m.values||[];return new Ko(T,g)}(n.endAt)),pD(e,r,o,i,a,"F",c,d)}function qD(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ao(n.unaryFilter.field);return we.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ao(n.unaryFilter.field);return we.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ao(n.unaryFilter.field);return we.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ao(n.unaryFilter.field);return we.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return we.create(ao(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ae.create(n.compositeFilter.filters.map(s=>mI(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function WD(t){return OD[t]}function GD(t){return MD[t]}function HD(t){return LD[t]}function oo(t){return{fieldPath:t.canonicalString()}}function ao(t){return $e.fromServerFormat(t.fieldPath)}function pI(t){return t instanceof we?function(n){if(n.op==="=="){if(mw(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if(fw(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mw(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if(fw(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:GD(n.op),value:n.value}}}(t):t instanceof Ae?function(n){const s=n.getFilters().map(r=>pI(r));return s.length===1?s[0]:{compositeFilter:{op:HD(n.op),filters:s}}}(t):te(54877,{filter:t})}function KD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,s,r,i=ae.min(),o=ae.min(),a=ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.wt=e}}function QD(t,e){let n;if(e.document)n=UD(t.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Y.fromSegments(e.noDocument.path),r=Ci(e.noDocument.readTime);n=Ye.newNoDocument(s,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te(56709);{const s=Y.fromSegments(e.unknownDocument.path),r=Ci(e.unknownDocument.version);n=Ye.newUnknownDocument(s,r)}}return e.readTime&&n.setReadTime(function(r){const i=new Ge(r[0],r[1]);return ae.fromTimestamp(i)}(e.readTime)),n}function Cw(t,e){const n=e.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Md(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=function(i,o){return{name:Vd(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Jo(i,o.version.toTimestamp()),createTime:Jo(i,o.createTime.toTimestamp())}}(t.wt,e);else if(e.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:Ni(e.version)};else{if(!e.isUnknownDocument())return te(57904,{document:e});s.unknownDocument={path:n.path.toArray(),version:Ni(e.version)}}return s}function Md(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ni(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ci(t){const e=new Ge(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function ri(t,e){const n=(e.baseMutations||[]).map(i=>hp(t.wt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const s=e.mutations.map(i=>hp(t.wt,i)),r=Ge.fromMillis(e.localWriteTimeMs);return new Kg(e.batchId,r,n,s)}function ec(t){const e=Ci(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ci(t.lastLimboFreeSnapshotVersion):ae.min();let s;return s=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return re(o===1,1966,{count:o}),wn(kh(lI(i.documents[0])))}(t.query):function(i){return wn(fI(i))}(t.query),new ws(s,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ot.fromBase64String(t.resumeToken))}function vI(t,e){const n=Ni(e.snapshotVersion),s=Ni(e.lastLimboFreeSnapshotVersion);let r;r=Dd(e.target)?dI(t.wt,e.target):hI(t.wt,e.target).gt;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pi(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:r}}function _I(t){const e=fI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cp(e,e.limit,"L"):e}function jf(t,e){return new Yg(e.largestBatchId,hp(t.wt,e.overlayMutation))}function Rw(t,e){const n=e.path.lastSegment();return[t,Vt(e.path.popLast()),n]}function Dw(t,e,n,s){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ni(s.readTime),documentKey:Vt(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{getBundleMetadata(e,n){return jw(e).get(n).next(s=>{if(s)return function(i){return{id:i.bundleId,createTime:Ci(i.createTime),version:i.version}}(s)})}saveBundleMetadata(e,n){return jw(e).put(function(r){return{bundleId:r.id,createTime:Ni(Ut(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return Vw(e).get(n).next(s=>{if(s)return function(i){return{name:i.name,query:_I(i.bundledQuery),readTime:Ci(i.readTime)}}(s)})}saveNamedQuery(e,n){return Vw(e).put(function(r){return{name:r.name,readTime:Ni(Ut(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function jw(t){return ut(t,Eh)}function Vw(t){return ut(t,Th)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.serializer=e,this.userId=n}static bt(e,n){const s=n.uid||"";return new Rh(e,s)}getOverlay(e,n){return Fa(e).get(Rw(this.userId,n)).next(s=>s?jf(this.serializer,s):null)}getOverlays(e,n){const s=Hn();return V.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){const r=[];return s.forEach((i,o)=>{const a=new Yg(n,o);r.push(this.St(e,a))}),V.waitFor(r)}removeOverlaysForBatchId(e,n,s){const r=new Set;n.forEach(o=>r.add(Vt(o.getCollectionPath())));const i=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,s],[this.userId,o,s+1],!1,!0);i.push(Fa(e).X(ep,a))}),V.waitFor(i)}getOverlaysForCollection(e,n,s){const r=Hn(),i=Vt(n),o=IDBKeyRange.bound([this.userId,i,s],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Fa(e).J(ep,o).next(a=>{for(const c of a){const d=jf(this.serializer,c);r.set(d.getKey(),d)}return r})}getOverlaysForCollectionGroup(e,n,s,r){const i=Hn();let o;const a=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fa(e).te({index:ET,range:a},(c,d,f)=>{const m=jf(this.serializer,d);i.size()<r||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>i)}St(e,n){return Fa(e).put(function(r,i,o){const[a,c,d]=Rw(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Od(r.wt,o.mutation)}}(this.serializer,this.userId,n))}}function Fa(t){return ut(t,Ih)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{Dt(e){return ut(e,Ug)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(n=>{const s=n==null?void 0:n.value;return s?ot.fromUint8Array(s):ot.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Dt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(Fe(e.integerValue));else if("doubleValue"in e){const s=Fe(e.doubleValue);isNaN(s)?this.Mt(n,13):(this.Mt(n,15),Wc(s)?n.xt(0):n.xt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Mt(n,20),typeof s=="string"&&(s=Ns(s)),n.Ot(`${s.seconds||""}`),n.xt(s.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(Cs(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.Mt(n,45),n.xt(s.latitude||0),n.xt(s.longitude||0)}else"mapValue"in e?DT(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):bh(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):te(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){const s=e.fields||{};this.Mt(n,55);for(const r of Object.keys(s))this.Nt(r,n),this.Ct(s[r],n)}qt(e,n){var s,r;const i=e.fields||{};this.Mt(n,53);const o=Go,a=((r=(s=i[o].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.length)||0;this.Mt(n,15),n.xt(Fe(a)),this.Nt(o,n),this.Ct(i[o],n)}$t(e,n){const s=e.values||[];this.Mt(n,50);for(const r of s)this.Ct(r,n)}kt(e,n){this.Mt(n,37),Y.fromName(e).path.forEach(s=>{this.Mt(n,60),this.Kt(s,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}}ii.Wt=new ii;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=255;function JD(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Ow(t){const e=64-function(s){let r=0;for(let i=0;i<8;++i){const o=JD(255&s[i]);if(r+=o,o!==8)break}return r}(t);return Math.ceil(e/8)}class ZD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.zt(s.value),s=n.next();this.jt()}Ht(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Jt(s.value),s=n.next();this.Yt()}Zt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.zt(s);else if(s<2048)this.zt(960|s>>>6),this.zt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.zt(480|s>>>12),this.zt(128|63&s>>>6),this.zt(128|63&s);else{const r=n.codePointAt(0);this.zt(240|r>>>18),this.zt(128|63&r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r)}}this.jt()}Xt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Yt()}en(e){const n=this.tn(e),s=Ow(n);this.nn(1+s),this.buffer[this.position++]=255&s;for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=255&n[r]}rn(e){const n=this.tn(e),s=Ow(n);this.nn(1+s),this.buffer[this.position++]=~(255&s);for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}sn(){this._n(eo),this._n(255)}an(){this.un(eo),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),s=!!(128&n[0]);n[0]^=s?255:128;for(let r=1;r<n.length;++r)n[r]^=s?255:0;return n}zt(e){const n=255&e;n===0?(this._n(0),this._n(255)):n===eo?(this._n(eo),this._n(0)):this._n(n)}Jt(e){const n=255&e;n===0?(this.un(0),this.un(255)):n===eo?(this.un(eo),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const n=e+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const r=new Uint8Array(s);r.set(this.buffer),this.buffer=r}}class e3{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class t3{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class za{constructor(){this.ln=new ZD,this.hn=new e3(this.ln),this.Pn=new t3(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,s,r){this.In=e,this.En=n,this.dn=s,this.An=r}Rn(){const e=this.An.length,n=e===0||this.An[e-1]===255?e+1:e,s=new Uint8Array(n);return s.set(this.An,0),n!==e?s.set([0],this.An.length):++s[s.length-1],new oi(this.In,this.En,this.dn,s)}Vn(e,n,s){return{indexId:this.In,uid:e,arrayValue:qu(this.dn),directionalValue:qu(this.An),orderedDocumentKey:qu(n),documentKey:s.path.toArray()}}mn(e,n,s){const r=this.Vn(e,n,s);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Hs(t,e){let n=t.In-e.In;return n!==0?n:(n=Mw(t.dn,e.dn),n!==0?n:(n=Mw(t.An,e.An),n!==0?n:Y.comparator(t.En,e.En)))}function Mw(t,e){for(let n=0;n<t.length&&n<e.length;++n){const s=t[n]-e[n];if(s!==0)return s}return t.length-e.length}function qu(t){return uE()?function(n){let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}(t):t}function Lw(t){return typeof t!="string"?t:function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(t)}class Fw{constructor(e){this.fn=new Ne((n,s)=>$e.comparator(n.field,s.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const n of e.filters){const s=n;s.isInequality()?this.fn=this.fn.add(s):this.pn.push(s)}}get yn(){return this.fn.size>1}wn(e){if(re(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const n=Xm(e);if(n!==void 0&&!this.bn(n))return!1;const s=ti(e);let r=new Set,i=0,o=0;for(;i<s.length&&this.bn(s[i]);++i)r=r.add(s[i].fieldPath.canonicalString());if(i===s.length)return!0;if(this.fn.size>0){const a=this.fn.getIterator().getNext();if(!r.has(a.field.canonicalString())){const c=s[i];if(!this.Sn(a,c)||!this.Dn(this.gn[o++],c))return!1}++i}for(;i<s.length;++i){const a=s[i];if(o>=this.gn.length||!this.Dn(this.gn[o++],a))return!1}return!0}vn(){if(this.yn)return null;let e=new Ne($e.comparator);const n=[];for(const s of this.pn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")n.push(new Ou(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),n.push(new Ou(s.field,0))}for(const s of this.gn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),n.push(new Ou(s.field,s.dir==="asc"?0:1)));return new Ad(Ad.UNKNOWN_ID,this.collectionId,n,qc.empty())}bn(e){for(const n of this.pn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===s}Dn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){var e,n;if(re(t instanceof we||t instanceof Ae,20012),t instanceof we){if(t instanceof BT){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>we.create(t.field,"==",i)))||[];return Ae.create(r,"or")}return t}const s=t.filters.map(r=>wI(r));return Ae.create(s,t.op)}function n3(t){if(t.getFilters().length===0)return[];const e=pp(wI(t));return re(EI(e),7391),fp(e)||mp(e)?[e]:e.getFilters()}function fp(t){return t instanceof we}function mp(t){return t instanceof Ae&&Gg(t)}function EI(t){return fp(t)||mp(t)||function(n){if(n instanceof Ae&&rp(n)){for(const s of n.getFilters())if(!fp(s)&&!mp(s))return!1;return!0}return!1}(t)}function pp(t){if(re(t instanceof we||t instanceof Ae,34018),t instanceof we)return t;if(t.filters.length===1)return pp(t.filters[0]);const e=t.filters.map(s=>pp(s));let n=Ae.create(e,t.op);return n=Ld(n),EI(n)?n:(re(n instanceof Ae,64498),re(Qo(n),40251),re(n.filters.length>1,57927),n.filters.reduce((s,r)=>Zg(s,r)))}function Zg(t,e){let n;return re(t instanceof we||t instanceof Ae,38388),re(e instanceof we||e instanceof Ae,25473),n=t instanceof we?e instanceof we?function(r,i){return Ae.create([r,i],"and")}(t,e):zw(t,e):e instanceof we?zw(e,t):function(r,i){if(re(r.filters.length>0&&i.filters.length>0,48005),Qo(r)&&Qo(i))return FT(r,i.getFilters());const o=rp(r)?r:i,a=rp(r)?i:r,c=o.filters.map(d=>Zg(d,a));return Ae.create(c,"or")}(t,e),Ld(n)}function zw(t,e){if(Qo(e))return FT(e,t.getFilters());{const n=e.filters.map(s=>Zg(t,s));return Ae.create(n,"or")}}function Ld(t){if(re(t instanceof we||t instanceof Ae,11850),t instanceof we)return t;const e=t.getFilters();if(e.length===1)return Ld(e[0]);if(MT(t))return t;const n=e.map(r=>Ld(r)),s=[];return n.forEach(r=>{r instanceof we?s.push(r):r instanceof Ae&&(r.op===t.op?s.push(...r.filters):s.push(r))}),s.length===1?s[0]:Ae.create(s,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.Cn=new ey}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(un.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(un.min())}updateCollectionGroup(e,n,s){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class ey{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Ne(Se.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ne(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="IndexedDbIndexManager",du=new Uint8Array(0);class r3{constructor(e,n){this.databaseId=n,this.Fn=new ey,this.Mn=new Os(s=>Pi(s),(s,r)=>gl(s,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Fn.has(n)){const s=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.Fn.add(n)});const i={collectionId:s,parent:Vt(r)};return Bw(e).put(i)}return V.resolve()}getCollectionParents(e,n){const s=[],r=IDBKeyRange.bound([n,""],[dT(n),""],!1,!0);return Bw(e).J(r).next(i=>{for(const o of i){if(o.collectionId!==n)break;s.push(Gn(o.parent))}return s})}addFieldIndex(e,n){const s=Ua(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const i=s.add(r);if(n.indexState){const o=no(e);return i.next(a=>{o.put(Dw(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const s=Ua(e),r=no(e),i=to(e);return s.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Ua(e),s=to(e),r=no(e);return n.X().next(()=>s.X()).next(()=>r.X())}createTargetIndexes(e,n){return V.forEach(this.xn(n),s=>this.getIndexType(e,s).next(r=>{if(r===0||r===1){const i=new Fw(s).vn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const s=to(e);let r=!0;const i=new Map;return V.forEach(this.xn(n),o=>this.On(e,o).next(a=>{r&&(r=!!a),i.set(o,a)})).next(()=>{if(r){let o=ye();const a=[];return V.forEach(i,(c,d)=>{q(Uw,`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(c)} to execute ${Pi(n)}`);const f=function(b,D){const L=Xm(D);if(L===void 0)return null;for(const M of jd(b,L.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(d,c),m=function(b,D){const L=new Map;for(const M of ti(D))for(const E of jd(b,M.fieldPath))switch(E.op){case"==":case"in":L.set(M.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return L.set(M.fieldPath.canonicalString(),E.value),Array.from(L.values())}return null}(d,c),g=function(b,D){const L=[];let M=!0;for(const E of ti(D)){const y=E.kind===0?_w(b,E.fieldPath,b.startAt):ww(b,E.fieldPath,b.startAt);L.push(y.value),M&&(M=y.inclusive)}return new Ko(L,M)}(d,c),T=function(b,D){const L=[];let M=!0;for(const E of ti(D)){const y=E.kind===0?ww(b,E.fieldPath,b.endAt):_w(b,E.fieldPath,b.endAt);L.push(y.value),M&&(M=y.inclusive)}return new Ko(L,M)}(d,c),S=this.Nn(c,d,g),A=this.Nn(c,d,T),C=this.Bn(c,d,m),x=this.Ln(c.indexId,f,S,g.inclusive,A,T.inclusive,C);return V.forEach(x,v=>s.Z(v,n.limit).next(b=>{b.forEach(D=>{const L=Y.fromSegments(D.documentKey);o.has(L)||(o=o.add(L),a.push(L))})}))}).next(()=>a)}return V.resolve(null)})}xn(e){let n=this.Mn.get(e);return n||(e.filters.length===0?n=[e]:n=n3(Ae.create(e.filters,"and")).map(s=>op(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,n),n)}Ln(e,n,s,r,i,o,a){const c=(n!=null?n.length:1)*Math.max(s.length,i.length),d=c/(n!=null?n.length:1),f=[];for(let m=0;m<c;++m){const g=n?this.kn(n[m/d]):du,T=this.qn(e,g,s[m%d],r),S=this.Qn(e,g,i[m%d],o),A=a.map(C=>this.qn(e,g,C,!0));f.push(...this.createRange(T,S,A))}return f}qn(e,n,s,r){const i=new oi(e,Y.empty(),n,s);return r?i:i.Rn()}Qn(e,n,s,r){const i=new oi(e,Y.empty(),n,s);return r?i.Rn():i}On(e,n){const s=new Fw(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(i=>{let o=null;for(const a of i)s.wn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let s=2;const r=this.xn(n);return V.forEach(r,i=>this.On(e,i).next(o=>{o?s!==0&&o.fields.length<function(c){let d=new Ne($e.comparator),f=!1;for(const m of c.filters)for(const g of m.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:d=d.add(g.field));for(const m of c.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(f?1:0)}(i)&&(s=1):s=0})).next(()=>function(o){return o.limit!==null}(n)&&r.length>1&&s===2?1:s)}$n(e,n){const s=new za;for(const r of ti(e)){const i=n.data.field(r.fieldPath);if(i==null)return null;const o=s.Tn(r.kind);ii.Wt.vt(i,o)}return s.cn()}kn(e){const n=new za;return ii.Wt.vt(e,n.Tn(0)),n.cn()}Un(e,n){const s=new za;return ii.Wt.vt(Xc(this.databaseId,n),s.Tn(function(i){const o=ti(i);return o.length===0?0:o[o.length-1].kind}(e))),s.cn()}Bn(e,n,s){if(s===null)return[];let r=[];r.push(new za);let i=0;for(const o of ti(e)){const a=s[i++];for(const c of r)if(this.Kn(n,o.fieldPath)&&Jc(a))r=this.Wn(r,o,a);else{const d=c.Tn(o.kind);ii.Wt.vt(a,d)}}return this.Gn(r)}Nn(e,n,s){return this.Bn(e,n,s.position)}Gn(e){const n=[];for(let s=0;s<e.length;++s)n[s]=e[s].cn();return n}Wn(e,n,s){const r=[...e],i=[];for(const o of s.arrayValue.values||[])for(const a of r){const c=new za;c.seed(a.cn()),ii.Wt.vt(o,c.Tn(n.kind)),i.push(c)}return i}Kn(e,n){return!!e.filters.find(s=>s instanceof we&&s.field.isEqual(n)&&(s.op==="in"||s.op==="not-in"))}getFieldIndexes(e,n){const s=Ua(e),r=no(e);return(n?s.J(Zm,IDBKeyRange.bound(n,n)):s.J()).next(i=>{const o=[];return V.forEach(i,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const g=m?new qc(m.sequenceNumber,new un(Ci(m.readTime),new Y(Gn(m.documentKey)),m.largestBatchId)):qc.empty(),T=f.fields.map(([S,A])=>new Ou($e.fromServerFormat(S),A));return new Ad(f.indexId,f.collectionGroup,T,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((s,r)=>{const i=s.indexState.sequenceNumber-r.indexState.sequenceNumber;return i!==0?i:de(s.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,s){const r=Ua(e),i=no(e);return this.zn(e).next(o=>r.J(Zm,IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,c=>i.put(Dw(c.indexId,this.uid,o,s)))))}updateIndexEntries(e,n){const s=new Map;return V.forEach(n,(r,i)=>{const o=s.get(r.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(s.set(r.collectionGroup,a),V.forEach(a,c=>this.jn(e,r,c).next(d=>{const f=this.Hn(i,c);return d.isEqual(f)?V.resolve():this.Jn(e,i,c,d,f)}))))})}Yn(e,n,s,r){return to(e).put(r.Vn(this.uid,this.Un(s,n.key),n.key))}Zn(e,n,s,r){return to(e).delete(r.mn(this.uid,this.Un(s,n.key),n.key))}jn(e,n,s){const r=to(e);let i=new Ne(Hs);return r.te({index:wT,range:IDBKeyRange.only([s.indexId,this.uid,qu(this.Un(s,n))])},(o,a)=>{i=i.add(new oi(s.indexId,n,Lw(a.arrayValue),Lw(a.directionalValue)))}).next(()=>i)}Hn(e,n){let s=new Ne(Hs);const r=this.$n(n,e);if(r==null)return s;const i=Xm(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Jc(o))for(const a of o.arrayValue.values||[])s=s.add(new oi(n.indexId,e.key,this.kn(a),r))}else s=s.add(new oi(n.indexId,e.key,du,r));return s}Jn(e,n,s,r,i){q(Uw,"Updating index entries for document '%s'",n.key);const o=[];return function(c,d,f,m,g){const T=c.getIterator(),S=d.getIterator();let A=Zi(T),C=Zi(S);for(;A||C;){let x=!1,v=!1;if(A&&C){const b=f(A,C);b<0?v=!0:b>0&&(x=!0)}else A!=null?v=!0:x=!0;x?(m(C),C=Zi(S)):v?(g(A),A=Zi(T)):(A=Zi(T),C=Zi(S))}}(r,i,Hs,a=>{o.push(this.Yn(e,n,s,a))},a=>{o.push(this.Zn(e,n,s,a))}),V.waitFor(o)}zn(e){let n=1;return no(e).te({index:_T,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,r,i)=>{i.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,s){s=s.sort((o,a)=>Hs(o,a)).filter((o,a,c)=>!a||Hs(o,c[a-1])!==0);const r=[];r.push(e);for(const o of s){const a=Hs(o,e),c=Hs(o,n);if(a===0)r[0]=e.Rn();else if(a>0&&c<0)r.push(o),r.push(o.Rn());else if(c>0)break}r.push(n);const i=[];for(let o=0;o<r.length;o+=2){if(this.Xn(r[o],r[o+1]))return[];const a=r[o].mn(this.uid,du,Y.empty()),c=r[o+1].mn(this.uid,du,Y.empty());i.push(IDBKeyRange.bound(a,c))}return i}Xn(e,n){return Hs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($w)}getMinOffset(e,n){return V.mapArray(this.xn(n),s=>this.On(e,s).next(r=>r||te(44426))).next($w)}}function Bw(t){return ut(t,Kc)}function to(t){return ut(t,gc)}function Ua(t){return ut(t,zg)}function no(t){return ut(t,pc)}function $w(t){re(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let s=1;s<t.length;s++){const r=t[s].indexState.offset;Mg(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new un(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TI=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t,e,n){const s=t.store(jn),r=t.store(Bo),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=s.te({range:o},(f,m,g)=>(a++,g.delete()));i.push(c.next(()=>{re(a===1,47070,{batchId:n.batchId})}));const d=[];for(const f of n.mutations){const m=gT(e,f.key.path,n.batchId);i.push(r.delete(m)),d.push(f.key)}return V.waitFor(i).next(()=>d)}function Fd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(TI,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);class Dh{constructor(e,n,s,r){this.userId=e,this.serializer=n,this.indexManager=s,this.referenceDelegate=r,this.er={}}static bt(e,n,s,r){re(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Dh(i,n,s,r)}checkEmpty(e){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ks(e).te({index:ui,range:s},(r,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,s,r){const i=co(e),o=Ks(e);return o.add({}).next(a=>{re(typeof a=="number",49019);const c=new Kg(a,n,s,r),d=function(T,S,A){const C=A.baseMutations.map(v=>Od(T.wt,v)),x=A.mutations.map(v=>Od(T.wt,v));return{userId:S,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:C,mutations:x}}(this.serializer,this.userId,c),f=[];let m=new Ne((g,T)=>de(g.canonicalString(),T.canonicalString()));for(const g of r){const T=gT(this.userId,g.key.path,a);m=m.add(g.key.path.popLast()),f.push(o.put(d)),f.push(i.put(T,DR))}return m.forEach(g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.er[a]=c.keys()}),V.waitFor(f).next(()=>c)})}lookupMutationBatch(e,n){return Ks(e).get(n).next(s=>s?(re(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:n}),ri(this.serializer,s)):null)}tr(e,n){return this.er[n]?V.resolve(this.er[n]):this.lookupMutationBatch(e,n).next(s=>{if(s){const r=s.keys();return this.er[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=IDBKeyRange.lowerBound([this.userId,s]);let i=null;return Ks(e).te({index:ui,range:r},(o,a,c)=>{a.userId===this.userId&&(re(a.batchId>=s,47524,{nr:s}),i=ri(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=mi;return Ks(e).te({index:ui,range:n,reverse:!0},(r,i,o)=>{s=i.batchId,o.done()}).next(()=>s)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,mi],[this.userId,Number.POSITIVE_INFINITY]);return Ks(e).J(ui,n).next(s=>s.map(r=>ri(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const s=Mu(this.userId,n.path),r=IDBKeyRange.lowerBound(s),i=[];return co(e).te({range:r},(o,a,c)=>{const[d,f,m]=o,g=Gn(f);if(d===this.userId&&n.path.isEqual(g))return Ks(e).get(m).next(T=>{if(!T)throw te(61480,{rr:o,batchId:m});re(T.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:T.userId,batchId:m}),i.push(ri(this.serializer,T))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ne(de);const r=[];return n.forEach(i=>{const o=Mu(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=co(e).te({range:a},(d,f,m)=>{const[g,T,S]=d,A=Gn(T);g===this.userId&&i.path.isEqual(A)?s=s.add(S):m.done()});r.push(c)}),V.waitFor(r).next(()=>this.ir(e,s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1,i=Mu(this.userId,s),o=IDBKeyRange.lowerBound(i);let a=new Ne(de);return co(e).te({range:o},(c,d,f)=>{const[m,g,T]=c,S=Gn(g);m===this.userId&&s.isPrefixOf(S)?S.length===r&&(a=a.add(T)):f.done()}).next(()=>this.ir(e,a))}ir(e,n){const s=[],r=[];return n.forEach(i=>{r.push(Ks(e).get(i).next(o=>{if(o===null)throw te(35274,{batchId:i});re(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),s.push(ri(this.serializer,o))}))}),V.waitFor(r).next(()=>s)}removeMutationBatch(e,n){return II(e.he,this.userId,n).next(s=>(e.addOnCommittedListener(()=>{this.sr(n.batchId)}),V.forEach(s,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const s=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return co(e).te({range:s},(i,o,a)=>{if(i[0]===this.userId){const c=Gn(i[1]);r.push(c)}else a.done()}).next(()=>{re(r.length===0,56720,{_r:r.map(i=>i.canonicalString())})})})}containsKey(e,n){return xI(e,this.userId,n)}ar(e){return bI(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:mi,lastStreamToken:""})}}function xI(t,e,n){const s=Mu(e,n.path),r=s[1],i=IDBKeyRange.lowerBound(s);let o=!1;return co(t).te({range:i,ee:!0},(a,c,d)=>{const[f,m,g]=a;f===e&&m===r&&(o=!0),d.done()}).next(()=>o)}function Ks(t){return ut(t,jn)}function co(t){return ut(t,Bo)}function bI(t){return ut(t,Gc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ri(0)}static lr(){return new Ri(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.hr(e).next(n=>{const s=new Ri(n.highestTargetId);return n.highestTargetId=s.next(),this.Pr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(n=>ae.fromTimestamp(new Ge(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,s){return this.hr(e).next(r=>(r.highestListenSequenceNumber=n,s&&(r.lastRemoteSnapshotVersion=s.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Pr(e,r)))}addTargetData(e,n){return this.Tr(e,n).next(()=>this.hr(e).next(s=>(s.targetCount+=1,this.Ir(n,s),this.Pr(e,s))))}updateTargetData(e,n){return this.Tr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>so(e).delete(n.targetId)).next(()=>this.hr(e)).next(s=>(re(s.targetCount>0,8065),s.targetCount-=1,this.Pr(e,s)))}removeTargets(e,n,s){let r=0;const i=[];return so(e).te((o,a)=>{const c=ec(a);c.sequenceNumber<=n&&s.get(c.targetId)===null&&(r++,i.push(this.removeTargetData(e,c)))}).next(()=>V.waitFor(i)).next(()=>r)}forEachTarget(e,n){return so(e).te((s,r)=>{const i=ec(r);n(i)})}hr(e){return Ww(e).get(Cd).next(n=>(re(n!==null,2888),n))}Pr(e,n){return Ww(e).put(Cd,n)}Tr(e,n){return so(e).put(vI(this.serializer,n))}Ir(e,n){let s=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,s=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.hr(e).next(n=>n.targetCount)}getTargetData(e,n){const s=Pi(n),r=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let i=null;return so(e).te({range:r,index:vT},(o,a,c)=>{const d=ec(a);gl(n,d.target)&&(i=d,c.done())}).next(()=>i)}addMatchingKeys(e,n,s){const r=[],i=ir(e);return n.forEach(o=>{const a=Vt(o.path);r.push(i.put({targetId:s,path:a})),r.push(this.referenceDelegate.addReference(e,s,o))}),V.waitFor(r)}removeMatchingKeys(e,n,s){const r=ir(e);return V.forEach(n,i=>{const o=Vt(i.path);return V.waitFor([r.delete([s,o]),this.referenceDelegate.removeReference(e,s,i)])})}removeMatchingKeysForTargetId(e,n){const s=ir(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(r)}getMatchingKeysForTargetId(e,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),r=ir(e);let i=ye();return r.te({range:s,ee:!0},(o,a,c)=>{const d=Gn(o[1]),f=new Y(d);i=i.add(f)}).next(()=>i)}containsKey(e,n){const s=Vt(n.path),r=IDBKeyRange.bound([s],[dT(s)],!1,!0);let i=0;return ir(e).te({index:Fg,ee:!0,range:r},([o,a],c,d)=>{o!==0&&(i++,d.done())}).next(()=>i>0)}Rt(e,n){return so(e).get(n).next(s=>s?ec(s):null)}}function so(t){return ut(t,$o)}function Ww(t){return ut(t,pi)}function ir(t){return ut(t,qo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="LruGarbageCollector",o3=1048576;function Hw([t,e],[n,s]){const r=de(t,n);return r===0?de(e,s):r}class a3{constructor(e){this.Er=e,this.buffer=new Ne(Hw),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Hw(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){q(Gw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mr(n)?q(Gw,"Ignoring IndexedDB error during garbage collection: ",n):await Li(n)}await this.mr(3e5)})}}class c3{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return V.resolve(vn.le);const s=new a3(n);return this.gr.forEachTarget(e,r=>s.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>s.Rr(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(qw)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qw):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,r,i,o,a,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,o=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(s=m,a=Date.now(),this.removeTargets(e,s,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),ro()<=_e.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:m})))}}function SI(t,e){return new c3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.db=e,this.garbageCollector=SI(this,n)}pr(e){const n=this.br(e);return this.db.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}yr(e,n){return this.Sr(e,(s,r)=>n(r))}addReference(e,n,s){return hu(e,s)}removeReference(e,n,s){return hu(e,s)}removeTargets(e,n,s){return this.db.getTargetCache().removeTargets(e,n,s)}markPotentiallyOrphaned(e,n){return hu(e,n)}Dr(e,n){return function(r,i){let o=!1;return bI(r).ne(a=>xI(r,a,i).next(c=>(c&&(o=!0),V.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const c=this.Dr(e,o).next(d=>{if(!d)return i++,s.getEntry(e,o).next(()=>(s.removeEntry(o,ae.min()),ir(e).delete(function(m){return[0,Vt(m.path)]}(o))))});r.push(c)}}).next(()=>V.waitFor(r)).next(()=>s.apply(e)).next(()=>i)}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,n){return hu(e,n)}Sr(e,n){const s=ir(e);let r,i=vn.le;return s.te({index:Fg},([o,a],{path:c,sequenceNumber:d})=>{o===0?(i!==vn.le&&n(new Y(Gn(r)),i),i=d,r=c):i=vn.le}).next(()=>{i!==vn.le&&n(new Y(Gn(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hu(t,e){return ir(t).put(function(s,r){return{targetId:0,path:Vt(s.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.changes=new Os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ye.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?V.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,s){return Xr(e).put(s)}removeEntry(e,n,s){return Xr(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Md(o),a[a.length-1]]}(n,s))}updateMetadata(e,n){return this.getMetadata(e).next(s=>(s.byteSize+=n,this.vr(e,s)))}getEntry(e,n){let s=Ye.newInvalidDocument(n);return Xr(e).te({index:Lu,range:IDBKeyRange.only(Ba(n))},(r,i)=>{s=this.Cr(n,i)}).next(()=>s)}Fr(e,n){let s={size:0,document:Ye.newInvalidDocument(n)};return Xr(e).te({index:Lu,range:IDBKeyRange.only(Ba(n))},(r,i)=>{s={document:this.Cr(n,i),size:Fd(i)}}).next(()=>s)}getEntries(e,n){let s=an();return this.Mr(e,n,(r,i)=>{const o=this.Cr(r,i);s=s.insert(r,o)}).next(()=>s)}Or(e,n){let s=an(),r=new Ue(Y.comparator);return this.Mr(e,n,(i,o)=>{const a=this.Cr(i,o);s=s.insert(i,a),r=r.insert(i,Fd(o))}).next(()=>({documents:s,Nr:r}))}Mr(e,n,s){if(n.isEmpty())return V.resolve();let r=new Ne(Yw);n.forEach(c=>r=r.add(c));const i=IDBKeyRange.bound(Ba(r.first()),Ba(r.last())),o=r.getIterator();let a=o.getNext();return Xr(e).te({index:Lu,range:i},(c,d,f)=>{const m=Y.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&Yw(a,m)<0;)s(a,null),a=o.getNext();a&&a.isEqual(m)&&(s(a,d),a=o.hasNext()?o.getNext():null),a?f.H(Ba(a)):f.done()}).next(()=>{for(;a;)s(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,s,r,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Md(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xr(e).J(IDBKeyRange.bound(a,c,!0)).next(d=>{i==null||i.incrementDocumentReadCount(d.length);let f=an();for(const m of d){const g=this.Cr(Y.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);g.isFoundDocument()&&(yl(n,g)||r.has(g.key))&&(f=f.insert(g.key,g))}return f})}getAllFromCollectionGroup(e,n,s,r){let i=an();const o=Qw(n,s),a=Qw(n,un.max());return Xr(e).te({index:yT,range:IDBKeyRange.bound(o,a,!0)},(c,d,f)=>{const m=this.Cr(Y.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);i=i.insert(m.key,m),i.size===r&&f.done()}).next(()=>i)}newChangeBuffer(e){return new d3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Kw(e).get(Jm).next(n=>(re(!!n,20021),n))}vr(e,n){return Kw(e).put(Jm,n)}Cr(e,n){if(n){const s=QD(this.serializer,n);if(!(s.isNoDocument()&&s.version.isEqual(ae.min())))return s}return Ye.newInvalidDocument(e)}}function PI(t){return new u3(t)}class d3 extends AI{constructor(e,n){super(),this.Br=e,this.trackRemovals=n,this.Lr=new Os(s=>s.toString(),(s,r)=>s.isEqual(r))}applyChanges(e){const n=[];let s=0,r=new Ne((i,o)=>de(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Lr.get(i);if(n.push(this.Br.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=Cw(this.Br.serializer,o);r=r.add(i.path.popLast());const d=Fd(c);s+=d-a.size,n.push(this.Br.addEntry(e,i,c))}else if(s-=a.size,this.trackRemovals){const c=Cw(this.Br.serializer,o.convertToNoDocument(ae.min()));n.push(this.Br.addEntry(e,i,c))}}),r.forEach(i=>{n.push(this.Br.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Br.updateMetadata(e,s)),V.waitFor(n)}getFromCache(e,n){return this.Br.Fr(e,n).next(s=>(this.Lr.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,n){return this.Br.Or(e,n).next(({documents:s,Nr:r})=>(r.forEach((i,o)=>{this.Lr.set(i,{size:o,readTime:s.get(i).readTime})}),s))}}function Kw(t){return ut(t,Hc)}function Xr(t){return ut(t,Nd)}function Ba(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Qw(t,e){const n=e.documentKey.path.toArray();return[t,Md(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Yw(t,e){const n=t.path.toArray(),s=e.path.toArray();let r=0;for(let i=0;i<n.length-2&&i<s.length-2;++i)if(r=de(n[i],s[i]),r)return r;return r=de(n.length,s.length),r||(r=de(n[n.length-2],s[s.length-2]),r||de(n[n.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&wc(s.mutation,r,Kt.empty(),Ge.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ye()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ye()){const r=Hn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Ja();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Hn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ye()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=an();const o=_c(),a=function(){return _c()}();return n.forEach((c,d)=>{const f=s.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof Ms)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),wc(f.mutation,d,f.mutation.getFieldMask(),Ge.now())):o.set(d.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return a.set(d,new h3(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const s=_c();let r=new Ue((o,a)=>o-a),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=s.get(c)||Kt.empty();f=a.applyToLocalView(d,f),s.set(c,f);const m=(r.get(a.batchId)||ye()).add(c);r=r.insert(a.batchId,m)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),d=c.key,f=c.value,m=KT();f.forEach(g=>{if(!i.has(g)){const T=eI(n.get(g),s.get(g));T!==null&&m.set(g,T),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return V.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$T(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):V.resolve(Hn());let a=$c,c=i;return o.next(d=>V.forEach(d,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(f)?V.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ye())).next(f=>({batchId:a,changes:HT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(s=>{let r=Ja();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Ja();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,c=>{const d=function(m,g){return new ua(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,r).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Ye.newInvalidDocument(f)))});let a=Ja();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&wc(f.mutation,d,Kt.empty(),Ge.now()),yl(n,d)&&(a=a.insert(c,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return V.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ut(r.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:_I(r.bundledQuery),readTime:Ut(r.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this.overlays=new Ue(Y.comparator),this.Qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Hn();return V.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),V.resolve()}getOverlaysForCollection(e,n,s){const r=Hn(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return V.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ue((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let f=i.get(d.largestBatchId);f===null&&(f=Hn(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=Hn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=r)););return V.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(s.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Yg(n,s));let i=this.Qr.get(n);i===void 0&&(i=ye(),this.Qr.set(n,i)),this.Qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.$r=new Ne(ht.Ur),this.Kr=new Ne(ht.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new ht(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new ht(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Y(new Se([])),s=new ht(n,e),r=new ht(n,e+1),i=[];return this.Kr.forEachInRange([s,r],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Y(new Se([])),s=new ht(n,e),r=new ht(n,e+1);let i=ye();return this.Kr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ht(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ht{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Y.comparator(e.key,n.key)||de(e.Zr,n.Zr)}static Wr(e,n){return de(e.Zr,n.Zr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ne(ht.Ur)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Kg(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Xr=this.Xr.add(new ht(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ti(s),i=r<0?0:r;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?mi:this.nr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ht(n,0),r=new ht(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,r],o=>{const a=this.ei(o.Zr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ne(de);return n.forEach(r=>{const i=new ht(r,0),o=new ht(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{s=s.add(a.Zr)})}),V.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Y.isDocumentKey(i)||(i=i.child(""));const o=new ht(new Y(i),0);let a=new Ne(de);return this.Xr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===r&&(a=a.add(c.Zr)),!0)},o),V.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(s=>{const r=this.ei(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){re(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return V.forEach(n.mutations,r=>{const i=new ht(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new ht(n,0),r=this.Xr.firstAfterOrEqual(s);return V.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this.ii=e,this.docs=function(){return new Ue(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return V.resolve(s?s.document.mutableCopy():Ye.newInvalidDocument(n))}getEntries(e,n){let s=an();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ye.newInvalidDocument(r))}),V.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=an();const o=n.path,a=new Y(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Mg(hT(f),s)<=0||(r.has(f.key)||yl(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,s,r){te(9500)}si(e,n){return V.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new v3(this)}getSize(e){return V.resolve(this.size)}}class v3 extends AI{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(s)}),V.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.persistence=e,this.oi=new Os(n=>Pi(n),gl),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this._i=0,this.ai=new ty,this.targetCount=0,this.ui=Ri.cr()}forEachTarget(e,n){return this.oi.forEach((s,r)=>n(r)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),V.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ri(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Tr(n),V.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),V.waitFor(i).next(()=>r)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return V.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),V.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return V.resolve(s)}containsKey(e,n){return V.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){this.ci={},this.overlays={},this.li=new vn(0),this.hi=!1,this.hi=!0,this.Pi=new p3,this.referenceDelegate=e(this),this.Ti=new _3(this),this.indexManager=new s3,this.remoteDocumentCache=function(r){return new y3(r)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new yI(n),this.Ei=new f3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new m3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new g3(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){q("MemoryPersistence","Starting transaction:",e);const r=new w3(this.li.next());return this.referenceDelegate.di(),s(r).next(i=>this.referenceDelegate.Ai(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ri(e,n){return V.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class w3 extends mT{constructor(e){super(),this.currentSequenceNumber=e}}class jh{constructor(e){this.persistence=e,this.Vi=new ty,this.mi=null}static fi(e){return new jh(e)}get gi(){if(this.mi)return this.mi;throw te(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),V.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.gi,s=>{const r=Y.fromPath(s);return this.pi(e,r).next(i=>{i||n.removeEntry(r,ae.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return V.or([()=>V.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class zd{constructor(e,n){this.persistence=e,this.yi=new Os(s=>Vt(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=SI(this,n)}static fi(e,n){return new zd(e,n)}di(){}Ai(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return V.forEach(this.yi,(s,r)=>this.Dr(e,s,r).next(i=>i?V.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,o=>this.Dr(e,o,n).next(a=>{a||(s++,i.removeEntry(o,ae.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),V.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),V.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zu(e.data.value)),n}Dr(e,n,s){return V.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return V.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.serializer=e}q(e,n,s,r){const i=new _h("createOrUpgrade",n);s<1&&r>=1&&(function(c){c.createObjectStore(pl)}(e),function(c){c.createObjectStore(Gc,{keyPath:RR}),c.createObjectStore(jn,{keyPath:aw,autoIncrement:!0}).createIndex(ui,cw,{unique:!0}),c.createObjectStore(Bo)}(e),Xw(e),function(c){c.createObjectStore(ni)}(e));let o=V.resolve();return s<3&&r>=3&&(s!==0&&(function(c){c.deleteObjectStore(qo),c.deleteObjectStore($o),c.deleteObjectStore(pi)}(e),Xw(e)),o=o.next(()=>function(c){const d=c.store(pi),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return d.put(Cd,f)}(i))),s<4&&r>=4&&(s!==0&&(o=o.next(()=>function(c,d){return d.store(jn).J().next(m=>{c.deleteObjectStore(jn),c.createObjectStore(jn,{keyPath:aw,autoIncrement:!0}).createIndex(ui,cw,{unique:!0});const g=d.store(jn),T=m.map(S=>g.put(S));return V.waitFor(T)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore(Wo,{keyPath:UR})})(e)})),s<5&&r>=5&&(o=o.next(()=>this.wi(i))),s<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore(Hc)}(e),this.bi(i)))),s<7&&r>=7&&(o=o.next(()=>this.Si(i))),s<8&&r>=8&&(o=o.next(()=>this.Di(e,i))),s<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),s<10&&r>=10&&(o=o.next(()=>this.Ci(i))),s<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(Eh,{keyPath:BR})})(e),function(c){c.createObjectStore(Th,{keyPath:$R})}(e)})),s<12&&r>=12&&(o=o.next(()=>{(function(c){const d=c.createObjectStore(Ih,{keyPath:YR});d.createIndex(ep,XR,{unique:!1}),d.createIndex(ET,JR,{unique:!1})})(e)})),s<13&&r>=13&&(o=o.next(()=>function(c){const d=c.createObjectStore(Nd,{keyPath:jR});d.createIndex(Lu,VR),d.createIndex(yT,OR)}(e)).next(()=>this.Fi(e,i)).next(()=>e.deleteObjectStore(ni))),s<14&&r>=14&&(o=o.next(()=>this.Mi(e,i))),s<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore(zg,{keyPath:qR,autoIncrement:!0}).createIndex(Zm,WR,{unique:!1}),c.createObjectStore(pc,{keyPath:GR}).createIndex(_T,HR,{unique:!1}),c.createObjectStore(gc,{keyPath:KR}).createIndex(wT,QR,{unique:!1})}(e))),s<16&&r>=16&&(o=o.next(()=>{n.objectStore(pc).clear()}).next(()=>{n.objectStore(gc).clear()})),s<17&&r>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(Ug,{keyPath:ZR})})(e)})),s<18&&r>=18&&uE()&&(o=o.next(()=>{n.objectStore(pc).clear()}).next(()=>{n.objectStore(gc).clear()})),o}bi(e){let n=0;return e.store(ni).te((s,r)=>{n+=Fd(r)}).next(()=>{const s={byteSize:n};return e.store(Hc).put(Jm,s)})}wi(e){const n=e.store(Gc),s=e.store(jn);return n.J().next(r=>V.forEach(r,i=>{const o=IDBKeyRange.bound([i.userId,mi],[i.userId,i.lastAcknowledgedBatchId]);return s.J(ui,o).next(a=>V.forEach(a,c=>{re(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const d=ri(this.serializer,c);return II(e,i.userId,d).next(()=>{})}))}))}Si(e){const n=e.store(qo),s=e.store(ni);return e.store(pi).get(Cd).next(r=>{const i=[];return s.te((o,a)=>{const c=new Se(o),d=function(m){return[0,Vt(m)]}(c);i.push(n.get(d).next(f=>f?V.resolve():(m=>n.put({targetId:0,path:Vt(m),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>V.waitFor(i))})}Di(e,n){e.createObjectStore(Kc,{keyPath:zR});const s=n.store(Kc),r=new ey,i=o=>{if(r.add(o)){const a=o.lastSegment(),c=o.popLast();return s.put({collectionId:a,parent:Vt(c)})}};return n.store(ni).te({ee:!0},(o,a)=>{const c=new Se(o);return i(c.popLast())}).next(()=>n.store(Bo).te({ee:!0},([o,a,c],d)=>{const f=Gn(a);return i(f.popLast())}))}Ci(e){const n=e.store($o);return n.te((s,r)=>{const i=ec(r),o=vI(this.serializer,i);return n.put(o)})}Fi(e,n){const s=n.store(ni),r=[];return s.te((i,o)=>{const a=n.store(Nd),c=function(m){return m.document?new Y(Se.fromString(m.document.name).popFirst(5)):m.noDocument?Y.fromSegments(m.noDocument.path):m.unknownDocument?Y.fromSegments(m.unknownDocument.path):te(36783)}(o).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(d))}).next(()=>V.waitFor(r))}Mi(e,n){const s=n.store(jn),r=PI(this.serializer),i=new ny(jh.fi,this.serializer.wt);return s.J().next(o=>{const a=new Map;return o.forEach(c=>{var d;let f=(d=a.get(c.userId))!==null&&d!==void 0?d:ye();ri(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),V.forEach(a,(c,d)=>{const f=new _t(d),m=Rh.bt(this.serializer,f),g=i.getIndexManager(f),T=Dh.bt(f,this.serializer,g,i.referenceDelegate);return new NI(r,T,m,g).recalculateAndSaveOverlaysForDocumentKeys(new tp(n,vn.le),c).next()})})}}function Xw(t){t.createObjectStore(qo,{keyPath:LR}).createIndex(Fg,FR,{unique:!0}),t.createObjectStore($o,{keyPath:"targetId"}).createIndex(vT,MR,{unique:!0}),t.createObjectStore(pi)}const Qs="IndexedDbPersistence",Vf=18e5,Of=5e3,Mf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",T3="main";class sy{constructor(e,n,s,r,i,o,a,c,d,f,m=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=s,this.xi=i,this.window=o,this.document=a,this.Oi=d,this.Ni=f,this.Bi=m,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=g=>Promise.resolve(),!sy.C())throw new Q(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new l3(this,r),this.Ui=n+T3,this.serializer=new yI(c),this.Ki=new Tr(this.Ui,this.Bi,new E3(this.serializer)),this.Pi=new XD,this.Ti=new i3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PI(this.serializer),this.Ei=new YD,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,f===!1&&Ft(Qs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(z.FAILED_PRECONDITION,Mf);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new vn(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(n=>{n||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(n=>this.isPrimary&&!n?this.Xi(e).next(()=>!1):!!n&&this.es(e).next(()=>!0))).catch(e=>{if(Mr(e))return q(Qs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q(Qs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return $a(e).get(Ji).next(n=>V.resolve(this.ts(n)))}ns(e){return fu(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Vf)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const s=ut(n,Wo);return s.J().next(r=>{const i=this._s(r,Vf),o=r.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>s.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Wi)for(const n of e)this.Wi.removeItem(this.us(n.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?V.resolve(!0):$a(e).get(Ji).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,Of)&&!this.cs(n.ownerId)){if(this.ts(n)&&this.networkEnabled)return!0;if(!this.ts(n)){if(!n.allowTabSynchronization)throw new Q(z.FAILED_PRECONDITION,Mf);return!1}}return!(!this.networkEnabled||!this.inForeground)||fu(e).J().next(s=>this._s(s,Of).find(r=>{if(this.clientId!==r.clientId){const i=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q(Qs,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[pl,Wo],e=>{const n=new tp(e,vn.le);return this.Xi(n).next(()=>this.ns(n))}),this.Ki.close(),this.Ts()}_s(e,n){return e.filter(s=>this.ss(s.updateTimeMs,n)&&!this.cs(s.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>fu(e).J().next(n=>this._s(n,Vf).map(s=>s.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,n){return Dh.bt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new r3(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Rh.bt(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,n,s){q(Qs,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",i=function(c){return c===18?nD:c===17?bT:c===16?tD:c===15?Bg:c===14?xT:c===13?IT:c===12?eD:c===11?TT:void te(60245)}(this.Bi);let o;return this.Ki.runTransaction(e,r,i,a=>(o=new tp(a,this.li?this.li.next():vn.le),n==="readwrite-primary"?this.Yi(o).next(c=>!!c||this.Zi(o)).next(c=>{if(!c)throw Ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new Q(z.FAILED_PRECONDITION,fT);return s(o)}).next(c=>this.es(o).next(()=>c)):this.Es(o).next(()=>s(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Es(e){return $a(e).get(Ji).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,Of)&&!this.cs(n.ownerId)&&!this.ts(n)&&!(this.Ni||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Q(z.FAILED_PRECONDITION,Mf)})}es(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $a(e).put(Ji,n)}static C(){return Tr.C()}Xi(e){const n=$a(e);return n.get(Ji).next(s=>this.ts(s)?(q(Qs,"Releasing primary lease."),n.delete(Ji)):V.resolve())}ss(e,n){const s=Date.now();return!(e<s-n)&&(!(e>s)||(Ft(`Detected an update time that is in the future: ${e} > ${s}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const n=/(?:Version|Mobile)\/1[456]/;lE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var n;try{const s=((n=this.Wi)===null||n===void 0?void 0:n.getItem(this.us(e)))!==null;return q(Qs,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ft(Qs,"Failed to get zombied client id.",s),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){Ft("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $a(t){return ut(t,pl)}function fu(t){return ut(t,Wo)}function I3(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.ds=s,this.As=r}static Rs(e,n){let s=ye(),r=ye();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ry(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return lE()?8:pT(lt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new x3;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,s,r){return s.documentReadCount<this.gs?(ro()<=_e.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),V.resolve()):(ro()<=_e.DEBUG&&q("QueryEngine","Query:",io(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ps*r?(ro()<=_e.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):V.resolve())}ws(e,n){if(Ew(n))return V.resolve(null);let s=wn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=cp(n,null,"F"),s=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=ye(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.vs(n,a);return this.Cs(n,d,o,c.readTime)?this.ws(e,cp(n,null,"F")):this.Fs(e,d,n,c)}))})))}bs(e,n,s,r){return Ew(n)||r.isEqual(ae.min())?V.resolve(null):this.ys.getDocuments(e,s).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,s,r)?V.resolve(null):(ro()<=_e.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),io(n)),this.Fs(e,o,n,bR(r,$c)).next(a=>a))})}vs(e,n){let s=new Ne(WT(e));return n.forEach((r,i)=>{yl(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return ro()<=_e.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",io(n)),this.ys.getDocumentsMatchingQuery(e,n,un.min(),s)}Fs(e,n,s,r){return this.ys.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="LocalStore",b3=3e8;class k3{constructor(e,n,s,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new Ue(de),this.Os=new Os(i=>Pi(i),gl),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function RI(t,e,n,s){return new k3(t,e,n,s)}async function DI(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let c=ye();for(const d of r){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(s,c).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:a}))})})}function S3(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,f){const m=d.batch,g=m.keys();let T=V.resolve();return g.forEach(S=>{T=T.next(()=>f.getEntry(c,S)).next(A=>{const C=d.docVersions.get(S);re(C!==null,48541),A.version.compareTo(C)<0&&(m.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),f.addEntry(A)))})}),T.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let c=ye();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function jI(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function A3(t,e){const n=he(t),s=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const a=[];e.targetChanges.forEach((f,m)=>{const g=r.get(m);if(!g)return;a.push(n.Ti.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,f.addedDocuments,m)));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?T=T.withResumeToken(ot.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,s)),r=r.insert(m,T),function(A,C,x){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=b3?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,T,f)&&a.push(n.Ti.updateTargetData(i,T))});let c=an(),d=ye();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(P3(i,o,e.documentUpdates).next(f=>{c=f.qs,d=f.Qs})),!s.isEqual(ae.min())){const f=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(f)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.xs=r,i))}function P3(t,e,n){let s=ye(),r=ye();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=an();return n.forEach((a,c)=>{const d=i.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):q(iy,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{qs:o,Qs:r}})}function N3(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=mi),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function C3(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ti.getTargetData(s,e).next(i=>i?(r=i,V.resolve(r)):n.Ti.allocateTargetId(s).next(o=>(r=new ws(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.xs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function gp(t,e,n){const s=he(t),r=s.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Mr(o))throw o;q(iy,`Failed to update sequence numbers for target ${e}: ${o}`)}s.xs=s.xs.remove(e),s.Os.delete(r.target)}function Jw(t,e,n){const s=he(t);let r=ae.min(),i=ye();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const m=he(c),g=m.Os.get(f);return g!==void 0?V.resolve(m.xs.get(g)):m.Ti.getTargetData(d,f)}(s,o,wn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,e,n?r:ae.min(),n?i:ye())).next(a=>(R3(s,yD(e),a),{documents:a,$s:i})))}function R3(t,e,n){let s=t.Ns.get(e)||ae.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ns.set(e,s)}class Zw{constructor(){this.activeTargetIds=ID()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VI{constructor(){this.xo=new Zw,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Zw,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="ConnectivityMonitor";class t2{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){q(e2,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){q(e2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu=null;function yp(){return mu===null?mu=function(){return 268435456+Math.round(2147483648*Math.random())}():mu++,"0x"+mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="RestConnection",j3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class V3{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${r}`,this.Go=this.databaseId.database===Rd?`project_id=${s}`:`project_id=${s}&database_id=${r}`}zo(e,n,s,r,i){const o=yp(),a=this.jo(e,n.toUriEncodedString());q(Lf,`Sending RPC '${e}' ${o}:`,a,s);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,r,i);const{host:d}=new URL(a),f=Oi(d);return this.Jo(e,a,c,s,f).then(m=>(q(Lf,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Si(Lf,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",s),m})}Yo(e,n,s,r,i,o){return this.zo(e,n,s,r,i)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+la}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}jo(e,n){const s=j3[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class M3 extends V3{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=yp();return new Promise((a,c)=>{const d=new nT;d.setWithCredentials(!0),d.listenOnce(sT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Vu.NO_ERROR:const m=d.getResponseJson();q(Pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Vu.TIMEOUT:q(Pt,`RPC '${e}' ${o} timed out`),c(new Q(z.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const g=d.getStatus();if(q(Pt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T==null?void 0:T.error;if(S&&S.status&&S.message){const A=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(v)>=0?v:z.UNKNOWN}(S.status);c(new Q(A,S.message))}else c(new Q(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Q(z.UNAVAILABLE,"Connection failed."));break;default:te(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{q(Pt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);q(Pt,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",f,s,15)})}I_(e,n,s){const r=yp(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oT(),a=iT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const f=i.join("");q(Pt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const m=o.createWebChannel(f,c);this.E_(m);let g=!1,T=!1;const S=new O3({Zo:C=>{T?q(Pt,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(g||(q(Pt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),g=!0),q(Pt,`RPC '${e}' stream ${r} sending:`,C),m.send(C))},Xo:()=>m.close()}),A=(C,x,v)=>{C.listen(x,b=>{try{v(b)}catch(D){setTimeout(()=>{throw D},0)}})};return A(m,Xa.EventType.OPEN,()=>{T||(q(Pt,`RPC '${e}' stream ${r} transport opened.`),S.__())}),A(m,Xa.EventType.CLOSE,()=>{T||(T=!0,q(Pt,`RPC '${e}' stream ${r} transport closed`),S.u_(),this.d_(m))}),A(m,Xa.EventType.ERROR,C=>{T||(T=!0,Si(Pt,`RPC '${e}' stream ${r} transport errored. Name:`,C.name,"Message:",C.message),S.u_(new Q(z.UNAVAILABLE,"The operation could not be completed")))}),A(m,Xa.EventType.MESSAGE,C=>{var x;if(!T){const v=C.data[0];re(!!v,16349);const b=v,D=(b==null?void 0:b.error)||((x=b[0])===null||x===void 0?void 0:x.error);if(D){q(Pt,`RPC '${e}' stream ${r} received error:`,D);const L=D.status;let M=function(I){const w=nt[I];if(w!==void 0)return sI(w)}(L),E=D.message;M===void 0&&(M=z.INTERNAL,E="Unknown error status: "+L+" with message "+D.message),T=!0,S.u_(new Q(M,E)),m.close()}else q(Pt,`RPC '${e}' stream ${r} received:`,v),S.c_(v)}}),A(a,rT.STAT_EVENT,C=>{C.stat===Qm.PROXY?q(Pt,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===Qm.NOPROXY&&q(Pt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.a_()},0),S}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(){return typeof window<"u"?window:null}function Wu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t){return new FD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n,s=1e3,r=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=r,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),r=Math.max(0,n-s);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="PersistentStream";class MI{constructor(e,n,s,r,i,o,a,c){this.xi=e,this.S_=s,this.D_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new OI(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Ft(n.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.v_===n&&this.z_(s,r)},s=>{e(()=>{const r=new Q(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(r)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{s(()=>this.j_(r))}),this.stream.onMessage(r=>{s(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return q(n2,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(q(n2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F3 extends MI{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=BD(this.serializer,e),s=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Ut(o.readTime):ae.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=dp(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Dd(c)?{documents:dI(i,c)}:{query:hI(i,c).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=oI(i,o.resumeToken);const d=lp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Jo(i,o.snapshotVersion.toTimestamp());const d=lp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const s=qD(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=dp(this.serializer),n.removeTarget=e,this.Q_(n)}}class z3 extends MI{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=$D(e.writeResults,e.commitTime),s=Ut(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=dp(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Od(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{}class B3 extends U3{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,up(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(z.UNKNOWN,i.toString())})}Yo(e,n,s,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,up(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(z.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class $3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ft(n),this.ua=!1):q("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="RemoteStore";class q3{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{s.enqueueAndForget(async()=>{Fi(this)&&(q(Di,"Restarting streams for network reachability change."),await async function(c){const d=he(c);d.da.add(4),await _l(d),d.Va.set("Unknown"),d.da.delete(4),await Oh(d)}(this))})}),this.Va=new $3(s,r)}}async function Oh(t){if(Fi(t))for(const e of t.Aa)await e(!0)}async function _l(t){for(const e of t.Aa)await e(!1)}function LI(t,e){const n=he(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),ly(n)?cy(n):ha(n).N_()&&ay(n,e))}function oy(t,e){const n=he(t),s=ha(n);n.Ea.delete(e),s.N_()&&FI(n,e),n.Ea.size===0&&(s.N_()?s.k_():Fi(n)&&n.Va.set("Unknown"))}function ay(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ha(t).Z_(e)}function FI(t,e){t.ma.Ke(e),ha(t).X_(e)}function cy(t){t.ma=new VD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),ha(t).start(),t.Va.ca()}function ly(t){return Fi(t)&&!ha(t).O_()&&t.Ea.size>0}function Fi(t){return he(t).da.size===0}function zI(t){t.ma=void 0}async function W3(t){t.Va.set("Online")}async function G3(t){t.Ea.forEach((e,n)=>{ay(t,e)})}async function H3(t,e){zI(t),ly(t)?(t.Va.Pa(e),cy(t)):t.Va.set("Unknown")}async function K3(t,e,n){if(t.Va.set("Online"),e instanceof iI&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ea.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ea.delete(a),r.ma.removeTarget(a))}(t,e)}catch(s){q(Di,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ud(t,s)}else if(e instanceof $u?t.ma.Xe(e):e instanceof rI?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ae.min()))try{const s=await jI(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.ma.It(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ea.get(d);f&&i.Ea.set(d,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{const f=i.Ea.get(c);if(!f)return;i.Ea.set(c,f.withResumeToken(ot.EMPTY_BYTE_STRING,f.snapshotVersion)),FI(i,c);const m=new ws(f.target,c,d,f.sequenceNumber);ay(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){q(Di,"Failed to raise snapshot:",s),await Ud(t,s)}}async function Ud(t,e,n){if(!Mr(e))throw e;t.da.add(1),await _l(t),t.Va.set("Offline"),n||(n=()=>jI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Di,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Oh(t)})}function UI(t,e){return e().catch(n=>Ud(t,n,e))}async function wl(t){const e=he(t),n=Nr(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:mi;for(;Q3(e);)try{const r=await N3(e.localStore,s);if(r===null){e.Ia.length===0&&n.k_();break}s=r.batchId,Y3(e,r)}catch(r){await Ud(e,r)}BI(e)&&$I(e)}function Q3(t){return Fi(t)&&t.Ia.length<10}function Y3(t,e){t.Ia.push(e);const n=Nr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function BI(t){return Fi(t)&&!Nr(t).O_()&&t.Ia.length>0}function $I(t){Nr(t).start()}async function X3(t){Nr(t).ia()}async function J3(t){const e=Nr(t);for(const n of t.Ia)e.ta(n.mutations)}async function Z3(t,e,n){const s=t.Ia.shift(),r=Qg.from(s,e,n);await UI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await wl(t)}async function ej(t,e){e&&Nr(t).ea&&await async function(s,r){if(function(o){return DD(o)&&o!==z.ABORTED}(r.code)){const i=s.Ia.shift();Nr(s).L_(),await UI(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await wl(s)}}(t,e),BI(t)&&$I(t)}async function s2(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),q(Di,"RemoteStore received new credentials");const s=Fi(n);n.da.add(3),await _l(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Oh(n)}async function tj(t,e){const n=he(t);e?(n.da.delete(2),await Oh(n)):e||(n.da.add(2),await _l(n),n.Va.set("Unknown"))}function ha(t){return t.fa||(t.fa=function(n,s,r){const i=he(n);return i.oa(),new F3(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:W3.bind(null,t),n_:G3.bind(null,t),i_:H3.bind(null,t),Y_:K3.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),ly(t)?cy(t):t.Va.set("Unknown")):(await t.fa.stop(),zI(t))})),t.fa}function Nr(t){return t.ga||(t.ga=function(n,s,r){const i=he(n);return i.oa(),new z3(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:X3.bind(null,t),i_:ej.bind(null,t),na:J3.bind(null,t),ra:Z3.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await wl(t)):(await t.ga.stop(),t.Ia.length>0&&(q(Di,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new uy(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dy(t,e){if(Ft("AsyncQueue",`${e}: ${t}`),Mr(t))return new Q(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{static emptySet(e){return new Ro(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Y.comparator(n.key,s.key):(n,s)=>Y.comparator(n.key,s.key),this.keyedMap=Ja(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ro)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ro;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.pa=new Ue(Y.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):te(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class Zo{constructor(e,n,s,r,i,o,a,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Zo(e,n,Ro.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class sj{constructor(){this.queries=i2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=he(n),i=r.queries;r.queries=i2(),i.forEach((o,a)=>{for(const c of a.Sa)c.onError(s)})})(this,new Q(z.ABORTED,"Firestore shutting down"))}}function i2(){return new Os(t=>qT(t),Sh)}async function qI(t,e){const n=he(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.Da()&&e.va()&&(s=2):(i=new nj,s=e.va()?0:1);try{switch(s){case 0:i.ba=await n.onListen(r,!0);break;case 1:i.ba=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=dy(o,`Initialization of query '${io(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&hy(n)}async function WI(t,e){const n=he(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.va()?0:1:!i.Da()&&e.va()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function rj(t,e){const n=he(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Ma(r)&&(s=!0);o.ba=r}}s&&hy(n)}function ij(t,e,n){const s=he(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function hy(t){t.Ca.forEach(e=>{e.next()})}var vp,o2;(o2=vp||(vp={})).xa="default",o2.Cache="cache";class GI{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Zo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==vp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.key=e}}class KI{constructor(e){this.key=e}}class oj{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ye(),this.mutatedKeys=ye(),this.Za=WT(e),this.Xa=new Ro(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new r2,r=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{const g=r.get(f),T=yl(this.query,m)?m:null,S=!!g&&this.mutatedKeys.has(g.key),A=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let C=!1;g&&T?g.data.isEqual(T.data)?S!==A&&(s.track({type:3,doc:T}),C=!0):this.ru(g,T)||(s.track({type:2,doc:T}),C=!0,(c&&this.Za(T,c)>0||d&&this.Za(T,d)<0)&&(a=!0)):!g&&T?(s.track({type:0,doc:T}),C=!0):g&&!T&&(s.track({type:1,doc:g}),C=!0,(c||d)&&(a=!0)),C&&(T?(o=o.add(T),i=A?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{Xa:o,nu:s,Cs:a,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((f,m)=>function(T,S){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Vt:C})}};return A(T)-A(S)}(f.type,m.type)||this.Za(f.doc,m.doc)),this.iu(s),r=r!=null&&r;const a=n&&!r?this.su():[],c=this.Ya.size===0&&this.current&&!r?1:0,d=c!==this.Ja;return this.Ja=c,o.length!==0||d?{snapshot:new Zo(this.query,e.Xa,i,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new r2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ye(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new KI(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new HI(s))}),n}au(e){this.Ha=e.$s,this.Ya=ye();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Zo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const fy="SyncEngine";class aj{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class cj{constructor(e){this.key=e,this.cu=!1}}class lj{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Os(a=>qT(a),Sh),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ue(Y.comparator),this.Eu=new Map,this.du=new ty,this.Au={},this.Ru=new Map,this.Vu=Ri.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function uj(t,e,n=!0){const s=ex(t);let r;const i=s.hu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.uu()):r=await QI(s,e,n,!0),r}async function dj(t,e){const n=ex(t);await QI(n,e,!0,!1)}async function QI(t,e,n,s){const r=await C3(t.localStore,wn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await hj(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&LI(t.remoteStore,r),a}async function hj(t,e,n,s,r){t.fu=(m,g,T)=>async function(A,C,x,v){let b=C.view.tu(x);b.Cs&&(b=await Jw(A.localStore,C.query,!1).then(({documents:E})=>C.view.tu(E,b)));const D=v&&v.targetChanges.get(C.targetId),L=v&&v.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(b,A.isPrimaryClient,D,L);return c2(A,C.targetId,M.ou),M.snapshot}(t,m,g,T);const i=await Jw(t.localStore,e,!0),o=new oj(e,i.$s),a=o.tu(i.documents),c=vl.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),d=o.applyChanges(a,t.isPrimaryClient,c);c2(t,n,d.ou);const f=new aj(e,n,o);return t.hu.set(e,f),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function fj(t,e,n){const s=he(t),r=s.hu.get(e),i=s.Pu.get(r.targetId);if(i.length>1)return s.Pu.set(r.targetId,i.filter(o=>!Sh(o,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await gp(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&oy(s.remoteStore,r.targetId),_p(s,r.targetId)}).catch(Li)):(_p(s,r.targetId),await gp(s.localStore,r.targetId,!0))}async function mj(t,e){const n=he(t),s=n.hu.get(e),r=n.Pu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),oy(n.remoteStore,s.targetId))}async function pj(t,e,n){const s=tx(t);try{const r=await function(o,a){const c=he(o),d=Ge.now(),f=a.reduce((T,S)=>T.add(S.key),ye());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let S=an(),A=ye();return c.Bs.getEntries(T,f).next(C=>{S=C,S.forEach((x,v)=>{v.isValidDocument()||(A=A.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,S)).next(C=>{m=C;const x=[];for(const v of a){const b=CD(v,m.get(v.key).overlayedDocument);b!=null&&x.push(new Ms(v.key,b,VT(b.value.mapValue),jt.exists(!0)))}return c.mutationQueue.addMutationBatch(T,d,x,a)}).next(C=>{g=C;const x=C.applyToLocalDocumentSet(m,A);return c.documentOverlayCache.saveOverlays(T,C.batchId,x)})}).then(()=>({batchId:g.batchId,changes:HT(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let d=o.Au[o.currentUser.toKey()];d||(d=new Ue(de)),d=d.insert(a,c),o.Au[o.currentUser.toKey()]=d}(s,r.batchId,n),await El(s,r.changes),await wl(s.remoteStore)}catch(r){const i=dy(r,"Failed to persist write");n.reject(i)}}async function YI(t,e){const n=he(t);try{const s=await A3(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Eu.get(i);o&&(re(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.cu=!0:r.modifiedDocuments.size>0?re(o.cu,14607):r.removedDocuments.size>0&&(re(o.cu,42227),o.cu=!1))}),await El(n,s,e)}catch(s){await Li(s)}}function a2(t,e,n){const s=he(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.hu.forEach((i,o)=>{const a=o.view.Fa(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const c=he(o);c.onlineState=a;let d=!1;c.queries.forEach((f,m)=>{for(const g of m.Sa)g.Fa(a)&&(d=!0)}),d&&hy(c)}(s.eventManager,e),r.length&&s.lu.Y_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function gj(t,e,n){const s=he(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Eu.get(e),i=r&&r.key;if(i){let o=new Ue(Y.comparator);o=o.insert(i,Ye.newNoDocument(i,ae.min()));const a=ye().add(i),c=new Ch(ae.min(),new Map,new Ue(de),o,a);await YI(s,c),s.Iu=s.Iu.remove(i),s.Eu.delete(e),my(s)}else await gp(s.localStore,e,!1).then(()=>_p(s,e,n)).catch(Li)}async function yj(t,e){const n=he(t),s=e.batch.batchId;try{const r=await S3(n.localStore,e);JI(n,s,null),XI(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await El(n,r)}catch(r){await Li(r)}}async function vj(t,e,n){const s=he(t);try{const r=await function(o,a){const c=he(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,a).next(m=>(re(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(s.localStore,e);JI(s,e,n),XI(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await El(s,r)}catch(r){await Li(r)}}function XI(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function JI(t,e,n){const s=he(t);let r=s.Au[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Au[s.currentUser.toKey()]=r}}function _p(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Pu.get(e))t.hu.delete(s),n&&t.lu.gu(s,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(s=>{t.du.containsKey(s)||ZI(t,s)})}function ZI(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(oy(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),my(t))}function c2(t,e,n){for(const s of n)s instanceof HI?(t.du.addReference(s.key,e),_j(t,s)):s instanceof KI?(q(fy,"Document no longer in limbo: "+s.key),t.du.removeReference(s.key,e),t.du.containsKey(s.key)||ZI(t,s.key)):te(19791,{pu:s})}function _j(t,e){const n=e.key,s=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(s)||(q(fy,"New document in limbo: "+n),t.Tu.add(s),my(t))}function my(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Y(Se.fromString(e)),s=t.Vu.next();t.Eu.set(s,new cj(n)),t.Iu=t.Iu.insert(n,s),LI(t.remoteStore,new ws(wn(kh(n.path)),s,"TargetPurposeLimboResolution",vn.le))}}async function El(t,e,n){const s=he(t),r=[],i=[],o=[];s.hu.isEmpty()||(s.hu.forEach((a,c)=>{o.push(s.fu(c,e,n).then(d=>{var f;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;s.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){r.push(d);const m=ry.Rs(c.targetId,d);i.push(m)}}))}),await Promise.all(o),s.lu.Y_(r),await async function(c,d){const f=he(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(d,g=>V.forEach(g.ds,T=>f.persistence.referenceDelegate.addReference(m,g.targetId,T)).next(()=>V.forEach(g.As,T=>f.persistence.referenceDelegate.removeReference(m,g.targetId,T)))))}catch(m){if(!Mr(m))throw m;q(iy,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const T=f.xs.get(g),S=T.snapshotVersion,A=T.withLastLimboFreeSnapshotVersion(S);f.xs=f.xs.insert(g,A)}}}(s.localStore,i))}async function wj(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){q(fy,"User change. New user:",e.toKey());const s=await DI(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(a=>{a.forEach(c=>{c.reject(new Q(z.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await El(n,s.ks)}}function Ej(t,e){const n=he(t),s=n.Eu.get(e);if(s&&s.cu)return ye().add(s.key);{let r=ye();const i=n.Pu.get(e);if(!i)return r;for(const o of i){const a=n.hu.get(o);r=r.unionWith(a.view.eu)}return r}}function ex(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ej.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gj.bind(null,e),e.lu.Y_=rj.bind(null,e.eventManager),e.lu.gu=ij.bind(null,e.eventManager),e}function tx(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vj.bind(null,e),e}class nl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return RI(this.persistence,new CI,e.initialUser,this.serializer)}Su(e){return new ny(jh.fi,this.serializer)}bu(e){return new VI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nl.provider={build:()=>new nl};class Tj extends nl{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){re(this.persistence.referenceDelegate instanceof zd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new kI(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new ny(s=>zd.fi(s,n),this.serializer)}}class Ij extends nl{constructor(e,n,s){super(),this.Fu=e,this.cacheSizeBytes=n,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Fu.initialize(this,e),await tx(this.Fu.syncEngine),await wl(this.Fu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Du(e){return RI(this.persistence,new CI,e.initialUser,this.serializer)}vu(e,n){const s=this.persistence.referenceDelegate.garbageCollector;return new kI(s,e.asyncQueue,n)}Cu(e,n){const s=new PR(n,this.persistence);return new AR(e.asyncQueue,s)}Su(e){const n=I3(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new sy(this.synchronizeTabs,n,e.clientId,s,e.asyncQueue,L3(),Wu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new VI}}class Bd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>a2(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=wj.bind(null,this.syncEngine),await tj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sj}()}createDatastore(e){const n=Vh(e.databaseInfo.databaseId),s=function(i){return new M3(i)}(e.databaseInfo);return function(i,o,a,c){return new B3(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new q3(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>a2(this.syncEngine,n,0),function(){return t2.C()?new t2:new D3}())}createSyncEngine(e,n){return function(r,i,o,a,c,d,f){const m=new lj(r,i,o,a,c,d);return f&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=he(r);q(Di,"RemoteStore shutting down."),i.da.add(5),await _l(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bd.provider={build:()=>new Bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ft("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="FirestoreClient";class xj{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=_t.UNAUTHENTICATED,this.clientId=uT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{q(Cr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(q(Cr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=dy(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Ff(t,e){t.asyncQueue.verifyOperationInProgress(),q(Cr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await DI(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function l2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bj(t);q(Cr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>s2(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>s2(e.remoteStore,r)),t._onlineComponents=e}async function bj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Cr,"Using user provided OfflineComponentProvider");try{await Ff(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Si("Error using user provided cache. Falling back to memory cache: "+n),await Ff(t,new nl)}}else q(Cr,"Using default OfflineComponentProvider"),await Ff(t,new Tj(void 0));return t._offlineComponents}async function sx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Cr,"Using user provided OnlineComponentProvider"),await l2(t,t._uninitializedComponentsProvider._online)):(q(Cr,"Using default OnlineComponentProvider"),await l2(t,new Bd))),t._onlineComponents}function kj(t){return sx(t).then(e=>e.syncEngine)}async function rx(t){const e=await sx(t),n=e.eventManager;return n.onListen=uj.bind(null,e.syncEngine),n.onUnlisten=fj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mj.bind(null,e.syncEngine),n}function Sj(t,e,n={}){const s=new ns;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const f=new nx({next:g=>{f.xu(),o.enqueueAndForget(()=>WI(i,m));const T=g.docs.has(a);!T&&g.fromCache?d.reject(new Q(z.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&c&&c.source==="server"?d.reject(new Q(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new GI(kh(a.path),f,{includeMetadataChanges:!0,Qa:!0});return qI(i,m)}(await rx(t),t.asyncQueue,e,n,s)),s.promise}function Aj(t,e,n={}){const s=new ns;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const f=new nx({next:g=>{f.xu(),o.enqueueAndForget(()=>WI(i,m)),g.fromCache&&c.source==="server"?d.reject(new Q(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new GI(a,f,{includeMetadataChanges:!0,Qa:!0});return qI(i,m)}(await rx(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t,e,n){if(!n)throw new Q(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Pj(t,e,n,s){if(e===!0&&s===!0)throw new Q(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function d2(t){if(!Y.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function h2(t){if(Y.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function In(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mh(t);throw new Q(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="firestore.googleapis.com",f2=!0;class m2{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ax,this.ssl=f2}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:f2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o3)throw new Q(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ix((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lh{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new gR;switch(s.type){case"firstParty":return new wR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Q(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=u2.get(n);s&&(q("ComponentProvider","Removing Datastore"),u2.delete(n),s.terminate())}(this),Promise.resolve()}}function Nj(t,e,n,s={}){var r;t=In(t,Lh);const i=Oi(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(Tg(`https://${c}`),Ig("Firestore",!0)),o.host!==ax&&o.host!==c&&Si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:s});if(!Ti(d,a)&&(t._setSettings(d),s.mockUserToken)){let f,m;if(typeof s.mockUserToken=="string")f=s.mockUserToken,m=_t.MOCK_USER;else{f=VA(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new Q(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new _t(g)}t._authCredentials=new yR(new cT(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class Bt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}}class Ir extends zi{constructor(e,n,s){super(e,n,kh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Y(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function rn(t,e,...n){if(t=it(t),ox("collection","path",e),t instanceof Lh){const s=Se.fromString(e,...n);return h2(s),new Ir(t,null,s)}{if(!(t instanceof Bt||t instanceof Ir))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Se.fromString(e,...n));return h2(s),new Ir(t.firestore,null,s)}}function rt(t,e,...n){if(t=it(t),arguments.length===1&&(e=uT.newId()),ox("doc","path",e),t instanceof Lh){const s=Se.fromString(e,...n);return d2(s),new Bt(t,null,new Y(s))}{if(!(t instanceof Bt||t instanceof Ir))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Se.fromString(e,...n));return d2(s),new Bt(t.firestore,t instanceof Ir?t.converter:null,new Y(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="AsyncQueue";class g2{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new OI(this,"async_queue_retry"),this.rc=()=>{const s=Wu();s&&q(p2,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=Wu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Wu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ns;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Mr(e))throw e;q(p2,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Ft("INTERNAL UNHANDLED ERROR: ",y2(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const r=uy.createAndSchedule(this,e,n,s,i=>this.uc(i));return this.Zu.push(r),r}oc(){this.Xu&&te(47125,{cc:y2(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function y2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Fr extends Lh{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new g2,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g2(e),this._firestoreClient=void 0,await e}}}function Cj(t,e){const n=typeof t=="object"?t:kg(),s=typeof t=="string"?t:Rd,r=ph(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=iE("firestore");i&&Nj(r,...i)}return r}function py(t){if(t._terminated)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cx(t),t._firestoreClient}function cx(t){var e,n,s;const r=t._freezeSettings(),i=function(a,c,d,f){return new rD(a,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,ix(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new xj(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}function Rj(t,e){Si("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Dj(t,Bd.provider,{build:s=>new Ij(s,n.cacheSizeBytes,void 0)}),Promise.resolve()}function Dj(t,e,n){if((t=In(t,Fr))._firestoreClient||t._terminated)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Q(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},cx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ea(ot.fromBase64String(e))}catch(n){throw new Q(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ea(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=/^__.*__$/;class Vj{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new da(e,this.data,n,this.fieldTransforms)}}class lx{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ux(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ic:t})}}class _y{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new _y(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:s,Rc:!1});return r.Vc(e),r}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:s,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return $d(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(ux(this.Ic)&&jj.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Oj{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Vh(e)}bc(e,n,s,r=!1){return new _y({Ic:e,methodName:n,wc:s,path:$e.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zh(t){const e=t._freezeSettings(),n=Vh(t._databaseId);return new Oj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dx(t,e,n,s,r,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,r);wy("Data must be an object, but it was:",o,s);const a=hx(s,o);let c,d;if(i.merge)c=new Kt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=wp(e,m,n);if(!o.contains(g))throw new Q(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);mx(f,g)||f.push(g)}c=new Kt(f),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new Vj(new Dt(a),c,d)}class Uh extends gy{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uh}}function Mj(t,e,n,s){const r=t.bc(1,e,n);wy("Data must be an object, but it was:",r,s);const i=[],o=Dt.empty();Lr(s,(c,d)=>{const f=Ey(e,c,n);d=it(d);const m=r.mc(f);if(d instanceof Uh)i.push(f);else{const g=Tl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const a=new Kt(i);return new lx(o,a,r.fieldTransforms)}function Lj(t,e,n,s,r,i){const o=t.bc(1,e,n),a=[wp(e,s,n)],c=[r];if(i.length%2!=0)throw new Q(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(wp(e,i[g])),c.push(i[g+1]);const d=[],f=Dt.empty();for(let g=a.length-1;g>=0;--g)if(!mx(d,a[g])){const T=a[g];let S=c[g];S=it(S);const A=o.mc(T);if(S instanceof Uh)d.push(T);else{const C=Tl(S,A);C!=null&&(d.push(T),f.set(T,C))}}const m=new Kt(d);return new lx(f,m,o.fieldTransforms)}function Fj(t,e,n,s=!1){return Tl(n,t.bc(s?4:3,e))}function Tl(t,e){if(fx(t=it(t)))return wy("Unsupported field value:",e,t),hx(t,e);if(t instanceof gy)return function(s,r){if(!ux(r.Ic))throw r.gc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let c=Tl(a,r.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=it(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return xD(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ge.fromDate(s);return{timestampValue:Jo(r.serializer,i)}}if(s instanceof Ge){const i=new Ge(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Jo(r.serializer,i)}}if(s instanceof yy)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ea)return{bytesValue:oI(r.serializer,s._byteString)};if(s instanceof Bt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Jg(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof vy)return function(o,a){return{mapValue:{fields:{[qg]:{stringValue:Wg},[Go]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.gc("VectorValues must only contain numeric values.");return Hg(a.serializer,d)})}}}}}}(s,r);throw r.gc(`Unsupported field value: ${Mh(s)}`)}(t,e)}function hx(t,e){const n={};return kT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(t,(s,r)=>{const i=Tl(r,e.Ac(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function fx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof yy||t instanceof ea||t instanceof Bt||t instanceof gy||t instanceof vy)}function wy(t,e,n){if(!fx(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=Mh(n);throw s==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+s)}}function wp(t,e,n){if((e=it(e))instanceof Fh)return e._internalPath;if(typeof e=="string")return Ey(t,e);throw $d("Field path arguments must be of type string or ",t,!1,void 0,n)}const zj=new RegExp("[~\\*/\\[\\]]");function Ey(t,e,n){if(e.search(zj)>=0)throw $d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fh(...e.split("."))._internalPath}catch{throw $d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $d(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new Q(z.INVALID_ARGUMENT,a+t+c)}function mx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Uj extends px{data(){return super.data()}}function Bh(t,e){return typeof e=="string"?Ey(t,e):e instanceof Fh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ty{}class gx extends Ty{}function Kn(t,e,...n){let s=[];e instanceof Ty&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof Iy).length,a=i.filter(c=>c instanceof $h).length;if(o>1||o>0&&a>0)throw new Q(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class $h extends gx{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new $h(e,n,s)}_apply(e){const n=this._parse(e);return yx(e._query,n),new zi(e.firestore,e.converter,ap(e._query,n))}_parse(e){const n=zh(e.firestore);return function(i,o,a,c,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Q(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){_2(m,f);const S=[];for(const A of m)S.push(v2(c,i,A));g={arrayValue:{values:S}}}else g=v2(c,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||_2(m,f),g=Fj(a,o,m,f==="in"||f==="not-in");return we.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ct(t,e,n){const s=e,r=Bh("where",t);return $h._create(r,s,n)}class Iy extends Ty{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Iy(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ae.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const c of a)yx(o,c),o=ap(o,c)}(e._query,n),new zi(e.firestore,e.converter,ap(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xy extends gx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xy(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zc(i,o)}(e._query,this._field,this._direction);return new zi(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new ua(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Qn(t,e="asc"){const n=e,s=Bh("orderBy",t);return xy._create(s,n)}function v2(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new Q(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$T(e)&&n.indexOf("/")!==-1)throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Se.fromString(n));if(!Y.isDocumentKey(s))throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Xc(t,new Y(s))}if(n instanceof Bt)return Xc(t,n._key);throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mh(n)}.`)}function _2(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yx(t,e){const n=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $j{convertValue(e,n="none"){switch(Ar(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Lr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[Go].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>Fe(o.doubleValue));return new vy(i)}convertGeoPoint(e){return new yy(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=xh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const n=Ns(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Se.fromString(e);re(gI(s),9688,{name:e});const r=new Ai(s.get(1),s.get(3)),i=new Y(s.popFirst(5));return r.isEqual(n)||Ft(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _x extends px{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Bh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Gu extends _x{data(e={}){return super.data(e)}}class qj{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new tc(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Gu(this._firestore,this._userDataWriter,s.key,s,new tc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const c=new Gu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new tc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Gu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new tc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:Wj(a.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Wj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t){t=In(t,Bt);const e=In(t.firestore,Fr);return Sj(py(e),t._key).then(n=>Gj(e,t,n))}class wx extends $j{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function Yn(t){t=In(t,zi);const e=In(t.firestore,Fr),n=py(e),s=new wx(e);return Bj(t._query),Aj(n,t._query).then(r=>new qj(e,s,t,r))}function qd(t,e,n){t=In(t,Bt);const s=In(t.firestore,Fr),r=vx(t.converter,e,n);return qh(s,[dx(zh(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,jt.none())])}function xr(t,e,n,...s){t=In(t,Bt);const r=In(t.firestore,Fr),i=zh(r);let o;return o=typeof(e=it(e))=="string"||e instanceof Fh?Lj(i,"updateDoc",t._key,e,n,s):Mj(i,"updateDoc",t._key,e),qh(r,[o.toMutation(t._key,jt.exists(!0))])}function by(t){return qh(In(t.firestore,Fr),[new Nh(t._key,jt.none())])}function ky(t,e){const n=In(t.firestore,Fr),s=rt(t),r=vx(t.converter,e);return qh(n,[dx(zh(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,jt.exists(!1))]).then(()=>s)}function qh(t,e){return function(s,r){const i=new ns;return s.asyncQueue.enqueueAndForget(async()=>pj(await kj(s),r,i)),i.promise}(py(t),e)}function Gj(t,e,n){const s=n.docs.get(e._key),r=new wx(t);return new _x(t,r,e._key,s,new tc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){la=r})(aa),Ii(new Sr("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Fr(new vR(s.getProvider("auth-internal")),new ER(o,s.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ai(d.options.projectId,f)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Zn(J_,Z_,e),Zn(J_,Z_,"esm2017")})();var Hj="firebase",Kj="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(Hj,Kj,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n,s,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,sn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||s.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r==null||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="us-central1";class Yj{constructor(e,n,s,r,i=Ep,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Qj(e,n,s,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Ep}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Xj(t,e,n){const s=Oi(e);t.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(Tg(t.emulatorOrigin),Ig("Functions",!0))}const w2="@firebase/functions",E2="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj="auth-internal",Zj="app-check-internal",eV="messaging-internal";function tV(t){const e=(n,{instanceIdentifier:s})=>{const r=n.getProvider("app").getImmediate(),i=n.getProvider(Jj),o=n.getProvider(eV),a=n.getProvider(Zj);return new Yj(r,i,o,a,s)};Ii(new Sr(Ex,e,"PUBLIC").setMultipleInstances(!0)),Zn(w2,E2,t),Zn(w2,E2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t=kg(),e=Ep){const s=ph(it(t),Ex).getImmediate({identifier:e}),r=iE("functions");return r&&sV(s,...r),s}function sV(t,e,n){Xj(it(t),e,n)}tV();const rV={apiKey:"AIzaSyBn2jG-T2SesKFr0TsfeQa04wlBmDeEoG4",authDomain:"clarity-311c3.firebaseapp.com",projectId:"clarity-311c3",storageBucket:"clarity-311c3.firebasestorage.app",messagingSenderId:"459484415688",appId:"1:459484415688:web:bac719ee243bbd9821c7fd"},Sy=mE(rV),di=eT(Sy),Ie=Cj(Sy);Rj(Ie).catch(t=>{t.code==="failed-precondition"?console.warn("Firestore persistence failed: multiple tabs open"):t.code==="unimplemented"&&console.warn("Firestore persistence is not available in this browser")});nV(Sy,"us-central1");const Tx=P.createContext(),xn=()=>{const t=P.useContext(Tx);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Ix=({children:t})=>{const[e,n]=P.useState(null),[s,r]=P.useState(null),[i,o]=P.useState("free"),[a,c]=P.useState(!0),[d,f]=P.useState(!1),m=P.useRef(!0),g=(D,L)=>{if(!D||!L)return{isTrialActive:!1,daysRemaining:0};const M=L.seconds?new Date(L.seconds*1e3):new Date(L),E=new Date,y=E<M,I=Math.ceil((M-E)/(24*60*60*1e3));return{isTrialActive:y,daysRemaining:Math.max(0,I),trialEndDate:M}},T=async D=>{try{const L=await fa(rt(Ie,"users",D));if(L.exists()){const M=L.data(),E=g(M.trialStartDate,M.trialEndDate);if(console.log("🔍 Profile Data:",M),console.log("📅 Trial Status:",E),!m.current)return;if(M.subscription==="trial"&&!E.isTrialActive){const y={...M,subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date};await xr(rt(Ie,"users",D),{subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date}),m.current&&(r({...y,...E}),o("free"))}else m.current&&(r({...M,...E}),o(M.subscription))}}catch(L){console.error("Error fetching user profile:",L),m.current&&c(!1)}};P.useEffect(()=>rC(di,async L=>{console.log("🔥 Auth state changed:",L?"User logged in":"User logged out");try{if(!m.current)return;n(L),f(!!L),L?await T(L.uid):m.current&&(r(null),o("free"))}catch(M){console.error("Error in auth state change:",M)}finally{m.current&&c(!1)}}),[]),P.useEffect(()=>()=>{m.current=!1},[]);const S=async(D,L,M={})=>{try{const{user:E}=await UE(di,D,L),y={email:E.email,uid:E.uid,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date,firstName:M.firstName||"",lastName:M.lastName||"",exerciseGoalMinutes:M.exerciseGoalMinutes||30,waterGoalOz:M.waterGoalOz||64,meditationGoalMinutes:M.meditationGoalMinutes||10};if(await qd(rt(Ie,"users",E.uid),y),m.current){const I=g(y.trialStartDate,y.trialEndDate);r({...y,...I}),o("trial")}return{success:!0,user:E}}catch(E){throw console.error("Signup error:",E),E}},A=async(D,L)=>{try{const{user:M}=await BE(di,D,L);return console.log("✅ Login successful, Firebase will trigger auth state change"),{success:!0,user:M}}catch(M){throw console.error("Login error:",M),M}},C=async()=>{try{return await $E(di),m.current&&(n(null),r(null),o("free"),f(!1)),{success:!0}}catch(D){throw console.error("Logout error:",D),D}},x=async()=>{try{if(e!=null&&e.uid){const D={subscription:"premium",subscriptionStatus:"premium_paid",premiumStartDate:new Date,updatedAt:new Date};return await xr(rt(Ie,"users",e.uid),D),m.current&&(o("premium"),r(L=>({...L,...D}))),{success:!0}}}catch(D){throw console.error("Error upgrading to premium:",D),D}},v=async()=>{try{if(e!=null&&e.uid){const D={subscription:"free",subscriptionCancelledAt:new Date,updatedAt:new Date};return await xr(rt(Ie,"users",e.uid),D),m.current&&(o("free"),r(L=>({...L,...D}))),{success:!0}}}catch(D){throw console.error("Error cancelling subscription:",D),D}},b={user:e,userProfile:s,userSubscription:i,isAuthenticated:d,isPremium:i==="premium"||i==="trial",isTrialActive:(s==null?void 0:s.isTrialActive)||!1,trialDaysRemaining:(s==null?void 0:s.daysRemaining)||0,loading:a,signup:S,login:A,logout:C,upgradeToPremium:x,cancelSubscription:v,fetchUserProfile:T,authKey:(e==null?void 0:e.uid)||"no-user"};return u.jsx(Tx.Provider,{value:b,children:t})},xx="/assets/Logo-BuPYrDrj.png";var bx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},T2=Es.createContext&&Es.createContext(bx),iV=["attr","size","title"];function oV(t,e){if(t==null)return{};var n=aV(t,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function aV(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function Wd(){return Wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Wd.apply(this,arguments)}function I2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Gd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I2(Object(n),!0).forEach(function(s){cV(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I2(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function cV(t,e,n){return e=lV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lV(t){var e=uV(t,"string");return typeof e=="symbol"?e:e+""}function uV(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kx(t){return t&&t.map((e,n)=>Es.createElement(e.tag,Gd({key:n},e.attr),kx(e.child)))}function dV(t){return e=>Es.createElement(hV,Wd({attr:Gd({},t.attr)},e),kx(t.child))}function hV(t){var e=n=>{var{attr:s,size:r,title:i}=t,o=oV(t,iV),a=r||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Es.createElement("svg",Wd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:c,style:Gd(Gd({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&Es.createElement("title",null,i),t.children)};return T2!==void 0?Es.createElement(T2.Consumer,null,n=>e(n)):e(bx)}function fV(t){return dV({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(t)}async function mV(t,e){try{const n=rt(Ie,"users",t),s=await fa(n);let r=0;return s.exists()&&typeof s.data().points=="number"&&(r=s.data().points),await xr(n,{points:r+e,updatedAt:new Date}),{success:!0,newPoints:r+e}}catch(n){return console.error("Error adding points:",n),{success:!1,error:n}}}async function pV(t,e){try{const n=rt(Ie,"users",t),s=await fa(n);let r=0;return s.exists()&&typeof s.data().points=="number"&&(r=s.data().points),r<e?{success:!1,error:"Not enough points"}:(await xr(n,{points:r-e,updatedAt:new Date}),{success:!0,newPoints:r-e})}catch(n){return console.error("Error deducting points:",n),{success:!1,error:n}}}async function gV(t){try{const e=rt(Ie,"users",t),n=await fa(e);return n.exists()&&typeof n.data().points=="number"?n.data().points:0}catch(e){return console.error("Error getting points:",e),0}}async function yV(t,e,n="daily"){try{const s=new Date;let r;if(n==="daily")r=s.toISOString().split("T")[0];else if(n==="weekly"){const o=s.getFullYear(),a=Math.ceil(((s-new Date(o,0,1))/864e5+new Date(o,0,1).getDay()+1)/7);r=`${o}-W${a}`}else r="unknown";const i=rt(Ie,`users/${t}/challenges`,`${e}_${r}`);return await qd(i,{challengeId:e,period:n,periodKey:r,completedAt:new Date}),{success:!0}}catch(s){return console.error("Error completing challenge:",s),{success:!1,error:s}}}async function vV(t,e,n="daily"){try{const s=new Date;let r;if(n==="daily")r=s.toISOString().split("T")[0];else if(n==="weekly"){const a=s.getFullYear(),c=Math.ceil(((s-new Date(a,0,1))/864e5+new Date(a,0,1).getDay()+1)/7);r=`${a}-W${c}`}else r="unknown";const i=rt(Ie,`users/${t}/challenges`,`${e}_${r}`);return(await fa(i)).exists()}catch(s){return console.error("Error checking challenge completion:",s),!1}}const Ee={async register(t){try{const e=await UE(di,t.email,t.password);return await qd(rt(Ie,"users",e.user.uid),{username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,exerciseGoalMinutes:t.exerciseGoalMinutes||30,waterGoalOz:t.waterGoalOz||64,meditationGoalMinutes:t.meditationGoalMinutes||10,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date}),{user:e.user}}catch(e){throw new Error(e.message)}},async login(t,e){try{return{user:(await BE(di,t,e)).user}}catch{throw new Error("Invalid credentials")}},async logout(){try{return await $E(di),{message:"success"}}catch(t){throw new Error(t.message)}},async getUserProfile(t){try{const e=await fa(rt(Ie,"users",t));if(!e.exists())throw new Error("User not found");return{user:{id:t,...e.data()}}}catch(e){throw new Error(e.message)}},async updateUserProfile(t,e){try{const n=rt(Ie,"users",t);return await qd(n,{...e,updatedAt:new Date},{merge:!0}),{user:{id:t,...e}}}catch(n){throw new Error("Error updating profile: "+n.message)}},addPoints:mV,deductPoints:pV,getPoints:gV,completeChallenge:yV,isChallengeCompleted:vV};function _V(){const{user:t,logout:e}=xn(),n=hh(),[s,r]=P.useState(!1),[i,o]=P.useState(null),[a,c]=P.useState(!1),d=P.useRef();P.useEffect(()=>{const S=async()=>{if(t!=null&&t.uid)try{c(!0);const A=await Ee.getUserProfile(t.uid);o(A.user)}catch(A){console.error("Error fetching user profile:",A)}finally{c(!1)}};t!=null&&t.uid&&S()},[t]);const f=S=>{S.stopPropagation(),r(!s)};P.useEffect(()=>{if(!s)return;const S=A=>{d.current&&!d.current.contains(A.target)&&r(!1)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[s]);const m=async S=>{S.preventDefault(),r(!1);try{await e(),n("/welcome")}catch(A){console.error("Error logging out:",A),n("/welcome")}},g=()=>{r(!1),n("/profile")};if(!t)return null;const T="profile-dropdown"+(s?"":" hidden");return u.jsxs("div",{className:"profile-button-container",children:[u.jsx("button",{onClick:f,className:"profile-button",children:u.jsx(fV,{className:"profile-icon"})}),u.jsxs("ul",{className:T,ref:d,children:[u.jsx("li",{className:"profile-info",children:u.jsx("div",{className:"user-details",children:u.jsx("span",{className:"user-name",children:i!=null&&i.firstName&&(i!=null&&i.lastName)?`${i.firstName} ${i.lastName}`:(i==null?void 0:i.username)||"User"})})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:g,className:"dropdown-button",children:"👤 Edit Profile"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>{r(!1),n("/dashboard")},className:"dropdown-button",children:"📊 Dashboard"})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:m,className:"dropdown-button logout-button",children:"🚪 Sign Out"})})]})]})}function wV(){const{userSubscription:t,isTrialActive:e,trialDaysRemaining:n,upgradeToPremium:s}=xn();if(t==="premium"||t==="free"||!e)return null;const r=n<=3,i=(14-n)/14*100,o=()=>n===1?"Last day of premium!":n<=3?`Only ${n} days left!`:`${n} days remaining`,a=()=>n===1?"Keep Premium - $4.99/mo":n<=3?"Don't Lose Premium!":"Keep Premium - $4.99/mo";return u.jsxs("div",{className:`trial-banner ${r?"urgent":""}`,children:[u.jsxs("div",{className:"trial-content",children:[u.jsxs("div",{className:"trial-info",children:[u.jsx("span",{className:"trial-icon",children:r?"⏰":"✨"}),u.jsxs("div",{className:"trial-text",children:[u.jsx("h4",{children:r?"Premium Trial Ending!":"Premium Trial Active"}),u.jsx("p",{children:o()})]})]}),u.jsx("button",{onClick:s,className:"trial-upgrade-btn",children:a()})]}),u.jsx("div",{className:"trial-progress",children:u.jsx("div",{className:"trial-progress-bar",style:{width:`${i}%`}})})]})}function EV(){return u.jsxs("div",{className:"navigation-container",children:[u.jsxs("div",{className:"top-header",children:[u.jsxs("div",{className:"logo-container",children:[u.jsx("img",{src:xx,alt:"Clarity logo",className:"logo"}),u.jsx("span",{className:"logo-text",children:"Your Mind + Wellness Tracker"})]}),u.jsx("a",{href:"mailto:help@loveclaritywellness.com",className:"help-icon",title:"Contact Support",style:{marginRight:"16px",fontSize:"1.6rem",textDecoration:"none"},children:"❓"}),u.jsx(_V,{})]}),u.jsx(wV,{}),u.jsx("main",{className:"main-content",children:u.jsx(uA,{})}),u.jsxs("nav",{className:"bottom-navigation",children:[u.jsxs(Xi,{to:"/dashboard",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"📊"}),u.jsx("span",{className:"nav-label",children:"Home"})]}),u.jsxs(Xi,{to:"/workout",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🏋️"}),u.jsx("span",{className:"nav-label",children:"Workout"})]}),u.jsxs(Xi,{to:"/meditation",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🧘‍♀️"}),u.jsx("span",{className:"nav-label",children:"Meditate"})]}),u.jsxs(Xi,{to:"/water",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"💧"}),u.jsx("span",{className:"nav-label",children:"Water"})]}),u.jsxs(Xi,{to:"/games",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🎮"}),u.jsx("span",{className:"nav-label",children:"Games"})]}),u.jsxs(Xi,{to:"/goals",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🎯"}),u.jsx("span",{className:"nav-label",children:"Goals"})]})]})]})}function TV(){const{user:t,loading:e}=xn(),[n,s]=P.useState(""),[r,i]=P.useState(""),[o,a]=P.useState(""),[c,d]=P.useState(""),[f,m]=P.useState(""),[g,T]=P.useState(""),[S,A]=P.useState(""),[C,x]=P.useState("30"),[v,b]=P.useState("64"),[D,L]=P.useState("10"),[M,E]=P.useState({}),[y,I]=P.useState(!1),[w,N]=P.useState(!1),[R,k]=P.useState("pulse");if(P.useEffect(()=>{const $=[setTimeout(()=>k("open"),2500),setTimeout(()=>k("form"),4500)];return()=>$.forEach(clearTimeout)},[]),e)return u.jsx("div",{children:"Loading..."});if(t)return u.jsx(vd,{to:"/dashboard",replace:!0});const le=async $=>{$.preventDefault(),E({}),N(!0);try{await Ee.login(n,r)}catch(oe){E({credential:oe.message})}finally{N(!1)}},J=async $=>{if($.preventDefault(),r!==S){E({confirmPassword:"Confirm Password field must be the same as the Password field"});return}E({}),N(!0);try{await Ee.register({email:o,password:r,username:c,firstName:f,lastName:g,exerciseGoalMinutes:parseInt(C),waterGoalOz:parseInt(v),meditationGoalMinutes:parseInt(D)})}catch(oe){E({general:oe.message})}finally{N(!1)}};return u.jsxs("div",{className:"welcome-container",children:[R!=="form"&&u.jsx("div",{className:`awakening-bg ${R}`,children:u.jsx("div",{className:"awakening-eye"})}),u.jsxs("div",{className:`welcome-card ${R==="form"?"visible":""}`,children:[u.jsxs("div",{className:"welcome-header",children:[u.jsx("img",{src:xx,alt:"Clarity logo"}),u.jsx("p",{children:"Begin your wellness today"})]}),y?u.jsxs("form",{className:"welcome-form",onSubmit:J,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Email"}),u.jsx("input",{type:"email",value:o,onChange:$=>a($.target.value),required:!0,placeholder:"Enter your email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username"}),u.jsx("input",{type:"text",value:c,onChange:$=>d($.target.value),required:!0,placeholder:"Choose a username"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"First Name"}),u.jsx("input",{type:"text",value:f,onChange:$=>m($.target.value),required:!0,placeholder:"Enter your first name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Last Name"}),u.jsx("input",{type:"text",value:g,onChange:$=>T($.target.value),required:!0,placeholder:"Enter your last name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:r,onChange:$=>i($.target.value),required:!0,placeholder:"Create a password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Confirm Password"}),u.jsx("input",{type:"password",value:S,onChange:$=>A($.target.value),required:!0,placeholder:"Confirm your password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Exercise Goal (minutes)"}),u.jsx("input",{type:"number",value:C,onChange:$=>x($.target.value),required:!0,placeholder:"Daily exercise goal in minutes"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Water Goal (oz)"}),u.jsx("input",{type:"number",value:v,onChange:$=>b($.target.value),required:!0,placeholder:"Daily water goal in ounces"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Meditation Goal (minutes)"}),u.jsx("input",{type:"number",value:D,onChange:$=>L($.target.value),required:!0,placeholder:"Daily meditation goal in minutes"})]}),M.confirmPassword&&u.jsx("p",{className:"error-message",children:M.confirmPassword}),M.general&&u.jsx("p",{className:"error-message",children:M.general}),u.jsx("button",{type:"submit",className:"primary-button",disabled:w,children:w?"Creating Account...":"Sign Up"})]}):u.jsxs("form",{className:"welcome-form",onSubmit:le,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username or Email"}),u.jsx("input",{type:"text",value:n,onChange:$=>s($.target.value),required:!0,placeholder:"Enter your username or email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:r,onChange:$=>i($.target.value),required:!0,placeholder:"Enter your password"})]}),M.credential&&u.jsx("p",{className:"error-message",children:M.credential}),u.jsx("button",{type:"submit",className:"primary-button",disabled:w,children:w?"Logging In...":"Log In"})]}),u.jsx("button",{className:"secondary-button",onClick:()=>I(!y),disabled:w,children:y?"Already have an account? Log In":"Don't have an account? Sign Up"})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Tp=function(t,e){return Tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r])},Tp(t,e)};function IV(t,e){Tp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var xV=100,bV=100,x2=50,Ip=50,xp=50;function b2(t){var e=t.className,n=t.counterClockwise,s=t.dashRatio,r=t.pathRadius,i=t.strokeWidth,o=t.style;return P.createElement("path",{className:e,style:Object.assign({},o,SV({pathRadius:r,dashRatio:s,counterClockwise:n})),d:kV({pathRadius:r,counterClockwise:n}),strokeWidth:i,fillOpacity:0})}function kV(t){var e=t.pathRadius,n=t.counterClockwise,s=e,r=n?1:0;return`
      M `+Ip+","+xp+`
      m 0,-`+s+`
      a `+s+","+s+" "+r+" 1 1 0,"+2*s+`
      a `+s+","+s+" "+r+" 1 1 0,-"+2*s+`
    `}function SV(t){var e=t.counterClockwise,n=t.dashRatio,s=t.pathRadius,r=Math.PI*2*s,i=(1-n)*r;return{strokeDasharray:r+"px "+r+"px",strokeDashoffset:(e?-i:i)+"px"}}var zf=function(t){IV(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return x2-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var n=this.props,s=n.value,r=n.minValue,i=n.maxValue,o=Math.min(Math.max(s,r),i);return(o-r)/(i-r)},e.prototype.render=function(){var n=this.props,s=n.circleRatio,r=n.className,i=n.classes,o=n.counterClockwise,a=n.styles,c=n.strokeWidth,d=n.text,f=this.getPathRadius(),m=this.getPathRatio();return P.createElement("svg",{className:i.root+" "+r,style:a.root,viewBox:"0 0 "+xV+" "+bV,"data-test-id":"CircularProgressbar"},this.props.background?P.createElement("circle",{className:i.background,style:a.background,cx:Ip,cy:xp,r:x2}):null,P.createElement(b2,{className:i.trail,counterClockwise:o,dashRatio:s,pathRadius:f,strokeWidth:c,style:a.trail}),P.createElement(b2,{className:i.path,counterClockwise:o,dashRatio:m*s,pathRadius:f,strokeWidth:c,style:a.path}),d?P.createElement("text",{className:i.text,style:a.text,x:Ip,y:xp},d):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(P.Component);function Uf(t){var e=t.rotation,n=t.strokeLinecap,s=t.textColor,r=t.textSize,i=t.pathColor,o=t.pathTransition,a=t.pathTransitionDuration,c=t.trailColor,d=t.backgroundColor,f=e==null?void 0:"rotate("+e+"turn)",m=e==null?void 0:"center center";return{root:{},path:pu({stroke:i,strokeLinecap:n,transform:f,transformOrigin:m,transition:o,transitionDuration:a==null?void 0:a+"s"}),trail:pu({stroke:c,strokeLinecap:n,transform:f,transformOrigin:m}),text:pu({fill:s,fontSize:r}),background:pu({fill:d})}}function pu(t){return Object.keys(t).forEach(function(e){t[e]==null&&delete t[e]}),t}const B={getUserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone},getCurrentLocalTime(){return new Date},getStartOfDay(t=new Date){const e=new Date(t);return e.setHours(0,0,0,0),e},getEndOfDay(t=new Date){const e=new Date(t);return e.setHours(23,59,59,999),e},formatLocalDate(t){return t.toLocaleDateString("en-CA")},formatLocalDateTime(t){return t.toLocaleString()},formatLocalTime(t){return t.toLocaleTimeString()},getLocalDateRange(t=7){const e=this.getEndOfDay(new Date),n=this.getStartOfDay(new Date);return n.setDate(n.getDate()-(t-1)),{startDate:n,endDate:e}},isToday(t){const e=new Date;return this.formatLocalDate(t)===this.formatLocalDate(e)},isSameLocalDay(t,e){return this.formatLocalDate(t)===this.formatLocalDate(e)},toLocalTimezone(t){return new Date(t)},getRelativeTime(t){const n=new Date-t,s=Math.floor(n/6e4),r=Math.floor(s/60),i=Math.floor(r/24);return s<1?"Just now":s<60?`${s} minutes ago`:r<24?`${r} hours ago`:i===1?"Yesterday":i<7?`${i} days ago`:this.formatLocalDate(t)},getCurrentWeekRange(){const t=new Date,e=t.getDay(),n=new Date(t);n.setHours(0,0,0,0),n.setDate(t.getDate()-e);const s=new Date(n);return s.setDate(n.getDate()+6),s.setHours(23,59,59,999),{startDate:n,endDate:s}}},ms={async logWorkout(t,e){try{console.log("🌍 Logging workout in timezone:",B.getUserTimezone());let n=B.getCurrentLocalTime();e.date&&(n=B.toLocalTimezone(e.date));const s={title:e.title,type:e.type||"General",durationMinutes:e.durationMinutes,date:n,notes:e.notes||"",caloriesBurned:e.caloriesBurned||0,completed:!0,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),sentiment:e.sentiment||null},r=await ky(rn(Ie,`users/${t}/workouts`),s);return{id:r.id,success:!0,workout:{...e,id:r.id}}}catch(n){throw new Error("Error logging workout: "+n.message)}},async fetchWorkoutsByUser(t){try{const e=Kn(rn(Ie,`users/${t}/workouts`),Qn("date","desc"));return{workouts:(await Yn(e)).docs.map(r=>{var i,o,a,c;return{id:r.id,...r.data(),date:(i=r.data().date)==null?void 0:i.toDate(),localDate:B.formatLocalDate((o=r.data().date)==null?void 0:o.toDate()),localDateTime:B.formatLocalDateTime((a=r.data().date)==null?void 0:a.toDate()),relativeTime:B.getRelativeTime((c=r.data().date)==null?void 0:c.toDate())}})}}catch(e){throw new Error("Error fetching workouts: "+e.message)}},async updateWorkout(t,e,n){try{const s=rt(Ie,`users/${t}/workouts`,e),r={...n,updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()};return n.date&&(r.date=B.toLocalTimezone(n.date)),await xr(s,r),{success:!0,workout:{id:e,...n}}}catch(s){throw new Error("Error updating workout: "+s.message)}},async deleteWorkout(t,e){try{return await by(rt(Ie,`users/${t}/workouts`,e)),{success:!0,message:"Workout deleted successfully"}}catch(n){throw new Error("Error deleting workout: "+n.message)}},async getWorkoutSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange();console.log("🌍 Weekly workout query for timezone:",B.getUserTimezone()),console.log("📅 Query range:",B.formatLocalDateTime(e),"to",B.formatLocalDateTime(n));const s=Kn(rn(Ie,`users/${t}/workouts`),Ct("date",">=",e),Ct("date","<=",n),Qn("date","desc")),i=(await Yn(s)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),o=i.reduce((c,d)=>c+(d.durationMinutes||0),0),a=i.reduce((c,d)=>c+(d.caloriesBurned||0),0);return{totalWorkouts:i.length,totalMinutes:o,totalCalories:a,workouts:i.slice(0,5),period:"This week",userTimezone:B.getUserTimezone()}}catch(e){throw new Error("Error fetching workout summary: "+e.message)}},async getDailyWorkoutSummary(t,e=new Date){try{const{startDate:n,endDate:s}={startDate:B.getStartOfDay(e),endDate:B.getEndOfDay(e)};console.log("🌍 Daily workout query for timezone:",B.getUserTimezone()),console.log("📅 Query range:",B.formatLocalDateTime(n),"to",B.formatLocalDateTime(s));const r=Kn(rn(Ie,`users/${t}/workouts`),Ct("date",">=",n),Ct("date","<=",s),Qn("date","desc")),o=(await Yn(r)).docs.map(f=>{var m;return{id:f.id,...f.data(),date:(m=f.data().date)==null?void 0:m.toDate()}});console.log("💪 Found workouts for today:",o.length);const a=o.reduce((f,m)=>f+(m.durationMinutes||0),0),c=o.length,d=o.reduce((f,m)=>f+(m.caloriesBurned||0),0);return{date:B.formatLocalDate(e),totalWorkouts:c,completedWorkouts:c,totalMinutes:a,caloriesBurned:d,lastWorkout:o.length>0?o[0]:null,workouts:o,hasWorkoutsToday:o.length>0,mostCommonType:o.length>0?this.getMostCommonWorkoutType(o):null,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily workout summary:",n),this.getEmptyDailySummary(e)}},async getWorkoutAnalytics(t,e=30){try{const s=(await this.fetchWorkoutsByUser(t)).workouts;if(s.length===0)return{totalEntries:0,averageDuration:0,averageSentiment:0,sentimentTrend:"neutral"};const r=s.reduce((c,d)=>c+(d.durationMinutes||0),0),i=s.map(c=>typeof c.sentiment=="number"?c.sentiment:0),o=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:0;let a="neutral";return o>0?a="positive":o<0&&(a="negative"),{totalEntries:s.length,averageDuration:r/s.length,averageSentiment:o,sentimentTrend:a}}catch(n){throw new Error("Error fetching workout analytics: "+n.message)}},async getPersonalizedWorkoutRecommendations(t){try{const e=await this.getWorkoutAnalytics(t),n=[];return e.averageSentiment<0&&n.push({type:"sentiment",message:"Your workout notes have been a bit negative. Try celebrating small wins and focusing on progress, not perfection!",action:"Reflect on what went well after each workout."}),e.averageDuration<20&&n.push({type:"duration",message:"Your average workout duration is below 20 minutes. Consider increasing your session length for better results.",action:"Try a 30-minute session this week."}),{recommendations:n}}catch(e){throw new Error("Error generating workout recommendations: "+e.message)}},getMostCommonWorkoutType(t){if(t.length===0)return null;const e={};return t.forEach(n=>{e[n.type]=(e[n.type]||0)+1}),Object.keys(e).reduce((n,s)=>e[n]>e[s]?n:s)},getEmptyDailySummary(t){return{date:B.formatLocalDate(t),totalWorkouts:0,completedWorkouts:0,totalMinutes:0,caloriesBurned:0,lastWorkout:null,workouts:[],hasWorkoutsToday:!1,mostCommonType:null,userTimezone:B.getUserTimezone()}}},Wt={async logWaterIntake(t,e){try{const n={amount:e.amount,date:B.toLocalTimezone(e.date||new Date),userId:t,createdAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),sentiment:e.sentiment||null},s=await ky(rn(Ie,`users/${t}/waterIntake`),n);return{id:s.id,success:!0,waterIntake:{...e,id:s.id}}}catch(n){throw new Error("Error logging water intake: "+n.message)}},async fetchWaterIntakeByUser(t,e=30){try{const n=B.getStartOfDay(new Date);n.setDate(n.getDate()-e),console.log("💧 fetchWaterIntakeByUser - Start date:",n.toLocaleDateString());const s=Kn(rn(Ie,`users/${t}/waterIntake`),Ct("date",">=",n),Qn("date","desc")),i=(await Yn(s)).docs.map(o=>{var c;const a=o.data();return{id:o.id,...a,date:(c=a.date)!=null&&c.toDate?a.date.toDate():a.date}});return console.log("💧 fetchWaterIntakeByUser - Found intakes:",i.length),{waterIntakes:i}}catch(n){throw console.error("💧 fetchWaterIntakeByUser error:",n),new Error("Error fetching water intake: "+n.message)}},async updateWaterIntake(t,e,n){try{const s=rt(Ie,`users/${t}/waterIntake`,e);return await xr(s,{...n,updatedAt:new Date}),{success:!0,waterIntake:{id:e,...n}}}catch(s){throw new Error("Error updating water intake: "+s.message)}},async deleteWaterIntake(t,e){try{return await by(rt(Ie,`users/${t}/waterIntake`,e)),{success:!0,message:"Water intake deleted successfully"}}catch(n){throw new Error("Error deleting water intake: "+n.message)}},async getTodayWaterIntake(t){try{const e=B.getStartOfDay(new Date),n=B.getEndOfDay(new Date);n.setMilliseconds(n.getMilliseconds()+1),console.log("💧 getTodayWaterIntake - Date range:",{today:e.toLocaleDateString(),tomorrow:n.toLocaleDateString(),todayISO:e.toISOString(),tomorrowISO:n.toISOString()});const s=Kn(rn(Ie,`users/${t}/waterIntake`),Ct("date",">=",e),Ct("date","<",n),Qn("date","desc")),i=(await Yn(s)).docs.map(a=>{var d;const c=a.data();return{...c,date:(d=c.date)!=null&&d.toDate?c.date.toDate():c.date}});return console.log("💧 getTodayWaterIntake - Found intakes:",i.length),i.forEach(a=>{var c;console.log("  -",a.amount,"oz on",(c=a.date)==null?void 0:c.toLocaleDateString())}),{totalOz:i.reduce((a,c)=>a+(c.amount||0),0),intakeCount:i.length,intakes:i}}catch(e){throw console.error("💧 getTodayWaterIntake error:",e),new Error("Error fetching today's water intake: "+e.message)}},async getWaterSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),s=Kn(rn(Ie,`users/${t}/waterIntake`),Ct("date",">=",e),Ct("date","<=",n),Qn("date","desc")),i=(await Yn(s)).docs.map(f=>f.data()),o={};i.forEach(f=>{const m=f.date.toDate().toDateString();o[m]=(o[m]||0)+f.amount});const a=i.reduce((f,m)=>f+(m.amount||0),0),c=7,d=c>0?a/c:0;return{totalOz:a,averageOz:d,dailyTotals:o,intakeCount:i.length}}catch(e){throw new Error("Error fetching water summary: "+e.message)}},async getDailyWaterIntake(t,e=new Date){try{const n=B.getStartOfDay(e),s=B.getEndOfDay(e),r=Kn(rn(Ie,`users/${t}/waterIntake`),Ct("date",">=",n),Ct("date","<=",s),Qn("date","desc")),o=(await Yn(r)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),a=o.reduce((c,d)=>c+(d.amount||0),0);return{date:B.formatLocalDate(e),totalOz:a,totalEntries:o.length,entries:o,hasWaterToday:o.length>0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily water intake:",n),{date:B.formatLocalDate(e),totalOz:0,totalEntries:0,entries:[],hasWaterToday:!1,userTimezone:B.getUserTimezone()}}},async getWaterAnalytics(t,e=30){try{const s=(await this.fetchWaterIntakeByUser(t,e)).waterIntakes;if(s.length===0)return{totalEntries:0,averageAmount:0,averageSentiment:0,sentimentTrend:"neutral"};const r=s.reduce((c,d)=>c+(d.amount||0),0),i=s.map(c=>typeof c.sentiment=="number"?c.sentiment:0),o=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:0;let a="neutral";return o>0?a="positive":o<0&&(a="negative"),{totalEntries:s.length,averageAmount:r/s.length,averageSentiment:o,sentimentTrend:a}}catch(n){throw new Error("Error fetching water analytics: "+n.message)}},async getPersonalizedWaterRecommendations(t){try{const e=await this.getWaterAnalytics(t),n=[];return e.averageSentiment<0&&n.push({type:"sentiment",message:"Your water intake notes have been a bit negative. Try associating hydration with positive routines or rewards!",action:"Pair water breaks with something you enjoy."}),e.averageAmount<32&&n.push({type:"hydration",message:"Your average daily water intake is below recommended levels. Aim for at least 64oz per day.",action:"Set reminders to drink more water."}),{recommendations:n}}catch(e){throw new Error("Error generating water recommendations: "+e.message)}},calculateHourlyWaterIntake(t){const e={};return t.forEach(n=>{const s=n.date.getHours();e[s]=(e[s]||0)+n.amount}),e}},ps={async logMeditation(t,e){try{const n={title:e.title||"Meditation Session",type:e.type||"mindfulness",soundscape:e.soundscape||"silence",durationMinutes:e.durationMinutes,targetDuration:e.targetDuration||e.durationMinutes,completed:e.completed||!1,deepStateAchieved:e.deepStateAchieved||!1,date:B.toLocalTimezone(e.date||new Date),notes:e.notes||"",moodBefore:e.moodBefore||"",moodAfter:e.moodAfter||"",guidedSession:e.guidedSession||!1,interruptions:e.interruptions||0,heartRateData:e.heartRateData||null,brainwaveFrequency:e.brainwaveFrequency||null,focusLevel:e.focusLevel||null,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),sentiment:e.sentiment||null},s=await ky(rn(Ie,`users/${t}/meditations`),n);return{id:s.id,success:!0,meditation:{...n,id:s.id}}}catch(n){throw new Error("Error logging meditation: "+n.message)}},async fetchMeditationsByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const s=Kn(rn(Ie,`users/${t}/meditations`),Ct("date",">=",n),Qn("date","desc"));return{meditations:(await Yn(s)).docs.map(o=>{var a;return{id:o.id,...o.data(),date:(a=o.data().date)==null?void 0:a.toDate()}})}}catch(n){throw new Error("Error fetching meditations: "+n.message)}},async getMeditationAnalytics(t,e=30){try{const s=(await this.fetchMeditationsByUser(t,e)).meditations;if(s.length===0)return{totalSessions:0,deepStateSuccessRate:0,averageDuration:0,favoriteTime:"morning",favoriteSound:"silence",moodImprovement:0};const i=s.filter(f=>f.deepStateAchieved).length/s.length*100,o={},a={},c=[],d=[];return s.forEach(f=>{o[f.soundscape]=(o[f.soundscape]||0)+1;const m=f.date.getHours(),g=m<12?"morning":m<18?"afternoon":"evening";if(a[g]=(a[g]||0)+1,f.moodBefore&&f.moodAfter){const T={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6},S=T[f.moodBefore]||3,A=T[f.moodAfter]||3;c.push(A-S)}f.sentiment&&d.push(f.sentiment)}),{totalSessions:s.length,deepStateSuccessRate:Math.round(i),averageDuration:s.reduce((f,m)=>f+m.durationMinutes,0)/s.length,favoriteTime:Object.keys(a).reduce((f,m)=>a[f]>a[m]?f:m,"morning"),favoriteSound:Object.keys(o).reduce((f,m)=>o[f]>o[m]?f:m,"silence"),moodImprovement:c.length>0?c.reduce((f,m)=>f+m,0)/c.length:0,consistency:s.length/e,averageSentiment:d.length>0?d.reduce((f,m)=>f+m,0)/d.length:0}}catch(n){throw new Error("Error fetching meditation analytics: "+n.message)}},async getPersonalizedRecommendations(t){try{const e=await this.getMeditationAnalytics(t),n=[];return e.deepStateSuccessRate<50&&n.push({type:"duration",message:"Try longer sessions (7-10 minutes) to achieve deeper states",action:"Increase session length"}),e.favoriteSound==="silence"&&n.push({type:"soundscape",message:'Research shows binaural beats can enhance focus. Try our "Deep Focus" soundscape.',action:"Try binaural beats"}),e.consistency<.5&&n.push({type:"consistency",message:`Your best time is ${e.favoriteTime}. Set a daily reminder for consistent practice.`,action:"Set daily reminder"}),e.averageSentiment<4&&n.push({type:"sentiment",message:"Your recent meditations have been on the lower end of the scale. Try to maintain a more positive mindset during your sessions.",action:"Focus on positive thoughts"}),{recommendations:n}}catch(e){throw new Error("Error generating recommendations: "+e.message)}},async updateMeditation(t,e,n){try{const s=rt(Ie,`users/${t}/meditations`,e);return await xr(s,{...n,updatedAt:new Date}),{success:!0,meditation:{id:e,...n}}}catch(s){throw new Error("Error updating meditation: "+s.message)}},async deleteMeditation(t,e){try{return await by(rt(Ie,`users/${t}/meditations`,e)),{success:!0,message:"Meditation deleted successfully"}}catch(n){throw new Error("Error deleting meditation: "+n.message)}},async getMeditationSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),s=Kn(rn(Ie,`users/${t}/meditations`),Ct("date",">=",e),Ct("date","<=",n),Qn("date","desc")),i=(await Yn(s)).docs.map(d=>d.data()),o=i.reduce((d,f)=>d+(f.durationMinutes||0),0),a=i.length>0?o/i.length:0,c=i.length>0?i.filter(d=>d.deepStateAchieved).length/i.length*100:0;return{totalSessions:i.length,totalMinutes:o,averageDuration:a,deepStateSuccessRate:c,favoriteSoundscape:i.length>0?this.getMostFrequent(i,"soundscape"):"silence",favoriteTime:i.length>0?this.getMostFrequent(i,"timeOfDay"):"morning",moodImprovement:this.calculateMoodImprovement(i)}}catch(e){throw console.error("Error fetching meditation summary:",e),new Error("Error fetching meditation summary: "+e.message)}},getMostFrequent(t,e){const n={};return t.forEach(s=>{const r=e==="timeOfDay"?this.getTimeOfDay(s.date):s[e];n[r]=(n[r]||0)+1}),Object.keys(n).reduce((s,r)=>n[s]>n[r]?s:r)},getTimeOfDay(t){let e;if(t instanceof Date)e=t;else if(typeof t=="string")e=new Date(t);else if(t&&t.seconds)e=new Date(t.seconds*1e3);else return console.warn("Invalid date format:",t),"unknown";if(isNaN(e.getTime()))return console.warn("Invalid date object:",t),"unknown";const n=e.getHours();return n<6?"night":n<12?"morning":n<17?"afternoon":n<21?"evening":"night"},calculateMoodImprovement(t){const e={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6};let n=0,s=0;return t.forEach(r=>{const i=e[r.moodBefore]||3,o=e[r.moodAfter]||3;n+=o-i,s++}),s>0?n/s:0},async getDailyMeditationSummary(t,e=new Date){try{const n=B.getStartOfDay(e),s=B.getEndOfDay(e);console.log("🌍 Daily meditation query for timezone:",B.getUserTimezone());const r=Kn(rn(Ie,`users/${t}/meditations`),Ct("date",">=",n),Ct("date","<=",s),Qn("date","desc")),o=(await Yn(r)).docs.map(C=>{var x;return{id:C.id,...C.data(),date:(x=C.data().date)==null?void 0:x.toDate()}}),a=o.reduce((C,x)=>C+(x.durationMinutes||0),0),c=o.filter(C=>C.completed).length,d=o.length>0?a/o.length:0,f=o.filter(C=>C.deepStateAchieved).length,m=o.length>0?f/o.length*100:0,g=o.length>0?o[0]:null,T=o.length>0?this.getMostFrequent(o,"soundscape"):"silence",S=o.length>0?this.getMostFrequent(o,"timeOfDay"):"morning",A=this.calculateMoodImprovement(o);return{date:B.formatLocalDate(e),totalSessions:o.length,completedSessions:c,totalMinutes:a,averageDuration:Math.round(d*10)/10,deepStateAchieved:f,deepStateSuccessRate:Math.round(m),lastSession:g,favoriteSoundscape:T,favoriteTime:S,moodImprovement:Math.round(A*100)/100,sessions:o,hasSessionsToday:o.length>0,mostRecentType:(g==null?void 0:g.type)||"mindfulness",mostRecentSoundscape:(g==null?void 0:g.soundscape)||"silence",timeOfLastSession:(g==null?void 0:g.date)||null,totalInterruptions:o.reduce((C,x)=>C+(x.interruptions||0),0),averageFocusLevel:o.length>0?o.reduce((C,x)=>C+(x.focusLevel||5),0)/o.length:0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily meditation summary:",n),{date:e.toISOString().split("T")[0],totalSessions:0,completedSessions:0,totalMinutes:0,averageDuration:0,deepStateAchieved:0,deepStateSuccessRate:0,lastSession:null,favoriteSoundscape:"silence",favoriteTime:"morning",moodImprovement:0,sessions:[],hasSessionsToday:!1,mostRecentType:"mindfulness",mostRecentSoundscape:"silence",timeOfLastSession:null,totalInterruptions:0,averageFocusLevel:0,userTimezone:B.getUserTimezone()}}}},k2=["You are capable of amazing things.","You are loved.","You are strong.","You are beautiful.","You are enough.","You are worthy.","You are important.","You are talented.","You are special.","I am capable and strong","I am loved and loving","I am healthy and happy","I am wealthy and wise","Believe in yourself and all that you are.","You are amazing.","You are stronger than you think.","You are braver than you believe.","Every day is a new opportunity.","You are worth it.","You are worthy of all the good things.","You are deserving of love and happiness.","Stay positive, work hard, make it happen.","You are enough just as you are.","You are doing great.","Your potential is limitless.","You are a work of art.","You are doing great.","You are a gift to the world.","Keep going, you are getting there.","You are a masterpiece."],S2="https://createstripecheckoutsession-z5fchdkthq-uc.a.run.app";async function sl(){const t=eT().currentUser;if(!t){alert("You must be logged in to upgrade.");return}try{console.log("🔧 Starting Stripe upgrade with direct HTTP call"),console.log("👤 User ID:",t.uid),console.log("🌐 Function URL:",S2);const e=await fetch(S2,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t.uid})});if(console.log("📡 Response status:",e.status),console.log("📡 Response headers:",e.headers),!e.ok){const r=await e.text();throw console.error("❌ HTTP error response:",r),new Error(`HTTP error! status: ${e.status}, body: ${r}`)}const n=await e.json();console.log("✅ Function call successful:",n);const{url:s}=n;console.log("🔗 Redirecting to Stripe checkout:",s),window.location.href=s}catch(e){console.error("❌ Error creating Stripe checkout session:",e),console.error("❌ Error details:",e.message),alert("Error creating checkout session. Please try again.")}}function A2(){const t=Math.floor(Math.random()*k2.length);return k2[t]}function AV(){const t=hh(),{user:e,loading:n,isPremium:s}=xn(),[r,i]=P.useState(null),[o,a]=P.useState({workout:{totalMinutes:0,sessions:0,hasWorkoutsToday:!1},meditation:{totalMinutes:0,sessions:0,hasSessionsToday:!1,deepStateAchieved:0},water:{totalOz:0,entries:0,hasWaterToday:!1}}),[c,d]=P.useState(30),[f,m]=P.useState(10),[g,T]=P.useState(64),[S,A]=P.useState(A2()),[C,x]=P.useState(!0),[v,b]=P.useState(!1),[D,L]=P.useState(0),[M,E]=P.useState([]);if(P.useEffect(()=>{if(!n&&!e){t("/welcome",{replace:!0});return}},[e,n,t]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{x(!0);const k=B.getCurrentLocalTime();console.log("🌍 Dashboard timezone:",B.getUserTimezone()),console.log("📅 Local today:",B.formatLocalDateTime(k));const le=await Ee.getUserProfile(e.uid);i(le.user),d(le.user.exerciseGoalMinutes||30),m(le.user.meditationGoalMinutes||10),T(le.user.waterGoalOz||64),console.log("📊 Fetching workout data for date:",k);const[J,$,oe]=await Promise.all([ms.getDailyWorkoutSummary(e.uid,k),ps.getDailyMeditationSummary(e.uid,k),Wt.getDailyWaterIntake(e.uid,k)]);console.log("📊 Raw workout data from Dashboard:",J),console.log("🧘 Raw meditation data:",$),console.log("💧 Raw water data:",oe),a({workout:{totalMinutes:J.totalMinutes||0,sessions:J.totalWorkouts||0,hasWorkoutsToday:J.hasWorkoutsToday||J.totalMinutes>0,calories:J.caloriesBurned||0,lastWorkoutType:J.mostCommonType},meditation:{totalMinutes:$.totalMinutes||0,sessions:$.totalSessions||0,hasSessionsToday:$.hasSessionsToday||!1,deepStateAchieved:$.deepStateAchieved||0,moodImprovement:$.moodImprovement||0,lastSessionType:$.mostRecentType},water:{totalOz:oe.totalOz||0,entries:oe.totalEntries||oe.entries||0,hasWaterToday:(oe.totalOz||0)>0,averagePerEntry:oe.averagePerEntry||0,isOnTrack:(oe.totalOz||0)>=(le.user.waterGoalOz||64)*.75}})}catch(k){console.error("Error fetching daily data:",k)}finally{x(!1)}})()},[e]),P.useEffect(()=>{const R=localStorage.getItem("affirmation"),k=localStorage.getItem("affirmationDate"),le=new Date().toISOString().split("T")[0];if(R&&k===le)A(R);else{const J=A2();A(J),localStorage.setItem("affirmation",J),localStorage.setItem("affirmationDate",le)}},[]),P.useEffect(()=>{if(console.log("Trial modal effect running",r),r&&r.subscriptionStatus==="trial_expired"&&r.subscription==="free"){const R=localStorage.getItem("dontRemindTrial"),k=localStorage.getItem("lastTrialReminded");console.log("dontRemindTrial:",R),console.log("lastReminded:",k);const le=1e3*60*60*24*7,J=Date.now();R||(!k||J-Number(k)>le)&&(b(!0),localStorage.setItem("lastTrialReminded",J),console.log("Showing trial modal!"))}},[r]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid){const k=await Ee.getPoints(e.uid);L(k)}})()},[e]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{const[k,le,J]=await Promise.all([ps.getPersonalizedRecommendations(e.uid),Wt.getPersonalizedWaterRecommendations(e.uid),ms.getPersonalizedWorkoutRecommendations(e.uid)]),$=[...(k==null?void 0:k.recommendations)||[],...(le==null?void 0:le.recommendations)||[],...(J==null?void 0:J.recommendations)||[]];E($)}catch(k){console.error("Error fetching recommendations:",k)}})()},[e]),n||C)return u.jsx("div",{className:"dashboard-loading",children:"Loading..."});if(!e)return u.jsx("div",{className:"dashboard-loading",children:"Redirecting..."});if(!r)return u.jsx("div",{className:"dashboard-loading",children:"Loading user data..."});if(!r.firstName||!r.exerciseGoalMinutes||!r.waterGoalOz||!r.meditationGoalMinutes)return u.jsx("div",{className:"dashboard-loading",children:"Loading user profile..."});const y=Math.min(o.workout.totalMinutes/c*100,100)||0,I=Math.min(o.meditation.totalMinutes/f*100,100)||0,w=Math.min(o.water.totalOz/g*100,100)||0,N=Math.max(c-o.workout.totalMinutes,0);return r.subscriptionStatus==="trial_expired"&&r.subscription,u.jsxs("div",{className:"dashboard-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:"⭐"})," ",D," Points"]}),u.jsxs("div",{className:"welcome-section",children:[u.jsxs("h1",{children:["Welcome back, ",r.firstName,"!"]}),u.jsx("p",{children:"Here's your wellness progress for today"})]}),u.jsxs("div",{className:"progress-bars",children:[u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"💪 Today's Workout"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",c," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.workout.totalMinutes," / ",c," min"]}),u.jsx(zf,{value:y,text:`${Math.round(y)}%`,styles:Uf({pathColor:`rgba(62, 152, 199, ${Math.max(y/100,.3)})`,textColor:"#3e98c7"})}),u.jsx("div",{className:"daily-stats",children:o.workout.hasWorkoutsToday?u.jsxs("span",{children:["✅ ",o.workout.sessions," workouts logged"]}):u.jsx("span",{children:"No workouts logged today"})}),u.jsx("button",{className:"track-button",onClick:()=>t("/workout"),children:"Log Workout"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"🧘‍♀️ Today's Meditation"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",f," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.meditation.totalMinutes," / ",f," min"]}),u.jsx(zf,{value:I,text:`${Math.round(I)}%`,styles:Uf({pathColor:`rgba(138, 43, 226, ${Math.max(I/100,.3)})`,textColor:"#8a2be2"})}),u.jsxs("div",{className:"daily-stats",children:[o.meditation.hasSessionsToday?u.jsxs("span",{children:["✅ ",o.meditation.sessions," sessions completed"]}):u.jsx("span",{children:"No meditation logged today"}),o.meditation.deepStateAchieved>0&&u.jsxs("span",{className:"deep-state",children:["🌟 ",o.meditation.deepStateAchieved," deep states"]})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/meditation"),children:"Start Meditation"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"💧 Today's Hydration"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",g," oz"]}),u.jsxs("p",{className:"current-text",children:[o.water.totalOz," / ",g," oz"]}),u.jsx(zf,{value:w,text:`${Math.round(w)}%`,styles:Uf({pathColor:`rgba(30, 144, 255, ${Math.max(w/100,.3)})`,textColor:"#1e90ff"})}),u.jsxs("div",{className:"daily-stats",children:[o.water.hasWaterToday?u.jsxs("span",{children:["✅ ",o.water.entries," water entries"]}):u.jsx("span",{children:"No water logged today"}),o.water.isOnTrack&&u.jsx("span",{className:"on-track",children:"🎯 On track for hydration!"})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/water"),children:"Log Water"})]})]}),N>0&&u.jsx("div",{className:"notification-bar",children:u.jsxs("p",{children:["🔥 You are ",N," minutes away from your daily workout goal!"]})}),y>=100&&I>=100&&w>=100&&u.jsx("div",{className:"celebration-bar",children:u.jsx("p",{children:"🎉 Congratulations! You've achieved all your daily wellness goals! 🎉"})}),u.jsxs("div",{className:"affirmation-bar",children:[u.jsx("p",{children:"🌸 Daily Affirmation 🌸"}),u.jsx("h2",{children:S})]}),u.jsxs("div",{className:"quick-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.workout.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Exercised Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.water.totalOz}),u.jsx("span",{className:"stat-label",children:"Ounces of Water Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.meditation.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Meditated Today"})]})]}),M.length>0&&u.jsxs("div",{className:"ai-recommendations soft-card",children:[u.jsx("h2",{children:"AI-Powered Recommendations"}),u.jsx("ul",{children:M.map((R,k)=>u.jsxs("li",{className:"recommendation-item",children:[u.jsxs("strong",{children:[R.type&&R.type.charAt(0).toUpperCase()+R.type.slice(1),":"]})," ",R.message,R.action&&u.jsxs("div",{className:"recommendation-action",children:["Action: ",R.action]})]},k))})]}),v&&u.jsx("div",{className:"trial-modal-overlay",children:u.jsxs("div",{className:"trial-modal",children:[u.jsx("h2",{children:"Your free trial has ended"}),u.jsx("p",{children:"Upgrade to keep enjoying premium features!"}),u.jsx("button",{className:"primary-button",onClick:sl,children:"Upgrade with Stripe"}),u.jsxs("div",{className:"trial-modal-actions",children:[u.jsx("button",{className:"secondary-button",onClick:()=>b(!1),children:"Remind me later"}),u.jsx("button",{className:"link-button",onClick:()=>{localStorage.setItem("dontRemindTrial","true"),b(!1)},children:"Don't remind me again"})]})]})})]})}var PV=function(t){return t.toLowerCase().replace(/\n/g," ").replace(/[.,\/#!?$%\^&\*;:{}=_`\"~()]/g," ").replace(/\s\s+/g," ").trim().split(" ")};function NV(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const CV={"😂":1,"❤":3,"♥":3,"😍":3,"😭":-1,"😘":3,"😊":3,"👌":2,"💕":3,"👏":2,"😁":2,"☺":3,"♡":3,"👍":2,"😩":-2,"🙏":2,"✌":2,"😏":1,"😉":2,"🙌":2,"🙈":2,"💪":2,"😄":2,"😒":-2,"💃":3,"💖":3,"😃":2,"😔":-1,"🎉":3,"😜":2,"🌸":3,"💜":3,"💙":3,"✨":1,"💗":3,"★":1,"█":-1,"☀":2,"😡":-1,"😎":2,"💋":3,"😋":3,"🙊":2,"😴":-1,"🎶":2,"💞":3,"😌":2,"🔫":-1,"💛":3,"💁":1,"💚":3,"♫":1,"😞":-1,"😆":2,"😝":2,"😪":-1,"😫":-1,"👊":1,"💀":-2,"😀":2,"😚":3,"😻":3,"💘":3,"☕":1,"👋":2,"🎊":3,"🍕":2,"❄":2,"😕":-2,"💔":-1,"😤":-2,"😈":1,"✈":2,"🔝":2,"😰":-1,"⚽":3,"😑":-2,"👑":3,"👉":1,"🍃":1,"🎁":3,"😠":-2,"🐧":2,"☆":2,"🍀":1,"🎈":3,"🎅":1,"😓":-1,"😣":-2,"😐":-2,"✊":2,"😨":-1,"😖":-1,"💤":1,"💓":3,"👎":-1,"💦":2,"✔":1,"😷":-1,"🙋":2,"🎄":2,"💩":-1,"🎵":2,"😛":3,"👯":2,"💎":2,"🌿":1,"🎂":3,"🌟":1,"🔮":1,"👫":1,"🏆":3,"✖":1,"☝":1,"😙":3,"⛄":2,"👅":2,"♪":2,"🍂":2,"💏":1,"🌴":2,"👈":2,"🌹":3,"🙆":2,"👻":1,"💰":1,"🍻":2,"🙅":-2,"🌞":2,"🍁":2,"⭐":2,"▪":1,"🎀":3,"🐷":1,"🙉":1,"🌺":2,"💅":1,"🐶":2,"🌚":2,"👽":1,"🎤":2,"👭":2,"🎧":2,"👆":1,"🍸":2,"🍷":2,"®":1,"🍉":3,"😇":3,"🏃":2,"😿":-2,"│":1,"🍺":2,"▶":1,"😲":-1,"🎸":2,"🍹":3,"💫":2,"📚":1,"😶":-1,"🌷":2,"💝":3,"💨":1,"🏈":2,"💍":2,"☔":1,"👸":3,"🇪":3,"░":-1,"🍩":1,"👾":1,"☁":1,"🌻":2,"↿":3,"🐯":2,"👼":1,"🍔":1,"😸":2,"👶":2,"↾":3,"💐":3,"🌊":2,"🍦":2,"🍓":3,"👇":1,"💆":1,"🍴":2,"😧":-1,"🇸":2,"😮":1,"🚫":-3,"😽":2,"🌈":2,"🙀":1,"⚠":-1,"🎮":2,"╯":-1,"🍆":2,"🍰":2,"✓":1,"👐":-1,"🍟":1,"🍌":2,"💑":3,"👬":-1,"🐣":2,"🎃":3,"▬":2,"￼":-3,"🐾":3,"🎓":2,"🏊":2,"📷":2,"👄":2,"🌼":4,"🚶":-1,"🐱":2,"🐸":-1,"🇺":2,"👿":-3,"🚬":2,"✿":1,"🐒":2,"🌍":3,"┊":5,"🐥":3,"🐼":1,"🎥":1,"💄":2,"⛔":2,"🏀":1,"💉":1,"💟":3,"🚗":1,"📝":1,"♦":2,"💭":1,"🌙":3,"🐟":3,"👣":1,"✂":-3,"🗿":2,"👪":-1,"🍭":1,"🌃":2,"❌":1,"🐰":3,"💊":2,"🚨":3,"😦":-2,"🍪":1,"🍣":-2,"✧":1,"🎆":3,"🎎":4,"🇩":3,"✅":2,"📱":1,"🙍":-2,"🍑":1,"🎼":1,"🔊":2,"🌌":2,"🍎":1,"🐻":2,"╰":-1,"💇":1,"♬":1,"🔴":2,"🍱":-2,"🍊":2,"🍒":1,"🐭":3,"👟":2,"🌎":1,"🍍":2,"🐮":3,"📲":1,"☼":1,"🌅":1,"🇷":3,"👠":1,"🌽":2,"💧":-1,"🍬":1,"😺":2,"🚀":2,"¦":3,"💢":1,"🎬":1,"🍧":1,"🍜":2,"🐏":3,"🏄":2,"➤":1,"⬆":1,"🍋":1,"🆗":2,"⚪":2,"📺":2,"🍅":1,"⛅":2,"🐢":1,"👙":2,"🏡":2,"🌾":2,"◉":1,"✏":1,"🐬":2,"🇹":3,"♣":1,"🐝":1,"🌝":1,"🇮":3,"🔋":-3,"🐍":1,"♔":2,"🔵":1,"😾":-2,"🌕":3,"🐨":2,"🔐":1,"💿":3,"🌳":2,"👰":2,"❀":2,"⚓":3,"🚴":3,"▀":-1,"👗":1,"➕":2,"💬":2,"▒":-1,"🔜":1,"🍨":1,"💲":1,"🍙":1,"🍥":-4,"▸":1,"♛":1,"😼":1,"🐙":2,"👨":2,"🍚":2,"♨":4,"🎹":1,"♕":2,"▃":5,"🇬":1,"🇧":1,"☠":-1,"🐠":2,"🚹":3,"💵":2,"✰":4,"╠":1,"👛":2,"🌱":3,"💻":1,"🌏":1,"▄":-1,"👓":1,"◄":1,"⚾":-1,"🌲":2,"👴":1,"🏠":2,"🍇":1,"🍘":2,"🐇":1,"🔞":-1,"👵":2,"◀":1,"🔙":1,"🌵":1,"🍮":-1,"🎇":3,"🐎":2,"➔":-1,"🐤":2,"╩":1,"🌑":2,"🚲":2,"🐑":-1,"🏁":2,"🎾":3,"╚":1,"🈹":1,"👮":-2,"☹":-3,"🐵":2,"✪":1,"◕":2,"🗼":3,"▐":-1,"♠":1,"┳":-2,"👺":-2,"🐚":1,"👂":-1,"🗽":1,"🍵":2,"🆒":2,"🐺":1,"⇨":2,"🌓":3,"🔒":1,"╬":-1,"👳":3,"🌂":1,"🚌":1,"♩":3,"🍡":-1,"❥":1,"🎡":1,"💌":2,"🐩":2,"🌜":2,"⌚":1,"🚿":3,"🔆":3,"🌛":3,"💂":-1,"🐔":1,"🙎":-1,"🏩":2,"🇫":2,"🔨":-1,"📢":2,"🐦":2,"🐲":-1,"♻":2,"🌘":3,"🌔":3,"👖":2,"😗":3,"🐄":1,"◟":-1,"🍢":-1,"🎨":1,"⬇":2,"🚼":3,"🇴":2,"🌗":3,"🌖":3,"🔅":5,"👜":1,"🐌":3,"💼":3,"🐹":1,"🌠":3,"🐈":1,"🌁":1,"⚫":1,"♧":2,"🏰":1,"🚵":2,"🎢":2,"🎷":3,"🎐":1,"┈":-4,"╗":2,"🌇":3,"⏰":2,"🚂":1,"◠":2,"🎿":2,"🆔":4,"🌒":3,"🐪":3,"╔":1,"╝":2,"👔":2,"🆓":1,"🐋":1,"▽":2,"🐛":1,"👕":2,"💳":2,"🏧":5,"💡":3,"⬅":2,"🐫":2,"🇱":2,"📹":2,"👞":2,"👚":3,"□":-2,"🚣":3,"🏉":3,"🗻":3,"╦":2,"⛺":3,"🐕":1,"🏂":2,"👡":2,"📻":2,"✒":1,"🌰":3,"🏢":1,"🎒":3,"⌒":3,"🏫":-2,"📴":4,"🚢":1,"🚚":-1,"🐉":1,"❒":1,"🔔":5,"◢":4,"🏥":1,"🚖":-1,"▌":-2,"☛":2,"💒":3,"🚤":2,"🐐":2,"■":-2,"🔚":2,"🎻":2,"🔷":1,"🎽":2,"📅":1,"🎺":3,"🍈":-3,"✉":1,"◤":5,"○":3,"🍼":3,"🚛":-2,"📓":1,"☉":1,"💴":-2,"➰":-1,"🔌":-1,"📕":1,"📣":2,"🚓":1,"🐗":3,"⛳":4,"┻":-3,"┛":3,"┃":2,"💺":1,"🏇":-1,"☻":1,"📞":2,"Ⓐ":-1,"🌉":3,"🚩":-2,"✎":3,"📃":2,"🏨":1,"📌":-3,"♎":-1,"💷":2,"🚄":3,"▲":3,"⛵":3,"🔸":1,"🚜":5,"🐆":2,"👒":1,"❕":1,"🔛":2,"♢":2,"🇲":2,"❅":4,"👝":2,"✞":2,"◡":1,"🎋":3,"👥":1,"🐡":1,"◆":4,"🔭":2,"🎪":1,"🐜":3,"♌":4,"☐":-5,"👷":1,"🔈":1,"📄":5,"🚐":4,"🌋":3,"📡":1,"🚳":5,"✘":4,"🅰":1,"🇼":2,"┓":3,"┣":3,"Ⓛ":2,"Ⓔ":2,"👤":4,"🚁":1,"🎠":3,"🐁":-2,"📗":1,"┐":-1,"♂":1,"📯":-1,"🔩":1,"👢":4,"◂":2,"📰":1,"📶":2,"🌄":1,"🗾":2,"🔶":2,"🏤":2,"🎩":2,"Ⓜ":1,"🔧":-4,"🐅":1,"♮":1,"🅾":-1,"📦":1,"🚊":1,"🔲":3,"△":1,"📆":5,"❛":2,"📉":2,"▵":2,"🔎":3,"☜":1,"🇯":2,"🇵":2,"📘":1,"ⓔ":3,"🔑":1,"⭕":2,"🔘":1,"🚭":5,"🚉":3,"🚪":3,"➳":2,"🚃":3,"┯":-3,"🆙":2,"🆖":1,"┗":5,"Ⓞ":2,"❇":3,"✴":3,"☊":5,"🔕":-2,"⬛":-2,"🚞":3,"🍶":3,"🌐":3,"♀":1,"🚅":3,"🚒":-2,"♋":1,"♍":3,"🕝":-2,"ⓐ":5,"📙":1,"Ⓢ":1,"📋":3,"🎱":1,"🐞":1,"🔺":1,"ⓡ":5,"♤":3,"🎯":3,"🔉":3,"↩":5,"🚾":1,"🎣":-4,"🔣":1,"❎":-5,"➥":1,"🎌":5,"◣":1,"⏬":5,"♭":1,"ⓞ":5,"🔳":2,"🏭":2,"🎳":-3,"☚":5,"➽":2,"➫":2,"➖":-5,"꒰":2,"꒱":2,"◝":-3,"📑":5,"ⓧ":5,"🔟":5,"〓":5,"ⓜ":2,"➠":5,"🚆":2,"℅":-5,"☃":2,"🚽":5,"ⓝ":5,"⇦":5,"👲":2,"🚡":-3,"🔬":5,"➗":-3,"📈":2,"⏪":2,"◎":5,"꒦":-5,"📎":5,"⑅":5,"✭":5,"♓":2,"┏":5,"☇":5,"࿎":-5,"👘":5,"↙":5,"Ⓕ":2,"Ⓦ":2,"Ⓟ":2,"🕑":2,"🕛":5,"♈":-5,"↬":5,"✍":5,"🏦":5,"🔻":5,"ⓟ":5,"ⓕ":5,"ⓘ":5,"♿":5,"⇗":5,"⇘":5,"ⓨ":5,"ⓙ":5,"▫":5,"🔇":5,"⌃":-5,"🔖":5,"📜":5,"🚝":5,"┘":-5,"✝":-5,"⍣":-5,"📮":-5,"🕕":-5,"🔯":5,"➸":5,"꒵":5,"🕥":-5,"✽":5,"📼":5,"🕐":-5,"🀄":5,"✬":5,"✫":5,"🕔":-5,"❣":5,"📫":5,"🉐":5,"🈂":-5,"🎰":-5,"҂":-5,"╤":-5,"📔":5},RV=-2,DV=-2,jV=-2,VV=-2,OV=-2,MV=-2,LV=-3,FV=-3,zV=-3,UV=-3,BV=2,$V=2,qV=1,WV=-1,GV=-1,HV=-1,KV=-1,QV=2,YV=2,XV=2,JV=2,ZV=1,eO=-3,tO=-3,nO=-3,sO=-3,rO=-3,iO=1,oO=1,aO=1,cO=1,lO=1,uO=1,dO=1,hO=-2,fO=-2,mO=-2,pO=-2,gO=2,yO=2,vO=2,_O=2,wO=2,EO=2,TO=2,IO=2,xO=-2,bO=-2,kO=-2,SO=-2,AO=-2,PO=-2,NO=-2,CO=1,RO=-2,DO=2,jO=2,VO=2,OO=2,MO=-3,LO=1,FO=1,zO=3,UO=3,BO=3,$O=3,qO=-1,WO=-1,GO=-1,HO=-2,KO=-2,QO=1,YO=1,XO=3,JO=3,ZO=3,eM=3,tM=3,nM=3,sM=3,rM=1,iM=2,oM=2,aM=2,cM=2,lM=2,uM=2,dM=2,hM=-1,fM=1,mM=-1,pM=3,gM=3,yM=3,vM=-1,_M=2,wM=-1,EM=2,TM=-2,IM=-2,xM=-2,bM=-2,kM=-2,SM=-2,AM=-2,PM=-2,NM=-2,CM=-2,RM=2,DM=-3,jM=-3,VM=-3,OM=-3,MM=-3,LM=-3,FM=-3,zM=-3,UM=1,BM=2,$M=1,qM=1,WM=1,GM=-2,HM=-2,KM=-2,QM=-2,YM=-1,XM=-1,JM=-2,ZM=1,eL=-2,tL=-2,nL=-2,sL=1,rL=2,iL=-2,oL=2,aL=2,cL=2,lL=2,uL=4,dL=2,hL=-1,fL=2,mL=3,pL=3,gL=3,yL=3,vL=-3,_L=-3,wL=-3,EL=-3,TL=-3,IL=-3,xL=-2,bL=-2,kL=-2,SL=-2,AL=-2,PL=-2,NL=-2,CL=-1,RL=1,DL=-2,jL=-2,VL=-3,OL=-3,ML=-3,LL=-2,FL=-1,zL=-1,UL=-1,BL=-1,$L=-1,qL=-1,WL=-1,GL=-1,HL=-1,KL=-2,QL=-2,YL=2,XL=2,JL=2,ZL=2,e4=2,t4=2,n4=2,s4=2,r4=2,i4=2,o4=2,a4=2,c4=2,l4=2,u4=2,d4=-2,h4=2,f4=2,m4=2,p4=2,g4=2,y4=1,v4=-2,_4=-3,w4=-2,E4=-2,T4=-4,I4=-2,x4=-2,b4=-4,k4=-3,S4=-3,A4=-2,P4=-2,N4=2,C4=2,R4=-4,D4=-4,j4=2,V4=3,O4=3,M4=3,L4=3,F4=3,z4=-3,U4=-3,B4=-1,$4=-1,q4=-1,W4=-1,G4=1,H4=1,K4=2,Q4=2,Y4=2,X4=2,J4=2,Z4=2,eF=1,tF=3,nF=1,sF=1,rF=-2,iF=-2,oF=-2,aF=-2,cF=-2,lF=-2,uF=-1,dF=-1,hF=-1,fF=2,mF=-1,pF=-1,gF=-1,yF=-1,vF=-1,_F=3,wF=3,EF=3,TF=4,IF=-3,xF=-2,bF=-1,kF=-1,SF=1,AF=2,PF=1,NF=-3,CF=-3,RF=-3,DF=-3,jF=-2,VF=1,OF=-2,MF=-2,LF=-2,FF=-2,zF=-1,UF=-3,BF=-3,$F=-3,qF=-2,WF=-2,GF=-2,HF=-2,KF=2,QF=-2,YF=-5,XF=-5,JF=-1,ZF=-1,ez=-1,tz=-2,nz=-2,sz=3,rz=-1,iz=3,oz=3,az=3,cz=3,lz=3,uz=2,dz=2,hz=-2,fz=-2,mz=3,pz=2,gz=2,yz=2,vz=2,_z=2,wz=2,Ez=3,Tz=-2,Iz=-2,xz=-2,bz=-2,kz=3,Sz=-3,Az=-3,Pz=-3,Nz=-3,Cz=-3,Rz=2,Dz=-1,jz=-2,Vz=1,Oz=-5,Mz=-5,Lz=-2,Fz=-2,zz=-2,Uz=-2,Bz=-3,$z=-3,qz=-3,Wz=-3,Gz=-2,Hz=-2,Kz=-2,Qz=-2,Yz=-2,Xz=2,Jz=2,Zz=3,e5=3,t5=-1,n5=3,s5=3,r5=2,i5=-1,o5=-1,a5=-2,c5=3,l5=-1,u5=-1,d5=-1,h5=-3,f5=-2,m5=-2,p5=2,g5=2,y5=-1,v5=1,_5=1,w5=1,E5=1,T5=-2,I5=-2,x5=-3,b5=-2,k5=-2,S5=-2,A5=-2,P5=-2,N5=-2,C5=-2,R5=-2,D5=-3,j5=2,V5=2,O5=2,M5=3,L5=-2,F5=-2,z5=-2,U5=-2,B5=3,$5=5,q5=-3,W5=-3,G5=-3,H5=-3,K5=1,Q5=2,Y5=1,X5=4,J5=3,Z5=3,e6=2,t6=-1,n6=-1,s6=-2,r6=-3,i6=-3,o6=-2,a6=-4,c6=-2,l6=-2,u6=-2,d6=2,h6=-2,f6=-2,m6=-2,p6=-2,g6=-2,y6=-2,v6=2,_6=2,w6=2,E6=2,T6=-1,I6=-1,x6=-1,b6=-1,k6=-1,S6=1,A6=1,P6=1,N6=3,C6=2,R6=1,D6=2,j6=2,V6=2,O6=-2,M6=2,L6=2,F6=-2,z6=-3,U6=-4,B6=-1,$6=3,q6=3,W6=3,G6=3,H6=3,K6=3,Q6=-2,Y6=-2,X6=-2,J6=1,Z6=-2,eU=-2,tU=-1,nU=2,sU=2,rU=2,iU=2,oU=2,aU=-2,cU=-2,lU=-3,uU=-2,dU=2,hU=2,fU=3,mU=3,pU=3,gU=-3,yU=-3,vU=-3,_U=-3,wU=-3,EU=-3,TU=-3,IU=-3,xU=-3,bU=-3,kU=-3,SU=2,AU=2,PU=2,NU=2,CU=2,RU=-2,DU=2,jU=3,VU=2,OU=2,MU=2,LU=2,FU=2,zU=-3,UU=-3,BU=-3,$U=-3,qU=-2,WU=-1,GU=-2,HU=-2,KU=-2,QU=-2,YU=2,XU=2,JU=-2,ZU=3,e9=2,t9=2,n9=1,s9=1,r9=1,i9=1,o9=2,a9=-1,c9=-2,l9=-5,u9=-5,d9=-5,h9=-2,f9=-2,m9=-2,p9=-2,g9=-2,y9=-2,v9=-2,_9=-1,w9=-1,E9=-1,T9=-2,I9=-2,x9=-3,b9=-1,k9=-1,S9=1,A9=2,P9=2,N9=2,C9=2,R9=2,D9=1,j9=2,V9=2,O9=1,M9=2,L9=1,F9=1,z9=1,U9=2,B9=2,$9=1,q9=1,W9=2,G9=2,H9=-2,K9=-2,Q9=-2,Y9=-2,X9=-2,J9=-2,Z9=-2,eB=-2,tB=2,nB=2,sB=2,rB=2,iB=-2,oB=2,aB=2,cB=2,lB=2,uB=-2,dB=-2,hB=-2,fB=-2,mB=2,pB=2,gB=2,yB=-2,vB=-2,_B=-2,wB=-2,EB=-2,TB=-2,IB=-2,xB=2,bB=2,kB=2,SB=2,AB=2,PB=2,NB=2,CB=-3,RB=-2,DB=-2,jB=-2,VB=-2,OB=-1,MB=-2,LB=-2,FB=-2,zB=-2,UB=-2,BB=-2,$B=-2,qB=-2,WB=-2,GB=-2,HB=-2,KB=-2,QB=-1,YB=-1,XB=-1,JB=-2,ZB=-2,e$=-2,t$=-2,n$=-2,s$=-2,r$=-2,i$=1,o$=1,a$=1,c$=2,l$=1,u$=-2,d$=-1,h$=-3,f$=-3,m$=-3,p$=-3,g$=-3,y$=-2,v$=2,_$=2,w$=2,E$=2,T$=2,I$=2,x$=-2,b$=-2,k$=2,S$=-1,A$=-3,P$=-3,N$=-2,C$=-2,R$=-2,D$=-2,j$=2,V$=-2,O$=-2,M$=-2,L$=-3,F$=-3,z$=-3,U$=-3,B$=-3,$$=-3,q$=-3,W$=-3,G$=-2,H$=-2,K$=-2,Q$=-2,Y$=-2,X$=-2,J$=-2,Z$=-2,eq=-2,tq=-2,nq=-2,sq=-2,rq=-1,iq=-1,oq=-3,aq=-3,cq=-1,lq=-2,uq=-1,dq=-1,hq=-1,fq=-2,mq=2,pq=-5,gq=1,yq=-1,vq=-1,_q=-2,wq=-2,Eq=2,Tq=-1,Iq=-1,xq=-2,bq=-2,kq=-2,Sq=-3,Aq=-3,Pq=-3,Nq=-3,Cq=-2,Rq=-4,Dq=-4,jq=-2,Vq=-2,Oq=-2,Mq=2,Lq=2,Fq=-2,zq=-1,Uq=2,Bq=3,$q=-3,qq=-2,Wq=-2,Gq=-3,Hq=-1,Kq=2,Qq=3,Yq=-2,Xq=-2,Jq=2,Zq=-2,e8=-3,t8=-3,n8=-3,s8=-3,r8=-3,i8=-3,o8=-3,a8=-3,c8=1,l8=2,u8=2,d8=-2,h8=-2,f8=-3,m8=-3,p8=-3,g8=2,y8=2,v8=-2,_8=-1,w8=-1,E8=-1,T8=-2,I8=-2,x8=-2,b8=-2,k8=-2,S8=-2,A8=-2,P8=-3,N8=-3,C8=2,R8=-2,D8=-2,j8=-2,V8=-2,O8=-2,M8=-2,L8=-2,F8=-2,z8=-2,U8=-2,B8=-2,$8=-2,q8=-1,W8=-1,G8=3,H8=3,K8=3,Q8=3,Y8=3,X8=3,J8=3,Z8=3,eW=-1,tW=-1,nW=-1,sW=-1,rW=-1,iW=-2,oW=-2,aW=-2,cW=-2,lW=-2,uW=-2,dW=-2,hW=-2,fW=-2,mW=-2,pW=-2,gW=-2,yW=-2,vW=-2,_W=-2,wW=-3,EW=-3,TW=-3,IW=-3,xW=-2,bW=-2,kW=-2,SW=-2,AW=-2,PW=-2,NW=-2,CW=-2,RW=-3,DW=-2,jW=-2,VW=-2,OW=-2,MW=-2,LW=-2,FW=-2,zW=-2,UW=-2,BW=2,$W=1,qW=2,WW=2,GW=-3,HW=-3,KW=-3,QW=-3,YW=-3,XW=-3,JW=-3,ZW=-3,e7=-3,t7=-3,n7=-3,s7=-3,r7=-1,i7=-2,o7=-2,a7=-2,c7=-2,l7=-2,u7=-2,d7=-2,h7=2,f7=-2,m7=-1,p7=-1,g7=-1,y7=-2,v7=-2,_7=-2,w7=-2,E7=-2,T7=3,I7=2,x7=2,b7=1,k7=-4,S7=-4,A7=-3,P7=-3,N7=-1,C7=-2,R7=2,D7=-1,j7=2,V7=-3,O7=-3,M7=-3,L7=-2,F7=-2,z7=-2,U7=-2,B7=-2,$7=-2,q7=-1,W7=-2,G7=-2,H7=-2,K7=-2,Q7=-2,Y7=-1,X7=-1,J7=-1,Z7=-2,eG=-2,tG=-2,nG=-2,sG=-2,rG=-2,iG=-2,oG=-2,aG=-2,cG=-2,lG=-2,uG=-2,dG=-2,hG=-2,fG=-3,mG=-2,pG=-1,gG=-1,yG=-1,vG=-1,_G=2,wG=-2,EG=-2,TG=-2,IG=-2,xG=-2,bG=-1,kG=-2,SG=-2,AG=-2,PG=-2,NG=-2,CG=-2,RG=-2,DG=-2,jG=-1,VG=-1,OG=-2,MG=-2,LG=-1,FG=-1,zG=-1,UG=-1,BG=-3,$G=-3,qG=-3,WG=-3,GG=-2,HG=-2,KG=-2,QG=-2,YG=-2,XG=-2,JG=-2,ZG=-2,eH=-2,tH=-2,nH=-2,sH=-2,rH=-2,iH=-2,oH=-2,aH=-2,cH=-2,lH=-2,uH=-2,dH=-2,hH=-2,fH=-2,mH=-2,pH=-2,gH=-2,yH=-2,vH=-2,_H=-2,wH=-2,EH=-2,TH=-2,IH=-2,xH=-2,bH=-2,kH=-2,SH=-2,AH=-2,PH=-2,NH=-2,CH=-2,RH=-2,DH=-2,jH=-2,VH=2,OH=-2,MH=-2,LH=-2,FH=-2,zH=-2,UH=-2,BH=-2,$H=-2,qH=-2,WH=-2,GH=-2,HH=-2,KH=-3,QH=-3,YH=-2,XH=-2,JH=-2,ZH=-2,eK=-2,tK=-1,nK=-1,sK=-2,rK=-2,iK=-2,oK=2,aK=2,cK=2,lK=2,uK=2,dK=-2,hK=-2,fK=-1,mK=-1,pK=-1,gK=-1,yK=-1,vK=-3,_K=-3,wK=-2,EK=-2,TK=-2,IK=-2,xK=-2,bK=-1,kK=-1,SK=-1,AK=-2,PK=-2,NK=-2,CK=-3,RK=-2,DK=1,jK=1,VK=-2,OK=-2,MK=-1,LK=-1,FK=-2,zK=-2,UK=-2,BK=-2,$K=-2,qK=-2,WK=-2,GK=-2,HK=-3,KK=-3,QK=-1,YK=-2,XK=-1,JK=-2,ZK=-2,eQ=-2,tQ=2,nQ=-3,sQ=-2,rQ=2,iQ=2,oQ=2,aQ=1,cQ=4,lQ=-2,uQ=-2,dQ=2,hQ=2,fQ=2,mQ=2,pQ=3,gQ=3,yQ=2,vQ=2,_Q=-2,wQ=-2,EQ=-2,TQ=-2,IQ=-2,xQ=-3,bQ=-2,kQ=1,SQ=-2,AQ=2,PQ=2,NQ=2,CQ=-1,RQ=-1,DQ=2,jQ=2,VQ=2,OQ=2,MQ=2,LQ=2,FQ=2,zQ=2,UQ=2,BQ=2,$Q=-2,qQ=-2,WQ=2,GQ=1,HQ=1,KQ=1,QQ=3,YQ=2,XQ=2,JQ=2,ZQ=2,eY=2,tY=2,nY=2,sY=2,rY=2,iY=-2,oY=-2,aY=-2,cY=-2,lY=-2,uY=3,dY=-2,hY=-2,fY=-2,mY=1,pY=1,gY=1,yY=2,vY=3,_Y=3,wY=1,EY=2,TY=-1,IY=-2,xY=-1,bY=-1,kY=-2,SY=-2,AY=-2,PY=-1,NY=-1,CY=2,RY=2,DY=2,jY=3,VY=4,OY=-1,MY=-1,LY=-1,FY=-1,zY=-1,UY=2,BY=2,$Y=-3,qY=-1,WY=-3,GY=-2,HY=-2,KY=-2,QY=-2,YY=-2,XY=-2,JY=-2,ZY=-2,eX=-2,tX=-2,nX=-2,sX=-2,rX=3,iX=3,oX=3,aX=3,cX=3,lX=3,uX=-1,dX=-2,hX=-1,fX=2,mX=-1,pX=-1,gX=-1,yX=-2,vX=3,_X=3,wX=3,EX=2,TX=2,IX=2,xX=2,bX=1,kX=1,SX=-2,AX=-2,PX=-2,NX=-2,CX=2,RX=-2,DX=-2,jX=-2,VX=-2,OX=1,MX=1,LX=-1,FX=-1,zX=-1,UX=-1,BX=3,$X=1,qX=-2,WX=-2,GX=4,HX=3,KX=3,QX=4,YX=4,XX=-2,JX=-3,ZX=-3,eJ=-3,tJ=-2,nJ=-2,sJ=-2,rJ=-2,iJ=-2,oJ=-2,aJ=-2,cJ=2,lJ=2,uJ=1,dJ=3,hJ=-3,fJ=-3,mJ=-3,pJ=-3,gJ=-2,yJ=-1,vJ=-2,_J=-3,wJ=-3,EJ=1,TJ=-2,IJ=2,xJ=3,bJ=4,kJ=-1,SJ=3,AJ=3,PJ=3,NJ=3,CJ=3,RJ=-2,DJ=-2,jJ=-3,VJ=-3,OJ=-3,MJ=-2,LJ=-2,FJ=-2,zJ=-2,UJ=2,BJ=2,$J=2,qJ=2,WJ=2,GJ=2,HJ=2,KJ=2,QJ=2,YJ=2,XJ=2,JJ=2,ZJ=2,eZ=2,tZ=2,nZ=2,sZ=-2,rZ=-2,iZ=-2,oZ=-2,aZ=2,cZ=2,lZ=-2,uZ=-2,dZ=1,hZ=-3,fZ=-3,mZ=2,pZ=2,gZ=2,yZ=2,vZ=-2,_Z=-3,wZ=-2,EZ=-1,TZ=-2,IZ=2,xZ=-2,bZ=3,kZ=-2,SZ=-2,AZ=-2,PZ=1,NZ=1,CZ=-2,RZ=-2,DZ=2,jZ=-2,VZ=-3,OZ=2,MZ=2,LZ=-2,FZ=-1,zZ=-2,UZ=-2,BZ=-2,$Z=-2,qZ=2,WZ=2,GZ=2,HZ=-2,KZ=-2,QZ=-2,YZ=-1,XZ=-2,JZ=-2,ZZ=-1,eee=-2,tee=-2,nee=1,see=-1,ree=-2,iee=-1,oee=1,aee=1,cee=-1,lee=-1,uee=2,dee=2,hee=2,fee=-3,mee=-1,pee=-4,gee=-4,yee=-4,vee=-4,_ee=-4,wee=-4,Eee=-2,Tee=1,Iee=2,xee=2,bee=-3,kee=1,See=1,Aee=2,Pee=2,Nee=2,Cee=-2,Ree=-2,Dee=-3,jee=-2,Vee=2,Oee=-1,Mee=-2,Lee=-2,Fee=-2,zee=-2,Uee=-2,Bee=-2,$ee=3,qee=-4,Wee=-4,Gee=-4,Hee=-4,Kee=-4,Qee=-4,Yee=-4,Xee=-4,Jee=-4,Zee=-3,ete=-4,tte=-4,nte=2,ste=2,rte=2,ite=2,ote=-2,ate=4,cte=-1,lte=-1,ute=2,dte=4,hte=4,fte=-3,mte=-2,pte=-2,gte=-2,yte=2,vte=2,_te=2,wte=2,Ete=3,Tte=3,Ite=3,xte=-1,bte=3,kte=2,Ste=2,Ate=3,Pte=-2,Nte=-1,Cte=-2,Rte=2,Dte=3,jte=3,Vte=3,Ote=3,Mte=3,Lte=-1,Fte=-2,zte=2,Ute=2,Bte=-2,$te=1,qte=-3,Wte=4,Gte=2,Hte=3,Kte=3,Qte=1,Yte=3,Xte=3,Jte=-2,Zte=-2,ene=1,tne=2,nne=3,sne=3,rne=1,ine=1,one=1,ane=1,cne=3,lne=2,une=-2,dne=-1,hne=-2,fne=3,mne=3,pne=3,gne=3,yne=-3,vne=-2,_ne=-3,wne=-3,Ene=-3,Tne=-3,Ine=1,xne=1,bne=1,kne=2,Sne=1,Ane=-1,Pne=-2,Nne=-2,Cne=-2,Rne=2,Dne=-2,jne=-2,Vne=-2,One=-2,Mne=-2,Lne=1,Fne=2,zne=2,Une=-3,Bne=1,$ne=-3,qne=-3,Wne=-2,Gne=-2,Hne=-1,Kne=2,Qne=-1,Yne=3,Xne=3,Jne=3,Zne=2,ese=2,tse=3,nse=1,sse=3,rse=-2,ise=-2,ose=3,ase=3,cse=3,lse=-3,use=-3,dse=-3,hse=-3,fse=-3,mse=-1,pse=2,gse=-2,yse=2,vse=-2,_se=-2,wse=-2,Ese=-2,Tse=2,Ise=2,xse=2,bse=-2,kse=-2,Sse=-2,Ase=-2,Pse=-2,Nse=-2,Cse=-3,Rse=-3,Dse=-3,jse=-3,Vse=-3,Ose=-3,Mse=-3,Lse=-1,Fse=-2,zse=1,Use=-1,Bse=-2,$se=-3,qse=-2,Wse=2,Gse=-3,Hse=-3,Kse=3,Qse=-2,Yse=3,Xse=2,Jse=4,Zse=-2,ere=2,tre=-4,nre=-2,sre=2,rre=2,ire=2,ore=-2,are=2,cre=2,lre=2,ure=3,dre=-2,hre=-2,fre=-1,mre=-1,pre=-3,gre=-1,yre=-1,vre=2,_re=2,wre=-2,Ere=-2,Tre=-2,Ire=-1,xre=-2,bre=-2,kre=-2,Sre=-2,Are=2,Pre=2,Nre=2,Cre=2,Rre=2,Dre=2,jre=2,Vre=-2,Ore=-2,Mre=-2,Lre=2,Fre=2,zre=2,Ure=-2,Bre=-2,$re=2,qre=2,Wre=-3,Gre=-3,Hre=-3,Kre=-3,Qre=-3,Yre=-2,Xre=-2,Jre=-2,Zre=2,eie=1,tie=2,nie=2,sie=1,rie=-2,iie=3,oie=-3,aie=-3,cie=2,lie=2,uie=2,die=2,hie=-2,fie=5,mie=-2,pie=-2,gie=-2,yie=-2,vie=-3,_ie=-3,wie=-3,Eie=-3,Tie=-3,Iie=-3,xie=-3,bie=-2,kie=-2,Sie=-1,Aie=-2,Pie=-1,Nie=-2,Cie=-3,Rie=-3,Die=-3,jie=-2,Vie=-2,Oie=-2,Mie=-2,Lie=2,Fie=-3,zie=-1,Uie=2,Bie=1,$ie=-2,qie=-2,Wie=-2,Gie=-2,Hie=-2,Kie=-2,Qie=-3,Yie=-3,Xie=-2,Jie=-2,Zie=-2,eoe=-2,toe=-2,noe=-2,soe=2,roe=2,ioe=-1,ooe=-1,aoe=-1,coe=-1,loe=-2,uoe=-2,doe=3,hoe=3,foe=3,moe=3,poe=-2,goe=-2,yoe=-2,voe=-2,_oe=2,woe=2,Eoe=2,Toe=2,Ioe=2,xoe=-2,boe=-2,koe=-2,Soe=-2,Aoe=-2,Poe=-2,Noe=-2,Coe=-2,Roe=-2,Doe=-2,joe=-2,Voe=-2,Ooe=-2,Moe=-2,Loe=-2,Foe=-2,zoe=-1,Uoe=-2,Boe=-2,$oe=-2,qoe=-2,Woe=1,Goe=1,Hoe=-2,Koe=2,Qoe=-2,Yoe=-2,Xoe=-2,Joe=-2,Zoe=-2,eae=-2,tae=-2,nae=-2,sae=-2,rae=-2,iae=-3,oae=-3,aae=-2,cae=-2,lae=-2,uae=-2,dae=-2,hae=-2,fae=-2,mae=-2,pae=-2,gae=-2,yae=2,vae=2,_ae=-2,wae=-2,Eae=-2,Tae=-2,Iae=-2,xae=-2,bae=-2,kae=-2,Sae=-2,Aae=-2,Pae=-2,Nae=-2,Cae=-2,Rae=-2,Dae=-2,jae=-2,Vae=-2,Oae=2,Mae=-2,Lae=-2,Fae=-2,zae=-2,Uae=-2,Bae=-2,$ae=-2,qae=-2,Wae=-2,Gae=-1,Hae=-2,Kae=-2,Qae=-2,Yae=-2,Xae=-2,Jae=1,Zae=1,ece=1,tce=2,nce=-2,sce=-2,rce=2,ice=-2,oce=-2,ace=-2,cce=-2,lce=-2,uce=-2,dce=-2,hce=-2,fce=-2,mce=2,pce=2,gce=2,yce=2,vce=2,_ce=3,wce=-2,Ece=-2,Tce=-2,Ice=-2,xce=-2,bce=-2,kce=-2,Sce=2,Ace=2,Pce=2,Nce=1,Cce=1,Rce=2,Dce=2,jce=1,Vce=-2,Oce=-2,Mce=-2,Lce=-2,Fce=-2,zce=-2,Uce=2,Bce=-2,$ce=-2,qce=-2,Wce=-2,Gce=-2,Hce=-2,Kce=-2,Qce=2,Yce=1,Xce=-1,Jce=2,Zce=1,ele=1,tle=2,nle=-3,sle=-1,rle=-1,ile=-1,ole=-2,ale=-2,cle=2,lle=2,ule=-2,dle=-2,hle=-2,fle=-1,mle=-1,ple=-3,gle=-3,yle=-3,vle=-3,_le=-1,wle=-2,Ele=-4,Tle=-4,Ile=-2,xle=2,ble=-2,kle=-2,Sle=-2,Ale=-3,Ple=1,Nle=1,Cle=1,Rle=2,Dle=1,jle=2,Vle=2,Ole=2,Mle=2,Lle=3,Fle=3,zle=3,Ule=-2,Ble=3,$le=3,qle=-1,Wle=2,Gle=2,Hle=2,Kle=1,Qle=-3,Yle=-3,Xle=-2,Jle=-2,Zle=-2,eue=-2,tue=-2,nue=-3,sue=-3,rue=-3,iue=-3,oue=2,aue=2,cue=2,lue=2,uue=3,due=-2,hue=-2,fue=-1,mue=-2,pue=-2,gue=-2,yue=-2,vue=2,_ue=-1,wue=-1,Eue=1,Tue=1,Iue=1,xue=1,bue=1,kue=1,Sue=3,Aue=-2,Pue=-2,Nue=-1,Cue=1,Rue=2,Due=-1,jue=-1,Vue=-1,Oue=1,Mue=1,Lue=1,Fue=-2,zue=-2,Uue=-2,Bue=-2,$ue=-3,que=-3,Wue=-2,Gue=-2,Hue=-1,Kue=4,Que=1,Yue=2,Xue=2,Jue=2,Zue=2,ede=2,tde=2,nde=2,sde=-1,rde=-1,ide=-1,ode=-1,ade=-2,cde=2,lde=-2,ude=4,dde=4,hde=-3,fde=-3,mde=-3,pde=-3,gde=-3,yde=-2,vde=-2,_de=-2,wde=-2,Ede=-2,Tde=3,Ide=4,xde=4,bde=4,kde=-2,Sde=-2,Ade=-1,Pde=3,Nde=-1,Cde=-1,Rde=-1,Dde=-1,jde=3,Vde=3,Ode=-3,Mde=-3,Lde=-3,Fde=-3,zde=-3,Ude=-3,Bde=-3,$de=-2,qde=3,Wde=3,Gde=3,Hde=3,Kde=3,Qde=3,Yde=2,Xde=-1,Jde=3,Zde=3,ehe=3,the=3,nhe=3,she=3,rhe=-3,ihe=-2,ohe=-3,ahe=-3,che=-1,lhe=-1,uhe=-1,dhe=2,hhe=-2,fhe=-3,mhe=-3,phe=-3,ghe=-3,yhe=3,vhe=-2,_he=-2,whe=-2,Ehe=-1,The=-1,Ihe=-1,xhe=-1,bhe=-3,khe=3,She=3,Ahe=3,Phe=4,Nhe=4,Che=1,Rhe=1,Dhe=2,jhe=2,Vhe=-2,Ohe=3,Mhe=-3,Lhe=1,Fhe=-2,zhe=1,Uhe=-2,Bhe=-2,$he=-2,qhe=-2,Whe=2,Ghe=3,Hhe=3,Khe=-2,Qhe=-2,Yhe=2,Xhe=2,Jhe=-2,Zhe=4,efe=3,tfe=3,nfe=3,sfe=-2,rfe=-2,ife=-2,ofe=-2,afe=-3,cfe=-2,lfe=-1,ufe=-1,dfe=-2,hfe=-2,ffe=-2,mfe=-2,pfe=-2,gfe=-2,yfe=-2,vfe=-3,_fe=-3,wfe=-2,Efe=-2,Tfe=-2,Ife=-2,xfe=-2,bfe=-2,kfe=-2,Sfe=-3,Afe=-3,Pfe=-3,Nfe=-3,Cfe=-2,Rfe=-2,Dfe=-2,jfe=-2,Vfe=-3,Ofe=-1,Mfe=-2,Lfe=-2,Ffe=-2,zfe=-2,Ufe=-2,Bfe=-2,$fe=-2,qfe=-2,Wfe=-2,Gfe=-2,Hfe=-2,Kfe=-2,Qfe=-2,Yfe=-2,Xfe=-2,Jfe=-2,Zfe=-2,eme=-2,tme=-2,nme=-2,sme=-2,rme=-2,ime=-2,ome=-2,ame=-2,cme=-2,lme=-2,ume=-2,dme=-2,hme=-2,fme=-2,mme=-2,pme=-2,gme=2,yme=2,vme=2,_me=2,wme=-2,Eme=-2,Tme=-2,Ime=-2,xme=-2,bme=-1,kme=-1,Sme=-1,Ame=-1,Pme=-3,Nme=-5,Cme=-5,Rme=1,Dme=2,jme=2,Vme=1,Ome=-2,Mme=-2,Lme=-2,Fme=-2,zme=-2,Ume=-2,Bme=-2,$me=-2,qme=-2,Wme=-3,Gme=-3,Hme=-2,Kme=-2,Qme=-1,Yme=-2,Xme=-2,Jme=-2,Zme=-3,epe=1,tpe=-2,npe=-2,spe=-2,rpe=-2,ipe=-2,ope=-2,ape=-2,cpe=-1,lpe=-2,upe=-2,dpe=3,hpe=2,fpe=-5,mpe=-5,ppe=-1,gpe=2,ype=2,vpe=-1,_pe=-2,wpe=-2,Epe=-2,Tpe=2,Ipe=2,xpe=-2,bpe=2,kpe=-1,Spe=2,Ape=-3,Ppe=-2,Npe=-2,Cpe=-3,Rpe=-2,Dpe=-2,jpe=2,Vpe=-2,Ope=-2,Mpe=-2,Lpe=-2,Fpe=-2,zpe=-2,Upe=-2,Bpe=-2,$pe=-2,qpe=-2,Wpe=-2,Gpe=-2,Hpe=-2,Kpe=-2,Qpe=-2,Ype=-2,Xpe=-2,Jpe=-2,Zpe=-2,ege=-2,tge=-2,nge=-1,sge=2,rge=3,ige=-2,oge=2,age=2,cge=-2,lge=-2,uge=-2,dge=-2,hge=2,fge=2,mge=-2,pge=-2,gge=-2,yge=-2,vge=-2,_ge=-2,wge=-2,Ege=-2,Tge=-2,Ige=-2,xge=-2,bge=-2,kge=-3,Sge=-3,Age=-3,Pge=2,Nge=5,Cge=4,Rge=-1,Dge=-1,jge=-2,Vge=-2,Oge=-2,Mge=-2,Lge=-2,Fge=-2,zge=-2,Uge=-2,Bge=-2,$ge=-2,qge=-1,Wge=-2,Gge=-2,Hge=-2,Kge=-2,Qge=-2,Yge=-2,Xge=-2,Jge=-1,Zge=-3,eye=-1,tye=-2,nye=-2,sye=-2,rye=-3,iye=-3,oye=-3,aye=3,cye=-1,lye=2,uye=2,dye=2,hye=2,fye=-1,mye=1,pye=2,gye=-1,yye=-1,vye=-2,_ye=-1,wye=2,Eye=2,Tye=2,Iye=-2,xye=-2,bye=-2,kye=-2,Sye=-2,Aye=-1,Pye=3,Nye=2,Cye=3,Rye=3,Dye=2,jye=-2,Vye=-3,Oye=-2,Mye=-2,Lye=-2,Fye=-2,zye=-2,Uye=-2,Bye=-2,$ye=-2,qye=-2,Wye=-3,Gye=-2,Hye=-2,Kye=-2,Qye=-2,Yye=2,Xye=-2,Jye=2,Zye=-1,eve=-2,tve=-2,nve=-2,sve=-4,rve=-4,ive=-3,ove=-2,ave=-1,cve=-2,lve=-3,uve=-3,dve=-3,hve=-3,fve=2,mve=3,pve=1,gve=3,yve=3,vve=3,_ve=-2,wve=2,Eve=-2,Tve=-2,Ive=-2,xve=-2,bve=-2,kve=2,Sve=2,Ave=2,Pve=-2,Nve=-2,Cve=-2,Rve=-2,Dve=-2,jve=-2,Vve=-2,Ove=-2,Mve=-2,Lve=-2,Fve=-2,zve=3,Uve=3,Bve=2,$ve=2,qve=-2,Wve=-1,Gve=-1,Hve=-1,Kve=-1,Qve=-1,Yve=2,Xve=-2,Jve=3,Zve=3,e_e=3,t_e=3,n_e=1,s_e=1,r_e=1,i_e=-2,o_e=-2,a_e=-2,c_e=1,l_e=-1,u_e=-2,d_e=-1,h_e=-1,f_e=-1,m_e=1,p_e=-1,g_e=-1,y_e=-1,v_e=-1,__e=-5,w_e=-2,E_e=-2,T_e=-2,I_e=2,x_e=2,b_e=-2,k_e=-2,S_e=2,A_e=2,P_e=-2,N_e=2,C_e=2,R_e=-1,D_e=-1,j_e=2,V_e=1,O_e=1,M_e=1,L_e=1,F_e=1,z_e=1,U_e=1,B_e=1,$_e=-2,q_e=-1,W_e=-2,G_e=-1,H_e=-1,K_e=1,Q_e=1,Y_e=3,X_e=3,J_e=1,Z_e=1,ewe=-2,twe=-2,nwe=-2,swe=-2,rwe=2,iwe=2,owe=-1,awe=-1,cwe=-1,lwe=-1,uwe=2,dwe=-3,hwe=-2,fwe=-2,mwe=-2,pwe=-2,gwe=-2,ywe=-2,vwe=1,_we=1,wwe=2,Ewe=-1,Twe=-2,Iwe=-2,xwe=2,bwe=2,kwe=-2,Swe=-1,Awe=-1,Pwe=-3,Nwe=-3,Cwe=-3,Rwe=-2,Dwe=-2,jwe=-1,Vwe=-3,Owe=-3,Mwe=-3,Lwe=-3,Fwe=-4,zwe=-4,Uwe=-4,Bwe=2,$we=2,qwe=2,Wwe=4,Gwe=-2,Hwe=2,Kwe=1,Qwe=1,Ywe=1,Xwe=1,Jwe=1,Zwe=1,e2e=1,t2e=2,n2e=-2,s2e=-2,r2e=-2,i2e=-2,o2e=-2,a2e=2,c2e=2,l2e=2,u2e=2,d2e=2,h2e=1,f2e=1,m2e=1,p2e=2,g2e=-2,y2e=-2,v2e=-2,_2e=-2,w2e=-2,E2e=-2,T2e=-2,I2e=-2,x2e=-2,b2e=1,k2e=-1,S2e=-1,A2e=-1,P2e=-2,N2e=-1,C2e=4,R2e=4,D2e=4,j2e=4,V2e=2,O2e=-1,M2e=2,L2e=2,F2e=2,z2e=2,U2e=1,B2e=2,$2e=1,q2e=2,W2e=2,G2e=2,H2e=-2,K2e=-2,Q2e=-2,Y2e=-2,X2e=-2,J2e=-2,Z2e=-2,e0e=-2,t0e=-1,n0e=-2,s0e=-2,r0e=2,i0e=2,o0e=2,a0e=-2,c0e=-1,l0e=-1,u0e=-1,d0e=-1,h0e=2,f0e=2,m0e=2,p0e=2,g0e=2,y0e=2,v0e=2,_0e=2,w0e=2,E0e=1,T0e=2,I0e=2,x0e=2,b0e=-2,k0e=1,S0e=1,A0e=1,P0e=1,N0e=-2,C0e=-2,R0e=-2,D0e=-2,j0e=-1,V0e=-2,O0e=-1,M0e=-2,L0e=-2,F0e=-1,z0e=-2,U0e=-2,B0e=2,$0e=2,q0e=2,W0e=-2,G0e=2,H0e=2,K0e=2,Q0e=2,Y0e=2,X0e=2,J0e=-3,Z0e=-1,e1e=-1,t1e=2,n1e=2,s1e=2,r1e=3,i1e=3,o1e=-2,a1e=-2,c1e=1,l1e=1,u1e=-2,d1e=-2,h1e=-2,f1e=3,m1e=-2,p1e=-2,g1e=-2,y1e=-2,v1e=-2,_1e=2,w1e=4,E1e=4,T1e=4,I1e=2,x1e=2,b1e=2,k1e=1,S1e=4,A1e=4,P1e=4,N1e=-3,C1e=-2,R1e=-2,D1e=-2,j1e=-2,V1e=-2,O1e=-2,M1e=-2,L1e=-2,F1e=-2,z1e=-2,U1e=1,B1e=1,$1e=2,q1e=1,W1e=1,G1e=2,H1e=2,K1e=2,Q1e=2,Y1e=2,X1e=-1,J1e=-2,Z1e=2,eEe=-2,tEe=-2,nEe=2,sEe=2,rEe=1,iEe=-2,oEe=-2,aEe=-3,cEe=-3,lEe=-3,uEe=-2,dEe=-2,hEe=-2,fEe=-2,mEe=-2,pEe=-2,gEe=-2,yEe=-2,vEe=-2,_Ee=3,wEe=-2,EEe=-2,TEe=-2,IEe=-2,xEe=-2,bEe=-2,kEe=-2,SEe=-3,AEe=-4,PEe=2,NEe=2,CEe=2,REe=2,DEe=2,jEe=-2,VEe=-2,OEe=-1,MEe=-3,LEe=-3,FEe=-2,zEe=-2,UEe=-2,BEe=-2,$Ee=2,qEe=1,WEe=1,GEe=-2,HEe=-2,KEe=-2,QEe=-2,YEe=3,XEe=-2,JEe=-2,ZEe=-2,eTe=-2,tTe=1,nTe=1,sTe=1,rTe=-2,iTe=-4,oTe=-4,aTe=-3,cTe=-2,lTe=-2,uTe=-2,dTe=-2,hTe=-2,fTe=-1,mTe=-2,pTe=-2,gTe=-4,yTe=-1,vTe=-2,_Te=-2,wTe=-2,ETe=1,TTe=1,ITe=-1,xTe=-1,bTe=1,kTe=-2,STe=2,ATe=2,PTe=2,NTe=2,CTe=-3,RTe=-2,DTe=-2,jTe=-2,VTe=-2,OTe=-2,MTe=-2,LTe=-2,FTe=-2,zTe=-2,UTe=-2,BTe=-2,$Te=-2,qTe=-3,WTe=-3,GTe=-3,HTe=-2,KTe=2,QTe=2,YTe=2,XTe=-1,JTe=-2,ZTe=-2,eIe=-1,tIe=-5,nIe=1,sIe=2,rIe=2,iIe=-2,oIe=2,aIe=2,cIe=2,lIe=2,uIe=-2,dIe=-2,hIe=-2,fIe=-2,mIe=-2,pIe=-1,gIe=-2,yIe=-2,vIe=-2,_Ie=-2,wIe=-2,EIe=-2,TIe=-2,IIe=-2,xIe=1,bIe=-1,kIe=2,SIe=2,AIe=2,PIe=2,NIe=2,CIe=2,RIe=1,DIe=1,jIe=1,VIe=1,OIe=1,MIe=1,LIe=-2,FIe=3,zIe=3,UIe=3,BIe=2,$Ie=-1,qIe=-2,WIe=-2,GIe=-1,HIe=1,KIe=-2,QIe=-3,YIe=-3,XIe=-2,JIe=1,ZIe=3,exe=3,txe=3,nxe=2,sxe=-2,rxe=1,ixe=2,oxe=-2,axe=-2,cxe=3,lxe=-2,uxe=-2,dxe=2,hxe=2,fxe=-2,mxe=-2,pxe=-2,gxe=-2,yxe=-1,vxe=-2,_xe=-2,wxe=2,Exe=-2,Txe=-2,Ixe=-2,xxe=-2,bxe=2,kxe=-2,Sxe=-2,Axe=-2,Pxe=3,Nxe=-2,Cxe=-2,Rxe=-2,Dxe=-2,jxe=2,Vxe=-2,Oxe=-2,Mxe=-2,Lxe=-2,Fxe=-2,zxe=-1,Uxe=1,Bxe=1,$xe=1,qxe=2,Wxe=-2,Gxe=-2,Hxe=-2,Kxe=-2,Qxe=-2,Yxe=-2,Xxe=-2,Jxe=-2,Zxe=-2,ebe=-1,tbe=-1,nbe=-1,sbe=-1,rbe=2,ibe=1,obe=-1,abe=-1,cbe=-2,lbe=2,ube=2,dbe=2,hbe=2,fbe=2,mbe=2,pbe=-1,gbe=-2,ybe=-2,vbe=-2,_be=-2,wbe=-1,Ebe=-2,Tbe=-1,Ibe=2,xbe=2,bbe=2,kbe=-1,Sbe=-2,Abe=-2,Pbe=-2,Nbe=-2,Cbe=-2,Rbe=-2,Dbe=-2,jbe=4,Vbe=-2,Obe=-3,Mbe=-2,Lbe=2,Fbe=-2,zbe=1,Ube=1,Bbe=-2,$be=3,qbe=3,Wbe=3,Gbe=3,Hbe=2,Kbe=3,Qbe=3,Ybe=-3,Xbe=-3,Jbe=-2,Zbe=-2,eke=-2,tke=-2,nke=-2,ske=-2,rke=-2,ike=-2,oke=-2,ake=-2,cke=-2,lke=-2,uke=-2,dke=-2,hke=2,fke=2,mke=-2,pke=-2,gke=-2,yke=2,vke=5,_ke=2,wke=2,Eke=2,Tke=1,Ike=1,xke=1,bke=2,kke=2,Ske=4,Ake=2,Pke=2,Nke=2,Cke=-1,Rke=-1,Dke=-1,jke=-1,Vke=-1,Oke=-1,Mke=-2,Lke=1,Fke=2,zke=2,Uke=-2,Bke=-2,$ke=-2,qke=2,Wke=3,Gke=3,Hke=2,Kke=2,Qke=-3,Yke=-3,Xke=-3,Jke=2,Zke=2,eSe=-2,tSe=-2,nSe=2,sSe=-2,rSe=-2,iSe=-2,oSe=-2,aSe=-2,cSe=2,lSe=2,uSe=-2,dSe=-1,hSe=-3,fSe=-3,mSe=4,pSe=4,gSe=-3,ySe=-3,vSe=-2,_Se=-2,wSe=-3,ESe=-3,TSe=-3,ISe=2,xSe=2,bSe=2,kSe=-2,SSe=2,ASe=-2,PSe=-2,NSe=-2,CSe=-2,RSe=-2,DSe=-2,jSe=-2,VSe=5,OSe=-2,MSe=-2,LSe=-2,FSe=-2,zSe=-2,USe=-2,BSe=-2,$Se=-2,qSe=2,WSe=2,GSe=-2,HSe=2,KSe=2,QSe=-2,YSe=-4,XSe=-4,JSe=-4,ZSe=-4,eAe=-2,tAe=-2,nAe=-2,sAe=-2,rAe=-2,iAe=-2,oAe=-3,aAe=-2,cAe=-2,lAe=-2,uAe=2,dAe=-2,hAe=-2,fAe=-2,mAe=-2,pAe=-1,gAe=-2,yAe=-1,vAe=-3,_Ae=-3,wAe=-2,EAe=-3,TAe=-3,IAe=2,xAe=2,bAe=-2,kAe=-2,SAe=-2,AAe=-2,PAe=-2,NAe=2,CAe=-2,RAe=-2,DAe=4,jAe=4,VAe=-2,OAe=-2,MAe=-2,LAe=-2,FAe=-2,zAe=1,UAe=2,BAe=1,$Ae=-2,qAe=-5,WAe=-3,GAe=-3,HAe=-3,KAe=-3,QAe=-3,YAe=2,XAe=-2,JAe=-3,ZAe=-3,ePe=-2,tPe=-2,nPe=-2,sPe=-2,rPe=-2,iPe=-2,oPe=-1,aPe=-2,cPe=-2,lPe=-2,uPe=-1,dPe=-1,hPe=2,fPe=-1,mPe=-1,pPe=-2,gPe=-2,yPe=-1,vPe=-1,_Pe=-1,wPe=-1,EPe=-2,TPe=-1,IPe=-1,xPe=-1,bPe=-1,kPe=-2,SPe=-2,APe=-2,PPe=-2,NPe=-2,CPe=-2,RPe=-2,DPe=-2,jPe=-2,VPe=-2,OPe=-2,MPe=-1,LPe=-2,FPe=-1,zPe=2,UPe=-2,BPe=-2,$Pe=-2,qPe=-2,WPe=-2,GPe=-2,HPe=-2,KPe=-3,QPe=-2,YPe=-2,XPe=-2,JPe=-2,ZPe=-3,eNe=-2,tNe=-2,nNe=-2,sNe=-2,rNe=1,iNe=-2,oNe=-2,aNe=-2,cNe=-2,lNe=-2,uNe=-2,dNe=1,hNe=-2,fNe=-1,mNe=-2,pNe=-2,gNe=1,yNe=-2,vNe=-2,_Ne=-2,wNe=-2,ENe=-2,TNe=-2,INe=1,xNe=-2,bNe=-2,kNe=-2,SNe=-2,ANe=-2,PNe=-2,NNe=2,CNe=-1,RNe=-1,DNe=-2,jNe=-2,VNe=-2,ONe=2,MNe=-2,LNe=-2,FNe=-2,zNe=-1,UNe=2,BNe=-2,$Ne=-2,qNe=-2,WNe=2,GNe=-3,HNe=-2,KNe=-2,QNe=-2,YNe=-2,XNe=-1,JNe=2,ZNe=2,eCe=-2,tCe=-2,nCe=-2,sCe=1,rCe=1,iCe=1,oCe=1,aCe=-2,cCe=-1,lCe=-1,uCe=1,dCe=-2,hCe=-2,fCe=3,mCe=-2,pCe=-3,gCe=-3,yCe=-3,vCe=-3,_Ce=-3,wCe=-3,ECe=-3,TCe=3,ICe=3,xCe=3,bCe=3,kCe=3,SCe=3,ACe=-3,PCe=2,NCe=2,CCe=2,RCe=2,DCe=-2,jCe=-2,VCe=-2,OCe=-2,MCe=-2,LCe=-2,FCe=-3,zCe=-3,UCe=-3,BCe=2,$Ce=-2,qCe=1,WCe=3,GCe=1,HCe=1,KCe=3,QCe=1,YCe=-3,XCe=3,JCe=2,ZCe=-1,eRe=-3,tRe=-3,nRe=-3,sRe=-3,rRe=-2,iRe=-2,oRe=-2,aRe=-2,cRe=-3,lRe=1,uRe=-2,dRe=-2,hRe=1,fRe=2,mRe=2,pRe=2,gRe=-2,yRe=-2,vRe=-3,_Re=-3,wRe=-2,ERe=-1,TRe=-2,IRe=-2,xRe=-1,bRe=-2,kRe=-2,SRe=-2,ARe=-2,PRe=3,NRe=2,CRe=2,RRe=-2,DRe=-2,jRe=-2,VRe=-2,ORe=2,MRe=2,LRe=2,FRe=1,zRe=-3,URe=-4,BRe=-2,$Re=-1,qRe=2,WRe=4,GRe=4,HRe=4,KRe=4,QRe=3,YRe=1,XRe=1,JRe=1,ZRe=1,eDe=-3,tDe=2,nDe=-2,sDe=-3,rDe=3,iDe=4,oDe=4,aDe=3,cDe=3,lDe=4,uDe=4,dDe=-1,hDe=-3,fDe=-3,mDe=-3,pDe=-3,gDe=-3,yDe=-3,vDe=-3,_De=-3,wDe=-3,EDe=3,TDe=-3,IDe=2,xDe=-2,bDe=2,kDe=4,SDe=4,ADe=4,PDe=-3,NDe=-2,CDe=-2,RDe=-2,DDe=-2,jDe=-2,VDe=-2,ODe=-2,MDe=-2,LDe=-2,FDe=-4,zDe=-4,UDe=-4,BDe=3,$De=3,qDe=4,WDe=4,GDe=1,HDe=1,KDe=2,QDe=1,YDe=2,XDe=-2,JDe=3,ZDe=-2,e3e=-2,t3e=2,n3e={abandon:RV,abandoned:DV,abandons:jV,abducted:VV,abduction:OV,abductions:MV,abhor:LV,abhorred:FV,abhorrent:zV,abhors:UV,abilities:BV,ability:$V,aboard:qV,aborted:WV,aborts:GV,absentee:HV,absentees:KV,absolve:QV,absolved:YV,absolves:XV,absolving:JV,absorbed:ZV,abuse:eO,abused:tO,abuses:nO,abusing:sO,abusive:rO,accept:iO,acceptable:oO,acceptance:aO,accepted:cO,accepting:lO,accepts:uO,accessible:dO,accident:hO,accidental:fO,accidentally:mO,accidents:pO,acclaim:gO,acclaimed:yO,accolade:vO,accomplish:_O,accomplished:wO,accomplishes:EO,accomplishment:TO,accomplishments:IO,accusation:xO,accusations:bO,accuse:kO,accused:SO,accuses:AO,accusing:PO,ache:NO,achievable:CO,aching:RO,acquit:DO,acquits:jO,acquitted:VO,acquitting:OO,acrimonious:MO,active:LO,adequate:FO,admire:zO,admired:UO,admires:BO,admiring:$O,admit:qO,admits:WO,admitted:GO,admonish:HO,admonished:KO,adopt:QO,adopts:YO,adorable:XO,adoration:JO,adore:ZO,adored:eM,adores:tM,adoring:nM,adoringly:sM,advanced:rM,advantage:iM,advantageous:oM,advantageously:aM,advantages:cM,adventure:lM,adventures:uM,adventurous:dM,adversary:hM,advisable:fM,affected:mM,affection:pM,affectionate:gM,affectionateness:yM,afflicted:vM,affordable:_M,affronted:wM,aficionados:EM,afraid:TM,aggravate:IM,aggravated:xM,aggravates:bM,aggravating:kM,aggression:SM,aggressions:AM,aggressive:PM,aggressiveness:NM,aghast:CM,agog:RM,agonise:DM,agonised:jM,agonises:VM,agonising:OM,agonize:MM,agonized:LM,agonizes:FM,agonizing:zM,agree:UM,agreeable:BM,agreed:$M,agreement:qM,agrees:WM,alarm:GM,alarmed:HM,alarmist:KM,alarmists:QM,alas:YM,alert:XM,alienation:JM,alive:ZM,allegation:eL,allegations:tL,allergic:nL,allow:sL,ally:rL,alone:iL,altruistic:oL,amaze:aL,amazed:cL,amazes:lL,amazing:uL,ambitious:dL,ambivalent:hL,amicable:fL,amuse:mL,amused:pL,amusement:gL,amusements:yL,anger:vL,angered:_L,angers:wL,angry:EL,anguish:TL,anguished:IL,animosity:xL,annoy:bL,annoyance:kL,annoyed:SL,annoying:AL,annoys:PL,antagonistic:NL,anti:CL,anticipation:RL,anxiety:DL,anxious:jL,apathetic:VL,apathy:OL,apeshit:ML,apocalyptic:LL,apologise:FL,apologised:zL,apologises:UL,apologising:BL,apologize:$L,apologized:qL,apologizes:WL,apologizing:GL,apology:HL,appalled:KL,appalling:QL,appealing:YL,appease:XL,appeased:JL,appeases:ZL,appeasing:e4,applaud:t4,applauded:n4,applauding:s4,applauds:r4,applause:i4,appreciate:o4,appreciated:a4,appreciates:c4,appreciating:l4,appreciation:u4,apprehensive:d4,appropriate:h4,appropriately:f4,approval:m4,approved:p4,approves:g4,ardent:y4,arrest:v4,arrested:_4,arrests:w4,arrogant:E4,arsehole:T4,ashame:I4,ashamed:x4,ass:b4,assassination:k4,assassinations:S4,assault:A4,assaults:P4,asset:N4,assets:C4,assfucking:R4,asshole:D4,astonished:j4,astound:V4,astounded:O4,astounding:M4,astoundingly:L4,astounds:F4,atrocious:z4,atrocity:U4,attack:B4,attacked:$4,attacking:q4,attacks:W4,attract:G4,attracted:H4,attracting:K4,attraction:Q4,attractions:Y4,attractive:X4,attractively:J4,attractiveness:Z4,attracts:eF,audacious:tF,aura:nF,authority:sF,avenge:rF,avenged:iF,avenger:oF,avengers:aF,avenges:cF,avenging:lF,avert:uF,averted:dF,averts:hF,avid:fF,avoid:mF,avoided:pF,avoids:gF,await:-1,awaited:yF,awaits:vF,award:_F,awarded:wF,awards:EF,awesome:TF,awful:IF,awkward:xF,axe:bF,axed:kF,backed:SF,backing:AF,backs:PF,bad:NF,"bad luck":-2,badass:CF,badly:RF,badness:DF,bailout:jF,balanced:VF,bamboozle:OF,bamboozled:MF,bamboozles:LF,ban:FF,banish:zF,bankrupt:UF,bankruptcy:BF,bankster:$F,banned:qF,barbarian:WF,barbaric:GF,barbarous:HF,bargain:KF,barrier:QF,bastard:YF,bastards:XF,battle:JF,battled:ZF,battles:ez,battling:tz,beaten:nz,beatific:sz,beating:rz,beauties:iz,beautiful:oz,beautifully:az,beautify:cz,beauty:lz,befit:uz,befitting:dz,belittle:hz,belittled:fz,beloved:mz,benefactor:pz,benefactors:gz,benefit:yz,benefits:vz,benefitted:_z,benefitting:wz,benevolent:Ez,bereave:Tz,bereaved:Iz,bereaves:xz,bereaving:bz,best:kz,"best damn":4,betray:Sz,betrayal:Az,betrayed:Pz,betraying:Nz,betrays:Cz,better:Rz,bias:Dz,biased:jz,big:Vz,bitch:Oz,bitches:Mz,bitter:Lz,bitterest:Fz,bitterly:zz,bizarre:Uz,blackmail:Bz,blackmailed:$z,blackmailing:qz,blackmails:Wz,blah:Gz,blame:Hz,blamed:Kz,blames:Qz,blaming:Yz,bless:Xz,blesses:Jz,blessing:Zz,blessings:e5,blind:t5,bliss:n5,blissful:s5,blithe:r5,bloated:i5,block:o5,blockade:a5,blockbuster:c5,blocked:l5,blocking:u5,blocks:d5,bloody:h5,blurry:f5,boastful:m5,bold:p5,boldly:g5,bomb:y5,boost:v5,boosted:_5,boosting:w5,boosts:E5,bore:T5,bored:I5,boring:x5,bother:b5,bothered:k5,bothers:S5,bothersome:A5,boycott:P5,boycotted:N5,boycotting:C5,boycotts:R5,brainwashing:D5,brave:j5,braveness:V5,bravery:O5,bravura:M5,breach:L5,breached:F5,breaches:z5,breaching:U5,breakthrough:B5,breathtaking:$5,bribe:q5,bribed:W5,bribes:G5,bribing:H5,bright:K5,brightest:Q5,brightness:Y5,brilliant:X5,brilliance:J5,brilliances:Z5,brisk:e6,broke:t6,broken:n6,brooding:s6,brutal:r6,brutally:i6,bullied:o6,bullshit:a6,bully:c6,bullying:l6,bummer:u6,buoyant:d6,burden:h6,burdened:f6,burdening:m6,burdens:p6,burglar:g6,burglary:y6,calm:v6,calmed:_6,calming:w6,calms:E6,"can't stand":-3,cancel:T6,cancelled:I6,cancelling:x6,cancels:b6,cancer:k6,capabilities:S6,capability:A6,capable:P6,captivated:N6,care:C6,carefree:R6,careful:D6,carefully:j6,carefulness:V6,careless:O6,cares:M6,caring:L6,"cashing in":-2,casualty:F6,catastrophe:z6,catastrophic:U6,cautious:B6,celebrate:$6,celebrated:q6,celebrates:W6,celebrating:G6,celebration:H6,celebrations:K6,censor:Q6,censored:Y6,censors:X6,certain:J6,chagrin:Z6,chagrined:eU,challenge:tU,champion:nU,championed:sU,champions:rU,chance:iU,chances:oU,chaos:aU,chaotic:cU,charged:lU,charges:uU,charisma:dU,charitable:hU,charm:fU,charming:mU,charmingly:pU,charmless:gU,chastise:yU,chastised:vU,chastises:_U,chastising:wU,cheat:EU,cheated:TU,cheater:IU,cheaters:xU,cheating:bU,cheats:kU,cheer:SU,cheered:AU,cheerful:PU,cheerfully:NU,cheering:CU,cheerless:RU,cheers:DU,cheery:jU,cherish:VU,cherished:OU,cherishes:MU,cherishing:LU,chic:FU,chide:zU,chided:UU,chides:BU,chiding:$U,childish:qU,chilling:WU,choke:GU,choked:HU,chokes:KU,choking:QU,clarifies:YU,clarity:XU,clash:JU,classy:ZU,clean:e9,cleaner:t9,clear:n9,cleared:s9,clearly:r9,clears:i9,clever:o9,clouded:a9,clueless:c9,cock:l9,cocksucker:u9,cocksuckers:d9,cocky:h9,coerced:f9,coercion:m9,collapse:p9,collapsed:g9,collapses:y9,collapsing:v9,collide:_9,collides:w9,colliding:E9,collision:T9,collisions:I9,colluding:x9,combat:b9,combats:k9,comedy:S9,comfort:A9,comfortable:P9,comfortably:N9,comforting:C9,comforts:R9,comic:D9,commend:j9,commended:V9,commit:O9,commitment:M9,commits:L9,committed:F9,committing:z9,compassion:U9,compassionate:B9,compelled:$9,competencies:q9,competent:W9,competitive:G9,complacent:H9,complain:K9,complained:Q9,complaining:Y9,complains:X9,complaint:J9,complaints:Z9,complicating:eB,compliment:tB,complimented:nB,compliments:sB,comprehensive:rB,concerned:iB,conciliate:oB,conciliated:aB,conciliates:cB,conciliating:lB,condemn:uB,condemnation:dB,condemned:hB,condemns:fB,confidence:mB,confident:pB,confidently:gB,conflict:yB,conflicting:vB,conflictive:_B,conflicts:wB,confuse:EB,confused:TB,confusing:IB,congrats:xB,congratulate:bB,congratulation:kB,congratulations:SB,consent:AB,consents:PB,consolable:NB,conspiracy:CB,constipation:RB,constrained:DB,contagion:jB,contagions:VB,contagious:OB,contaminant:MB,contaminants:LB,contaminate:FB,contaminated:zB,contaminates:UB,contaminating:BB,contamination:$B,contaminations:qB,contempt:WB,contemptible:GB,contemptuous:HB,contemptuously:KB,contend:QB,contender:YB,contending:XB,contentious:JB,contestable:ZB,controversial:e$,controversially:t$,controversies:n$,controversy:s$,convicted:r$,convince:i$,convinced:o$,convinces:a$,convivial:c$,cool:l$,"cool stuff":3,cornered:u$,corpse:d$,corrupt:h$,corrupted:f$,corrupting:m$,corruption:p$,corrupts:g$,costly:y$,courage:v$,courageous:_$,courageously:w$,courageousness:E$,courteous:T$,courtesy:I$,"cover-up":-3,coward:x$,cowardly:b$,coziness:k$,cramp:S$,crap:A$,crappy:P$,crash:N$,crazier:C$,craziest:R$,crazy:D$,creative:j$,crestfallen:V$,cried:O$,cries:M$,crime:L$,crimes:F$,criminal:z$,criminals:U$,criminate:B$,criminated:$$,criminates:q$,crisis:W$,critic:G$,criticise:H$,criticised:K$,criticises:Q$,criticising:Y$,criticism:X$,criticize:J$,criticized:Z$,criticizes:eq,criticizing:tq,critics:nq,critique:sq,crowding:rq,crude:iq,cruel:oq,cruelty:aq,crush:cq,crushed:lq,crushes:uq,crushing:dq,cry:hq,crying:fq,cunning:mq,cunt:pq,curious:gq,curse:yq,cut:vq,cutback:_q,cutbacks:wq,cute:Eq,cuts:Tq,cutting:Iq,cynic:xq,cynical:bq,cynicism:kq,damage:Sq,damaged:Aq,damages:Pq,damaging:Nq,damn:Cq,"damn cute":3,"damn good":4,damned:Rq,damnit:Dq,danger:jq,dangerous:Vq,dangerously:Oq,daredevil:Mq,daring:Lq,darkest:Fq,darkness:zq,dauntless:Uq,dazzling:Bq,dead:$q,deadening:qq,deadlock:Wq,deadly:Gq,deafening:Hq,dear:Kq,dearly:Qq,death:Yq,deaths:Xq,debonair:Jq,debt:Zq,deceit:e8,deceitful:t8,deceive:n8,deceived:s8,deceives:r8,deceiving:i8,deception:o8,deceptive:a8,decisive:c8,dedicated:l8,dedication:u8,defeat:d8,defeated:h8,defect:f8,defective:m8,defects:p8,defender:g8,defenders:y8,defenseless:v8,defer:_8,deferring:w8,defiant:E8,deficient:T8,deficiency:I8,deficiencies:x8,deficit:b8,deformed:k8,deformities:S8,deformity:A8,defraud:P8,defrauds:N8,deft:C8,defunct:R8,degrade:D8,degraded:j8,degrades:V8,dehumanize:O8,dehumanized:M8,dehumanizes:L8,dehumanizing:F8,deject:z8,dejected:U8,dejecting:B8,dejects:$8,delay:q8,delayed:W8,delectable:G8,delicious:H8,delight:K8,delighted:Q8,delightful:Y8,delightfully:X8,delighting:J8,delights:Z8,demand:eW,demanded:tW,demanding:nW,demands:sW,demonstration:rW,demoralize:iW,demoralized:oW,demoralizes:aW,demoralizing:cW,denial:lW,denials:uW,denied:dW,denier:hW,deniers:fW,denies:mW,denounce:pW,denounces:gW,dent:yW,deny:vW,denying:_W,deplore:wW,deplored:EW,deplores:TW,deploring:IW,deport:xW,deported:bW,deporting:kW,deports:SW,deportation:AW,deportations:PW,depressed:NW,depressing:CW,deprivation:RW,derail:DW,derailed:jW,derails:VW,derelict:OW,deride:MW,derided:LW,derides:FW,deriding:zW,derision:UW,desirable:BW,desire:$W,desired:qW,desirous:WW,despair:GW,despairing:HW,despairs:KW,desperate:QW,desperately:YW,despondent:XW,destroy:JW,destroyed:ZW,destroying:e7,destroys:t7,destruction:n7,destructive:s7,detached:r7,detain:i7,detained:o7,detention:a7,deteriorate:c7,deteriorated:l7,deteriorates:u7,deteriorating:d7,determined:h7,deterrent:f7,detract:m7,detracted:p7,detracts:g7,devastate:y7,devastated:v7,devastating:_7,devastation:w7,devastations:E7,devoted:T7,devotion:I7,devotional:x7,diamond:b7,dick:k7,dickhead:S7,die:A7,died:P7,difficult:N7,diffident:C7,dignity:R7,dilemma:D7,dilligence:j7,dipshit:V7,dire:O7,direful:M7,dirt:L7,dirtier:F7,dirtiest:z7,dirty:U7,disabilities:B7,disability:$7,disabling:q7,disadvantage:W7,disadvantaged:G7,disagree:H7,disagreeable:K7,disagreement:Q7,disappear:Y7,disappeared:X7,disappears:J7,disappoint:Z7,disappointed:eG,disappointing:tG,disappointment:nG,disappointments:sG,disappoints:rG,disapproval:iG,disapprovals:oG,disapprove:aG,disapproved:cG,disapproves:lG,disapproving:uG,disaster:dG,disasters:hG,disastrous:fG,disbelieve:mG,discard:pG,discarded:gG,discarding:yG,discards:vG,discernment:_G,discomfort:wG,disconsolate:EG,disconsolation:TG,discontented:IG,discord:xG,discounted:bG,discouraged:kG,discredited:SG,discriminate:AG,discriminated:PG,discriminates:NG,discriminating:CG,discriminatory:RG,disdain:DG,disease:jG,diseases:VG,disgrace:OG,disgraced:MG,disguise:LG,disguised:FG,disguises:zG,disguising:UG,disgust:BG,disgusted:$G,disgustful:qG,disgusting:WG,disheartened:GG,dishonest:HG,disillusioned:KG,disinclined:QG,disjointed:YG,dislike:XG,disliked:JG,dislikes:ZG,dismal:eH,dismayed:tH,dismissed:nH,disorder:sH,disorders:rH,disorganized:iH,disoriented:oH,disparage:aH,disparaged:cH,disparages:lH,disparaging:uH,displeased:dH,displeasure:hH,disproportionate:fH,dispute:mH,disputed:pH,disputes:gH,disputing:yH,disqualified:vH,disquiet:_H,disregard:wH,disregarded:EH,disregarding:TH,disregards:IH,disrespect:xH,disrespected:bH,disrupt:kH,disrupted:SH,disrupting:AH,disruption:PH,disruptions:NH,disruptive:CH,disrupts:RH,dissatisfied:DH,distasteful:jH,distinguished:VH,distort:OH,distorted:MH,distorting:LH,distorts:FH,distract:zH,distracted:UH,distraction:BH,distracts:$H,distress:qH,distressed:WH,distresses:GH,distressing:HH,distrust:KH,distrustful:QH,disturb:YH,disturbed:XH,disturbing:JH,disturbs:ZH,dithering:eK,diverting:tK,dizzy:nK,dodging:sK,dodgy:rK,"does not work":-3,dolorous:iK,donate:oK,donated:aK,donates:cK,donating:lK,donation:uK,"dont like":-2,doom:dK,doomed:hK,doubt:fK,doubted:mK,doubtful:pK,doubting:gK,doubts:yK,douche:vK,douchebag:_K,dour:wK,downcast:EK,downer:TK,downhearted:IK,downside:xK,drag:bK,dragged:kK,drags:SK,drained:AK,dread:PK,dreaded:NK,dreadful:CK,dreading:RK,dream:DK,dreams:jK,dreary:VK,droopy:OK,drop:MK,dropped:LK,drown:FK,drowned:zK,drowns:UK,drudgery:BK,drunk:$K,dubious:qK,dud:WK,dull:GK,dumb:HK,dumbass:KK,dump:QK,dumped:YK,dumps:XK,dupe:JK,duped:ZK,dupery:eQ,durable:tQ,dying:nQ,dysfunction:sQ,eager:rQ,earnest:iQ,ease:oQ,easy:aQ,ecstatic:cQ,eerie:lQ,eery:uQ,effective:dQ,effectively:hQ,effectiveness:fQ,effortlessly:mQ,elated:pQ,elation:gQ,elegant:yQ,elegantly:vQ,embarrass:_Q,embarrassed:wQ,embarrasses:EQ,embarrassing:TQ,embarrassment:IQ,embezzlement:xQ,embittered:bQ,embrace:kQ,emergency:SQ,empathetic:AQ,empower:PQ,empowerment:NQ,emptiness:CQ,empty:RQ,enchanted:DQ,encourage:jQ,encouraged:VQ,encouragement:OQ,encourages:MQ,encouraging:LQ,endorse:FQ,endorsed:zQ,endorsement:UQ,endorses:BQ,enemies:$Q,enemy:qQ,energetic:WQ,engage:GQ,engages:HQ,engrossed:KQ,engrossing:QQ,enjoy:YQ,enjoyable:XQ,enjoyed:JQ,enjoying:ZQ,enjoys:eY,enlighten:tY,enlightened:nY,enlightening:sY,enlightens:rY,ennui:iY,enrage:oY,enraged:aY,enrages:cY,enraging:lY,enrapture:uY,enslave:dY,enslaved:hY,enslaves:fY,ensure:mY,ensuring:pY,enterprising:gY,entertaining:yY,enthral:vY,enthusiastic:_Y,entitled:wY,entrusted:EY,envies:TY,envious:IY,"environment-friendly":2,envy:xY,envying:bY,erroneous:kY,error:SY,errors:AY,escape:-1,escapes:PY,escaping:NY,esteem:CY,esteemed:RY,ethical:DY,euphoria:jY,euphoric:VY,evacuate:OY,evacuated:MY,evacuates:LY,evacuating:FY,evacuation:zY,evergreen:UY,evergreens:BY,evergreening:$Y,eviction:qY,evil:WY,exacerbate:GY,exacerbated:HY,exacerbates:KY,exacerbating:QY,exaggerate:YY,exaggerated:XY,exaggerates:JY,exaggerating:ZY,exasparate:eX,exasperated:tX,exasperates:nX,exasperating:sX,excellence:rX,excellent:iX,excite:oX,excited:aX,excitement:cX,exciting:lX,exclude:uX,excluded:dX,exclusion:hX,exclusive:fX,excruciatingly:mX,excuse:pX,exempt:gX,exhausted:yX,exhilarated:vX,exhilarates:_X,exhilarating:wX,exonerate:EX,exonerated:TX,exonerates:IX,exonerating:xX,expand:bX,expands:kX,expel:SX,expelled:AX,expelling:PX,expels:NX,expertly:CX,exploit:RX,exploited:DX,exploiting:jX,exploits:VX,exploration:OX,explorations:MX,expose:LX,exposed:FX,exposes:zX,exposing:UX,exquisite:BX,extend:$X,extends:1,extremist:qX,extremists:WX,exuberant:GX,exultant:HX,exultantly:KX,fabulous:QX,fabulously:YX,fad:XX,fag:JX,faggot:ZX,faggots:eJ,fail:tJ,failed:nJ,failing:sJ,fails:rJ,failure:iJ,failures:oJ,fainthearted:aJ,fair:cJ,fairness:lJ,faith:uJ,faithful:dJ,fake:hJ,faker:fJ,fakes:mJ,faking:pJ,fallen:gJ,falling:yJ,false:-1,falsely:vJ,falsified:_J,falsify:wJ,fame:EJ,famine:TJ,famous:IJ,fan:xJ,fantastic:bJ,farce:kJ,fascinate:SJ,fascinated:AJ,fascinates:PJ,fascinating:NJ,fascination:CJ,fascist:RJ,fascists:DJ,fatal:jJ,fatalities:VJ,fatality:OJ,fatigue:MJ,fatigued:LJ,fatigues:FJ,fatiguing:zJ,favor:UJ,favorable:BJ,favorably:$J,favored:qJ,favorite:WJ,favorited:GJ,favorites:HJ,favors:KJ,favour:QJ,favourable:YJ,favourably:XJ,favoured:JJ,favourite:ZJ,favourited:eZ,favourites:tZ,favours:nZ,fear:sZ,fearful:rZ,fearfully:iZ,fearing:oZ,fearless:aZ,fearlessness:cZ,fearsome:lZ,"fed up":-3,feeble:uZ,feeling:dZ,felonies:hZ,felony:fZ,fertile:mZ,fervent:pZ,fervid:gZ,festive:yZ,fever:vZ,fiasco:_Z,fidgety:wZ,fight:EZ,fighting:TZ,fine:IZ,fines:xZ,finest:bZ,fire:kZ,fired:SZ,firing:AZ,fit:PZ,fitness:NZ,filth:CZ,filthy:RZ,flagship:DZ,flaw:jZ,flawed:VZ,flawless:OZ,flawlessly:MZ,flaws:LZ,flees:FZ,flop:zZ,flops:UZ,flu:BZ,flustered:$Z,focused:qZ,fond:WZ,fondness:GZ,fool:HZ,foolish:KZ,fools:QZ,forbid:YZ,forbidden:XZ,forbidding:JZ,forced:ZZ,foreclosure:eee,foreclosures:tee,forefront:nee,forget:see,forgetful:ree,forgettable:iee,forgive:oee,forgiving:aee,forgot:cee,forgotten:lee,fortune:uee,fortunate:dee,fortunately:hee,foul:fee,frantic:mee,fraud:pee,frauds:gee,fraudster:yee,fraudsters:vee,fraudulence:_ee,fraudulent:wee,freak:Eee,free:Tee,freedom:Iee,freedoms:xee,frenzy:bee,fresh:kee,friend:See,friendliness:Aee,friendly:Pee,friendship:Nee,fright:Cee,frightened:Ree,frightening:Dee,frikin:jee,frisky:Vee,frowning:Oee,fruitless:Mee,frustrate:Lee,frustrated:Fee,frustrates:zee,frustrating:Uee,frustration:Bee,ftw:$ee,fuck:qee,fucked:Wee,fucker:Gee,fuckers:Hee,fuckface:Kee,fuckhead:Qee,fuckin:Yee,fucking:Xee,"fucking amazing":4,"fucking beautiful":4,"fucking cute":4,"fucking fantastic":4,"fucking good":4,"fucking great":4,"fucking hot":2,"fucking love":4,"fucking loves":4,"fucking perfect":4,fucktard:Jee,fud:Zee,fuked:ete,fuking:tte,fulfill:nte,fulfilled:ste,fulfillment:rte,fulfills:ite,fuming:ote,fun:ate,funeral:cte,funerals:lte,funky:ute,funnier:dte,funny:hte,furious:fte,futile:mte,gag:pte,gagged:gte,gain:yte,gained:vte,gaining:_te,gains:wte,gallant:Ete,gallantly:Tte,gallantry:Ite,"game-changing":3,garbage:xte,gem:bte,generous:kte,generously:Ste,genial:Ate,ghastly:Pte,ghost:Nte,giddy:Cte,gift:Rte,glad:Dte,glamorous:jte,glamourous:Vte,glee:Ote,gleeful:Mte,gloom:Lte,gloomy:Fte,glorious:zte,glory:Ute,glum:Bte,god:$te,goddamn:qte,godsend:Wte,gold:Gte,good:Hte,goodlooking:Kte,goodmorning:Qte,goodness:Yte,goodwill:Xte,goofiness:Jte,goofy:Zte,grace:ene,graceful:tne,gracious:nne,grand:sne,grant:rne,granted:ine,granting:one,grants:ane,grateful:cne,gratification:lne,grave:une,gray:dne,grisly:hne,gr8:fne,great:mne,greater:pne,greatest:gne,greed:yne,greedy:vne,"green wash":-3,"green washing":-3,greenwash:_ne,greenwasher:wne,greenwashers:Ene,greenwashing:Tne,greet:Ine,greeted:xne,greeting:bne,greetings:kne,greets:Sne,grey:Ane,grief:Pne,grieved:Nne,grim:Cne,gripping:Rne,groan:Dne,groaned:jne,groaning:Vne,groans:One,gross:Mne,growing:Lne,growth:Fne,growths:zne,gruesome:Une,guarantee:Bne,guilt:$ne,guilty:qne,gullibility:Wne,gullible:Gne,gun:Hne,ha:Kne,hacked:Qne,haha:Yne,hahaha:Xne,hahahah:Jne,hail:Zne,hailed:ese,hallelujah:tse,handpicked:nse,handsome:sse,hapless:rse,haplessness:ise,happiest:ose,happiness:ase,happy:cse,harass:lse,harassed:use,harasses:dse,harassing:hse,harassment:fse,hard:mse,hardier:pse,hardship:gse,hardy:yse,harm:vse,harmed:_se,harmful:wse,harming:Ese,harmony:Tse,harmonious:Ise,harmoniously:xse,harms:bse,harried:kse,harsh:Sse,harsher:Ase,harshest:Pse,harshly:Nse,hate:Cse,hated:Rse,hater:Dse,haters:jse,hates:Vse,hating:Ose,hatred:Mse,haunt:Lse,haunted:Fse,haunting:zse,haunts:Use,havoc:Bse,hazardous:$se,headache:qse,healthy:Wse,heartbreaking:Gse,heartbroken:Hse,heartfelt:Kse,heartless:Qse,heartwarming:Yse,heaven:Xse,heavenly:Jse,heavyhearted:Zse,hehe:ere,hell:tre,hellish:nre,help:sre,helpful:rre,helping:ire,helpless:ore,helps:are,hero:cre,heroes:lre,heroic:ure,hesitant:dre,hesitate:hre,hid:fre,hide:mre,hideous:pre,hides:gre,hiding:yre,highlight:vre,hilarious:_re,hinder:wre,hindrance:Ere,hoax:Tre,hollow:Ire,homeless:xre,homesick:bre,homicide:kre,homicides:Sre,honest:Are,honor:Pre,honored:Nre,honoring:Cre,honour:Rre,honoured:Dre,honouring:jre,hooligan:Vre,hooliganism:Ore,hooligans:Mre,hope:Lre,hopeful:Fre,hopefully:zre,hopeless:Ure,hopelessness:Bre,hopes:$re,hoping:qre,horrendous:Wre,horrid:Gre,horrible:Hre,horrific:Kre,horrified:Qre,hospitalized:Yre,hostile:Xre,huckster:Jre,hug:Zre,huge:eie,hugs:tie,humane:nie,humble:sie,humbug:rie,humerous:iie,humiliated:oie,humiliation:aie,humor:cie,humorous:lie,humour:uie,humourous:die,hunger:hie,hurrah:fie,hurt:mie,hurting:pie,hurts:gie,hypocritical:yie,hysteria:vie,hysterical:_ie,hysterics:wie,icky:Eie,idiocy:Tie,idiot:Iie,idiotic:xie,ignorance:bie,ignorant:kie,ignore:Sie,ignored:Aie,ignores:Pie,ill:Nie,"ill-fated":-2,illegal:Cie,illegally:Rie,illegitimate:Die,illiteracy:jie,illness:Vie,illnesses:Oie,illogical:Mie,imaginative:Lie,imbecile:Fie,immobilized:zie,immortal:Uie,immune:Bie,impair:$ie,impaired:qie,impairing:Wie,impairment:Gie,impairs:Hie,impatient:Kie,impeachment:Qie,impeachments:Yie,impede:Xie,impeded:Jie,impedes:Zie,impeding:eoe,impedingly:toe,imperfect:noe,importance:soe,important:roe,impose:ioe,imposed:ooe,imposes:aoe,imposing:coe,imposter:loe,impotent:uoe,impress:doe,impressed:hoe,impresses:foe,impressive:moe,imprisoned:poe,imprisonment:goe,improper:yoe,improperly:voe,improve:_oe,improved:woe,improvement:Eoe,improves:Toe,improving:Ioe,inability:xoe,inaction:boe,inadequate:koe,inadvertently:Soe,inappropriate:Aoe,incapable:Poe,incapacitated:Noe,incapacitates:Coe,incapacitating:Roe,incense:Doe,incensed:joe,incenses:Voe,incensing:Ooe,incoherent:Moe,incompetence:Loe,incompetent:Foe,incomplete:zoe,incomprehensible:Uoe,inconsiderate:Boe,inconvenience:$oe,inconvenient:qoe,increase:Woe,increased:Goe,indecisive:Hoe,indestructible:Koe,indicted:Qoe,indifference:Yoe,indifferent:Xoe,indignant:Joe,indignation:Zoe,indoctrinate:eae,indoctrinated:tae,indoctrinates:nae,indoctrinating:sae,inediable:rae,inexorable:iae,inexcusable:oae,ineffective:aae,ineffectively:cae,ineffectual:lae,inefficiency:uae,inefficient:dae,inefficiently:hae,inept:fae,ineptitude:mae,infantile:pae,infantilized:gae,infatuated:yae,infatuation:vae,infect:_ae,infected:wae,infecting:Eae,infection:Tae,infections:Iae,infectious:xae,infects:bae,inferior:kae,infest:Sae,infested:Aae,infesting:Pae,infests:Nae,inflamed:Cae,inflict:Rae,inflicted:Dae,inflicting:jae,inflicts:Vae,influential:Oae,infract:Mae,infracted:Lae,infracting:Fae,infracts:zae,infringement:Uae,infuriate:Bae,infuriated:$ae,infuriates:qae,infuriating:Wae,inhibit:Gae,inhuman:Hae,injured:Kae,injuries:Qae,injury:Yae,injustice:Xae,innovate:Jae,innovates:Zae,innovation:ece,innovative:tce,inoperative:nce,inquisition:sce,inquisitive:rce,insane:ice,insanity:oce,insecure:ace,insensitive:cce,insensitivity:lce,insignificant:uce,insipid:dce,insolvent:hce,insomnia:fce,inspiration:mce,inspirational:pce,inspire:gce,inspired:yce,inspires:vce,inspiring:_ce,insufficiency:wce,insufficient:Ece,insufficiently:Tce,insult:Ice,insulted:xce,insulting:bce,insults:kce,intact:Sce,integrity:Ace,intelligent:Pce,intense:Nce,interest:Cce,interested:Rce,interesting:Dce,interests:jce,interrogated:Vce,interrupt:Oce,interrupted:Mce,interrupting:Lce,interruption:Fce,interrupts:zce,intimacy:Uce,intimidate:Bce,intimidated:$ce,intimidates:qce,intimidating:Wce,intimidation:Gce,intransigence:Hce,intransigency:Kce,intricate:Qce,intrigues:Yce,invasion:Xce,invincible:Jce,invite:Zce,inviting:ele,invulnerable:tle,irate:nle,ironic:sle,irony:rle,irrational:ile,irreparable:ole,irreproducible:ale,irresistible:cle,irresistibly:lle,irresolute:ule,irresponsible:dle,irresponsibly:hle,irreversible:fle,irreversibly:mle,irritate:ple,irritated:gle,irritates:yle,irritating:vle,isolated:_le,itchy:wle,jackass:Ele,jackasses:Tle,jailed:Ile,jaunty:xle,jealous:ble,jealousy:kle,jeopardy:Sle,jerk:Ale,jesus:Ple,jewel:Nle,jewels:Cle,jocular:Rle,join:Dle,joke:jle,jokes:Vle,jolly:Ole,jovial:Mle,joy:Lle,joyful:Fle,joyfully:zle,joyless:Ule,joyous:Ble,jubilant:$le,jumpy:qle,justice:Wle,justifiably:Gle,justified:Hle,keen:Kle,kickback:Qle,kickbacks:Yle,kidnap:Xle,kidnapped:Jle,kidnapping:Zle,kidnappings:eue,kidnaps:tue,kill:nue,killed:sue,killing:rue,kills:iue,kind:oue,"kind of":0,kinder:aue,kindness:cue,kiss:lue,kudos:uue,lack:due,lackadaisical:hue,lag:fue,lagged:mue,lagging:pue,lags:gue,lame:yue,landmark:vue,lapse:_ue,lapsed:wue,laugh:Eue,laughed:Tue,laughing:Iue,laughs:xue,laughting:bue,launched:kue,lawl:Sue,lawsuit:Aue,lawsuits:Pue,lazy:Nue,leadership:Cue,leading:Rue,leak:Due,leaked:jue,leave:Vue,legal:Oue,legally:Mue,lenient:Lue,lethal:Fue,lethality:zue,lethargic:Uue,lethargy:Bue,liar:$ue,liars:que,libelous:Wue,lied:Gue,lifeless:Hue,lifesaver:Kue,lighthearted:Que,likable:Yue,like:Xue,likeable:Jue,liked:Zue,likers:ede,likes:tde,liking:nde,limitation:sde,limited:rde,limits:ide,litigation:ode,litigious:ade,lively:cde,livid:lde,lmao:ude,lmfao:dde,loathe:hde,loathed:fde,loathes:mde,loathing:pde,loathsome:gde,lobbied:yde,lobby:vde,lobbying:_de,lobbyist:wde,lobbyists:Ede,lol:Tde,lolol:Ide,lololol:xde,lolololol:bde,lonely:kde,lonesome:Sde,longing:Ade,lool:Pde,loom:Nde,loomed:Cde,looming:Rde,looms:Dde,loool:jde,looool:Vde,loose:Ode,looses:Mde,loser:Lde,losing:Fde,loss:zde,losses:Ude,lost:Bde,lousy:$de,lovable:qde,love:Wde,loved:Gde,lovelies:Hde,lovely:Kde,loves:Qde,loving:Yde,"loving-kindness":3,lowest:Xde,loyal:Jde,loyalty:Zde,luck:ehe,luckily:the,lucky:nhe,lucrative:she,ludicrous:rhe,lugubrious:ihe,lunatic:ohe,lunatics:ahe,lurk:che,lurking:lhe,lurks:uhe,luxury:dhe,macabre:hhe,mad:fhe,maddening:mhe,"made-up":-1,madly:phe,madness:ghe,magnificent:yhe,maladaption:vhe,maldevelopment:_he,maltreatment:whe,mandatory:Ehe,manipulated:The,manipulating:Ihe,manipulation:xhe,manslaughter:bhe,marvel:khe,marvelous:She,marvels:Ahe,masterpiece:Phe,masterpieces:Nhe,matter:Che,matters:Rhe,mature:Dhe,meaningful:jhe,meaningless:Vhe,medal:Ohe,mediocrity:Mhe,meditative:Lhe,melancholy:Fhe,memorable:zhe,memoriam:Uhe,menace:Bhe,menaced:$he,menaces:qhe,mercy:Whe,merry:Ghe,mesmerizing:Hhe,mess:Khe,messed:Qhe,"messing up":-2,methodical:Yhe,methodically:Xhe,mindless:Jhe,miracle:Zhe,mirth:efe,mirthful:tfe,mirthfully:nfe,misbehave:sfe,misbehaved:rfe,misbehaves:ife,misbehaving:ofe,misbranding:afe,miscast:cfe,mischief:lfe,mischiefs:ufe,misclassified:dfe,misclassifies:hfe,misclassify:ffe,misconduct:mfe,misconducted:pfe,misconducting:gfe,misconducts:yfe,miserable:vfe,miserably:_fe,misery:wfe,misfire:Efe,misfortune:Tfe,misgiving:Ife,misinformation:xfe,misinformed:bfe,misinterpreted:kfe,mislead:Sfe,misleaded:Afe,misleading:Pfe,misleads:Nfe,misplace:Cfe,misplaced:Rfe,misplaces:Dfe,misplacing:jfe,mispricing:Vfe,misread:Ofe,misreport:Mfe,misreported:Lfe,misreporting:Ffe,misreports:zfe,misrepresent:Ufe,misrepresentation:Bfe,misrepresentations:$fe,misrepresented:qfe,misrepresenting:Wfe,misrepresents:Gfe,miss:Hfe,missed:Kfe,missing:Qfe,mistake:Yfe,mistaken:Xfe,mistakes:Jfe,mistaking:Zfe,misunderstand:eme,misunderstanding:tme,misunderstands:nme,misunderstood:sme,misuse:rme,misused:ime,misuses:ome,misusing:ame,moan:cme,moaned:lme,moaning:ume,moans:dme,mock:hme,mocked:fme,mocking:mme,mocks:pme,modernize:gme,modernized:yme,modernizes:vme,modernizing:_me,mongering:wme,monopolize:Eme,monopolized:Tme,monopolizes:Ime,monopolizing:xme,monotone:bme,moody:kme,mope:Sme,moping:Ame,moron:Pme,motherfucker:Nme,motherfucking:Cme,motivate:Rme,motivated:Dme,motivating:jme,motivation:Vme,mourn:Ome,mourned:Mme,mournful:Lme,mourning:Fme,mourns:zme,muddy:Ume,mumpish:Bme,murder:$me,murderer:qme,murdering:Wme,murderous:Gme,murders:Hme,murky:Kme,myth:Qme,n00b:Yme,naive:Xme,narcissism:Jme,nasty:Zme,natural:epe,naïve:-2,needy:tpe,negative:npe,negativity:spe,neglect:rpe,neglected:ipe,neglecting:ope,neglects:ape,nerves:cpe,nervous:lpe,nervously:upe,nice:dpe,nifty:hpe,niggas:fpe,nigger:mpe,no:ppe,"no fun":-3,noble:gpe,noblest:ype,noisy:vpe,"non-approved":-2,nonsense:_pe,noob:wpe,nosey:Epe,"not good":-2,"not working":-3,notable:Tpe,noticeable:Ipe,notorious:xpe,novel:bpe,numb:kpe,nurturing:Spe,nuts:Ape,obliterate:Ppe,obliterated:Npe,obnoxious:Cpe,obscene:Rpe,obscenity:Dpe,obsessed:jpe,obsolete:Vpe,obstacle:Ope,obstacles:Mpe,obstinate:Lpe,obstruct:Fpe,obstructed:zpe,obstructing:Upe,obstruction:Bpe,obstructs:$pe,odd:qpe,offence:Wpe,offences:Gpe,offend:Hpe,offended:Kpe,offender:Qpe,offending:Ype,offends:Xpe,offense:Jpe,offenses:Zpe,offensive:ege,offensively:tge,offline:nge,oks:sge,ominous:rge,"once-in-a-lifetime":3,oops:ige,opportunities:oge,opportunity:age,oppressed:cge,oppression:lge,oppressions:uge,oppressive:dge,optimism:hge,optimistic:fge,optionless:mge,ostracize:pge,ostracized:gge,ostracizes:yge,ouch:vge,outage:_ge,outages:wge,outbreak:Ege,outbreaks:Tge,outcry:Ige,outmaneuvered:xge,outnumbered:bge,outrage:kge,outraged:Sge,outrageous:Age,outreach:Pge,outstanding:Nge,overjoyed:Cge,overload:Rge,overlooked:Dge,overprotective:jge,overran:Vge,overreact:Oge,overreacted:Mge,overreacting:Lge,overreaction:Fge,overreacts:zge,oversell:Uge,overselling:Bge,oversells:$ge,oversight:qge,oversimplification:Wge,oversimplified:Gge,oversimplifies:Hge,oversimplify:Kge,oversold:Qge,overstatement:Yge,overstatements:Xge,overweight:Jge,overwrought:Zge,oxymoron:eye,pain:tye,pained:nye,painful:sye,panic:rye,panicked:iye,panics:oye,paradise:aye,paradox:cye,pardon:lye,pardoned:uye,pardoning:dye,pardons:hye,parley:fye,passion:mye,passionate:pye,passive:gye,passively:yye,pathetic:vye,pay:_ye,peace:wye,peaceful:Eye,peacefully:Tye,penalize:Iye,penalized:xye,penalizes:bye,penalizing:kye,penalty:Sye,pensive:Aye,perfect:Pye,perfected:Nye,perfection:Cye,perfectly:Rye,perfects:Dye,peril:jye,perjury:Vye,perpetrated:Oye,perpetrator:Mye,perpetrators:Lye,perplexed:Fye,persecute:zye,persecuted:Uye,persecutes:Bye,persecuting:$ye,perturbed:qye,pervert:Wye,pesky:Gye,pessimism:Hye,pessimistic:Kye,petrified:Qye,philanthropy:Yye,phobic:Xye,picturesque:Jye,pileup:Zye,pillage:eve,pique:tve,piqued:nve,piss:sve,pissed:rve,pissing:ive,piteous:ove,pitied:ave,pity:cve,plague:lve,plagued:uve,plagues:dve,plaguing:hve,playful:fve,pleasant:mve,please:pve,pleased:gve,pleasurable:yve,pleasure:vve,plodding:_ve,poignant:wve,pointless:Eve,poised:Tve,poison:Ive,poisoned:xve,poisons:bve,polished:kve,polite:Sve,politeness:Ave,pollutant:Pve,pollute:Nve,polluted:Cve,polluter:Rve,polluters:Dve,pollutes:jve,pollution:Vve,poor:Ove,poorer:Mve,poorest:Lve,poorly:Fve,popular:zve,popularity:Uve,positive:Bve,positively:$ve,possessive:qve,"post-traumatic":-2,postpone:Wve,postponed:Gve,postpones:Hve,postponing:Kve,poverty:Qve,powerful:Yve,powerless:Xve,praise:Jve,praised:Zve,praises:e_e,praising:t_e,pray:n_e,praying:s_e,prays:r_e,prblm:i_e,prblms:o_e,predatory:a_e,prepared:c_e,pressure:l_e,pressured:u_e,pretend:d_e,pretending:h_e,pretends:f_e,pretty:m_e,prevent:p_e,prevented:g_e,preventing:y_e,prevents:v_e,prick:__e,prison:w_e,prisoner:E_e,prisoners:T_e,privileged:I_e,proactive:x_e,problem:b_e,problems:k_e,profit:S_e,profitable:A_e,profiteer:P_e,profits:N_e,progress:C_e,prohibit:R_e,prohibits:D_e,prominent:j_e,promise:V_e,promised:O_e,promises:M_e,promote:L_e,promoted:F_e,promotes:z_e,promoting:U_e,promptly:B_e,propaganda:$_e,prosecute:q_e,prosecuted:W_e,prosecutes:G_e,prosecution:H_e,prospect:K_e,prospects:Q_e,prosperity:Y_e,prosperous:X_e,protect:J_e,protected:1,protects:Z_e,protest:ewe,protesters:twe,protesting:nwe,protests:swe,proud:rwe,proudly:iwe,provoke:owe,provoked:awe,provokes:cwe,provoking:lwe,prudence:uwe,pseudoscience:dwe,psychopathic:hwe,punish:fwe,punished:mwe,punishes:pwe,punishing:gwe,punitive:ywe,pure:vwe,purest:_we,purposeful:wwe,pushy:Ewe,puzzled:Twe,quaking:Iwe,qualities:xwe,quality:bwe,questionable:kwe,questioned:Swe,questioning:Awe,racism:Pwe,racist:Nwe,racists:Cwe,rage:Rwe,rageful:Dwe,rainy:jwe,rant:Vwe,ranter:Owe,ranters:Mwe,rants:Lwe,rape:Fwe,raped:zwe,rapist:Uwe,rapture:Bwe,raptured:$we,raptures:qwe,rapturous:Wwe,rash:Gwe,ratified:Hwe,reach:Kwe,reached:Qwe,reaches:Ywe,reaching:Xwe,reassure:Jwe,reassured:Zwe,reassures:e2e,reassuring:t2e,rebel:n2e,rebellion:s2e,rebels:r2e,recession:i2e,reckless:o2e,recognition:a2e,recommend:c2e,recommended:l2e,recommends:u2e,redeemed:d2e,refine:h2e,refined:f2e,refines:m2e,refreshingly:p2e,refuse:g2e,refused:y2e,refuses:v2e,refusing:_2e,regret:w2e,regretful:E2e,regrets:T2e,regretted:I2e,regretting:x2e,reigning:b2e,reject:k2e,rejected:S2e,rejecting:A2e,rejection:P2e,rejects:N2e,rejoice:C2e,rejoiced:R2e,rejoices:D2e,rejoicing:j2e,relaxed:V2e,relentless:O2e,reliability:M2e,reliable:L2e,reliably:F2e,reliant:z2e,relieve:U2e,relieved:B2e,relieves:$2e,relieving:q2e,relishing:W2e,remarkable:G2e,remorse:H2e,repellent:K2e,repercussion:Q2e,repercussions:Y2e,reprimand:X2e,reprimanded:J2e,reprimanding:Z2e,reprimands:e0e,repulse:t0e,repulsed:n0e,repulsive:s0e,rescue:r0e,rescued:i0e,rescues:o0e,resentful:a0e,resign:c0e,resigned:l0e,resigning:u0e,resigns:d0e,resolute:h0e,resolution:f0e,resolve:m0e,resolved:p0e,resolves:g0e,resolving:y0e,respect:v0e,respected:_0e,respects:w0e,responsibility:E0e,responsible:T0e,responsive:I0e,restful:x0e,restless:b0e,restore:k0e,restored:S0e,restores:A0e,restoring:P0e,restrict:N0e,restricted:C0e,restricting:R0e,restriction:D0e,restrictive:j0e,restricts:V0e,retained:O0e,retard:M0e,retarded:L0e,retreat:F0e,revenge:z0e,revengeful:U0e,revered:B0e,revive:$0e,revives:q0e,revolting:W0e,reward:G0e,rewarded:H0e,rewarding:K0e,rewards:Q0e,rich:Y0e,richly:X0e,ridiculous:J0e,rig:Z0e,rigged:e1e,"right direction":3,righteousness:t1e,rightful:n1e,rightfully:s1e,rigorous:r1e,rigorously:i1e,riot:o1e,riots:a1e,rise:c1e,rises:l1e,risk:u1e,risks:d1e,risky:h1e,riveting:f1e,rob:m1e,robber:p1e,robed:g1e,robing:y1e,robs:v1e,robust:_1e,rofl:w1e,roflcopter:E1e,roflmao:T1e,romance:I1e,romantical:x1e,romantically:b1e,rose:k1e,rotfl:S1e,rotflmfao:A1e,rotflol:P1e,rotten:N1e,rude:C1e,ruin:R1e,ruined:D1e,ruining:j1e,ruins:V1e,sabotage:O1e,sad:M1e,sadden:L1e,saddened:F1e,sadly:z1e,safe:U1e,safely:B1e,safer:$1e,safety:q1e,salient:W1e,salute:G1e,saluted:H1e,salutes:K1e,saluting:Q1e,salvation:Y1e,sappy:X1e,sarcastic:J1e,satisfied:Z1e,savange:eEe,savanges:tEe,save:nEe,saved:sEe,savings:rEe,scam:iEe,scams:oEe,scandal:aEe,scandalous:cEe,scandals:lEe,scapegoat:uEe,scapegoats:dEe,scare:hEe,scared:fEe,scar:mEe,scars:pEe,scary:gEe,sceptical:yEe,scold:vEe,scoop:_Ee,scorn:wEe,scornful:EEe,scream:TEe,screamed:IEe,screaming:xEe,screams:bEe,screwed:kEe,"screwed up":-3,scum:SEe,scumbag:AEe,seamless:PEe,seamlessly:NEe,secure:CEe,secured:REe,secures:DEe,sedition:jEe,seditious:VEe,seduced:OEe,"self-abuse":-2,"self-confident":2,"self-contradictory":-2,"self-deluded":-2,selfish:MEe,selfishness:LEe,sentence:FEe,sentenced:zEe,sentences:UEe,sentencing:BEe,serene:$Ee,settlement:qEe,settlements:WEe,severe:GEe,severely:HEe,sexist:KEe,sexistic:QEe,sexy:YEe,shaky:XEe,shame:JEe,shamed:ZEe,shameful:eTe,share:tTe,shared:nTe,shares:sTe,shattered:rTe,shit:iTe,shithead:oTe,shitty:aTe,shock:cTe,shocked:lTe,shocking:uTe,shocks:dTe,shoody:hTe,shoot:fTe,"short-sighted":-2,"short-sightedness":-2,shortage:mTe,shortages:pTe,shrew:gTe,shy:yTe,sick:vTe,sickness:_Te,"side-effect":-2,"side-effects":-2,sigh:wTe,significance:ETe,significant:TTe,silencing:ITe,silly:xTe,simplicity:bTe,sin:kTe,sincere:STe,sincerely:ATe,sincerest:PTe,sincerity:NTe,sinful:CTe,singleminded:RTe,sinister:DTe,sins:jTe,skeptic:VTe,skeptical:OTe,skepticism:MTe,skeptics:LTe,slam:FTe,slash:zTe,slashed:UTe,slashes:BTe,slashing:$Te,slave:qTe,slavery:WTe,slaves:GTe,sleeplessness:HTe,slick:KTe,slicker:QTe,slickest:YTe,slip:XTe,sloppy:JTe,sluggish:ZTe,slumping:eIe,slut:tIe,smart:nIe,smarter:sIe,smartest:rIe,smear:iIe,smile:oIe,smiled:aIe,smiles:cIe,smiling:lIe,smog:uIe,smuggle:dIe,smuggled:hIe,smuggling:fIe,smuggles:mIe,sneaky:pIe,sneeze:gIe,sneezed:yIe,sneezes:vIe,sneezing:_Ie,snub:wIe,snubbed:EIe,snubbing:TIe,snubs:IIe,sobering:xIe,solemn:bIe,solid:kIe,solidarity:SIe,solidified:AIe,solidifies:PIe,solidify:NIe,solidifying:CIe,solution:RIe,solutions:DIe,solve:jIe,solved:VIe,solves:OIe,solving:MIe,somber:LIe,"some kind":0,"son-of-a-bitch":-5,soothe:FIe,soothed:zIe,soothing:UIe,sophisticated:BIe,sore:$Ie,sorrow:qIe,sorrowful:WIe,sorry:GIe,spacious:HIe,spam:KIe,spammer:QIe,spammers:YIe,spamming:XIe,spark:JIe,sparkle:ZIe,sparkles:exe,sparkling:txe,spearhead:nxe,speculative:sxe,spirit:rxe,spirited:ixe,spiritless:oxe,spiteful:axe,splendid:cxe,spoiled:lxe,spoilt:uxe,spotless:dxe,sprightly:hxe,squander:fxe,squandered:mxe,squandering:pxe,squanders:gxe,squelched:yxe,stab:vxe,stabbed:_xe,stable:wxe,stabs:Exe,stall:Txe,stalled:Ixe,stalling:xxe,stamina:bxe,stampede:kxe,stank:Sxe,startled:Axe,startling:Pxe,starve:Nxe,starved:Cxe,starves:Rxe,starving:Dxe,steadfast:jxe,steal:Vxe,stealing:Oxe,steals:Mxe,stereotype:Lxe,stereotyped:Fxe,stifled:zxe,stimulate:Uxe,stimulated:Bxe,stimulates:$xe,stimulating:qxe,stingy:Wxe,stink:Gxe,stinked:Hxe,stinker:Kxe,stinking:Qxe,stinks:Yxe,stinky:Xxe,stole:Jxe,stolen:Zxe,stop:ebe,stopped:tbe,stopping:nbe,stops:sbe,stout:rbe,straight:ibe,strange:obe,strangely:abe,strangled:cbe,strength:lbe,strengthen:ube,strengthened:dbe,strengthening:hbe,strengthens:fbe,strengths:mbe,stress:pbe,stressed:gbe,stressor:ybe,stressors:vbe,stricken:_be,strike:wbe,strikers:Ebe,strikes:Tbe,strong:Ibe,stronger:xbe,strongest:bbe,struck:kbe,struggle:Sbe,struggled:Abe,struggles:Pbe,struggling:Nbe,stubborn:Cbe,stuck:Rbe,stunned:Dbe,stunning:jbe,stupid:Vbe,stupidity:Obe,stupidly:Mbe,suave:Lbe,subpoena:Fbe,substantial:zbe,substantially:Ube,subversive:Bbe,succeed:$be,succeeded:qbe,succeeding:Wbe,succeeds:Gbe,success:Hbe,successful:Kbe,successfully:Qbe,suck:Ybe,sucks:Xbe,sue:Jbe,sued:Zbe,sueing:eke,sues:tke,suffer:nke,suffered:ske,sufferer:rke,sufferers:ike,suffering:oke,suffers:ake,suicidal:cke,suicide:lke,suicides:uke,suing:dke,suitable:hke,suited:fke,sulking:mke,sulky:pke,sullen:gke,sunshine:yke,super:3,superb:vke,superior:_ke,support:wke,supported:Eke,supporter:Tke,supporters:Ike,supporting:xke,supportive:bke,supports:kke,supreme:Ske,survived:Ake,surviving:Pke,survivor:Nke,suspect:Cke,suspected:Rke,suspecting:Dke,suspects:jke,suspend:Vke,suspended:Oke,suspicious:Mke,sustainability:Lke,sustainable:Fke,sustainably:zke,swear:Uke,swearing:Bke,swears:$ke,sweet:qke,sweeter:Wke,sweetest:Gke,swift:Hke,swiftly:Kke,swindle:Qke,swindles:Yke,swindling:Xke,sympathetic:Jke,sympathy:Zke,taint:eSe,tainted:tSe,talent:nSe,tard:sSe,tarnish:rSe,tarnished:iSe,tarnishes:oSe,tears:aSe,tender:cSe,tenderness:lSe,tense:uSe,tension:dSe,terrible:hSe,terribly:fSe,terrific:mSe,terrifically:pSe,terrified:gSe,terror:ySe,terrorist:vSe,terrorists:_Se,terrorize:wSe,terrorized:ESe,terrorizes:TSe,thank:ISe,thankful:xSe,thanks:bSe,thorny:kSe,thoughtful:SSe,thoughtless:ASe,threat:PSe,threaten:NSe,threatened:CSe,threatening:RSe,threatens:DSe,threats:jSe,thrilled:VSe,thwart:OSe,thwarted:MSe,thwarting:LSe,thwarts:FSe,timid:zSe,timorous:USe,tired:BSe,tits:$Se,tolerance:qSe,tolerant:WSe,toothless:GSe,top:HSe,tops:KSe,torn:QSe,torture:YSe,tortured:XSe,tortures:JSe,torturing:ZSe,totalitarian:eAe,totalitarianism:tAe,tout:nAe,touted:sAe,touting:rAe,touts:iAe,toxic:oAe,tragedies:aAe,tragedy:cAe,tragic:lAe,tranquil:uAe,transgress:dAe,transgressed:hAe,transgresses:fAe,transgressing:mAe,trap:pAe,trapped:gAe,traps:yAe,trauma:vAe,traumatic:_Ae,travesty:wAe,treason:EAe,treasonous:TAe,treasure:IAe,treasures:xAe,trembling:bAe,tremor:kAe,tremors:SAe,tremulous:AAe,tribulation:PAe,tribute:NAe,tricked:CAe,trickery:RAe,triumph:DAe,triumphant:jAe,troll:VAe,trouble:OAe,troubled:MAe,troubles:LAe,troubling:FAe,true:2,trust:zAe,trusted:UAe,trusts:BAe,tumor:$Ae,twat:qAe,tyran:WAe,tyrannic:GAe,tyrannical:HAe,tyrannically:KAe,tyrans:QAe,ubiquitous:YAe,ugh:XAe,ugliness:JAe,ugly:ZAe,unable:ePe,unacceptable:tPe,unappeasable:nPe,unappreciated:sPe,unapproved:rPe,unattractive:iPe,unavailable:oPe,unavailing:aPe,unaware:cPe,unbearable:lPe,unbelievable:uPe,unbelieving:dPe,unbiased:hPe,uncertain:fPe,unclear:mPe,uncomfortable:pPe,unconcerned:gPe,unconfirmed:yPe,unconvinced:vPe,uncredited:_Pe,undecided:wPe,undercooked:EPe,underestimate:TPe,underestimated:IPe,underestimates:xPe,underestimating:bPe,undermine:kPe,undermined:SPe,undermines:APe,undermining:PPe,underperform:NPe,underperformed:CPe,underperforming:RPe,underperforms:DPe,undeserving:jPe,undesirable:VPe,uneasy:OPe,unemployed:MPe,unemployment:LPe,unequal:FPe,unequaled:zPe,unethical:UPe,uneventful:BPe,unfair:$Pe,unfavorable:qPe,unfit:WPe,unfitted:GPe,unfocused:HPe,unforgivable:KPe,unforgiving:QPe,unfulfilled:YPe,unfunny:XPe,ungenerous:JPe,ungrateful:ZPe,unhappy:eNe,unhappiness:tNe,unhealthy:nNe,unhygienic:sNe,unified:rNe,unimaginative:iNe,unimpressed:oNe,uninspired:aNe,unintelligent:cNe,unintentional:lNe,uninvolving:uNe,united:dNe,unjust:hNe,unlikely:fNe,unlovable:mNe,unloved:pNe,unmatched:gNe,unmotivated:yNe,unoriginal:vNe,unparliamentary:_Ne,unpleasant:wNe,unpleasantness:ENe,unprofessional:TNe,unravel:INe,unreleting:xNe,unresearched:bNe,unsafe:kNe,unsatisfied:SNe,unscientific:ANe,unsecured:PNe,unselfish:NNe,unsettled:CNe,unsold:RNe,unsophisticated:DNe,unsound:jNe,unstable:VNe,unstoppable:ONe,unsuccessful:MNe,unsuccessfully:LNe,unsupported:FNe,unsure:zNe,untarnished:UNe,untrue:BNe,unwanted:$Ne,unworthy:qNe,uplifting:WNe,uproar:GNe,upset:HNe,upsets:KNe,upsetting:QNe,uptight:YNe,urgent:XNe,useful:JNe,usefulness:ZNe,useless:eCe,uselessness:tCe,vague:nCe,validate:sCe,validated:rCe,validates:iCe,validating:oCe,vapid:aCe,verdict:cCe,verdicts:lCe,vested:uCe,vexation:dCe,vexing:hCe,vibrant:fCe,vicious:mCe,victim:pCe,victimization:gCe,victimize:yCe,victimized:vCe,victimizes:_Ce,victimizing:wCe,victims:ECe,victor:TCe,victors:ICe,victory:xCe,victories:bCe,vigilant:kCe,vigor:SCe,vile:ACe,vindicate:PCe,vindicated:NCe,vindicates:CCe,vindicating:RCe,violate:DCe,violated:jCe,violates:VCe,violating:OCe,violation:MCe,violations:LCe,violence:FCe,"violence-related":-3,violent:zCe,violently:UCe,virtuous:BCe,virulent:$Ce,vision:qCe,visionary:WCe,visioning:GCe,visions:HCe,vitality:KCe,vitamin:QCe,vitriolic:YCe,vivacious:XCe,vividly:JCe,vociferous:ZCe,vomit:eRe,vomited:tRe,vomiting:nRe,vomits:sRe,vulnerability:rRe,vulnerable:iRe,walkout:oRe,walkouts:aRe,wanker:cRe,want:lRe,war:uRe,warfare:dRe,warm:hRe,warmhearted:fRe,warmness:mRe,warmth:pRe,warn:gRe,warned:yRe,warning:vRe,warnings:_Re,warns:wRe,waste:ERe,wasted:TRe,wasting:IRe,wavering:xRe,weak:bRe,weakened:kRe,weakness:SRe,weaknesses:ARe,wealth:PRe,wealthier:NRe,wealthy:CRe,weary:RRe,weep:DRe,weeping:jRe,weird:VRe,welcome:ORe,welcomed:MRe,welcomes:LRe,"well-being":2,"well-championed":3,"well-developed":2,"well-established":2,"well-focused":2,"well-groomed":2,"well-proportioned":2,whimsical:FRe,whitewash:zRe,whore:URe,wicked:BRe,widowed:$Re,willingness:qRe,win:WRe,winner:GRe,winning:HRe,wins:KRe,winwin:QRe,wisdom:YRe,wish:XRe,wishes:JRe,wishing:ZRe,withdrawal:eDe,wits:tDe,woebegone:nDe,woeful:sDe,won:rDe,wonderful:iDe,wonderfully:oDe,woo:aDe,woohoo:cDe,wooo:lDe,woow:uDe,worn:dDe,worried:hDe,worries:fDe,worry:mDe,worrying:pDe,worse:gDe,worsen:yDe,worsened:vDe,worsening:_De,worsens:wDe,worshiped:EDe,worst:TDe,worth:IDe,worthless:xDe,worthy:bDe,wow:kDe,wowow:SDe,wowww:ADe,wrathful:PDe,wreck:NDe,wrenching:CDe,wrong:RDe,wrongdoing:DDe,wrongdoings:jDe,wronged:VDe,wrongful:ODe,wrongfully:MDe,wrongly:LDe,wtf:FDe,wtff:zDe,wtfff:UDe,xo:BDe,xoxo:$De,xoxoxo:qDe,xoxoxoxo:WDe,yeah:GDe,yearning:HDe,yeees:KDe,yes:QDe,youthful:YDe,yucky:XDe,yummy:JDe,zealot:ZDe,zealots:e3e,zealous:t3e},s3e=1,r3e=1,i3e=1,o3e=1,a3e=1,c3e=1,l3e=1,u3e={cant:s3e,"can't":1,dont:r3e,"don't":1,doesnt:i3e,"doesn't":1,not:o3e,non:a3e,wont:c3e,"won't":1,isnt:l3e,"isn't":1};var d3e=u3e,h3e={apply:function(t,e,n){if(e>0){var s=t[e-1];d3e[s]&&(n=-n)}return n}},f3e={labels:n3e,scoringStrategy:h3e},Sx=CV,Ax=f3e;Object.assign(Ax.labels,Sx);var gu={en:Ax},m3e={addLanguage:function(t,e){if(!e.labels)throw new Error("language.labels must be defined!");Object.assign(e.labels,Sx),gu[t]=e},getLanguage:function(t){if(!t)return gu.en;if(!gu[t])try{var e=NV("../languages/"+t+"/index");this.addLanguage(t,e)}catch{throw new Error("No language found: "+t)}return gu[t]},getLabels:function(t){var e=this.getLanguage(t);return e.labels},applyScoringStrategy:function(t,e,n,s){var r=this.getLanguage(t),i=r.scoringStrategy||p3e;return i.apply(e,n,s)}},p3e={apply:function(t,e,n){return n}},g3e=PV,bp=m3e,Ay=function(t){this.options=t};Ay.prototype.registerLanguage=function(t,e){bp.addLanguage(t,e)};Ay.prototype.analyze=function(t,e,n){typeof t>"u"&&(t=""),typeof e=="function"&&(n=e,e={}),e=e||{};var s=e.language||"en",r=bp.getLabels(s);typeof e.extras=="object"&&(r=Object.assign(r,e.extras));for(var i=g3e(t),o=0,a=[],c=[],d=[],f=[],m=i.length;m--;){var g=i[m];if(r.hasOwnProperty(g)){a.push(g);var T=r[g];T=bp.applyScoringStrategy(s,i,m,T),T>0&&c.push(g),T<0&&d.push(g),o+=T;var S={};S[g]=T,f.push(S)}}var A={score:o,comparative:i.length>0?o/i.length:0,calculation:f,tokens:i,words:a,positive:c,negative:d};if(typeof n=="function")process.nextTick(function(){n(null,A)});else return A};var y3e=Ay;const v3e=N2(y3e),_3e=new v3e;function Hd(t){return!t||t.trim()===""?null:_3e.analyze(t)}function Py(t){if(!t||t.trim()==="")return[];const e=t.toLowerCase().replace(/[^a-z0-9\s]/g,"").split(/\s+/).filter(s=>s.length>3);return[...new Set(e)].sort((s,r)=>r.length-s.length).slice(0,3)}function w3e(){const{user:t}=xn(),[e,n]=P.useState([]),[s,r]=P.useState({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),[i,o]=P.useState(!1),[a,c]=P.useState(null),[d,f]=P.useState(!0),[m,g]=P.useState(!1),[T,S]=P.useState(""),[A,C]=P.useState(null),[x,v]=P.useState([]),b=new Date().toISOString().split("T")[0];P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const N=await ms.fetchWorkoutsByUser(t.uid);n(N.workouts||[])}catch(N){console.error("Error fetching workouts:",N),S("Failed to load workouts")}finally{f(!1)}})()},[t]);const D=w=>{const{name:N,value:R}=w.target;r(k=>({...k,[N]:R}))},L=async w=>{if(w.preventDefault(),console.log("🚀 Workout submit started"),console.log("📊 Form data:",s),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),S("Please log in to save workouts");return}if(!s.title||!s.durationMinutes||!s.date){S("Please fill in all required fields");return}try{g(!0),S("");let N;if(s.date){const le=s.date.split("-"),J=parseInt(le[0]),$=parseInt(le[1]),oe=parseInt(le[2]),G=new Date;console.log("🔍 Date parsing debug:"),console.log("  Form input:",s.date),console.log("  Split parts:",le),console.log("  Parsed year:",J),console.log("  Parsed month (human readable):",$),console.log("  Parsed day:",oe),console.log("  Month for Date constructor (0-indexed):",$-1),N=new Date(J,$-1,oe,G.getHours(),G.getMinutes(),G.getSeconds()),console.log("📅 Created date:",N),console.log("📅 Verify - Year:",N.getFullYear()),console.log("📅 Verify - Month (0-indexed):",N.getMonth()),console.log("📅 Verify - Month (human):",N.getMonth()+1),console.log("📅 Verify - Day:",N.getDate()),console.log("📅 Final formatted:",N.toLocaleDateString())}else N=B.getCurrentLocalTime();const R={title:s.title,type:s.type,durationMinutes:parseInt(s.durationMinutes),date:N,notes:s.notes,caloriesBurned:s.caloriesBurned?parseInt(s.caloriesBurned):0};console.log("📝 Final workout data:",R),console.log("📅 Will be saved as:",B.formatLocalDateTime(R.date));let k;if(i&&a?k=await ms.updateWorkout(t.uid,a,R):k=await ms.logWorkout(t.uid,R),console.log("✅ Workout service result:",k),k.success){console.log("🎉 Workout logged successfully!");const le=await ms.fetchWorkoutsByUser(t.uid);n(le.workouts||[]),r({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),o(!1),c(null),S("");const J=Hd(s.notes);if(C(J),v(Py(s.notes)),!i||!a){const $={...R,sentiment:J?J.score:null};k=await ms.logWorkout(t.uid,$)}}}catch(N){console.error("💥 Workout logging error:",N),S("Failed to save workout. Please try again.")}finally{g(!1)}},M=w=>{var R,k;o(!0),c(w.id);const N=w.date instanceof Date?w.date.toISOString().split("T")[0]:new Date(w.date).toISOString().split("T")[0];r({date:N,durationMinutes:((R=w.durationMinutes)==null?void 0:R.toString())||"",title:w.title||"",type:w.type||"General",notes:w.notes||"",caloriesBurned:((k=w.caloriesBurned)==null?void 0:k.toString())||""})},E=async w=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this workout?"))try{await ms.deleteWorkout(t.uid,w),n(N=>N.filter(R=>R.id!==w))}catch(N){console.error("Error deleting workout:",N),S("Failed to delete workout")}},y=()=>{o(!1),c(null),r({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""})},I=e.filter(w=>(w.date instanceof Date?w.date.toISOString().split("T")[0]:new Date(w.date).toISOString().split("T")[0])===b);return d?u.jsx("div",{className:"workout-loading",children:"Loading workouts..."}):u.jsxs("div",{className:"workout-page",children:[u.jsxs("div",{className:"workout-card",children:[u.jsx("h1",{className:"workout-title",children:i?"Edit Workout Session":"Log Workout Session"}),T&&u.jsx("div",{className:"error-message",children:T}),u.jsxs("form",{onSubmit:L,className:"workout-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:s.date,onChange:D,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Title",u.jsx("input",{type:"text",name:"title",value:s.title,onChange:D,className:"form-input",placeholder:"e.g., Morning Run, Gym Session",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Type",u.jsxs("select",{name:"type",value:s.type,onChange:D,className:"form-input",children:[u.jsx("option",{value:"General",children:"General"}),u.jsx("option",{value:"Cardio",children:"Cardio"}),u.jsx("option",{value:"Strength",children:"Strength Training"}),u.jsx("option",{value:"Yoga",children:"Yoga"}),u.jsx("option",{value:"Running",children:"Running"}),u.jsx("option",{value:"Cycling",children:"Cycling"}),u.jsx("option",{value:"Swimming",children:"Swimming"}),u.jsx("option",{value:"Walking",children:"Walking"}),u.jsx("option",{value:"HIIT",children:"HIIT"}),u.jsx("option",{value:"Other",children:"Other"})]})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration / Length (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:s.durationMinutes,onChange:D,className:"form-input",min:"1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Calories Burned (Optional)",u.jsx("input",{type:"number",name:"caloriesBurned",value:s.caloriesBurned,onChange:D,className:"form-input",min:"0",placeholder:"0"})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:s.notes,onChange:D,className:"form-input form-textarea",placeholder:"How did it feel? Any achievements?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Workout":"Log Workout"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:y,disabled:m,children:"Cancel"})]})]})]}),u.jsxs("div",{className:"workout-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Workouts (",I.length,")"]}),I.length===0?u.jsx("p",{className:"no-workouts",children:"No workouts logged for today. Start your fitness journey!"}):u.jsx("ul",{className:"log-list",children:I.map(w=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"workout-info",children:[u.jsx("span",{className:"workout-title-display",children:w.title}),u.jsx("span",{className:"workout-type",children:w.type}),u.jsxs("span",{className:"workout-duration",children:[w.durationMinutes," min"]}),w.caloriesBurned>0&&u.jsxs("span",{className:"workout-calories",children:[w.caloriesBurned," cal"]}),w.notes&&u.jsx("span",{className:"workout-notes",children:w.notes})]}),u.jsxs("div",{className:"workout-actions",children:[u.jsx("button",{onClick:()=>M(w),className:"edit-button",disabled:m,children:"Edit"}),u.jsx("button",{onClick:()=>E(w.id),className:"delete-button",disabled:m,children:"Delete"})]})]},w.id))})]}),A&&u.jsxs("div",{className:"sentiment-feedback",children:[A.score>0&&"Your note sounds positive! 😊",A.score<0&&"Your note sounds a bit negative. 😟",A.score===0&&"Your note sounds neutral. 😐",x.length>0&&u.jsxs("div",{className:"keywords",children:[u.jsx("strong",{children:"Keywords:"})," ",x.join(", ")]})]})]})}const Ys={silence:{name:"Silence",description:"Pure silence for traditional meditation",icon:"🤫",neurological:"Promotes introspection and self-awareness",frequency:null,baseFreq:null},pink_noise_rain:{name:"Pink Noise Rain",description:"Synthetic pink noise for deep relaxation",icon:"🌧️",neurological:"Pink noise (1/f) - enhances deep sleep and memory consolidation",frequency:"pink_noise",baseFreq:200,waveType:"sawtooth"},alpha_waves:{name:"Ocean Waves",description:"Realistic ocean waves with alpha wave entrainment",icon:"🌊",neurological:"Ocean rhythms (0.1 Hz) naturally entrain alpha waves (8-12 Hz) for relaxation",frequency:"ocean_waves",waveFrequency:.1,baseFreq:60,highFreq:200,alphaCarrier:200,alphaBeat:10,waveType:"sine"},earth_frequency:{name:"Earth Resonance",description:"Schumann resonance for grounding",icon:"🌲",neurological:"Earth frequency (7.83 Hz) - natural grounding and balance",frequency:"earth_binaural",carrierFreq:136.1,waveType:"sine"},white_noise:{name:"White Noise",description:"Full spectrum noise for focus",icon:"📻",neurological:"White noise - masks distractions, improves concentration",frequency:"white_noise",baseFreq:440,waveType:"square"},gamma_focus:{name:"Gamma Focus",description:"High-frequency binaural beats for peak concentration",icon:"🎧",neurological:"Gamma waves (40 Hz) - heightened awareness and cognitive performance",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},theta_deep:{name:"Theta Deep State",description:"Deep theta waves for profound meditation",icon:"🌙",neurological:"Theta waves (6 Hz) - deep meditation, creativity, and memory consolidation",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},healing_bowls:{name:"Healing Harmonics",description:"432 Hz healing frequency with natural harmonics",icon:"🎵",neurological:'432 Hz "healing frequency" with harmonic overtones for cellular resonance',frequency:"harmonic",baseFreq:432,harmonics:[432,648,864,1296],waveType:"triangle",premium:!0},delta_deep_sleep:{name:"Delta Deep Sleep",description:"0.5-4 Hz for deep sleep and regeneration",icon:"😴",neurological:"Delta waves (0.5-4 Hz) - deep sleep, physical healing, and immune system boost",frequency:"delta",baseFreq:2,binauralBeat:2,leftEar:200,rightEar:202,waveType:"sine",premium:!0},theta_creativity:{name:"Theta Creativity",description:"4-8 Hz for creativity and insight",icon:"🎨",neurological:"Theta waves (4-8 Hz) - enhanced creativity, insight, and problem-solving",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},alpha_relaxation:{name:"Alpha Relaxation",description:"8-12 Hz for relaxation and stress reduction",icon:"😌",neurological:"Alpha waves (8-12 Hz) - relaxation, stress reduction, and improved learning",frequency:"alpha",baseFreq:10,binauralBeat:10,leftEar:200,rightEar:210,waveType:"sine",premium:!0},beta_focus:{name:"Beta Focus",description:"13-30 Hz for focus and alertness",icon:"🎯",neurological:"Beta waves (13-30 Hz) - focused attention, alertness, and cognitive performance",frequency:"beta",baseFreq:20,binauralBeat:20,leftEar:200,rightEar:220,waveType:"sine",premium:!0},gamma_insight:{name:"Gamma Insight",description:"30-100 Hz for insight and peak performance",icon:"💡",neurological:"Gamma waves (30-100 Hz) - insight, peak performance, and heightened awareness",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},anxiety_relief_528:{name:"Anxiety Relief (528 Hz)",description:"528 Hz frequency for anxiety and stress relief",icon:"🧘",neurological:'528 Hz "Love frequency" - reduces anxiety, promotes healing, and DNA repair',frequency:"single_tone",baseFreq:528,waveType:"sine",premium:!0},depression_lift_639:{name:"Depression Lift (639 Hz)",description:"639 Hz frequency for emotional balance",icon:"🌈",neurological:'639 Hz "Connection frequency" - improves relationships, emotional balance, and communication',frequency:"single_tone",baseFreq:639,waveType:"sine",premium:!0},confidence_boost_741:{name:"Confidence Boost (741 Hz)",description:"741 Hz frequency for self-expression and confidence",icon:"💪",neurological:'741 Hz "Expression frequency" - enhances self-expression, confidence, and creativity',frequency:"single_tone",baseFreq:741,waveType:"sine",premium:!0},intuition_852:{name:"Intuition (852 Hz)",description:"852 Hz frequency for intuition and spiritual awareness",icon:"🔮",neurological:'852 Hz "Intuition frequency" - enhances intuition, spiritual awareness, and inner wisdom',frequency:"single_tone",baseFreq:852,waveType:"sine",premium:!0},solfeggio_396:{name:"Liberation (396 Hz)",description:"396 Hz Solfeggio frequency for fear and guilt release",icon:"🕊️",neurological:'396 Hz "Liberation frequency" - releases fear, guilt, and negative emotions',frequency:"single_tone",baseFreq:396,waveType:"sine",premium:!0},solfeggio_417:{name:"Transformation (417 Hz)",description:"417 Hz Solfeggio frequency for change and transformation",icon:"🦋",neurological:'417 Hz "Transformation frequency" - facilitates change, transformation, and new beginnings',frequency:"single_tone",baseFreq:417,waveType:"sine",premium:!0},solfeggio_963:{name:"Awakening (963 Hz)",description:"963 Hz Solfeggio frequency for spiritual awakening",icon:"✨",neurological:'963 Hz "Awakening frequency" - spiritual awakening, connection to higher consciousness',frequency:"single_tone",baseFreq:963,waveType:"sine",premium:!0}},yu={mindfulness:{name:"Mindfulness",description:"Present-moment awareness practice",duration:[5,10,15,20],icon:"🧘‍♀️"},breathing:{name:"Breathing",description:"Focused breathwork exercises",duration:[3,5,10],icon:"💨"},body_scan:{name:"Body Scan",description:"Progressive muscle relaxation",duration:[10,15,20],icon:"🫁"},loving_kindness:{name:"Loving Kindness",description:"Compassion and heart-opening meditation",duration:[5,10,15],icon:"💖"},flow_state:{name:"Flow State",description:"Neurologically optimized for peak performance",duration:[5,7,10],icon:"🎯",premium:!0}};function Px({children:t,fallback:e,showUpgrade:n=!0,feature:s="this feature",className:r=""}){const{isPremium:i,upgradeToPremium:o}=xn();return i?t:e||u.jsx("div",{className:`premium-gate ${r}`,children:u.jsxs("div",{className:"premium-lock",children:[u.jsx("div",{className:"lock-icon",children:"🔒"}),u.jsx("h3",{children:"Premium Feature"}),u.jsxs("p",{children:["Upgrade to unlock ",s]}),n&&u.jsx("button",{onClick:sl,className:"unlock-button",children:"Upgrade to Premium - $4.99/month"})]})})}function E3e(){const{user:t,isPremium:e}=xn(),[n,s]=P.useState([]),[r,i]=P.useState({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),[o,a]=P.useState(!1),[c,d]=P.useState(null),[f,m]=P.useState(!0),[g,T]=P.useState(!1),[S,A]=P.useState(""),[C,x]=P.useState(null),[v,b]=P.useState([]),[D,L]=P.useState(""),[M,E]=P.useState(""),[y,I]=P.useState(""),[w,N]=P.useState(!1),[R,k]=P.useState(0),[le,J]=P.useState(5),[$,oe]=P.useState(!1),[G,ie]=P.useState(!1),[X,pe]=P.useState("silence");P.useEffect(()=>{console.log("🔍 currentSoundscape changed to:",X)},[X]);const[ge,Ce]=P.useState(""),[je,Jt]=P.useState(null),[Ze,Mt]=P.useState(null),[Z,fe]=P.useState(null),[Ve,et]=P.useState(null),[pt,bn]=P.useState(null),[rs,ma]=P.useState(!1),[Il,pa]=P.useState(!1),Ls=P.useRef(null);B.formatLocalDate(new Date),P.useEffect(()=>{(()=>{const U="wakeLock"in navigator;ma(U),console.log("🔒 Wake Lock API supported:",U)})()},[]),P.useEffect(()=>{const j=async()=>{if(t!=null&&t.uid)try{m(!0),console.log("🌍 Fetching meditations for timezone:",B.getUserTimezone());const H=((await ps.fetchMeditationsByUser(t.uid)).meditations||[]).map(se=>({...se,localDate:B.formatLocalDate(se.date),localDateTime:B.formatLocalDateTime(se.date),relativeTime:B.getRelativeTime(se.date),isToday:B.isToday(se.date)}));s(H),console.log("🧘 Loaded meditations with timezone data:",H.length)}catch(U){console.error("Error fetching meditations:",U),A("Failed to load meditation sessions")}finally{m(!1)}};t!=null&&t.uid&&j()},[t]),P.useEffect(()=>(console.log("🎵 Audio effect triggered - isSessionActive:",w,"currentSoundscape:",X),w&&X!=="silence"&&(console.log("🔊 Setting up audio for soundscape:",X),va()),()=>{if(Z)try{Array.isArray(Z)?Z.forEach(j=>{j.stop&&j.stop()}):Z.stop&&Z.stop()}catch(j){console.log("Audio cleanup error:",j)}}),[w,X]),P.useEffect(()=>(w&&!$?Ls.current=setInterval(()=>{k(j=>{const U=j+1;return U>=180&&!G&&(ie(!0),Ur()),U})},1e3):clearInterval(Ls.current),()=>clearInterval(Ls.current)),[w,$,G]),P.useEffect(()=>{w&&R>=le*60&&(console.log("⏰ Timer completed! Auto-stopping session..."),console.log("📊 Final session stats:"),console.log("  - Duration:",Math.floor(R/60),"minutes"),console.log("  - Target:",le,"minutes"),console.log("  - Soundscape:",X),console.log("  - Deep state achieved:",G),console.log("  - Start time:",B.formatLocalDateTime(je)),Sl(),Pl())},[w,R,le,X,G,je]);const zr=n.filter(j=>j.isToday||B.isToday(j.date));console.log("📋 Today's meditations:",zr.length),P.useEffect(()=>()=>{ya(),Ls.current&&clearInterval(Ls.current)},[]);const ga=async()=>{try{if(!rs)return console.log("🔒 Wake Lock API not supported, using fallback methods"),!1;const j=await navigator.wakeLock.request("screen");return bn(j),pa(!0),console.log("🔒 Wake lock activated"),j.addEventListener("release",()=>{console.log("🔒 Wake lock was released"),pa(!1),bn(null)}),!0}catch(j){return console.error("🔒 Failed to request wake lock:",j),!1}},ya=()=>{try{pt&&(pt.release(),bn(null),pa(!1),console.log("🔒 Wake lock released"))}catch(j){console.error("🔒 Error releasing wake lock:",j)}},Wh=()=>!rs&&(console.log("🔒 Using fallback keep-awake methods"),Ze&&Ze.state==="suspended"&&Ze.resume(),"vibrate"in navigator)?setInterval(()=>{navigator.vibrate(1)},3e4):null,va=()=>{try{const j=new(window.AudioContext||window.webkitAudioContext);Mt(j);const U=j.createGain();U.connect(j.destination),U.gain.value=.1,et(U);const H=Ys[X];if(!(H!=null&&H.frequency)){console.log("🔇 Silence selected");return}switch(H.frequency){case"gamma":case"theta":_a(j,U,H);break;case"alpha":xl(j,U,H);break;case"ocean_waves":Gh(j,U,H);break;case"earth_binaural":dt(j,U,H);break;case"harmonic":Ui(j,U,H.harmonics||[H.baseFreq]);break;case"pink_noise":bl(j,U);break;case"white_noise":kl(j,U);break;case"single_tone":case"natural":gt(j,U,H.baseFreq,H.waveType||"sine");break;default:console.log("🔇 Unknown frequency type:",H.frequency)}}catch(j){console.error("Audio setup failed:",j)}},_a=(j,U,H)=>{const se=j.createOscillator();se.frequency.setValueAtTime(H.leftEar,j.currentTime),se.type=H.waveType||"sine";const ce=j.createOscillator();ce.frequency.setValueAtTime(H.rightEar,j.currentTime),ce.type=H.waveType||"sine";const ne=j.createStereoPanner();ne.pan.value=-1;const me=j.createStereoPanner();me.pan.value=1,se.connect(ne),ne.connect(U),ce.connect(me),me.connect(U),se.start(),ce.start(),fe([se,ce]),console.log(`🎧 Binaural beats: ${H.leftEar}Hz (L) / ${H.rightEar}Hz (R) = ${H.binauralBeat}Hz beat`)},xl=(j,U,H)=>{const ce=H.baseFreq,ne=j.createOscillator();ne.frequency.setValueAtTime(200,j.currentTime),ne.type=H.waveType||"sine";const me=j.createOscillator();me.frequency.setValueAtTime(200+ce,j.currentTime),me.type=H.waveType||"sine";const be=j.createStereoPanner();be.pan.value=-1;const tt=j.createStereoPanner();tt.pan.value=1,ne.connect(be),be.connect(U),me.connect(tt),tt.connect(U),ne.start(),me.start(),fe([ne,me]),console.log(`🌊 Alpha binaural: 200Hz (L) / ${200+ce}Hz (R) = ${ce}Hz beat`)},dt=(j,U,H)=>{const se=H.carrierFreq||136.1,ce=7.83,ne=j.createOscillator();ne.frequency.setValueAtTime(se,j.currentTime),ne.type=H.waveType||"sine";const me=j.createOscillator();me.frequency.setValueAtTime(se+ce,j.currentTime),me.type=H.waveType||"sine";const be=j.createStereoPanner();be.pan.value=-1;const tt=j.createStereoPanner();tt.pan.value=1,ne.connect(be),be.connect(U),me.connect(tt),tt.connect(U),ne.start(),me.start(),fe([ne,me]),console.log(`🌲 Earth binaural: ${se}Hz (L) / ${se+ce}Hz (R) = ${ce}Hz Schumann beat`)},gt=(j,U,H,se="sine")=>{const ce=j.createOscillator();ce.frequency.setValueAtTime(H,j.currentTime),ce.type=se,ce.connect(U),ce.start(),fe(ce),console.log(`🎵 Single tone: ${H}Hz (${se})`)},Ui=(j,U,H)=>{const se=H.map(ce=>{const ne=j.createOscillator();ne.frequency.setValueAtTime(ce,j.currentTime),ne.type="triangle";const me=j.createGain();return me.gain.value=.3/H.length,ne.connect(me),me.connect(U),ne.start(),ne});fe(se),console.log(`🎼 Harmonics: ${H.join(", ")}Hz`)},bl=(j,U)=>{const H=j.sampleRate*2,se=j.createBuffer(1,H,j.sampleRate),ce=se.getChannelData(0);for(let me=0;me<H;me++){let be=0;for(let tt=0;tt<5;tt++)be+=(Math.random()*2-1)/Math.pow(2,tt);ce[me]=be*.1}const ne=j.createBufferSource();ne.buffer=se,ne.loop=!0,ne.connect(U),ne.start(),fe(ne),console.log("🌧️ Pink noise generated")},kl=(j,U)=>{const H=j.sampleRate*2,se=j.createBuffer(1,H,j.sampleRate),ce=se.getChannelData(0);for(let me=0;me<H;me++)ce[me]=(Math.random()*2-1)*.1;const ne=j.createBufferSource();ne.buffer=se,ne.loop=!0,ne.connect(U),ne.start(),fe(ne),console.log("📻 White noise generated")},Gh=(j,U,H)=>{const se=[],ce=j.createOscillator();ce.frequency.setValueAtTime(20,j.currentTime),ce.type="sine";const ne=j.createGain();ne.gain.value=.4;const me=j.createOscillator();me.frequency.setValueAtTime(396,j.currentTime),me.type="sine";const be=j.createGain();be.gain.value=.05;const tt=j.createOscillator();tt.frequency.setValueAtTime(.15,j.currentTime),tt.type="sine";const is=j.createGain();is.gain.value=.3,tt.connect(is),is.connect(ne.gain),ce.connect(ne),ne.connect(U),me.connect(be),be.connect(U);const Fs=j.createBuffer(1,j.sampleRate*8,j.sampleRate),Rl=Fs.getChannelData(0);let Ea=0;for(let Xe=0;Xe<Rl.length;Xe++){const It=Math.random()*2-1;Ea=(Ea+It*.02)*.99;const xt=Math.sin(Xe*.001)*.3+.7;Rl[Xe]=Ea*xt*.5}const fn=j.createBufferSource();fn.buffer=Fs,fn.loop=!0;const $r=j.createOscillator();$r.frequency.setValueAtTime(432,j.currentTime),$r.type="triangle";const $i=j.createGain();$i.gain.value=.08;const Un=j.createBiquadFilter();Un.type="bandpass",Un.frequency.setValueAtTime(300,j.currentTime),Un.Q.setValueAtTime(.8,j.currentTime);const qr=j.createGain();qr.gain.value=.3;const os=j.createOscillator();os.frequency.setValueAtTime(.13,j.currentTime),os.type="triangle";const as=j.createGain();as.gain.value=.25,os.connect(as),as.connect(qr.gain),as.connect($i.gain),fn.connect(Un),Un.connect(qr),qr.connect(U),$r.connect($i),$i.connect(U);const Sn=j.createBuffer(1,j.sampleRate*6,j.sampleRate),Ta=Sn.getChannelData(0);for(let Xe=0;Xe<Ta.length;Xe++){let It=0;for(let Pn=0;Pn<3;Pn++)It+=(Math.random()*2-1)*Math.pow(.5,Pn);const xt=Math.random()>.98?(Math.random()*2-1)*.3:0;Ta[Xe]=(It+xt)*.15}const zs=j.createBufferSource();zs.buffer=Sn,zs.loop=!0;const cs=j.createOscillator();cs.frequency.setValueAtTime(528,j.currentTime),cs.type="sine";const Us=j.createGain();Us.gain.value=.06;const Wr=j.createBiquadFilter();Wr.type="highpass",Wr.frequency.setValueAtTime(1500,j.currentTime);const Gr=j.createGain();Gr.gain.value=.12;const Hr=j.createOscillator();Hr.frequency.setValueAtTime(.5,j.currentTime),Hr.type="sine";const ls=j.createGain();if(ls.gain.value=.04,Hr.connect(ls),ls.connect(Gr.gain),ls.connect(Us.gain),zs.connect(Wr),Wr.connect(Gr),Gr.connect(U),cs.connect(Us),Us.connect(U),H.alphaCarrier&&H.alphaBeat){const Xe=j.createOscillator();Xe.frequency.setValueAtTime(H.alphaCarrier,j.currentTime),Xe.type="sine";const It=j.createOscillator();It.frequency.setValueAtTime(H.alphaCarrier+H.alphaBeat,j.currentTime),It.type="sine";const xt=j.createGain();xt.gain.value=.03;const Pn=j.createStereoPanner();Pn.pan.value=-1;const Gi=j.createStereoPanner();Gi.pan.value=1,Xe.connect(Pn),Pn.connect(xt),It.connect(Gi),Gi.connect(xt),xt.connect(U),se.push(Xe,It),Xe.start(),It.start()}const Ia=j.createBuffer(1,j.sampleRate*10,j.sampleRate),qi=Ia.getChannelData(0);for(let Xe=0;Xe<qi.length;Xe++){let It=0;for(let xt=0;xt<4;xt++)It+=(Math.random()*2-1)/Math.pow(2,xt*.7);qi[Xe]=It*.2}const An=j.createBufferSource();An.buffer=Ia,An.loop=!0;const Zt=j.createBiquadFilter();Zt.type="bandpass",Zt.frequency.setValueAtTime(150,j.currentTime),Zt.Q.setValueAtTime(.4,j.currentTime);const Bs=j.createGain();Bs.gain.value=.15;const Kr=j.createOscillator();Kr.frequency.setValueAtTime(.07,j.currentTime),Kr.type="sine";const Wi=j.createGain();Wi.gain.value=.1,Kr.connect(Wi),Wi.connect(Bs.gain),An.connect(Zt),Zt.connect(Bs),Bs.connect(U),ce.start(),me.start(),tt.start(),fn.start(),$r.start(),os.start(),zs.start(),cs.start(),Hr.start(),An.start(),Kr.start(),se.push(ce,me,tt,fn,$r,os,zs,cs,Hr,An,Kr),fe(se),console.log("🌊✨ Healing Ocean Waves: 396Hz (Liberation) + 432Hz (Earth) + 528Hz (Love) + Alpha binaural beats + Realistic ocean sounds")},Ur=()=>{console.log("🌟 Deep state achieved at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Deep State Achieved! 🧘‍♀️",{body:`You've entered a deep meditative state at ${B.formatLocalTime(new Date)}. Well done!`,icon:"/meditation-icon.png"})},Sl=()=>{console.log("🎉 Session completed at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Meditation Complete! 🎉",{body:`Great job! You completed your ${le}-minute meditation session.`,icon:"/meditation-icon.png"});try{const j=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAcugtTxzD2sLYPs7lkgCBl5gQEDgVs+l4G6tGEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAc=");j.volume=.3,j.play().catch(()=>{})}catch{}},Al=async(j,U,H)=>{const se=B.getCurrentLocalTime();if(console.log("🌍 Starting meditation session in timezone:",B.getUserTimezone()),console.log("🧘 Session start time:",B.formatLocalDateTime(se)),console.log("🎵 Selected soundscape:",H),J(j),k(0),N(!0),oe(!1),ie(!1),Jt(se),!await ga()){console.log("🔒 Wake lock failed, using fallback methods");const ne=Wh();ne&&(Ls.current=ne)}"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},wa=()=>{const j=B.getCurrentLocalTime();console.log("⏸️ Session paused at:",B.formatLocalDateTime(j)),oe(!$),Z&&Ze&&($?Ze.resume():Ze.suspend())},Pl=async()=>{const j=B.getCurrentLocalTime();if(console.log("⏹️ Session ended at:",B.formatLocalDateTime(j)),console.log("📊 Session duration:",Math.floor(R/60),"minutes"),console.log("🎯 Target duration:",le,"minutes"),console.log("✅ Session completed?",R>=le*60),ya(),Z){if(Array.isArray(Z))Z.forEach(U=>{try{U.stop?U.stop():U.disconnect&&U.disconnect()}catch(H){console.log("Oscillator cleanup:",H)}});else try{Z.stop?Z.stop():Z.disconnect&&Z.disconnect()}catch(U){console.log("Oscillator cleanup:",U)}fe(null)}if(Ze){try{await Ze.close()}catch(U){console.log("AudioContext cleanup:",U)}Mt(null)}if(N(!1),oe(!1),R>=60){console.log("💾 Auto-logging session (duration >= 1 minute)"),console.log("🔍 Session time check:",R,"seconds"),console.log("🔍 Firebase user:",t==null?void 0:t.uid),console.log("🔍 Session start time:",je);try{await Hh(),console.log("✅ Auto-log completed successfully")}catch(U){console.error("❌ Auto-log failed:",U)}}else console.log("⚠️ Session too short, not logging (< 1 minute)");console.log("🔇 Audio stopped and session ended successfully")},Hh=async()=>{var j;if(!(!(t!=null&&t.uid)||!je))try{console.log("📝 Auto-logging session with timezone data"),console.log("🧘 Session start time:",B.formatLocalDateTime(je)),console.log("⏰ Session duration:",Math.floor(R/60),"minutes");const U={date:je,durationMinutes:Math.floor(R/60),type:"mindfulness",soundscape:X,completed:R>=le*60,deepStateAchieved:G,moodBefore:ge,targetDuration:le,sessionStartTime:je,sessionEndTime:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),notes:r.notes,sentiment:r.notes?(j=Hd(r.notes))==null?void 0:j.score:null};console.log("📊 Session data being saved:",U);const H=await ps.logMeditation(t.uid,U);console.log("✅ API Response:",H);const se={...H.meditation,localDate:B.formatLocalDate(H.meditation.date),localDateTime:B.formatLocalDateTime(H.meditation.date),relativeTime:B.getRelativeTime(H.meditation.date),isToday:B.isToday(H.meditation.date)};console.log("🔄 Adding meditation to UI:",se),console.log("📅 Is today?",se.isToday),console.log("📅 Local date:",se.localDate),s(ce=>{const ne=[se,...ce];return console.log("📋 Updated meditations list:",ne.length,"total"),ne}),console.log("✅ Session auto-logged and added to UI successfully")}catch(U){console.error("💥 Error auto-logging session:",U),console.error("💥 Error details:",U.message)}},kn=j=>{const{name:U,value:H}=j.target;i(se=>({...se,[U]:H}))},Nl=async j=>{if(j.preventDefault(),!!(t!=null&&t.uid)){T(!0),A("");try{console.log("🌍 Submitting meditation in timezone:",B.getUserTimezone());const U=r.date?B.toLocalTimezone(r.date):B.getCurrentLocalTime(),H={...r,date:U,durationMinutes:parseInt(r.durationMinutes),userTimezone:B.getUserTimezone()};if(console.log("📝 Meditation submit data:",H),console.log("📅 Local meditation time:",B.formatLocalDateTime(U)),o)await ps.updateMeditation(t.uid,c,H),s(ce=>ce.map(ne=>ne.id===c?{...ne,...H,localDate:B.formatLocalDate(U),localDateTime:B.formatLocalDateTime(U),relativeTime:B.getRelativeTime(U),isToday:B.isToday(U)}:ne)),a(!1),d(null),console.log("✅ Meditation updated successfully");else{const ce=await ps.logMeditation(t.uid,H),ne={...ce.meditation,localDate:B.formatLocalDate(ce.meditation.date),localDateTime:B.formatLocalDateTime(ce.meditation.date),relativeTime:B.getRelativeTime(ce.meditation.date),isToday:B.isToday(ce.meditation.date)};s(me=>[ne,...me]),console.log("✅ Meditation logged successfully")}i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""});const se=Hd(r.notes);if(x(se),b(Py(r.notes)),!o){const ce={...H,sentiment:se?se.score:null},ne=await ps.logMeditation(t.uid,ce),me={...ne.meditation,localDate:B.formatLocalDate(ne.meditation.date),localDateTime:B.formatLocalDateTime(ne.meditation.date),relativeTime:B.getRelativeTime(ne.meditation.date),isToday:B.isToday(ne.meditation.date)};s(be=>[me,...be]),console.log("✅ Meditation logged successfully")}}catch(U){console.error("Error saving meditation:",U),A(o?"Failed to update meditation":"Failed to log meditation")}finally{T(!1)}}},Cl=j=>{var U;console.log("✏️ Editing meditation from:",B.formatLocalDateTime(j.date)),i({date:B.formatLocalDate(j.date),durationMinutes:((U=j.durationMinutes)==null?void 0:U.toString())||"",type:j.type||"mindfulness",soundscape:j.soundscape||"silence",moodBefore:j.moodBefore||"",moodAfter:j.moodAfter||"",notes:j.notes||""}),a(!0),d(j.id)},Br=async j=>{if(!(t!=null&&t.uid))return;const U=n.find(se=>se.id===j),H=`Are you sure you want to delete the meditation session from ${(U==null?void 0:U.localDateTime)||"unknown time"}?`;if(window.confirm(H))try{await ps.deleteMeditation(t.uid,j),s(se=>se.filter(ce=>ce.id!==j)),console.log("🗑️ Meditation deleted successfully")}catch(se){console.error("Error deleting meditation:",se),A("Failed to delete meditation")}},Bi=j=>{const U=Math.floor(j/60),H=j%60;return`${U}:${H.toString().padStart(2,"0")}`};return f?u.jsxs("div",{className:"meditation-loading",children:[u.jsx("p",{children:"Loading meditations..."}),u.jsxs("small",{children:["Timezone: ",B.getUserTimezone()]})]}):u.jsxs("div",{className:"meditation-page",children:[w&&u.jsxs("div",{className:"session-interface",children:[u.jsxs("div",{className:"session-header",children:[u.jsx("h2",{children:"🧘‍♀️ Meditation Session"}),u.jsxs("div",{className:"session-info",children:[u.jsxs("div",{className:"session-soundscape",children:[Ys[X].icon," ",Ys[X].name]}),u.jsxs("div",{className:"session-time-info",children:["Started: ",je?B.formatLocalTime(je):"Now",u.jsx("br",{}),u.jsx("small",{children:B.getUserTimezone()})]}),u.jsx("div",{className:"wake-lock-status",children:Il?u.jsx("span",{className:"wake-lock-active",title:"Screen will stay awake during meditation",children:"🔒 Screen Awake"}):rs?u.jsx("span",{className:"wake-lock-inactive",title:"Screen may sleep during meditation",children:"⚠️ Screen May Sleep"}):u.jsx("span",{className:"wake-lock-unsupported",title:"Wake lock not supported on this device",children:"📱 Using Fallback"})})]})]}),u.jsxs("div",{className:"session-timer",children:[u.jsxs("div",{className:"time-display",children:[u.jsx("span",{className:"current-time",children:Bi(R)}),u.jsxs("span",{className:"target-time",children:["/ ",Bi(le*60)]})]}),u.jsx("div",{className:"progress-ring",children:u.jsx("div",{className:"meditation-progress-fill",style:{background:`conic-gradient(#4CAF50 ${R/(le*60)*360}deg, #eee 0deg)`}})})]}),u.jsxs("div",{className:"session-status",children:[G&&u.jsxs("div",{className:"deep-state-indicator",children:["✨ Deep State Achieved at ",B.formatLocalTime(new Date)," ✨"]}),u.jsx("div",{className:"neurological-info",children:u.jsx("p",{children:Ys[X].neurological})})]}),u.jsxs("div",{className:"session-controls",children:[u.jsxs("button",{onClick:wa,className:"pause-btn",children:[$?"▶️":"⏸️"," ",$?"Resume":"Pause"]}),u.jsx("button",{onClick:Pl,className:"stop-btn",children:"⏹️ End Session"})]})]}),!w&&u.jsxs("div",{className:"quick-start",children:[u.jsx("h1",{className:"meditation-title",children:"🧘‍♀️ Meditation Studio"}),u.jsxs("p",{className:"subtitle",children:["Neurologically optimized for deep meditation states",u.jsx("br",{})]}),u.jsxs("div",{className:"soundscape-section",children:[u.jsx("h3",{children:"🎵 Step 1: Choose Your Soundscape"}),u.jsx("div",{className:"soundscape-instructions",children:u.jsx("p",{children:"Select a soundscape below (or choose silence for quiet meditation). Click again to deselect."})}),u.jsx("div",{className:"soundscape-grid",children:Object.entries(Ys).map(([j,U])=>u.jsxs("div",{className:`soundscape-option ${U.premium?"premium":""} ${X===j?"selected":""} ${U.premium&&!e?"locked":""}`,children:[u.jsxs("div",{className:"soundscape-header",children:[u.jsx("span",{className:"soundscape-icon",children:U.icon}),U.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsxs("div",{className:"soundscape-content",onClick:H=>{H.stopPropagation(),H.preventDefault(),console.log("🎵 Soundscape clicked:",j,"current selection:",X),!U.premium||e?X===j?(console.log("🔇 Deselecting soundscape to silence"),pe("silence")):(console.log("🔊 Selecting soundscape:",j),pe(j)):alert("This soundscape requires Clarity Premium. Upgrade to access premium features!")},children:[u.jsx("h4",{children:U.name}),u.jsx("p",{className:"soundscape-description",children:U.description}),u.jsx("small",{className:"neurological-note",children:U.neurological})]}),U.premium&&!e&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"lock-icon",children:"🔒"})})]},j))})]}),u.jsxs("div",{className:"quick-start-grid",children:[u.jsx("h3",{children:"⏰ Step 2: Choose Your Session"}),Object.entries(yu).map(([j,U])=>u.jsxs("div",{className:`meditation-type ${U.premium?"premium":""}`,children:[u.jsxs("div",{className:"type-header",children:[u.jsx("span",{className:"type-icon",children:U.icon}),u.jsx("h3",{children:U.name}),U.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsx("p",{className:"type-description",children:U.description}),u.jsx("div",{className:"duration-options",children:U.duration.map(H=>u.jsxs("button",{onClick:()=>{ge||Ce(prompt("How are you feeling right now? (😊😔😴😤😌🤔🎉😰)")||"😐"),Al(H,j,X)},className:"duration-btn",disabled:U.premium&&!e,children:[H,"min"]},H))})]},j))]})]}),!w&&u.jsxs("div",{className:"meditation-card",children:[u.jsx("h2",{className:"form-title",children:o?"Edit Meditation Session":"Manually Log Session"}),S&&u.jsx("div",{className:"error-message",children:S}),u.jsxs("form",{onSubmit:Nl,className:"meditation-form",children:[u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date (",B.getUserTimezone(),")",u.jsx("input",{type:"date",name:"date",value:r.date,onChange:kn,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:r.durationMinutes,onChange:kn,className:"form-input",min:"1",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Meditation Type",u.jsx("select",{name:"type",value:r.type,onChange:kn,className:"form-input",children:Object.entries(yu).map(([j,U])=>u.jsx("option",{value:j,children:U.name},j))})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Soundscape Used",u.jsx("select",{name:"soundscape",value:r.soundscape,onChange:kn,className:"form-input",children:Object.entries(Ys).map(([j,U])=>u.jsx("option",{value:j,children:U.name},j))})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood Before",u.jsxs("select",{name:"moodBefore",value:r.moodBefore,onChange:kn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"😊",children:"😊 Happy"}),u.jsx("option",{value:"😔",children:"😔 Sad"}),u.jsx("option",{value:"😴",children:"😴 Tired"}),u.jsx("option",{value:"😤",children:"😤 Frustrated"}),u.jsx("option",{value:"😌",children:"😌 Peaceful"}),u.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),u.jsx("option",{value:"🎉",children:"🎉 Excited"}),u.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood After",u.jsxs("select",{name:"moodAfter",value:r.moodAfter,onChange:kn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"😊",children:"😊 Happy"}),u.jsx("option",{value:"😔",children:"😔 Sad"}),u.jsx("option",{value:"😴",children:"😴 Tired"}),u.jsx("option",{value:"😤",children:"😤 Frustrated"}),u.jsx("option",{value:"😌",children:"😌 Peaceful"}),u.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),u.jsx("option",{value:"🎉",children:"🎉 Excited"}),u.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:r.notes,onChange:kn,className:"form-input form-textarea",placeholder:"How did the session feel? Any insights?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:g,children:g?o?"Updating...":"Logging...":o?"Update Session":"Log Session"}),o&&u.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{a(!1),d(null),i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})},disabled:g,children:"Cancel"})]})]})]}),C&&u.jsxs("div",{className:"sentiment-feedback",children:[C.score>0&&"Your note sounds positive! 😊",C.score<0&&"Your note sounds a bit negative. 😟",C.score===0&&"Your note sounds neutral. 😐",v.length>0&&u.jsxs("div",{className:"keywords",children:[u.jsx("strong",{children:"Keywords:"})," ",v.join(", ")]})]}),!w&&u.jsxs("div",{className:"meditation-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Sessions (",zr.length,")",u.jsx("br",{}),u.jsxs("small",{children:[B.formatLocalDate(new Date)," - ",B.getUserTimezone()]})]}),zr.length===0?u.jsxs("p",{className:"no-sessions",children:["No meditation sessions today. Start your mindfulness journey!",u.jsx("br",{}),u.jsxs("small",{children:["Local time: ",B.formatLocalDateTime(new Date)]})]}):u.jsx("ul",{className:"log-list",children:zr.map(j=>{var U,H,se,ce;return u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"meditation-info",children:[u.jsxs("div",{className:"meditation-header",children:[u.jsxs("span",{className:"meditation-type",children:[(U=yu[j.type])==null?void 0:U.icon," ",((H=yu[j.type])==null?void 0:H.name)||j.type]}),u.jsxs("span",{className:"meditation-time",children:[j.localDateTime,u.jsxs("small",{children:[" (",j.relativeTime,")"]})]})]}),u.jsxs("div",{className:"meditation-details",children:[u.jsxs("span",{className:"meditation-duration",children:[j.durationMinutes," min"]}),u.jsxs("span",{className:"meditation-soundscape",children:[(se=Ys[j.soundscape])==null?void 0:se.icon," ",(ce=Ys[j.soundscape])==null?void 0:ce.name]}),j.deepStateAchieved&&u.jsx("span",{className:"deep-state-badge",children:"✨ Deep State"}),j.moodBefore&&j.moodAfter&&u.jsxs("span",{className:"mood-change",children:[j.moodBefore," → ",j.moodAfter]})]}),j.notes&&u.jsx("div",{className:"meditation-notes",children:j.notes})]}),u.jsxs("div",{className:"meditation-actions",children:[u.jsx("button",{onClick:()=>Cl(j),className:"edit-button",disabled:g,children:"Edit"}),u.jsx("button",{onClick:()=>Br(j.id),className:"delete-button",disabled:g,children:"Delete"})]})]},j.id)})})]}),!w&&u.jsxs("div",{className:"recommended-videos",children:[u.jsx("h2",{className:"recommended-title",children:"🎥 Guided Meditation Videos"}),u.jsxs("p",{className:"timezone-note",children:["Perfect for any time of day in ",B.getUserTimezone()]}),u.jsxs("div",{className:"video-tiles",children:[u.jsxs("a",{href:"https://www.youtube.com/watch?v=VpHz8Mb13_Y",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"🌸"}),u.jsx("p",{className:"video-title",children:"Relaxation and Positivity"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=CqnWMPuyT0g",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"💖"}),u.jsx("p",{className:"video-title",children:"Self Love"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=056qll-07ak",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"🧠"}),u.jsx("p",{className:"video-title",children:"Stop Thinking"})]})]})]}),u.jsx(Px,{feature:"exclusive meditation experiences",children:u.jsxs("div",{className:"premium-meditation-features",children:[u.jsx("h3",{children:"🧘‍♀️ Premium Meditation Experience"}),u.jsx("p",{children:"Unlock advanced features designed by neuroscientists:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"🎵 Premium binaural soundscapes"}),u.jsx("li",{children:"📊 Advanced session analytics"}),u.jsx("li",{children:"🧠 Personalized meditation recommendations"}),u.jsx("li",{children:"⏰ Smart session reminders based on your timezone"}),u.jsx("li",{children:"📈 Mood tracking and insights"})]})]})})]})}function T3e(){const{user:t}=xn(),[e,n]=P.useState([]),[s,r]=P.useState({date:"",amount:"",type:"water",notes:""}),[i,o]=P.useState(!1),[a,c]=P.useState(null),[d,f]=P.useState(!0),[m,g]=P.useState(!1),[T,S]=P.useState(""),[A,C]=P.useState(0),[x,v]=P.useState(64),[b,D]=P.useState(null),[L,M]=P.useState([]);new Date().toISOString().split("T")[0],P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const $=await Wt.fetchWaterIntakeByUser(t.uid);n($.waterIntakes||[]);const oe=await Wt.getTodayWaterIntake(t.uid);C(oe.totalOz||0),v(64)}catch($){console.error("Error fetching water data:",$),S("Failed to load water intake data")}finally{f(!1)}})()},[t]);const E=J=>{const{name:$,value:oe}=J.target;r(G=>({...G,[$]:oe}))},y=async J=>{if(J.preventDefault(),console.log("💧 Water submit started"),console.log("📊 Form data:",s),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),S("Please log in to save water intake");return}if(!s.amount||!s.date){S("Please fill in all required fields");return}try{g(!0),S("");let $;if(s.date){const X=s.date.split("-"),pe=parseInt(X[0]),ge=parseInt(X[1]),Ce=parseInt(X[2]),je=new Date;console.log("🔍 Water date parsing debug:"),console.log("  Form input:",s.date),console.log("  Split parts:",X),console.log("  Parsed year:",pe),console.log("  Parsed month (human readable):",ge),console.log("  Parsed day:",Ce),console.log("  Month for Date constructor (0-indexed):",ge-1),$=new Date(pe,ge-1,Ce,je.getHours(),je.getMinutes(),je.getSeconds()),console.log("📅 Created water date:",$),console.log("📅 Verify - Year:",$.getFullYear()),console.log("📅 Verify - Month (0-indexed):",$.getMonth()),console.log("📅 Verify - Month (human):",$.getMonth()+1),console.log("📅 Verify - Day:",$.getDate()),console.log("📅 Final formatted:",$.toLocaleDateString())}else $=new Date;const oe={date:$,amount:parseFloat(s.amount),type:s.type,notes:s.notes};if(console.log("💧 Final water data:",oe),console.log("📅 Will be saved as:",oe.date.toLocaleDateString()),i)await Wt.updateWaterIntake(t.uid,a,oe),n(X=>X.map(pe=>pe.id===a?{...pe,...oe}:pe)),o(!1),c(null);else{const X=await Wt.logWaterIntake(t.uid,oe);n(pe=>[X.waterIntake,...pe])}const G=await Wt.getTodayWaterIntake(t.uid);C(G.totalOz||0),r({date:"",amount:"",type:"water",notes:""}),console.log("✅ Water intake logged successfully!");const ie=Hd(s.notes);if(D(ie),M(Py(s.notes)),!i){const X={...oe,sentiment:ie?ie.score:null},pe=await Wt.logWaterIntake(t.uid,X);n(ge=>[pe.waterIntake,...ge])}}catch($){console.error("💥 Water logging error:",$),S(i?"Failed to update water intake":"Failed to log water intake")}finally{g(!1)}},I=J=>{var oe;o(!0),c(J.id);const $=J.date instanceof Date?J.date.toISOString().split("T")[0]:new Date(J.date).toISOString().split("T")[0];r({date:$,amount:((oe=J.amount)==null?void 0:oe.toString())||"",type:J.type||"water",notes:J.notes||""})},w=async J=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this water intake?"))try{await Wt.deleteWaterIntake(t.uid,J),n(oe=>oe.filter(G=>G.id!==J));const $=await Wt.getTodayWaterIntake(t.uid);C($.totalOz||0)}catch($){console.error("Error deleting water intake:",$),S("Failed to delete water intake")}},N=()=>{o(!1),c(null),r({date:"",amount:"",type:"water",notes:""})},R=async J=>{if(t!=null&&t.uid)try{g(!0);const $=new Date,oe=new Date($.getFullYear(),$.getMonth(),$.getDate(),$.getHours(),$.getMinutes(),$.getSeconds());console.log("💧 Quick add date:",oe),console.log("📅 Quick add formatted:",oe.toLocaleDateString()),await Wt.logWaterIntake(t.uid,{date:oe,amount:J,type:"water",notes:"",sentiment:null});const G=await Wt.fetchWaterIntakeByUser(t.uid);n(G.waterIntakes||[]);const ie=await Wt.getTodayWaterIntake(t.uid);C(ie.totalOz||0),console.log("✅ Quick add water successful!")}catch($){console.error("💥 Error quick adding water:",$),S("Failed to log water intake")}finally{g(!1)}},k=e.filter(J=>{const $=J.date instanceof Date?J.date:new Date(J.date),oe=B.isToday($);return console.log("🔍 Comparing dates:",{waterDate:$.toLocaleDateString(),today:new Date().toLocaleDateString(),isToday:oe,waterDateObj:$,waterDateType:typeof J.date}),oe}),le=Math.min(A/x*100,100);return d?u.jsx("div",{className:"water-loading",children:"Loading water data..."}):u.jsxs("div",{className:"water-page",children:[u.jsxs("div",{className:"water-progress",children:[u.jsx("h2",{children:"Daily Hydration Progress"}),u.jsx("div",{className:"progress-info",children:u.jsx("div",{className:"water-progress-bar",children:u.jsx("div",{className:"water-progress-fill",style:{width:`${le}%`}})})}),A>=x&&u.jsx("div",{className:"goal-achieved",children:"🎉 Daily goal achieved! Great job! 🎉"})]}),u.jsxs("div",{className:"quick-add-section",children:[u.jsx("h3",{children:"Quick Add"}),u.jsxs("div",{className:"quick-add-buttons",children:[u.jsxs("button",{onClick:()=>R(8),className:"quick-add-btn",disabled:m,children:["8 oz",u.jsx("br",{}),u.jsx("small",{children:"Glass"})]}),u.jsxs("button",{onClick:()=>R(16),className:"quick-add-btn",disabled:m,children:["16 oz",u.jsx("br",{}),u.jsx("small",{children:"Bottle"})]}),u.jsxs("button",{onClick:()=>R(20),className:"quick-add-btn",disabled:m,children:["20 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Bottle"})]}),u.jsxs("button",{onClick:()=>R(32),className:"quick-add-btn",disabled:m,children:["32 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Cup"})]})]})]}),u.jsxs("div",{className:"water-card",children:[u.jsx("h1",{className:"water-title",children:i?"Edit Water Intake":"Log Water Intake"}),T&&u.jsx("div",{className:"error-message",children:T}),u.jsxs("form",{onSubmit:y,className:"water-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:s.date,onChange:E,className:"form-input",required:!0})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Amount (oz)",u.jsx("input",{type:"number",name:"amount",value:s.amount,onChange:E,className:"form-input",min:"0.1",step:"0.1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Drink Type",u.jsxs("select",{name:"type",value:s.type,onChange:E,className:"form-input",children:[u.jsx("option",{value:"water",children:"Water"}),u.jsx("option",{value:"tea",children:"Tea"}),u.jsx("option",{value:"coffee",children:"Coffee"}),u.jsx("option",{value:"juice",children:"Juice"}),u.jsx("option",{value:"sports_drink",children:"Sports Drink"}),u.jsx("option",{value:"other",children:"Other"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("input",{type:"text",name:"notes",value:s.notes,onChange:E,className:"form-input",placeholder:"e.g., with lemon, iced, etc."})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Intake":"Log Water"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:N,disabled:m,children:"Cancel"})]})]})]}),b&&u.jsxs("div",{className:"sentiment-feedback",children:[b.score>0&&"Your note sounds positive! 😊",b.score<0&&"Your note sounds a bit negative. 😟",b.score===0&&"Your note sounds neutral. 😐",L.length>0&&u.jsxs("div",{className:"keywords",children:[u.jsx("strong",{children:"Keywords:"})," ",L.join(", ")]})]}),u.jsxs("div",{className:"water-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Water Intake (",k.length," entries)"]}),k.length===0?u.jsx("p",{className:"no-intake",children:"No water logged for today. Stay hydrated! 💧"}):u.jsx("ul",{className:"log-list",children:k.map(J=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"water-info",children:[u.jsxs("span",{className:"water-amount",children:[J.amount," oz"]}),u.jsx("span",{className:"water-type",children:J.type}),J.notes&&u.jsx("span",{className:"water-notes",children:J.notes})]}),u.jsxs("div",{className:"water-actions",children:[u.jsx("button",{onClick:()=>I(J),className:"edit-button",disabled:m,children:"Edit"}),u.jsx("button",{onClick:()=>w(J.id),className:"delete-button",disabled:m,children:"Delete"})]})]},J.id))})]})]})}function I3e(){const{user:t,isPremium:e}=xn(),[n,s]=P.useState({workout:{current:0,goal:210},water:{current:0,goal:448},meditation:{current:0,goal:105}}),[r,i]=P.useState([]),[o,a]=P.useState(0),[c,d]=P.useState(!0),[f,m]=P.useState(30),[g,T]=P.useState(64),[S,A]=P.useState(15),[C,x]=P.useState(0),[v,b]=P.useState(!1),[D,L]=P.useState(!1),[M,E]=P.useState(!1),[y,I]=P.useState(null),w=()=>{const fe=new Date().getDay();return fe===0?0:7-fe};P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{d(!0);const Ve=(await Ee.getUserProfile(t.uid)).user;m(Ve.exerciseGoalMinutes||30),T(Ve.waterGoalOz||64),A(Ve.meditationGoalMinutes||15);const[et,pt,bn]=await Promise.all([ms.getWorkoutSummary(t.uid,7),Wt.getWaterSummary(t.uid,7),ps.getMeditationSummary(t.uid,7)]);s({workout:{current:et.totalMinutes||0,goal:(Ve.exerciseGoalMinutes||30)*7},water:{current:pt.totalOz||0,goal:(Ve.waterGoalOz||64)*7},meditation:{current:bn.totalMinutes||0,goal:(Ve.meditationGoalMinutes||15)*7}}),setTimeout(()=>ge(),100)}catch(fe){console.error("Error fetching weekly data:",fe)}finally{d(!1)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const fe=await Ee.getPoints(t.uid);x(fe)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const fe=await Ee.isChallengeCompleted(t.uid,"weekly_meditation_3","weekly");b(fe)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const fe=await Ee.isChallengeCompleted(t.uid,"diamond_week","weekly"),Ve=await Ee.isChallengeCompleted(t.uid,"perfect_balance","weekly");L(fe),E(Ve)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const fe=await Ee.getUserProfile(t.uid);I(fe.user.premiumSoundscapeUntil?new Date(fe.user.premiumSoundscapeUntil):null)}})()},[t]);const N=new Date,R=C>=150&&(!y||y<N),k=y&&y>N,le=async()=>{if(!(t!=null&&t.uid)||!R)return;await Ee.deductPoints(t.uid,150);const Z=new Date;Z.setDate(Z.getDate()+7),await Ee.updateUserProfile(t.uid,{premiumSoundscapeUntil:Z}),I(Z);const fe=await Ee.getPoints(t.uid);x(fe),alert("You unlocked Premium Soundscape for 1 week!")},J=n.meditation.current/(S||15),$=J>=3,oe=n.workout.current/n.workout.goal>=1.25&&n.water.current/n.water.goal>=1.25&&n.meditation.current/n.meditation.goal>=1.25,G=n.workout.current/n.workout.goal>=1&&n.water.current/n.water.goal>=1&&n.meditation.current/n.meditation.goal>=1,ie=async()=>{if(!(t!=null&&t.uid)||v||!$)return;await Ee.addPoints(t.uid,50),await Ee.completeChallenge(t.uid,"weekly_meditation_3","weekly"),b(!0);const Z=await Ee.getPoints(t.uid);x(Z),alert("You claimed 50 points for the Weekly Meditation Challenge!")},X=async()=>{if(!(t!=null&&t.uid)||D||!oe)return;await Ee.addPoints(t.uid,200),await Ee.completeChallenge(t.uid,"diamond_week","weekly"),L(!0);const Z=await Ee.getPoints(t.uid);x(Z),alert("You claimed 200 points for Diamond Week Challenge!")},pe=async()=>{if(!(t!=null&&t.uid)||M||!G)return;await Ee.addPoints(t.uid,150),await Ee.completeChallenge(t.uid,"perfect_balance","weekly"),E(!0);const Z=await Ee.getPoints(t.uid);x(Z),alert("You claimed 150 points for Perfect Balance Challenge!")},ge=()=>{const Z=[];Object.entries(n).forEach(([fe,Ve])=>{const et=Ve.current/Ve.goal*100;et>=125?Z.push({type:fe,level:"diamond",percentage:et}):et>=100?Z.push({type:fe,level:"gold",percentage:et}):et>=75?Z.push({type:fe,level:"silver",percentage:et}):et>=50&&Z.push({type:fe,level:"bronze",percentage:et})}),i(Z)},Ce=Z=>{switch(Z){case"diamond":return"💎";case"gold":return"🥇";case"silver":return"🥈";case"bronze":return"🥉";default:return"⭐"}},je=Z=>Z>=100?"var(--sage-500)":Z>=75?"var(--mint)":Z>=50?"#FFD700":"var(--sage-300)",Jt=Z=>Z>=100,Ze=async()=>{if(t!=null&&t.uid)try{d(!0);const Z=f*7,fe=g*7,Ve=S*7,et=await Ee.updateUserProfile(t.uid,{exerciseGoalMinutes:f,meditationGoalMinutes:S,waterGoalOz:g});s(pt=>({...pt,workout:{...pt.workout,goal:Z},water:{...pt.water,goal:fe},meditation:{...pt.meditation,goal:Ve}})),setTimeout(()=>ge(),100),console.log("✅ Goals updated successfully")}catch(Z){console.error("❌ Error updating goals:",Z)}finally{d(!1)}};if(c)return u.jsx("div",{className:"goals-loading",children:"Loading weekly goals..."});const Mt=w();return u.jsxs("div",{className:"goals-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:"⭐"})," ",C," Points"]}),u.jsxs("div",{className:"weekly-header",children:[u.jsx("h1",{className:"goals-title",children:"Weekly Goals"}),u.jsx("p",{className:"goals-subtitle",children:"Track your progress and earn rewards"}),u.jsxs("div",{className:"week-info",children:[u.jsx("span",{className:"week-label",children:"Current Week"}),u.jsx("span",{className:"days-remaining",children:Mt===0?"Last day!":`${Mt} days remaining`})]})]}),u.jsx("div",{className:"weekly-progress",children:Object.entries(n).map(([Z,fe])=>{const Ve=Math.min(fe.current/fe.goal*100,100),et=Jt(Ve),pt=2*Math.PI*45,bn=pt,rs=pt-Ve/100*pt;return u.jsxs("div",{className:`weekly-ring ${et?"completed":""}`,children:[u.jsxs("div",{className:"ring-container",children:[u.jsxs("svg",{className:"progress-ring",width:"120",height:"120",children:[u.jsx("circle",{className:"ring-background",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:"var(--sage-100)",strokeWidth:"8"}),u.jsx("circle",{className:"ring-progress",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:je(Ve),strokeWidth:"8",strokeLinecap:"round",strokeDasharray:bn,strokeDashoffset:rs,transform:"rotate(-90 60 60)"})]}),u.jsxs("div",{className:"ring-content",children:[u.jsx("span",{className:"ring-value",children:fe.current}),u.jsxs("span",{className:"ring-goal",children:["/ ",fe.goal]}),u.jsx("span",{className:"ring-label",children:Z})]})]}),u.jsxs("div",{className:"ring-percentage",children:[Math.round(Ve),"%"]})]},Z)})}),u.jsxs("div",{className:"achievement-gallery",children:[u.jsx("h2",{className:"section-title",children:"This Week's Achievements"}),r.length===0?u.jsxs("div",{className:"no-achievements",children:[u.jsx("span",{className:"no-achievement-icon",children:"🎯"}),u.jsx("p",{children:"Keep going! Your first achievement is waiting."})]}):u.jsx("div",{className:"achievements-grid",children:r.map((Z,fe)=>u.jsxs("div",{className:`achievement-card ${Z.level}`,children:[u.jsx("div",{className:"achievement-icon",children:Ce(Z.level)}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:Z.level.toUpperCase()}),u.jsx("p",{children:Z.type.toUpperCase()}),u.jsxs("span",{className:"achievement-percentage",children:[Math.round(Z.percentage),"%"]})]}),!e&&Z.level==="diamond"&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"premium-badge",children:"PRO"})})]},fe))})]}),u.jsxs("div",{className:"streak-section",children:[u.jsx("h2",{className:"section-title",children:"Weekly Streak"}),u.jsxs("div",{className:"streak-card",children:[u.jsx("div",{className:"streak-icon",children:"🔥"}),u.jsxs("div",{className:"streak-info",children:[u.jsx("span",{className:"streak-number",children:o}),u.jsx("span",{className:"streak-label",children:"Week Streak"})]}),u.jsxs("div",{className:"streak-next",children:[u.jsx("span",{children:"Next reward at 4 weeks"}),!e&&u.jsx("span",{className:"premium-hint",children:"PRO"})]})]})]}),u.jsxs("div",{className:"reward-marketplace",children:[u.jsx("h2",{className:"section-title",children:"Reward Marketplace"}),e?u.jsxs("div",{className:"rewards-grid",children:[u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:"🎵"}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Premium Soundscape"}),u.jsx("p",{children:"Unlock for 1 week"}),u.jsx("span",{className:"reward-cost",children:"150 points"}),u.jsx("button",{className:"claim-btn",onClick:le,disabled:!R,children:k?"Active":"Redeem"}),k&&u.jsxs("div",{className:"reward-status",children:["Active until ",y==null?void 0:y.toLocaleDateString()]})]})]}),u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:"📱"}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Custom Badge"}),u.jsx("p",{children:"Design your own"}),u.jsx("span",{className:"reward-cost",children:"100 points"})]})]})]}):u.jsxs("div",{className:"premium-cta-card",children:[u.jsxs("div",{className:"cta-header",children:[u.jsx("h3",{children:"Unlock Premium Rewards"}),u.jsx("span",{className:"cta-price",children:"$4.99/month"})]}),u.jsxs("div",{className:"premium-features",children:[u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"💎"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"🎯"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"📊"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"🏆"}),u.jsx("span",{children:"Challenge competitions"})]})]}),u.jsx("button",{className:"upgrade-button",onClick:sl,children:"Upgrade with Stripe"})]})]}),u.jsxs("div",{className:"weekly-challenges",children:[u.jsx("h2",{className:"section-title",children:"Weekly Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Mindful Monday"}),u.jsx("span",{className:"challenge-reward",children:"+50 points"}),u.jsx("button",{className:"claim-btn",onClick:ie,disabled:!$||v,children:v?"Claimed":"Claim"})]}),u.jsx("p",{className:"challenge-description",children:"Complete 3 meditation sessions this week"}),u.jsxs("div",{className:"challenge-progress",children:[u.jsx("div",{className:"challenge-bar",children:u.jsx("div",{className:"challenge-fill",style:{width:`${Math.min(J/3*100,100)}%`}})}),u.jsxs("span",{className:"challenge-status",children:[Math.floor(J),"/3 completed"]})]}),!e&&u.jsx("div",{className:"challenge-premium",children:u.jsx("span",{children:"Join Premium for exclusive challenges"})})]})]}),u.jsxs("div",{className:"custom-goals-section",children:[u.jsx("h2",{className:"section-title",children:"Goal Customization"}),u.jsxs("div",{className:"custom-goals-form",children:[u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Workout Goal: ",f," minutes"]}),u.jsx("input",{type:"range",min:"15",max:"120",value:f,onChange:Z=>m(parseInt(Z.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",f*7," minutes"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Water Goal: ",g," oz"]}),u.jsx("input",{type:"range",min:"32",max:"128",value:g,onChange:Z=>T(parseInt(Z.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",g*7," oz"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Meditation Goal: ",S," minutes"]}),u.jsx("input",{type:"range",min:"5",max:"60",value:S,onChange:Z=>A(parseInt(Z.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",S*7," minutes"]})]}),u.jsx("button",{className:"save-goals-btn",onClick:Ze,disabled:c,children:c?"Saving...":"Save Custom Goals"})]})]}),u.jsxs("div",{className:"premium-challenges",children:[u.jsx("h2",{className:"section-title",children:"Exclusive Challenges"}),u.jsx(Px,{feature:"premium challenges",className:"feature-tease",children:u.jsxs("div",{className:"challenge-preview",children:[u.jsxs("div",{className:"challenge-card premium",children:[u.jsx("div",{className:"challenge-icon",children:"💎"}),u.jsxs("div",{className:"challenge-content",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Diamond Week Challenge"}),u.jsx("span",{className:"challenge-reward",children:"+200 points"}),u.jsx("button",{className:"claim-btn",onClick:X,disabled:!oe||D,children:D?"Claimed":"Claim"})]}),u.jsx("p",{children:"Complete 125% of all goals for 7 consecutive days"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:"🏆 1,247 participants this week"})})]})]}),u.jsxs("div",{className:"challenge-card premium",children:[u.jsx("div",{className:"challenge-icon",children:"🎯"}),u.jsxs("div",{className:"challenge-content",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Perfect Balance"}),u.jsx("span",{className:"challenge-reward",children:"+150 points"}),u.jsx("button",{className:"claim-btn",onClick:pe,disabled:!G||M,children:M?"Claimed":"Claim"})]}),u.jsx("p",{children:"Hit exactly 100% on all three goals in one day"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:"🎉 892 members completed"})})]})]})]})})]})]})}function x3e(){const{user:t,loading:e,isPremium:n,userSubscription:s,trialDaysRemaining:r,upgradeToPremium:i,cancelSubscription:o}=xn(),[a,c]=P.useState(null),[d,f]=P.useState({username:"",email:"",firstName:"",lastName:"",exerciseGoalMinutes:"",waterGoalOz:"",meditationGoalMinutes:""}),[m,g]=P.useState(!0),[T,S]=P.useState(!1),[A,C]=P.useState(""),[x,v]=P.useState("");P.useEffect(()=>{const M=async()=>{if(t!=null&&t.uid)try{g(!0);const E=await Ee.getUserProfile(t.uid);c(E.user)}catch(E){console.error("Error fetching profile:",E),v("Failed to load profile data")}finally{g(!1)}};t!=null&&t.uid&&M()},[t]),P.useEffect(()=>{a&&f({username:a.username||"",email:a.email||"",firstName:a.firstName||"",lastName:a.lastName||"",exerciseGoalMinutes:a.exerciseGoalMinutes||"",waterGoalOz:a.waterGoalOz||"",meditationGoalMinutes:a.meditationGoalMinutes||""})},[a]);const b=M=>{const{name:E,value:y}=M.target;f(I=>({...I,[E]:y}))},D=async M=>{if(M.preventDefault(),!!(t!=null&&t.uid)){S(!0),v(""),C("");try{console.log("Submitting profile update:",d);const E={...d,exerciseGoalMinutes:parseInt(d.exerciseGoalMinutes)||30,waterGoalOz:parseInt(d.waterGoalOz)||64,meditationGoalMinutes:parseInt(d.meditationGoalMinutes)||10};await Ee.updateUserProfile(t.uid,E),c({...a,...E}),C("Profile updated successfully!"),setTimeout(()=>C(""),3e3)}catch(E){console.error("Error updating profile:",E),v("Failed to update profile. Please try again.")}finally{S(!1)}}},L=()=>{a&&f({username:a.username||"",email:a.email||"",firstName:a.firstName||"",lastName:a.lastName||"",exerciseGoalMinutes:a.exerciseGoalMinutes||"",waterGoalOz:a.waterGoalOz||"",meditationGoalMinutes:a.meditationGoalMinutes||""}),v(""),C("")};return e||m?u.jsx("div",{className:"profile-loading",children:"Loading profile..."}):t?u.jsx("div",{className:"profile-page",children:u.jsxs("div",{className:"profile-card",children:[u.jsxs("div",{className:"profile-header",children:[u.jsx("h1",{className:"profile-title",children:"Personal Information"}),u.jsx("p",{className:"profile-subtitle",children:"Update your profile and wellness goals"})]}),A&&u.jsx("div",{className:"success-message",children:A}),x&&u.jsx("div",{className:"error-message",children:x}),a&&u.jsxs("form",{onSubmit:D,className:"profile-form",children:[u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Account Information"}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Username",u.jsx("input",{type:"text",name:"username",value:d.username,onChange:b,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Email",u.jsx("input",{type:"email",name:"email",value:d.email,onChange:b,className:"form-input",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["First Name",u.jsx("input",{type:"text",name:"firstName",value:d.firstName,onChange:b,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Last Name",u.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:b,className:"form-input",required:!0})]})})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Daily Wellness Goals"}),u.jsx("p",{className:"section-description",children:"Set your daily targets to track your progress effectively"}),u.jsxs("div",{className:"goals-grid",children:[u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"🏋️"}),"Exercise Goal (Minutes)",u.jsx("input",{type:"number",name:"exerciseGoalMinutes",value:d.exerciseGoalMinutes,onChange:b,className:"form-input",min:"1",max:"300",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 30-60 minutes"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"💧"}),"Water Goal (Oz)",u.jsx("input",{type:"number",name:"waterGoalOz",value:d.waterGoalOz,onChange:b,className:"form-input",min:"1",max:"200",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 64-100 oz"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"🧘"}),"Meditation Goal (Minutes)",u.jsx("input",{type:"number",name:"meditationGoalMinutes",value:d.meditationGoalMinutes,onChange:b,className:"form-input",min:"1",max:"120",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 5-20 minutes"})]})})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"reset-button",onClick:L,disabled:T,children:"Reset Changes"}),u.jsx("button",{type:"submit",className:"save-button",disabled:T,children:T?"Saving...":"Save Profile"})]})]}),u.jsxs("div",{className:"profile-stats",children:[u.jsx("h3",{className:"section-title",children:"Account Summary"}),u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Member Since"}),u.jsx("span",{className:"stat-value",children:a!=null&&a.createdAt?new Date(a.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Profile Updated"}),u.jsx("span",{className:"stat-value",children:a!=null&&a.updatedAt?new Date(a.updatedAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Goals Set"}),u.jsxs("span",{className:"stat-value",children:[[d.exerciseGoalMinutes,d.waterGoalOz,d.meditationGoalMinutes].filter(M=>M&&M>0).length," / 3"]})]})]})]}),u.jsxs("div",{className:"subscription-section",children:[u.jsx("h2",{children:"Your Plan"}),s==="trial"&&u.jsx("div",{className:"trial-status",children:u.jsxs("div",{className:"status-card trial",children:[u.jsx("h3",{children:"Premium Trial"}),u.jsx("p",{children:"You're experiencing the full premium experience!"}),u.jsxs("div",{className:"trial-countdown",children:[u.jsx("span",{className:"days-remaining",children:r}),u.jsx("span",{className:"days-label",children:"days remaining"})]}),u.jsxs("div",{className:"trial-benefits",children:[u.jsx("p",{children:"Currently enjoying:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"✓ Custom goal setting"}),u.jsx("li",{children:"✓ Diamond achievements"}),u.jsx("li",{children:"✓ Premium soundscapes"}),u.jsx("li",{children:"✓ Advanced analytics"})]})]}),u.jsx("button",{onClick:sl,className:"keep-premium-btn",children:"Keep Premium Access - $4.99/month"})]})}),s==="premium"&&u.jsx("div",{className:"premium-status",children:u.jsxs("div",{className:"status-card premium",children:[u.jsx("h3",{children:"💎 Premium Member"}),u.jsx("p",{children:"You have access to all premium features!"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Your Premium Benefits:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:o,className:"cancel-btn",children:"Cancel Subscription"})]})}),s==="free"&&u.jsx("div",{className:"free-status",children:u.jsxs("div",{className:"status-card free",children:[u.jsx("h3",{children:"🆓 Free Plan"}),u.jsx("p",{children:"Upgrade to unlock premium features and enhance your wellness journey"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Unlock with Premium:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🎯"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"💎"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🎵"}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"📊"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🏆"}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"⚡"}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:sl,className:"upgrade-btn",children:"Upgrade to Premium - $4.99/month"})]})})]})]})}):u.jsx("div",{className:"profile-error",children:"Please log in to view your profile."})}function b3e({children:t}){const{user:e,loading:n}=xn();return console.log("🔐 ProtectedRoute - loading:",n,"user:",!!e),n?u.jsx("div",{className:"loading",children:"Loading..."}):e?(console.log("✅ Authenticated, rendering protected content"),t):(console.log("🚫 Not authenticated, redirecting to welcome"),u.jsx(vd,{to:"/welcome",replace:!0}))}const k3e="modulepreload",S3e=function(t){return"/"+t},P2={},A3e=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=S3e(c),c in P2)return;P2[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":k3e,d||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((g,T)=>{m.addEventListener("load",g),m.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function P3e(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:r,onRegisteredSW:i,onRegisterError:o}=t;let a,c;const d=async(m=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(a=await A3e(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/sw.js",{scope:"/",type:"classic"})).catch(m=>{o==null||o(m)}),!a)return;a.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),a.addEventListener("installed",m=>{m.isUpdate||s==null||s()}),a.register({immediate:e}).then(m=>{i?i("/sw.js",m):r==null||r(m)}).catch(m=>{o==null||o(m)})}}return c=f(),d}const N3e=()=>{const[t,e]=P.useState(!1),[n,s]=P.useState(!1);P.useEffect(()=>{P3e({onNeedRefresh(){e(!0)},onOfflineReady(){s(!0)},onRegistered(o){console.log("SW registered: ",o)},onRegisterError(o){console.log("SW registration error",o)}})},[]);const r=()=>{s(!1),e(!1)},i=()=>{updateSW(),r()};return!t&&!n?null:u.jsxs("div",{className:"pwa-update-banner",children:[u.jsxs("div",{className:"pwa-update-content",children:[n&&u.jsxs("div",{className:"pwa-message",children:[u.jsx("span",{children:"App ready to work offline"}),u.jsx("button",{onClick:r,className:"pwa-close-btn",children:"Close"})]}),t&&u.jsxs("div",{className:"pwa-message",children:[u.jsx("span",{children:"New content available, click on reload button to update"}),u.jsx("button",{onClick:i,className:"pwa-update-btn",children:"Reload"}),u.jsx("button",{onClick:r,className:"pwa-close-btn",children:"Close"})]})]}),u.jsx("style",{jsx:!0,children:`
        .pwa-update-banner {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: #6c5ce7;
          color: white;
          padding: 1rem;
          z-index: 9999;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .pwa-update-content {
          max-width: 600px;
          margin: 0 auto;
        }
        
        .pwa-message {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 1rem;
        }
        
        .pwa-update-btn, .pwa-close-btn {
          background: rgba(255, 255, 255, 0.2);
          border: 1px solid rgba(255, 255, 255, 0.3);
          color: white;
          padding: 0.5rem 1rem;
          border-radius: 6px;
          cursor: pointer;
          font-size: 0.875rem;
          transition: background-color 0.2s;
        }
        
        .pwa-update-btn:hover, .pwa-close-btn:hover {
          background: rgba(255, 255, 255, 0.3);
        }
        
        @media (max-width: 768px) {
          .pwa-message {
            flex-direction: column;
            gap: 0.5rem;
          }
          
          .pwa-update-btn, .pwa-close-btn {
            width: 100%;
          }
        }
      `})]})},C3e=()=>{const[t,e]=P.useState(!1),[n,s]=P.useState(null),[r,i]=P.useState("unknown"),[o,a]=P.useState(!1);P.useEffect(()=>{const g=window.matchMedia("(display-mode: standalone)").matches,T=localStorage.getItem("clarity-pwa-dismissed")==="true";if(g||T)return;const S=/iPad|iPhone|iPod/.test(navigator.userAgent),A=/Android/.test(navigator.userAgent);i(S?"ios":A?"android":"desktop");const C=v=>{v.preventDefault(),o||(s(v),e(!0),a(!0))},x=()=>{e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",C),window.addEventListener("appinstalled",x),S&&!o){const v=setTimeout(()=>{o||(e(!0),a(!0))},3e3);return()=>clearTimeout(v)}return()=>{window.removeEventListener("beforeinstallprompt",C),window.removeEventListener("appinstalled",x)}},[o]);const c=async()=>{if(n){n.prompt();const{outcome:g}=await n.userChoice;g==="accepted"&&(e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true"))}},d=()=>{e(!1),localStorage.setItem("clarity-pwa-dismissed","true")};if(!t)return null;const m=(()=>{switch(r){case"ios":return{title:"Add Clarity to Home Screen",steps:["Tap the Share button (📤) at the bottom",'Scroll down and tap "Add to Home Screen"','Tap "Add" to install'],icon:"📱"};case"android":return{title:"Install Clarity App",steps:['Tap "Install" below to add to home screen','Or use the menu (⋮) → "Add to Home Screen"'],icon:"🤖"};case"desktop":return{title:"Install Clarity App",steps:["Click the install icon (📥) in your browser address bar",'Or use the menu → "Install Clarity"'],icon:"💻"};default:return{title:"Install Clarity",steps:["Look for an install option in your browser menu","Or add this page to your bookmarks"],icon:"📱"}}})();return u.jsxs("div",{className:"install-prompt-overlay",children:[u.jsxs("div",{className:"install-prompt",children:[u.jsx("button",{className:"install-close",onClick:d,children:"✕"}),u.jsxs("div",{className:"install-content",children:[u.jsx("div",{className:"install-icon",children:m.icon}),u.jsx("h3",{children:m.title}),u.jsx("div",{className:"install-steps",children:m.steps.map((g,T)=>u.jsxs("div",{className:"install-step",children:[u.jsx("span",{className:"step-number",children:T+1}),u.jsx("span",{className:"step-text",children:g})]},T))}),r==="android"&&n&&u.jsx("button",{className:"install-button",onClick:c,children:"Install Clarity"}),u.jsx("div",{className:"install-benefits",children:u.jsx("p",{children:"✨ Works offline • 🚀 Faster loading • 📱 App-like experience"})})]})]}),u.jsx("style",{jsx:!0,children:`
        .install-prompt-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          padding: 20px;
        }

        .install-prompt {
          background: white;
          border-radius: 16px;
          padding: 24px;
          max-width: 400px;
          width: 100%;
          position: relative;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .install-close {
          position: absolute;
          top: 12px;
          right: 12px;
          background: none;
          border: none;
          font-size: 20px;
          cursor: pointer;
          color: #666;
          padding: 4px;
        }

        .install-content {
          text-align: center;
        }

        .install-icon {
          font-size: 48px;
          margin-bottom: 16px;
        }

        .install-content h3 {
          color: #6b8069;
          margin-bottom: 20px;
          font-size: 20px;
        }

        .install-steps {
          text-align: left;
          margin-bottom: 20px;
        }

        .install-step {
          display: flex;
          align-items: center;
          margin-bottom: 12px;
          padding: 8px 0;
        }

        .step-number {
          background: #6b8069;
          color: white;
          width: 24px;
          height: 24px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 12px;
          font-weight: bold;
          margin-right: 12px;
          flex-shrink: 0;
        }

        .step-text {
          color: #333;
          font-size: 14px;
          line-height: 1.4;
        }

        .install-button {
          background: #6b8069;
          color: white;
          border: none;
          border-radius: 12px;
          padding: 12px 24px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          margin-bottom: 16px;
          transition: background-color 0.2s;
        }

        .install-button:hover {
          background: #556b54;
        }

        .install-benefits {
          background: #f6f7f6;
          border-radius: 8px;
          padding: 12px;
        }

        .install-benefits p {
          color: #6b8069;
          font-size: 12px;
          margin: 0;
        }

        @media (max-width: 480px) {
          .install-prompt {
            margin: 20px;
            padding: 20px;
          }
        }
      `})]})},R3e=()=>{const[t,e]=P.useState(!1),[n,s]=P.useState(null),[r,i]=P.useState(!1),[o,a]=P.useState(!1);P.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const d=localStorage.getItem("clarity-pwa-dismissed")==="true",f=localStorage.getItem("clarity-pwa-installed")==="true";if(d||f)return;const m=S=>{S.preventDefault(),o||(s(S),e(!0),a(!0))},g=()=>{i(!0),e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",m),window.addEventListener("appinstalled",g),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!r&&!o){const S=setTimeout(()=>{o||(e(!0),a(!0))},5e3);return()=>clearTimeout(S)}return()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",g)}},[r,o]);const c=async()=>{if(n){n.prompt();const{outcome:d}=await n.userChoice;d==="accepted"&&(i(!0),e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true"))}else alert('To install: Use your browser menu → "Add to Home Screen" or "Install App"')};return!t||r?null:u.jsxs("div",{className:"floating-install-button",onClick:c,children:[u.jsx("div",{className:"install-icon",children:"📱"}),u.jsx("span",{className:"install-text",children:"Install"}),u.jsx("style",{jsx:!0,children:`
        .floating-install-button {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background: #6b8069;
          color: white;
          border-radius: 50px;
          padding: 12px 20px;
          display: flex;
          align-items: center;
          gap: 8px;
          cursor: pointer;
          box-shadow: 0 4px 12px rgba(107, 128, 105, 0.3);
          z-index: 1000;
          transition: all 0.2s ease;
          font-weight: 600;
          font-size: 14px;
        }

        .floating-install-button:hover {
          background: #556b54;
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(107, 128, 105, 0.4);
        }

        .floating-install-button:active {
          transform: translateY(0);
        }

        .install-icon {
          font-size: 18px;
        }

        .install-text {
          white-space: nowrap;
        }

        @media (max-width: 480px) {
          .floating-install-button {
            bottom: 16px;
            right: 16px;
            padding: 10px 16px;
            font-size: 13px;
          }
        }
      `})]})},Bf={worry_worm:{name:"Worry Worm",icon:"🐛",color:"#8B4513",size:"small",technique:"breathing",description:"Those nagging worries that won't go away",tamedMessage:"Worry Worm is now peaceful! 🌱"},panic_bear:{name:"Panic Bear",icon:"🐻",color:"#DC143C",size:"large",technique:"progressive_relaxation",description:"Big scary feelings that make your heart race",tamedMessage:"Panic Bear is now your gentle guardian! 🧸"},overthink_octopus:{name:"Overthink Octopus",icon:"🐙",color:"#4B0082",size:"medium",technique:"mindfulness",description:"Eight arms of spiraling thoughts",tamedMessage:"Overthink Octopus is now zen and focused! 🧘‍♀️"},doom_dragon:{name:"Doom Dragon",icon:"🐉",color:"#8B0000",size:"boss",technique:"breathing",description:"The big bad of catastrophic thinking",tamedMessage:"Doom Dragon is now your wise protector! ✨"}},qa={breathing:{name:"Deep Breathing",icon:"💨",instructions:["Breathe in for 4","Hold for 4","Breathe out for 6","Repeat"],duration:16e3,color:"#4CAF50"},progressive_relaxation:{name:"Progressive Relaxation",icon:"🧘‍♀️",instructions:["Tense your shoulders","Hold for 3 seconds","Release and relax","Feel the tension melt away"],duration:12e3,color:"#2196F3"},mindfulness:{name:"Mindfulness Anchor",icon:"⚓",instructions:["Notice 3 things you can see","Notice 2 things you can hear","Notice 1 thing you can feel","You are present"],duration:15e3,color:"#FF9800"}},vu={TAMED_MONSTERS:"anxiety_game_tamed_monsters",PLAYER_STATS:"anxiety_game_player_stats"};function D3e({user:t,onUpdateStats:e}){var L,M,E;const[n,s]=P.useState("menu"),[r,i]=P.useState(null),[o,a]=P.useState([]),[c,d]=P.useState({level:1,experience:0,calmness:100,monstersDefeated:0,sanctuaryPoints:0}),[f,m]=P.useState(0),[g,T]=P.useState(0),[S,A]=P.useState(!1),C=P.useRef(null);P.useEffect(()=>{try{const y=localStorage.getItem(vu.TAMED_MONSTERS);if(y){const N=JSON.parse(y).map(R=>({...Bf[R],id:R}));a(N)}const I=localStorage.getItem(vu.PLAYER_STATS);if(I){const w=JSON.parse(I);d(w)}}catch(y){console.error("Error loading game data from localStorage:",y)}},[]);const x=()=>{const y=Object.keys(Bf),I=y[Math.floor(Math.random()*y.length)],w={...Bf[I],id:I};i(w),s("encounter");const N=w.size==="boss"?30:w.size==="large"?20:10;d(R=>({...R,calmness:Math.max(0,R.calmness-N)}))},v=()=>{const y=qa[r.technique]||qa.breathing;s("technique"),m(0),T(0),b(y)},b=y=>{const I=y.duration/y.instructions.length;let w=0;const N=setInterval(()=>{T(w),m((w+1)/y.instructions.length*100),w===y.instructions.length-1?(clearInterval(N),setTimeout(()=>{D()},I)):w++},I);C.current=N},D=()=>{const y=r.size==="boss"?100:r.size==="large"?50:25,I=r.size==="boss"?20:10;a(w=>[...w,r]),d(w=>({...w,experience:w.experience+y,calmness:Math.min(100,w.calmness+30),monstersDefeated:w.monstersDefeated+1,sanctuaryPoints:w.sanctuaryPoints+I,level:Math.floor((w.experience+y)/100)+1})),s("victory"),e&&e({anxietyGameScore:c.monstersDefeated+1,mindfulnessPoints:I})};return P.useEffect(()=>{if(n==="technique"&&(r==null?void 0:r.technique)==="breathing"){const y=setInterval(()=>{A(I=>!I)},2e3);return()=>clearInterval(y)}},[n,r]),P.useEffect(()=>()=>{C.current&&clearInterval(C.current)},[]),P.useEffect(()=>{try{const y=o.map(I=>I.id);localStorage.setItem(vu.TAMED_MONSTERS,JSON.stringify(y))}catch(y){console.error("Error saving tamed monsters to localStorage:",y)}},[o]),P.useEffect(()=>{try{localStorage.setItem(vu.PLAYER_STATS,JSON.stringify(c))}catch(y){console.error("Error saving player stats to localStorage:",y)}},[c]),u.jsxs("div",{className:"monster-tamer-game",children:[n==="menu"&&u.jsxs("div",{className:"game-menu",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h2",{children:"👾 Anxiety Monster Tamer"}),u.jsx("p",{children:"Use mindfulness to tame your anxiety monsters!"})]}),u.jsxs("div",{className:"player-stats",children:[u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"⭐"}),u.jsxs("span",{children:["Level ",c.level]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("span",{children:["Calmness: ",c.calmness,"%"]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"👾"}),u.jsxs("span",{children:["Tamed: ",c.monstersDefeated]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"🏠"}),u.jsxs("span",{children:["Sanctuary: ",c.sanctuaryPoints]})]})]}),u.jsx("button",{className:"encounter-btn",onClick:x,disabled:c.calmness<10,children:c.calmness<10?"Rest First 😴":"Encounter Monster 👾"}),c.calmness<10&&u.jsx("button",{className:"rest-btn",onClick:()=>d(y=>({...y,calmness:Math.min(100,y.calmness+50)})),style:{background:"linear-gradient(135deg, #FF9800 0%, #FF5722 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"20px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"12px"},children:"Rest & Recover 🧘‍♀️ (+50 Calmness)"}),u.jsxs("div",{className:"tamed-collection",children:[u.jsx("h3",{children:"Your Tamed Monsters:"}),u.jsx("div",{className:"tamed-grid",children:o.length===0?u.jsx("p",{className:"no-tamed",children:"No monsters tamed yet. Start your journey!"}):o.map((y,I)=>u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon",children:y.icon}),u.jsx("span",{className:"monster-name",children:y.name})]},I))})]})]}),n==="encounter"&&r&&u.jsxs("div",{className:"monster-encounter",children:[u.jsxs("div",{className:"encounter-scene",children:[u.jsxs("div",{className:`monster ${r.size} ${r.id}`,children:[u.jsx("div",{className:"monster-icon",children:r.icon}),u.jsx("div",{className:"monster-shake"})]}),u.jsxs("div",{className:"encounter-text",children:[u.jsxs("h3",{children:["A wild ",r.name," appears!"]}),u.jsx("p",{children:r.description}),u.jsx("p",{className:"calmness-drop",children:"Your calmness dropped! 😰"})]})]}),u.jsxs("div",{className:"taming-options",children:[u.jsxs("button",{className:"tame-btn",onClick:v,children:[u.jsx("span",{className:"technique-icon",children:((L=qa[r.technique])==null?void 0:L.icon)||"💨"}),"Use ",((M=qa[r.technique])==null?void 0:M.name)||"Deep Breathing"]}),u.jsx("button",{className:"run-btn",onClick:()=>s("menu"),children:"Run Away 🏃‍♀️"})]})]}),n==="technique"&&r&&u.jsxs("div",{className:"taming-technique",children:[u.jsxs("div",{className:"technique-header",children:[u.jsxs("h3",{children:["Taming ",r.name]}),u.jsx("div",{className:"anxiety-progress",children:u.jsx("div",{className:"anxiety-progress-fill",style:{width:`${f}%`}})})]}),u.jsx("div",{className:`technique-visual ${S?"breathing":""}`,children:u.jsxs("div",{className:"monster-calming",children:[u.jsx("span",{className:"monster-icon",children:r.icon}),u.jsx("div",{className:"calming-aura"})]})}),u.jsx("div",{className:"technique-instructions",children:(E=qa[r.technique])==null?void 0:E.instructions.map((y,I)=>u.jsx("div",{className:`instruction ${I===g?"active":I<g?"completed":""}`,children:y},I))})]}),n==="victory"&&r&&u.jsxs("div",{className:"victory-screen",children:[u.jsx("div",{className:"victory-animation",children:u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon happy",children:r.icon}),u.jsx("div",{className:"sparkles",children:"✨✨✨"})]})}),u.jsxs("div",{className:"victory-text",children:[u.jsx("h3",{children:"🎉 Monster Tamed!"}),u.jsx("p",{children:r.tamedMessage}),u.jsxs("div",{className:"rewards",children:[u.jsx("div",{className:"reward",children:"+30 Calmness 🧘‍♀️"}),u.jsxs("div",{className:"reward",children:["+",r.size==="boss"?100:r.size==="large"?50:25," Experience ⭐"]}),u.jsxs("div",{className:"reward",children:["+",r.size==="boss"?20:10," Sanctuary Points 🏠"]})]})]}),u.jsxs("div",{className:"victory-actions",children:[u.jsx("button",{className:"continue-btn",onClick:()=>s("menu"),children:"Continue Journey ➡️"}),u.jsx("button",{className:"sanctuary-btn",onClick:()=>s("sanctuary"),children:"Visit Sanctuary 🏛️"})]})]}),n==="sanctuary"&&u.jsxs("div",{className:"sanctuary-view",children:[u.jsxs("div",{className:"sanctuary-header",children:[u.jsx("h2",{children:"🏛️ Your Peaceful Sanctuary"}),u.jsx("p",{children:"A safe space built from your mindfulness journey"}),u.jsx("button",{className:"back-to-menu-btn",onClick:()=>s("menu"),children:"← Back to Adventure"})]}),u.jsxs("div",{className:"sanctuary-stats",children:[u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"🏠"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:c.sanctuaryPoints}),u.jsx("span",{className:"stat-label",children:"Sanctuary Points"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"👾"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:o.length}),u.jsx("span",{className:"stat-label",children:"Peaceful Companions"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"stat-info",children:[u.jsxs("span",{className:"stat-number",children:[c.calmness,"%"]}),u.jsx("span",{className:"stat-label",children:"Current Calmness"})]})]})]}),u.jsxs("div",{className:"sanctuary-garden",children:[u.jsx("h3",{children:"🌸 Mindfulness Garden"}),u.jsxs("div",{className:"garden-grid",children:[o.length===0?u.jsxs("div",{className:"empty-garden",children:[u.jsx("div",{className:"empty-garden-icon",children:"🌱"}),u.jsx("p",{children:"Your garden awaits your first peaceful companion..."}),u.jsx("small",{children:"Tame monsters to populate your sanctuary!"})]}):o.map((y,I)=>u.jsx("div",{className:"garden-companion",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"companion-icon",children:y.icon}),u.jsx("div",{className:"companion-aura"}),u.jsx("div",{className:"companion-name",children:y.name}),u.jsx("div",{className:"companion-effect",children:"Radiating peace ✨"})]})},I)),Array.from({length:Math.max(0,6-o.length)}).map((y,I)=>u.jsx("div",{className:"garden-companion empty",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"empty-spot",children:"?"}),u.jsx("div",{className:"spot-label",children:"Awaiting Friend"})]})},`empty-${I}`))]})]}),u.jsxs("div",{className:"sanctuary-upgrades",children:[u.jsx("h3",{children:"🏗️ Sanctuary Upgrades"}),u.jsxs("div",{className:"upgrades-grid",children:[u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=50?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"🌈"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Rainbow Bridge"}),u.jsx("p",{children:"Connects different areas of your sanctuary"}),u.jsx("span",{className:"upgrade-cost",children:"50 Points"})]}),c.sanctuaryPoints>=50?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=100?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"⛲"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Meditation Fountain"}),u.jsx("p",{children:"Restores calmness over time"}),u.jsx("span",{className:"upgrade-cost",children:"100 Points"})]}),c.sanctuaryPoints>=100?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=200?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"🏰"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Wisdom Tower"}),u.jsx("p",{children:"Unlock advanced meditation techniques"}),u.jsx("span",{className:"upgrade-cost",children:"200 Points"})]}),c.sanctuaryPoints>=200?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]})]})]}),u.jsxs("div",{className:"daily-affirmations",children:[u.jsx("h3",{children:"💭 Daily Affirmation"}),u.jsxs("div",{className:"affirmation-card",children:[u.jsx("div",{className:"affirmation-text",children:'"I am creating a sanctuary of peace within myself, one mindful moment at a time."'}),u.jsx("div",{className:"affirmation-author",children:"- Your Inner Wisdom"})]})]}),u.jsxs("div",{className:"sanctuary-actions",children:[u.jsx("button",{className:"meditation-btn",onClick:()=>{d(y=>({...y,calmness:Math.min(100,y.calmness+10)}))},children:"🧘‍♀️ Meditate in Sanctuary (+10 Calmness)"}),u.jsx("button",{className:"encounter-btn",onClick:()=>{s("menu"),setTimeout(()=>{x()},500)},children:"👾 Ready for Another Adventure"})]})]})]})}function j3e(){const{user:t}=xn(),[e,n]=P.useState({anxietyGameScore:0,mindfulnessPoints:0,totalGamesPlayed:0,currentStreak:0}),[s,r]=P.useState(!1),[i,o]=P.useState(!1),[a,c]=P.useState(0);P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const C=await Ee.getPoints(t.uid);c(C)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const C=await Ee.isChallengeCompleted(t.uid,"monster_tamer_daily","daily"),x=await Ee.isChallengeCompleted(t.uid,"mindfulness_master_daily","daily");r(C),o(x)}})()},[t]),P.useEffect(()=>{try{const A=localStorage.getItem("clarity_game_stats");if(A){const x=JSON.parse(A);n(x),console.log("🎮 Loaded saved game stats:",x)}const C=localStorage.getItem("anxiety_game_tamed_monsters");if(C){const v=JSON.parse(C).length;n(b=>{const D={...b,anxietyGameScore:Math.max(b.anxietyGameScore,v)};return localStorage.setItem("clarity_game_stats",JSON.stringify(D)),console.log("🎮 Synced monster count:",v),D})}}catch(A){console.error("Error loading game stats:",A)}},[]);const d=A=>{console.log("🎮 handleUpdateStats called with:",A),n(C=>{const x={...C,anxietyGameScore:A.anxietyGameScore||C.anxietyGameScore,mindfulnessPoints:C.mindfulnessPoints+(A.mindfulnessPoints||0),totalGamesPlayed:C.totalGamesPlayed+1};try{localStorage.setItem("clarity_game_stats",JSON.stringify(x)),console.log("🎮 Saved game stats to localStorage:",x)}catch(v){console.error("Error saving game stats:",v)}return x}),console.log("🎮 Game stats updated:",A)},f=()=>{try{const A=localStorage.getItem("anxiety_game_tamed_monsters"),C=localStorage.getItem("anxiety_game_player_stats");if(console.log("🎮 Debug - Tamed monsters:",A),console.log("🎮 Debug - Player stats:",C),A){const v=JSON.parse(A).length;n(b=>({...b,anxietyGameScore:v})),console.log("🎮 Debug - Updated anxietyGameScore to:",v)}}catch(A){console.error("Error refreshing stats:",A)}},m=e.anxietyGameScore>=3,g=e.mindfulnessPoints>=100,T=async()=>{if(!(t!=null&&t.uid)||s||!m)return;await Ee.addPoints(t.uid,50),await Ee.completeChallenge(t.uid,"monster_tamer_daily","daily"),r(!0);const A=await Ee.getPoints(t.uid);c(A),alert("You claimed 50 points for Monster Tamer Challenge!")},S=async()=>{if(!(t!=null&&t.uid)||i||!g)return;await Ee.addPoints(t.uid,75),await Ee.completeChallenge(t.uid,"mindfulness_master_daily","daily"),o(!0);const A=await Ee.getPoints(t.uid);c(A),alert("You claimed 75 points for Mindfulness Master Challenge!")};return u.jsxs("div",{className:"games-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:"⭐"})," ",a," Points"]}),u.jsxs("div",{className:"games-header",children:[u.jsx("h1",{className:"games-title",children:"Mental Wellness Games"}),u.jsx("p",{className:"games-subtitle",children:"Play games to improve your mental health"})]}),u.jsxs("div",{className:"game-stats-section",children:[u.jsxs("div",{className:"stats-header",children:[u.jsx("h2",{className:"section-title",children:"Your Gaming Stats"}),u.jsx("button",{onClick:f,className:"refresh-stats-btn",title:"Refresh stats from game data",children:"🔄 Refresh"})]}),u.jsxs("div",{className:"game-stats-grid",children:[u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"👾"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.anxietyGameScore}),u.jsx("span",{className:"stat-label",children:"Monsters Tamed"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.mindfulnessPoints}),u.jsx("span",{className:"stat-label",children:"Mindfulness Points"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🎮"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.totalGamesPlayed}),u.jsx("span",{className:"stat-label",children:"Games Played"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🔥"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.currentStreak}),u.jsx("span",{className:"stat-label",children:"Day Streak"})]})]})]})]}),u.jsxs("div",{className:"available-games",children:[u.jsx("h2",{className:"section-title",children:"Available Games"}),u.jsxs("div",{className:"game-section",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h3",{className:"game-title",children:"🎮 Anxiety Monster Tamer"}),u.jsx("span",{className:"game-status",children:"Active"})]}),u.jsx("p",{className:"game-description",children:"Face your anxiety monsters and tame them through mindful interaction. Each monster represents different anxiety triggers. Practice coping strategies while earning points!"}),u.jsx("div",{className:"game-container",children:u.jsx(D3e,{user:t,onUpdateStats:d})})]}),u.jsxs("div",{className:"daily-challenges",children:[u.jsx("h2",{className:"section-title",children:"Daily Gaming Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:"👾"}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Monster Tamer Challenge"}),u.jsx("p",{children:"Tame 3 anxiety monsters today"}),u.jsx("div",{className:"challenge-progress",children:u.jsx("div",{className:"daily-challenge-bar",children:u.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.anxietyGameScore/3*100,100)}%`}})})})]}),u.jsxs("div",{className:"challenge-reward",children:[u.jsx("span",{children:"+50 points"}),u.jsx("button",{className:"claim-btn",onClick:T,disabled:!m||s,children:s?"Claimed":"Claim"})]})]}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Mindfulness Master"}),u.jsx("p",{children:"Earn 100 mindfulness points"}),u.jsx("div",{className:"challenge-progress",children:u.jsx("div",{className:"daily-challenge-bar",children:u.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.mindfulnessPoints/100*100,100)}%`}})})})]}),u.jsxs("div",{className:"challenge-reward",children:[u.jsx("span",{children:"+75 points"}),u.jsx("button",{className:"claim-btn",onClick:S,disabled:!g||i,children:i?"Claimed":"Claim"})]})]})]}),u.jsxs("div",{className:"game-achievements",children:[u.jsx("h2",{className:"section-title",children:"Gaming Achievements"}),u.jsxs("div",{className:"achievements-grid",children:[e.anxietyGameScore>=1&&u.jsxs("div",{className:"achievement-card bronze",children:[u.jsx("div",{className:"achievement-icon",children:"🥉"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"FIRST VICTORY"}),u.jsx("p",{children:"Tamed your first monster"})]})]}),e.anxietyGameScore>=5&&u.jsxs("div",{className:"achievement-card silver",children:[u.jsx("div",{className:"achievement-icon",children:"🥈"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MONSTER HUNTER"}),u.jsx("p",{children:"Tamed 5 monsters"})]})]}),e.anxietyGameScore>=10&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:"🥇"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"ANXIETY MASTER"}),u.jsx("p",{children:"Tamed 10 monsters"})]})]}),e.mindfulnessPoints>=100&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MINDFUL GURU"}),u.jsx("p",{children:"Earned 100+ mindfulness points"})]})]})]})]}),u.jsxs("div",{className:"coming-soon-games",children:[u.jsx("h3",{className:"section-title",children:"More Games Coming Soon"}),u.jsxs("div",{className:"game-preview-grid",children:[u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🌱"}),u.jsx("h4",{children:"Mindful Garden"}),u.jsx("p",{children:"Grow a virtual garden through daily meditation practice"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🌊"}),u.jsx("h4",{children:"Calm Waters"}),u.jsx("p",{children:"Navigate peaceful waters while practicing breathing exercises"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🎯"}),u.jsx("h4",{children:"Focus Quest"}),u.jsx("p",{children:"Complete challenges that improve concentration and focus"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]})]})]})]})]})}function V3e(){return u.jsx(Ix,{children:u.jsxs(wA,{children:[u.jsxs(hA,{children:[u.jsx(mn,{path:"/welcome",element:u.jsx(TV,{})}),u.jsxs(mn,{path:"/",element:u.jsx(b3e,{children:u.jsx(EV,{})}),children:[u.jsx(mn,{index:!0,element:u.jsx(vd,{to:"/dashboard",replace:!0})}),u.jsx(mn,{path:"dashboard",element:u.jsx(AV,{})}),u.jsx(mn,{path:"workout",element:u.jsx(w3e,{})}),u.jsx(mn,{path:"meditation",element:u.jsx(E3e,{})}),u.jsx(mn,{path:"water",element:u.jsx(T3e,{})}),u.jsx(mn,{path:"goals",element:u.jsx(I3e,{})}),u.jsx(mn,{path:"profile",element:u.jsx(x3e,{})}),u.jsx(mn,{path:"games",element:u.jsx(j3e,{})})]}),u.jsx(mn,{path:"*",element:u.jsx(vd,{to:"/welcome",replace:!0})})]}),u.jsx(N3e,{}),u.jsx(C3e,{}),u.jsx(R3e,{})]})})}$f.createRoot(document.getElementById("root")).render(u.jsx(Es.StrictMode,{children:u.jsx(Ix,{children:u.jsx(V3e,{})})}));
