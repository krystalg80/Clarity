function Hx(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function P2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var N2={exports:{}},Fd={},C2={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jc=Symbol.for("react.element"),Kx=Symbol.for("react.portal"),Qx=Symbol.for("react.fragment"),Yx=Symbol.for("react.strict_mode"),Xx=Symbol.for("react.profiler"),Jx=Symbol.for("react.provider"),Zx=Symbol.for("react.context"),eb=Symbol.for("react.forward_ref"),tb=Symbol.for("react.suspense"),nb=Symbol.for("react.memo"),sb=Symbol.for("react.lazy"),rv=Symbol.iterator;function rb(t){return t===null||typeof t!="object"?null:(t=rv&&t[rv]||t["@@iterator"],typeof t=="function"?t:null)}var R2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D2=Object.assign,j2={};function ea(t,e,n){this.props=t,this.context=e,this.refs=j2,this.updater=n||R2}ea.prototype.isReactComponent={};ea.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ea.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V2(){}V2.prototype=ea.prototype;function Ep(t,e,n){this.props=t,this.context=e,this.refs=j2,this.updater=n||R2}var Tp=Ep.prototype=new V2;Tp.constructor=Ep;D2(Tp,ea.prototype);Tp.isPureReactComponent=!0;var iv=Array.isArray,O2=Object.prototype.hasOwnProperty,Ip={current:null},M2={key:!0,ref:!0,__self:!0,__source:!0};function L2(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)O2.call(e,s)&&!M2.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:Jc,type:t,key:i,ref:o,props:r,_owner:Ip.current}}function ib(t,e){return{$$typeof:Jc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jc}function ob(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ov=/\/+/g;function Kh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ob(""+t.key):e.toString(36)}function uu(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Jc:case Kx:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+Kh(o,0):s,iv(r)?(n="",t!=null&&(n=t.replace(ov,"$&/")+"/"),uu(r,e,n,"",function(d){return d})):r!=null&&(xp(r)&&(r=ib(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(ov,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",iv(t))for(var a=0;a<t.length;a++){i=t[a];var c=s+Kh(i,a);o+=uu(i,e,n,c,r)}else if(c=rb(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=s+Kh(i,a++),o+=uu(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vl(t,e,n){if(t==null)return t;var s=[],r=0;return uu(t,s,"","",function(i){return e.call(n,i,r++)}),s}function ab(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},du={transition:null},cb={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:du,ReactCurrentOwner:Ip};function F2(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Vl,forEach:function(t,e,n){Vl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vl(t,function(){e++}),e},toArray:function(t){return Vl(t,function(e){return e})||[]},only:function(t){if(!xp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=ea;ve.Fragment=Qx;ve.Profiler=Xx;ve.PureComponent=Ep;ve.StrictMode=Yx;ve.Suspense=tb;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cb;ve.act=F2;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=D2({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ip.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)O2.call(e,c)&&!M2.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];s.children=a}return{$$typeof:Jc,type:t.type,key:r,ref:i,props:s,_owner:o}};ve.createContext=function(t){return t={$$typeof:Zx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jx,_context:t},t.Consumer=t};ve.createElement=L2;ve.createFactory=function(t){var e=L2.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:eb,render:t}};ve.isValidElement=xp;ve.lazy=function(t){return{$$typeof:sb,_payload:{_status:-1,_result:t},_init:ab}};ve.memo=function(t,e){return{$$typeof:nb,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=du.transition;du.transition={};try{t()}finally{du.transition=e}};ve.unstable_act=F2;ve.useCallback=function(t,e){return $t.current.useCallback(t,e)};ve.useContext=function(t){return $t.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};ve.useEffect=function(t,e){return $t.current.useEffect(t,e)};ve.useId=function(){return $t.current.useId()};ve.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return $t.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};ve.useRef=function(t){return $t.current.useRef(t)};ve.useState=function(t){return $t.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return $t.current.useTransition()};ve.version="18.3.1";C2.exports=ve;var P=C2.exports;const _s=P2(P),lb=Hx({__proto__:null,default:_s},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub=P,db=Symbol.for("react.element"),hb=Symbol.for("react.fragment"),fb=Object.prototype.hasOwnProperty,mb=ub.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pb={key:!0,ref:!0,__self:!0,__source:!0};function z2(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)fb.call(e,s)&&!pb.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:db,type:t,key:i,ref:o,props:r,_owner:mb.current}}Fd.Fragment=hb;Fd.jsx=z2;Fd.jsxs=z2;N2.exports=Fd;var u=N2.exports,Lf={},U2={exports:{}},dn={},B2={exports:{}},$2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,ee){var ie=$.length;$.push(ee);e:for(;0<ie;){var ge=ie-1>>>1,me=$[ge];if(0<r(me,ee))$[ge]=ee,$[ie]=me,ie=ge;else break e}}function n($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var ee=$[0],ie=$.pop();if(ie!==ee){$[0]=ie;e:for(var ge=0,me=$.length,ke=me>>>1;ge<ke;){var it=2*(ge+1)-1,Jt=$[it],Zt=it+1,It=$[Zt];if(0>r(Jt,ie))Zt<me&&0>r(It,Jt)?($[ge]=It,$[Zt]=ie,ge=Zt):($[ge]=Jt,$[it]=ie,ge=it);else if(Zt<me&&0>r(It,ie))$[ge]=It,$[Zt]=ie,ge=Zt;else break e}}return ee}function r($,ee){var ie=$.sortIndex-ee.sortIndex;return ie!==0?ie:$.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],f=1,m=null,g=3,T=!1,k=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b($){for(var ee=n(d);ee!==null;){if(ee.callback===null)s(d);else if(ee.startTime<=$)s(d),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=n(d)}}function R($){if(A=!1,b($),!k)if(n(c)!==null)k=!0,q(L);else{var ee=n(d);ee!==null&&ae(R,ee.startTime-$)}}function L($,ee){k=!1,A&&(A=!1,x(y),y=-1),T=!0;var ie=g;try{for(b(ee),m=n(c);m!==null&&(!(m.expirationTime>ee)||$&&!N());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,g=m.priorityLevel;var me=ge(m.expirationTime<=ee);ee=t.unstable_now(),typeof me=="function"?m.callback=me:m===n(c)&&s(c),b(ee)}else s(c);m=n(c)}if(m!==null)var ke=!0;else{var it=n(d);it!==null&&ae(R,it.startTime-ee),ke=!1}return ke}finally{m=null,g=ie,T=!1}}var M=!1,E=null,y=-1,I=5,w=-1;function N(){return!(t.unstable_now()-w<I)}function D(){if(E!==null){var $=t.unstable_now();w=$;var ee=!0;try{ee=E(!0,$)}finally{ee?S():(M=!1,E=null)}}else M=!1}var S;if(typeof v=="function")S=function(){v(D)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,X=le.port2;le.port1.onmessage=D,S=function(){X.postMessage(null)}}else S=function(){C(D,0)};function q($){E=$,M||(M=!0,S())}function ae($,ee){y=C(function(){$(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){k||T||(k=!0,q(L))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var ie=g;g=ee;try{return $()}finally{g=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,ee){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ie=g;g=$;try{return ee()}finally{g=ie}},t.unstable_scheduleCallback=function($,ee,ie){var ge=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ge+ie:ge):ie=ge,$){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ie+me,$={id:f++,callback:ee,priorityLevel:$,startTime:ie,expirationTime:me,sortIndex:-1},ie>ge?($.sortIndex=ie,e(d,$),n(c)===null&&$===n(d)&&(A?(x(y),y=-1):A=!0,ae(R,ie-ge))):($.sortIndex=me,e(c,$),k||T||(k=!0,q(L))),$},t.unstable_shouldYield=N,t.unstable_wrapCallback=function($){var ee=g;return function(){var ie=g;g=ee;try{return $.apply(this,arguments)}finally{g=ie}}}})($2);B2.exports=$2;var gb=B2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb=P,ln=gb;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q2=new Set,pc={};function ji(t,e){Ro(t,e),Ro(t+"Capture",e)}function Ro(t,e){for(pc[t]=e,t=0;t<e.length;t++)q2.add(e[t])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ff=Object.prototype.hasOwnProperty,vb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,av={},cv={};function _b(t){return Ff.call(cv,t)?!0:Ff.call(av,t)?!1:vb.test(t)?cv[t]=!0:(av[t]=!0,!1)}function wb(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Eb(t,e,n,s){if(e===null||typeof e>"u"||wb(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var bp=/[\-:]([a-z])/g;function kp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bp,kp);Tt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bp,kp);Tt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bp,kp);Tt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sp(t,e,n,s){var r=Tt.hasOwnProperty(e)?Tt[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Eb(e,n,r,s)&&(n=null),s||r===null?_b(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Ns=yb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ol=Symbol.for("react.element"),co=Symbol.for("react.portal"),lo=Symbol.for("react.fragment"),Ap=Symbol.for("react.strict_mode"),zf=Symbol.for("react.profiler"),W2=Symbol.for("react.provider"),G2=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),Uf=Symbol.for("react.suspense"),Bf=Symbol.for("react.suspense_list"),Np=Symbol.for("react.memo"),er=Symbol.for("react.lazy"),H2=Symbol.for("react.offscreen"),lv=Symbol.iterator;function ba(t){return t===null||typeof t!="object"?null:(t=lv&&t[lv]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Qh;function Fa(t){if(Qh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qh=e&&e[1]||""}return`
`+Qh+t}var Yh=!1;function Xh(t,e){if(!t||Yh)return"";Yh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Yh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fa(t):""}function Tb(t){switch(t.tag){case 5:return Fa(t.type);case 16:return Fa("Lazy");case 13:return Fa("Suspense");case 19:return Fa("SuspenseList");case 0:case 2:case 15:return t=Xh(t.type,!1),t;case 11:return t=Xh(t.type.render,!1),t;case 1:return t=Xh(t.type,!0),t;default:return""}}function $f(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lo:return"Fragment";case co:return"Portal";case zf:return"Profiler";case Ap:return"StrictMode";case Uf:return"Suspense";case Bf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case G2:return(t.displayName||"Context")+".Consumer";case W2:return(t._context.displayName||"Context")+".Provider";case Pp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Np:return e=t.displayName||null,e!==null?e:$f(t.type)||"Memo";case er:e=t._payload,t=t._init;try{return $f(t(e))}catch{}}return null}function Ib(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $f(e);case 8:return e===Ap?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function K2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xb(t){var e=K2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ml(t){t._valueTracker||(t._valueTracker=xb(t))}function Q2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=K2(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Lu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qf(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uv(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Y2(t,e){e=e.checked,e!=null&&Sp(t,"checked",e,!1)}function Wf(t,e){Y2(t,e);var n=Ar(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gf(t,e.type,Ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gf(t,e,n){(e!=="number"||Lu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var za=Array.isArray;function To(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Ar(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Hf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(za(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ar(n)}}function X2(t,e){var n=Ar(e.value),s=Ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function fv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function J2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?J2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ll,Z2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ll=Ll||document.createElement("div"),Ll.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ll.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bb=["Webkit","ms","Moz","O"];Object.keys(Ya).forEach(function(t){bb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ya[e]=Ya[t]})});function e0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ya.hasOwnProperty(t)&&Ya[t]?(""+e).trim():e+"px"}function t0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=e0(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var kb=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qf(t,e){if(e){if(kb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Yf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xf=null;function Cp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jf=null,Io=null,xo=null;function mv(t){if(t=tl(t)){if(typeof Jf!="function")throw Error(G(280));var e=t.stateNode;e&&(e=qd(e),Jf(t.stateNode,t.type,e))}}function n0(t){Io?xo?xo.push(t):xo=[t]:Io=t}function s0(){if(Io){var t=Io,e=xo;if(xo=Io=null,mv(t),e)for(t=0;t<e.length;t++)mv(e[t])}}function r0(t,e){return t(e)}function i0(){}var Jh=!1;function o0(t,e,n){if(Jh)return t(e,n);Jh=!0;try{return r0(t,e,n)}finally{Jh=!1,(Io!==null||xo!==null)&&(i0(),s0())}}function yc(t,e){var n=t.stateNode;if(n===null)return null;var s=qd(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Zf=!1;if(Ts)try{var ka={};Object.defineProperty(ka,"passive",{get:function(){Zf=!0}}),window.addEventListener("test",ka,ka),window.removeEventListener("test",ka,ka)}catch{Zf=!1}function Sb(t,e,n,s,r,i,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Xa=!1,Fu=null,zu=!1,em=null,Ab={onError:function(t){Xa=!0,Fu=t}};function Pb(t,e,n,s,r,i,o,a,c){Xa=!1,Fu=null,Sb.apply(Ab,arguments)}function Nb(t,e,n,s,r,i,o,a,c){if(Pb.apply(this,arguments),Xa){if(Xa){var d=Fu;Xa=!1,Fu=null}else throw Error(G(198));zu||(zu=!0,em=d)}}function Vi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function a0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pv(t){if(Vi(t)!==t)throw Error(G(188))}function Cb(t){var e=t.alternate;if(!e){if(e=Vi(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return pv(r),t;if(i===s)return pv(r),e;i=i.sibling}throw Error(G(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==s)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function c0(t){return t=Cb(t),t!==null?l0(t):null}function l0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=l0(t);if(e!==null)return e;t=t.sibling}return null}var u0=ln.unstable_scheduleCallback,gv=ln.unstable_cancelCallback,Rb=ln.unstable_shouldYield,Db=ln.unstable_requestPaint,Je=ln.unstable_now,jb=ln.unstable_getCurrentPriorityLevel,Rp=ln.unstable_ImmediatePriority,d0=ln.unstable_UserBlockingPriority,Uu=ln.unstable_NormalPriority,Vb=ln.unstable_LowPriority,h0=ln.unstable_IdlePriority,zd=null,Jn=null;function Ob(t){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(zd,t,void 0,(t.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:Fb,Mb=Math.log,Lb=Math.LN2;function Fb(t){return t>>>=0,t===0?32:31-(Mb(t)/Lb|0)|0}var Fl=64,zl=4194304;function Ua(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bu(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=Ua(a):(i&=o,i!==0&&(s=Ua(i)))}else o=n&~r,o!==0?s=Ua(o):i!==0&&(s=Ua(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-jn(e),r=1<<n,s|=t[n],e&=~r;return s}function zb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ub(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-jn(i),a=1<<o,c=r[o];c===-1?(!(a&n)||a&s)&&(r[o]=zb(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function tm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function f0(){var t=Fl;return Fl<<=1,!(Fl&4194240)&&(Fl=64),t}function Zh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jn(e),t[e]=n}function Bb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-jn(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Dp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-jn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var Pe=0;function m0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var p0,jp,g0,y0,v0,nm=!1,Ul=[],fr=null,mr=null,pr=null,vc=new Map,_c=new Map,nr=[],$b="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yv(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":vc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(e.pointerId)}}function Sa(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=tl(e),e!==null&&jp(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function qb(t,e,n,s,r){switch(e){case"focusin":return fr=Sa(fr,t,e,n,s,r),!0;case"dragenter":return mr=Sa(mr,t,e,n,s,r),!0;case"mouseover":return pr=Sa(pr,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return vc.set(i,Sa(vc.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,_c.set(i,Sa(_c.get(i)||null,t,e,n,s,r)),!0}return!1}function _0(t){var e=ai(t.target);if(e!==null){var n=Vi(e);if(n!==null){if(e=n.tag,e===13){if(e=a0(n),e!==null){t.blockedOn=e,v0(t.priority,function(){g0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Xf=s,n.target.dispatchEvent(s),Xf=null}else return e=tl(n),e!==null&&jp(e),t.blockedOn=n,!1;e.shift()}return!0}function vv(t,e,n){hu(t)&&n.delete(e)}function Wb(){nm=!1,fr!==null&&hu(fr)&&(fr=null),mr!==null&&hu(mr)&&(mr=null),pr!==null&&hu(pr)&&(pr=null),vc.forEach(vv),_c.forEach(vv)}function Aa(t,e){t.blockedOn===e&&(t.blockedOn=null,nm||(nm=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,Wb)))}function wc(t){function e(r){return Aa(r,t)}if(0<Ul.length){Aa(Ul[0],t);for(var n=1;n<Ul.length;n++){var s=Ul[n];s.blockedOn===t&&(s.blockedOn=null)}}for(fr!==null&&Aa(fr,t),mr!==null&&Aa(mr,t),pr!==null&&Aa(pr,t),vc.forEach(e),_c.forEach(e),n=0;n<nr.length;n++)s=nr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<nr.length&&(n=nr[0],n.blockedOn===null);)_0(n),n.blockedOn===null&&nr.shift()}var bo=Ns.ReactCurrentBatchConfig,$u=!0;function Gb(t,e,n,s){var r=Pe,i=bo.transition;bo.transition=null;try{Pe=1,Vp(t,e,n,s)}finally{Pe=r,bo.transition=i}}function Hb(t,e,n,s){var r=Pe,i=bo.transition;bo.transition=null;try{Pe=4,Vp(t,e,n,s)}finally{Pe=r,bo.transition=i}}function Vp(t,e,n,s){if($u){var r=sm(t,e,n,s);if(r===null)uf(t,e,s,qu,n),yv(t,s);else if(qb(r,t,e,n,s))s.stopPropagation();else if(yv(t,s),e&4&&-1<$b.indexOf(t)){for(;r!==null;){var i=tl(r);if(i!==null&&p0(i),i=sm(t,e,n,s),i===null&&uf(t,e,s,qu,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else uf(t,e,s,null,n)}}var qu=null;function sm(t,e,n,s){if(qu=null,t=Cp(s),t=ai(t),t!==null)if(e=Vi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=a0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qu=t,null}function w0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jb()){case Rp:return 1;case d0:return 4;case Uu:case Vb:return 16;case h0:return 536870912;default:return 16}default:return 16}}var lr=null,Op=null,fu=null;function E0(){if(fu)return fu;var t,e=Op,n=e.length,s,r="value"in lr?lr.value:lr.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return fu=r.slice(t,1<s?1-s:void 0)}function mu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bl(){return!0}function _v(){return!1}function hn(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bl:_v,this.isPropagationStopped=_v,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bl)},persist:function(){},isPersistent:Bl}),e}var ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mp=hn(ta),el=Ge({},ta,{view:0,detail:0}),Kb=hn(el),ef,tf,Pa,Ud=Ge({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pa&&(Pa&&t.type==="mousemove"?(ef=t.screenX-Pa.screenX,tf=t.screenY-Pa.screenY):tf=ef=0,Pa=t),ef)},movementY:function(t){return"movementY"in t?t.movementY:tf}}),wv=hn(Ud),Qb=Ge({},Ud,{dataTransfer:0}),Yb=hn(Qb),Xb=Ge({},el,{relatedTarget:0}),nf=hn(Xb),Jb=Ge({},ta,{animationName:0,elapsedTime:0,pseudoElement:0}),Zb=hn(Jb),ek=Ge({},ta,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tk=hn(ek),nk=Ge({},ta,{data:0}),Ev=hn(nk),sk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ik={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ok(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ik[t])?!!e[t]:!1}function Lp(){return ok}var ak=Ge({},el,{key:function(t){if(t.key){var e=sk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lp,charCode:function(t){return t.type==="keypress"?mu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ck=hn(ak),lk=Ge({},Ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tv=hn(lk),uk=Ge({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lp}),dk=hn(uk),hk=Ge({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),fk=hn(hk),mk=Ge({},Ud,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pk=hn(mk),gk=[9,13,27,32],Fp=Ts&&"CompositionEvent"in window,Ja=null;Ts&&"documentMode"in document&&(Ja=document.documentMode);var yk=Ts&&"TextEvent"in window&&!Ja,T0=Ts&&(!Fp||Ja&&8<Ja&&11>=Ja),Iv=" ",xv=!1;function I0(t,e){switch(t){case"keyup":return gk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var uo=!1;function vk(t,e){switch(t){case"compositionend":return x0(e);case"keypress":return e.which!==32?null:(xv=!0,Iv);case"textInput":return t=e.data,t===Iv&&xv?null:t;default:return null}}function _k(t,e){if(uo)return t==="compositionend"||!Fp&&I0(t,e)?(t=E0(),fu=Op=lr=null,uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return T0&&e.locale!=="ko"?null:e.data;default:return null}}var wk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wk[t.type]:e==="textarea"}function b0(t,e,n,s){n0(s),e=Wu(e,"onChange"),0<e.length&&(n=new Mp("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Za=null,Ec=null;function Ek(t){O0(t,0)}function Bd(t){var e=mo(t);if(Q2(e))return t}function Tk(t,e){if(t==="change")return e}var k0=!1;if(Ts){var sf;if(Ts){var rf="oninput"in document;if(!rf){var kv=document.createElement("div");kv.setAttribute("oninput","return;"),rf=typeof kv.oninput=="function"}sf=rf}else sf=!1;k0=sf&&(!document.documentMode||9<document.documentMode)}function Sv(){Za&&(Za.detachEvent("onpropertychange",S0),Ec=Za=null)}function S0(t){if(t.propertyName==="value"&&Bd(Ec)){var e=[];b0(e,Ec,t,Cp(t)),o0(Ek,e)}}function Ik(t,e,n){t==="focusin"?(Sv(),Za=e,Ec=n,Za.attachEvent("onpropertychange",S0)):t==="focusout"&&Sv()}function xk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bd(Ec)}function bk(t,e){if(t==="click")return Bd(e)}function kk(t,e){if(t==="input"||t==="change")return Bd(e)}function Sk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var On=typeof Object.is=="function"?Object.is:Sk;function Tc(t,e){if(On(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Ff.call(e,r)||!On(t[r],e[r]))return!1}return!0}function Av(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pv(t,e){var n=Av(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Av(n)}}function A0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?A0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function P0(){for(var t=window,e=Lu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lu(t.document)}return e}function zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ak(t){var e=P0(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&A0(n.ownerDocument.documentElement,n)){if(s!==null&&zp(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=Pv(n,i);var o=Pv(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pk=Ts&&"documentMode"in document&&11>=document.documentMode,ho=null,rm=null,ec=null,im=!1;function Nv(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;im||ho==null||ho!==Lu(s)||(s=ho,"selectionStart"in s&&zp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ec&&Tc(ec,s)||(ec=s,s=Wu(rm,"onSelect"),0<s.length&&(e=new Mp("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=ho)))}function $l(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fo={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},of={},N0={};Ts&&(N0=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function $d(t){if(of[t])return of[t];if(!fo[t])return t;var e=fo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in N0)return of[t]=e[n];return t}var C0=$d("animationend"),R0=$d("animationiteration"),D0=$d("animationstart"),j0=$d("transitionend"),V0=new Map,Cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(t,e){V0.set(t,e),ji(e,[t])}for(var af=0;af<Cv.length;af++){var cf=Cv[af],Nk=cf.toLowerCase(),Ck=cf[0].toUpperCase()+cf.slice(1);Vr(Nk,"on"+Ck)}Vr(C0,"onAnimationEnd");Vr(R0,"onAnimationIteration");Vr(D0,"onAnimationStart");Vr("dblclick","onDoubleClick");Vr("focusin","onFocus");Vr("focusout","onBlur");Vr(j0,"onTransitionEnd");Ro("onMouseEnter",["mouseout","mouseover"]);Ro("onMouseLeave",["mouseout","mouseover"]);Ro("onPointerEnter",["pointerout","pointerover"]);Ro("onPointerLeave",["pointerout","pointerover"]);ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function Rv(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,Nb(s,e,void 0,t),t.currentTarget=null}function O0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&r.isPropagationStopped())break e;Rv(r,a,d),i=c}else for(o=0;o<s.length;o++){if(a=s[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&r.isPropagationStopped())break e;Rv(r,a,d),i=c}}}if(zu)throw t=em,zu=!1,em=null,t}function Ve(t,e){var n=e[um];n===void 0&&(n=e[um]=new Set);var s=t+"__bubble";n.has(s)||(M0(e,t,2,!1),n.add(s))}function lf(t,e,n){var s=0;e&&(s|=4),M0(n,t,s,e)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Ic(t){if(!t[ql]){t[ql]=!0,q2.forEach(function(n){n!=="selectionchange"&&(Rk.has(n)||lf(n,!1,t),lf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ql]||(e[ql]=!0,lf("selectionchange",!1,e))}}function M0(t,e,n,s){switch(w0(e)){case 1:var r=Gb;break;case 4:r=Hb;break;default:r=Vp}n=r.bind(null,e,n,t),r=void 0,!Zf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function uf(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ai(a),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}a=a.parentNode}}s=s.return}o0(function(){var d=i,f=Cp(n),m=[];e:{var g=V0.get(t);if(g!==void 0){var T=Mp,k=t;switch(t){case"keypress":if(mu(n)===0)break e;case"keydown":case"keyup":T=ck;break;case"focusin":k="focus",T=nf;break;case"focusout":k="blur",T=nf;break;case"beforeblur":case"afterblur":T=nf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=wv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Yb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=dk;break;case C0:case R0:case D0:T=Zb;break;case j0:T=fk;break;case"scroll":T=Kb;break;case"wheel":T=pk;break;case"copy":case"cut":case"paste":T=tk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Tv}var A=(e&4)!==0,C=!A&&t==="scroll",x=A?g!==null?g+"Capture":null:g;A=[];for(var v=d,b;v!==null;){b=v;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,x!==null&&(R=yc(v,x),R!=null&&A.push(xc(v,R,b)))),C)break;v=v.return}0<A.length&&(g=new T(g,k,null,n,f),m.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==Xf&&(k=n.relatedTarget||n.fromElement)&&(ai(k)||k[Is]))break e;if((T||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,T?(k=n.relatedTarget||n.toElement,T=d,k=k?ai(k):null,k!==null&&(C=Vi(k),k!==C||k.tag!==5&&k.tag!==6)&&(k=null)):(T=null,k=d),T!==k)){if(A=wv,R="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=Tv,R="onPointerLeave",x="onPointerEnter",v="pointer"),C=T==null?g:mo(T),b=k==null?g:mo(k),g=new A(R,v+"leave",T,n,f),g.target=C,g.relatedTarget=b,R=null,ai(f)===d&&(A=new A(x,v+"enter",k,n,f),A.target=b,A.relatedTarget=C,R=A),C=R,T&&k)t:{for(A=T,x=k,v=0,b=A;b;b=Qi(b))v++;for(b=0,R=x;R;R=Qi(R))b++;for(;0<v-b;)A=Qi(A),v--;for(;0<b-v;)x=Qi(x),b--;for(;v--;){if(A===x||x!==null&&A===x.alternate)break t;A=Qi(A),x=Qi(x)}A=null}else A=null;T!==null&&Dv(m,g,T,A,!1),k!==null&&C!==null&&Dv(m,C,k,A,!0)}}e:{if(g=d?mo(d):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var L=Tk;else if(bv(g))if(k0)L=kk;else{L=xk;var M=Ik}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=bk);if(L&&(L=L(t,d))){b0(m,L,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Gf(g,"number",g.value)}switch(M=d?mo(d):window,t){case"focusin":(bv(M)||M.contentEditable==="true")&&(ho=M,rm=d,ec=null);break;case"focusout":ec=rm=ho=null;break;case"mousedown":im=!0;break;case"contextmenu":case"mouseup":case"dragend":im=!1,Nv(m,n,f);break;case"selectionchange":if(Pk)break;case"keydown":case"keyup":Nv(m,n,f)}var E;if(Fp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else uo?I0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(T0&&n.locale!=="ko"&&(uo||y!=="onCompositionStart"?y==="onCompositionEnd"&&uo&&(E=E0()):(lr=f,Op="value"in lr?lr.value:lr.textContent,uo=!0)),M=Wu(d,y),0<M.length&&(y=new Ev(y,t,null,n,f),m.push({event:y,listeners:M}),E?y.data=E:(E=x0(n),E!==null&&(y.data=E)))),(E=yk?vk(t,n):_k(t,n))&&(d=Wu(d,"onBeforeInput"),0<d.length&&(f=new Ev("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=E))}O0(m,e)})}function xc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wu(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=yc(t,n),i!=null&&s.unshift(xc(t,i,r)),i=yc(t,e),i!=null&&s.push(xc(t,i,r))),t=t.return}return s}function Qi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dv(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===s)break;a.tag===5&&d!==null&&(a=d,r?(c=yc(n,i),c!=null&&o.unshift(xc(n,c,a))):r||(c=yc(n,i),c!=null&&o.push(xc(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Dk=/\r\n?/g,jk=/\u0000|\uFFFD/g;function jv(t){return(typeof t=="string"?t:""+t).replace(Dk,`
`).replace(jk,"")}function Wl(t,e,n){if(e=jv(e),jv(t)!==e&&n)throw Error(G(425))}function Gu(){}var om=null,am=null;function cm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lm=typeof setTimeout=="function"?setTimeout:void 0,Vk=typeof clearTimeout=="function"?clearTimeout:void 0,Vv=typeof Promise=="function"?Promise:void 0,Ok=typeof queueMicrotask=="function"?queueMicrotask:typeof Vv<"u"?function(t){return Vv.resolve(null).then(t).catch(Mk)}:lm;function Mk(t){setTimeout(function(){throw t})}function df(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),wc(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);wc(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ov(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var na=Math.random().toString(36).slice(2),Gn="__reactFiber$"+na,bc="__reactProps$"+na,Is="__reactContainer$"+na,um="__reactEvents$"+na,Lk="__reactListeners$"+na,Fk="__reactHandles$"+na;function ai(t){var e=t[Gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Is]||n[Gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ov(t);t!==null;){if(n=t[Gn])return n;t=Ov(t)}return e}t=n,n=t.parentNode}return null}function tl(t){return t=t[Gn]||t[Is],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function qd(t){return t[bc]||null}var dm=[],po=-1;function Or(t){return{current:t}}function Oe(t){0>po||(t.current=dm[po],dm[po]=null,po--)}function De(t,e){po++,dm[po]=t.current,t.current=e}var Pr={},Ot=Or(Pr),Qt=Or(!1),yi=Pr;function Do(t,e){var n=t.type.contextTypes;if(!n)return Pr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Yt(t){return t=t.childContextTypes,t!=null}function Hu(){Oe(Qt),Oe(Ot)}function Mv(t,e,n){if(Ot.current!==Pr)throw Error(G(168));De(Ot,e),De(Qt,n)}function L0(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(G(108,Ib(t)||"Unknown",r));return Ge({},n,s)}function Ku(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,yi=Ot.current,De(Ot,t),De(Qt,Qt.current),!0}function Lv(t,e,n){var s=t.stateNode;if(!s)throw Error(G(169));n?(t=L0(t,e,yi),s.__reactInternalMemoizedMergedChildContext=t,Oe(Qt),Oe(Ot),De(Ot,t)):Oe(Qt),De(Qt,n)}var ds=null,Wd=!1,hf=!1;function F0(t){ds===null?ds=[t]:ds.push(t)}function zk(t){Wd=!0,F0(t)}function Mr(){if(!hf&&ds!==null){hf=!0;var t=0,e=Pe;try{var n=ds;for(Pe=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}ds=null,Wd=!1}catch(r){throw ds!==null&&(ds=ds.slice(t+1)),u0(Rp,Mr),r}finally{Pe=e,hf=!1}}return null}var go=[],yo=0,Qu=null,Yu=0,gn=[],yn=0,vi=null,ms=1,ps="";function Jr(t,e){go[yo++]=Yu,go[yo++]=Qu,Qu=t,Yu=e}function z0(t,e,n){gn[yn++]=ms,gn[yn++]=ps,gn[yn++]=vi,vi=t;var s=ms;t=ps;var r=32-jn(s)-1;s&=~(1<<r),n+=1;var i=32-jn(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,ms=1<<32-jn(e)+r|n<<r|s,ps=i+t}else ms=1<<i|n<<r|s,ps=t}function Up(t){t.return!==null&&(Jr(t,1),z0(t,1,0))}function Bp(t){for(;t===Qu;)Qu=go[--yo],go[yo]=null,Yu=go[--yo],go[yo]=null;for(;t===vi;)vi=gn[--yn],gn[yn]=null,ps=gn[--yn],gn[yn]=null,ms=gn[--yn],gn[yn]=null}var cn=null,on=null,Le=!1,Rn=null;function U0(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,on=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vi!==null?{id:ms,overflow:ps}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,on=null,!0):!1;default:return!1}}function hm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fm(t){if(Le){var e=on;if(e){var n=e;if(!Fv(t,e)){if(hm(t))throw Error(G(418));e=gr(n.nextSibling);var s=cn;e&&Fv(t,e)?U0(s,n):(t.flags=t.flags&-4097|2,Le=!1,cn=t)}}else{if(hm(t))throw Error(G(418));t.flags=t.flags&-4097|2,Le=!1,cn=t}}}function zv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function Gl(t){if(t!==cn)return!1;if(!Le)return zv(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cm(t.type,t.memoizedProps)),e&&(e=on)){if(hm(t))throw B0(),Error(G(418));for(;e;)U0(t,e),e=gr(e.nextSibling)}if(zv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=cn?gr(t.stateNode.nextSibling):null;return!0}function B0(){for(var t=on;t;)t=gr(t.nextSibling)}function jo(){on=cn=null,Le=!1}function $p(t){Rn===null?Rn=[t]:Rn.push(t)}var Uk=Ns.ReactCurrentBatchConfig;function Na(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var s=n.stateNode}if(!s)throw Error(G(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function Hl(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uv(t){var e=t._init;return e(t._payload)}function $0(t){function e(x,v){if(t){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function s(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function r(x,v){return x=wr(x,v),x.index=0,x.sibling=null,x}function i(x,v,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,v,b,R){return v===null||v.tag!==6?(v=_f(b,x.mode,R),v.return=x,v):(v=r(v,b),v.return=x,v)}function c(x,v,b,R){var L=b.type;return L===lo?f(x,v,b.props.children,R,b.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===er&&Uv(L)===v.type)?(R=r(v,b.props),R.ref=Na(x,v,b),R.return=x,R):(R=Eu(b.type,b.key,b.props,null,x.mode,R),R.ref=Na(x,v,b),R.return=x,R)}function d(x,v,b,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=wf(b,x.mode,R),v.return=x,v):(v=r(v,b.children||[]),v.return=x,v)}function f(x,v,b,R,L){return v===null||v.tag!==7?(v=fi(b,x.mode,R,L),v.return=x,v):(v=r(v,b),v.return=x,v)}function m(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=_f(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ol:return b=Eu(v.type,v.key,v.props,null,x.mode,b),b.ref=Na(x,null,v),b.return=x,b;case co:return v=wf(v,x.mode,b),v.return=x,v;case er:var R=v._init;return m(x,R(v._payload),b)}if(za(v)||ba(v))return v=fi(v,x.mode,b,null),v.return=x,v;Hl(x,v)}return null}function g(x,v,b,R){var L=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return L!==null?null:a(x,v,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ol:return b.key===L?c(x,v,b,R):null;case co:return b.key===L?d(x,v,b,R):null;case er:return L=b._init,g(x,v,L(b._payload),R)}if(za(b)||ba(b))return L!==null?null:f(x,v,b,R,null);Hl(x,b)}return null}function T(x,v,b,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return x=x.get(b)||null,a(v,x,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ol:return x=x.get(R.key===null?b:R.key)||null,c(v,x,R,L);case co:return x=x.get(R.key===null?b:R.key)||null,d(v,x,R,L);case er:var M=R._init;return T(x,v,b,M(R._payload),L)}if(za(R)||ba(R))return x=x.get(b)||null,f(v,x,R,L,null);Hl(v,R)}return null}function k(x,v,b,R){for(var L=null,M=null,E=v,y=v=0,I=null;E!==null&&y<b.length;y++){E.index>y?(I=E,E=null):I=E.sibling;var w=g(x,E,b[y],R);if(w===null){E===null&&(E=I);break}t&&E&&w.alternate===null&&e(x,E),v=i(w,v,y),M===null?L=w:M.sibling=w,M=w,E=I}if(y===b.length)return n(x,E),Le&&Jr(x,y),L;if(E===null){for(;y<b.length;y++)E=m(x,b[y],R),E!==null&&(v=i(E,v,y),M===null?L=E:M.sibling=E,M=E);return Le&&Jr(x,y),L}for(E=s(x,E);y<b.length;y++)I=T(E,x,y,b[y],R),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?y:I.key),v=i(I,v,y),M===null?L=I:M.sibling=I,M=I);return t&&E.forEach(function(N){return e(x,N)}),Le&&Jr(x,y),L}function A(x,v,b,R){var L=ba(b);if(typeof L!="function")throw Error(G(150));if(b=L.call(b),b==null)throw Error(G(151));for(var M=L=null,E=v,y=v=0,I=null,w=b.next();E!==null&&!w.done;y++,w=b.next()){E.index>y?(I=E,E=null):I=E.sibling;var N=g(x,E,w.value,R);if(N===null){E===null&&(E=I);break}t&&E&&N.alternate===null&&e(x,E),v=i(N,v,y),M===null?L=N:M.sibling=N,M=N,E=I}if(w.done)return n(x,E),Le&&Jr(x,y),L;if(E===null){for(;!w.done;y++,w=b.next())w=m(x,w.value,R),w!==null&&(v=i(w,v,y),M===null?L=w:M.sibling=w,M=w);return Le&&Jr(x,y),L}for(E=s(x,E);!w.done;y++,w=b.next())w=T(E,x,y,w.value,R),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?y:w.key),v=i(w,v,y),M===null?L=w:M.sibling=w,M=w);return t&&E.forEach(function(D){return e(x,D)}),Le&&Jr(x,y),L}function C(x,v,b,R){if(typeof b=="object"&&b!==null&&b.type===lo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ol:e:{for(var L=b.key,M=v;M!==null;){if(M.key===L){if(L=b.type,L===lo){if(M.tag===7){n(x,M.sibling),v=r(M,b.props.children),v.return=x,x=v;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===er&&Uv(L)===M.type){n(x,M.sibling),v=r(M,b.props),v.ref=Na(x,M,b),v.return=x,x=v;break e}n(x,M);break}else e(x,M);M=M.sibling}b.type===lo?(v=fi(b.props.children,x.mode,R,b.key),v.return=x,x=v):(R=Eu(b.type,b.key,b.props,null,x.mode,R),R.ref=Na(x,v,b),R.return=x,x=R)}return o(x);case co:e:{for(M=b.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),v=r(v,b.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=wf(b,x.mode,R),v.return=x,x=v}return o(x);case er:return M=b._init,C(x,v,M(b._payload),R)}if(za(b))return k(x,v,b,R);if(ba(b))return A(x,v,b,R);Hl(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),v=r(v,b),v.return=x,x=v):(n(x,v),v=_f(b,x.mode,R),v.return=x,x=v),o(x)):n(x,v)}return C}var Vo=$0(!0),q0=$0(!1),Xu=Or(null),Ju=null,vo=null,qp=null;function Wp(){qp=vo=Ju=null}function Gp(t){var e=Xu.current;Oe(Xu),t._currentValue=e}function mm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function ko(t,e){Ju=t,qp=vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(qp!==t)if(t={context:t,memoizedValue:e,next:null},vo===null){if(Ju===null)throw Error(G(308));vo=t,Ju.dependencies={lanes:0,firstContext:t}}else vo=vo.next=t;return e}var ci=null;function Hp(t){ci===null?ci=[t]:ci.push(t)}function W0(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Hp(e)):(n.next=r.next,r.next=n),e.interleaved=n,xs(t,s)}function xs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var tr=!1;function Kp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ws(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,xe&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,xs(t,n)}return r=s.interleaved,r===null?(e.next=e,Hp(s)):(e.next=r.next,r.next=e),s.interleaved=e,xs(t,n)}function pu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Dp(t,n)}}function Bv(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zu(t,e,n,s){var r=t.updateQueue;tr=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=r.baseState;o=0,f=d=c=null,a=i;do{var g=a.lane,T=a.eventTime;if((s&g)===g){f!==null&&(f=f.next={eventTime:T,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=t,A=a;switch(g=e,T=n,A.tag){case 1:if(k=A.payload,typeof k=="function"){m=k.call(T,m,g);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=A.payload,g=typeof k=="function"?k.call(T,m,g):k,g==null)break e;m=Ge({},m,g);break e;case 2:tr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=r.effects,g===null?r.effects=[a]:g.push(a))}else T={eventTime:T,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=T,c=m):f=f.next=T,o|=g;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;g=a,a=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);if(f===null&&(c=m),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);wi|=o,t.lanes=o,t.memoizedState=m}}function $v(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(G(191,r));r.call(s)}}}var nl={},Zn=Or(nl),kc=Or(nl),Sc=Or(nl);function li(t){if(t===nl)throw Error(G(174));return t}function Qp(t,e){switch(De(Sc,e),De(kc,t),De(Zn,nl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kf(e,t)}Oe(Zn),De(Zn,e)}function Oo(){Oe(Zn),Oe(kc),Oe(Sc)}function H0(t){li(Sc.current);var e=li(Zn.current),n=Kf(e,t.type);e!==n&&(De(kc,t),De(Zn,n))}function Yp(t){kc.current===t&&(Oe(Zn),Oe(kc))}var Ue=Or(0);function ed(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ff=[];function Xp(){for(var t=0;t<ff.length;t++)ff[t]._workInProgressVersionPrimary=null;ff.length=0}var gu=Ns.ReactCurrentDispatcher,mf=Ns.ReactCurrentBatchConfig,_i=0,$e=null,ct=null,ft=null,td=!1,tc=!1,Ac=0,Bk=0;function St(){throw Error(G(321))}function Jp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!On(t[n],e[n]))return!1;return!0}function Zp(t,e,n,s,r,i){if(_i=i,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gu.current=t===null||t.memoizedState===null?Gk:Hk,t=n(s,r),tc){i=0;do{if(tc=!1,Ac=0,25<=i)throw Error(G(301));i+=1,ft=ct=null,e.updateQueue=null,gu.current=Kk,t=n(s,r)}while(tc)}if(gu.current=nd,e=ct!==null&&ct.next!==null,_i=0,ft=ct=$e=null,td=!1,e)throw Error(G(300));return t}function eg(){var t=Ac!==0;return Ac=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?$e.memoizedState=ft=t:ft=ft.next=t,ft}function In(){if(ct===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=ft===null?$e.memoizedState:ft.next;if(e!==null)ft=e,ct=t;else{if(t===null)throw Error(G(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},ft===null?$e.memoizedState=ft=t:ft=ft.next=t}return ft}function Pc(t,e){return typeof e=="function"?e(t):e}function pf(t){var e=In(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var s=ct,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,c=null,d=i;do{var f=d.lane;if((_i&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=m,o=s):c=c.next=m,$e.lanes|=f,wi|=f}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=a,On(s,e.memoizedState)||(Ht=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,$e.lanes|=i,wi|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gf(t){var e=In(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);On(i,e.memoizedState)||(Ht=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function K0(){}function Q0(t,e){var n=$e,s=In(),r=e(),i=!On(s.memoizedState,r);if(i&&(s.memoizedState=r,Ht=!0),s=s.queue,tg(J0.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Nc(9,X0.bind(null,n,s,r,e),void 0,null),mt===null)throw Error(G(349));_i&30||Y0(n,e,r)}return r}function Y0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function X0(t,e,n,s){e.value=n,e.getSnapshot=s,Z0(e)&&e1(t)}function J0(t,e,n){return n(function(){Z0(e)&&e1(t)})}function Z0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!On(t,n)}catch{return!0}}function e1(t){var e=xs(t,1);e!==null&&Vn(e,t,1,-1)}function qv(t){var e=qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pc,lastRenderedState:t},e.queue=t,t=t.dispatch=Wk.bind(null,$e,t),[e.memoizedState,t]}function Nc(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function t1(){return In().memoizedState}function yu(t,e,n,s){var r=qn();$e.flags|=t,r.memoizedState=Nc(1|e,n,void 0,s===void 0?null:s)}function Gd(t,e,n,s){var r=In();s=s===void 0?null:s;var i=void 0;if(ct!==null){var o=ct.memoizedState;if(i=o.destroy,s!==null&&Jp(s,o.deps)){r.memoizedState=Nc(e,n,i,s);return}}$e.flags|=t,r.memoizedState=Nc(1|e,n,i,s)}function Wv(t,e){return yu(8390656,8,t,e)}function tg(t,e){return Gd(2048,8,t,e)}function n1(t,e){return Gd(4,2,t,e)}function s1(t,e){return Gd(4,4,t,e)}function r1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function i1(t,e,n){return n=n!=null?n.concat([t]):null,Gd(4,4,r1.bind(null,e,t),n)}function ng(){}function o1(t,e){var n=In();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Jp(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function a1(t,e){var n=In();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Jp(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function c1(t,e,n){return _i&21?(On(n,e)||(n=f0(),$e.lanes|=n,wi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function $k(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var s=mf.transition;mf.transition={};try{t(!1),e()}finally{Pe=n,mf.transition=s}}function l1(){return In().memoizedState}function qk(t,e,n){var s=_r(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},u1(t))d1(e,n);else if(n=W0(t,e,n,s),n!==null){var r=zt();Vn(n,t,s,r),h1(n,e,s)}}function Wk(t,e,n){var s=_r(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(u1(t))d1(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,On(a,o)){var c=e.interleaved;c===null?(r.next=r,Hp(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=W0(t,e,r,s),n!==null&&(r=zt(),Vn(n,t,s,r),h1(n,e,s))}}function u1(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function d1(t,e){tc=td=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function h1(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Dp(t,n)}}var nd={readContext:Tn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},Gk={readContext:Tn,useCallback:function(t,e){return qn().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:Wv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yu(4194308,4,r1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yu(4194308,4,t,e)},useInsertionEffect:function(t,e){return yu(4,2,t,e)},useMemo:function(t,e){var n=qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=qn();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=qk.bind(null,$e,t),[s.memoizedState,t]},useRef:function(t){var e=qn();return t={current:t},e.memoizedState=t},useState:qv,useDebugValue:ng,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=qv(!1),e=t[0];return t=$k.bind(null,t[1]),qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=$e,r=qn();if(Le){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),mt===null)throw Error(G(349));_i&30||Y0(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Wv(J0.bind(null,s,i,t),[t]),s.flags|=2048,Nc(9,X0.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=qn(),e=mt.identifierPrefix;if(Le){var n=ps,s=ms;n=(s&~(1<<32-jn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ac++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Bk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Hk={readContext:Tn,useCallback:o1,useContext:Tn,useEffect:tg,useImperativeHandle:i1,useInsertionEffect:n1,useLayoutEffect:s1,useMemo:a1,useReducer:pf,useRef:t1,useState:function(){return pf(Pc)},useDebugValue:ng,useDeferredValue:function(t){var e=In();return c1(e,ct.memoizedState,t)},useTransition:function(){var t=pf(Pc)[0],e=In().memoizedState;return[t,e]},useMutableSource:K0,useSyncExternalStore:Q0,useId:l1,unstable_isNewReconciler:!1},Kk={readContext:Tn,useCallback:o1,useContext:Tn,useEffect:tg,useImperativeHandle:i1,useInsertionEffect:n1,useLayoutEffect:s1,useMemo:a1,useReducer:gf,useRef:t1,useState:function(){return gf(Pc)},useDebugValue:ng,useDeferredValue:function(t){var e=In();return ct===null?e.memoizedState=t:c1(e,ct.memoizedState,t)},useTransition:function(){var t=gf(Pc)[0],e=In().memoizedState;return[t,e]},useMutableSource:K0,useSyncExternalStore:Q0,useId:l1,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pm(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hd={isMounted:function(t){return(t=t._reactInternals)?Vi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=zt(),r=_r(t),i=ws(s,r);i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,r),e!==null&&(Vn(e,t,r,s),pu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=zt(),r=_r(t),i=ws(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,r),e!==null&&(Vn(e,t,r,s),pu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),s=_r(t),r=ws(n,s);r.tag=2,e!=null&&(r.callback=e),e=yr(t,r,s),e!==null&&(Vn(e,t,s,n),pu(e,t,s))}};function Gv(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Tc(n,s)||!Tc(r,i):!0}function f1(t,e,n){var s=!1,r=Pr,i=e.contextType;return typeof i=="object"&&i!==null?i=Tn(i):(r=Yt(e)?yi:Ot.current,s=e.contextTypes,i=(s=s!=null)?Do(t,r):Pr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hd,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Hv(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Hd.enqueueReplaceState(e,e.state,null)}function gm(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Kp(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Tn(i):(i=Yt(e)?yi:Ot.current,r.context=Do(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pm(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Hd.enqueueReplaceState(r,r.state,null),Zu(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Mo(t,e){try{var n="",s=e;do n+=Tb(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function yf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ym(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Qk=typeof WeakMap=="function"?WeakMap:Map;function m1(t,e,n){n=ws(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){rd||(rd=!0,Sm=s),ym(t,e)},n}function p1(t,e,n){n=ws(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){ym(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ym(t,e),typeof s!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Kv(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new Qk;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=lS.bind(null,t,e,n),e.then(t,t))}function Qv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yv(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ws(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var Yk=Ns.ReactCurrentOwner,Ht=!1;function Lt(t,e,n,s){e.child=t===null?q0(e,null,n,s):Vo(e,t.child,n,s)}function Xv(t,e,n,s,r){n=n.render;var i=e.ref;return ko(e,r),s=Zp(t,e,n,s,i,r),n=eg(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,bs(t,e,r)):(Le&&n&&Up(e),e.flags|=1,Lt(t,e,s,r),e.child)}function Jv(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!ug(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,g1(t,e,i,s,r)):(t=Eu(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Tc,n(o,s)&&t.ref===e.ref)return bs(t,e,r)}return e.flags|=1,t=wr(i,s),t.ref=e.ref,t.return=e,e.child=t}function g1(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Tc(i,s)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,bs(t,e,r)}return vm(t,e,n,s,r)}function y1(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(wo,tn),tn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(wo,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,De(wo,tn),tn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,De(wo,tn),tn|=s;return Lt(t,e,r,n),e.child}function v1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vm(t,e,n,s,r){var i=Yt(n)?yi:Ot.current;return i=Do(e,i),ko(e,r),n=Zp(t,e,n,s,i,r),s=eg(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,bs(t,e,r)):(Le&&s&&Up(e),e.flags|=1,Lt(t,e,n,r),e.child)}function Zv(t,e,n,s,r){if(Yt(n)){var i=!0;Ku(e)}else i=!1;if(ko(e,r),e.stateNode===null)vu(t,e),f1(e,n,s),gm(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tn(d):(d=Yt(n)?yi:Ot.current,d=Do(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||c!==d)&&Hv(e,o,s,d),tr=!1;var g=e.memoizedState;o.state=g,Zu(e,s,o,r),c=e.memoizedState,a!==s||g!==c||Qt.current||tr?(typeof f=="function"&&(pm(e,n,f,s),c=e.memoizedState),(a=tr||Gv(e,n,a,s,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=d,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,G0(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Pn(e.type,a),o.props=d,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Tn(c):(c=Yt(n)?yi:Ot.current,c=Do(e,c));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==c)&&Hv(e,o,s,c),tr=!1,g=e.memoizedState,o.state=g,Zu(e,s,o,r);var k=e.memoizedState;a!==m||g!==k||Qt.current||tr?(typeof T=="function"&&(pm(e,n,T,s),k=e.memoizedState),(d=tr||Gv(e,n,d,s,g,k,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,k,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=k),o.props=s,o.state=k,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return _m(t,e,n,s,i,r)}function _m(t,e,n,s,r,i){v1(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Lv(e,n,!1),bs(t,e,i);s=e.stateNode,Yk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Vo(e,t.child,null,i),e.child=Vo(e,null,a,i)):Lt(t,e,a,i),e.memoizedState=s.state,r&&Lv(e,n,!0),e.child}function _1(t){var e=t.stateNode;e.pendingContext?Mv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mv(t,e.context,!1),Qp(t,e.containerInfo)}function e_(t,e,n,s,r){return jo(),$p(r),e.flags|=256,Lt(t,e,n,s),e.child}var wm={dehydrated:null,treeContext:null,retryLane:0};function Em(t){return{baseLanes:t,cachePool:null,transitions:null}}function w1(t,e,n){var s=e.pendingProps,r=Ue.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),De(Ue,r&1),t===null)return fm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Yd(o,s,0,null),t=fi(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Em(n),e.memoizedState=wm,t):sg(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Xk(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=wr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=wr(a,i):(i=fi(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?Em(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=wm,s}return i=t.child,t=i.sibling,s=wr(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function sg(t,e){return e=Yd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kl(t,e,n,s){return s!==null&&$p(s),Vo(e,t.child,null,n),t=sg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xk(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=yf(Error(G(422))),Kl(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Yd({mode:"visible",children:s.children},r,0,null),i=fi(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Vo(e,t.child,null,o),e.child.memoizedState=Em(o),e.memoizedState=wm,i);if(!(e.mode&1))return Kl(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(G(419)),s=yf(i,s,void 0),Kl(t,e,o,s)}if(a=(o&t.childLanes)!==0,Ht||a){if(s=mt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,xs(t,r),Vn(s,t,r,-1))}return lg(),s=yf(Error(G(421))),Kl(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=uS.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,on=gr(r.nextSibling),cn=e,Le=!0,Rn=null,t!==null&&(gn[yn++]=ms,gn[yn++]=ps,gn[yn++]=vi,ms=t.id,ps=t.overflow,vi=e),e=sg(e,s.children),e.flags|=4096,e)}function t_(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),mm(t.return,e,n)}function vf(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function E1(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Lt(t,e,s.children,n),s=Ue.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t_(t,n,e);else if(t.tag===19)t_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(De(Ue,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ed(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),vf(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ed(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}vf(e,!0,n,null,i);break;case"together":vf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jk(t,e,n){switch(e.tag){case 3:_1(e),jo();break;case 5:H0(e);break;case 1:Yt(e.type)&&Ku(e);break;case 4:Qp(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;De(Xu,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(De(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?w1(t,e,n):(De(Ue,Ue.current&1),t=bs(t,e,n),t!==null?t.sibling:null);De(Ue,Ue.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return E1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),De(Ue,Ue.current),s)break;return null;case 22:case 23:return e.lanes=0,y1(t,e,n)}return bs(t,e,n)}var T1,Tm,I1,x1;T1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tm=function(){};I1=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,li(Zn.current);var i=null;switch(n){case"input":r=qf(t,r),s=qf(t,s),i=[];break;case"select":r=Ge({},r,{value:void 0}),s=Ge({},s,{value:void 0}),i=[];break;case"textarea":r=Hf(t,r),s=Hf(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Gu)}Qf(n,s);var o;n=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var a=r[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(pc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(a=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(pc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ve("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};x1=function(t,e,n,s){n!==s&&(e.flags|=4)};function Ca(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function Zk(t,e,n){var s=e.pendingProps;switch(Bp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Yt(e.type)&&Hu(),At(e),null;case 3:return s=e.stateNode,Oo(),Oe(Qt),Oe(Ot),Xp(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Gl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rn!==null&&(Nm(Rn),Rn=null))),Tm(t,e),At(e),null;case 5:Yp(e);var r=li(Sc.current);if(n=e.type,t!==null&&e.stateNode!=null)I1(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(G(166));return At(e),null}if(t=li(Zn.current),Gl(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Gn]=e,s[bc]=i,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(r=0;r<Ba.length;r++)Ve(Ba[r],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":uv(s,i),Ve("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",s);break;case"textarea":hv(s,i),Ve("invalid",s)}Qf(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Wl(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Wl(s.textContent,a,t),r=["children",""+a]):pc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ve("scroll",s)}switch(n){case"input":Ml(s),dv(s,i,!0);break;case"textarea":Ml(s),fv(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Gu)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=J2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Gn]=e,t[bc]=s,T1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yf(n,s),n){case"dialog":Ve("cancel",t),Ve("close",t),r=s;break;case"iframe":case"object":case"embed":Ve("load",t),r=s;break;case"video":case"audio":for(r=0;r<Ba.length;r++)Ve(Ba[r],t);r=s;break;case"source":Ve("error",t),r=s;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),r=s;break;case"details":Ve("toggle",t),r=s;break;case"input":uv(t,s),r=qf(t,s),Ve("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ge({},s,{value:void 0}),Ve("invalid",t);break;case"textarea":hv(t,s),r=Hf(t,s),Ve("invalid",t);break;default:r=s}Qf(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?t0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Z2(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&gc(t,c):typeof c=="number"&&gc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(pc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ve("scroll",t):c!=null&&Sp(t,i,c,o))}switch(n){case"input":Ml(t),dv(t,s,!1);break;case"textarea":Ml(t),fv(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Ar(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?To(t,!!s.multiple,i,!1):s.defaultValue!=null&&To(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Gu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)x1(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(G(166));if(n=li(Sc.current),li(Zn.current),Gl(e)){if(s=e.stateNode,n=e.memoizedProps,s[Gn]=e,(i=s.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:Wl(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wl(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Gn]=e,e.stateNode=s}return At(e),null;case 13:if(Oe(Ue),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&on!==null&&e.mode&1&&!(e.flags&128))B0(),jo(),e.flags|=98560,i=!1;else if(i=Gl(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Gn]=e}else jo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else Rn!==null&&(Nm(Rn),Rn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?lt===0&&(lt=3):lg())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return Oo(),Tm(t,e),t===null&&Ic(e.stateNode.containerInfo),At(e),null;case 10:return Gp(e.type._context),At(e),null;case 17:return Yt(e.type)&&Hu(),At(e),null;case 19:if(Oe(Ue),i=e.memoizedState,i===null)return At(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Ca(i,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ed(t),o!==null){for(e.flags|=128,Ca(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(Ue,Ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&Je()>Lo&&(e.flags|=128,s=!0,Ca(i,!1),e.lanes=4194304)}else{if(!s)if(t=ed(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ca(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Le)return At(e),null}else 2*Je()-i.renderingStartTime>Lo&&n!==1073741824&&(e.flags|=128,s=!0,Ca(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Je(),e.sibling=null,n=Ue.current,De(Ue,s?n&1|2:n&1),e):(At(e),null);case 22:case 23:return cg(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?tn&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function eS(t,e){switch(Bp(e),e.tag){case 1:return Yt(e.type)&&Hu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oo(),Oe(Qt),Oe(Ot),Xp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yp(e),null;case 13:if(Oe(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));jo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Ue),null;case 4:return Oo(),null;case 10:return Gp(e.type._context),null;case 22:case 23:return cg(),null;case 24:return null;default:return null}}var Ql=!1,Rt=!1,tS=typeof WeakSet=="function"?WeakSet:Set,J=null;function _o(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ke(t,e,s)}else n.current=null}function Im(t,e,n){try{n()}catch(s){Ke(t,e,s)}}var n_=!1;function nS(t,e){if(om=$u,t=P0(),zp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var T;m!==n||r!==0&&m.nodeType!==3||(a=o+r),m!==i||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(T=m.firstChild)!==null;)g=m,m=T;for(;;){if(m===t)break t;if(g===n&&++d===r&&(a=o),g===i&&++f===s&&(c=o),(T=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=T}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(am={focusedElem:t,selectionRange:n},$u=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var A=k.memoizedProps,C=k.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?A:Pn(e.type,A),C);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(R){Ke(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return k=n_,n_=!1,k}function nc(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Im(e,n,i)}r=r.next}while(r!==s)}}function Kd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function xm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function b1(t){var e=t.alternate;e!==null&&(t.alternate=null,b1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gn],delete e[bc],delete e[um],delete e[Lk],delete e[Fk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function k1(t){return t.tag===5||t.tag===3||t.tag===4}function s_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||k1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gu));else if(s!==4&&(t=t.child,t!==null))for(bm(t,e,n),t=t.sibling;t!==null;)bm(t,e,n),t=t.sibling}function km(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(km(t,e,n),t=t.sibling;t!==null;)km(t,e,n),t=t.sibling}var vt=null,Nn=!1;function Ks(t,e,n){for(n=n.child;n!==null;)S1(t,e,n),n=n.sibling}function S1(t,e,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(zd,n)}catch{}switch(n.tag){case 5:Rt||_o(n,e);case 6:var s=vt,r=Nn;vt=null,Ks(t,e,n),vt=s,Nn=r,vt!==null&&(Nn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(Nn?(t=vt,n=n.stateNode,t.nodeType===8?df(t.parentNode,n):t.nodeType===1&&df(t,n),wc(t)):df(vt,n.stateNode));break;case 4:s=vt,r=Nn,vt=n.stateNode.containerInfo,Nn=!0,Ks(t,e,n),vt=s,Nn=r;break;case 0:case 11:case 14:case 15:if(!Rt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Im(n,e,o),r=r.next}while(r!==s)}Ks(t,e,n);break;case 1:if(!Rt&&(_o(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Ke(n,e,a)}Ks(t,e,n);break;case 21:Ks(t,e,n);break;case 22:n.mode&1?(Rt=(s=Rt)||n.memoizedState!==null,Ks(t,e,n),Rt=s):Ks(t,e,n);break;default:Ks(t,e,n)}}function r_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tS),e.forEach(function(s){var r=dS.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function An(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,Nn=!1;break e;case 3:vt=a.stateNode.containerInfo,Nn=!0;break e;case 4:vt=a.stateNode.containerInfo,Nn=!0;break e}a=a.return}if(vt===null)throw Error(G(160));S1(i,o,r),vt=null,Nn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ke(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)A1(e,t),e=e.sibling}function A1(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(An(e,t),$n(t),s&4){try{nc(3,t,t.return),Kd(3,t)}catch(A){Ke(t,t.return,A)}try{nc(5,t,t.return)}catch(A){Ke(t,t.return,A)}}break;case 1:An(e,t),$n(t),s&512&&n!==null&&_o(n,n.return);break;case 5:if(An(e,t),$n(t),s&512&&n!==null&&_o(n,n.return),t.flags&32){var r=t.stateNode;try{gc(r,"")}catch(A){Ke(t,t.return,A)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Y2(r,i),Yf(a,o);var d=Yf(a,i);for(o=0;o<c.length;o+=2){var f=c[o],m=c[o+1];f==="style"?t0(r,m):f==="dangerouslySetInnerHTML"?Z2(r,m):f==="children"?gc(r,m):Sp(r,f,m,d)}switch(a){case"input":Wf(r,i);break;case"textarea":X2(r,i);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?To(r,!!i.multiple,T,!1):g!==!!i.multiple&&(i.defaultValue!=null?To(r,!!i.multiple,i.defaultValue,!0):To(r,!!i.multiple,i.multiple?[]:"",!1))}r[bc]=i}catch(A){Ke(t,t.return,A)}}break;case 6:if(An(e,t),$n(t),s&4){if(t.stateNode===null)throw Error(G(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(A){Ke(t,t.return,A)}}break;case 3:if(An(e,t),$n(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{wc(e.containerInfo)}catch(A){Ke(t,t.return,A)}break;case 4:An(e,t),$n(t);break;case 13:An(e,t),$n(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(og=Je())),s&4&&r_(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Rt=(d=Rt)||f,An(e,t),Rt=d):An(e,t),$n(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(J=t,f=t.child;f!==null;){for(m=J=f;J!==null;){switch(g=J,T=g.child,g.tag){case 0:case 11:case 14:case 15:nc(4,g,g.return);break;case 1:_o(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){s=g,n=g.return;try{e=s,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(A){Ke(s,n,A)}}break;case 5:_o(g,g.return);break;case 22:if(g.memoizedState!==null){o_(m);continue}}T!==null?(T.return=g,J=T):o_(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{r=m.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=e0("display",o))}catch(A){Ke(t,t.return,A)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(A){Ke(t,t.return,A)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:An(e,t),$n(t),s&4&&r_(t);break;case 21:break;default:An(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(k1(n)){var s=n;break e}n=n.return}throw Error(G(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(gc(r,""),s.flags&=-33);var i=s_(t);km(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=s_(t);bm(t,a,o);break;default:throw Error(G(161))}}catch(c){Ke(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sS(t,e,n){J=t,P1(t)}function P1(t,e,n){for(var s=(t.mode&1)!==0;J!==null;){var r=J,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Ql;if(!o){var a=r.alternate,c=a!==null&&a.memoizedState!==null||Rt;a=Ql;var d=Rt;if(Ql=o,(Rt=c)&&!d)for(J=r;J!==null;)o=J,c=o.child,o.tag===22&&o.memoizedState!==null?a_(r):c!==null?(c.return=o,J=c):a_(r);for(;i!==null;)J=i,P1(i),i=i.sibling;J=r,Ql=a,Rt=d}i_(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,J=i):i_(t)}}function i_(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||Kd(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Rt)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$v(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$v(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&wc(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Rt||e.flags&512&&xm(e)}catch(g){Ke(e,e.return,g)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function o_(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function a_(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kd(4,e)}catch(c){Ke(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Ke(e,r,c)}}var i=e.return;try{xm(e)}catch(c){Ke(e,i,c)}break;case 5:var o=e.return;try{xm(e)}catch(c){Ke(e,o,c)}}}catch(c){Ke(e,e.return,c)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var rS=Math.ceil,sd=Ns.ReactCurrentDispatcher,rg=Ns.ReactCurrentOwner,wn=Ns.ReactCurrentBatchConfig,xe=0,mt=null,tt=null,Et=0,tn=0,wo=Or(0),lt=0,Cc=null,wi=0,Qd=0,ig=0,sc=null,Gt=null,og=0,Lo=1/0,us=null,rd=!1,Sm=null,vr=null,Yl=!1,ur=null,id=0,rc=0,Am=null,_u=-1,wu=0;function zt(){return xe&6?Je():_u!==-1?_u:_u=Je()}function _r(t){return t.mode&1?xe&2&&Et!==0?Et&-Et:Uk.transition!==null?(wu===0&&(wu=f0()),wu):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:w0(t.type)),t):1}function Vn(t,e,n,s){if(50<rc)throw rc=0,Am=null,Error(G(185));Zc(t,n,s),(!(xe&2)||t!==mt)&&(t===mt&&(!(xe&2)&&(Qd|=n),lt===4&&sr(t,Et)),Xt(t,s),n===1&&xe===0&&!(e.mode&1)&&(Lo=Je()+500,Wd&&Mr()))}function Xt(t,e){var n=t.callbackNode;Ub(t,e);var s=Bu(t,t===mt?Et:0);if(s===0)n!==null&&gv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&gv(n),e===1)t.tag===0?zk(c_.bind(null,t)):F0(c_.bind(null,t)),Ok(function(){!(xe&6)&&Mr()}),n=null;else{switch(m0(s)){case 1:n=Rp;break;case 4:n=d0;break;case 16:n=Uu;break;case 536870912:n=h0;break;default:n=Uu}n=M1(n,N1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function N1(t,e){if(_u=-1,wu=0,xe&6)throw Error(G(327));var n=t.callbackNode;if(So()&&t.callbackNode!==n)return null;var s=Bu(t,t===mt?Et:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=od(t,s);else{e=s;var r=xe;xe|=2;var i=R1();(mt!==t||Et!==e)&&(us=null,Lo=Je()+500,hi(t,e));do try{aS();break}catch(a){C1(t,a)}while(!0);Wp(),sd.current=i,xe=r,tt!==null?e=0:(mt=null,Et=0,e=lt)}if(e!==0){if(e===2&&(r=tm(t),r!==0&&(s=r,e=Pm(t,r))),e===1)throw n=Cc,hi(t,0),sr(t,s),Xt(t,Je()),n;if(e===6)sr(t,s);else{if(r=t.current.alternate,!(s&30)&&!iS(r)&&(e=od(t,s),e===2&&(i=tm(t),i!==0&&(s=i,e=Pm(t,i))),e===1))throw n=Cc,hi(t,0),sr(t,s),Xt(t,Je()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(G(345));case 2:Zr(t,Gt,us);break;case 3:if(sr(t,s),(s&130023424)===s&&(e=og+500-Je(),10<e)){if(Bu(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){zt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=lm(Zr.bind(null,t,Gt,us),e);break}Zr(t,Gt,us);break;case 4:if(sr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-jn(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*rS(s/1960))-s,10<s){t.timeoutHandle=lm(Zr.bind(null,t,Gt,us),s);break}Zr(t,Gt,us);break;case 5:Zr(t,Gt,us);break;default:throw Error(G(329))}}}return Xt(t,Je()),t.callbackNode===n?N1.bind(null,t):null}function Pm(t,e){var n=sc;return t.current.memoizedState.isDehydrated&&(hi(t,e).flags|=256),t=od(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&Nm(e)),t}function Nm(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function iS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!On(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~ig,e&=~Qd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jn(e),s=1<<n;t[n]=-1,e&=~s}}function c_(t){if(xe&6)throw Error(G(327));So();var e=Bu(t,0);if(!(e&1))return Xt(t,Je()),null;var n=od(t,e);if(t.tag!==0&&n===2){var s=tm(t);s!==0&&(e=s,n=Pm(t,s))}if(n===1)throw n=Cc,hi(t,0),sr(t,e),Xt(t,Je()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zr(t,Gt,us),Xt(t,Je()),null}function ag(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Lo=Je()+500,Wd&&Mr())}}function Ei(t){ur!==null&&ur.tag===0&&!(xe&6)&&So();var e=xe;xe|=1;var n=wn.transition,s=Pe;try{if(wn.transition=null,Pe=1,t)return t()}finally{Pe=s,wn.transition=n,xe=e,!(xe&6)&&Mr()}}function cg(){tn=wo.current,Oe(wo)}function hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Vk(n)),tt!==null)for(n=tt.return;n!==null;){var s=n;switch(Bp(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Hu();break;case 3:Oo(),Oe(Qt),Oe(Ot),Xp();break;case 5:Yp(s);break;case 4:Oo();break;case 13:Oe(Ue);break;case 19:Oe(Ue);break;case 10:Gp(s.type._context);break;case 22:case 23:cg()}n=n.return}if(mt=t,tt=t=wr(t.current,null),Et=tn=e,lt=0,Cc=null,ig=Qd=wi=0,Gt=sc=null,ci!==null){for(e=0;e<ci.length;e++)if(n=ci[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}ci=null}return t}function C1(t,e){do{var n=tt;try{if(Wp(),gu.current=nd,td){for(var s=$e.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}td=!1}if(_i=0,ft=ct=$e=null,tc=!1,Ac=0,rg.current=null,n===null||n.return===null){lt=1,Cc=e,tt=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Et,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=Qv(o);if(T!==null){T.flags&=-257,Yv(T,o,a,i,e),T.mode&1&&Kv(i,d,e),e=T,c=d;var k=e.updateQueue;if(k===null){var A=new Set;A.add(c),e.updateQueue=A}else k.add(c);break e}else{if(!(e&1)){Kv(i,d,e),lg();break e}c=Error(G(426))}}else if(Le&&a.mode&1){var C=Qv(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Yv(C,o,a,i,e),$p(Mo(c,a));break e}}i=c=Mo(c,a),lt!==4&&(lt=2),sc===null?sc=[i]:sc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=m1(i,c,e);Bv(i,x);break e;case 1:a=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(vr===null||!vr.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=p1(i,a,e);Bv(i,R);break e}}i=i.return}while(i!==null)}j1(n)}catch(L){e=L,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function R1(){var t=sd.current;return sd.current=nd,t===null?nd:t}function lg(){(lt===0||lt===3||lt===2)&&(lt=4),mt===null||!(wi&268435455)&&!(Qd&268435455)||sr(mt,Et)}function od(t,e){var n=xe;xe|=2;var s=R1();(mt!==t||Et!==e)&&(us=null,hi(t,e));do try{oS();break}catch(r){C1(t,r)}while(!0);if(Wp(),xe=n,sd.current=s,tt!==null)throw Error(G(261));return mt=null,Et=0,lt}function oS(){for(;tt!==null;)D1(tt)}function aS(){for(;tt!==null&&!Rb();)D1(tt)}function D1(t){var e=O1(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?j1(t):tt=e,rg.current=null}function j1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eS(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,tt=null;return}}else if(n=Zk(n,e,tn),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);lt===0&&(lt=5)}function Zr(t,e,n){var s=Pe,r=wn.transition;try{wn.transition=null,Pe=1,cS(t,e,n,s)}finally{wn.transition=r,Pe=s}return null}function cS(t,e,n,s){do So();while(ur!==null);if(xe&6)throw Error(G(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Bb(t,i),t===mt&&(tt=mt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yl||(Yl=!0,M1(Uu,function(){return So(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=wn.transition,wn.transition=null;var o=Pe;Pe=1;var a=xe;xe|=4,rg.current=null,nS(t,n),A1(n,t),Ak(am),$u=!!om,am=om=null,t.current=n,sS(n),Db(),xe=a,Pe=o,wn.transition=i}else t.current=n;if(Yl&&(Yl=!1,ur=t,id=r),i=t.pendingLanes,i===0&&(vr=null),Ob(n.stateNode),Xt(t,Je()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(rd)throw rd=!1,t=Sm,Sm=null,t;return id&1&&t.tag!==0&&So(),i=t.pendingLanes,i&1?t===Am?rc++:(rc=0,Am=t):rc=0,Mr(),null}function So(){if(ur!==null){var t=m0(id),e=wn.transition,n=Pe;try{if(wn.transition=null,Pe=16>t?16:t,ur===null)var s=!1;else{if(t=ur,ur=null,id=0,xe&6)throw Error(G(331));var r=xe;for(xe|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(J=d;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:nc(8,f,i)}var m=f.child;if(m!==null)m.return=f,J=m;else for(;J!==null;){f=J;var g=f.sibling,T=f.return;if(b1(f),f===d){J=null;break}if(g!==null){g.return=T,J=g;break}J=T}}}var k=i.alternate;if(k!==null){var A=k.child;if(A!==null){k.child=null;do{var C=A.sibling;A.sibling=null,A=C}while(A!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:nc(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,J=x;break e}J=i.return}}var v=t.current;for(J=v;J!==null;){o=J;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,J=b;else e:for(o=v;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kd(9,a)}}catch(L){Ke(a,a.return,L)}if(a===o){J=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,J=R;break e}J=a.return}}if(xe=r,Mr(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(zd,t)}catch{}s=!0}return s}finally{Pe=n,wn.transition=e}}return!1}function l_(t,e,n){e=Mo(n,e),e=m1(t,e,1),t=yr(t,e,1),e=zt(),t!==null&&(Zc(t,1,e),Xt(t,e))}function Ke(t,e,n){if(t.tag===3)l_(t,t,n);else for(;e!==null;){if(e.tag===3){l_(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(vr===null||!vr.has(s))){t=Mo(n,t),t=p1(e,t,1),e=yr(e,t,1),t=zt(),e!==null&&(Zc(e,1,t),Xt(e,t));break}}e=e.return}}function lS(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(Et&n)===n&&(lt===4||lt===3&&(Et&130023424)===Et&&500>Je()-og?hi(t,0):ig|=n),Xt(t,e)}function V1(t,e){e===0&&(t.mode&1?(e=zl,zl<<=1,!(zl&130023424)&&(zl=4194304)):e=1);var n=zt();t=xs(t,e),t!==null&&(Zc(t,e,n),Xt(t,n))}function uS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),V1(t,n)}function dS(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(G(314))}s!==null&&s.delete(e),V1(t,n)}var O1;O1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,Jk(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,Le&&e.flags&1048576&&z0(e,Yu,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;vu(t,e),t=e.pendingProps;var r=Do(e,Ot.current);ko(e,n),r=Zp(null,e,s,t,r,n);var i=eg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(s)?(i=!0,Ku(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Kp(e),r.updater=Hd,e.stateNode=r,r._reactInternals=e,gm(e,s,t,n),e=_m(null,e,s,!0,i,n)):(e.tag=0,Le&&i&&Up(e),Lt(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(vu(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=fS(s),t=Pn(s,t),r){case 0:e=vm(null,e,s,t,n);break e;case 1:e=Zv(null,e,s,t,n);break e;case 11:e=Xv(null,e,s,t,n);break e;case 14:e=Jv(null,e,s,Pn(s.type,t),n);break e}throw Error(G(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pn(s,r),vm(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pn(s,r),Zv(t,e,s,r,n);case 3:e:{if(_1(e),t===null)throw Error(G(387));s=e.pendingProps,i=e.memoizedState,r=i.element,G0(t,e),Zu(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Mo(Error(G(423)),e),e=e_(t,e,s,n,r);break e}else if(s!==r){r=Mo(Error(G(424)),e),e=e_(t,e,s,n,r);break e}else for(on=gr(e.stateNode.containerInfo.firstChild),cn=e,Le=!0,Rn=null,n=q0(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jo(),s===r){e=bs(t,e,n);break e}Lt(t,e,s,n)}e=e.child}return e;case 5:return H0(e),t===null&&fm(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,cm(s,r)?o=null:i!==null&&cm(s,i)&&(e.flags|=32),v1(t,e),Lt(t,e,o,n),e.child;case 6:return t===null&&fm(e),null;case 13:return w1(t,e,n);case 4:return Qp(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Vo(e,null,s,n):Lt(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pn(s,r),Xv(t,e,s,r,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,De(Xu,s._currentValue),s._currentValue=o,i!==null)if(On(i.value,o)){if(i.children===r.children&&!Qt.current){e=bs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=ws(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),mm(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),mm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Lt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,ko(e,n),r=Tn(r),s=s(r),e.flags|=1,Lt(t,e,s,n),e.child;case 14:return s=e.type,r=Pn(s,e.pendingProps),r=Pn(s.type,r),Jv(t,e,s,r,n);case 15:return g1(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pn(s,r),vu(t,e),e.tag=1,Yt(s)?(t=!0,Ku(e)):t=!1,ko(e,n),f1(e,s,r),gm(e,s,r,n),_m(null,e,s,!0,t,n);case 19:return E1(t,e,n);case 22:return y1(t,e,n)}throw Error(G(156,e.tag))};function M1(t,e){return u0(t,e)}function hS(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,s){return new hS(t,e,n,s)}function ug(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fS(t){if(typeof t=="function")return ug(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pp)return 11;if(t===Np)return 14}return 2}function wr(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Eu(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")ug(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case lo:return fi(n.children,r,i,e);case Ap:o=8,r|=8;break;case zf:return t=vn(12,n,e,r|2),t.elementType=zf,t.lanes=i,t;case Uf:return t=vn(13,n,e,r),t.elementType=Uf,t.lanes=i,t;case Bf:return t=vn(19,n,e,r),t.elementType=Bf,t.lanes=i,t;case H2:return Yd(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W2:o=10;break e;case G2:o=9;break e;case Pp:o=11;break e;case Np:o=14;break e;case er:o=16,s=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=vn(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function fi(t,e,n,s){return t=vn(7,t,s,e),t.lanes=n,t}function Yd(t,e,n,s){return t=vn(22,t,s,e),t.elementType=H2,t.lanes=n,t.stateNode={isHidden:!1},t}function _f(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function wf(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mS(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zh(0),this.expirationTimes=Zh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zh(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function dg(t,e,n,s,r,i,o,a,c){return t=new mS(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=vn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kp(i),t}function pS(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:co,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function L1(t){if(!t)return Pr;t=t._reactInternals;e:{if(Vi(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Yt(n))return L0(t,n,e)}return e}function F1(t,e,n,s,r,i,o,a,c){return t=dg(n,s,!0,t,r,i,o,a,c),t.context=L1(null),n=t.current,s=zt(),r=_r(n),i=ws(s,r),i.callback=e??null,yr(n,i,r),t.current.lanes=r,Zc(t,r,s),Xt(t,s),t}function Xd(t,e,n,s){var r=e.current,i=zt(),o=_r(r);return n=L1(n),e.context===null?e.context=n:e.pendingContext=n,e=ws(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=yr(r,e,o),t!==null&&(Vn(t,r,o,i),pu(t,r,o)),o}function ad(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function u_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hg(t,e){u_(t,e),(t=t.alternate)&&u_(t,e)}function gS(){return null}var z1=typeof reportError=="function"?reportError:function(t){console.error(t)};function fg(t){this._internalRoot=t}Jd.prototype.render=fg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Xd(t,e,null,null)};Jd.prototype.unmount=fg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ei(function(){Xd(null,t,null,null)}),e[Is]=null}};function Jd(t){this._internalRoot=t}Jd.prototype.unstable_scheduleHydration=function(t){if(t){var e=y0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nr.length&&e!==0&&e<nr[n].priority;n++);nr.splice(n,0,t),n===0&&_0(t)}};function mg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function d_(){}function yS(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=ad(o);i.call(d)}}var o=F1(e,s,t,0,null,!1,!1,"",d_);return t._reactRootContainer=o,t[Is]=o.current,Ic(t.nodeType===8?t.parentNode:t),Ei(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var d=ad(c);a.call(d)}}var c=dg(t,0,!1,null,null,!1,!1,"",d_);return t._reactRootContainer=c,t[Is]=c.current,Ic(t.nodeType===8?t.parentNode:t),Ei(function(){Xd(e,c,n,s)}),c}function eh(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var c=ad(o);a.call(c)}}Xd(e,o,t,r)}else o=yS(n,e,t,r,s);return ad(o)}p0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ua(e.pendingLanes);n!==0&&(Dp(e,n|1),Xt(e,Je()),!(xe&6)&&(Lo=Je()+500,Mr()))}break;case 13:Ei(function(){var s=xs(t,1);if(s!==null){var r=zt();Vn(s,t,1,r)}}),hg(t,1)}};jp=function(t){if(t.tag===13){var e=xs(t,134217728);if(e!==null){var n=zt();Vn(e,t,134217728,n)}hg(t,134217728)}};g0=function(t){if(t.tag===13){var e=_r(t),n=xs(t,e);if(n!==null){var s=zt();Vn(n,t,e,s)}hg(t,e)}};y0=function(){return Pe};v0=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};Jf=function(t,e,n){switch(e){case"input":if(Wf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=qd(s);if(!r)throw Error(G(90));Q2(s),Wf(s,r)}}}break;case"textarea":X2(t,n);break;case"select":e=n.value,e!=null&&To(t,!!n.multiple,e,!1)}};r0=ag;i0=Ei;var vS={usingClientEntryPoint:!1,Events:[tl,mo,qd,n0,s0,ag]},Ra={findFiberByHostInstance:ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_S={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||gS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{zd=Xl.inject(_S),Jn=Xl}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vS;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mg(e))throw Error(G(200));return pS(t,e,null,n)};dn.createRoot=function(t,e){if(!mg(t))throw Error(G(299));var n=!1,s="",r=z1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=dg(t,1,!1,null,null,n,!1,s,r),t[Is]=e.current,Ic(t.nodeType===8?t.parentNode:t),new fg(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=c0(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return Ei(t)};dn.hydrate=function(t,e,n){if(!Zd(e))throw Error(G(200));return eh(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!mg(t))throw Error(G(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=z1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=F1(e,null,t,1,n??null,r,!1,i,o),t[Is]=e.current,Ic(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Jd(e)};dn.render=function(t,e,n){if(!Zd(e))throw Error(G(200));return eh(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!Zd(t))throw Error(G(40));return t._reactRootContainer?(Ei(function(){eh(null,null,t,!1,function(){t._reactRootContainer=null,t[Is]=null})}),!0):!1};dn.unstable_batchedUpdates=ag;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Zd(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return eh(t,e,n,!1,s)};dn.version="18.3.1-next-f1338f8080-20240426";function U1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U1)}catch(t){console.error(t)}}U1(),U2.exports=dn;var wS=U2.exports,h_=wS;Lf.createRoot=h_.createRoot,Lf.hydrateRoot=h_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rc(){return Rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Rc.apply(this,arguments)}var dr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dr||(dr={}));const f_="popstate";function ES(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:o,hash:a}=s.location;return Cm("",{pathname:i,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:cd(r)}return IS(e,n,null,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function B1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TS(){return Math.random().toString(36).substr(2,8)}function m_(t,e){return{usr:t.state,key:t.key,idx:e}}function Cm(t,e,n,s){return n===void 0&&(n=null),Rc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?sa(e):e,{state:n,key:e&&e.key||s||TS()})}function cd(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function sa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function IS(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,a=dr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(Rc({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){a=dr.Pop;let C=f(),x=C==null?null:C-d;d=C,c&&c({action:a,location:A.location,delta:x})}function g(C,x){a=dr.Push;let v=Cm(A.location,C,x);d=f()+1;let b=m_(v,d),R=A.createHref(v);try{o.pushState(b,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(R)}i&&c&&c({action:a,location:A.location,delta:1})}function T(C,x){a=dr.Replace;let v=Cm(A.location,C,x);d=f();let b=m_(v,d),R=A.createHref(v);o.replaceState(b,"",R),i&&c&&c({action:a,location:A.location,delta:0})}function k(C){let x=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof C=="string"?C:cd(C);return v=v.replace(/ $/,"%20"),qe(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let A={get action(){return a},get location(){return t(r,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(f_,m),c=C,()=>{r.removeEventListener(f_,m),c=null}},createHref(C){return e(r,C)},createURL:k,encodeLocation(C){let x=k(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:T,go(C){return o.go(C)}};return A}var p_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(p_||(p_={}));function xS(t,e,n){return n===void 0&&(n="/"),bS(t,e,n)}function bS(t,e,n,s){let r=typeof e=="string"?sa(e):e,i=Fo(r.pathname||"/",n);if(i==null)return null;let o=$1(t);kS(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=MS(i);a=VS(o[c],d)}return a}function $1(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(qe(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Er([s,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),$1(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:DS(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))r(i,o);else for(let c of q1(i.path))r(i,o,c)}),e}function q1(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=q1(s.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function kS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const SS=/^:[\w-]+$/,AS=3,PS=2,NS=1,CS=10,RS=-2,g_=t=>t==="*";function DS(t,e){let n=t.split("/"),s=n.length;return n.some(g_)&&(s+=RS),e&&(s+=PS),n.filter(r=>!g_(r)).reduce((r,i)=>r+(SS.test(i)?AS:i===""?NS:CS),s)}function jS(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function VS(t,e,n){let{routesMeta:s}=t,r={},i="/",o=[];for(let a=0;a<s.length;++a){let c=s[a],d=a===s.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Rm({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!m)return null;Object.assign(r,m.params),o.push({params:r,pathname:Er([i,m.pathname]),pathnameBase:US(Er([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Er([i,m.pathnameBase]))}return o}function Rm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=OS(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce((d,f,m)=>{let{paramName:g,isOptional:T}=f;if(g==="*"){let A=a[m]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const k=a[m];return T&&!k?d[g]=void 0:d[g]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function OS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),B1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(s.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function MS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return B1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Fo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function LS(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?sa(t):t;return{pathname:n?n.startsWith("/")?n:FS(n,e):e,search:BS(s),hash:$S(r)}}function FS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Ef(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pg(t,e){let n=zS(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function gg(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=sa(t):(r=Rc({},t),qe(!r.pathname||!r.pathname.includes("?"),Ef("?","pathname","search",r)),qe(!r.pathname||!r.pathname.includes("#"),Ef("#","pathname","hash",r)),qe(!r.search||!r.search.includes("#"),Ef("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;r.pathname=g.join("/")}a=m>=0?e[m]:"/"}let c=LS(r,a),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Er=t=>t.join("/").replace(/\/\/+/g,"/"),US=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$S=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const W1=["post","put","patch","delete"];new Set(W1);const WS=["get",...W1];new Set(WS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dc(){return Dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Dc.apply(this,arguments)}const th=P.createContext(null),G1=P.createContext(null),Cs=P.createContext(null),nh=P.createContext(null),Rs=P.createContext({outlet:null,matches:[],isDataRoute:!1}),H1=P.createContext(null);function GS(t,e){let{relative:n}=e===void 0?{}:e;ra()||qe(!1);let{basename:s,navigator:r}=P.useContext(Cs),{hash:i,pathname:o,search:a}=rh(t,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:Er([s,o])),r.createHref({pathname:c,search:a,hash:i})}function ra(){return P.useContext(nh)!=null}function ia(){return ra()||qe(!1),P.useContext(nh).location}function K1(t){P.useContext(Cs).static||P.useLayoutEffect(t)}function sh(){let{isDataRoute:t}=P.useContext(Rs);return t?aA():HS()}function HS(){ra()||qe(!1);let t=P.useContext(th),{basename:e,future:n,navigator:s}=P.useContext(Cs),{matches:r}=P.useContext(Rs),{pathname:i}=ia(),o=JSON.stringify(pg(r,n.v7_relativeSplatPath)),a=P.useRef(!1);return K1(()=>{a.current=!0}),P.useCallback(function(d,f){if(f===void 0&&(f={}),!a.current)return;if(typeof d=="number"){s.go(d);return}let m=gg(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Er([e,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[e,s,o,i,t])}const KS=P.createContext(null);function QS(t){let e=P.useContext(Rs).outlet;return e&&P.createElement(KS.Provider,{value:t},e)}function rh(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=P.useContext(Cs),{matches:r}=P.useContext(Rs),{pathname:i}=ia(),o=JSON.stringify(pg(r,s.v7_relativeSplatPath));return P.useMemo(()=>gg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function YS(t,e){return XS(t,e)}function XS(t,e,n,s){ra()||qe(!1);let{navigator:r}=P.useContext(Cs),{matches:i}=P.useContext(Rs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=ia(),f;if(e){var m;let C=typeof e=="string"?sa(e):e;c==="/"||(m=C.pathname)!=null&&m.startsWith(c)||qe(!1),f=C}else f=d;let g=f.pathname||"/",T=g;if(c!=="/"){let C=c.replace(/^\//,"").split("/");T="/"+g.replace(/^\//,"").split("/").slice(C.length).join("/")}let k=xS(t,{pathname:T}),A=nA(k&&k.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:Er([c,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Er([c,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,s);return e&&A?P.createElement(nh.Provider,{value:{location:Dc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:dr.Pop}},A):A}function JS(){let t=oA(),e=qS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:r},n):null,null)}const ZS=P.createElement(JS,null);class eA extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(Rs.Provider,{value:this.props.routeContext},P.createElement(H1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tA(t){let{routeContext:e,match:n,children:s}=t,r=P.useContext(th);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Rs.Provider,{value:e},s)}function nA(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let f=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);f>=0||qe(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:T}=n,k=m.route.loader&&g[m.route.id]===void 0&&(!T||T[m.route.id]===void 0);if(m.route.lazy||k){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let T,k=!1,A=null,C=null;n&&(T=a&&m.route.id?a[m.route.id]:void 0,A=m.route.errorElement||ZS,c&&(d<0&&g===0?(cA("route-fallback"),k=!0,C=null):d===g&&(k=!0,C=m.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),v=()=>{let b;return T?b=A:k?b=C:m.route.Component?b=P.createElement(m.route.Component,null):m.route.element?b=m.route.element:b=f,P.createElement(tA,{match:m,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:b})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?P.createElement(eA,{location:n.location,revalidation:n.revalidation,component:A,error:T,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var Q1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Q1||{}),Y1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Y1||{});function sA(t){let e=P.useContext(th);return e||qe(!1),e}function rA(t){let e=P.useContext(G1);return e||qe(!1),e}function iA(t){let e=P.useContext(Rs);return e||qe(!1),e}function X1(t){let e=iA(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function oA(){var t;let e=P.useContext(H1),n=rA(),s=X1();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function aA(){let{router:t}=sA(Q1.UseNavigateStable),e=X1(Y1.UseNavigateStable),n=P.useRef(!1);return K1(()=>{n.current=!0}),P.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Dc({fromRouteId:e},i)))},[t,e])}const y_={};function cA(t,e,n){y_[t]||(y_[t]=!0)}function lA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ld(t){let{to:e,replace:n,state:s,relative:r}=t;ra()||qe(!1);let{future:i,static:o}=P.useContext(Cs),{matches:a}=P.useContext(Rs),{pathname:c}=ia(),d=sh(),f=gg(e,pg(a,i.v7_relativeSplatPath),c,r==="path"),m=JSON.stringify(f);return P.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:r}),[d,m,r,n,s]),null}function uA(t){return QS(t.context)}function pn(t){qe(!1)}function dA(t){let{basename:e="/",children:n=null,location:s,navigationType:r=dr.Pop,navigator:i,static:o=!1,future:a}=t;ra()&&qe(!1);let c=e.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:c,navigator:i,static:o,future:Dc({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof s=="string"&&(s=sa(s));let{pathname:f="/",search:m="",hash:g="",state:T=null,key:k="default"}=s,A=P.useMemo(()=>{let C=Fo(f,c);return C==null?null:{location:{pathname:C,search:m,hash:g,state:T,key:k},navigationType:r}},[c,f,m,g,T,k,r]);return A==null?null:P.createElement(Cs.Provider,{value:d},P.createElement(nh.Provider,{children:n,value:A}))}function hA(t){let{children:e,location:n}=t;return YS(Dm(e),n)}new Promise(()=>{});function Dm(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(s,r)=>{if(!P.isValidElement(s))return;let i=[...e,r];if(s.type===P.Fragment){n.push.apply(n,Dm(s.props.children,i));return}s.type!==pn&&qe(!1),!s.props.index||!s.props.children||qe(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Dm(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ud(){return ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ud.apply(this,arguments)}function J1(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function fA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mA(t,e){return t.button===0&&(!e||e==="_self")&&!fA(t)}const pA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],yA="6";try{window.__reactRouterVersion=yA}catch{}const vA=P.createContext({isTransitioning:!1}),_A="startTransition",v_=lb[_A];function wA(t){let{basename:e,children:n,future:s,window:r}=t,i=P.useRef();i.current==null&&(i.current=ES({window:r,v5Compat:!0}));let o=i.current,[a,c]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},f=P.useCallback(m=>{d&&v_?v_(()=>c(m)):c(m)},[c,d]);return P.useLayoutEffect(()=>o.listen(f),[o,f]),P.useEffect(()=>lA(s),[s]),P.createElement(dA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:s})}const EA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IA=P.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:o,state:a,target:c,to:d,preventScrollReset:f,viewTransition:m}=e,g=J1(e,pA),{basename:T}=P.useContext(Cs),k,A=!1;if(typeof d=="string"&&TA.test(d)&&(k=d,EA))try{let b=new URL(window.location.href),R=d.startsWith("//")?new URL(b.protocol+d):new URL(d),L=Fo(R.pathname,T);R.origin===b.origin&&L!=null?d=L+R.search+R.hash:A=!0}catch{}let C=GS(d,{relative:r}),x=bA(d,{replace:o,state:a,target:c,preventScrollReset:f,relative:r,viewTransition:m});function v(b){s&&s(b),b.defaultPrevented||x(b)}return P.createElement("a",ud({},g,{href:k||C,onClick:A||i?s:v,ref:n,target:c}))}),Yi=P.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:r=!1,className:i="",end:o=!1,style:a,to:c,viewTransition:d,children:f}=e,m=J1(e,gA),g=rh(c,{relative:m.relative}),T=ia(),k=P.useContext(G1),{navigator:A,basename:C}=P.useContext(Cs),x=k!=null&&kA(g)&&d===!0,v=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,b=T.pathname,R=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;r||(b=b.toLowerCase(),R=R?R.toLowerCase():null,v=v.toLowerCase()),R&&C&&(R=Fo(R,C)||R);const L=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let M=b===v||!o&&b.startsWith(v)&&b.charAt(L)==="/",E=R!=null&&(R===v||!o&&R.startsWith(v)&&R.charAt(v.length)==="/"),y={isActive:M,isPending:E,isTransitioning:x},I=M?s:void 0,w;typeof i=="function"?w=i(y):w=[i,M?"active":null,E?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(y):a;return P.createElement(IA,ud({},m,{"aria-current":I,className:w,ref:n,style:N,to:c,viewTransition:d}),typeof f=="function"?f(y):f)});var jm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jm||(jm={}));var __;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(__||(__={}));function xA(t){let e=P.useContext(th);return e||qe(!1),e}function bA(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,c=sh(),d=ia(),f=rh(t,{relative:o});return P.useCallback(m=>{if(mA(m,n)){m.preventDefault();let g=s!==void 0?s:cd(d)===cd(f);c(t,{replace:g,state:r,preventScrollReset:i,relative:o,viewTransition:a})}},[d,c,f,s,r,n,t,i,o,a])}function kA(t,e){e===void 0&&(e={});let n=P.useContext(vA);n==null&&qe(!1);let{basename:s}=xA(jm.useViewTransitionState),r=rh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Fo(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Fo(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Rm(r.pathname,o)!=null||Rm(r.pathname,i)!=null}const SA=()=>{};var w_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},AA=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},eE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,f=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|d>>6,T=d&63;c||(T=64,o||(g=64)),s.push(n[f],n[m],n[g],n[T])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Z1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||d==null||m==null)throw new PA;const g=i<<2|a>>4;if(s.push(g),d!==64){const T=a<<4&240|d>>2;if(s.push(T),m!==64){const k=d<<6&192|m;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NA=function(t){const e=Z1(t);return eE.encodeByteArray(e,!0)},dd=function(t){return NA(t).replace(/\./g,"")},tE=function(t){try{return eE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=()=>nE().__FIREBASE_DEFAULTS__,RA=()=>{if(typeof process>"u"||typeof w_>"u")return;const t=w_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tE(t[1]);return e&&JSON.parse(e)},ih=()=>{try{return SA()||CA()||RA()||DA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sE=t=>{var e,n;return(n=(e=ih())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},rE=t=>{const e=sE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},iE=()=>{var t;return(t=ih())===null||t===void 0?void 0:t.config},oE=t=>{var e;return(e=ih())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t){return t.endsWith(".cloudworkstations.dev")}async function yg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[dd(JSON.stringify(n)),dd(JSON.stringify(o)),""].join(".")}const ic={};function OA(){const t={prod:[],emulator:[]};for(const e of Object.keys(ic))ic[e]?t.emulator.push(e):t.prod.push(e);return t}function MA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let E_=!1;function vg(t,e){if(typeof window>"u"||typeof document>"u"||!Oi(window.location.host)||ic[t]===e||ic[t]||E_)return;ic[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=OA().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,T){g.setAttribute("width","24"),g.setAttribute("id",T),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{E_=!0,o()},g}function f(g,T){g.setAttribute("id",T),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=MA(s),T=n("text"),k=document.getElementById(T)||document.createElement("span"),A=n("learnmore"),C=document.getElementById(A)||document.createElement("a"),x=n("preprendIcon"),v=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const b=g.element;a(b),f(C,A);const R=d();c(v,x),b.append(v,k,C,R),document.body.appendChild(b)}i?(k.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function aE(){var t;const e=(t=ih())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BA(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cE(){return!aE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lE(){return!aE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function uE(){try{return typeof indexedDB=="object"}catch{return!1}}function $A(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="FirebaseError";class Ds extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=qA,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sl.prototype.create)}}class sl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?WA(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ds(r,a,s)}}function WA(t,e){return t.replace(GA,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const GA=/\{\$([^}]+)}/g;function HA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ti(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(T_(i)&&T_(o)){if(!Ti(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function T_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function $a(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function qa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function KA(t,e){const n=new QA(t,e);return n.subscribe.bind(n)}class QA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");YA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Tf),r.error===void 0&&(r.error=Tf),r.complete===void 0&&(r.complete=Tf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class Nr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new jA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZA(e))try{this.getOrInitializeService({instanceIdentifier:ei})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ei){return this.instances.has(e)}getOptions(e=ei){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:JA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ei){return this.component?this.component.multipleInstances?e:ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JA(t){return t===ei?void 0:t}function ZA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const tP={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},nP=_e.INFO,sP={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},rP=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=sP[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _g{constructor(e){this.name=e,this._logLevel=nP,this._logHandler=rP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const iP=(t,e)=>e.some(n=>t instanceof n);let I_,x_;function oP(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aP(){return x_||(x_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dE=new WeakMap,Vm=new WeakMap,hE=new WeakMap,If=new WeakMap,wg=new WeakMap;function cP(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Tr(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dE.set(n,t)}).catch(()=>{}),wg.set(e,t),e}function lP(t){if(Vm.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Vm.set(t,e)}let Om={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uP(t){Om=t(Om)}function dP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(xf(this),e,...n);return hE.set(s,e.sort?e.sort():[e]),Tr(s)}:aP().includes(t)?function(...e){return t.apply(xf(this),e),Tr(dE.get(this))}:function(...e){return Tr(t.apply(xf(this),e))}}function hP(t){return typeof t=="function"?dP(t):(t instanceof IDBTransaction&&lP(t),iP(t,oP())?new Proxy(t,Om):t)}function Tr(t){if(t instanceof IDBRequest)return cP(t);if(If.has(t))return If.get(t);const e=hP(t);return e!==t&&(If.set(t,e),wg.set(e,t)),e}const xf=t=>wg.get(t);function fP(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Tr(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Tr(o.result),c.oldVersion,c.newVersion,Tr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const mP=["get","getKey","getAll","getAllKeys","count"],pP=["put","add","delete","clear"],bf=new Map;function b_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bf.get(e))return bf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=pP.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||mP.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),r&&c.done]))[0]};return bf.set(e,i),i}uP(t=>({...t,get:(e,n,s)=>b_(e,n)||t.get(e,n,s),has:(e,n)=>!!b_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yP(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function yP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mm="@firebase/app",k_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new _g("@firebase/app"),vP="@firebase/app-compat",_P="@firebase/analytics-compat",wP="@firebase/analytics",EP="@firebase/app-check-compat",TP="@firebase/app-check",IP="@firebase/auth",xP="@firebase/auth-compat",bP="@firebase/database",kP="@firebase/data-connect",SP="@firebase/database-compat",AP="@firebase/functions",PP="@firebase/functions-compat",NP="@firebase/installations",CP="@firebase/installations-compat",RP="@firebase/messaging",DP="@firebase/messaging-compat",jP="@firebase/performance",VP="@firebase/performance-compat",OP="@firebase/remote-config",MP="@firebase/remote-config-compat",LP="@firebase/storage",FP="@firebase/storage-compat",zP="@firebase/firestore",UP="@firebase/ai",BP="@firebase/firestore-compat",$P="firebase",qP="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="[DEFAULT]",WP={[Mm]:"fire-core",[vP]:"fire-core-compat",[wP]:"fire-analytics",[_P]:"fire-analytics-compat",[TP]:"fire-app-check",[EP]:"fire-app-check-compat",[IP]:"fire-auth",[xP]:"fire-auth-compat",[bP]:"fire-rtdb",[kP]:"fire-data-connect",[SP]:"fire-rtdb-compat",[AP]:"fire-fn",[PP]:"fire-fn-compat",[NP]:"fire-iid",[CP]:"fire-iid-compat",[RP]:"fire-fcm",[DP]:"fire-fcm-compat",[jP]:"fire-perf",[VP]:"fire-perf-compat",[OP]:"fire-rc",[MP]:"fire-rc-compat",[LP]:"fire-gcs",[FP]:"fire-gcs-compat",[zP]:"fire-fst",[BP]:"fire-fst-compat",[UP]:"fire-vertex","fire-js":"fire-js",[$P]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=new Map,GP=new Map,Fm=new Map;function S_(t,e){try{t.container.addComponent(e)}catch(n){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ii(t){const e=t.name;if(Fm.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;Fm.set(e,t);for(const n of hd.values())S_(n,t);for(const n of GP.values())S_(n,t);return!0}function oh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new sl("app","Firebase",HP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=qP;function fE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Lm,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw Ir.create("bad-app-name",{appName:String(r)});if(n||(n=iE()),!n)throw Ir.create("no-options");const i=hd.get(r);if(i){if(Ti(n,i.options)&&Ti(s,i.config))return i;throw Ir.create("duplicate-app",{appName:r})}const o=new eP(r);for(const c of Fm.values())o.addComponent(c);const a=new KP(n,s,o);return hd.set(r,a),a}function Eg(t=Lm){const e=hd.get(t);if(!e&&t===Lm&&iE())return fE();if(!e)throw Ir.create("no-app",{appName:t});return e}function es(t,e,n){var s;let r=(s=WP[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(a.join(" "));return}Ii(new Nr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="firebase-heartbeat-database",YP=1,jc="firebase-heartbeat-store";let kf=null;function mE(){return kf||(kf=fP(QP,YP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),kf}async function XP(t){try{const n=(await mE()).transaction(jc),s=await n.objectStore(jc).get(pE(t));return await n.done,s}catch(e){if(e instanceof Ds)ks.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(n.message)}}}async function A_(t,e){try{const s=(await mE()).transaction(jc,"readwrite");await s.objectStore(jc).put(e,pE(t)),await s.done}catch(n){if(n instanceof Ds)ks.warn(n.message);else{const s=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ks.warn(s.message)}}}function pE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=1024,ZP=30;class eN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nN(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=P_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>ZP){const o=sN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ks.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=P_(),{heartbeatsToSend:s,unsentEntries:r}=tN(this._heartbeatsCache.heartbeats),i=dd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ks.warn(n),""}}}function P_(){return new Date().toISOString().substring(0,10)}function tN(t,e=JP){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),N_(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),N_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class nN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uE()?$A().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return A_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return A_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function N_(t){return dd(JSON.stringify({version:2,heartbeats:t})).length}function sN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){Ii(new Nr("platform-logger",e=>new gP(e),"PRIVATE")),Ii(new Nr("heartbeat",e=>new eN(e),"PRIVATE")),es(Mm,k_,t),es(Mm,k_,"esm2017"),es("fire-js","")}rN("");function Tg(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function gE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iN=gE,yE=new sl("auth","Firebase",gE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new _g("@firebase/auth");function oN(t,...e){fd.logLevel<=_e.WARN&&fd.warn(`Auth (${oa}): ${t}`,...e)}function Tu(t,...e){fd.logLevel<=_e.ERROR&&fd.error(`Auth (${oa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,...e){throw Ig(t,...e)}function ts(t,...e){return Ig(t,...e)}function vE(t,e,n){const s=Object.assign(Object.assign({},iN()),{[e]:n});return new sl("auth","Firebase",s).create(e,{appName:t.name})}function Es(t){return vE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ig(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return yE.create(t,...e)}function ue(t,e,...n){if(!t)throw Ig(e,...n)}function gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tu(e),new Error(e)}function Ss(t,e){t||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aN(){return C_()==="http:"||C_()==="https:"}function C_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aN()||zA()||"connection"in navigator)?navigator.onLine:!0}function lN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ss(n>e,"Short delay should be less than long delay!"),this.isMobile=LA()||UA()}get(){return cN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t,e){Ss(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hN=new il(3e4,6e4);function Lr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fr(t,e,n,s,r={}){return wE(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=rl(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return FA()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Oi(t.emulatorConfig.host)&&(d.credentials="include"),_E.fetch()(await EE(t,t.config.apiHost,n,a),d)})}async function wE(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},uN),e);try{const r=new mN(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Jl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Jl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Jl(t,"user-disabled",o);const f=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw vE(t,f,d);Mn(t,f)}}catch(r){if(r instanceof Ds)throw r;Mn(t,"network-request-failed",{message:String(r)})}}async function ol(t,e,n,s,r={}){const i=await Fr(t,e,n,s,r);return"mfaPendingCredential"in i&&Mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function EE(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?xg(t.config,r):`${t.config.apiScheme}://${r}`;return dN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function fN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ts(this.auth,"network-request-failed")),hN.get())})}}function Jl(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=ts(t,e,s);return r.customData._tokenResponse=n,r}function R_(t){return t!==void 0&&t.enterprise!==void 0}class pN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gN(t,e){return Fr(t,"GET","/v2/recaptchaConfig",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t,e){return Fr(t,"POST","/v1/accounts:delete",e)}async function md(t,e){return Fr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vN(t,e=!1){const n=st(t),s=await n.getIdToken(e),r=bg(s);ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:oc(Sf(r.auth_time)),issuedAtTime:oc(Sf(r.iat)),expirationTime:oc(Sf(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Sf(t){return Number(t)*1e3}function bg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Tu("JWT malformed, contained fewer than 3 sections"),null;try{const r=tE(n);return r?JSON.parse(r):(Tu("Failed to decode base64 JWT payload"),null)}catch(r){return Tu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function D_(t){const e=bg(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ds&&_N(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function _N({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(t){var e;const n=t.auth,s=await t.getIdToken(),r=await Vc(t,md(n,{idToken:s}));ue(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?TE(i.providerUserInfo):[],a=TN(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=c?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Um(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function EN(t){const e=st(t);await pd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TN(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function TE(t){return t.map(e=>{var{providerId:n}=e,s=Tg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e){const n=await wE(t,{},async()=>{const s=rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await EE(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:s};return t.emulatorConfig&&Oi(t.emulatorConfig.host)&&(c.credentials="include"),_E.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xN(t,e){return Fr(t,"POST","/v2/accounts:revokeToken",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=D_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await IN(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Ao;return s&&(ue(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(ue(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ao,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dn{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=Tg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Um(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Vc(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vN(this,e)}reload(){return EN(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await pd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(Es(this.auth));const e=await this.getIdToken();return await Vc(this,yN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,a,c,d,f;const m=(s=n.displayName)!==null&&s!==void 0?s:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,T=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:b,emailVerified:R,isAnonymous:L,providerData:M,stsTokenManager:E}=n;ue(b&&E,e,"internal-error");const y=Ao.fromJSON(this.name,E);ue(typeof b=="string",e,"internal-error"),Qs(m,e.name),Qs(g,e.name),ue(typeof R=="boolean",e,"internal-error"),ue(typeof L=="boolean",e,"internal-error"),Qs(T,e.name),Qs(k,e.name),Qs(A,e.name),Qs(C,e.name),Qs(x,e.name),Qs(v,e.name);const I=new Dn({uid:b,auth:e,email:g,emailVerified:R,displayName:m,isAnonymous:L,photoURL:k,phoneNumber:T,tenantId:A,stsTokenManager:y,createdAt:x,lastLoginAt:v});return M&&Array.isArray(M)&&(I.providerData=M.map(w=>Object.assign({},w))),C&&(I._redirectEventId=C),I}static async _fromIdTokenResponse(e,n,s=!1){const r=new Ao;r.updateFromServerResponse(n);const i=new Dn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await pd(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ue(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?TE(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),a=new Ao;a.updateFromIdToken(s);const c=new Dn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Um(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=new Map;function ys(t){Ss(t instanceof Function,"Expected a class definition");let e=j_.get(t);return e?(Ss(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,j_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IE.type="NONE";const V_=IE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t,e,n){return`firebase:${t}:${e}:${n}`}class Po{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Iu(this.userKey,r.apiKey,i),this.fullPersistenceKey=Iu("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await md(this.auth,{idToken:e}).catch(()=>{});return n?Dn._fromGetAccountInfoResponse(this.auth,n,e):null}return Dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Po(ys(V_),e,s);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=r[0]||ys(V_);const o=Iu(s,e.config.apiKey,e.name);let a=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await md(e,{idToken:f}).catch(()=>{});if(!g)break;m=await Dn._fromGetAccountInfoResponse(e,g,f)}else m=Dn._fromJSON(e,f);d!==i&&(a=m),i=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Po(i,e,s):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Po(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PE(e))return"Blackberry";if(NE(e))return"Webos";if(bE(e))return"Safari";if((e.includes("chrome/")||kE(e))&&!e.includes("edge/"))return"Chrome";if(AE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function xE(t=ut()){return/firefox\//i.test(t)}function bE(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kE(t=ut()){return/crios\//i.test(t)}function SE(t=ut()){return/iemobile/i.test(t)}function AE(t=ut()){return/android/i.test(t)}function PE(t=ut()){return/blackberry/i.test(t)}function NE(t=ut()){return/webos/i.test(t)}function kg(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bN(t=ut()){var e;return kg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kN(){return BA()&&document.documentMode===10}function CE(t=ut()){return kg(t)||AE(t)||NE(t)||PE(t)||/windows phone/i.test(t)||SE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t,e=[]){let n;switch(t){case"Browser":n=O_(ut());break;case"Worker":n=`${O_(ut())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e={}){return Fr(t,"GET","/v2/passwordPolicy",Lr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=6;class NN{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M_(this),this.idTokenSubscription=new M_(this),this.beforeStateQueue=new SN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ys(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await md(this,{idToken:e}),s=await Dn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(Es(this));const n=e?st(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(Es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(Es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AN(this),n=new NN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await xN(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ys(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[ys(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&oN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Mi(t){return st(t)}class M_{constructor(e){this.auth=e,this.observer=null,this.addObserver=KA(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RN(t){ah=t}function DE(t){return ah.loadJS(t)}function DN(){return ah.recaptchaEnterpriseScript}function jN(){return ah.gapiScript}function VN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ON{constructor(){this.enterprise=new MN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const LN="recaptcha-enterprise",jE="NO_RECAPTCHA";class FN{constructor(e){this.type=LN,this.auth=Mi(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{gN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new pN(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})})}function r(i,o,a){const c=window.grecaptcha;R_(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(jE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ON().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&R_(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=DN();c.length!==0&&(c+=a),DE(c).then(()=>{r(a,i,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function L_(t,e,n,s=!1,r=!1){const i=new FN(t);let o;if(r)o=jE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,d=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Bm(t,e,n,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await L_(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await L_(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t,e){const n=oh(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Ti(i,e??{}))return r;Mn(r,"already-initialized")}return n.initialize({options:e})}function UN(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ys);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function BN(t,e,n){const s=Mi(t);ue(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=VE(e),{host:o,port:a}=$N(e),c=a===null?"":`:${a}`,d={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){ue(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ue(Ti(d,s.config.emulator)&&Ti(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Oi(o)?(yg(`${i}//${o}${c}`),vg("Auth",!0)):qN()}function VE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $N(t){const e=VE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:F_(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:F_(o)}}}function F_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,n){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function WN(t,e){return Fr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e){return ol(t,"POST","/v1/accounts:signInWithPassword",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e){return ol(t,"POST","/v1/accounts:signInWithEmailLink",Lr(t,e))}async function KN(t,e){return ol(t,"POST","/v1/accounts:signInWithEmailLink",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends Sg{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Oc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Oc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,n,"signInWithPassword",GN);case"emailLink":return HN(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,s,"signUpPassword",WN);case"emailLink":return KN(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t,e){return ol(t,"POST","/v1/accounts:signInWithIdp",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="http://localhost";class xi extends Sg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=Tg(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new xi(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return No(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,No(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,No(e,n)}buildRequest(){const e={requestUri:QN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XN(t){const e=$a(qa(t)).link,n=e?$a(qa(e)).deep_link_id:null,s=$a(qa(t)).deep_link_id;return(s?$a(qa(s)).link:null)||s||n||e||t}class Ag{constructor(e){var n,s,r,i,o,a;const c=$a(qa(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(s=c.oobCode)!==null&&s!==void 0?s:null,m=YN((r=c.mode)!==null&&r!==void 0?r:null);ue(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=XN(e);try{return new Ag(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.providerId=aa.PROVIDER_ID}static credential(e,n){return Oc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ag.parseLink(n);return ue(s,"argument-error"),Oc._fromEmailAndCode(e,s.code,s.tenantId)}}aa.PROVIDER_ID="password";aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends OE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends al{constructor(){super("facebook.com")}static credential(e){return xi._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xi._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ir.credential(n,s)}catch{return null}}}ir.GOOGLE_SIGN_IN_METHOD="google.com";ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends al{constructor(){super("github.com")}static credential(e){return xi._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends al{constructor(){super("twitter.com")}static credential(e,n){return xi._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ar.credential(n,s)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e){return ol(t,"POST","/v1/accounts:signUp",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Dn._fromIdTokenResponse(e,s,r),o=z_(s);return new bi({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=z_(s);return new bi({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function z_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends Ds{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,gd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new gd(e,n,s,r)}}function ME(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?gd._fromErrorAndOperation(t,i,e,s):i})}async function ZN(t,e,n=!1){const s=await Vc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bi._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(t,e,n=!1){const{auth:s}=t;if(sn(s.app))return Promise.reject(Es(s));const r="reauthenticate";try{const i=await Vc(t,ME(s,r,e,t),n);ue(i.idToken,s,"internal-error");const o=bg(i.idToken);ue(o,s,"internal-error");const{sub:a}=o;return ue(t.uid===a,s,"user-mismatch"),bi._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Mn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LE(t,e,n=!1){if(sn(t.app))return Promise.reject(Es(t));const s="signIn",r=await ME(t,s,e),i=await bi._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function tC(t,e){return LE(Mi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FE(t){const e=Mi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zE(t,e,n){if(sn(t.app))return Promise.reject(Es(t));const s=Mi(t),o=await Bm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&FE(t),c}),a=await bi._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function UE(t,e,n){return sn(t.app)?Promise.reject(Es(t)):tC(st(t),aa.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&FE(t),s})}function nC(t,e,n,s){return st(t).onIdTokenChanged(e,n,s)}function sC(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function rC(t,e,n,s){return st(t).onAuthStateChanged(e,n,s)}function BE(t){return st(t).signOut()}const yd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yd,"1"),this.storage.removeItem(yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=1e3,oC=10;class qE extends $E{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);kN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,oC):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},iC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qE.type="LOCAL";const aC=qE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends $E{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}WE.type="SESSION";const GE=WE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new ch(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async d=>d(n.origin,i)),c=await cC(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const d=Pg("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(){return window}function uC(t){ns().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){return typeof ns().WorkerGlobalScope<"u"&&typeof ns().importScripts=="function"}async function dC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function fC(){return HE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="firebaseLocalStorageDb",mC=1,vd="firebaseLocalStorage",QE="fbase_key";class cl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lh(t,e){return t.transaction([vd],e?"readwrite":"readonly").objectStore(vd)}function pC(){const t=indexedDB.deleteDatabase(KE);return new cl(t).toPromise()}function $m(){const t=indexedDB.open(KE,mC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(vd,{keyPath:QE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(vd)?e(s):(s.close(),await pC(),e(await $m()))})})}async function U_(t,e,n){const s=lh(t,!0).put({[QE]:e,value:n});return new cl(s).toPromise()}async function gC(t,e){const n=lh(t,!1).get(e),s=await new cl(n).toPromise();return s===void 0?null:s.value}function B_(t,e){const n=lh(t,!0).delete(e);return new cl(n).toPromise()}const yC=800,vC=3;class YE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>vC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ch._getInstance(fC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await dC(),!this.activeServiceWorker)return;this.sender=new lC(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $m();return await U_(e,yd,"1"),await B_(e,yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>U_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>gC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>B_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=lh(r,!1).getAll();return new cl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YE.type="LOCAL";const _C=YE;new il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t,e){return e?ys(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends Sg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,n){return No(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function EC(t){return LE(t.auth,new Ng(t),t.bypassAuthState)}function TC(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),eC(n,new Ng(t),t.bypassAuthState)}async function IC(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),ZN(n,new Ng(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EC;case"linkViaPopup":case"linkViaRedirect":return IC;case"reauthViaPopup":case"reauthViaRedirect":return TC;default:Mn(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new il(2e3,1e4);class Eo extends XE{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Ss(this.filter.length===1,"Popup operations only handle one event");const e=Pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ts(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ts(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ts(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xC.get())};e()}}Eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="pendingRedirect",xu=new Map;class kC extends XE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=xu.get(this.auth._key());if(!e){try{const s=await SC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}xu.set(this.auth._key(),e)}return this.bypassAuthState||xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SC(t,e){const n=NC(e),s=PC(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function AC(t,e){xu.set(t._key(),e)}function PC(t){return ys(t._redirectPersistence)}function NC(t){return Iu(bC,t.config.apiKey,t.name)}async function CC(t,e,n=!1){if(sn(t.app))return Promise.reject(Es(t));const s=Mi(t),r=wC(s,e),o=await new kC(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=10*60*1e3;class DC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!JE(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(ts(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RC&&this.cachedEventUids.clear(),this.cachedEventUids.has($_(e))}saveEventToCache(e){this.cachedEventUids.add($_(e)),this.lastProcessedEventTime=Date.now()}}function $_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t,e={}){return Fr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MC=/^https?/;async function LC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VC(t);for(const n of e)try{if(FC(n))return}catch{}Mn(t,"unauthorized-domain")}function FC(t){const e=zm(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!MC.test(n))return!1;if(OC.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new il(3e4,6e4);function q_(){const t=ns().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UC(t){return new Promise((e,n)=>{var s,r,i;function o(){q_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q_(),n(ts(t,"network-request-failed"))},timeout:zC.get()})}if(!((r=(s=ns().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=ns().gapi)===null||i===void 0)&&i.load)o();else{const a=VN("iframefcb");return ns()[a]=()=>{gapi.load?o():n(ts(t,"network-request-failed"))},DE(`${jN()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw bu=null,e})}let bu=null;function BC(t){return bu=bu||UC(t),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new il(5e3,15e3),qC="__/auth/iframe",WC="emulator/auth/iframe",GC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KC(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xg(e,WC):`https://${t.config.authDomain}/${qC}`,s={apiKey:e.apiKey,appName:t.name,v:oa},r=HC.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${rl(s).slice(1)}`}async function QC(t){const e=await BC(t),n=ns().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:KC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GC,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=ts(t,"network-request-failed"),a=ns().setTimeout(()=>{i(o)},$C.get());function c(){ns().clearTimeout(a),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XC=500,JC=600,ZC="_blank",eR="http://localhost";class W_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tR(t,e,n,s=XC,r=JC){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},YC),{width:s.toString(),height:r.toString(),top:i,left:o}),d=ut().toLowerCase();n&&(a=kE(d)?ZC:n),xE(d)&&(e=e||eR,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[T,k])=>`${g}${T}=${k},`,"");if(bN(d)&&a!=="_self")return nR(e||"",a),new W_(null);const m=window.open(e||"",a,f);ue(m,t,"popup-blocked");try{m.focus()}catch{}return new W_(m)}function nR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="__/auth/handler",rR="emulator/auth/handler",iR=encodeURIComponent("fac");async function G_(t,e,n,s,r,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:oa,eventId:r};if(e instanceof OE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",HA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof al){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const c=await t._getAppCheckToken(),d=c?`#${iR}=${encodeURIComponent(c)}`:"";return`${oR(t)}?${rl(a).slice(1)}${d}`}function oR({config:t}){return t.emulator?xg(t,rR):`https://${t.authDomain}/${sR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="webStorageSupport";class aR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GE,this._completeRedirectFn=CC,this._overrideRedirectResult=AC}async _openPopup(e,n,s,r){var i;Ss((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await G_(e,n,s,zm(),r);return tR(e,o,Pg())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await G_(e,n,s,zm(),r);return uC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Ss(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await QC(e),s=new DC(e);return n.register("authEvent",r=>(ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Af,{type:Af},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Af];o!==void 0&&n(!!o),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return CE()||bE()||kg()}}const cR=aR;var H_="@firebase/auth",K_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dR(t){Ii(new Nr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RE(t)},d=new CN(s,r,i,c);return UN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ii(new Nr("auth-internal",e=>{const n=Mi(e.getProvider("auth").getImmediate());return(s=>new lR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),es(H_,K_,uR(t)),es(H_,K_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=5*60,fR=oE("authIdTokenMaxAge")||hR;let Q_=null;const mR=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>fR)return;const r=n==null?void 0:n.token;Q_!==r&&(Q_=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function ZE(t=Eg()){const e=oh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zN(t,{popupRedirectResolver:cR,persistence:[_C,aC,GE]}),s=oE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=mR(i.toString());sC(n,o,()=>o(n.currentUser)),nC(n,a=>o(a))}}const r=sE("auth");return r&&BN(n,`http://${r}`),n}function pR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RN({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=ts("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",pR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dR("Browser");var Y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xr,eT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function I(){}I.prototype=y.prototype,E.D=y.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(w,N,D){for(var S=Array(arguments.length-2),le=2;le<arguments.length;le++)S[le-2]=arguments[le];return y.prototype[N].apply(w,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,y,I){I||(I=0);var w=Array(16);if(typeof y=="string")for(var N=0;16>N;++N)w[N]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(N=0;16>N;++N)w[N]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=E.g[0],I=E.g[1],N=E.g[2];var D=E.g[3],S=y+(D^I&(N^D))+w[0]+3614090360&4294967295;y=I+(S<<7&4294967295|S>>>25),S=D+(N^y&(I^N))+w[1]+3905402710&4294967295,D=y+(S<<12&4294967295|S>>>20),S=N+(I^D&(y^I))+w[2]+606105819&4294967295,N=D+(S<<17&4294967295|S>>>15),S=I+(y^N&(D^y))+w[3]+3250441966&4294967295,I=N+(S<<22&4294967295|S>>>10),S=y+(D^I&(N^D))+w[4]+4118548399&4294967295,y=I+(S<<7&4294967295|S>>>25),S=D+(N^y&(I^N))+w[5]+1200080426&4294967295,D=y+(S<<12&4294967295|S>>>20),S=N+(I^D&(y^I))+w[6]+2821735955&4294967295,N=D+(S<<17&4294967295|S>>>15),S=I+(y^N&(D^y))+w[7]+4249261313&4294967295,I=N+(S<<22&4294967295|S>>>10),S=y+(D^I&(N^D))+w[8]+1770035416&4294967295,y=I+(S<<7&4294967295|S>>>25),S=D+(N^y&(I^N))+w[9]+2336552879&4294967295,D=y+(S<<12&4294967295|S>>>20),S=N+(I^D&(y^I))+w[10]+4294925233&4294967295,N=D+(S<<17&4294967295|S>>>15),S=I+(y^N&(D^y))+w[11]+2304563134&4294967295,I=N+(S<<22&4294967295|S>>>10),S=y+(D^I&(N^D))+w[12]+1804603682&4294967295,y=I+(S<<7&4294967295|S>>>25),S=D+(N^y&(I^N))+w[13]+4254626195&4294967295,D=y+(S<<12&4294967295|S>>>20),S=N+(I^D&(y^I))+w[14]+2792965006&4294967295,N=D+(S<<17&4294967295|S>>>15),S=I+(y^N&(D^y))+w[15]+1236535329&4294967295,I=N+(S<<22&4294967295|S>>>10),S=y+(N^D&(I^N))+w[1]+4129170786&4294967295,y=I+(S<<5&4294967295|S>>>27),S=D+(I^N&(y^I))+w[6]+3225465664&4294967295,D=y+(S<<9&4294967295|S>>>23),S=N+(y^I&(D^y))+w[11]+643717713&4294967295,N=D+(S<<14&4294967295|S>>>18),S=I+(D^y&(N^D))+w[0]+3921069994&4294967295,I=N+(S<<20&4294967295|S>>>12),S=y+(N^D&(I^N))+w[5]+3593408605&4294967295,y=I+(S<<5&4294967295|S>>>27),S=D+(I^N&(y^I))+w[10]+38016083&4294967295,D=y+(S<<9&4294967295|S>>>23),S=N+(y^I&(D^y))+w[15]+3634488961&4294967295,N=D+(S<<14&4294967295|S>>>18),S=I+(D^y&(N^D))+w[4]+3889429448&4294967295,I=N+(S<<20&4294967295|S>>>12),S=y+(N^D&(I^N))+w[9]+568446438&4294967295,y=I+(S<<5&4294967295|S>>>27),S=D+(I^N&(y^I))+w[14]+3275163606&4294967295,D=y+(S<<9&4294967295|S>>>23),S=N+(y^I&(D^y))+w[3]+4107603335&4294967295,N=D+(S<<14&4294967295|S>>>18),S=I+(D^y&(N^D))+w[8]+1163531501&4294967295,I=N+(S<<20&4294967295|S>>>12),S=y+(N^D&(I^N))+w[13]+2850285829&4294967295,y=I+(S<<5&4294967295|S>>>27),S=D+(I^N&(y^I))+w[2]+4243563512&4294967295,D=y+(S<<9&4294967295|S>>>23),S=N+(y^I&(D^y))+w[7]+1735328473&4294967295,N=D+(S<<14&4294967295|S>>>18),S=I+(D^y&(N^D))+w[12]+2368359562&4294967295,I=N+(S<<20&4294967295|S>>>12),S=y+(I^N^D)+w[5]+4294588738&4294967295,y=I+(S<<4&4294967295|S>>>28),S=D+(y^I^N)+w[8]+2272392833&4294967295,D=y+(S<<11&4294967295|S>>>21),S=N+(D^y^I)+w[11]+1839030562&4294967295,N=D+(S<<16&4294967295|S>>>16),S=I+(N^D^y)+w[14]+4259657740&4294967295,I=N+(S<<23&4294967295|S>>>9),S=y+(I^N^D)+w[1]+2763975236&4294967295,y=I+(S<<4&4294967295|S>>>28),S=D+(y^I^N)+w[4]+1272893353&4294967295,D=y+(S<<11&4294967295|S>>>21),S=N+(D^y^I)+w[7]+4139469664&4294967295,N=D+(S<<16&4294967295|S>>>16),S=I+(N^D^y)+w[10]+3200236656&4294967295,I=N+(S<<23&4294967295|S>>>9),S=y+(I^N^D)+w[13]+681279174&4294967295,y=I+(S<<4&4294967295|S>>>28),S=D+(y^I^N)+w[0]+3936430074&4294967295,D=y+(S<<11&4294967295|S>>>21),S=N+(D^y^I)+w[3]+3572445317&4294967295,N=D+(S<<16&4294967295|S>>>16),S=I+(N^D^y)+w[6]+76029189&4294967295,I=N+(S<<23&4294967295|S>>>9),S=y+(I^N^D)+w[9]+3654602809&4294967295,y=I+(S<<4&4294967295|S>>>28),S=D+(y^I^N)+w[12]+3873151461&4294967295,D=y+(S<<11&4294967295|S>>>21),S=N+(D^y^I)+w[15]+530742520&4294967295,N=D+(S<<16&4294967295|S>>>16),S=I+(N^D^y)+w[2]+3299628645&4294967295,I=N+(S<<23&4294967295|S>>>9),S=y+(N^(I|~D))+w[0]+4096336452&4294967295,y=I+(S<<6&4294967295|S>>>26),S=D+(I^(y|~N))+w[7]+1126891415&4294967295,D=y+(S<<10&4294967295|S>>>22),S=N+(y^(D|~I))+w[14]+2878612391&4294967295,N=D+(S<<15&4294967295|S>>>17),S=I+(D^(N|~y))+w[5]+4237533241&4294967295,I=N+(S<<21&4294967295|S>>>11),S=y+(N^(I|~D))+w[12]+1700485571&4294967295,y=I+(S<<6&4294967295|S>>>26),S=D+(I^(y|~N))+w[3]+2399980690&4294967295,D=y+(S<<10&4294967295|S>>>22),S=N+(y^(D|~I))+w[10]+4293915773&4294967295,N=D+(S<<15&4294967295|S>>>17),S=I+(D^(N|~y))+w[1]+2240044497&4294967295,I=N+(S<<21&4294967295|S>>>11),S=y+(N^(I|~D))+w[8]+1873313359&4294967295,y=I+(S<<6&4294967295|S>>>26),S=D+(I^(y|~N))+w[15]+4264355552&4294967295,D=y+(S<<10&4294967295|S>>>22),S=N+(y^(D|~I))+w[6]+2734768916&4294967295,N=D+(S<<15&4294967295|S>>>17),S=I+(D^(N|~y))+w[13]+1309151649&4294967295,I=N+(S<<21&4294967295|S>>>11),S=y+(N^(I|~D))+w[4]+4149444226&4294967295,y=I+(S<<6&4294967295|S>>>26),S=D+(I^(y|~N))+w[11]+3174756917&4294967295,D=y+(S<<10&4294967295|S>>>22),S=N+(y^(D|~I))+w[2]+718787259&4294967295,N=D+(S<<15&4294967295|S>>>17),S=I+(D^(N|~y))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+D&4294967295}s.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var I=y-this.blockSize,w=this.B,N=this.h,D=0;D<y;){if(N==0)for(;D<=I;)r(this,E,D),D+=this.blockSize;if(typeof E=="string"){for(;D<y;)if(w[N++]=E.charCodeAt(D++),N==this.blockSize){r(this,w),N=0;break}}else for(;D<y;)if(w[N++]=E[D++],N==this.blockSize){r(this,w),N=0;break}}this.h=N,this.o+=y},s.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var I=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=I&255,I/=256;for(this.u(E),E=Array(16),y=I=0;4>y;++y)for(var w=0;32>w;w+=8)E[I++]=this.g[y]>>>w&255;return E};function i(E,y){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=y(E)}function o(E,y){this.h=y;for(var I=[],w=!0,N=E.length-1;0<=N;N--){var D=E[N]|0;w&&D==y||(I[N]=D,w=!1)}this.g=I}var a={};function c(E){return-128<=E&&128>E?i(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return C(d(-E));for(var y=[],I=1,w=0;E>=I;w++)y[w]=E/I|0,I*=4294967296;return new o(y,0)}function f(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return C(f(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(y,8)),w=m,N=0;N<E.length;N+=8){var D=Math.min(8,E.length-N),S=parseInt(E.substring(N,N+D),y);8>D?(D=d(Math.pow(y,D)),w=w.j(D).add(d(S))):(w=w.j(I),w=w.add(d(S)))}return w}var m=c(0),g=c(1),T=c(16777216);t=o.prototype,t.m=function(){if(A(this))return-C(this).m();for(var E=0,y=1,I=0;I<this.g.length;I++){var w=this.i(I);E+=(0<=w?w:4294967296+w)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(k(this))return"0";if(A(this))return"-"+C(this).toString(E);for(var y=d(Math.pow(E,6)),I=this,w="";;){var N=R(I,y).g;I=x(I,N.j(y));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=N,k(I))return D+w;for(;6>D.length;)D="0"+D;w=D+w}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function k(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function A(E){return E.h==-1}t.l=function(E){return E=x(this,E),A(E)?-1:k(E)?0:1};function C(E){for(var y=E.g.length,I=[],w=0;w<y;w++)I[w]=~E.g[w];return new o(I,~E.h).add(g)}t.abs=function(){return A(this)?C(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],w=0,N=0;N<=y;N++){var D=w+(this.i(N)&65535)+(E.i(N)&65535),S=(D>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);w=S>>>16,D&=65535,S&=65535,I[N]=S<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function x(E,y){return E.add(C(y))}t.j=function(E){if(k(this)||k(E))return m;if(A(this))return A(E)?C(this).j(C(E)):C(C(this).j(E));if(A(E))return C(this.j(C(E)));if(0>this.l(T)&&0>E.l(T))return d(this.m()*E.m());for(var y=this.g.length+E.g.length,I=[],w=0;w<2*y;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var N=0;N<E.g.length;N++){var D=this.i(w)>>>16,S=this.i(w)&65535,le=E.i(N)>>>16,X=E.i(N)&65535;I[2*w+2*N]+=S*X,v(I,2*w+2*N),I[2*w+2*N+1]+=D*X,v(I,2*w+2*N+1),I[2*w+2*N+1]+=S*le,v(I,2*w+2*N+1),I[2*w+2*N+2]+=D*le,v(I,2*w+2*N+2)}for(w=0;w<y;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=y;w<2*y;w++)I[w]=0;return new o(I,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function b(E,y){this.g=E,this.h=y}function R(E,y){if(k(y))throw Error("division by zero");if(k(E))return new b(m,m);if(A(E))return y=R(C(E),y),new b(C(y.g),C(y.h));if(A(y))return y=R(E,C(y)),new b(C(y.g),y.h);if(30<E.g.length){if(A(E)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,w=y;0>=w.l(E);)I=L(I),w=L(w);var N=M(I,1),D=M(w,1);for(w=M(w,2),I=M(I,2);!k(w);){var S=D.add(w);0>=S.l(E)&&(N=N.add(I),D=S),w=M(w,1),I=M(I,1)}return y=x(E,N.j(y)),new b(N,y)}for(N=m;0<=E.l(y);){for(I=Math.max(1,Math.floor(E.m()/y.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),D=d(I),S=D.j(y);A(S)||0<S.l(E);)I-=w,D=d(I),S=D.j(y);k(D)&&(D=g),N=N.add(D),E=x(E,S)}return new b(N,E)}t.A=function(E){return R(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],w=0;w<y;w++)I[w]=this.i(w)&E.i(w);return new o(I,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],w=0;w<y;w++)I[w]=this.i(w)|E.i(w);return new o(I,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],w=0;w<y;w++)I[w]=this.i(w)^E.i(w);return new o(I,this.h^E.h)};function L(E){for(var y=E.g.length+1,I=[],w=0;w<y;w++)I[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(I,E.h)}function M(E,y){var I=y>>5;y%=32;for(var w=E.g.length-I,N=[],D=0;D<w;D++)N[D]=0<y?E.i(D+I)>>>y|E.i(D+I+1)<<32-y:E.i(D+I);return new o(N,E.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,eT=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,xr=o}).apply(typeof Y_<"u"?Y_:typeof self<"u"?self:typeof window<"u"?window:{});var Zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tT,Wa,nT,ku,qm,sT,rT,iT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zl=="object"&&Zl];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(l,h){if(h)e:{var p=s;l=l.split(".");for(var _=0;_<l.length-1;_++){var O=l[_];if(!(O in p))break e;p=p[O]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,_=!1,O={next:function(){if(!_&&p<l.length){var F=p++;return{value:h(F,l[F]),done:!1}}return _=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}r("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,_),l.apply(h,O)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function T(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function k(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,O,F){for(var K=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)K[Ce-2]=arguments[Ce];return h.prototype[O].apply(_,K)}}function A(l){const h=l.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function C(l,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(c(_)){const O=l.length||0,F=_.length||0;l.length=O+F;for(let K=0;K<F;K++)l[O+K]=_[K]}else l.push(_)}}class x{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(l){return/^[\s\xa0]*$/.test(l)}function b(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function R(l){return R[" "](l),l}R[" "]=function(){};var L=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function M(l,h,p){for(const _ in l)h.call(p,l[_],_,l)}function E(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,h){let p,_;for(let O=1;O<arguments.length;O++){_=arguments[O];for(p in _)l[p]=_[p];for(let F=0;F<I.length;F++)p=I[F],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function N(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function D(l){a.setTimeout(()=>{throw l},0)}function S(){var l=ee;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class le{constructor(){this.h=this.g=null}add(h,p){const _=X.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var X=new x(()=>new q,l=>l.reset());class q{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,$=!1,ee=new le,ie=()=>{const l=a.Promise.resolve(void 0);ae=()=>{l.then(ge)}};var ge=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(p){D(p)}var h=X;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}$=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var it=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function Jt(l,h){if(ke.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{R(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Zt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Jt.aa.h.call(this)}}k(Jt,ke);var Zt={2:"touch",3:"pen",4:"mouse"};Jt.prototype.h=function(){Jt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),ne=0;function ye(l,h,p,_,O){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=O,this.key=++ne,this.da=this.fa=!1}function Re(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ye(l){this.src=l,this.g={},this.h=0}Ye.prototype.add=function(l,h,p,_,O){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var K=is(l,h,_,O);return-1<K?(h=l[K],p||(h.fa=!1)):(h=new ye(h,this.src,F,!!_,O),h.fa=p,l.push(h)),h};function xt(l,h){var p=h.type;if(p in l.g){var _=l.g[p],O=Array.prototype.indexOf.call(_,h,void 0),F;(F=0<=O)&&Array.prototype.splice.call(_,O,1),F&&(Re(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function is(l,h,p,_){for(var O=0;O<l.length;++O){var F=l[O];if(!F.da&&F.listener==h&&F.capture==!!p&&F.ha==_)return O}return-1}var $r="closure_lm_"+(1e6*Math.random()|0),fa={};function yl(l,h,p,_,O){if(Array.isArray(h)){for(var F=0;F<h.length;F++)yl(l,h[F],p,_,O);return null}return p=wl(p),l&&l[It]?l.K(h,p,d(_)?!!_.capture:!1,O):Oh(l,h,p,!1,_,O)}function Oh(l,h,p,_,O,F){if(!h)throw Error("Invalid event type");var K=d(O)?!!O.capture:!!O,Ce=pa(l);if(Ce||(l[$r]=Ce=new Ye(l)),p=Ce.add(h,p,_,K,F),p.proxy)return p;if(_=Mh(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)it||(O=K),O===void 0&&(O=!1),l.addEventListener(h.toString(),_,O);else if(l.attachEvent)l.attachEvent(_l(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Mh(){function l(p){return h.call(l.src,l.listener,p)}const h=Lh;return l}function vl(l,h,p,_,O){if(Array.isArray(h))for(var F=0;F<h.length;F++)vl(l,h[F],p,_,O);else _=d(_)?!!_.capture:!!_,p=wl(p),l&&l[It]?(l=l.i,h=String(h).toString(),h in l.g&&(F=l.g[h],p=is(F,p,_,O),-1<p&&(Re(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete l.g[h],l.h--)))):l&&(l=pa(l))&&(h=l.g[h.toString()],l=-1,h&&(l=is(h,p,_,O)),(p=-1<l?h[l]:null)&&ma(p))}function ma(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[It])xt(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(_l(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=pa(h))?(xt(p,l),p.h==0&&(p.src=null,h[$r]=null)):Re(l)}}}function _l(l){return l in fa?fa[l]:fa[l]="on"+l}function Lh(l,h){if(l.da)l=!0;else{h=new Jt(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&ma(l),l=p.call(_,h)}return l}function pa(l){return l=l[$r],l instanceof Ye?l:null}var ga="__closure_events_fn_"+(1e9*Math.random()>>>0);function wl(l){return typeof l=="function"?l:(l[ga]||(l[ga]=function(h){return l.handleEvent(h)}),l[ga])}function ot(){me.call(this),this.i=new Ye(this),this.M=this,this.F=null}k(ot,me),ot.prototype[It]=!0,ot.prototype.removeEventListener=function(l,h,p,_){vl(this,l,h,p,_)};function pt(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new ke(h,l);else if(h instanceof ke)h.target=h.target||l;else{var O=h;h=new ke(_,l),w(h,O)}if(O=!0,p)for(var F=p.length-1;0<=F;F--){var K=h.g=p[F];O=fn(K,_,!0,h)&&O}if(K=h.g=l,O=fn(K,_,!0,h)&&O,O=fn(K,_,!1,h)&&O,p)for(F=0;F<p.length;F++)K=h.g=p[F],O=fn(K,_,!1,h)&&O}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)Re(p[_]);delete l.g[h],l.h--}}this.F=null},ot.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},ot.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function fn(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,F=0;F<h.length;++F){var K=h[F];if(K&&!K.da&&K.capture==p){var Ce=K.listener,yt=K.ha||K.src;K.fa&&xt(l.i,K),O=Ce.call(yt,_)!==!1&&O}}return O&&!_.defaultPrevented}function El(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function Tl(l){l.g=El(()=>{l.g=null,l.i&&(l.i=!1,Tl(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Fh extends me{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Tl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(l){me.call(this),this.h=l,this.g={}}k(Os,me);var j=[];function U(l){M(l.g,function(h,p){this.g.hasOwnProperty(p)&&ma(h)},l),l.g={}}Os.prototype.N=function(){Os.aa.N.call(this),U(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var H=a.JSON.stringify,re=a.JSON.parse,ce=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function te(){}te.prototype.h=null;function fe(l){return l.h||(l.h=l.i())}function at(){}var ze={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qr(){ke.call(this,"d")}k(qr,ke);function Ui(){ke.call(this,"c")}k(Ui,ke);var Ln={},Bi=null;function Fn(){return Bi=Bi||new ot}Ln.La="serverreachability";function Ms(l){ke.call(this,Ln.La,l)}k(Ms,ke);function zn(l){const h=Fn();pt(h,new Ms(h))}Ln.STAT_EVENT="statevent";function Ls(l,h){ke.call(this,Ln.STAT_EVENT,l),this.stat=h}k(Ls,ke);function Ze(l){const h=Fn();pt(h,new Ls(h,l))}Ln.Ma="timingevent";function Fs(l,h){ke.call(this,Ln.Ma,l),this.size=h}k(Fs,ke);function Un(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function zs(){this.g=!0}zs.prototype.xa=function(){this.g=!1};function Il(l,h,p,_,O,F){l.info(function(){if(l.g)if(F)for(var K="",Ce=F.split("&"),yt=0;yt<Ce.length;yt++){var be=Ce[yt].split("=");if(1<be.length){var bt=be[0];be=be[1];var kt=bt.split("_");K=2<=kt.length&&kt[1]=="type"?K+(bt+"="+be+"&"):K+(bt+"=redacted&")}}else K=null;else K=F;return"XMLHTTP REQ ("+_+") [attempt "+O+"]: "+h+`
`+p+`
`+K})}function Wr(l,h,p,_,O,F,K){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+O+"]: "+h+`
`+p+`
`+F+" "+K})}function mn(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+qi(l,p)+(_?" "+_:"")})}function $i(l,h){l.info(function(){return"TIMEOUT: "+h})}zs.prototype.info=function(){};function qi(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var O=_[1];if(Array.isArray(O)&&!(1>O.length)){var F=O[0];if(F!="noop"&&F!="stop"&&F!="close")for(var K=1;K<O.length;K++)O[K]=""}}}}return H(p)}catch{return h}}var os={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Us={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bs;function Gr(){}k(Gr,te),Gr.prototype.g=function(){return new XMLHttpRequest},Gr.prototype.i=function(){return{}},Bs=new Gr;function kn(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new Os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $s}function $s(){this.i=null,this.g="",this.h=!1}var qs={},Ws={};function as(l,h,p){l.L=1,l.v=kl(cs(h)),l.m=p,l.P=!0,Wi(l,null)}function Wi(l,h){l.F=Date.now(),gt(l),l.A=cs(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Oy(p.i,"t",_),l.C=0,p=l.j.J,l.h=new $s,l.g=ev(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Fh(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(j[0]=O.toString()),O=j);for(var F=0;F<O.length;F++){var K=yl(p,O[F],_||h.handleEvent,!1,h.h||h);if(!K)break;h.g[K.key]=K}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),zn(),Il(l.i,l.u,l.A,l.l,l.R,l.m)}kn.prototype.ca=function(l){l=l.target;const h=this.M;h&&ls(l)==3?h.j():this.Y(l)},kn.prototype.Y=function(l){try{if(l==this.g)e:{const kt=ls(this.g);var h=this.g.Ba();const Ki=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||$y(this.g)))){this.J||kt!=4||h==7||(h==8||0>=Ki?zn(3):zn(2)),Hr(this);var p=this.g.Z();this.X=p;t:if(Xe(this)){var _=$y(this.g);l="";var O=_.length,F=ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),ya(this);var K="";break t}this.h.i=new a.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(F&&h==O-1)});_.length=0,this.h.g+=l,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=p==200,Wr(this.i,this.u,this.A,this.l,this.R,kt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,yt=this.g;if((Ce=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ce)){var be=Ce;break t}}be=null}if(p=be)mn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zh(this,p);else{this.o=!1,this.s=3,Ze(12),Kr(this),ya(this);break e}}if(this.P){p=!0;let Sn;for(;!this.J&&this.C<K.length;)if(Sn=Mt(this,K),Sn==Ws){kt==4&&(this.s=4,Ze(14),p=!1),mn(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==qs){this.s=4,Ze(15),mn(this.i,this.l,K,"[Invalid Chunk]"),p=!1;break}else mn(this.i,this.l,Sn,null),zh(this,Sn);if(Xe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||K.length!=0||this.h.h||(this.s=1,Ze(16),p=!1),this.o=this.o&&p,!p)mn(this.i,this.l,K,"[Invalid Chunked Response]"),Kr(this),ya(this);else if(0<K.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Gh(bt),bt.M=!0,Ze(11))}}else mn(this.i,this.l,K,null),zh(this,K);kt==4&&Kr(this),this.o&&!this.J&&(kt==4?Yy(this.j,this):(this.o=!1,gt(this)))}else Wx(this.g),p==400&&0<K.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),Kr(this),ya(this)}}}catch{}finally{}};function Xe(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Mt(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?Ws:(p=Number(h.substring(p,_)),isNaN(p)?qs:(_+=1,_+p>h.length?Ws:(h=h.slice(_,_+p),l.C=_+p,h)))}kn.prototype.cancel=function(){this.J=!0,Kr(this)};function gt(l){l.S=Date.now()+l.I,Bn(l,l.I)}function Bn(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Un(g(l.ba,l),h)}function Hr(l){l.B&&(a.clearTimeout(l.B),l.B=null)}kn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?($i(this.i,this.A),this.L!=2&&(zn(),Ze(17)),Kr(this),this.s=2,ya(this)):Bn(this,this.S-l)};function ya(l){l.j.G==0||l.J||Yy(l.j,l)}function Kr(l){Hr(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,U(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function zh(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Uh(p.h,l))){if(!l.K&&Uh(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var O=_;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Rl(p),Nl(p);else break e;Wh(p),Ze(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=Un(g(p.Za,p),6e3));if(1>=Sy(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Yr(p,11)}else if((l.K||p.g==l)&&Rl(p),!v(h))for(O=p.Da.g.parse(h),h=0;h<O.length;h++){let be=O[h];if(p.T=be[0],be=be[1],p.G==2)if(be[0]=="c"){p.K=be[1],p.ia=be[2];const bt=be[3];bt!=null&&(p.la=bt,p.j.info("VER="+p.la));const kt=be[4];kt!=null&&(p.Aa=kt,p.j.info("SVER="+p.Aa));const Ki=be[5];Ki!=null&&typeof Ki=="number"&&0<Ki&&(_=1.5*Ki,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Sn=l.g;if(Sn){const jl=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jl){var F=_.h;F.g||jl.indexOf("spdy")==-1&&jl.indexOf("quic")==-1&&jl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Bh(F,F.h),F.h=null))}if(_.D){const Hh=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hh&&(_.ya=Hh,je(_.I,_.D,Hh))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var K=l;if(_.qa=Zy(_,_.J?_.ia:null,_.W),K.K){Ay(_.h,K);var Ce=K,yt=_.L;yt&&(Ce.I=yt),Ce.B&&(Hr(Ce),gt(Ce)),_.g=K}else Ky(_);0<p.i.length&&Cl(p)}else be[0]!="stop"&&be[0]!="close"||Yr(p,7);else p.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Yr(p,7):qh(p):be[0]!="noop"&&p.l&&p.l.ta(be),p.v=0)}}zn(4)}catch{}}var Px=class{constructor(l,h){this.g=l,this.map=h}};function by(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ky(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Sy(l){return l.h?1:l.g?l.g.size:0}function Uh(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Bh(l,h){l.g?l.g.add(h):l.h=h}function Ay(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}by.prototype.cancel=function(){if(this.i=Py(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Py(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return A(l.i)}function Nx(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function Cx(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const _ in l)h[p++]=_;return h}}}function Ny(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=Cx(l),_=Nx(l),O=_.length,F=0;F<O;F++)h.call(void 0,_[F],p&&p[F],l)}var Cy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rx(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),O=null;if(0<=_){var F=l[p].substring(0,_);O=l[p].substring(_+1)}else F=l[p];h(F,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Qr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Qr){this.h=l.h,xl(this,l.j),this.o=l.o,this.g=l.g,bl(this,l.s),this.l=l.l;var h=l.i,p=new wa;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Ry(this,p),this.m=l.m}else l&&(h=String(l).match(Cy))?(this.h=!1,xl(this,h[1]||"",!0),this.o=va(h[2]||""),this.g=va(h[3]||"",!0),bl(this,h[4]),this.l=va(h[5]||"",!0),Ry(this,h[6]||"",!0),this.m=va(h[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}Qr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(_a(h,Dy,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(_a(h,Dy,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(_a(p,p.charAt(0)=="/"?Vx:jx,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",_a(p,Mx)),l.join("")};function cs(l){return new Qr(l)}function xl(l,h,p){l.j=p?va(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function bl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Ry(l,h,p){h instanceof wa?(l.i=h,Lx(l.i,l.h)):(p||(h=_a(h,Ox)),l.i=new wa(h,l.h))}function je(l,h,p){l.i.set(h,p)}function kl(l){return je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function va(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function _a(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,Dx),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Dx(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Dy=/[#\/\?@]/g,jx=/[#\?:]/g,Vx=/[#\?]/g,Ox=/[#\?@]/g,Mx=/#/g;function wa(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Gs(l){l.g||(l.g=new Map,l.h=0,l.i&&Rx(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=wa.prototype,t.add=function(l,h){Gs(this),this.i=null,l=Gi(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function jy(l,h){Gs(l),h=Gi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Vy(l,h){return Gs(l),h=Gi(l,h),l.g.has(h)}t.forEach=function(l,h){Gs(this),this.g.forEach(function(p,_){p.forEach(function(O){l.call(h,O,_,this)},this)},this)},t.na=function(){Gs(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const O=l[_];for(let F=0;F<O.length;F++)p.push(h[_])}return p},t.V=function(l){Gs(this);let h=[];if(typeof l=="string")Vy(this,l)&&(h=h.concat(this.g.get(Gi(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return Gs(this),this.i=null,l=Gi(this,l),Vy(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Oy(l,h,p){jy(l,h),0<p.length&&(l.i=null,l.g.set(Gi(l,h),A(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const F=encodeURIComponent(String(_)),K=this.V(_);for(_=0;_<K.length;_++){var O=F;K[_]!==""&&(O+="="+encodeURIComponent(String(K[_]))),l.push(O)}}return this.i=l.join("&")};function Gi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Lx(l,h){h&&!l.j&&(Gs(l),l.i=null,l.g.forEach(function(p,_){var O=_.toLowerCase();_!=O&&(jy(this,_),Oy(this,O,p))},l)),l.j=h}function Fx(l,h){const p=new zs;if(a.Image){const _=new Image;_.onload=T(Hs,p,"TestLoadImage: loaded",!0,h,_),_.onerror=T(Hs,p,"TestLoadImage: error",!1,h,_),_.onabort=T(Hs,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=T(Hs,p,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function zx(l,h){const p=new zs,_=new AbortController,O=setTimeout(()=>{_.abort(),Hs(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(F=>{clearTimeout(O),F.ok?Hs(p,"TestPingServer: ok",!0,h):Hs(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),Hs(p,"TestPingServer: error",!1,h)})}function Hs(l,h,p,_,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),_(p)}catch{}}function Ux(){this.g=new ce}function Bx(l,h,p){const _=p||"";try{Ny(l,function(O,F){let K=O;d(O)&&(K=H(O)),h.push(_+F+"="+encodeURIComponent(K))})}catch(O){throw h.push(_+"type="+encodeURIComponent("_badmap")),O}}function Sl(l){this.l=l.Ub||null,this.j=l.eb||!1}k(Sl,te),Sl.prototype.g=function(){return new Al(this.l,this.j)},Sl.prototype.i=function(l){return function(){return l}}({});function Al(l,h){ot.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Al,ot),t=Al.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Ta(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;My(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function My(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ea(this):Ta(this),this.readyState==3&&My(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ea(this))},t.Qa=function(l){this.g&&(this.response=l,Ea(this))},t.ga=function(){this.g&&Ea(this)};function Ea(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ta(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Ta(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Al.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ly(l){let h="";return M(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function $h(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Ly(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):je(l,h,p))}function He(l){ot.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(He,ot);var $x=/^https?$/i,qx=["POST","PUT"];t=He.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bs.g(),this.v=this.o?fe(this.o):fe(Bs),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(F){Fy(this,F);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var O in _)p.set(O,_[O]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const F of _.keys())p.set(F,_.get(F));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),O=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qx,h,void 0))||_||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,K]of p)this.g.setRequestHeader(F,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{By(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){Fy(this,F)}};function Fy(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,zy(l),Pl(l)}function zy(l){l.A||(l.A=!0,pt(l,"complete"),pt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,pt(this,"complete"),pt(this,"abort"),Pl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pl(this,!0)),He.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Uy(this):this.bb())},t.bb=function(){Uy(this)};function Uy(l){if(l.h&&typeof o<"u"&&(!l.v[1]||ls(l)!=4||l.Z()!=2)){if(l.u&&ls(l)==4)El(l.Ea,0,l);else if(pt(l,"readystatechange"),ls(l)==4){l.h=!1;try{const K=l.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=K===0){var O=String(l.D).match(Cy)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),_=!$x.test(O?O.toLowerCase():"")}p=_}if(p)pt(l,"complete"),pt(l,"success");else{l.m=6;try{var F=2<ls(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",zy(l)}}finally{Pl(l)}}}}function Pl(l,h){if(l.g){By(l);const p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||pt(l,"ready");try{p.onreadystatechange=_}catch{}}}function By(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function ls(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<ls(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),re(h)}};function $y(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Wx(l){const h={};l=(l.g&&2<=ls(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(v(l[_]))continue;var p=N(l[_]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const F=h[O]||[];h[O]=F,F.push(p)}E(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ia(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function qy(l){this.Aa=0,this.i=[],this.j=new zs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ia("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ia("baseRetryDelayMs",5e3,l),this.cb=Ia("retryDelaySeedMs",1e4,l),this.Wa=Ia("forwardChannelMaxRetries",2,l),this.wa=Ia("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new by(l&&l.concurrentRequestLimit),this.Da=new Ux,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=qy.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,_){Ze(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=Zy(this,null,this.W),Cl(this)};function qh(l){if(Wy(l),l.G==3){var h=l.U++,p=cs(l.I);if(je(p,"SID",l.K),je(p,"RID",h),je(p,"TYPE","terminate"),xa(l,p),h=new kn(l,l.j,h),h.L=2,h.v=kl(cs(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=ev(h.j,null),h.g.ea(h.v)),h.F=Date.now(),gt(h)}Jy(l)}function Nl(l){l.g&&(Gh(l),l.g.cancel(),l.g=null)}function Wy(l){Nl(l),l.u&&(a.clearTimeout(l.u),l.u=null),Rl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Cl(l){if(!ky(l.h)&&!l.s){l.s=!0;var h=l.Ga;ae||ie(),$||(ae(),$=!0),ee.add(h,l),l.B=0}}function Gx(l,h){return Sy(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Un(g(l.Ga,l,h),Xy(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new kn(this,this.j,l);let F=this.o;if(this.S&&(F?(F=y(F),w(F,this.S)):F=this.S),this.m!==null||this.O||(O.H=F,F=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Hy(this,O,h),p=cs(this.I),je(p,"RID",l),je(p,"CVER",22),this.D&&je(p,"X-HTTP-Session-Id",this.D),xa(this,p),F&&(this.O?h="headers="+encodeURIComponent(String(Ly(F)))+"&"+h:this.m&&$h(p,this.m,F)),Bh(this.h,O),this.Ua&&je(p,"TYPE","init"),this.P?(je(p,"$req",h),je(p,"SID","null"),O.T=!0,as(O,p,null)):as(O,p,h),this.G=2}}else this.G==3&&(l?Gy(this,l):this.i.length==0||ky(this.h)||Gy(this))};function Gy(l,h){var p;h?p=h.l:p=l.U++;const _=cs(l.I);je(_,"SID",l.K),je(_,"RID",p),je(_,"AID",l.T),xa(l,_),l.m&&l.o&&$h(_,l.m,l.o),p=new kn(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Hy(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Bh(l.h,p),as(p,_,h)}function xa(l,h){l.H&&M(l.H,function(p,_){je(h,_,p)}),l.l&&Ny({},function(p,_){je(h,_,p)})}function Hy(l,h,p){p=Math.min(l.i.length,p);var _=l.l?g(l.l.Na,l.l,l):null;e:{var O=l.i;let F=-1;for(;;){const K=["count="+p];F==-1?0<p?(F=O[0].g,K.push("ofs="+F)):F=0:K.push("ofs="+F);let Ce=!0;for(let yt=0;yt<p;yt++){let be=O[yt].g;const bt=O[yt].map;if(be-=F,0>be)F=Math.max(0,O[yt].g-100),Ce=!1;else try{Bx(bt,K,"req"+be+"_")}catch{_&&_(bt)}}if(Ce){_=K.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function Ky(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ae||ie(),$||(ae(),$=!0),ee.add(h,l),l.v=0}}function Wh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Un(g(l.Fa,l),Xy(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Qy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Un(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),Nl(this),Qy(this))};function Gh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Qy(l){l.g=new kn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=cs(l.qa);je(h,"RID","rpc"),je(h,"SID",l.K),je(h,"AID",l.T),je(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&je(h,"TO",l.ja),je(h,"TYPE","xmlhttp"),xa(l,h),l.m&&l.o&&$h(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=kl(cs(h)),p.m=null,p.P=!0,Wi(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Nl(this),Wh(this),Ze(19))};function Rl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Yy(l,h){var p=null;if(l.g==h){Rl(l),Gh(l),l.g=null;var _=2}else if(Uh(l.h,h))p=h.D,Ay(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var O=l.B;_=Fn(),pt(_,new Fs(_,p)),Cl(l)}else Ky(l);else if(O=h.s,O==3||O==0&&0<h.X||!(_==1&&Gx(l,h)||_==2&&Wh(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),O){case 1:Yr(l,5);break;case 4:Yr(l,10);break;case 3:Yr(l,6);break;default:Yr(l,2)}}}function Xy(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Yr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),_=l.Xa;const O=!_;_=new Qr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xl(_,"https"),kl(_),O?Fx(_.toString(),p):zx(_.toString(),p)}else Ze(2);l.G=0,l.l&&l.l.sa(h),Jy(l),Wy(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function Jy(l){if(l.G=0,l.ka=[],l.l){const h=Py(l.h);(h.length!=0||l.i.length!=0)&&(C(l.ka,h),C(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function Zy(l,h,p){var _=p instanceof Qr?cs(p):new Qr(p);if(_.g!="")h&&(_.g=h+"."+_.g),bl(_,_.s);else{var O=a.location;_=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var F=new Qr(null);_&&xl(F,_),h&&(F.g=h),O&&bl(F,O),p&&(F.l=p),_=F}return p=l.D,h=l.ya,p&&h&&je(_,p,h),je(_,"VER",l.la),xa(l,_),_}function ev(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new He(new Sl({eb:p})):new He(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tv(){}t=tv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Dl(){}Dl.prototype.g=function(l,h){return new en(l,h)};function en(l,h){ot.call(this),this.g=new qy(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!v(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Hi(this)}k(en,ot),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){qh(this.g)},en.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=H(l),l=p);h.i.push(new Px(h.Ya++,l)),h.G==3&&Cl(h)},en.prototype.N=function(){this.g.l=null,delete this.j,qh(this.g),delete this.g,en.aa.N.call(this)};function nv(l){qr.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}k(nv,qr);function sv(){Ui.call(this),this.status=1}k(sv,Ui);function Hi(l){this.g=l}k(Hi,tv),Hi.prototype.ua=function(){pt(this.g,"a")},Hi.prototype.ta=function(l){pt(this.g,new nv(l))},Hi.prototype.sa=function(l){pt(this.g,new sv)},Hi.prototype.ra=function(){pt(this.g,"b")},Dl.prototype.createWebChannel=Dl.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,iT=function(){return new Dl},rT=function(){return Fn()},sT=Ln,qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},os.NO_ERROR=0,os.TIMEOUT=8,os.HTTP_ERROR=6,ku=os,Us.COMPLETE="complete",nT=Us,at.EventType=ze,ze.OPEN="a",ze.CLOSE="b",ze.ERROR="c",ze.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Wa=at,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,tT=He}).apply(typeof Zl<"u"?Zl:typeof self<"u"?self:typeof window<"u"?window:{});const X_="@firebase/firestore",J_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new _g("@firebase/firestore");function so(){return ki.logLevel}function W(t,...e){if(ki.logLevel<=_e.DEBUG){const n=e.map(Cg);ki.debug(`Firestore (${ca}): ${t}`,...n)}}function Ft(t,...e){if(ki.logLevel<=_e.ERROR){const n=e.map(Cg);ki.error(`Firestore (${ca}): ${t}`,...n)}}function Si(t,...e){if(ki.logLevel<=_e.WARN){const n=e.map(Cg);ki.warn(`Firestore (${ca}): ${t}`,...n)}}function Cg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,oT(t,s,n)}function oT(t,e,n){let s=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ft(s),new Error(s)}function se(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||oT(e,r,s)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class yR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vR{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){se(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ss;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ss,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ss)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(se(typeof s.accessToken=="string",31837,{l:s}),new aT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string",2055,{h:e}),new _t(e)}}class _R{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new _R(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Z_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ER{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){se(this.o===void 0,3512);const s=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Z_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Z_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=TR(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function de(t,e){return t<e?-1:t>e?1:0}function Wm(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return de(s,r);{const i=cT(),o=IR(i.encode(ew(t,n)),i.encode(ew(e,n)));return o!==0?o:de(s,r)}}n+=s>65535?2:1}return de(t.length,e.length)}function ew(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function IR(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return de(t[n],e[n]);return de(t.length,e.length)}function zo(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}function uT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=-62135596800,nw=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*nw);return new We(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tw)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nw}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-tw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new We(0,0))}static max(){return new oe(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="__name__";class Wn{constructor(e,n,s){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Z(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Wn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Wn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return de(e.length,n.length)}static compareSegments(e,n){const s=Wn.isNumericId(e),r=Wn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Wn.extractNumericId(e).compare(Wn.extractNumericId(n)):Wm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xr.fromString(e.substring(4,e.length-2))}}class Se extends Wn{construct(e,n,s){return new Se(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Q(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const xR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends Wn{construct(e,n,s){return new Be(e,n,s)}static isValidIdentifier(e){return xR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sw}static keyField(){return new Be([sw])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Q(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Q(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Se.fromString(e))}static fromName(e){return new Y(Se.fromString(e).popFirst(5))}static empty(){return new Y(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Se(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=-1;class _d{constructor(e,n,s,r){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=r}}function Gm(t){return t.fields.find(e=>e.kind===2)}function ti(t){return t.fields.filter(e=>e.kind!==2)}_d.UNKNOWN_ID=-1;class Su{constructor(e,n){this.fieldPath=e,this.kind=n}}class Lc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Lc(0,un.min())}}function bR(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=oe.fromTimestamp(s===1e9?new We(n+1,0):new We(n,s));return new un(r,Y.empty(),e)}function dT(t){return new un(t.readTime,t.key,Mc)}class un{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new un(oe.min(),Y.empty(),Mc)}static max(){return new un(oe.max(),Y.empty(),Mc)}}function Rg(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Li(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==hT)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,s)=>{n(e)})}static reject(e){return new V((n,s)=>{s(e)})}static waitFor(e){return new V((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=V.resolve(!1);for(const s of e)n=n.next(r=>r?V.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new V((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++a,a===i&&s(o)},f=>r(f))}})}static doWhile(e,n){return new V((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="SimpleDb";class uh{static open(e,n,s,r){try{return new uh(n,e.transaction(r,s))}catch(i){throw new ac(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ss,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ac(e,n.error)):this.S.resolve()},this.transaction.onerror=s=>{const r=Dg(s.target.error);this.S.reject(new ac(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(W(nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new SR(n)}}class br{static delete(e){return W(nn,"Removing database:",e),si(nE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!uE())return!1;if(br.F())return!0;const e=ut(),n=br.M(e),s=0<n&&n<10,r=mT(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,n,s){this.name=e,this.version=n,this.B=s,this.L=null,br.M(ut())===12.2&&Ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(W(nn,"Opening database:",this.name),this.db=await new Promise((n,s)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=i=>{const o=i.target.result;n(o)},r.onblocked=()=>{s(new ac(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=i=>{const o=i.target.error;o.name==="VersionError"?s(new Q(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?s(new Q(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):s(new ac(e,o))},r.onupgradeneeded=i=>{W(nn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;if(this.L!==null&&this.L!==i.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${i.oldVersion}, event.newVersion=${i.newVersion}, db.version=${o.version}`);this.B.q(o,r.transaction,i.oldVersion,this.version).next(()=>{W(nn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",n=>{const s=n.target;this.L=s.version},{passive:!0})),this.$&&(this.db.onversionchange=n=>this.$(n)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,s,r){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=uh.open(this.db,e,i?"readonly":"readwrite",s),c=r(a).next(d=>(a.v(),d)).catch(d=>(a.abort(d),V.reject(d))).toPromise();return c.catch(()=>{}),await a.D,c}catch(a){const c=a,d=c.name!=="FirebaseError"&&o<3;if(W(nn,"Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function mT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class kR{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return si(this.K.delete())}}class ac extends Q{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function zr(t){return t.name==="IndexedDbTransactionError"}class SR{constructor(e){this.store=e}put(e,n){let s;return n!==void 0?(W(nn,"PUT",this.store.name,e,n),s=this.store.put(n,e)):(W(nn,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),si(s)}add(e){return W(nn,"ADD",this.store.name,e,e),si(this.store.add(e))}get(e){return si(this.store.get(e)).next(n=>(n===void 0&&(n=null),W(nn,"GET",this.store.name,e,n),n))}delete(e){return W(nn,"DELETE",this.store.name,e),si(this.store.delete(e))}count(){return W(nn,"COUNT",this.store.name),si(this.store.count())}J(e,n){const s=this.options(e,n),r=s.index?this.store.index(s.index):this.store;if(typeof r.getAll=="function"){const i=r.getAll(s.range);return new V((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(s),o=[];return this.Y(i,(a,c)=>{o.push(c)}).next(()=>o)}}Z(e,n){const s=this.store.getAll(e,n===null?void 0:n);return new V((r,i)=>{s.onerror=o=>{i(o.target.error)},s.onsuccess=o=>{r(o.target.result)}})}X(e,n){W(nn,"DELETE ALL",this.store.name);const s=this.options(e,n);s.ee=!1;const r=this.cursor(s);return this.Y(r,(i,o,a)=>a.delete())}te(e,n){let s;n?s=e:(s={},n=e);const r=this.cursor(s);return this.Y(r,n)}ne(e){const n=this.cursor({});return new V((s,r)=>{n.onerror=i=>{const o=Dg(i.target.error);r(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():s()}):s()}})}Y(e,n){const s=[];return new V((r,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const c=new kR(a),d=n(a.primaryKey,a.value,c);if(d instanceof V){const f=d.catch(m=>(c.done(),V.reject(m)));s.push(f)}c.isDone?r():c.j===null?a.continue():a.continue(c.j)}}).next(()=>V.waitFor(s))}options(e,n){let s;return e!==void 0&&(typeof e=="string"?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.ee?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function si(t){return new V((e,n)=>{t.onsuccess=s=>{const r=s.target.result;e(r)},t.onerror=s=>{const r=Dg(s.target.error);n(r)}})}let rw=!1;function Dg(t){const e=br.M(ut());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const s=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rw||(rw=!0,setTimeout(()=>{throw s},0)),s}}return t}const cc="IndexBackfiller";class AR{constructor(e,n){this.asyncQueue=e,this.re=n,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){W(cc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.re.se();W(cc,`Documents written: ${n}`)}catch(n){zr(n)?W(cc,"Ignoring IndexedDB error during index backfill: ",n):await Li(n)}await this.ie(6e4)})}}class PR{constructor(e,n){this.localStore=e,this.persistence=n}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.oe(n,e))}oe(e,n){const s=new Set;let r=n,i=!0;return V.doWhile(()=>i===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!s.has(o))return W(cc,`Processing collection: ${o}`),this._e(e,o,r).next(a=>{r-=a,s.add(o)});i=!1})).next(()=>n-r)}_e(e,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,s).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ae(r,i)).next(a=>(W(cc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ae(e,n){let s=e;return n.changes.forEach((r,i)=>{const o=dT(i);Rg(o,s)>0&&(s=o)}),new un(s.readTime,s.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}_n.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=-1;function dh(t){return t==null}function Fc(t){return t===0&&1/t==-1/0}function NR(t){return typeof t=="number"&&Number.isInteger(t)&&!Fc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="";function Vt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=iw(e)),e=CR(t.get(n),e);return iw(e)}function CR(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case wd:n+="";break;default:n+=i}}return n}function iw(t){return t+wd+""}function Hn(t){const e=t.length;if(se(e>=2,64408,{path:t}),e===2)return se(t.charAt(0)===wd&&t.charAt(1)==="",56145,{path:t}),Se.emptyPath();const n=e-2,s=[];let r="";for(let i=0;i<e;){const o=t.indexOf(wd,i);switch((o<0||o>n)&&Z(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;r.length===0?c=a:(r+=a,c=r,r=""),s.push(c);break;case"":r+=t.substring(i,o),r+="\0";break;case"":r+=t.substring(i,o+1);break;default:Z(61167,{path:t})}i=o+2}return new Se(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="remoteDocuments",ll="owner",Xi="owner",zc="mutationQueues",RR="userId",Cn="mutations",ow="batchId",ui="userMutationsIndex",aw=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e){return[t,Vt(e)]}function pT(t,e,n){return[t,Vt(e),n]}const DR={},Uo="documentMutations",Ed="remoteDocumentsV14",jR=["prefixPath","collectionGroup","readTime","documentId"],Pu="documentKeyIndex",VR=["prefixPath","collectionGroup","documentId"],gT="collectionGroupIndex",OR=["collectionGroup","readTime","prefixPath","documentId"],Uc="remoteDocumentGlobal",Hm="remoteDocumentGlobalKey",Bo="targets",yT="queryTargetsIndex",MR=["canonicalId","targetId"],$o="targetDocuments",LR=["targetId","path"],jg="documentTargetsIndex",FR=["path","targetId"],Td="targetGlobalKey",pi="targetGlobal",Bc="collectionParents",zR=["collectionId","parent"],qo="clientMetadata",UR="clientId",hh="bundles",BR="bundleId",fh="namedQueries",$R="name",Vg="indexConfiguration",qR="indexId",Km="collectionGroupIndex",WR="collectionGroup",lc="indexState",GR=["indexId","uid"],vT="sequenceNumberIndex",HR=["uid","sequenceNumber"],uc="indexEntries",KR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_T="documentKeyIndex",QR=["indexId","uid","orderedDocumentKey"],mh="documentOverlays",YR=["userId","collectionPath","documentId"],Qm="collectionPathOverlayIndex",XR=["userId","collectionPath","largestBatchId"],wT="collectionGroupOverlayIndex",JR=["userId","collectionGroup","largestBatchId"],Og="globals",ZR="name",ET=[zc,Cn,Uo,ni,Bo,ll,pi,$o,qo,Uc,Bc,hh,fh],eD=[...ET,mh],TT=[zc,Cn,Uo,Ed,Bo,ll,pi,$o,qo,Uc,Bc,hh,fh,mh],IT=TT,Mg=[...IT,Vg,lc,uc],tD=Mg,xT=[...Mg,Og],nD=xT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends fT{constructor(e,n){super(),this.he=e,this.currentSequenceNumber=n}}function dt(t,e){const n=he(t);return br.N(n.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ur(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eu(this.root,e,this.comparator,!0)}}class eu{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??wt.RED,this.left=r??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new wt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return wt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lw(this.data.getIterator())}getIteratorFrom(e){return new lw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ne)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ne(this.comparator);return n.data=e,n}}class lw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ji(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new Ne(Be.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new kT("Invalid base64 string: "+i):i}}(e);return new rt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const sD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(t){if(se(!!t,39018),typeof t=="string"){let e=0;const n=sD.exec(t);if(se(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ps(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="server_timestamp",AT="__type__",PT="__previous_value__",NT="__local_write_time__";function Lg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[AT])===null||n===void 0?void 0:n.stringValue)===ST}function ph(t){const e=t.mapValue.fields[PT];return Lg(e)?ph(e):e}function $c(t){const e=As(t.mapValue.fields[NT].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n,s,r,i,o,a,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Id="(default)";class Ai{constructor(e,n){this.projectId=e,this.database=n||Id}static empty(){return new Ai("","")}get isDefaultDatabase(){return this.database===Id}isEqual(e){return e instanceof Ai&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="__type__",CT="__max__",hr={mapValue:{fields:{__type__:{stringValue:CT}}}},zg="__vector__",Wo="value",Nu={nullValue:"NULL_VALUE"};function Cr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lg(t)?4:RT(t)?9007199254740991:gh(t)?10:11:Z(28295,{value:t})}function rs(t,e){if(t===e)return!0;const n=Cr(t);if(n!==Cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $c(t).isEqual($c(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=As(r.timestampValue),a=As(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ps(r.bytesValue).isEqual(Ps(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Me(r.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(r.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Me(r.integerValue)===Me(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Me(r.doubleValue),a=Me(i.doubleValue);return o===a?Fc(o)===Fc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return zo(t.arrayValue.values||[],e.arrayValue.values||[],rs);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(cw(o)!==cw(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!rs(o[c],a[c])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function qc(t,e){return(t.values||[]).find(n=>rs(n,e))!==void 0}function Rr(t,e){if(t===e)return 0;const n=Cr(t),s=Cr(e);if(n!==s)return de(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Me(i.integerValue||i.doubleValue),c=Me(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return uw(t.timestampValue,e.timestampValue);case 4:return uw($c(t),$c(e));case 5:return Wm(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ps(i),c=Ps(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){const f=de(a[d],c[d]);if(f!==0)return f}return de(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=de(Me(i.latitude),Me(o.latitude));return a!==0?a:de(Me(i.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dw(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,d,f;const m=i.fields||{},g=o.fields||{},T=(a=m[Wo])===null||a===void 0?void 0:a.arrayValue,k=(c=g[Wo])===null||c===void 0?void 0:c.arrayValue,A=de(((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0,((f=k==null?void 0:k.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:dw(T,k)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===hr.mapValue&&o===hr.mapValue)return 0;if(i===hr.mapValue)return 1;if(o===hr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const g=Wm(c[m],f[m]);if(g!==0)return g;const T=Rr(a[c[m]],d[f[m]]);if(T!==0)return T}return de(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{Pe:n})}}function uw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=As(t),s=As(e),r=de(n.seconds,s.seconds);return r!==0?r:de(n.nanos,s.nanos)}function dw(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Rr(n[r],s[r]);if(i)return i}return de(n.length,s.length)}function Go(t){return Xm(t)}function Xm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=As(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ps(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Xm(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Xm(n.fields[o])}`;return r+"}"}(t.mapValue):Z(61005,{value:t})}function Cu(t){switch(Cr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ph(t);return e?16+Cu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Cu(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Ur(s.fields,(i,o)=>{r+=i.length+Cu(o)}),r}(t.mapValue);default:throw Z(13486,{value:t})}}function Wc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jm(t){return!!t&&"integerValue"in t}function Gc(t){return!!t&&"arrayValue"in t}function hw(t){return!!t&&"nullValue"in t}function fw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ru(t){return!!t&&"mapValue"in t}function gh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Fg])===null||n===void 0?void 0:n.stringValue)===zg}function dc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ur(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=dc(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===CT}const DT={mapValue:{fields:{[Fg]:{stringValue:zg},[Wo]:{arrayValue:{}}}}};function iD(t){return"nullValue"in t?Nu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Wc(Ai.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?gh(t)?DT:{mapValue:{}}:Z(35942,{value:t})}function oD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Wc(Ai.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?DT:"mapValue"in t?gh(t)?{mapValue:{}}:hr:Z(61959,{value:t})}function mw(t,e){const n=Rr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function pw(t,e){const n=Rr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ru(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(n)}setAll(e){let n=Be.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=dc(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Ru(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Ru(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Ur(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Dt(dc(this.value))}}function jT(t){const e=[];return Ur(t.fields,(n,s)=>{const r=new Be([n]);if(Ru(s)){const i=jT(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Qe(e,0,oe.min(),oe.min(),oe.min(),Dt.empty(),0)}static newFoundDocument(e,n,s,r){return new Qe(e,1,n,oe.min(),s,r,0)}static newNoDocument(e,n){return new Qe(e,2,n,oe.min(),oe.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Qe(e,3,n,oe.min(),oe.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.position=e,this.inclusive=n}}function gw(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Y.comparator(Y.fromName(o.referenceValue),n.key):s=Rr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function yw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n="asc"){this.field=e,this.dir=n}}function aD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{}class we extends VT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new cD(e,n,s):n==="array-contains"?new dD(e,s):n==="in"?new UT(e,s):n==="not-in"?new hD(e,s):n==="array-contains-any"?new fD(e,s):new we(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new lD(e,s):new uD(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Rr(n,this.value)):n!==null&&Cr(this.value)===Cr(n)&&this.matchesComparison(Rr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ae extends VT{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Ae(e,n)}matches(e){return Ko(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Ko(t){return t.op==="and"}function Zm(t){return t.op==="or"}function Ug(t){return OT(t)&&Ko(t)}function OT(t){for(const e of t.filters)if(e instanceof Ae)return!1;return!0}function ep(t){if(t instanceof we)return t.field.canonicalString()+t.op.toString()+Go(t.value);if(Ug(t))return t.filters.map(e=>ep(e)).join(",");{const e=t.filters.map(n=>ep(n)).join(",");return`${t.op}(${e})`}}function MT(t,e){return t instanceof we?function(s,r){return r instanceof we&&s.op===r.op&&s.field.isEqual(r.field)&&rs(s.value,r.value)}(t,e):t instanceof Ae?function(s,r){return r instanceof Ae&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&MT(o,r.filters[a]),!0):!1}(t,e):void Z(19439)}function LT(t,e){const n=t.filters.concat(e);return Ae.create(n,t.op)}function FT(t){return t instanceof we?function(n){return`${n.field.canonicalString()} ${n.op} ${Go(n.value)}`}(t):t instanceof Ae?function(n){return n.op.toString()+" {"+n.getFilters().map(FT).join(" ,")+"}"}(t):"Filter"}class cD extends we{constructor(e,n,s){super(e,n,s),this.key=Y.fromName(s.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class lD extends we{constructor(e,n){super(e,"in",n),this.keys=zT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uD extends we{constructor(e,n){super(e,"not-in",n),this.keys=zT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Y.fromName(s.referenceValue))}class dD extends we{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gc(n)&&qc(n.arrayValue,this.value)}}class UT extends we{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qc(this.value.arrayValue,n)}}class hD extends we{constructor(e,n){super(e,"not-in",n)}matches(e){if(qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qc(this.value.arrayValue,n)}}class fD extends we{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>qc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function tp(t,e=null,n=[],s=[],r=null,i=null,o=null){return new mD(t,e,n,s,r,i,o)}function Pi(t){const e=he(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>ep(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),dh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Go(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Go(s)).join(",")),e.Ie=n}return e.Ie}function ul(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yw(t.startAt,e.startAt)&&yw(t.endAt,e.endAt)}function xd(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function bd(t,e){return t.filters.filter(n=>n instanceof we&&n.field.isEqual(e))}function vw(t,e,n){let s=Nu,r=!0;for(const i of bd(t,e)){let o=Nu,a=!0;switch(i.op){case"<":case"<=":o=iD(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Nu}mw({value:s,inclusive:r},{value:o,inclusive:a})<0&&(s=o,r=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];mw({value:s,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(s=o,r=n.inclusive);break}}return{value:s,inclusive:r}}function _w(t,e,n){let s=hr,r=!0;for(const i of bd(t,e)){let o=hr,a=!0;switch(i.op){case">=":case">":o=oD(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=hr}pw({value:s,inclusive:r},{value:o,inclusive:a})>0&&(s=o,r=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];pw({value:s,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(s=o,r=n.inclusive);break}}return{value:s,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function pD(t,e,n,s,r,i,o,a){return new la(t,e,n,s,r,i,o,a)}function yh(t){return new la(t)}function ww(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BT(t){return t.collectionGroup!==null}function hc(t){const e=he(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ne(Be.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Hc(i,s))}),n.has(Be.keyField().canonicalString())||e.Ee.push(new Hc(Be.keyField(),s))}return e.Ee}function En(t){const e=he(t);return e.de||(e.de=gD(e,hc(t))),e.de}function gD(t,e){if(t.limitType==="F")return tp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Hc(r.field,i)});const n=t.endAt?new Ho(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ho(t.startAt.position,t.startAt.inclusive):null;return tp(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function np(t,e){const n=t.filters.concat([e]);return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sp(t,e,n){return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vh(t,e){return ul(En(t),En(e))&&t.limitType===e.limitType}function $T(t){return`${Pi(En(t))}|lt:${t.limitType}`}function ro(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>FT(r)).join(", ")}]`),dh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Go(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Go(r)).join(",")),`Target(${s})`}(En(t))}; limitType=${t.limitType})`}function dl(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Y.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of hc(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,c){const d=gw(o,a,c);return o.inclusive?d<=0:d<0}(s.startAt,hc(s),r)||s.endAt&&!function(o,a,c){const d=gw(o,a,c);return o.inclusive?d>=0:d>0}(s.endAt,hc(s),r))}(t,e)}function yD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qT(t){return(e,n)=>{let s=!1;for(const r of hc(t)){const i=vD(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function vD(t,e,n){const s=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),d=a.data.field(i);return c!==null&&d!==null?Rr(c,d):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ur(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return bT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new Fe(Y.comparator);function an(){return _D}const WT=new Fe(Y.comparator);function Ga(...t){let e=WT;for(const n of t)e=e.insert(n.key,n);return e}function GT(t){let e=WT;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Kn(){return fc()}function HT(){return fc()}function fc(){return new js(t=>t.toString(),(t,e)=>t.isEqual(e))}const wD=new Fe(Y.comparator),ED=new Ne(Y.comparator);function pe(...t){let e=ED;for(const n of t)e=e.add(n);return e}const TD=new Ne(de);function ID(){return TD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(e)?"-0":e}}function KT(t){return{integerValue:""+t}}function xD(t,e){return NR(e)?KT(e):Bg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function bD(t,e,n){return t instanceof Kc?function(r,i){const o={fields:{[AT]:{stringValue:ST},[NT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Lg(i)&&(i=ph(i)),i&&(o.fields[PT]=i),{mapValue:o}}(n,e):t instanceof Qo?YT(t,e):t instanceof Yo?XT(t,e):function(r,i){const o=QT(r,i),a=Ew(o)+Ew(r.Re);return Jm(o)&&Jm(r.Re)?KT(a):Bg(r.serializer,a)}(t,e)}function kD(t,e,n){return t instanceof Qo?YT(t,e):t instanceof Yo?XT(t,e):n}function QT(t,e){return t instanceof Qc?function(s){return Jm(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Kc extends _h{}class Qo extends _h{constructor(e){super(),this.elements=e}}function YT(t,e){const n=JT(e);for(const s of t.elements)n.some(r=>rs(r,s))||n.push(s);return{arrayValue:{values:n}}}class Yo extends _h{constructor(e){super(),this.elements=e}}function XT(t,e){let n=JT(e);for(const s of t.elements)n=n.filter(r=>!rs(r,s));return{arrayValue:{values:n}}}class Qc extends _h{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Ew(t){return Me(t.integerValue||t.doubleValue)}function JT(t){return Gc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n){this.field=e,this.transform=n}}function AD(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Qo&&r instanceof Qo||s instanceof Yo&&r instanceof Yo?zo(s.elements,r.elements,rs):s instanceof Qc&&r instanceof Qc?rs(s.Re,r.Re):s instanceof Kc&&r instanceof Kc}(t.transform,e.transform)}class PD{constructor(e,n){this.version=e,this.transformResults=n}}class jt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jt}static exists(e){return new jt(void 0,e)}static updateTime(e){return new jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Du(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wh{}function ZT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Eh(t.key,jt.none()):new ua(t.key,t.data,jt.none());{const n=t.data,s=Dt.empty();let r=new Ne(Be.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Vs(t.key,s,new Kt(r.toArray()),jt.none())}}function ND(t,e,n){t instanceof ua?function(r,i,o){const a=r.value.clone(),c=Iw(r.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Vs?function(r,i,o){if(!Du(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Iw(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(eI(r)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function mc(t,e,n,s){return t instanceof ua?function(i,o,a,c){if(!Du(i.precondition,o))return a;const d=i.value.clone(),f=xw(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Vs?function(i,o,a,c){if(!Du(i.precondition,o))return a;const d=xw(i.fieldTransforms,c,o),f=o.data;return f.setAll(eI(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(i,o,a){return Du(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function CD(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=QT(s.transform,r||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(s.field,i))}return n||null}function Tw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&zo(s,r,(i,o)=>AD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ua extends wh{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vs extends wh{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function eI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Iw(t,e,n){const s=new Map;se(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,kD(o,a,n[r]))}return s}function xw(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,bD(i,o,e))}return s}class Eh extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tI extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&ND(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=mc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=mc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=HT();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const c=ZT(o,a);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(n,s)=>Tw(n,s))&&zo(this.baseMutations,e.baseMutations,(n,s)=>Tw(n,s))}}class qg{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){se(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let r=function(){return wD}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new qg(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,Te;function DD(t){switch(t){case z.OK:return Z(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function nI(t){if(t===void 0)return Ft("GRPC error has no .code"),z.UNKNOWN;switch(t){case et.OK:return z.OK;case et.CANCELLED:return z.CANCELLED;case et.UNKNOWN:return z.UNKNOWN;case et.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case et.INTERNAL:return z.INTERNAL;case et.UNAVAILABLE:return z.UNAVAILABLE;case et.UNAUTHENTICATED:return z.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case et.NOT_FOUND:return z.NOT_FOUND;case et.ALREADY_EXISTS:return z.ALREADY_EXISTS;case et.PERMISSION_DENIED:return z.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case et.ABORTED:return z.ABORTED;case et.OUT_OF_RANGE:return z.OUT_OF_RANGE;case et.UNIMPLEMENTED:return z.UNIMPLEMENTED;case et.DATA_LOSS:return z.DATA_LOSS;default:return Z(39323,{code:t})}}(Te=et||(et={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=new xr([4294967295,4294967295],0);function bw(t){const e=cT().encode(t),n=new eT;return n.update(e),new Uint8Array(n.digest())}function kw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new xr([n,s],0),new xr([r,i],0)]}class Gg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ha(`Invalid padding: ${n}`);if(s<0)throw new Ha(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ha(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ha(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=xr.fromNumber(this.pe)}we(e,n,s){let r=e.add(n.multiply(xr.fromNumber(s)));return r.compare(jD)===1&&(r=new xr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=bw(e),[s,r]=kw(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);if(!this.be(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Gg(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=bw(e),[s,r]=kw(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,hl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Th(oe.min(),r,new Fe(de),an(),pe())}}class hl{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new hl(s,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,s,r){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=r}}class sI{constructor(e,n){this.targetId=e,this.Ce=n}}class rI{constructor(e,n,s=rt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Sw{constructor(){this.Fe=0,this.Me=Aw(),this.xe=rt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=pe(),n=pe(),s=pe();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Z(38017,{changeType:i})}}),new hl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=Aw()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,se(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class VD{constructor(e){this.ze=e,this.je=new Map,this.He=an(),this.Je=tu(),this.Ye=tu(),this.Ze=new Fe(de)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,s=e.Ce.count,r=this._t(n);if(r){const i=r.target;if(xd(i))if(s===0){const o=new Y(i.path);this.tt(n,o,Qe.newNoDocument(o,oe.min()))}else se(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const a=this.ct(e),c=a?this.lt(a,e,o):1;if(c!==0){this.st(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Ps(s).toUint8Array()}catch(c){if(c instanceof kT)return Si("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Gg(o,r,i)}catch(c){return Si(c instanceof Ha?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),r++)}),r}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&xd(a.target)){const c=new Y(a.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Qe.newNoDocument(c,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let s=pe();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const d=this._t(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const r=new Th(e,n,this.Ze,this.He,s);return this.He=an(),this.Je=tu(),this.Ye=tu(),this.Ze=new Fe(de),r}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Sw,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ne(de),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ne(de),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Sw),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function tu(){return new Fe(Y.comparator)}function Aw(){return new Fe(Y.comparator)}const OD={asc:"ASCENDING",desc:"DESCENDING"},MD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LD={and:"AND",or:"OR"};class FD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rp(t,e){return t.useProto3Json||dh(e)?e:{value:e}}function Xo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zD(t,e){return Xo(t,e.toTimestamp())}function Ut(t){return se(!!t,49232),oe.fromTimestamp(function(n){const s=As(n);return new We(s.seconds,s.nanos)}(t))}function Hg(t,e){return ip(t,e).canonicalString()}function ip(t,e){const n=function(r){return new Se(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oI(t){const e=Se.fromString(t);return se(pI(e),10190,{key:e.toString()}),e}function kd(t,e){return Hg(t.databaseId,e.path)}function gi(t,e){const n=oI(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(lI(n))}function aI(t,e){return Hg(t.databaseId,e)}function cI(t){const e=oI(t);return e.length===4?Se.emptyPath():lI(e)}function op(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lI(t){return se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Pw(t,e,n){return{name:kd(t,e),fields:n.value.mapValue.fields}}function UD(t,e,n){const s=gi(t,e.name),r=Ut(e.updateTime),i=e.createTime?Ut(e.createTime):oe.min(),o=new Dt({mapValue:{fields:e.fields}}),a=Qe.newFoundDocument(s,r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function BD(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Z(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(se(f===void 0||typeof f=="string",58123),rt.fromBase64String(f||"")):(se(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),rt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=d.code===void 0?z.UNKNOWN:nI(d.code);return new Q(f,d.message||"")}(o);n=new rI(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=gi(t,s.document.name),i=Ut(s.document.updateTime),o=s.document.createTime?Ut(s.document.createTime):oe.min(),a=new Dt({mapValue:{fields:s.document.fields}}),c=Qe.newFoundDocument(r,i,o,a),d=s.targetIds||[],f=s.removedTargetIds||[];n=new ju(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=gi(t,s.document),i=s.readTime?Ut(s.readTime):oe.min(),o=Qe.newNoDocument(r,i),a=s.removedTargetIds||[];n=new ju([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=gi(t,s.document),i=s.removedTargetIds||[];n=new ju([],i,r,null)}else{if(!("filter"in e))return Z(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new RD(r,i),a=s.targetId;n=new sI(a,o)}}return n}function Sd(t,e){let n;if(e instanceof ua)n={update:Pw(t,e.key,e.value)};else if(e instanceof Eh)n={delete:kd(t,e.key)};else if(e instanceof Vs)n={update:Pw(t,e.key,e.data),updateMask:KD(e.fieldMask)};else{if(!(e instanceof tI))return Z(16599,{ft:e.type});n={verify:kd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof Kc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qc)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw Z(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:zD(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z(27497)}(t,e.precondition)),n}function ap(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?jt.updateTime(Ut(i.updateTime)):i.exists!==void 0?jt.exists(i.exists):jt.none()}(e.currentDocument):jt.none(),s=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)se(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new Kc;else if("appendMissingElements"in a){const f=a.appendMissingElements.values||[];c=new Qo(f)}else if("removeAllFromArray"in a){const f=a.removeAllFromArray.values||[];c=new Yo(f)}else"increment"in a?c=new Qc(o,a.increment):Z(16584,{proto:a});const d=Be.fromServerFormat(a.fieldPath);return new SD(d,c)}(t,r)):[];if(e.update){e.update.name;const r=gi(t,e.update.name),i=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const d=c.fieldPaths||[];return new Kt(d.map(f=>Be.fromServerFormat(f)))}(e.updateMask);return new Vs(r,i,o,n,s)}return new ua(r,i,n,s)}if(e.delete){const r=gi(t,e.delete);return new Eh(r,n)}if(e.verify){const r=gi(t,e.verify);return new tI(r,n)}return Z(1463,{proto:e})}function $D(t,e){return t&&t.length>0?(se(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Ut(r.updateTime):Ut(i);return o.isEqual(oe.min())&&(o=Ut(i)),new PD(o,r.transformResults||[])}(n,e))):[]}function uI(t,e){return{documents:[aI(t,e.path)]}}function dI(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=aI(t,r);const i=function(d){if(d.length!==0)return mI(Ae.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:io(g.field),direction:WD(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=rp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:r}}function hI(t){let e=cI(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){se(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=fI(m);return g instanceof Ae&&Ug(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(k){return new Hc(oo(k.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,dh(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,T=m.values||[];return new Ho(T,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,T=m.values||[];return new Ho(T,g)}(n.endAt)),pD(e,r,o,i,a,"F",c,d)}function qD(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=oo(n.unaryFilter.field);return we.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=oo(n.unaryFilter.field);return we.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=oo(n.unaryFilter.field);return we.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=oo(n.unaryFilter.field);return we.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return we.create(oo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ae.create(n.compositeFilter.filters.map(s=>fI(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function WD(t){return OD[t]}function GD(t){return MD[t]}function HD(t){return LD[t]}function io(t){return{fieldPath:t.canonicalString()}}function oo(t){return Be.fromServerFormat(t.fieldPath)}function mI(t){return t instanceof we?function(n){if(n.op==="=="){if(fw(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NAN"}};if(hw(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fw(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NAN"}};if(hw(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:io(n.field),op:GD(n.op),value:n.value}}}(t):t instanceof Ae?function(n){const s=n.getFilters().map(r=>mI(r));return s.length===1?s[0]:{compositeFilter:{op:HD(n.op),filters:s}}}(t):Z(54877,{filter:t})}function KD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n,s,r,i=oe.min(),o=oe.min(),a=rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.wt=e}}function QD(t,e){let n;if(e.document)n=UD(t.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Y.fromSegments(e.noDocument.path),r=Ci(e.noDocument.readTime);n=Qe.newNoDocument(s,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z(56709);{const s=Y.fromSegments(e.unknownDocument.path),r=Ci(e.unknownDocument.version);n=Qe.newUnknownDocument(s,r)}}return e.readTime&&n.setReadTime(function(r){const i=new We(r[0],r[1]);return oe.fromTimestamp(i)}(e.readTime)),n}function Nw(t,e){const n=e.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ad(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=function(i,o){return{name:kd(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Xo(i,o.version.toTimestamp()),createTime:Xo(i,o.createTime.toTimestamp())}}(t.wt,e);else if(e.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:Ni(e.version)};else{if(!e.isUnknownDocument())return Z(57904,{document:e});s.unknownDocument={path:n.path.toArray(),version:Ni(e.version)}}return s}function Ad(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ni(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ci(t){const e=new We(t.seconds,t.nanoseconds);return oe.fromTimestamp(e)}function ri(t,e){const n=(e.baseMutations||[]).map(i=>ap(t.wt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const s=e.mutations.map(i=>ap(t.wt,i)),r=We.fromMillis(e.localWriteTimeMs);return new $g(e.batchId,r,n,s)}function Ka(t){const e=Ci(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ci(t.lastLimboFreeSnapshotVersion):oe.min();let s;return s=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return se(o===1,1966,{count:o}),En(yh(cI(i.documents[0])))}(t.query):function(i){return En(hI(i))}(t.query),new vs(s,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,rt.fromBase64String(t.resumeToken))}function yI(t,e){const n=Ni(e.snapshotVersion),s=Ni(e.lastLimboFreeSnapshotVersion);let r;r=xd(e.target)?uI(t.wt,e.target):dI(t.wt,e.target).gt;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pi(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:r}}function vI(t){const e=hI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sp(e,e.limit,"L"):e}function Pf(t,e){return new Wg(e.largestBatchId,ap(t.wt,e.overlayMutation))}function Cw(t,e){const n=e.path.lastSegment();return[t,Vt(e.path.popLast()),n]}function Rw(t,e,n,s){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ni(s.readTime),documentKey:Vt(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{getBundleMetadata(e,n){return Dw(e).get(n).next(s=>{if(s)return function(i){return{id:i.bundleId,createTime:Ci(i.createTime),version:i.version}}(s)})}saveBundleMetadata(e,n){return Dw(e).put(function(r){return{bundleId:r.id,createTime:Ni(Ut(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return jw(e).get(n).next(s=>{if(s)return function(i){return{name:i.name,query:vI(i.bundledQuery),readTime:Ci(i.readTime)}}(s)})}saveNamedQuery(e,n){return jw(e).put(function(r){return{name:r.name,readTime:Ni(Ut(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function Dw(t){return dt(t,hh)}function jw(t){return dt(t,fh)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.serializer=e,this.userId=n}static bt(e,n){const s=n.uid||"";return new Ih(e,s)}getOverlay(e,n){return Da(e).get(Cw(this.userId,n)).next(s=>s?Pf(this.serializer,s):null)}getOverlays(e,n){const s=Kn();return V.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){const r=[];return s.forEach((i,o)=>{const a=new Wg(n,o);r.push(this.St(e,a))}),V.waitFor(r)}removeOverlaysForBatchId(e,n,s){const r=new Set;n.forEach(o=>r.add(Vt(o.getCollectionPath())));const i=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,s],[this.userId,o,s+1],!1,!0);i.push(Da(e).X(Qm,a))}),V.waitFor(i)}getOverlaysForCollection(e,n,s){const r=Kn(),i=Vt(n),o=IDBKeyRange.bound([this.userId,i,s],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Da(e).J(Qm,o).next(a=>{for(const c of a){const d=Pf(this.serializer,c);r.set(d.getKey(),d)}return r})}getOverlaysForCollectionGroup(e,n,s,r){const i=Kn();let o;const a=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Da(e).te({index:wT,range:a},(c,d,f)=>{const m=Pf(this.serializer,d);i.size()<r||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>i)}St(e,n){return Da(e).put(function(r,i,o){const[a,c,d]=Cw(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Sd(r.wt,o.mutation)}}(this.serializer,this.userId,n))}}function Da(t){return dt(t,mh)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{Dt(e){return dt(e,Og)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(n=>{const s=n==null?void 0:n.value;return s?rt.fromUint8Array(s):rt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Dt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(Me(e.integerValue));else if("doubleValue"in e){const s=Me(e.doubleValue);isNaN(s)?this.Mt(n,13):(this.Mt(n,15),Fc(s)?n.xt(0):n.xt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Mt(n,20),typeof s=="string"&&(s=As(s)),n.Ot(`${s.seconds||""}`),n.xt(s.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(Ps(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.Mt(n,45),n.xt(s.latitude||0),n.xt(s.longitude||0)}else"mapValue"in e?RT(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):gh(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):Z(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){const s=e.fields||{};this.Mt(n,55);for(const r of Object.keys(s))this.Nt(r,n),this.Ct(s[r],n)}qt(e,n){var s,r;const i=e.fields||{};this.Mt(n,53);const o=Wo,a=((r=(s=i[o].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.length)||0;this.Mt(n,15),n.xt(Me(a)),this.Nt(o,n),this.Ct(i[o],n)}$t(e,n){const s=e.values||[];this.Mt(n,50);for(const r of s)this.Ct(r,n)}kt(e,n){this.Mt(n,37),Y.fromName(e).path.forEach(s=>{this.Mt(n,60),this.Kt(s,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}}ii.Wt=new ii;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=255;function JD(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Vw(t){const e=64-function(s){let r=0;for(let i=0;i<8;++i){const o=JD(255&s[i]);if(r+=o,o!==8)break}return r}(t);return Math.ceil(e/8)}class ZD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.zt(s.value),s=n.next();this.jt()}Ht(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Jt(s.value),s=n.next();this.Yt()}Zt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.zt(s);else if(s<2048)this.zt(960|s>>>6),this.zt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.zt(480|s>>>12),this.zt(128|63&s>>>6),this.zt(128|63&s);else{const r=n.codePointAt(0);this.zt(240|r>>>18),this.zt(128|63&r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r)}}this.jt()}Xt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Yt()}en(e){const n=this.tn(e),s=Vw(n);this.nn(1+s),this.buffer[this.position++]=255&s;for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=255&n[r]}rn(e){const n=this.tn(e),s=Vw(n);this.nn(1+s),this.buffer[this.position++]=~(255&s);for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}sn(){this._n(Zi),this._n(255)}an(){this.un(Zi),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),s=!!(128&n[0]);n[0]^=s?255:128;for(let r=1;r<n.length;++r)n[r]^=s?255:0;return n}zt(e){const n=255&e;n===0?(this._n(0),this._n(255)):n===Zi?(this._n(Zi),this._n(0)):this._n(n)}Jt(e){const n=255&e;n===0?(this.un(0),this.un(255)):n===Zi?(this.un(Zi),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const n=e+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const r=new Uint8Array(s);r.set(this.buffer),this.buffer=r}}class e3{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class t3{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class ja{constructor(){this.ln=new ZD,this.hn=new e3(this.ln),this.Pn=new t3(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,s,r){this.In=e,this.En=n,this.dn=s,this.An=r}Rn(){const e=this.An.length,n=e===0||this.An[e-1]===255?e+1:e,s=new Uint8Array(n);return s.set(this.An,0),n!==e?s.set([0],this.An.length):++s[s.length-1],new oi(this.In,this.En,this.dn,s)}Vn(e,n,s){return{indexId:this.In,uid:e,arrayValue:Vu(this.dn),directionalValue:Vu(this.An),orderedDocumentKey:Vu(n),documentKey:s.path.toArray()}}mn(e,n,s){const r=this.Vn(e,n,s);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Ys(t,e){let n=t.In-e.In;return n!==0?n:(n=Ow(t.dn,e.dn),n!==0?n:(n=Ow(t.An,e.An),n!==0?n:Y.comparator(t.En,e.En)))}function Ow(t,e){for(let n=0;n<t.length&&n<e.length;++n){const s=t[n]-e[n];if(s!==0)return s}return t.length-e.length}function Vu(t){return lE()?function(n){let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}(t):t}function Mw(t){return typeof t!="string"?t:function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(t)}class Lw{constructor(e){this.fn=new Ne((n,s)=>Be.comparator(n.field,s.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const n of e.filters){const s=n;s.isInequality()?this.fn=this.fn.add(s):this.pn.push(s)}}get yn(){return this.fn.size>1}wn(e){if(se(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const n=Gm(e);if(n!==void 0&&!this.bn(n))return!1;const s=ti(e);let r=new Set,i=0,o=0;for(;i<s.length&&this.bn(s[i]);++i)r=r.add(s[i].fieldPath.canonicalString());if(i===s.length)return!0;if(this.fn.size>0){const a=this.fn.getIterator().getNext();if(!r.has(a.field.canonicalString())){const c=s[i];if(!this.Sn(a,c)||!this.Dn(this.gn[o++],c))return!1}++i}for(;i<s.length;++i){const a=s[i];if(o>=this.gn.length||!this.Dn(this.gn[o++],a))return!1}return!0}vn(){if(this.yn)return null;let e=new Ne(Be.comparator);const n=[];for(const s of this.pn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")n.push(new Su(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),n.push(new Su(s.field,0))}for(const s of this.gn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),n.push(new Su(s.field,s.dir==="asc"?0:1)));return new _d(_d.UNKNOWN_ID,this.collectionId,n,Lc.empty())}bn(e){for(const n of this.pn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===s}Dn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t){var e,n;if(se(t instanceof we||t instanceof Ae,20012),t instanceof we){if(t instanceof UT){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>we.create(t.field,"==",i)))||[];return Ae.create(r,"or")}return t}const s=t.filters.map(r=>_I(r));return Ae.create(s,t.op)}function n3(t){if(t.getFilters().length===0)return[];const e=up(_I(t));return se(wI(e),7391),cp(e)||lp(e)?[e]:e.getFilters()}function cp(t){return t instanceof we}function lp(t){return t instanceof Ae&&Ug(t)}function wI(t){return cp(t)||lp(t)||function(n){if(n instanceof Ae&&Zm(n)){for(const s of n.getFilters())if(!cp(s)&&!lp(s))return!1;return!0}return!1}(t)}function up(t){if(se(t instanceof we||t instanceof Ae,34018),t instanceof we)return t;if(t.filters.length===1)return up(t.filters[0]);const e=t.filters.map(s=>up(s));let n=Ae.create(e,t.op);return n=Pd(n),wI(n)?n:(se(n instanceof Ae,64498),se(Ko(n),40251),se(n.filters.length>1,57927),n.filters.reduce((s,r)=>Kg(s,r)))}function Kg(t,e){let n;return se(t instanceof we||t instanceof Ae,38388),se(e instanceof we||e instanceof Ae,25473),n=t instanceof we?e instanceof we?function(r,i){return Ae.create([r,i],"and")}(t,e):Fw(t,e):e instanceof we?Fw(e,t):function(r,i){if(se(r.filters.length>0&&i.filters.length>0,48005),Ko(r)&&Ko(i))return LT(r,i.getFilters());const o=Zm(r)?r:i,a=Zm(r)?i:r,c=o.filters.map(d=>Kg(d,a));return Ae.create(c,"or")}(t,e),Pd(n)}function Fw(t,e){if(Ko(e))return LT(e,t.getFilters());{const n=e.filters.map(s=>Kg(t,s));return Ae.create(n,"or")}}function Pd(t){if(se(t instanceof we||t instanceof Ae,11850),t instanceof we)return t;const e=t.getFilters();if(e.length===1)return Pd(e[0]);if(OT(t))return t;const n=e.map(r=>Pd(r)),s=[];return n.forEach(r=>{r instanceof we?s.push(r):r instanceof Ae&&(r.op===t.op?s.push(...r.filters):s.push(r))}),s.length===1?s[0]:Ae.create(s,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.Cn=new Qg}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(un.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(un.min())}updateCollectionGroup(e,n,s){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class Qg{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Ne(Se.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ne(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="IndexedDbIndexManager",nu=new Uint8Array(0);class r3{constructor(e,n){this.databaseId=n,this.Fn=new Qg,this.Mn=new js(s=>Pi(s),(s,r)=>ul(s,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Fn.has(n)){const s=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.Fn.add(n)});const i={collectionId:s,parent:Vt(r)};return Uw(e).put(i)}return V.resolve()}getCollectionParents(e,n){const s=[],r=IDBKeyRange.bound([n,""],[uT(n),""],!1,!0);return Uw(e).J(r).next(i=>{for(const o of i){if(o.collectionId!==n)break;s.push(Hn(o.parent))}return s})}addFieldIndex(e,n){const s=Va(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const i=s.add(r);if(n.indexState){const o=to(e);return i.next(a=>{o.put(Rw(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const s=Va(e),r=to(e),i=eo(e);return s.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Va(e),s=eo(e),r=to(e);return n.X().next(()=>s.X()).next(()=>r.X())}createTargetIndexes(e,n){return V.forEach(this.xn(n),s=>this.getIndexType(e,s).next(r=>{if(r===0||r===1){const i=new Lw(s).vn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const s=eo(e);let r=!0;const i=new Map;return V.forEach(this.xn(n),o=>this.On(e,o).next(a=>{r&&(r=!!a),i.set(o,a)})).next(()=>{if(r){let o=pe();const a=[];return V.forEach(i,(c,d)=>{W(zw,`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(c)} to execute ${Pi(n)}`);const f=function(b,R){const L=Gm(R);if(L===void 0)return null;for(const M of bd(b,L.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(d,c),m=function(b,R){const L=new Map;for(const M of ti(R))for(const E of bd(b,M.fieldPath))switch(E.op){case"==":case"in":L.set(M.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return L.set(M.fieldPath.canonicalString(),E.value),Array.from(L.values())}return null}(d,c),g=function(b,R){const L=[];let M=!0;for(const E of ti(R)){const y=E.kind===0?vw(b,E.fieldPath,b.startAt):_w(b,E.fieldPath,b.startAt);L.push(y.value),M&&(M=y.inclusive)}return new Ho(L,M)}(d,c),T=function(b,R){const L=[];let M=!0;for(const E of ti(R)){const y=E.kind===0?_w(b,E.fieldPath,b.endAt):vw(b,E.fieldPath,b.endAt);L.push(y.value),M&&(M=y.inclusive)}return new Ho(L,M)}(d,c),k=this.Nn(c,d,g),A=this.Nn(c,d,T),C=this.Bn(c,d,m),x=this.Ln(c.indexId,f,k,g.inclusive,A,T.inclusive,C);return V.forEach(x,v=>s.Z(v,n.limit).next(b=>{b.forEach(R=>{const L=Y.fromSegments(R.documentKey);o.has(L)||(o=o.add(L),a.push(L))})}))}).next(()=>a)}return V.resolve(null)})}xn(e){let n=this.Mn.get(e);return n||(e.filters.length===0?n=[e]:n=n3(Ae.create(e.filters,"and")).map(s=>tp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,n),n)}Ln(e,n,s,r,i,o,a){const c=(n!=null?n.length:1)*Math.max(s.length,i.length),d=c/(n!=null?n.length:1),f=[];for(let m=0;m<c;++m){const g=n?this.kn(n[m/d]):nu,T=this.qn(e,g,s[m%d],r),k=this.Qn(e,g,i[m%d],o),A=a.map(C=>this.qn(e,g,C,!0));f.push(...this.createRange(T,k,A))}return f}qn(e,n,s,r){const i=new oi(e,Y.empty(),n,s);return r?i:i.Rn()}Qn(e,n,s,r){const i=new oi(e,Y.empty(),n,s);return r?i.Rn():i}On(e,n){const s=new Lw(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(i=>{let o=null;for(const a of i)s.wn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let s=2;const r=this.xn(n);return V.forEach(r,i=>this.On(e,i).next(o=>{o?s!==0&&o.fields.length<function(c){let d=new Ne(Be.comparator),f=!1;for(const m of c.filters)for(const g of m.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:d=d.add(g.field));for(const m of c.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(f?1:0)}(i)&&(s=1):s=0})).next(()=>function(o){return o.limit!==null}(n)&&r.length>1&&s===2?1:s)}$n(e,n){const s=new ja;for(const r of ti(e)){const i=n.data.field(r.fieldPath);if(i==null)return null;const o=s.Tn(r.kind);ii.Wt.vt(i,o)}return s.cn()}kn(e){const n=new ja;return ii.Wt.vt(e,n.Tn(0)),n.cn()}Un(e,n){const s=new ja;return ii.Wt.vt(Wc(this.databaseId,n),s.Tn(function(i){const o=ti(i);return o.length===0?0:o[o.length-1].kind}(e))),s.cn()}Bn(e,n,s){if(s===null)return[];let r=[];r.push(new ja);let i=0;for(const o of ti(e)){const a=s[i++];for(const c of r)if(this.Kn(n,o.fieldPath)&&Gc(a))r=this.Wn(r,o,a);else{const d=c.Tn(o.kind);ii.Wt.vt(a,d)}}return this.Gn(r)}Nn(e,n,s){return this.Bn(e,n,s.position)}Gn(e){const n=[];for(let s=0;s<e.length;++s)n[s]=e[s].cn();return n}Wn(e,n,s){const r=[...e],i=[];for(const o of s.arrayValue.values||[])for(const a of r){const c=new ja;c.seed(a.cn()),ii.Wt.vt(o,c.Tn(n.kind)),i.push(c)}return i}Kn(e,n){return!!e.filters.find(s=>s instanceof we&&s.field.isEqual(n)&&(s.op==="in"||s.op==="not-in"))}getFieldIndexes(e,n){const s=Va(e),r=to(e);return(n?s.J(Km,IDBKeyRange.bound(n,n)):s.J()).next(i=>{const o=[];return V.forEach(i,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const g=m?new Lc(m.sequenceNumber,new un(Ci(m.readTime),new Y(Hn(m.documentKey)),m.largestBatchId)):Lc.empty(),T=f.fields.map(([k,A])=>new Su(Be.fromServerFormat(k),A));return new _d(f.indexId,f.collectionGroup,T,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((s,r)=>{const i=s.indexState.sequenceNumber-r.indexState.sequenceNumber;return i!==0?i:de(s.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,s){const r=Va(e),i=to(e);return this.zn(e).next(o=>r.J(Km,IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,c=>i.put(Rw(c.indexId,this.uid,o,s)))))}updateIndexEntries(e,n){const s=new Map;return V.forEach(n,(r,i)=>{const o=s.get(r.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(s.set(r.collectionGroup,a),V.forEach(a,c=>this.jn(e,r,c).next(d=>{const f=this.Hn(i,c);return d.isEqual(f)?V.resolve():this.Jn(e,i,c,d,f)}))))})}Yn(e,n,s,r){return eo(e).put(r.Vn(this.uid,this.Un(s,n.key),n.key))}Zn(e,n,s,r){return eo(e).delete(r.mn(this.uid,this.Un(s,n.key),n.key))}jn(e,n,s){const r=eo(e);let i=new Ne(Ys);return r.te({index:_T,range:IDBKeyRange.only([s.indexId,this.uid,Vu(this.Un(s,n))])},(o,a)=>{i=i.add(new oi(s.indexId,n,Mw(a.arrayValue),Mw(a.directionalValue)))}).next(()=>i)}Hn(e,n){let s=new Ne(Ys);const r=this.$n(n,e);if(r==null)return s;const i=Gm(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Gc(o))for(const a of o.arrayValue.values||[])s=s.add(new oi(n.indexId,e.key,this.kn(a),r))}else s=s.add(new oi(n.indexId,e.key,nu,r));return s}Jn(e,n,s,r,i){W(zw,"Updating index entries for document '%s'",n.key);const o=[];return function(c,d,f,m,g){const T=c.getIterator(),k=d.getIterator();let A=Ji(T),C=Ji(k);for(;A||C;){let x=!1,v=!1;if(A&&C){const b=f(A,C);b<0?v=!0:b>0&&(x=!0)}else A!=null?v=!0:x=!0;x?(m(C),C=Ji(k)):v?(g(A),A=Ji(T)):(A=Ji(T),C=Ji(k))}}(r,i,Ys,a=>{o.push(this.Yn(e,n,s,a))},a=>{o.push(this.Zn(e,n,s,a))}),V.waitFor(o)}zn(e){let n=1;return to(e).te({index:vT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,r,i)=>{i.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,s){s=s.sort((o,a)=>Ys(o,a)).filter((o,a,c)=>!a||Ys(o,c[a-1])!==0);const r=[];r.push(e);for(const o of s){const a=Ys(o,e),c=Ys(o,n);if(a===0)r[0]=e.Rn();else if(a>0&&c<0)r.push(o),r.push(o.Rn());else if(c>0)break}r.push(n);const i=[];for(let o=0;o<r.length;o+=2){if(this.Xn(r[o],r[o+1]))return[];const a=r[o].mn(this.uid,nu,Y.empty()),c=r[o+1].mn(this.uid,nu,Y.empty());i.push(IDBKeyRange.bound(a,c))}return i}Xn(e,n){return Ys(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Bw)}getMinOffset(e,n){return V.mapArray(this.xn(n),s=>this.On(e,s).next(r=>r||Z(44426))).next(Bw)}}function Uw(t){return dt(t,Bc)}function eo(t){return dt(t,uc)}function Va(t){return dt(t,Vg)}function to(t){return dt(t,lc)}function Bw(t){se(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let s=1;s<t.length;s++){const r=t[s].indexState.offset;Rg(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new un(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EI=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t,e,n){const s=t.store(Cn),r=t.store(Uo),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=s.te({range:o},(f,m,g)=>(a++,g.delete()));i.push(c.next(()=>{se(a===1,47070,{batchId:n.batchId})}));const d=[];for(const f of n.mutations){const m=pT(e,f.key.path,n.batchId);i.push(r.delete(m)),d.push(f.key)}return V.waitFor(i).next(()=>d)}function Nd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Z(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(EI,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);class xh{constructor(e,n,s,r){this.userId=e,this.serializer=n,this.indexManager=s,this.referenceDelegate=r,this.er={}}static bt(e,n,s,r){se(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new xh(i,n,s,r)}checkEmpty(e){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xs(e).te({index:ui,range:s},(r,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,s,r){const i=ao(e),o=Xs(e);return o.add({}).next(a=>{se(typeof a=="number",49019);const c=new $g(a,n,s,r),d=function(T,k,A){const C=A.baseMutations.map(v=>Sd(T.wt,v)),x=A.mutations.map(v=>Sd(T.wt,v));return{userId:k,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:C,mutations:x}}(this.serializer,this.userId,c),f=[];let m=new Ne((g,T)=>de(g.canonicalString(),T.canonicalString()));for(const g of r){const T=pT(this.userId,g.key.path,a);m=m.add(g.key.path.popLast()),f.push(o.put(d)),f.push(i.put(T,DR))}return m.forEach(g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.er[a]=c.keys()}),V.waitFor(f).next(()=>c)})}lookupMutationBatch(e,n){return Xs(e).get(n).next(s=>s?(se(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:n}),ri(this.serializer,s)):null)}tr(e,n){return this.er[n]?V.resolve(this.er[n]):this.lookupMutationBatch(e,n).next(s=>{if(s){const r=s.keys();return this.er[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=IDBKeyRange.lowerBound([this.userId,s]);let i=null;return Xs(e).te({index:ui,range:r},(o,a,c)=>{a.userId===this.userId&&(se(a.batchId>=s,47524,{nr:s}),i=ri(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=mi;return Xs(e).te({index:ui,range:n,reverse:!0},(r,i,o)=>{s=i.batchId,o.done()}).next(()=>s)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,mi],[this.userId,Number.POSITIVE_INFINITY]);return Xs(e).J(ui,n).next(s=>s.map(r=>ri(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const s=Au(this.userId,n.path),r=IDBKeyRange.lowerBound(s),i=[];return ao(e).te({range:r},(o,a,c)=>{const[d,f,m]=o,g=Hn(f);if(d===this.userId&&n.path.isEqual(g))return Xs(e).get(m).next(T=>{if(!T)throw Z(61480,{rr:o,batchId:m});se(T.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:T.userId,batchId:m}),i.push(ri(this.serializer,T))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ne(de);const r=[];return n.forEach(i=>{const o=Au(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=ao(e).te({range:a},(d,f,m)=>{const[g,T,k]=d,A=Hn(T);g===this.userId&&i.path.isEqual(A)?s=s.add(k):m.done()});r.push(c)}),V.waitFor(r).next(()=>this.ir(e,s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1,i=Au(this.userId,s),o=IDBKeyRange.lowerBound(i);let a=new Ne(de);return ao(e).te({range:o},(c,d,f)=>{const[m,g,T]=c,k=Hn(g);m===this.userId&&s.isPrefixOf(k)?k.length===r&&(a=a.add(T)):f.done()}).next(()=>this.ir(e,a))}ir(e,n){const s=[],r=[];return n.forEach(i=>{r.push(Xs(e).get(i).next(o=>{if(o===null)throw Z(35274,{batchId:i});se(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),s.push(ri(this.serializer,o))}))}),V.waitFor(r).next(()=>s)}removeMutationBatch(e,n){return TI(e.he,this.userId,n).next(s=>(e.addOnCommittedListener(()=>{this.sr(n.batchId)}),V.forEach(s,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const s=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return ao(e).te({range:s},(i,o,a)=>{if(i[0]===this.userId){const c=Hn(i[1]);r.push(c)}else a.done()}).next(()=>{se(r.length===0,56720,{_r:r.map(i=>i.canonicalString())})})})}containsKey(e,n){return II(e,this.userId,n)}ar(e){return xI(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:mi,lastStreamToken:""})}}function II(t,e,n){const s=Au(e,n.path),r=s[1],i=IDBKeyRange.lowerBound(s);let o=!1;return ao(t).te({range:i,ee:!0},(a,c,d)=>{const[f,m,g]=a;f===e&&m===r&&(o=!0),d.done()}).next(()=>o)}function Xs(t){return dt(t,Cn)}function ao(t){return dt(t,Uo)}function xI(t){return dt(t,zc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ri(0)}static lr(){return new Ri(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.hr(e).next(n=>{const s=new Ri(n.highestTargetId);return n.highestTargetId=s.next(),this.Pr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(n=>oe.fromTimestamp(new We(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,s){return this.hr(e).next(r=>(r.highestListenSequenceNumber=n,s&&(r.lastRemoteSnapshotVersion=s.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Pr(e,r)))}addTargetData(e,n){return this.Tr(e,n).next(()=>this.hr(e).next(s=>(s.targetCount+=1,this.Ir(n,s),this.Pr(e,s))))}updateTargetData(e,n){return this.Tr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>no(e).delete(n.targetId)).next(()=>this.hr(e)).next(s=>(se(s.targetCount>0,8065),s.targetCount-=1,this.Pr(e,s)))}removeTargets(e,n,s){let r=0;const i=[];return no(e).te((o,a)=>{const c=Ka(a);c.sequenceNumber<=n&&s.get(c.targetId)===null&&(r++,i.push(this.removeTargetData(e,c)))}).next(()=>V.waitFor(i)).next(()=>r)}forEachTarget(e,n){return no(e).te((s,r)=>{const i=Ka(r);n(i)})}hr(e){return qw(e).get(Td).next(n=>(se(n!==null,2888),n))}Pr(e,n){return qw(e).put(Td,n)}Tr(e,n){return no(e).put(yI(this.serializer,n))}Ir(e,n){let s=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,s=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.hr(e).next(n=>n.targetCount)}getTargetData(e,n){const s=Pi(n),r=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let i=null;return no(e).te({range:r,index:yT},(o,a,c)=>{const d=Ka(a);ul(n,d.target)&&(i=d,c.done())}).next(()=>i)}addMatchingKeys(e,n,s){const r=[],i=cr(e);return n.forEach(o=>{const a=Vt(o.path);r.push(i.put({targetId:s,path:a})),r.push(this.referenceDelegate.addReference(e,s,o))}),V.waitFor(r)}removeMatchingKeys(e,n,s){const r=cr(e);return V.forEach(n,i=>{const o=Vt(i.path);return V.waitFor([r.delete([s,o]),this.referenceDelegate.removeReference(e,s,i)])})}removeMatchingKeysForTargetId(e,n){const s=cr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(r)}getMatchingKeysForTargetId(e,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),r=cr(e);let i=pe();return r.te({range:s,ee:!0},(o,a,c)=>{const d=Hn(o[1]),f=new Y(d);i=i.add(f)}).next(()=>i)}containsKey(e,n){const s=Vt(n.path),r=IDBKeyRange.bound([s],[uT(s)],!1,!0);let i=0;return cr(e).te({index:jg,ee:!0,range:r},([o,a],c,d)=>{o!==0&&(i++,d.done())}).next(()=>i>0)}Rt(e,n){return no(e).get(n).next(s=>s?Ka(s):null)}}function no(t){return dt(t,Bo)}function qw(t){return dt(t,pi)}function cr(t){return dt(t,$o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="LruGarbageCollector",o3=1048576;function Gw([t,e],[n,s]){const r=de(t,n);return r===0?de(e,s):r}class a3{constructor(e){this.Er=e,this.buffer=new Ne(Gw),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Gw(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){W(Ww,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zr(n)?W(Ww,"Ignoring IndexedDB error during garbage collection: ",n):await Li(n)}await this.mr(3e5)})}}class c3{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return V.resolve(_n.le);const s=new a3(n);return this.gr.forEachTarget(e,r=>s.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>s.Rr(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve($w)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$w):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,r,i,o,a,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,o=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(s=m,a=Date.now(),this.removeTargets(e,s,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),so()<=_e.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:m})))}}function kI(t,e){return new c3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.db=e,this.garbageCollector=kI(this,n)}pr(e){const n=this.br(e);return this.db.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}yr(e,n){return this.Sr(e,(s,r)=>n(r))}addReference(e,n,s){return su(e,s)}removeReference(e,n,s){return su(e,s)}removeTargets(e,n,s){return this.db.getTargetCache().removeTargets(e,n,s)}markPotentiallyOrphaned(e,n){return su(e,n)}Dr(e,n){return function(r,i){let o=!1;return xI(r).ne(a=>II(r,a,i).next(c=>(c&&(o=!0),V.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const c=this.Dr(e,o).next(d=>{if(!d)return i++,s.getEntry(e,o).next(()=>(s.removeEntry(o,oe.min()),cr(e).delete(function(m){return[0,Vt(m.path)]}(o))))});r.push(c)}}).next(()=>V.waitFor(r)).next(()=>s.apply(e)).next(()=>i)}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,n){return su(e,n)}Sr(e,n){const s=cr(e);let r,i=_n.le;return s.te({index:jg},([o,a],{path:c,sequenceNumber:d})=>{o===0?(i!==_n.le&&n(new Y(Hn(r)),i),i=d,r=c):i=_n.le}).next(()=>{i!==_n.le&&n(new Y(Hn(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function su(t,e){return cr(t).put(function(s,r){return{targetId:0,path:Vt(s.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.changes=new js(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?V.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,s){return Xr(e).put(s)}removeEntry(e,n,s){return Xr(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ad(o),a[a.length-1]]}(n,s))}updateMetadata(e,n){return this.getMetadata(e).next(s=>(s.byteSize+=n,this.vr(e,s)))}getEntry(e,n){let s=Qe.newInvalidDocument(n);return Xr(e).te({index:Pu,range:IDBKeyRange.only(Oa(n))},(r,i)=>{s=this.Cr(n,i)}).next(()=>s)}Fr(e,n){let s={size:0,document:Qe.newInvalidDocument(n)};return Xr(e).te({index:Pu,range:IDBKeyRange.only(Oa(n))},(r,i)=>{s={document:this.Cr(n,i),size:Nd(i)}}).next(()=>s)}getEntries(e,n){let s=an();return this.Mr(e,n,(r,i)=>{const o=this.Cr(r,i);s=s.insert(r,o)}).next(()=>s)}Or(e,n){let s=an(),r=new Fe(Y.comparator);return this.Mr(e,n,(i,o)=>{const a=this.Cr(i,o);s=s.insert(i,a),r=r.insert(i,Nd(o))}).next(()=>({documents:s,Nr:r}))}Mr(e,n,s){if(n.isEmpty())return V.resolve();let r=new Ne(Qw);n.forEach(c=>r=r.add(c));const i=IDBKeyRange.bound(Oa(r.first()),Oa(r.last())),o=r.getIterator();let a=o.getNext();return Xr(e).te({index:Pu,range:i},(c,d,f)=>{const m=Y.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&Qw(a,m)<0;)s(a,null),a=o.getNext();a&&a.isEqual(m)&&(s(a,d),a=o.hasNext()?o.getNext():null),a?f.H(Oa(a)):f.done()}).next(()=>{for(;a;)s(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,s,r,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Ad(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xr(e).J(IDBKeyRange.bound(a,c,!0)).next(d=>{i==null||i.incrementDocumentReadCount(d.length);let f=an();for(const m of d){const g=this.Cr(Y.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);g.isFoundDocument()&&(dl(n,g)||r.has(g.key))&&(f=f.insert(g.key,g))}return f})}getAllFromCollectionGroup(e,n,s,r){let i=an();const o=Kw(n,s),a=Kw(n,un.max());return Xr(e).te({index:gT,range:IDBKeyRange.bound(o,a,!0)},(c,d,f)=>{const m=this.Cr(Y.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);i=i.insert(m.key,m),i.size===r&&f.done()}).next(()=>i)}newChangeBuffer(e){return new d3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Hw(e).get(Hm).next(n=>(se(!!n,20021),n))}vr(e,n){return Hw(e).put(Hm,n)}Cr(e,n){if(n){const s=QD(this.serializer,n);if(!(s.isNoDocument()&&s.version.isEqual(oe.min())))return s}return Qe.newInvalidDocument(e)}}function AI(t){return new u3(t)}class d3 extends SI{constructor(e,n){super(),this.Br=e,this.trackRemovals=n,this.Lr=new js(s=>s.toString(),(s,r)=>s.isEqual(r))}applyChanges(e){const n=[];let s=0,r=new Ne((i,o)=>de(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Lr.get(i);if(n.push(this.Br.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=Nw(this.Br.serializer,o);r=r.add(i.path.popLast());const d=Nd(c);s+=d-a.size,n.push(this.Br.addEntry(e,i,c))}else if(s-=a.size,this.trackRemovals){const c=Nw(this.Br.serializer,o.convertToNoDocument(oe.min()));n.push(this.Br.addEntry(e,i,c))}}),r.forEach(i=>{n.push(this.Br.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Br.updateMetadata(e,s)),V.waitFor(n)}getFromCache(e,n){return this.Br.Fr(e,n).next(s=>(this.Lr.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,n){return this.Br.Or(e,n).next(({documents:s,Nr:r})=>(r.forEach((i,o)=>{this.Lr.set(i,{size:o,readTime:s.get(i).readTime})}),s))}}function Hw(t){return dt(t,Uc)}function Xr(t){return dt(t,Ed)}function Oa(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Kw(t,e){const n=e.documentKey.path.toArray();return[t,Ad(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Qw(t,e){const n=t.path.toArray(),s=e.path.toArray();let r=0;for(let i=0;i<n.length-2&&i<s.length-2;++i)if(r=de(n[i],s[i]),r)return r;return r=de(n.length,s.length),r||(r=de(n[n.length-2],s[s.length-2]),r||de(n[n.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&mc(s.mutation,r,Kt.empty(),We.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,pe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=pe()){const r=Kn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Ga();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Kn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,pe()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=an();const o=fc(),a=function(){return fc()}();return n.forEach((c,d)=>{const f=s.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof Vs)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),mc(f.mutation,d,f.mutation.getFieldMask(),We.now())):o.set(d.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return a.set(d,new h3(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const s=fc();let r=new Fe((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=s.get(c)||Kt.empty();f=a.applyToLocalView(d,f),s.set(c,f);const m=(r.get(a.batchId)||pe()).add(c);r=r.insert(a.batchId,m)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),d=c.key,f=c.value,m=HT();f.forEach(g=>{if(!i.has(g)){const T=ZT(n.get(g),s.get(g));T!==null&&m.set(g,T),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return V.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):V.resolve(Kn());let a=Mc,c=i;return o.next(d=>V.forEach(d,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(f)?V.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,pe())).next(f=>({batchId:a,changes:GT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(s=>{let r=Ga();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Ga();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,c=>{const d=function(m,g){return new la(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,r).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Qe.newInvalidDocument(f)))});let a=Ga();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&mc(f.mutation,d,Kt.empty(),We.now()),dl(n,d)&&(a=a.insert(c,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return V.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ut(r.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:vI(r.bundledQuery),readTime:Ut(r.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this.overlays=new Fe(Y.comparator),this.Qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Kn();return V.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),V.resolve()}getOverlaysForCollection(e,n,s){const r=Kn(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return V.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Fe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let f=i.get(d.largestBatchId);f===null&&(f=Kn(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=Kn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=r)););return V.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(s.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Wg(n,s));let i=this.Qr.get(n);i===void 0&&(i=pe(),this.Qr.set(n,i)),this.Qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(){this.$r=new Ne(ht.Ur),this.Kr=new Ne(ht.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new ht(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new ht(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Y(new Se([])),s=new ht(n,e),r=new ht(n,e+1),i=[];return this.Kr.forEachInRange([s,r],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Y(new Se([])),s=new ht(n,e),r=new ht(n,e+1);let i=pe();return this.Kr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ht(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ht{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Y.comparator(e.key,n.key)||de(e.Zr,n.Zr)}static Wr(e,n){return de(e.Zr,n.Zr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ne(ht.Ur)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $g(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Xr=this.Xr.add(new ht(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ti(s),i=r<0?0:r;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?mi:this.nr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ht(n,0),r=new ht(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,r],o=>{const a=this.ei(o.Zr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ne(de);return n.forEach(r=>{const i=new ht(r,0),o=new ht(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{s=s.add(a.Zr)})}),V.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Y.isDocumentKey(i)||(i=i.child(""));const o=new ht(new Y(i),0);let a=new Ne(de);return this.Xr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===r&&(a=a.add(c.Zr)),!0)},o),V.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(s=>{const r=this.ei(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){se(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return V.forEach(n.mutations,r=>{const i=new ht(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new ht(n,0),r=this.Xr.firstAfterOrEqual(s);return V.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this.ii=e,this.docs=function(){return new Fe(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return V.resolve(s?s.document.mutableCopy():Qe.newInvalidDocument(n))}getEntries(e,n){let s=an();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Qe.newInvalidDocument(r))}),V.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=an();const o=n.path,a=new Y(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Rg(dT(f),s)<=0||(r.has(f.key)||dl(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Z(9500)}si(e,n){return V.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new v3(this)}getSize(e){return V.resolve(this.size)}}class v3 extends SI{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(s)}),V.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.persistence=e,this.oi=new js(n=>Pi(n),ul),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this._i=0,this.ai=new Yg,this.targetCount=0,this.ui=Ri.cr()}forEachTarget(e,n){return this.oi.forEach((s,r)=>n(r)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),V.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ri(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Tr(n),V.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),V.waitFor(i).next(()=>r)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return V.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),V.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return V.resolve(s)}containsKey(e,n){return V.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.ci={},this.overlays={},this.li=new _n(0),this.hi=!1,this.hi=!0,this.Pi=new p3,this.referenceDelegate=e(this),this.Ti=new _3(this),this.indexManager=new s3,this.remoteDocumentCache=function(r){return new y3(r)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new gI(n),this.Ei=new f3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new m3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new g3(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){W("MemoryPersistence","Starting transaction:",e);const r=new w3(this.li.next());return this.referenceDelegate.di(),s(r).next(i=>this.referenceDelegate.Ai(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ri(e,n){return V.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class w3 extends fT{constructor(e){super(),this.currentSequenceNumber=e}}class bh{constructor(e){this.persistence=e,this.Vi=new Yg,this.mi=null}static fi(e){return new bh(e)}get gi(){if(this.mi)return this.mi;throw Z(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),V.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.gi,s=>{const r=Y.fromPath(s);return this.pi(e,r).next(i=>{i||n.removeEntry(r,oe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return V.or([()=>V.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Cd{constructor(e,n){this.persistence=e,this.yi=new js(s=>Vt(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=kI(this,n)}static fi(e,n){return new Cd(e,n)}di(){}Ai(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return V.forEach(this.yi,(s,r)=>this.Dr(e,s,r).next(i=>i?V.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,o=>this.Dr(e,o,n).next(a=>{a||(s++,i.removeEntry(o,oe.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),V.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),V.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cu(e.data.value)),n}Dr(e,n,s){return V.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return V.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.serializer=e}q(e,n,s,r){const i=new uh("createOrUpgrade",n);s<1&&r>=1&&(function(c){c.createObjectStore(ll)}(e),function(c){c.createObjectStore(zc,{keyPath:RR}),c.createObjectStore(Cn,{keyPath:ow,autoIncrement:!0}).createIndex(ui,aw,{unique:!0}),c.createObjectStore(Uo)}(e),Yw(e),function(c){c.createObjectStore(ni)}(e));let o=V.resolve();return s<3&&r>=3&&(s!==0&&(function(c){c.deleteObjectStore($o),c.deleteObjectStore(Bo),c.deleteObjectStore(pi)}(e),Yw(e)),o=o.next(()=>function(c){const d=c.store(pi),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:oe.min().toTimestamp(),targetCount:0};return d.put(Td,f)}(i))),s<4&&r>=4&&(s!==0&&(o=o.next(()=>function(c,d){return d.store(Cn).J().next(m=>{c.deleteObjectStore(Cn),c.createObjectStore(Cn,{keyPath:ow,autoIncrement:!0}).createIndex(ui,aw,{unique:!0});const g=d.store(Cn),T=m.map(k=>g.put(k));return V.waitFor(T)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore(qo,{keyPath:UR})})(e)})),s<5&&r>=5&&(o=o.next(()=>this.wi(i))),s<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore(Uc)}(e),this.bi(i)))),s<7&&r>=7&&(o=o.next(()=>this.Si(i))),s<8&&r>=8&&(o=o.next(()=>this.Di(e,i))),s<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),s<10&&r>=10&&(o=o.next(()=>this.Ci(i))),s<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(hh,{keyPath:BR})})(e),function(c){c.createObjectStore(fh,{keyPath:$R})}(e)})),s<12&&r>=12&&(o=o.next(()=>{(function(c){const d=c.createObjectStore(mh,{keyPath:YR});d.createIndex(Qm,XR,{unique:!1}),d.createIndex(wT,JR,{unique:!1})})(e)})),s<13&&r>=13&&(o=o.next(()=>function(c){const d=c.createObjectStore(Ed,{keyPath:jR});d.createIndex(Pu,VR),d.createIndex(gT,OR)}(e)).next(()=>this.Fi(e,i)).next(()=>e.deleteObjectStore(ni))),s<14&&r>=14&&(o=o.next(()=>this.Mi(e,i))),s<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore(Vg,{keyPath:qR,autoIncrement:!0}).createIndex(Km,WR,{unique:!1}),c.createObjectStore(lc,{keyPath:GR}).createIndex(vT,HR,{unique:!1}),c.createObjectStore(uc,{keyPath:KR}).createIndex(_T,QR,{unique:!1})}(e))),s<16&&r>=16&&(o=o.next(()=>{n.objectStore(lc).clear()}).next(()=>{n.objectStore(uc).clear()})),s<17&&r>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(Og,{keyPath:ZR})})(e)})),s<18&&r>=18&&lE()&&(o=o.next(()=>{n.objectStore(lc).clear()}).next(()=>{n.objectStore(uc).clear()})),o}bi(e){let n=0;return e.store(ni).te((s,r)=>{n+=Nd(r)}).next(()=>{const s={byteSize:n};return e.store(Uc).put(Hm,s)})}wi(e){const n=e.store(zc),s=e.store(Cn);return n.J().next(r=>V.forEach(r,i=>{const o=IDBKeyRange.bound([i.userId,mi],[i.userId,i.lastAcknowledgedBatchId]);return s.J(ui,o).next(a=>V.forEach(a,c=>{se(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const d=ri(this.serializer,c);return TI(e,i.userId,d).next(()=>{})}))}))}Si(e){const n=e.store($o),s=e.store(ni);return e.store(pi).get(Td).next(r=>{const i=[];return s.te((o,a)=>{const c=new Se(o),d=function(m){return[0,Vt(m)]}(c);i.push(n.get(d).next(f=>f?V.resolve():(m=>n.put({targetId:0,path:Vt(m),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>V.waitFor(i))})}Di(e,n){e.createObjectStore(Bc,{keyPath:zR});const s=n.store(Bc),r=new Qg,i=o=>{if(r.add(o)){const a=o.lastSegment(),c=o.popLast();return s.put({collectionId:a,parent:Vt(c)})}};return n.store(ni).te({ee:!0},(o,a)=>{const c=new Se(o);return i(c.popLast())}).next(()=>n.store(Uo).te({ee:!0},([o,a,c],d)=>{const f=Hn(a);return i(f.popLast())}))}Ci(e){const n=e.store(Bo);return n.te((s,r)=>{const i=Ka(r),o=yI(this.serializer,i);return n.put(o)})}Fi(e,n){const s=n.store(ni),r=[];return s.te((i,o)=>{const a=n.store(Ed),c=function(m){return m.document?new Y(Se.fromString(m.document.name).popFirst(5)):m.noDocument?Y.fromSegments(m.noDocument.path):m.unknownDocument?Y.fromSegments(m.unknownDocument.path):Z(36783)}(o).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(d))}).next(()=>V.waitFor(r))}Mi(e,n){const s=n.store(Cn),r=AI(this.serializer),i=new Xg(bh.fi,this.serializer.wt);return s.J().next(o=>{const a=new Map;return o.forEach(c=>{var d;let f=(d=a.get(c.userId))!==null&&d!==void 0?d:pe();ri(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),V.forEach(a,(c,d)=>{const f=new _t(d),m=Ih.bt(this.serializer,f),g=i.getIndexManager(f),T=xh.bt(f,this.serializer,g,i.referenceDelegate);return new PI(r,T,m,g).recalculateAndSaveOverlaysForDocumentKeys(new Ym(n,_n.le),c).next()})})}}function Yw(t){t.createObjectStore($o,{keyPath:LR}).createIndex(jg,FR,{unique:!0}),t.createObjectStore(Bo,{keyPath:"targetId"}).createIndex(yT,MR,{unique:!0}),t.createObjectStore(pi)}const Js="IndexedDbPersistence",Nf=18e5,Cf=5e3,Rf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",T3="main";class Jg{constructor(e,n,s,r,i,o,a,c,d,f,m=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=s,this.xi=i,this.window=o,this.document=a,this.Oi=d,this.Ni=f,this.Bi=m,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=g=>Promise.resolve(),!Jg.C())throw new Q(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new l3(this,r),this.Ui=n+T3,this.serializer=new gI(c),this.Ki=new br(this.Ui,this.Bi,new E3(this.serializer)),this.Pi=new XD,this.Ti=new i3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=AI(this.serializer),this.Ei=new YD,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,f===!1&&Ft(Js,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(z.FAILED_PRECONDITION,Rf);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new _n(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ru(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(n=>{n||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(n=>this.isPrimary&&!n?this.Xi(e).next(()=>!1):!!n&&this.es(e).next(()=>!0))).catch(e=>{if(zr(e))return W(Js,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W(Js,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return Ma(e).get(Xi).next(n=>V.resolve(this.ts(n)))}ns(e){return ru(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Nf)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const s=dt(n,qo);return s.J().next(r=>{const i=this._s(r,Nf),o=r.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>s.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Wi)for(const n of e)this.Wi.removeItem(this.us(n.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?V.resolve(!0):Ma(e).get(Xi).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,Cf)&&!this.cs(n.ownerId)){if(this.ts(n)&&this.networkEnabled)return!0;if(!this.ts(n)){if(!n.allowTabSynchronization)throw new Q(z.FAILED_PRECONDITION,Rf);return!1}}return!(!this.networkEnabled||!this.inForeground)||ru(e).J().next(s=>this._s(s,Cf).find(r=>{if(this.clientId!==r.clientId){const i=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W(Js,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[ll,qo],e=>{const n=new Ym(e,_n.le);return this.Xi(n).next(()=>this.ns(n))}),this.Ki.close(),this.Ts()}_s(e,n){return e.filter(s=>this.ss(s.updateTimeMs,n)&&!this.cs(s.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>ru(e).J().next(n=>this._s(n,Nf).map(s=>s.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,n){return xh.bt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new r3(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Ih.bt(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,n,s){W(Js,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",i=function(c){return c===18?nD:c===17?xT:c===16?tD:c===15?Mg:c===14?IT:c===13?TT:c===12?eD:c===11?ET:void Z(60245)}(this.Bi);let o;return this.Ki.runTransaction(e,r,i,a=>(o=new Ym(a,this.li?this.li.next():_n.le),n==="readwrite-primary"?this.Yi(o).next(c=>!!c||this.Zi(o)).next(c=>{if(!c)throw Ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new Q(z.FAILED_PRECONDITION,hT);return s(o)}).next(c=>this.es(o).next(()=>c)):this.Es(o).next(()=>s(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Es(e){return Ma(e).get(Xi).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,Cf)&&!this.cs(n.ownerId)&&!this.ts(n)&&!(this.Ni||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Q(z.FAILED_PRECONDITION,Rf)})}es(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ma(e).put(Xi,n)}static C(){return br.C()}Xi(e){const n=Ma(e);return n.get(Xi).next(s=>this.ts(s)?(W(Js,"Releasing primary lease."),n.delete(Xi)):V.resolve())}ss(e,n){const s=Date.now();return!(e<s-n)&&(!(e>s)||(Ft(`Detected an update time that is in the future: ${e} > ${s}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const n=/(?:Version|Mobile)\/1[456]/;cE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var n;try{const s=((n=this.Wi)===null||n===void 0?void 0:n.getItem(this.us(e)))!==null;return W(Js,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ft(Js,"Failed to get zombied client id.",s),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){Ft("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ma(t){return dt(t,ll)}function ru(t){return dt(t,qo)}function I3(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.ds=s,this.As=r}static Rs(e,n){let s=pe(),r=pe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Zg(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return cE()?8:mT(ut())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new x3;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,s,r){return s.documentReadCount<this.gs?(so()<=_e.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ro(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),V.resolve()):(so()<=_e.DEBUG&&W("QueryEngine","Query:",ro(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ps*r?(so()<=_e.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ro(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):V.resolve())}ws(e,n){if(ww(n))return V.resolve(null);let s=En(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=sp(n,null,"F"),s=En(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=pe(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.vs(n,a);return this.Cs(n,d,o,c.readTime)?this.ws(e,sp(n,null,"F")):this.Fs(e,d,n,c)}))})))}bs(e,n,s,r){return ww(n)||r.isEqual(oe.min())?V.resolve(null):this.ys.getDocuments(e,s).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,s,r)?V.resolve(null):(so()<=_e.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ro(n)),this.Fs(e,o,n,bR(r,Mc)).next(a=>a))})}vs(e,n){let s=new Ne(qT(e));return n.forEach((r,i)=>{dl(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return so()<=_e.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ro(n)),this.ys.getDocumentsMatchingQuery(e,n,un.min(),s)}Fs(e,n,s,r){return this.ys.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="LocalStore",b3=3e8;class k3{constructor(e,n,s,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new Fe(de),this.Os=new js(i=>Pi(i),ul),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function CI(t,e,n,s){return new k3(t,e,n,s)}async function RI(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let c=pe();for(const d of r){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(s,c).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:a}))})})}function S3(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,f){const m=d.batch,g=m.keys();let T=V.resolve();return g.forEach(k=>{T=T.next(()=>f.getEntry(c,k)).next(A=>{const C=d.docVersions.get(k);se(C!==null,48541),A.version.compareTo(C)<0&&(m.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),f.addEntry(A)))})}),T.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let c=pe();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function DI(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function A3(t,e){const n=he(t),s=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const a=[];e.targetChanges.forEach((f,m)=>{const g=r.get(m);if(!g)return;a.push(n.Ti.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,f.addedDocuments,m)));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?T=T.withResumeToken(rt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,s)),r=r.insert(m,T),function(A,C,x){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=b3?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,T,f)&&a.push(n.Ti.updateTargetData(i,T))});let c=an(),d=pe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(P3(i,o,e.documentUpdates).next(f=>{c=f.qs,d=f.Qs})),!s.isEqual(oe.min())){const f=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(f)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.xs=r,i))}function P3(t,e,n){let s=pe(),r=pe();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=an();return n.forEach((a,c)=>{const d=i.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):W(ey,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{qs:o,Qs:r}})}function N3(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=mi),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function C3(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ti.getTargetData(s,e).next(i=>i?(r=i,V.resolve(r)):n.Ti.allocateTargetId(s).next(o=>(r=new vs(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.xs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function dp(t,e,n){const s=he(t),r=s.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!zr(o))throw o;W(ey,`Failed to update sequence numbers for target ${e}: ${o}`)}s.xs=s.xs.remove(e),s.Os.delete(r.target)}function Xw(t,e,n){const s=he(t);let r=oe.min(),i=pe();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const m=he(c),g=m.Os.get(f);return g!==void 0?V.resolve(m.xs.get(g)):m.Ti.getTargetData(d,f)}(s,o,En(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,e,n?r:oe.min(),n?i:pe())).next(a=>(R3(s,yD(e),a),{documents:a,$s:i})))}function R3(t,e,n){let s=t.Ns.get(e)||oe.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ns.set(e,s)}class Jw{constructor(){this.activeTargetIds=ID()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jI{constructor(){this.xo=new Jw,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Jw,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="ConnectivityMonitor";class e2{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){W(Zw,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){W(Zw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu=null;function hp(){return iu===null?iu=function(){return 268435456+Math.round(2147483648*Math.random())}():iu++,"0x"+iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="RestConnection",j3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class V3{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${r}`,this.Go=this.databaseId.database===Id?`project_id=${s}`:`project_id=${s}&database_id=${r}`}zo(e,n,s,r,i){const o=hp(),a=this.jo(e,n.toUriEncodedString());W(Df,`Sending RPC '${e}' ${o}:`,a,s);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,r,i);const{host:d}=new URL(a),f=Oi(d);return this.Jo(e,a,c,s,f).then(m=>(W(Df,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Si(Df,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",s),m})}Yo(e,n,s,r,i,o){return this.zo(e,n,s,r,i)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ca}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}jo(e,n){const s=j3[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class M3 extends V3{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=hp();return new Promise((a,c)=>{const d=new tT;d.setWithCredentials(!0),d.listenOnce(nT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ku.NO_ERROR:const m=d.getResponseJson();W(Pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case ku.TIMEOUT:W(Pt,`RPC '${e}' ${o} timed out`),c(new Q(z.DEADLINE_EXCEEDED,"Request time out"));break;case ku.HTTP_ERROR:const g=d.getStatus();if(W(Pt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T==null?void 0:T.error;if(k&&k.status&&k.message){const A=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(v)>=0?v:z.UNKNOWN}(k.status);c(new Q(A,k.message))}else c(new Q(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Q(z.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{W(Pt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);W(Pt,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",f,s,15)})}I_(e,n,s){const r=hp(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iT(),a=rT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const f=i.join("");W(Pt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const m=o.createWebChannel(f,c);this.E_(m);let g=!1,T=!1;const k=new O3({Zo:C=>{T?W(Pt,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(g||(W(Pt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),g=!0),W(Pt,`RPC '${e}' stream ${r} sending:`,C),m.send(C))},Xo:()=>m.close()}),A=(C,x,v)=>{C.listen(x,b=>{try{v(b)}catch(R){setTimeout(()=>{throw R},0)}})};return A(m,Wa.EventType.OPEN,()=>{T||(W(Pt,`RPC '${e}' stream ${r} transport opened.`),k.__())}),A(m,Wa.EventType.CLOSE,()=>{T||(T=!0,W(Pt,`RPC '${e}' stream ${r} transport closed`),k.u_(),this.d_(m))}),A(m,Wa.EventType.ERROR,C=>{T||(T=!0,Si(Pt,`RPC '${e}' stream ${r} transport errored. Name:`,C.name,"Message:",C.message),k.u_(new Q(z.UNAVAILABLE,"The operation could not be completed")))}),A(m,Wa.EventType.MESSAGE,C=>{var x;if(!T){const v=C.data[0];se(!!v,16349);const b=v,R=(b==null?void 0:b.error)||((x=b[0])===null||x===void 0?void 0:x.error);if(R){W(Pt,`RPC '${e}' stream ${r} received error:`,R);const L=R.status;let M=function(I){const w=et[I];if(w!==void 0)return nI(w)}(L),E=R.message;M===void 0&&(M=z.INTERNAL,E="Unknown error status: "+L+" with message "+R.message),T=!0,k.u_(new Q(M,E)),m.close()}else W(Pt,`RPC '${e}' stream ${r} received:`,v),k.c_(v)}}),A(a,sT.STAT_EVENT,C=>{C.stat===qm.PROXY?W(Pt,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===qm.NOPROXY&&W(Pt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.a_()},0),k}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(){return typeof window<"u"?window:null}function Ou(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t){return new FD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n,s=1e3,r=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=r,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),r=Math.max(0,n-s);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="PersistentStream";class OI{constructor(e,n,s,r,i,o,a,c){this.xi=e,this.S_=s,this.D_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new VI(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Ft(n.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.v_===n&&this.z_(s,r)},s=>{e(()=>{const r=new Q(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(r)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{s(()=>this.j_(r))}),this.stream.onMessage(r=>{s(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return W(t2,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(W(t2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F3 extends OI{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=BD(this.serializer,e),s=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?Ut(o.readTime):oe.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=op(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=xd(c)?{documents:uI(i,c)}:{query:dI(i,c).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=iI(i,o.resumeToken);const d=rp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=Xo(i,o.snapshotVersion.toTimestamp());const d=rp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const s=qD(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=op(this.serializer),n.removeTarget=e,this.Q_(n)}}class z3 extends OI{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=$D(e.writeResults,e.commitTime),s=Ut(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=op(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Sd(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{}class B3 extends U3{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,ip(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(z.UNKNOWN,i.toString())})}Yo(e,n,s,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,ip(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(z.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class $3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ft(n),this.ua=!1):W("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="RemoteStore";class q3{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{s.enqueueAndForget(async()=>{Fi(this)&&(W(Di,"Restarting streams for network reachability change."),await async function(c){const d=he(c);d.da.add(4),await fl(d),d.Va.set("Unknown"),d.da.delete(4),await Sh(d)}(this))})}),this.Va=new $3(s,r)}}async function Sh(t){if(Fi(t))for(const e of t.Aa)await e(!0)}async function fl(t){for(const e of t.Aa)await e(!1)}function MI(t,e){const n=he(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),ry(n)?sy(n):da(n).N_()&&ny(n,e))}function ty(t,e){const n=he(t),s=da(n);n.Ea.delete(e),s.N_()&&LI(n,e),n.Ea.size===0&&(s.N_()?s.k_():Fi(n)&&n.Va.set("Unknown"))}function ny(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}da(t).Z_(e)}function LI(t,e){t.ma.Ke(e),da(t).X_(e)}function sy(t){t.ma=new VD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),da(t).start(),t.Va.ca()}function ry(t){return Fi(t)&&!da(t).O_()&&t.Ea.size>0}function Fi(t){return he(t).da.size===0}function FI(t){t.ma=void 0}async function W3(t){t.Va.set("Online")}async function G3(t){t.Ea.forEach((e,n)=>{ny(t,e)})}async function H3(t,e){FI(t),ry(t)?(t.Va.Pa(e),sy(t)):t.Va.set("Unknown")}async function K3(t,e,n){if(t.Va.set("Online"),e instanceof rI&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ea.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ea.delete(a),r.ma.removeTarget(a))}(t,e)}catch(s){W(Di,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Rd(t,s)}else if(e instanceof ju?t.ma.Xe(e):e instanceof sI?t.ma.ot(e):t.ma.nt(e),!n.isEqual(oe.min()))try{const s=await DI(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.ma.It(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ea.get(d);f&&i.Ea.set(d,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{const f=i.Ea.get(c);if(!f)return;i.Ea.set(c,f.withResumeToken(rt.EMPTY_BYTE_STRING,f.snapshotVersion)),LI(i,c);const m=new vs(f.target,c,d,f.sequenceNumber);ny(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){W(Di,"Failed to raise snapshot:",s),await Rd(t,s)}}async function Rd(t,e,n){if(!zr(e))throw e;t.da.add(1),await fl(t),t.Va.set("Offline"),n||(n=()=>DI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(Di,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Sh(t)})}function zI(t,e){return e().catch(n=>Rd(t,n,e))}async function ml(t){const e=he(t),n=Dr(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:mi;for(;Q3(e);)try{const r=await N3(e.localStore,s);if(r===null){e.Ia.length===0&&n.k_();break}s=r.batchId,Y3(e,r)}catch(r){await Rd(e,r)}UI(e)&&BI(e)}function Q3(t){return Fi(t)&&t.Ia.length<10}function Y3(t,e){t.Ia.push(e);const n=Dr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function UI(t){return Fi(t)&&!Dr(t).O_()&&t.Ia.length>0}function BI(t){Dr(t).start()}async function X3(t){Dr(t).ia()}async function J3(t){const e=Dr(t);for(const n of t.Ia)e.ta(n.mutations)}async function Z3(t,e,n){const s=t.Ia.shift(),r=qg.from(s,e,n);await zI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await ml(t)}async function ej(t,e){e&&Dr(t).ea&&await async function(s,r){if(function(o){return DD(o)&&o!==z.ABORTED}(r.code)){const i=s.Ia.shift();Dr(s).L_(),await zI(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await ml(s)}}(t,e),UI(t)&&BI(t)}async function n2(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),W(Di,"RemoteStore received new credentials");const s=Fi(n);n.da.add(3),await fl(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Sh(n)}async function tj(t,e){const n=he(t);e?(n.da.delete(2),await Sh(n)):e||(n.da.add(2),await fl(n),n.Va.set("Unknown"))}function da(t){return t.fa||(t.fa=function(n,s,r){const i=he(n);return i.oa(),new F3(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:W3.bind(null,t),n_:G3.bind(null,t),i_:H3.bind(null,t),Y_:K3.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),ry(t)?sy(t):t.Va.set("Unknown")):(await t.fa.stop(),FI(t))})),t.fa}function Dr(t){return t.ga||(t.ga=function(n,s,r){const i=he(n);return i.oa(),new z3(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:X3.bind(null,t),i_:ej.bind(null,t),na:J3.bind(null,t),ra:Z3.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await ml(t)):(await t.ga.stop(),t.Ia.length>0&&(W(Di,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new iy(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oy(t,e){if(Ft("AsyncQueue",`${e}: ${t}`),zr(t))return new Q(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Y.comparator(n.key,s.key):(n,s)=>Y.comparator(n.key,s.key),this.keyedMap=Ga(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.pa=new Fe(Y.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Z(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class Jo{constructor(e,n,s,r,i,o,a,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Jo(e,n,Co.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class sj{constructor(){this.queries=r2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=he(n),i=r.queries;r.queries=r2(),i.forEach((o,a)=>{for(const c of a.Sa)c.onError(s)})})(this,new Q(z.ABORTED,"Firestore shutting down"))}}function r2(){return new js(t=>$T(t),vh)}async function $I(t,e){const n=he(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.Da()&&e.va()&&(s=2):(i=new nj,s=e.va()?0:1);try{switch(s){case 0:i.ba=await n.onListen(r,!0);break;case 1:i.ba=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=oy(o,`Initialization of query '${ro(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&ay(n)}async function qI(t,e){const n=he(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.va()?0:1:!i.Da()&&e.va()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function rj(t,e){const n=he(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Ma(r)&&(s=!0);o.ba=r}}s&&ay(n)}function ij(t,e,n){const s=he(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function ay(t){t.Ca.forEach(e=>{e.next()})}var fp,i2;(i2=fp||(fp={})).xa="default",i2.Cache="cache";class WI{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Jo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==fp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.key=e}}class HI{constructor(e){this.key=e}}class oj{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pe(),this.mutatedKeys=pe(),this.Za=qT(e),this.Xa=new Co(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new s2,r=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{const g=r.get(f),T=dl(this.query,m)?m:null,k=!!g&&this.mutatedKeys.has(g.key),A=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let C=!1;g&&T?g.data.isEqual(T.data)?k!==A&&(s.track({type:3,doc:T}),C=!0):this.ru(g,T)||(s.track({type:2,doc:T}),C=!0,(c&&this.Za(T,c)>0||d&&this.Za(T,d)<0)&&(a=!0)):!g&&T?(s.track({type:0,doc:T}),C=!0):g&&!T&&(s.track({type:1,doc:g}),C=!0,(c||d)&&(a=!0)),C&&(T?(o=o.add(T),i=A?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{Xa:o,nu:s,Cs:a,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((f,m)=>function(T,k){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Vt:C})}};return A(T)-A(k)}(f.type,m.type)||this.Za(f.doc,m.doc)),this.iu(s),r=r!=null&&r;const a=n&&!r?this.su():[],c=this.Ya.size===0&&this.current&&!r?1:0,d=c!==this.Ja;return this.Ja=c,o.length!==0||d?{snapshot:new Jo(this.query,e.Xa,i,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new s2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=pe(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new HI(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new GI(s))}),n}au(e){this.Ha=e.$s,this.Ya=pe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Jo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const cy="SyncEngine";class aj{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class cj{constructor(e){this.key=e,this.cu=!1}}class lj{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new js(a=>$T(a),vh),this.Pu=new Map,this.Tu=new Set,this.Iu=new Fe(Y.comparator),this.Eu=new Map,this.du=new Yg,this.Au={},this.Ru=new Map,this.Vu=Ri.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function uj(t,e,n=!0){const s=ZI(t);let r;const i=s.hu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.uu()):r=await KI(s,e,n,!0),r}async function dj(t,e){const n=ZI(t);await KI(n,e,!0,!1)}async function KI(t,e,n,s){const r=await C3(t.localStore,En(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await hj(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&MI(t.remoteStore,r),a}async function hj(t,e,n,s,r){t.fu=(m,g,T)=>async function(A,C,x,v){let b=C.view.tu(x);b.Cs&&(b=await Xw(A.localStore,C.query,!1).then(({documents:E})=>C.view.tu(E,b)));const R=v&&v.targetChanges.get(C.targetId),L=v&&v.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(b,A.isPrimaryClient,R,L);return a2(A,C.targetId,M.ou),M.snapshot}(t,m,g,T);const i=await Xw(t.localStore,e,!0),o=new oj(e,i.$s),a=o.tu(i.documents),c=hl.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),d=o.applyChanges(a,t.isPrimaryClient,c);a2(t,n,d.ou);const f=new aj(e,n,o);return t.hu.set(e,f),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function fj(t,e,n){const s=he(t),r=s.hu.get(e),i=s.Pu.get(r.targetId);if(i.length>1)return s.Pu.set(r.targetId,i.filter(o=>!vh(o,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await dp(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&ty(s.remoteStore,r.targetId),mp(s,r.targetId)}).catch(Li)):(mp(s,r.targetId),await dp(s.localStore,r.targetId,!0))}async function mj(t,e){const n=he(t),s=n.hu.get(e),r=n.Pu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ty(n.remoteStore,s.targetId))}async function pj(t,e,n){const s=ex(t);try{const r=await function(o,a){const c=he(o),d=We.now(),f=a.reduce((T,k)=>T.add(k.key),pe());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let k=an(),A=pe();return c.Bs.getEntries(T,f).next(C=>{k=C,k.forEach((x,v)=>{v.isValidDocument()||(A=A.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,k)).next(C=>{m=C;const x=[];for(const v of a){const b=CD(v,m.get(v.key).overlayedDocument);b!=null&&x.push(new Vs(v.key,b,jT(b.value.mapValue),jt.exists(!0)))}return c.mutationQueue.addMutationBatch(T,d,x,a)}).next(C=>{g=C;const x=C.applyToLocalDocumentSet(m,A);return c.documentOverlayCache.saveOverlays(T,C.batchId,x)})}).then(()=>({batchId:g.batchId,changes:GT(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let d=o.Au[o.currentUser.toKey()];d||(d=new Fe(de)),d=d.insert(a,c),o.Au[o.currentUser.toKey()]=d}(s,r.batchId,n),await pl(s,r.changes),await ml(s.remoteStore)}catch(r){const i=oy(r,"Failed to persist write");n.reject(i)}}async function QI(t,e){const n=he(t);try{const s=await A3(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Eu.get(i);o&&(se(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.cu=!0:r.modifiedDocuments.size>0?se(o.cu,14607):r.removedDocuments.size>0&&(se(o.cu,42227),o.cu=!1))}),await pl(n,s,e)}catch(s){await Li(s)}}function o2(t,e,n){const s=he(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.hu.forEach((i,o)=>{const a=o.view.Fa(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const c=he(o);c.onlineState=a;let d=!1;c.queries.forEach((f,m)=>{for(const g of m.Sa)g.Fa(a)&&(d=!0)}),d&&ay(c)}(s.eventManager,e),r.length&&s.lu.Y_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function gj(t,e,n){const s=he(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Eu.get(e),i=r&&r.key;if(i){let o=new Fe(Y.comparator);o=o.insert(i,Qe.newNoDocument(i,oe.min()));const a=pe().add(i),c=new Th(oe.min(),new Map,new Fe(de),o,a);await QI(s,c),s.Iu=s.Iu.remove(i),s.Eu.delete(e),ly(s)}else await dp(s.localStore,e,!1).then(()=>mp(s,e,n)).catch(Li)}async function yj(t,e){const n=he(t),s=e.batch.batchId;try{const r=await S3(n.localStore,e);XI(n,s,null),YI(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await pl(n,r)}catch(r){await Li(r)}}async function vj(t,e,n){const s=he(t);try{const r=await function(o,a){const c=he(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,a).next(m=>(se(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(s.localStore,e);XI(s,e,n),YI(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await pl(s,r)}catch(r){await Li(r)}}function YI(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function XI(t,e,n){const s=he(t);let r=s.Au[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Au[s.currentUser.toKey()]=r}}function mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Pu.get(e))t.hu.delete(s),n&&t.lu.gu(s,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(s=>{t.du.containsKey(s)||JI(t,s)})}function JI(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(ty(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),ly(t))}function a2(t,e,n){for(const s of n)s instanceof GI?(t.du.addReference(s.key,e),_j(t,s)):s instanceof HI?(W(cy,"Document no longer in limbo: "+s.key),t.du.removeReference(s.key,e),t.du.containsKey(s.key)||JI(t,s.key)):Z(19791,{pu:s})}function _j(t,e){const n=e.key,s=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(s)||(W(cy,"New document in limbo: "+n),t.Tu.add(s),ly(t))}function ly(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Y(Se.fromString(e)),s=t.Vu.next();t.Eu.set(s,new cj(n)),t.Iu=t.Iu.insert(n,s),MI(t.remoteStore,new vs(En(yh(n.path)),s,"TargetPurposeLimboResolution",_n.le))}}async function pl(t,e,n){const s=he(t),r=[],i=[],o=[];s.hu.isEmpty()||(s.hu.forEach((a,c)=>{o.push(s.fu(c,e,n).then(d=>{var f;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;s.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){r.push(d);const m=Zg.Rs(c.targetId,d);i.push(m)}}))}),await Promise.all(o),s.lu.Y_(r),await async function(c,d){const f=he(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(d,g=>V.forEach(g.ds,T=>f.persistence.referenceDelegate.addReference(m,g.targetId,T)).next(()=>V.forEach(g.As,T=>f.persistence.referenceDelegate.removeReference(m,g.targetId,T)))))}catch(m){if(!zr(m))throw m;W(ey,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const T=f.xs.get(g),k=T.snapshotVersion,A=T.withLastLimboFreeSnapshotVersion(k);f.xs=f.xs.insert(g,A)}}}(s.localStore,i))}async function wj(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){W(cy,"User change. New user:",e.toKey());const s=await RI(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(a=>{a.forEach(c=>{c.reject(new Q(z.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await pl(n,s.ks)}}function Ej(t,e){const n=he(t),s=n.Eu.get(e);if(s&&s.cu)return pe().add(s.key);{let r=pe();const i=n.Pu.get(e);if(!i)return r;for(const o of i){const a=n.hu.get(o);r=r.unionWith(a.view.eu)}return r}}function ZI(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=QI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ej.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gj.bind(null,e),e.lu.Y_=rj.bind(null,e.eventManager),e.lu.gu=ij.bind(null,e.eventManager),e}function ex(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vj.bind(null,e),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return CI(this.persistence,new NI,e.initialUser,this.serializer)}Su(e){return new Xg(bh.fi,this.serializer)}bu(e){return new jI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class Tj extends Yc{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){se(this.persistence.referenceDelegate instanceof Cd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new bI(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new Xg(s=>Cd.fi(s,n),this.serializer)}}class Ij extends Yc{constructor(e,n,s){super(),this.Fu=e,this.cacheSizeBytes=n,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Fu.initialize(this,e),await ex(this.Fu.syncEngine),await ml(this.Fu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Du(e){return CI(this.persistence,new NI,e.initialUser,this.serializer)}vu(e,n){const s=this.persistence.referenceDelegate.garbageCollector;return new bI(s,e.asyncQueue,n)}Cu(e,n){const s=new PR(n,this.persistence);return new AR(e.asyncQueue,s)}Su(e){const n=I3(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new Jg(this.synchronizeTabs,n,e.clientId,s,e.asyncQueue,L3(),Ou(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new jI}}class Dd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>o2(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=wj.bind(null,this.syncEngine),await tj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sj}()}createDatastore(e){const n=kh(e.databaseInfo.databaseId),s=function(i){return new M3(i)}(e.databaseInfo);return function(i,o,a,c){return new B3(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new q3(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>o2(this.syncEngine,n,0),function(){return e2.C()?new e2:new D3}())}createSyncEngine(e,n){return function(r,i,o,a,c,d,f){const m=new lj(r,i,o,a,c,d);return f&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=he(r);W(Di,"RemoteStore shutting down."),i.da.add(5),await fl(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dd.provider={build:()=>new Dd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ft("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="FirestoreClient";class xj{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=_t.UNAUTHENTICATED,this.clientId=lT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{W(jr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(W(jr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=oy(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function jf(t,e){t.asyncQueue.verifyOperationInProgress(),W(jr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await RI(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function c2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bj(t);W(jr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>n2(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>n2(e.remoteStore,r)),t._onlineComponents=e}async function bj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(jr,"Using user provided OfflineComponentProvider");try{await jf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Si("Error using user provided cache. Falling back to memory cache: "+n),await jf(t,new Yc)}}else W(jr,"Using default OfflineComponentProvider"),await jf(t,new Tj(void 0));return t._offlineComponents}async function nx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(jr,"Using user provided OnlineComponentProvider"),await c2(t,t._uninitializedComponentsProvider._online)):(W(jr,"Using default OnlineComponentProvider"),await c2(t,new Dd))),t._onlineComponents}function kj(t){return nx(t).then(e=>e.syncEngine)}async function sx(t){const e=await nx(t),n=e.eventManager;return n.onListen=uj.bind(null,e.syncEngine),n.onUnlisten=fj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mj.bind(null,e.syncEngine),n}function Sj(t,e,n={}){const s=new ss;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const f=new tx({next:g=>{f.xu(),o.enqueueAndForget(()=>qI(i,m));const T=g.docs.has(a);!T&&g.fromCache?d.reject(new Q(z.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&c&&c.source==="server"?d.reject(new Q(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new WI(yh(a.path),f,{includeMetadataChanges:!0,Qa:!0});return $I(i,m)}(await sx(t),t.asyncQueue,e,n,s)),s.promise}function Aj(t,e,n={}){const s=new ss;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const f=new tx({next:g=>{f.xu(),o.enqueueAndForget(()=>qI(i,m)),g.fromCache&&c.source==="server"?d.reject(new Q(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new WI(a,f,{includeMetadataChanges:!0,Qa:!0});return $I(i,m)}(await sx(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e,n){if(!n)throw new Q(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Pj(t,e,n,s){if(e===!0&&s===!0)throw new Q(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function u2(t){if(!Y.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function d2(t){if(Y.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ah(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function xn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ah(t);throw new Q(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="firestore.googleapis.com",h2=!0;class f2{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ox,this.ssl=h2}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:h2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o3)throw new Q(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rx((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ph{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new gR;switch(s.type){case"firstParty":return new wR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Q(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=l2.get(n);s&&(W("ComponentProvider","Removing Datastore"),l2.delete(n),s.terminate())}(this),Promise.resolve()}}function Nj(t,e,n,s={}){var r;t=xn(t,Ph);const i=Oi(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(yg(`https://${c}`),vg("Firestore",!0)),o.host!==ox&&o.host!==c&&Si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:s});if(!Ti(d,a)&&(t._setSettings(d),s.mockUserToken)){let f,m;if(typeof s.mockUserToken=="string")f=s.mockUserToken,m=_t.MOCK_USER;else{f=VA(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new Q(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new _t(g)}t._authCredentials=new yR(new aT(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class Bt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}}class kr extends zi{constructor(e,n,s){super(e,n,yh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Y(e))}withConverter(e){return new kr(this.firestore,e,this._path)}}function rn(t,e,...n){if(t=st(t),ix("collection","path",e),t instanceof Ph){const s=Se.fromString(e,...n);return d2(s),new kr(t,null,s)}{if(!(t instanceof Bt||t instanceof kr))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Se.fromString(e,...n));return d2(s),new kr(t.firestore,null,s)}}function nt(t,e,...n){if(t=st(t),arguments.length===1&&(e=lT.newId()),ix("doc","path",e),t instanceof Ph){const s=Se.fromString(e,...n);return u2(s),new Bt(t,null,new Y(s))}{if(!(t instanceof Bt||t instanceof kr))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Se.fromString(e,...n));return u2(s),new Bt(t.firestore,t instanceof kr?t.converter:null,new Y(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="AsyncQueue";class p2{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new VI(this,"async_queue_retry"),this.rc=()=>{const s=Ou();s&&W(m2,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=Ou();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Ou();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ss;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!zr(e))throw e;W(m2,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Ft("INTERNAL UNHANDLED ERROR: ",g2(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const r=iy.createAndSchedule(this,e,n,s,i=>this.uc(i));return this.Zu.push(r),r}oc(){this.Xu&&Z(47125,{cc:g2(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function g2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Br extends Ph{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new p2,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p2(e),this._firestoreClient=void 0,await e}}}function Cj(t,e){const n=typeof t=="object"?t:Eg(),s=typeof t=="string"?t:Id,r=oh(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=rE("firestore");i&&Nj(r,...i)}return r}function uy(t){if(t._terminated)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ax(t),t._firestoreClient}function ax(t){var e,n,s;const r=t._freezeSettings(),i=function(a,c,d,f){return new rD(a,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,rx(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new xj(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}function Rj(t,e){Si("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Dj(t,Dd.provider,{build:s=>new Ij(s,n.cacheSizeBytes,void 0)}),Promise.resolve()}function Dj(t,e,n){if((t=xn(t,Br))._firestoreClient||t._terminated)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Q(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},ax(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zo(rt.fromBase64String(e))}catch(n){throw new Q(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zo(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=/^__.*__$/;class Vj{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new ua(e,this.data,n,this.fieldTransforms)}}class cx{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ic:t})}}class my{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new my(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:s,Rc:!1});return r.Vc(e),r}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:s,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return jd(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(lx(this.Ic)&&jj.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Oj{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||kh(e)}bc(e,n,s,r=!1){return new my({Ic:e,methodName:n,wc:s,path:Be.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ch(t){const e=t._freezeSettings(),n=kh(t._databaseId);return new Oj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ux(t,e,n,s,r,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,r);py("Data must be an object, but it was:",o,s);const a=dx(s,o);let c,d;if(i.merge)c=new Kt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=pp(e,m,n);if(!o.contains(g))throw new Q(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);fx(f,g)||f.push(g)}c=new Kt(f),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new Vj(new Dt(a),c,d)}class Rh extends dy{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rh}}function Mj(t,e,n,s){const r=t.bc(1,e,n);py("Data must be an object, but it was:",r,s);const i=[],o=Dt.empty();Ur(s,(c,d)=>{const f=gy(e,c,n);d=st(d);const m=r.mc(f);if(d instanceof Rh)i.push(f);else{const g=gl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const a=new Kt(i);return new cx(o,a,r.fieldTransforms)}function Lj(t,e,n,s,r,i){const o=t.bc(1,e,n),a=[pp(e,s,n)],c=[r];if(i.length%2!=0)throw new Q(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(pp(e,i[g])),c.push(i[g+1]);const d=[],f=Dt.empty();for(let g=a.length-1;g>=0;--g)if(!fx(d,a[g])){const T=a[g];let k=c[g];k=st(k);const A=o.mc(T);if(k instanceof Rh)d.push(T);else{const C=gl(k,A);C!=null&&(d.push(T),f.set(T,C))}}const m=new Kt(d);return new cx(f,m,o.fieldTransforms)}function Fj(t,e,n,s=!1){return gl(n,t.bc(s?4:3,e))}function gl(t,e){if(hx(t=st(t)))return py("Unsupported field value:",e,t),dx(t,e);if(t instanceof dy)return function(s,r){if(!lx(r.Ic))throw r.gc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let c=gl(a,r.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=st(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return xD(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=We.fromDate(s);return{timestampValue:Xo(r.serializer,i)}}if(s instanceof We){const i=new We(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Xo(r.serializer,i)}}if(s instanceof hy)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Zo)return{bytesValue:iI(r.serializer,s._byteString)};if(s instanceof Bt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hg(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof fy)return function(o,a){return{mapValue:{fields:{[Fg]:{stringValue:zg},[Wo]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.gc("VectorValues must only contain numeric values.");return Bg(a.serializer,d)})}}}}}}(s,r);throw r.gc(`Unsupported field value: ${Ah(s)}`)}(t,e)}function dx(t,e){const n={};return bT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(t,(s,r)=>{const i=gl(r,e.Ac(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function hx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof hy||t instanceof Zo||t instanceof Bt||t instanceof dy||t instanceof fy)}function py(t,e,n){if(!hx(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=Ah(n);throw s==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+s)}}function pp(t,e,n){if((e=st(e))instanceof Nh)return e._internalPath;if(typeof e=="string")return gy(t,e);throw jd("Field path arguments must be of type string or ",t,!1,void 0,n)}const zj=new RegExp("[~\\*/\\[\\]]");function gy(t,e,n){if(e.search(zj)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Nh(...e.split("."))._internalPath}catch{throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jd(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new Q(z.INVALID_ARGUMENT,a+t+c)}function fx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Uj extends mx{data(){return super.data()}}function Dh(t,e){return typeof e=="string"?gy(t,e):e instanceof Nh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yy{}class px extends yy{}function Qn(t,e,...n){let s=[];e instanceof yy&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof vy).length,a=i.filter(c=>c instanceof jh).length;if(o>1||o>0&&a>0)throw new Q(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class jh extends px{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new jh(e,n,s)}_apply(e){const n=this._parse(e);return gx(e._query,n),new zi(e.firestore,e.converter,np(e._query,n))}_parse(e){const n=Ch(e.firestore);return function(i,o,a,c,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Q(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){v2(m,f);const k=[];for(const A of m)k.push(y2(c,i,A));g={arrayValue:{values:k}}}else g=y2(c,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||v2(m,f),g=Fj(a,o,m,f==="in"||f==="not-in");return we.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ct(t,e,n){const s=e,r=Dh("where",t);return jh._create(r,s,n)}class vy extends yy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vy(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ae.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const c of a)gx(o,c),o=np(o,c)}(e._query,n),new zi(e.firestore,e.converter,np(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _y extends px{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _y(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hc(i,o)}(e._query,this._field,this._direction);return new zi(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new la(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Yn(t,e="asc"){const n=e,s=Dh("orderBy",t);return _y._create(s,n)}function y2(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new Q(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BT(e)&&n.indexOf("/")!==-1)throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Se.fromString(n));if(!Y.isDocumentKey(s))throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Wc(t,new Y(s))}if(n instanceof Bt)return Wc(t,n._key);throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ah(n)}.`)}function v2(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gx(t,e){const n=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $j{convertValue(e,n="none"){switch(Cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ur(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[Wo].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>Me(o.doubleValue));return new fy(i)}convertGeoPoint(e){return new hy(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ph(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){const n=As(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Se.fromString(e);se(pI(s),9688,{name:e});const r=new Ai(s.get(1),s.get(3)),i=new Y(s.popFirst(5));return r.isEqual(n)||Ft(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vx extends mx{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Dh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Mu extends vx{data(e={}){return super.data(e)}}class qj{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Qa(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Mu(this._firestore,this._userDataWriter,s.key,s,new Qa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const c=new Mu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Qa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Mu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Qa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:Wj(a.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Wj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(t){t=xn(t,Bt);const e=xn(t.firestore,Br);return Sj(uy(e),t._key).then(n=>Gj(e,t,n))}class _x extends $j{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function Xn(t){t=xn(t,zi);const e=xn(t.firestore,Br),n=uy(e),s=new _x(e);return Bj(t._query),Aj(n,t._query).then(r=>new qj(e,s,t,r))}function Vd(t,e,n){t=xn(t,Bt);const s=xn(t.firestore,Br),r=yx(t.converter,e,n);return Vh(s,[ux(Ch(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,jt.none())])}function Sr(t,e,n,...s){t=xn(t,Bt);const r=xn(t.firestore,Br),i=Ch(r);let o;return o=typeof(e=st(e))=="string"||e instanceof Nh?Lj(i,"updateDoc",t._key,e,n,s):Mj(i,"updateDoc",t._key,e),Vh(r,[o.toMutation(t._key,jt.exists(!0))])}function wy(t){return Vh(xn(t.firestore,Br),[new Eh(t._key,jt.none())])}function Ey(t,e){const n=xn(t.firestore,Br),s=nt(t),r=yx(t.converter,e);return Vh(n,[ux(Ch(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,jt.exists(!1))]).then(()=>s)}function Vh(t,e){return function(s,r){const i=new ss;return s.asyncQueue.enqueueAndForget(async()=>pj(await kj(s),r,i)),i.promise}(uy(t),e)}function Gj(t,e,n){const s=n.docs.get(e._key),r=new _x(t);return new vx(t,r,e._key,s,new Qa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){ca=r})(oa),Ii(new Nr("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Br(new vR(s.getProvider("auth-internal")),new ER(o,s.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ai(d.options.projectId,f)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),es(X_,J_,e),es(X_,J_,"esm2017")})();var Hj="firebase",Kj="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(Hj,Kj,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n,s,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,sn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||s.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r==null||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="us-central1";class Yj{constructor(e,n,s,r,i=gp,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Qj(e,n,s,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=gp}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Xj(t,e,n){const s=Oi(e);t.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(yg(t.emulatorOrigin),vg("Functions",!0))}const _2="@firebase/functions",w2="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj="auth-internal",Zj="app-check-internal",eV="messaging-internal";function tV(t){const e=(n,{instanceIdentifier:s})=>{const r=n.getProvider("app").getImmediate(),i=n.getProvider(Jj),o=n.getProvider(eV),a=n.getProvider(Zj);return new Yj(r,i,o,a,s)};Ii(new Nr(wx,e,"PUBLIC").setMultipleInstances(!0)),es(_2,w2,t),es(_2,w2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t=Eg(),e=gp){const s=oh(st(t),wx).getImmediate({identifier:e}),r=rE("functions");return r&&sV(s,...r),s}function sV(t,e,n){Xj(st(t),e,n)}tV();const rV={apiKey:"AIzaSyBn2jG-T2SesKFr0TsfeQa04wlBmDeEoG4",authDomain:"clarity-311c3.firebaseapp.com",projectId:"clarity-311c3",storageBucket:"clarity-311c3.firebasestorage.app",messagingSenderId:"459484415688",appId:"1:459484415688:web:bac719ee243bbd9821c7fd"},Ty=fE(rV),di=ZE(Ty),Ie=Cj(Ty);Rj(Ie).catch(t=>{t.code==="failed-precondition"?console.warn("Firestore persistence failed: multiple tabs open"):t.code==="unimplemented"&&console.warn("Firestore persistence is not available in this browser")});nV(Ty,"us-central1");const Ex=P.createContext(),bn=()=>{const t=P.useContext(Ex);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Tx=({children:t})=>{const[e,n]=P.useState(null),[s,r]=P.useState(null),[i,o]=P.useState("free"),[a,c]=P.useState(!0),[d,f]=P.useState(!1),m=P.useRef(!0),g=(R,L)=>{if(!R||!L)return{isTrialActive:!1,daysRemaining:0};const M=L.seconds?new Date(L.seconds*1e3):new Date(L),E=new Date,y=E<M,I=Math.ceil((M-E)/(24*60*60*1e3));return{isTrialActive:y,daysRemaining:Math.max(0,I),trialEndDate:M}},T=async R=>{try{const L=await ha(nt(Ie,"users",R));if(L.exists()){const M=L.data(),E=g(M.trialStartDate,M.trialEndDate);if(console.log(" Profile Data:",M),console.log(" Trial Status:",E),!m.current)return;if(M.subscription==="trial"&&!E.isTrialActive){const y={...M,subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date};await Sr(nt(Ie,"users",R),{subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date}),m.current&&(r({...y,...E}),o("free"))}else m.current&&(r({...M,...E}),o(M.subscription))}}catch(L){console.error("Error fetching user profile:",L),m.current&&c(!1)}};P.useEffect(()=>rC(di,async L=>{console.log(" Auth state changed:",L?"User logged in":"User logged out");try{if(!m.current)return;n(L),f(!!L),L?await T(L.uid):m.current&&(r(null),o("free"))}catch(M){console.error("Error in auth state change:",M)}finally{m.current&&c(!1)}}),[]),P.useEffect(()=>()=>{m.current=!1},[]);const k=async(R,L,M={})=>{try{const{user:E}=await zE(di,R,L),y={email:E.email,uid:E.uid,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date,firstName:M.firstName||"",lastName:M.lastName||"",exerciseGoalMinutes:M.exerciseGoalMinutes||30,waterGoalOz:M.waterGoalOz||64,meditationGoalMinutes:M.meditationGoalMinutes||10};if(await Vd(nt(Ie,"users",E.uid),y),m.current){const I=g(y.trialStartDate,y.trialEndDate);r({...y,...I}),o("trial")}return{success:!0,user:E}}catch(E){throw console.error("Signup error:",E),E}},A=async(R,L)=>{try{const{user:M}=await UE(di,R,L);return console.log(" Login successful, Firebase will trigger auth state change"),{success:!0,user:M}}catch(M){throw console.error("Login error:",M),M}},C=async()=>{try{return await BE(di),m.current&&(n(null),r(null),o("free"),f(!1)),{success:!0}}catch(R){throw console.error("Logout error:",R),R}},x=async()=>{try{if(e!=null&&e.uid){const R={subscription:"premium",subscriptionStatus:"premium_paid",premiumStartDate:new Date,updatedAt:new Date};return await Sr(nt(Ie,"users",e.uid),R),m.current&&(o("premium"),r(L=>({...L,...R}))),{success:!0}}}catch(R){throw console.error("Error upgrading to premium:",R),R}},v=async()=>{try{if(e!=null&&e.uid){const R={subscription:"free",subscriptionCancelledAt:new Date,updatedAt:new Date};return await Sr(nt(Ie,"users",e.uid),R),m.current&&(o("free"),r(L=>({...L,...R}))),{success:!0}}}catch(R){throw console.error("Error cancelling subscription:",R),R}},b={user:e,userProfile:s,userSubscription:i,isAuthenticated:d,isPremium:i==="premium"||i==="trial",isTrialActive:(s==null?void 0:s.isTrialActive)||!1,trialDaysRemaining:(s==null?void 0:s.daysRemaining)||0,loading:a,signup:k,login:A,logout:C,upgradeToPremium:x,cancelSubscription:v,fetchUserProfile:T,authKey:(e==null?void 0:e.uid)||"no-user"};return u.jsx(Ex.Provider,{value:b,children:t})},Ix="/assets/Logo-BuPYrDrj.png";var xx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},E2=_s.createContext&&_s.createContext(xx),iV=["attr","size","title"];function oV(t,e){if(t==null)return{};var n=aV(t,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function aV(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Od.apply(this,arguments)}function T2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Md(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T2(Object(n),!0).forEach(function(s){cV(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T2(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function cV(t,e,n){return e=lV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lV(t){var e=uV(t,"string");return typeof e=="symbol"?e:e+""}function uV(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bx(t){return t&&t.map((e,n)=>_s.createElement(e.tag,Md({key:n},e.attr),bx(e.child)))}function dV(t){return e=>_s.createElement(hV,Od({attr:Md({},t.attr)},e),bx(t.child))}function hV(t){var e=n=>{var{attr:s,size:r,title:i}=t,o=oV(t,iV),a=r||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),_s.createElement("svg",Od({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:c,style:Md(Md({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&_s.createElement("title",null,i),t.children)};return E2!==void 0?_s.createElement(E2.Consumer,null,n=>e(n)):e(xx)}function fV(t){return dV({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(t)}async function mV(t,e){try{const n=nt(Ie,"users",t),s=await ha(n);let r=0;return s.exists()&&typeof s.data().points=="number"&&(r=s.data().points),await Sr(n,{points:r+e,updatedAt:new Date}),{success:!0,newPoints:r+e}}catch(n){return console.error("Error adding points:",n),{success:!1,error:n}}}async function pV(t,e){try{const n=nt(Ie,"users",t),s=await ha(n);let r=0;return s.exists()&&typeof s.data().points=="number"&&(r=s.data().points),r<e?{success:!1,error:"Not enough points"}:(await Sr(n,{points:r-e,updatedAt:new Date}),{success:!0,newPoints:r-e})}catch(n){return console.error("Error deducting points:",n),{success:!1,error:n}}}async function gV(t){try{const e=nt(Ie,"users",t),n=await ha(e);return n.exists()&&typeof n.data().points=="number"?n.data().points:0}catch(e){return console.error("Error getting points:",e),0}}async function yV(t,e,n="daily"){try{const s=new Date;let r;if(n==="daily")r=s.toISOString().split("T")[0];else if(n==="weekly"){const o=s.getFullYear(),a=Math.ceil(((s-new Date(o,0,1))/864e5+new Date(o,0,1).getDay()+1)/7);r=`${o}-W${a}`}else r="unknown";const i=nt(Ie,`users/${t}/challenges`,`${e}_${r}`);return await Vd(i,{challengeId:e,period:n,periodKey:r,completedAt:new Date}),{success:!0}}catch(s){return console.error("Error completing challenge:",s),{success:!1,error:s}}}async function vV(t,e,n="daily"){try{const s=new Date;let r;if(n==="daily")r=s.toISOString().split("T")[0];else if(n==="weekly"){const a=s.getFullYear(),c=Math.ceil(((s-new Date(a,0,1))/864e5+new Date(a,0,1).getDay()+1)/7);r=`${a}-W${c}`}else r="unknown";const i=nt(Ie,`users/${t}/challenges`,`${e}_${r}`);return(await ha(i)).exists()}catch(s){return console.error("Error checking challenge completion:",s),!1}}const Ee={async register(t){try{const e=await zE(di,t.email,t.password);return await Vd(nt(Ie,"users",e.user.uid),{username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,exerciseGoalMinutes:t.exerciseGoalMinutes||30,waterGoalOz:t.waterGoalOz||64,meditationGoalMinutes:t.meditationGoalMinutes||10,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date}),{user:e.user}}catch(e){throw new Error(e.message)}},async login(t,e){try{return{user:(await UE(di,t,e)).user}}catch{throw new Error("Invalid credentials")}},async logout(){try{return await BE(di),{message:"success"}}catch(t){throw new Error(t.message)}},async getUserProfile(t){try{const e=await ha(nt(Ie,"users",t));if(!e.exists())throw new Error("User not found");return{user:{id:t,...e.data()}}}catch(e){throw new Error(e.message)}},async updateUserProfile(t,e){try{const n=nt(Ie,"users",t);return await Vd(n,{...e,updatedAt:new Date},{merge:!0}),{user:{id:t,...e}}}catch(n){throw new Error("Error updating profile: "+n.message)}},addPoints:mV,deductPoints:pV,getPoints:gV,completeChallenge:yV,isChallengeCompleted:vV};function _V(){const{user:t,logout:e}=bn(),n=sh(),[s,r]=P.useState(!1),[i,o]=P.useState(null),[a,c]=P.useState(!1),d=P.useRef();P.useEffect(()=>{const k=async()=>{if(t!=null&&t.uid)try{c(!0);const A=await Ee.getUserProfile(t.uid);o(A.user)}catch(A){console.error("Error fetching user profile:",A)}finally{c(!1)}};t!=null&&t.uid&&k()},[t]);const f=k=>{k.stopPropagation(),r(!s)};P.useEffect(()=>{if(!s)return;const k=A=>{d.current&&!d.current.contains(A.target)&&r(!1)};return document.addEventListener("click",k),()=>document.removeEventListener("click",k)},[s]);const m=async k=>{k.preventDefault(),r(!1);try{await e(),n("/welcome")}catch(A){console.error("Error logging out:",A),n("/welcome")}},g=()=>{r(!1),n("/profile")};if(!t)return null;const T="profile-dropdown"+(s?"":" hidden");return u.jsxs("div",{className:"profile-button-container",children:[u.jsx("button",{onClick:f,className:"profile-button",children:u.jsx(fV,{className:"profile-icon"})}),u.jsxs("ul",{className:T,ref:d,children:[u.jsx("li",{className:"profile-info",children:u.jsx("div",{className:"user-details",children:u.jsx("span",{className:"user-name",children:i!=null&&i.firstName&&(i!=null&&i.lastName)?`${i.firstName} ${i.lastName}`:(i==null?void 0:i.username)||"User"})})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:g,className:"dropdown-button",children:" Edit Profile"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>{r(!1),n("/dashboard")},className:"dropdown-button",children:" Dashboard"})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:m,className:"dropdown-button logout-button",children:" Sign Out"})})]})]})}function wV(){const{userSubscription:t,isTrialActive:e,trialDaysRemaining:n,upgradeToPremium:s}=bn();if(t==="premium"||t==="free"||!e)return null;const r=n<=3,i=(14-n)/14*100,o=()=>n===1?"Last day of premium!":n<=3?`Only ${n} days left!`:`${n} days remaining`,a=()=>n===1?"Keep Premium - $4.99/mo":n<=3?"Don't Lose Premium!":"Keep Premium - $4.99/mo";return u.jsxs("div",{className:`trial-banner ${r?"urgent":""}`,children:[u.jsxs("div",{className:"trial-content",children:[u.jsxs("div",{className:"trial-info",children:[u.jsx("span",{className:"trial-icon",children:r?"":""}),u.jsxs("div",{className:"trial-text",children:[u.jsx("h4",{children:r?"Premium Trial Ending!":"Premium Trial Active"}),u.jsx("p",{children:o()})]})]}),u.jsx("button",{onClick:s,className:"trial-upgrade-btn",children:a()})]}),u.jsx("div",{className:"trial-progress",children:u.jsx("div",{className:"trial-progress-bar",style:{width:`${i}%`}})})]})}function EV(){return u.jsxs("div",{className:"navigation-container",children:[u.jsxs("div",{className:"top-header",children:[u.jsxs("div",{className:"logo-container",children:[u.jsx("img",{src:Ix,alt:"Clarity logo",className:"logo"}),u.jsx("span",{className:"logo-text",children:"Your Mind + Wellness Tracker"})]}),u.jsx(_V,{})]}),u.jsx(wV,{}),u.jsx("main",{className:"main-content",children:u.jsx(uA,{})}),u.jsxs("nav",{className:"bottom-navigation",children:[u.jsxs(Yi,{to:"/dashboard",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Home"})]}),u.jsxs(Yi,{to:"/workout",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Workout"})]}),u.jsxs(Yi,{to:"/meditation",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Meditate"})]}),u.jsxs(Yi,{to:"/water",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Water"})]}),u.jsxs(Yi,{to:"/games",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Games"})]}),u.jsxs(Yi,{to:"/goals",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:""}),u.jsx("span",{className:"nav-label",children:"Goals"})]})]})]})}function TV(){const{user:t,loading:e}=bn(),[n,s]=P.useState(""),[r,i]=P.useState(""),[o,a]=P.useState(""),[c,d]=P.useState(""),[f,m]=P.useState(""),[g,T]=P.useState(""),[k,A]=P.useState(""),[C,x]=P.useState("30"),[v,b]=P.useState("64"),[R,L]=P.useState("10"),[M,E]=P.useState({}),[y,I]=P.useState(!1),[w,N]=P.useState(!1),[D,S]=P.useState("pulse");if(P.useEffect(()=>{const q=[setTimeout(()=>S("open"),2500),setTimeout(()=>S("form"),4500)];return()=>q.forEach(clearTimeout)},[]),e)return u.jsx("div",{children:"Loading..."});if(t)return u.jsx(ld,{to:"/dashboard",replace:!0});const le=async q=>{q.preventDefault(),E({}),N(!0);try{await Ee.login(n,r)}catch(ae){E({credential:ae.message})}finally{N(!1)}},X=async q=>{if(q.preventDefault(),r!==k){E({confirmPassword:"Confirm Password field must be the same as the Password field"});return}E({}),N(!0);try{await Ee.register({email:o,password:r,username:c,firstName:f,lastName:g,exerciseGoalMinutes:parseInt(C),waterGoalOz:parseInt(v),meditationGoalMinutes:parseInt(R)})}catch(ae){E({general:ae.message})}finally{N(!1)}};return u.jsxs("div",{className:"welcome-container",children:[D!=="form"&&u.jsx("div",{className:`awakening-bg ${D}`,children:u.jsx("div",{className:"awakening-eye"})}),u.jsxs("div",{className:`welcome-card ${D==="form"?"visible":""}`,children:[u.jsxs("div",{className:"welcome-header",children:[u.jsx("img",{src:Ix,alt:"Clarity logo"}),u.jsx("p",{children:"Begin your wellness today"})]}),y?u.jsxs("form",{className:"welcome-form",onSubmit:X,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Email"}),u.jsx("input",{type:"email",value:o,onChange:q=>a(q.target.value),required:!0,placeholder:"Enter your email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username"}),u.jsx("input",{type:"text",value:c,onChange:q=>d(q.target.value),required:!0,placeholder:"Choose a username"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"First Name"}),u.jsx("input",{type:"text",value:f,onChange:q=>m(q.target.value),required:!0,placeholder:"Enter your first name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Last Name"}),u.jsx("input",{type:"text",value:g,onChange:q=>T(q.target.value),required:!0,placeholder:"Enter your last name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:r,onChange:q=>i(q.target.value),required:!0,placeholder:"Create a password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Confirm Password"}),u.jsx("input",{type:"password",value:k,onChange:q=>A(q.target.value),required:!0,placeholder:"Confirm your password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Exercise Goal (minutes)"}),u.jsx("input",{type:"number",value:C,onChange:q=>x(q.target.value),required:!0,placeholder:"Daily exercise goal in minutes"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Water Goal (oz)"}),u.jsx("input",{type:"number",value:v,onChange:q=>b(q.target.value),required:!0,placeholder:"Daily water goal in ounces"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Meditation Goal (minutes)"}),u.jsx("input",{type:"number",value:R,onChange:q=>L(q.target.value),required:!0,placeholder:"Daily meditation goal in minutes"})]}),M.confirmPassword&&u.jsx("p",{className:"error-message",children:M.confirmPassword}),M.general&&u.jsx("p",{className:"error-message",children:M.general}),u.jsx("button",{type:"submit",className:"primary-button",disabled:w,children:w?"Creating Account...":"Sign Up"})]}):u.jsxs("form",{className:"welcome-form",onSubmit:le,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username or Email"}),u.jsx("input",{type:"text",value:n,onChange:q=>s(q.target.value),required:!0,placeholder:"Enter your username or email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:r,onChange:q=>i(q.target.value),required:!0,placeholder:"Enter your password"})]}),M.credential&&u.jsx("p",{className:"error-message",children:M.credential}),u.jsx("button",{type:"submit",className:"primary-button",disabled:w,children:w?"Logging In...":"Log In"})]}),u.jsx("button",{className:"secondary-button",onClick:()=>I(!y),disabled:w,children:y?"Already have an account? Log In":"Don't have an account? Sign Up"})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var yp=function(t,e){return yp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r])},yp(t,e)};function IV(t,e){yp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var xV=100,bV=100,I2=50,vp=50,_p=50;function x2(t){var e=t.className,n=t.counterClockwise,s=t.dashRatio,r=t.pathRadius,i=t.strokeWidth,o=t.style;return P.createElement("path",{className:e,style:Object.assign({},o,SV({pathRadius:r,dashRatio:s,counterClockwise:n})),d:kV({pathRadius:r,counterClockwise:n}),strokeWidth:i,fillOpacity:0})}function kV(t){var e=t.pathRadius,n=t.counterClockwise,s=e,r=n?1:0;return`
      M `+vp+","+_p+`
      m 0,-`+s+`
      a `+s+","+s+" "+r+" 1 1 0,"+2*s+`
      a `+s+","+s+" "+r+" 1 1 0,-"+2*s+`
    `}function SV(t){var e=t.counterClockwise,n=t.dashRatio,s=t.pathRadius,r=Math.PI*2*s,i=(1-n)*r;return{strokeDasharray:r+"px "+r+"px",strokeDashoffset:(e?-i:i)+"px"}}var Vf=function(t){IV(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return I2-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var n=this.props,s=n.value,r=n.minValue,i=n.maxValue,o=Math.min(Math.max(s,r),i);return(o-r)/(i-r)},e.prototype.render=function(){var n=this.props,s=n.circleRatio,r=n.className,i=n.classes,o=n.counterClockwise,a=n.styles,c=n.strokeWidth,d=n.text,f=this.getPathRadius(),m=this.getPathRatio();return P.createElement("svg",{className:i.root+" "+r,style:a.root,viewBox:"0 0 "+xV+" "+bV,"data-test-id":"CircularProgressbar"},this.props.background?P.createElement("circle",{className:i.background,style:a.background,cx:vp,cy:_p,r:I2}):null,P.createElement(x2,{className:i.trail,counterClockwise:o,dashRatio:s,pathRadius:f,strokeWidth:c,style:a.trail}),P.createElement(x2,{className:i.path,counterClockwise:o,dashRatio:m*s,pathRadius:f,strokeWidth:c,style:a.path}),d?P.createElement("text",{className:i.text,style:a.text,x:vp,y:_p},d):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(P.Component);function Of(t){var e=t.rotation,n=t.strokeLinecap,s=t.textColor,r=t.textSize,i=t.pathColor,o=t.pathTransition,a=t.pathTransitionDuration,c=t.trailColor,d=t.backgroundColor,f=e==null?void 0:"rotate("+e+"turn)",m=e==null?void 0:"center center";return{root:{},path:ou({stroke:i,strokeLinecap:n,transform:f,transformOrigin:m,transition:o,transitionDuration:a==null?void 0:a+"s"}),trail:ou({stroke:c,strokeLinecap:n,transform:f,transformOrigin:m}),text:ou({fill:s,fontSize:r}),background:ou({fill:d})}}function ou(t){return Object.keys(t).forEach(function(e){t[e]==null&&delete t[e]}),t}const B={getUserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone},getCurrentLocalTime(){return new Date},getStartOfDay(t=new Date){const e=new Date(t);return e.setHours(0,0,0,0),e},getEndOfDay(t=new Date){const e=new Date(t);return e.setHours(23,59,59,999),e},formatLocalDate(t){return t.toLocaleDateString("en-CA")},formatLocalDateTime(t){return t.toLocaleString()},formatLocalTime(t){return t.toLocaleTimeString()},getLocalDateRange(t=7){const e=this.getEndOfDay(new Date),n=this.getStartOfDay(new Date);return n.setDate(n.getDate()-(t-1)),{startDate:n,endDate:e}},isToday(t){const e=new Date;return this.formatLocalDate(t)===this.formatLocalDate(e)},isSameLocalDay(t,e){return this.formatLocalDate(t)===this.formatLocalDate(e)},toLocalTimezone(t){return new Date(t)},getRelativeTime(t){const n=new Date-t,s=Math.floor(n/6e4),r=Math.floor(s/60),i=Math.floor(r/24);return s<1?"Just now":s<60?`${s} minutes ago`:r<24?`${r} hours ago`:i===1?"Yesterday":i<7?`${i} days ago`:this.formatLocalDate(t)},getCurrentWeekRange(){const t=new Date,e=t.getDay(),n=new Date(t);n.setHours(0,0,0,0),n.setDate(t.getDate()-e);const s=new Date(n);return s.setDate(n.getDate()+6),s.setHours(23,59,59,999),{startDate:n,endDate:s}}},hs={async logWorkout(t,e){try{console.log(" Logging workout in timezone:",B.getUserTimezone());let n=B.getCurrentLocalTime();e.date&&(n=B.toLocalTimezone(e.date));const s={title:e.title,type:e.type||"General",durationMinutes:e.durationMinutes,date:n,notes:e.notes||"",caloriesBurned:e.caloriesBurned||0,completed:!0,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),sentiment:e.sentiment||null},r=await Ey(rn(Ie,`users/${t}/workouts`),s);return{id:r.id,success:!0,workout:{...e,id:r.id}}}catch(n){throw new Error("Error logging workout: "+n.message)}},async fetchWorkoutsByUser(t){try{const e=Qn(rn(Ie,`users/${t}/workouts`),Yn("date","desc"));return{workouts:(await Xn(e)).docs.map(r=>{var i,o,a,c;return{id:r.id,...r.data(),date:(i=r.data().date)==null?void 0:i.toDate(),localDate:B.formatLocalDate((o=r.data().date)==null?void 0:o.toDate()),localDateTime:B.formatLocalDateTime((a=r.data().date)==null?void 0:a.toDate()),relativeTime:B.getRelativeTime((c=r.data().date)==null?void 0:c.toDate())}})}}catch(e){throw new Error("Error fetching workouts: "+e.message)}},async updateWorkout(t,e,n){try{const s=nt(Ie,`users/${t}/workouts`,e),r={...n,updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()};return n.date&&(r.date=B.toLocalTimezone(n.date)),await Sr(s,r),{success:!0,workout:{id:e,...n}}}catch(s){throw new Error("Error updating workout: "+s.message)}},async deleteWorkout(t,e){try{return await wy(nt(Ie,`users/${t}/workouts`,e)),{success:!0,message:"Workout deleted successfully"}}catch(n){throw new Error("Error deleting workout: "+n.message)}},async getWorkoutSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange();console.log(" Weekly workout query for timezone:",B.getUserTimezone()),console.log(" Query range:",B.formatLocalDateTime(e),"to",B.formatLocalDateTime(n));const s=Qn(rn(Ie,`users/${t}/workouts`),Ct("date",">=",e),Ct("date","<=",n),Yn("date","desc")),i=(await Xn(s)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),o=i.reduce((c,d)=>c+(d.durationMinutes||0),0),a=i.reduce((c,d)=>c+(d.caloriesBurned||0),0);return{totalWorkouts:i.length,totalMinutes:o,totalCalories:a,workouts:i.slice(0,5),period:"This week",userTimezone:B.getUserTimezone()}}catch(e){throw new Error("Error fetching workout summary: "+e.message)}},async getDailyWorkoutSummary(t,e=new Date){try{const{startDate:n,endDate:s}={startDate:B.getStartOfDay(e),endDate:B.getEndOfDay(e)};console.log(" Daily workout query for timezone:",B.getUserTimezone()),console.log(" Query range:",B.formatLocalDateTime(n),"to",B.formatLocalDateTime(s));const r=Qn(rn(Ie,`users/${t}/workouts`),Ct("date",">=",n),Ct("date","<=",s),Yn("date","desc")),o=(await Xn(r)).docs.map(f=>{var m;return{id:f.id,...f.data(),date:(m=f.data().date)==null?void 0:m.toDate()}});console.log(" Found workouts for today:",o.length);const a=o.reduce((f,m)=>f+(m.durationMinutes||0),0),c=o.length,d=o.reduce((f,m)=>f+(m.caloriesBurned||0),0);return{date:B.formatLocalDate(e),totalWorkouts:c,completedWorkouts:c,totalMinutes:a,caloriesBurned:d,lastWorkout:o.length>0?o[0]:null,workouts:o,hasWorkoutsToday:o.length>0,mostCommonType:o.length>0?this.getMostCommonWorkoutType(o):null,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily workout summary:",n),this.getEmptyDailySummary(e)}},async getWorkoutAnalytics(t,e=30){try{const s=(await this.fetchWorkoutsByUser(t)).workouts;if(s.length===0)return{totalEntries:0,averageDuration:0,averageSentiment:0,sentimentTrend:"neutral"};const r=s.reduce((c,d)=>c+(d.durationMinutes||0),0),i=s.map(c=>typeof c.sentiment=="number"?c.sentiment:0),o=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:0;let a="neutral";return o>0?a="positive":o<0&&(a="negative"),{totalEntries:s.length,averageDuration:r/s.length,averageSentiment:o,sentimentTrend:a}}catch(n){throw new Error("Error fetching workout analytics: "+n.message)}},async getPersonalizedWorkoutRecommendations(t){try{const e=await this.getWorkoutAnalytics(t),n=[];return e.averageSentiment<0&&n.push({type:"sentiment",message:"Your workout notes have been a bit negative. Try celebrating small wins and focusing on progress, not perfection!",action:"Reflect on what went well after each workout."}),e.averageDuration<20&&n.push({type:"duration",message:"Your average workout duration is below 20 minutes. Consider increasing your session length for better results.",action:"Try a 30-minute session this week."}),{recommendations:n}}catch(e){throw new Error("Error generating workout recommendations: "+e.message)}},getMostCommonWorkoutType(t){if(t.length===0)return null;const e={};return t.forEach(n=>{e[n.type]=(e[n.type]||0)+1}),Object.keys(e).reduce((n,s)=>e[n]>e[s]?n:s)},getEmptyDailySummary(t){return{date:B.formatLocalDate(t),totalWorkouts:0,completedWorkouts:0,totalMinutes:0,caloriesBurned:0,lastWorkout:null,workouts:[],hasWorkoutsToday:!1,mostCommonType:null,userTimezone:B.getUserTimezone()}}},Wt={async logWaterIntake(t,e){try{const n={amount:e.amount,date:B.toLocalTimezone(e.date||new Date),userId:t,createdAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),sentiment:e.sentiment||null},s=await Ey(rn(Ie,`users/${t}/waterIntake`),n);return{id:s.id,success:!0,waterIntake:{...e,id:s.id}}}catch(n){throw new Error("Error logging water intake: "+n.message)}},async fetchWaterIntakeByUser(t,e=30){try{const n=B.getStartOfDay(new Date);n.setDate(n.getDate()-e),console.log(" fetchWaterIntakeByUser - Start date:",n.toLocaleDateString());const s=Qn(rn(Ie,`users/${t}/waterIntake`),Ct("date",">=",n),Yn("date","desc")),i=(await Xn(s)).docs.map(o=>{var c;const a=o.data();return{id:o.id,...a,date:(c=a.date)!=null&&c.toDate?a.date.toDate():a.date}});return console.log(" fetchWaterIntakeByUser - Found intakes:",i.length),{waterIntakes:i}}catch(n){throw console.error(" fetchWaterIntakeByUser error:",n),new Error("Error fetching water intake: "+n.message)}},async updateWaterIntake(t,e,n){try{const s=nt(Ie,`users/${t}/waterIntake`,e);return await Sr(s,{...n,updatedAt:new Date}),{success:!0,waterIntake:{id:e,...n}}}catch(s){throw new Error("Error updating water intake: "+s.message)}},async deleteWaterIntake(t,e){try{return await wy(nt(Ie,`users/${t}/waterIntake`,e)),{success:!0,message:"Water intake deleted successfully"}}catch(n){throw new Error("Error deleting water intake: "+n.message)}},async getTodayWaterIntake(t){try{const e=B.getStartOfDay(new Date),n=B.getEndOfDay(new Date);n.setMilliseconds(n.getMilliseconds()+1),console.log(" getTodayWaterIntake - Date range:",{today:e.toLocaleDateString(),tomorrow:n.toLocaleDateString(),todayISO:e.toISOString(),tomorrowISO:n.toISOString()});const s=Qn(rn(Ie,`users/${t}/waterIntake`),Ct("date",">=",e),Ct("date","<",n),Yn("date","desc")),i=(await Xn(s)).docs.map(a=>{var d;const c=a.data();return{...c,date:(d=c.date)!=null&&d.toDate?c.date.toDate():c.date}});return console.log(" getTodayWaterIntake - Found intakes:",i.length),i.forEach(a=>{var c;console.log("  -",a.amount,"oz on",(c=a.date)==null?void 0:c.toLocaleDateString())}),{totalOz:i.reduce((a,c)=>a+(c.amount||0),0),intakeCount:i.length,intakes:i}}catch(e){throw console.error(" getTodayWaterIntake error:",e),new Error("Error fetching today's water intake: "+e.message)}},async getWaterSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),s=Qn(rn(Ie,`users/${t}/waterIntake`),Ct("date",">=",e),Ct("date","<=",n),Yn("date","desc")),i=(await Xn(s)).docs.map(f=>f.data()),o={};i.forEach(f=>{const m=f.date.toDate().toDateString();o[m]=(o[m]||0)+f.amount});const a=i.reduce((f,m)=>f+(m.amount||0),0),c=7,d=c>0?a/c:0;return{totalOz:a,averageOz:d,dailyTotals:o,intakeCount:i.length}}catch(e){throw new Error("Error fetching water summary: "+e.message)}},async getDailyWaterIntake(t,e=new Date){try{const n=B.getStartOfDay(e),s=B.getEndOfDay(e),r=Qn(rn(Ie,`users/${t}/waterIntake`),Ct("date",">=",n),Ct("date","<=",s),Yn("date","desc")),o=(await Xn(r)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),a=o.reduce((c,d)=>c+(d.amount||0),0);return{date:B.formatLocalDate(e),totalOz:a,totalEntries:o.length,entries:o,hasWaterToday:o.length>0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily water intake:",n),{date:B.formatLocalDate(e),totalOz:0,totalEntries:0,entries:[],hasWaterToday:!1,userTimezone:B.getUserTimezone()}}},async getWaterAnalytics(t,e=30){try{const s=(await this.fetchWaterIntakeByUser(t,e)).waterIntakes;if(s.length===0)return{totalEntries:0,averageAmount:0,averageSentiment:0,sentimentTrend:"neutral"};const r=s.reduce((c,d)=>c+(d.amount||0),0),i=s.map(c=>typeof c.sentiment=="number"?c.sentiment:0),o=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:0;let a="neutral";return o>0?a="positive":o<0&&(a="negative"),{totalEntries:s.length,averageAmount:r/s.length,averageSentiment:o,sentimentTrend:a}}catch(n){throw new Error("Error fetching water analytics: "+n.message)}},async getPersonalizedWaterRecommendations(t){try{const e=await this.getWaterAnalytics(t),n=[];return e.averageSentiment<0&&n.push({type:"sentiment",message:"Your water intake notes have been a bit negative. Try associating hydration with positive routines or rewards!",action:"Pair water breaks with something you enjoy."}),e.averageAmount<32&&n.push({type:"hydration",message:"Your average daily water intake is below recommended levels. Aim for at least 64oz per day.",action:"Set reminders to drink more water."}),{recommendations:n}}catch(e){throw new Error("Error generating water recommendations: "+e.message)}},calculateHourlyWaterIntake(t){const e={};return t.forEach(n=>{const s=n.date.getHours();e[s]=(e[s]||0)+n.amount}),e}},fs={async logMeditation(t,e){try{const n={title:e.title||"Meditation Session",type:e.type||"mindfulness",soundscape:e.soundscape||"silence",durationMinutes:e.durationMinutes,targetDuration:e.targetDuration||e.durationMinutes,completed:e.completed||!1,deepStateAchieved:e.deepStateAchieved||!1,date:B.toLocalTimezone(e.date||new Date),notes:e.notes||"",moodBefore:e.moodBefore||"",moodAfter:e.moodAfter||"",guidedSession:e.guidedSession||!1,interruptions:e.interruptions||0,heartRateData:e.heartRateData||null,brainwaveFrequency:e.brainwaveFrequency||null,focusLevel:e.focusLevel||null,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),sentiment:e.sentiment||null},s=await Ey(rn(Ie,`users/${t}/meditations`),n);return{id:s.id,success:!0,meditation:{...n,id:s.id}}}catch(n){throw new Error("Error logging meditation: "+n.message)}},async fetchMeditationsByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const s=Qn(rn(Ie,`users/${t}/meditations`),Ct("date",">=",n),Yn("date","desc"));return{meditations:(await Xn(s)).docs.map(o=>{var a;return{id:o.id,...o.data(),date:(a=o.data().date)==null?void 0:a.toDate()}})}}catch(n){throw new Error("Error fetching meditations: "+n.message)}},async getMeditationAnalytics(t,e=30){try{const s=(await this.fetchMeditationsByUser(t,e)).meditations;if(s.length===0)return{totalSessions:0,deepStateSuccessRate:0,averageDuration:0,favoriteTime:"morning",favoriteSound:"silence",moodImprovement:0};const i=s.filter(f=>f.deepStateAchieved).length/s.length*100,o={},a={},c=[],d=[];return s.forEach(f=>{o[f.soundscape]=(o[f.soundscape]||0)+1;const m=f.date.getHours(),g=m<12?"morning":m<18?"afternoon":"evening";if(a[g]=(a[g]||0)+1,f.moodBefore&&f.moodAfter){const T={"":1,"":2,"":3,"":4,"":5,"":6},k=T[f.moodBefore]||3,A=T[f.moodAfter]||3;c.push(A-k)}f.sentiment&&d.push(f.sentiment)}),{totalSessions:s.length,deepStateSuccessRate:Math.round(i),averageDuration:s.reduce((f,m)=>f+m.durationMinutes,0)/s.length,favoriteTime:Object.keys(a).reduce((f,m)=>a[f]>a[m]?f:m,"morning"),favoriteSound:Object.keys(o).reduce((f,m)=>o[f]>o[m]?f:m,"silence"),moodImprovement:c.length>0?c.reduce((f,m)=>f+m,0)/c.length:0,consistency:s.length/e,averageSentiment:d.length>0?d.reduce((f,m)=>f+m,0)/d.length:0}}catch(n){throw new Error("Error fetching meditation analytics: "+n.message)}},async getPersonalizedRecommendations(t){try{const e=await this.getMeditationAnalytics(t),n=[];return e.deepStateSuccessRate<50&&n.push({type:"duration",message:"Try longer sessions (7-10 minutes) to achieve deeper states",action:"Increase session length"}),e.favoriteSound==="silence"&&n.push({type:"soundscape",message:'Research shows binaural beats can enhance focus. Try our "Deep Focus" soundscape.',action:"Try binaural beats"}),e.consistency<.5&&n.push({type:"consistency",message:`Your best time is ${e.favoriteTime}. Set a daily reminder for consistent practice.`,action:"Set daily reminder"}),e.averageSentiment<4&&n.push({type:"sentiment",message:"Your recent meditations have been on the lower end of the scale. Try to maintain a more positive mindset during your sessions.",action:"Focus on positive thoughts"}),{recommendations:n}}catch(e){throw new Error("Error generating recommendations: "+e.message)}},async updateMeditation(t,e,n){try{const s=nt(Ie,`users/${t}/meditations`,e);return await Sr(s,{...n,updatedAt:new Date}),{success:!0,meditation:{id:e,...n}}}catch(s){throw new Error("Error updating meditation: "+s.message)}},async deleteMeditation(t,e){try{return await wy(nt(Ie,`users/${t}/meditations`,e)),{success:!0,message:"Meditation deleted successfully"}}catch(n){throw new Error("Error deleting meditation: "+n.message)}},async getMeditationSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),s=Qn(rn(Ie,`users/${t}/meditations`),Ct("date",">=",e),Ct("date","<=",n),Yn("date","desc")),i=(await Xn(s)).docs.map(d=>d.data()),o=i.reduce((d,f)=>d+(f.durationMinutes||0),0),a=i.length>0?o/i.length:0,c=i.length>0?i.filter(d=>d.deepStateAchieved).length/i.length*100:0;return{totalSessions:i.length,totalMinutes:o,averageDuration:a,deepStateSuccessRate:c,favoriteSoundscape:i.length>0?this.getMostFrequent(i,"soundscape"):"silence",favoriteTime:i.length>0?this.getMostFrequent(i,"timeOfDay"):"morning",moodImprovement:this.calculateMoodImprovement(i)}}catch(e){throw console.error("Error fetching meditation summary:",e),new Error("Error fetching meditation summary: "+e.message)}},getMostFrequent(t,e){const n={};return t.forEach(s=>{const r=e==="timeOfDay"?this.getTimeOfDay(s.date):s[e];n[r]=(n[r]||0)+1}),Object.keys(n).reduce((s,r)=>n[s]>n[r]?s:r)},getTimeOfDay(t){let e;if(t instanceof Date)e=t;else if(typeof t=="string")e=new Date(t);else if(t&&t.seconds)e=new Date(t.seconds*1e3);else return console.warn("Invalid date format:",t),"unknown";if(isNaN(e.getTime()))return console.warn("Invalid date object:",t),"unknown";const n=e.getHours();return n<6?"night":n<12?"morning":n<17?"afternoon":n<21?"evening":"night"},calculateMoodImprovement(t){const e={"":1,"":2,"":3,"":4,"":5,"":6};let n=0,s=0;return t.forEach(r=>{const i=e[r.moodBefore]||3,o=e[r.moodAfter]||3;n+=o-i,s++}),s>0?n/s:0},async getDailyMeditationSummary(t,e=new Date){try{const n=B.getStartOfDay(e),s=B.getEndOfDay(e);console.log(" Daily meditation query for timezone:",B.getUserTimezone());const r=Qn(rn(Ie,`users/${t}/meditations`),Ct("date",">=",n),Ct("date","<=",s),Yn("date","desc")),o=(await Xn(r)).docs.map(C=>{var x;return{id:C.id,...C.data(),date:(x=C.data().date)==null?void 0:x.toDate()}}),a=o.reduce((C,x)=>C+(x.durationMinutes||0),0),c=o.filter(C=>C.completed).length,d=o.length>0?a/o.length:0,f=o.filter(C=>C.deepStateAchieved).length,m=o.length>0?f/o.length*100:0,g=o.length>0?o[0]:null,T=o.length>0?this.getMostFrequent(o,"soundscape"):"silence",k=o.length>0?this.getMostFrequent(o,"timeOfDay"):"morning",A=this.calculateMoodImprovement(o);return{date:B.formatLocalDate(e),totalSessions:o.length,completedSessions:c,totalMinutes:a,averageDuration:Math.round(d*10)/10,deepStateAchieved:f,deepStateSuccessRate:Math.round(m),lastSession:g,favoriteSoundscape:T,favoriteTime:k,moodImprovement:Math.round(A*100)/100,sessions:o,hasSessionsToday:o.length>0,mostRecentType:(g==null?void 0:g.type)||"mindfulness",mostRecentSoundscape:(g==null?void 0:g.soundscape)||"silence",timeOfLastSession:(g==null?void 0:g.date)||null,totalInterruptions:o.reduce((C,x)=>C+(x.interruptions||0),0),averageFocusLevel:o.length>0?o.reduce((C,x)=>C+(x.focusLevel||5),0)/o.length:0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily meditation summary:",n),{date:e.toISOString().split("T")[0],totalSessions:0,completedSessions:0,totalMinutes:0,averageDuration:0,deepStateAchieved:0,deepStateSuccessRate:0,lastSession:null,favoriteSoundscape:"silence",favoriteTime:"morning",moodImprovement:0,sessions:[],hasSessionsToday:!1,mostRecentType:"mindfulness",mostRecentSoundscape:"silence",timeOfLastSession:null,totalInterruptions:0,averageFocusLevel:0,userTimezone:B.getUserTimezone()}}}},b2=["You are capable of amazing things.","You are loved.","You are strong.","You are beautiful.","You are enough.","You are worthy.","You are important.","You are talented.","You are special.","I am capable and strong","I am loved and loving","I am healthy and happy","I am wealthy and wise","Believe in yourself and all that you are.","You are amazing.","You are stronger than you think.","You are braver than you believe.","Every day is a new opportunity.","You are worth it.","You are worthy of all the good things.","You are deserving of love and happiness.","Stay positive, work hard, make it happen.","You are enough just as you are.","You are doing great.","Your potential is limitless.","You are a work of art.","You are doing great.","You are a gift to the world.","Keep going, you are getting there.","You are a masterpiece."],k2="https://createstripecheckoutsession-z5fchdkthq-uc.a.run.app";async function Xc(){const t=ZE().currentUser;if(!t){alert("You must be logged in to upgrade.");return}try{console.log(" Starting Stripe upgrade with direct HTTP call"),console.log(" User ID:",t.uid),console.log(" Function URL:",k2);const e=await fetch(k2,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t.uid})});if(console.log(" Response status:",e.status),console.log(" Response headers:",e.headers),!e.ok){const r=await e.text();throw console.error(" HTTP error response:",r),new Error(`HTTP error! status: ${e.status}, body: ${r}`)}const n=await e.json();console.log(" Function call successful:",n);const{url:s}=n;console.log(" Redirecting to Stripe checkout:",s),window.location.href=s}catch(e){console.error(" Error creating Stripe checkout session:",e),console.error(" Error details:",e.message),alert("Error creating checkout session. Please try again.")}}function S2(){const t=Math.floor(Math.random()*b2.length);return b2[t]}function AV(){const t=sh(),{user:e,loading:n,isPremium:s}=bn(),[r,i]=P.useState(null),[o,a]=P.useState({workout:{totalMinutes:0,sessions:0,hasWorkoutsToday:!1},meditation:{totalMinutes:0,sessions:0,hasSessionsToday:!1,deepStateAchieved:0},water:{totalOz:0,entries:0,hasWaterToday:!1}}),[c,d]=P.useState(30),[f,m]=P.useState(10),[g,T]=P.useState(64),[k,A]=P.useState(S2()),[C,x]=P.useState(!0),[v,b]=P.useState(!1),[R,L]=P.useState(0),[M,E]=P.useState([]);if(P.useEffect(()=>{if(!n&&!e){t("/welcome",{replace:!0});return}},[e,n,t]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{x(!0);const S=B.getCurrentLocalTime();console.log(" Dashboard timezone:",B.getUserTimezone()),console.log(" Local today:",B.formatLocalDateTime(S));const le=await Ee.getUserProfile(e.uid);i(le.user),d(le.user.exerciseGoalMinutes||30),m(le.user.meditationGoalMinutes||10),T(le.user.waterGoalOz||64),console.log(" Fetching workout data for date:",S);const[X,q,ae]=await Promise.all([hs.getDailyWorkoutSummary(e.uid,S),fs.getDailyMeditationSummary(e.uid,S),Wt.getDailyWaterIntake(e.uid,S)]);console.log(" Raw workout data from Dashboard:",X),console.log(" Raw meditation data:",q),console.log(" Raw water data:",ae),a({workout:{totalMinutes:X.totalMinutes||0,sessions:X.totalWorkouts||0,hasWorkoutsToday:X.hasWorkoutsToday||X.totalMinutes>0,calories:X.caloriesBurned||0,lastWorkoutType:X.mostCommonType},meditation:{totalMinutes:q.totalMinutes||0,sessions:q.totalSessions||0,hasSessionsToday:q.hasSessionsToday||!1,deepStateAchieved:q.deepStateAchieved||0,moodImprovement:q.moodImprovement||0,lastSessionType:q.mostRecentType},water:{totalOz:ae.totalOz||0,entries:ae.totalEntries||ae.entries||0,hasWaterToday:(ae.totalOz||0)>0,averagePerEntry:ae.averagePerEntry||0,isOnTrack:(ae.totalOz||0)>=(le.user.waterGoalOz||64)*.75}})}catch(S){console.error("Error fetching daily data:",S)}finally{x(!1)}})()},[e]),P.useEffect(()=>{const D=localStorage.getItem("affirmation"),S=localStorage.getItem("affirmationDate"),le=new Date().toISOString().split("T")[0];if(D&&S===le)A(D);else{const X=S2();A(X),localStorage.setItem("affirmation",X),localStorage.setItem("affirmationDate",le)}},[]),P.useEffect(()=>{if(console.log("Trial modal effect running",r),r&&r.subscriptionStatus==="trial_expired"&&r.subscription==="free"){const D=localStorage.getItem("dontRemindTrial"),S=localStorage.getItem("lastTrialReminded");console.log("dontRemindTrial:",D),console.log("lastReminded:",S);const le=1e3*60*60*24*7,X=Date.now();D||(!S||X-Number(S)>le)&&(b(!0),localStorage.setItem("lastTrialReminded",X),console.log("Showing trial modal!"))}},[r]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid){const S=await Ee.getPoints(e.uid);L(S)}})()},[e]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{const[S,le,X]=await Promise.all([fs.getPersonalizedRecommendations(e.uid),Wt.getPersonalizedWaterRecommendations(e.uid),hs.getPersonalizedWorkoutRecommendations(e.uid)]),q=[...(S==null?void 0:S.recommendations)||[],...(le==null?void 0:le.recommendations)||[],...(X==null?void 0:X.recommendations)||[]];E(q)}catch(S){console.error("Error fetching recommendations:",S)}})()},[e]),n||C)return u.jsx("div",{className:"dashboard-loading",children:"Loading..."});if(!e)return u.jsx("div",{className:"dashboard-loading",children:"Redirecting..."});if(!r)return u.jsx("div",{className:"dashboard-loading",children:"Loading user data..."});if(!r.firstName||!r.exerciseGoalMinutes||!r.waterGoalOz||!r.meditationGoalMinutes)return u.jsx("div",{className:"dashboard-loading",children:"Loading user profile..."});const y=Math.min(o.workout.totalMinutes/c*100,100)||0,I=Math.min(o.meditation.totalMinutes/f*100,100)||0,w=Math.min(o.water.totalOz/g*100,100)||0,N=Math.max(c-o.workout.totalMinutes,0);return r.subscriptionStatus==="trial_expired"&&r.subscription,u.jsxs("div",{className:"dashboard-page",children:[M.length>0&&u.jsxs("div",{className:"ai-recommendations",children:[u.jsx("h2",{children:"AI-Powered Recommendations"}),u.jsx("ul",{children:M.map((D,S)=>u.jsxs("li",{className:"recommendation-item",children:[u.jsxs("strong",{children:[D.type&&D.type.charAt(0).toUpperCase()+D.type.slice(1),":"]})," ",D.message,D.action&&u.jsxs("div",{className:"recommendation-action",children:["Action: ",D.action]})]},S))})]}),u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:""})," ",R," Points"]}),u.jsxs("div",{className:"welcome-section",children:[u.jsxs("h1",{children:["Welcome back, ",r.firstName,"!"]}),u.jsx("p",{children:"Here's your wellness progress for today"})]}),u.jsxs("div",{className:"progress-bars",children:[u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:" Today's Workout"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",c," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.workout.totalMinutes," / ",c," min"]}),u.jsx(Vf,{value:y,text:`${Math.round(y)}%`,styles:Of({pathColor:`rgba(62, 152, 199, ${Math.max(y/100,.3)})`,textColor:"#3e98c7"})}),u.jsx("div",{className:"daily-stats",children:o.workout.hasWorkoutsToday?u.jsxs("span",{children:[" ",o.workout.sessions," workouts logged"]}):u.jsx("span",{children:"No workouts logged today"})}),u.jsx("button",{className:"track-button",onClick:()=>t("/workout"),children:"Log Workout"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:" Today's Meditation"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",f," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.meditation.totalMinutes," / ",f," min"]}),u.jsx(Vf,{value:I,text:`${Math.round(I)}%`,styles:Of({pathColor:`rgba(138, 43, 226, ${Math.max(I/100,.3)})`,textColor:"#8a2be2"})}),u.jsxs("div",{className:"daily-stats",children:[o.meditation.hasSessionsToday?u.jsxs("span",{children:[" ",o.meditation.sessions," sessions completed"]}):u.jsx("span",{children:"No meditation logged today"}),o.meditation.deepStateAchieved>0&&u.jsxs("span",{className:"deep-state",children:[" ",o.meditation.deepStateAchieved," deep states"]})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/meditation"),children:"Start Meditation"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:" Today's Hydration"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",g," oz"]}),u.jsxs("p",{className:"current-text",children:[o.water.totalOz," / ",g," oz"]}),u.jsx(Vf,{value:w,text:`${Math.round(w)}%`,styles:Of({pathColor:`rgba(30, 144, 255, ${Math.max(w/100,.3)})`,textColor:"#1e90ff"})}),u.jsxs("div",{className:"daily-stats",children:[o.water.hasWaterToday?u.jsxs("span",{children:[" ",o.water.entries," water entries"]}):u.jsx("span",{children:"No water logged today"}),o.water.isOnTrack&&u.jsx("span",{className:"on-track",children:" On track for hydration!"})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/water"),children:"Log Water"})]})]}),N>0&&u.jsx("div",{className:"notification-bar",children:u.jsxs("p",{children:[" You are ",N," minutes away from your daily workout goal!"]})}),y>=100&&I>=100&&w>=100&&u.jsx("div",{className:"celebration-bar",children:u.jsx("p",{children:" Congratulations! You've achieved all your daily wellness goals! "})}),u.jsxs("div",{className:"affirmation-bar",children:[u.jsx("p",{children:" Daily Affirmation "}),u.jsx("h2",{children:k})]}),u.jsxs("div",{className:"quick-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.workout.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Exercised Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.water.totalOz}),u.jsx("span",{className:"stat-label",children:"Ounces of Water Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.meditation.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Meditated Today"})]})]}),v&&u.jsx("div",{className:"trial-modal-overlay",children:u.jsxs("div",{className:"trial-modal",children:[u.jsx("h2",{children:"Your free trial has ended"}),u.jsx("p",{children:"Upgrade to keep enjoying premium features!"}),u.jsx("button",{className:"primary-button",onClick:Xc,children:"Upgrade with Stripe"}),u.jsxs("div",{className:"trial-modal-actions",children:[u.jsx("button",{className:"secondary-button",onClick:()=>b(!1),children:"Remind me later"}),u.jsx("button",{className:"link-button",onClick:()=>{localStorage.setItem("dontRemindTrial","true"),b(!1)},children:"Don't remind me again"})]})]})})]})}var PV=function(t){return t.toLowerCase().replace(/\n/g," ").replace(/[.,\/#!?$%\^&\*;:{}=_`\"~()]/g," ").replace(/\s\s+/g," ").trim().split(" ")};function NV(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const CV={"":1,"":3,"":3,"":3,"":-1,"":3,"":3,"":2,"":3,"":2,"":2,"":3,"":3,"":2,"":-2,"":2,"":2,"":1,"":2,"":2,"":2,"":2,"":2,"":-2,"":3,"":3,"":2,"":-1,"":3,"":2,"":3,"":3,"":3,"":1,"":3,"":1,"":-1,"":2,"":-1,"":2,"":3,"":3,"":2,"":-1,"":2,"":3,"":2,"":-1,"":3,"":1,"":3,"":1,"":-1,"":2,"":2,"":-1,"":-1,"":1,"":-2,"":2,"":3,"":3,"":3,"":1,"":2,"":3,"":2,"":2,"":-2,"":-1,"":-2,"":1,"":2,"":2,"":-1,"":3,"":-2,"":3,"":1,"":1,"":3,"":-2,"":2,"":2,"":1,"":3,"":1,"":-1,"":-2,"":-2,"":2,"":-1,"":-1,"":1,"":3,"":-1,"":2,"":1,"":-1,"":2,"":2,"":-1,"":2,"":3,"":2,"":2,"":1,"":3,"":1,"":1,"":1,"":3,"":1,"":1,"":3,"":2,"":2,"":2,"":2,"":1,"":2,"":2,"":3,"":2,"":1,"":1,"":2,"":-2,"":2,"":2,"":2,"":1,"":3,"":1,"":1,"":2,"":1,"":2,"":2,"":1,"":2,"":2,"":2,"":1,"":2,"":2,"":1,"":3,"":3,"":2,"":-2,"":1,"":2,"":1,"":-1,"":2,"":3,"":2,"":1,"":-1,"":2,"":3,"":1,"":2,"":2,"":1,"":3,"":3,"":-1,"":1,"":1,"":1,"":2,"":3,"":2,"":1,"":1,"":2,"":2,"":3,"":3,"":2,"":2,"":3,"":1,"":1,"":2,"":-1,"":2,"":1,"":-3,"":2,"":2,"":1,"":-1,"":2,"":-1,"":2,"":2,"":1,"":-1,"":1,"":2,"":3,"":-1,"":2,"":3,"":2,"":-3,"":3,"":2,"":2,"":2,"":2,"":4,"":-1,"":2,"":-1,"":2,"":-3,"":2,"":1,"":2,"":3,"":5,"":3,"":1,"":1,"":2,"":2,"":1,"":1,"":3,"":1,"":1,"":2,"":1,"":3,"":3,"":1,"":-3,"":2,"":-1,"":1,"":2,"":1,"":3,"":2,"":3,"":-2,"":1,"":-2,"":1,"":3,"":4,"":3,"":2,"":1,"":-2,"":1,"":1,"":2,"":2,"":1,"":2,"":-1,"":1,"":1,"":2,"":-2,"":2,"":1,"":3,"":2,"":1,"":2,"":3,"":1,"":1,"":1,"":3,"":1,"":2,"":-1,"":1,"":2,"":2,"":3,"":1,"":1,"":1,"":2,"":3,"":2,"":1,"":1,"":1,"":2,"":2,"":2,"":1,"":2,"":1,"":2,"":2,"":2,"":1,"":1,"":2,"":3,"":1,"":1,"":1,"":3,"":-3,"":1,"":2,"":1,"":-2,"":3,"":2,"":1,"":3,"":2,"":2,"":2,"":3,"":3,"":-1,"":1,"":2,"":2,"":-1,"":1,"":1,"":1,"":1,"":-4,"":1,"":1,"":1,"":2,"":2,"":2,"":4,"":1,"":2,"":5,"":1,"":1,"":-1,"":2,"":3,"":2,"":4,"":1,"":2,"":3,"":1,"":1,"":-1,"":1,"":1,"":-1,"":2,"":1,"":2,"":1,"":2,"":1,"":-1,"":2,"":1,"":1,"":1,"":-1,"":3,"":2,"":-1,"":2,"":1,"":2,"":2,"":-1,"":2,"":3,"":1,"":1,"":-2,"":-3,"":2,"":1,"":2,"":3,"":-1,"":1,"":-2,"":-2,"":1,"":-1,"":1,"":2,"":2,"":1,"":2,"":3,"":1,"":-1,"":3,"":1,"":1,"":3,"":-1,"":1,"":1,"":2,"":2,"":2,"":1,"":3,"":3,"":3,"":-1,"":1,"":-1,"":2,"":2,"":-1,"":2,"":2,"":-1,"":2,"":3,"":3,"":2,"":3,"":1,"":-1,"":-1,"":1,"":2,"":3,"":2,"":3,"":3,"":5,"":1,"":3,"":3,"":1,"":3,"":1,"":1,"":1,"":2,"":1,"":2,"":2,"":3,"":1,"":-4,"":2,"":3,"":2,"":1,"":2,"":2,"":4,"":3,"":3,"":1,"":2,"":2,"":1,"":1,"":2,"":1,"":2,"":2,"":5,"":3,"":2,"":2,"":2,"":2,"":2,"":3,"":-2,"":3,"":3,"":3,"":2,"":3,"":1,"":2,"":2,"":2,"":1,"":3,"":1,"":3,"":3,"":-2,"":4,"":1,"":-1,"":1,"":1,"":5,"":4,"":1,"":-1,"":-2,"":2,"":3,"":2,"":2,"":-2,"":2,"":2,"":1,"":2,"":1,"":3,"":-3,"":1,"":5,"":3,"":3,"":-2,"":1,"":1,"":-2,"":-1,"":-1,"":1,"":2,"":1,"":3,"":4,"":-3,"":3,"":2,"":1,"":-1,"":1,"":2,"":-1,"":3,"":-2,"":3,"":2,"":1,"":-3,"":-1,"":2,"":3,"":3,"":3,"":1,"":5,"":2,"":1,"":1,"":2,"":2,"":2,"":4,"":2,"":2,"":1,"":3,"":1,"":1,"":4,"":2,"":1,"":3,"":4,"":-5,"":1,"":1,"":5,"":4,"":3,"":1,"":5,"":4,"":1,"":2,"":3,"":3,"":2,"":2,"":4,"":1,"":3,"":-2,"":1,"":-1,"":1,"":-1,"":1,"":4,"":2,"":1,"":2,"":1,"":2,"":2,"":2,"":2,"":1,"":-4,"":1,"":1,"":-1,"":1,"":1,"":3,"":1,"":5,"":2,"":2,"":2,"":3,"":1,"":2,"":2,"":1,"":3,"":1,"":2,"":1,"":5,"":3,"":3,"":2,"":3,"":-3,"":2,"":1,"":5,"":2,"":3,"":3,"":5,"":-2,"":-2,"":3,"":3,"":3,"":1,"":3,"":-2,"":1,"":3,"":-2,"":5,"":1,"":1,"":3,"":1,"":1,"":1,"":5,"":3,"":3,"":3,"":5,"":1,"":-4,"":1,"":-5,"":1,"":5,"":1,"":5,"":1,"":5,"":2,"":2,"":-3,"":5,"":2,"":2,"":-5,"":2,"":2,"":-3,"":5,"":5,"":5,"":5,"":2,"":5,"":2,"":-5,"":2,"":5,"":5,"":5,"":2,"":-3,"":5,"":-3,"":2,"":2,"":5,"":-5,"":5,"":5,"":5,"":2,"":5,"":5,"":-5,"":5,"":5,"":2,"":2,"":2,"":2,"":5,"":-5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":5,"":-5,"":5,"":5,"":5,"":-5,"":-5,"":-5,"":-5,"":-5,"":5,"":5,"":5,"":-5,"":5,"":5,"":-5,"":5,"":5,"":5,"":-5,"":5,"":5,"":5,"":-5,"":-5,"":-5,"":-5,"":5},RV=-2,DV=-2,jV=-2,VV=-2,OV=-2,MV=-2,LV=-3,FV=-3,zV=-3,UV=-3,BV=2,$V=2,qV=1,WV=-1,GV=-1,HV=-1,KV=-1,QV=2,YV=2,XV=2,JV=2,ZV=1,eO=-3,tO=-3,nO=-3,sO=-3,rO=-3,iO=1,oO=1,aO=1,cO=1,lO=1,uO=1,dO=1,hO=-2,fO=-2,mO=-2,pO=-2,gO=2,yO=2,vO=2,_O=2,wO=2,EO=2,TO=2,IO=2,xO=-2,bO=-2,kO=-2,SO=-2,AO=-2,PO=-2,NO=-2,CO=1,RO=-2,DO=2,jO=2,VO=2,OO=2,MO=-3,LO=1,FO=1,zO=3,UO=3,BO=3,$O=3,qO=-1,WO=-1,GO=-1,HO=-2,KO=-2,QO=1,YO=1,XO=3,JO=3,ZO=3,eM=3,tM=3,nM=3,sM=3,rM=1,iM=2,oM=2,aM=2,cM=2,lM=2,uM=2,dM=2,hM=-1,fM=1,mM=-1,pM=3,gM=3,yM=3,vM=-1,_M=2,wM=-1,EM=2,TM=-2,IM=-2,xM=-2,bM=-2,kM=-2,SM=-2,AM=-2,PM=-2,NM=-2,CM=-2,RM=2,DM=-3,jM=-3,VM=-3,OM=-3,MM=-3,LM=-3,FM=-3,zM=-3,UM=1,BM=2,$M=1,qM=1,WM=1,GM=-2,HM=-2,KM=-2,QM=-2,YM=-1,XM=-1,JM=-2,ZM=1,eL=-2,tL=-2,nL=-2,sL=1,rL=2,iL=-2,oL=2,aL=2,cL=2,lL=2,uL=4,dL=2,hL=-1,fL=2,mL=3,pL=3,gL=3,yL=3,vL=-3,_L=-3,wL=-3,EL=-3,TL=-3,IL=-3,xL=-2,bL=-2,kL=-2,SL=-2,AL=-2,PL=-2,NL=-2,CL=-1,RL=1,DL=-2,jL=-2,VL=-3,OL=-3,ML=-3,LL=-2,FL=-1,zL=-1,UL=-1,BL=-1,$L=-1,qL=-1,WL=-1,GL=-1,HL=-1,KL=-2,QL=-2,YL=2,XL=2,JL=2,ZL=2,e4=2,t4=2,n4=2,s4=2,r4=2,i4=2,o4=2,a4=2,c4=2,l4=2,u4=2,d4=-2,h4=2,f4=2,m4=2,p4=2,g4=2,y4=1,v4=-2,_4=-3,w4=-2,E4=-2,T4=-4,I4=-2,x4=-2,b4=-4,k4=-3,S4=-3,A4=-2,P4=-2,N4=2,C4=2,R4=-4,D4=-4,j4=2,V4=3,O4=3,M4=3,L4=3,F4=3,z4=-3,U4=-3,B4=-1,$4=-1,q4=-1,W4=-1,G4=1,H4=1,K4=2,Q4=2,Y4=2,X4=2,J4=2,Z4=2,eF=1,tF=3,nF=1,sF=1,rF=-2,iF=-2,oF=-2,aF=-2,cF=-2,lF=-2,uF=-1,dF=-1,hF=-1,fF=2,mF=-1,pF=-1,gF=-1,yF=-1,vF=-1,_F=3,wF=3,EF=3,TF=4,IF=-3,xF=-2,bF=-1,kF=-1,SF=1,AF=2,PF=1,NF=-3,CF=-3,RF=-3,DF=-3,jF=-2,VF=1,OF=-2,MF=-2,LF=-2,FF=-2,zF=-1,UF=-3,BF=-3,$F=-3,qF=-2,WF=-2,GF=-2,HF=-2,KF=2,QF=-2,YF=-5,XF=-5,JF=-1,ZF=-1,ez=-1,tz=-2,nz=-2,sz=3,rz=-1,iz=3,oz=3,az=3,cz=3,lz=3,uz=2,dz=2,hz=-2,fz=-2,mz=3,pz=2,gz=2,yz=2,vz=2,_z=2,wz=2,Ez=3,Tz=-2,Iz=-2,xz=-2,bz=-2,kz=3,Sz=-3,Az=-3,Pz=-3,Nz=-3,Cz=-3,Rz=2,Dz=-1,jz=-2,Vz=1,Oz=-5,Mz=-5,Lz=-2,Fz=-2,zz=-2,Uz=-2,Bz=-3,$z=-3,qz=-3,Wz=-3,Gz=-2,Hz=-2,Kz=-2,Qz=-2,Yz=-2,Xz=2,Jz=2,Zz=3,e5=3,t5=-1,n5=3,s5=3,r5=2,i5=-1,o5=-1,a5=-2,c5=3,l5=-1,u5=-1,d5=-1,h5=-3,f5=-2,m5=-2,p5=2,g5=2,y5=-1,v5=1,_5=1,w5=1,E5=1,T5=-2,I5=-2,x5=-3,b5=-2,k5=-2,S5=-2,A5=-2,P5=-2,N5=-2,C5=-2,R5=-2,D5=-3,j5=2,V5=2,O5=2,M5=3,L5=-2,F5=-2,z5=-2,U5=-2,B5=3,$5=5,q5=-3,W5=-3,G5=-3,H5=-3,K5=1,Q5=2,Y5=1,X5=4,J5=3,Z5=3,e6=2,t6=-1,n6=-1,s6=-2,r6=-3,i6=-3,o6=-2,a6=-4,c6=-2,l6=-2,u6=-2,d6=2,h6=-2,f6=-2,m6=-2,p6=-2,g6=-2,y6=-2,v6=2,_6=2,w6=2,E6=2,T6=-1,I6=-1,x6=-1,b6=-1,k6=-1,S6=1,A6=1,P6=1,N6=3,C6=2,R6=1,D6=2,j6=2,V6=2,O6=-2,M6=2,L6=2,F6=-2,z6=-3,U6=-4,B6=-1,$6=3,q6=3,W6=3,G6=3,H6=3,K6=3,Q6=-2,Y6=-2,X6=-2,J6=1,Z6=-2,eU=-2,tU=-1,nU=2,sU=2,rU=2,iU=2,oU=2,aU=-2,cU=-2,lU=-3,uU=-2,dU=2,hU=2,fU=3,mU=3,pU=3,gU=-3,yU=-3,vU=-3,_U=-3,wU=-3,EU=-3,TU=-3,IU=-3,xU=-3,bU=-3,kU=-3,SU=2,AU=2,PU=2,NU=2,CU=2,RU=-2,DU=2,jU=3,VU=2,OU=2,MU=2,LU=2,FU=2,zU=-3,UU=-3,BU=-3,$U=-3,qU=-2,WU=-1,GU=-2,HU=-2,KU=-2,QU=-2,YU=2,XU=2,JU=-2,ZU=3,e9=2,t9=2,n9=1,s9=1,r9=1,i9=1,o9=2,a9=-1,c9=-2,l9=-5,u9=-5,d9=-5,h9=-2,f9=-2,m9=-2,p9=-2,g9=-2,y9=-2,v9=-2,_9=-1,w9=-1,E9=-1,T9=-2,I9=-2,x9=-3,b9=-1,k9=-1,S9=1,A9=2,P9=2,N9=2,C9=2,R9=2,D9=1,j9=2,V9=2,O9=1,M9=2,L9=1,F9=1,z9=1,U9=2,B9=2,$9=1,q9=1,W9=2,G9=2,H9=-2,K9=-2,Q9=-2,Y9=-2,X9=-2,J9=-2,Z9=-2,eB=-2,tB=2,nB=2,sB=2,rB=2,iB=-2,oB=2,aB=2,cB=2,lB=2,uB=-2,dB=-2,hB=-2,fB=-2,mB=2,pB=2,gB=2,yB=-2,vB=-2,_B=-2,wB=-2,EB=-2,TB=-2,IB=-2,xB=2,bB=2,kB=2,SB=2,AB=2,PB=2,NB=2,CB=-3,RB=-2,DB=-2,jB=-2,VB=-2,OB=-1,MB=-2,LB=-2,FB=-2,zB=-2,UB=-2,BB=-2,$B=-2,qB=-2,WB=-2,GB=-2,HB=-2,KB=-2,QB=-1,YB=-1,XB=-1,JB=-2,ZB=-2,e$=-2,t$=-2,n$=-2,s$=-2,r$=-2,i$=1,o$=1,a$=1,c$=2,l$=1,u$=-2,d$=-1,h$=-3,f$=-3,m$=-3,p$=-3,g$=-3,y$=-2,v$=2,_$=2,w$=2,E$=2,T$=2,I$=2,x$=-2,b$=-2,k$=2,S$=-1,A$=-3,P$=-3,N$=-2,C$=-2,R$=-2,D$=-2,j$=2,V$=-2,O$=-2,M$=-2,L$=-3,F$=-3,z$=-3,U$=-3,B$=-3,$$=-3,q$=-3,W$=-3,G$=-2,H$=-2,K$=-2,Q$=-2,Y$=-2,X$=-2,J$=-2,Z$=-2,eq=-2,tq=-2,nq=-2,sq=-2,rq=-1,iq=-1,oq=-3,aq=-3,cq=-1,lq=-2,uq=-1,dq=-1,hq=-1,fq=-2,mq=2,pq=-5,gq=1,yq=-1,vq=-1,_q=-2,wq=-2,Eq=2,Tq=-1,Iq=-1,xq=-2,bq=-2,kq=-2,Sq=-3,Aq=-3,Pq=-3,Nq=-3,Cq=-2,Rq=-4,Dq=-4,jq=-2,Vq=-2,Oq=-2,Mq=2,Lq=2,Fq=-2,zq=-1,Uq=2,Bq=3,$q=-3,qq=-2,Wq=-2,Gq=-3,Hq=-1,Kq=2,Qq=3,Yq=-2,Xq=-2,Jq=2,Zq=-2,e8=-3,t8=-3,n8=-3,s8=-3,r8=-3,i8=-3,o8=-3,a8=-3,c8=1,l8=2,u8=2,d8=-2,h8=-2,f8=-3,m8=-3,p8=-3,g8=2,y8=2,v8=-2,_8=-1,w8=-1,E8=-1,T8=-2,I8=-2,x8=-2,b8=-2,k8=-2,S8=-2,A8=-2,P8=-3,N8=-3,C8=2,R8=-2,D8=-2,j8=-2,V8=-2,O8=-2,M8=-2,L8=-2,F8=-2,z8=-2,U8=-2,B8=-2,$8=-2,q8=-1,W8=-1,G8=3,H8=3,K8=3,Q8=3,Y8=3,X8=3,J8=3,Z8=3,eW=-1,tW=-1,nW=-1,sW=-1,rW=-1,iW=-2,oW=-2,aW=-2,cW=-2,lW=-2,uW=-2,dW=-2,hW=-2,fW=-2,mW=-2,pW=-2,gW=-2,yW=-2,vW=-2,_W=-2,wW=-3,EW=-3,TW=-3,IW=-3,xW=-2,bW=-2,kW=-2,SW=-2,AW=-2,PW=-2,NW=-2,CW=-2,RW=-3,DW=-2,jW=-2,VW=-2,OW=-2,MW=-2,LW=-2,FW=-2,zW=-2,UW=-2,BW=2,$W=1,qW=2,WW=2,GW=-3,HW=-3,KW=-3,QW=-3,YW=-3,XW=-3,JW=-3,ZW=-3,e7=-3,t7=-3,n7=-3,s7=-3,r7=-1,i7=-2,o7=-2,a7=-2,c7=-2,l7=-2,u7=-2,d7=-2,h7=2,f7=-2,m7=-1,p7=-1,g7=-1,y7=-2,v7=-2,_7=-2,w7=-2,E7=-2,T7=3,I7=2,x7=2,b7=1,k7=-4,S7=-4,A7=-3,P7=-3,N7=-1,C7=-2,R7=2,D7=-1,j7=2,V7=-3,O7=-3,M7=-3,L7=-2,F7=-2,z7=-2,U7=-2,B7=-2,$7=-2,q7=-1,W7=-2,G7=-2,H7=-2,K7=-2,Q7=-2,Y7=-1,X7=-1,J7=-1,Z7=-2,eG=-2,tG=-2,nG=-2,sG=-2,rG=-2,iG=-2,oG=-2,aG=-2,cG=-2,lG=-2,uG=-2,dG=-2,hG=-2,fG=-3,mG=-2,pG=-1,gG=-1,yG=-1,vG=-1,_G=2,wG=-2,EG=-2,TG=-2,IG=-2,xG=-2,bG=-1,kG=-2,SG=-2,AG=-2,PG=-2,NG=-2,CG=-2,RG=-2,DG=-2,jG=-1,VG=-1,OG=-2,MG=-2,LG=-1,FG=-1,zG=-1,UG=-1,BG=-3,$G=-3,qG=-3,WG=-3,GG=-2,HG=-2,KG=-2,QG=-2,YG=-2,XG=-2,JG=-2,ZG=-2,eH=-2,tH=-2,nH=-2,sH=-2,rH=-2,iH=-2,oH=-2,aH=-2,cH=-2,lH=-2,uH=-2,dH=-2,hH=-2,fH=-2,mH=-2,pH=-2,gH=-2,yH=-2,vH=-2,_H=-2,wH=-2,EH=-2,TH=-2,IH=-2,xH=-2,bH=-2,kH=-2,SH=-2,AH=-2,PH=-2,NH=-2,CH=-2,RH=-2,DH=-2,jH=-2,VH=2,OH=-2,MH=-2,LH=-2,FH=-2,zH=-2,UH=-2,BH=-2,$H=-2,qH=-2,WH=-2,GH=-2,HH=-2,KH=-3,QH=-3,YH=-2,XH=-2,JH=-2,ZH=-2,eK=-2,tK=-1,nK=-1,sK=-2,rK=-2,iK=-2,oK=2,aK=2,cK=2,lK=2,uK=2,dK=-2,hK=-2,fK=-1,mK=-1,pK=-1,gK=-1,yK=-1,vK=-3,_K=-3,wK=-2,EK=-2,TK=-2,IK=-2,xK=-2,bK=-1,kK=-1,SK=-1,AK=-2,PK=-2,NK=-2,CK=-3,RK=-2,DK=1,jK=1,VK=-2,OK=-2,MK=-1,LK=-1,FK=-2,zK=-2,UK=-2,BK=-2,$K=-2,qK=-2,WK=-2,GK=-2,HK=-3,KK=-3,QK=-1,YK=-2,XK=-1,JK=-2,ZK=-2,eQ=-2,tQ=2,nQ=-3,sQ=-2,rQ=2,iQ=2,oQ=2,aQ=1,cQ=4,lQ=-2,uQ=-2,dQ=2,hQ=2,fQ=2,mQ=2,pQ=3,gQ=3,yQ=2,vQ=2,_Q=-2,wQ=-2,EQ=-2,TQ=-2,IQ=-2,xQ=-3,bQ=-2,kQ=1,SQ=-2,AQ=2,PQ=2,NQ=2,CQ=-1,RQ=-1,DQ=2,jQ=2,VQ=2,OQ=2,MQ=2,LQ=2,FQ=2,zQ=2,UQ=2,BQ=2,$Q=-2,qQ=-2,WQ=2,GQ=1,HQ=1,KQ=1,QQ=3,YQ=2,XQ=2,JQ=2,ZQ=2,eY=2,tY=2,nY=2,sY=2,rY=2,iY=-2,oY=-2,aY=-2,cY=-2,lY=-2,uY=3,dY=-2,hY=-2,fY=-2,mY=1,pY=1,gY=1,yY=2,vY=3,_Y=3,wY=1,EY=2,TY=-1,IY=-2,xY=-1,bY=-1,kY=-2,SY=-2,AY=-2,PY=-1,NY=-1,CY=2,RY=2,DY=2,jY=3,VY=4,OY=-1,MY=-1,LY=-1,FY=-1,zY=-1,UY=2,BY=2,$Y=-3,qY=-1,WY=-3,GY=-2,HY=-2,KY=-2,QY=-2,YY=-2,XY=-2,JY=-2,ZY=-2,eX=-2,tX=-2,nX=-2,sX=-2,rX=3,iX=3,oX=3,aX=3,cX=3,lX=3,uX=-1,dX=-2,hX=-1,fX=2,mX=-1,pX=-1,gX=-1,yX=-2,vX=3,_X=3,wX=3,EX=2,TX=2,IX=2,xX=2,bX=1,kX=1,SX=-2,AX=-2,PX=-2,NX=-2,CX=2,RX=-2,DX=-2,jX=-2,VX=-2,OX=1,MX=1,LX=-1,FX=-1,zX=-1,UX=-1,BX=3,$X=1,qX=-2,WX=-2,GX=4,HX=3,KX=3,QX=4,YX=4,XX=-2,JX=-3,ZX=-3,eJ=-3,tJ=-2,nJ=-2,sJ=-2,rJ=-2,iJ=-2,oJ=-2,aJ=-2,cJ=2,lJ=2,uJ=1,dJ=3,hJ=-3,fJ=-3,mJ=-3,pJ=-3,gJ=-2,yJ=-1,vJ=-2,_J=-3,wJ=-3,EJ=1,TJ=-2,IJ=2,xJ=3,bJ=4,kJ=-1,SJ=3,AJ=3,PJ=3,NJ=3,CJ=3,RJ=-2,DJ=-2,jJ=-3,VJ=-3,OJ=-3,MJ=-2,LJ=-2,FJ=-2,zJ=-2,UJ=2,BJ=2,$J=2,qJ=2,WJ=2,GJ=2,HJ=2,KJ=2,QJ=2,YJ=2,XJ=2,JJ=2,ZJ=2,eZ=2,tZ=2,nZ=2,sZ=-2,rZ=-2,iZ=-2,oZ=-2,aZ=2,cZ=2,lZ=-2,uZ=-2,dZ=1,hZ=-3,fZ=-3,mZ=2,pZ=2,gZ=2,yZ=2,vZ=-2,_Z=-3,wZ=-2,EZ=-1,TZ=-2,IZ=2,xZ=-2,bZ=3,kZ=-2,SZ=-2,AZ=-2,PZ=1,NZ=1,CZ=-2,RZ=-2,DZ=2,jZ=-2,VZ=-3,OZ=2,MZ=2,LZ=-2,FZ=-1,zZ=-2,UZ=-2,BZ=-2,$Z=-2,qZ=2,WZ=2,GZ=2,HZ=-2,KZ=-2,QZ=-2,YZ=-1,XZ=-2,JZ=-2,ZZ=-1,eee=-2,tee=-2,nee=1,see=-1,ree=-2,iee=-1,oee=1,aee=1,cee=-1,lee=-1,uee=2,dee=2,hee=2,fee=-3,mee=-1,pee=-4,gee=-4,yee=-4,vee=-4,_ee=-4,wee=-4,Eee=-2,Tee=1,Iee=2,xee=2,bee=-3,kee=1,See=1,Aee=2,Pee=2,Nee=2,Cee=-2,Ree=-2,Dee=-3,jee=-2,Vee=2,Oee=-1,Mee=-2,Lee=-2,Fee=-2,zee=-2,Uee=-2,Bee=-2,$ee=3,qee=-4,Wee=-4,Gee=-4,Hee=-4,Kee=-4,Qee=-4,Yee=-4,Xee=-4,Jee=-4,Zee=-3,ete=-4,tte=-4,nte=2,ste=2,rte=2,ite=2,ote=-2,ate=4,cte=-1,lte=-1,ute=2,dte=4,hte=4,fte=-3,mte=-2,pte=-2,gte=-2,yte=2,vte=2,_te=2,wte=2,Ete=3,Tte=3,Ite=3,xte=-1,bte=3,kte=2,Ste=2,Ate=3,Pte=-2,Nte=-1,Cte=-2,Rte=2,Dte=3,jte=3,Vte=3,Ote=3,Mte=3,Lte=-1,Fte=-2,zte=2,Ute=2,Bte=-2,$te=1,qte=-3,Wte=4,Gte=2,Hte=3,Kte=3,Qte=1,Yte=3,Xte=3,Jte=-2,Zte=-2,ene=1,tne=2,nne=3,sne=3,rne=1,ine=1,one=1,ane=1,cne=3,lne=2,une=-2,dne=-1,hne=-2,fne=3,mne=3,pne=3,gne=3,yne=-3,vne=-2,_ne=-3,wne=-3,Ene=-3,Tne=-3,Ine=1,xne=1,bne=1,kne=2,Sne=1,Ane=-1,Pne=-2,Nne=-2,Cne=-2,Rne=2,Dne=-2,jne=-2,Vne=-2,One=-2,Mne=-2,Lne=1,Fne=2,zne=2,Une=-3,Bne=1,$ne=-3,qne=-3,Wne=-2,Gne=-2,Hne=-1,Kne=2,Qne=-1,Yne=3,Xne=3,Jne=3,Zne=2,ese=2,tse=3,nse=1,sse=3,rse=-2,ise=-2,ose=3,ase=3,cse=3,lse=-3,use=-3,dse=-3,hse=-3,fse=-3,mse=-1,pse=2,gse=-2,yse=2,vse=-2,_se=-2,wse=-2,Ese=-2,Tse=2,Ise=2,xse=2,bse=-2,kse=-2,Sse=-2,Ase=-2,Pse=-2,Nse=-2,Cse=-3,Rse=-3,Dse=-3,jse=-3,Vse=-3,Ose=-3,Mse=-3,Lse=-1,Fse=-2,zse=1,Use=-1,Bse=-2,$se=-3,qse=-2,Wse=2,Gse=-3,Hse=-3,Kse=3,Qse=-2,Yse=3,Xse=2,Jse=4,Zse=-2,ere=2,tre=-4,nre=-2,sre=2,rre=2,ire=2,ore=-2,are=2,cre=2,lre=2,ure=3,dre=-2,hre=-2,fre=-1,mre=-1,pre=-3,gre=-1,yre=-1,vre=2,_re=2,wre=-2,Ere=-2,Tre=-2,Ire=-1,xre=-2,bre=-2,kre=-2,Sre=-2,Are=2,Pre=2,Nre=2,Cre=2,Rre=2,Dre=2,jre=2,Vre=-2,Ore=-2,Mre=-2,Lre=2,Fre=2,zre=2,Ure=-2,Bre=-2,$re=2,qre=2,Wre=-3,Gre=-3,Hre=-3,Kre=-3,Qre=-3,Yre=-2,Xre=-2,Jre=-2,Zre=2,eie=1,tie=2,nie=2,sie=1,rie=-2,iie=3,oie=-3,aie=-3,cie=2,lie=2,uie=2,die=2,hie=-2,fie=5,mie=-2,pie=-2,gie=-2,yie=-2,vie=-3,_ie=-3,wie=-3,Eie=-3,Tie=-3,Iie=-3,xie=-3,bie=-2,kie=-2,Sie=-1,Aie=-2,Pie=-1,Nie=-2,Cie=-3,Rie=-3,Die=-3,jie=-2,Vie=-2,Oie=-2,Mie=-2,Lie=2,Fie=-3,zie=-1,Uie=2,Bie=1,$ie=-2,qie=-2,Wie=-2,Gie=-2,Hie=-2,Kie=-2,Qie=-3,Yie=-3,Xie=-2,Jie=-2,Zie=-2,eoe=-2,toe=-2,noe=-2,soe=2,roe=2,ioe=-1,ooe=-1,aoe=-1,coe=-1,loe=-2,uoe=-2,doe=3,hoe=3,foe=3,moe=3,poe=-2,goe=-2,yoe=-2,voe=-2,_oe=2,woe=2,Eoe=2,Toe=2,Ioe=2,xoe=-2,boe=-2,koe=-2,Soe=-2,Aoe=-2,Poe=-2,Noe=-2,Coe=-2,Roe=-2,Doe=-2,joe=-2,Voe=-2,Ooe=-2,Moe=-2,Loe=-2,Foe=-2,zoe=-1,Uoe=-2,Boe=-2,$oe=-2,qoe=-2,Woe=1,Goe=1,Hoe=-2,Koe=2,Qoe=-2,Yoe=-2,Xoe=-2,Joe=-2,Zoe=-2,eae=-2,tae=-2,nae=-2,sae=-2,rae=-2,iae=-3,oae=-3,aae=-2,cae=-2,lae=-2,uae=-2,dae=-2,hae=-2,fae=-2,mae=-2,pae=-2,gae=-2,yae=2,vae=2,_ae=-2,wae=-2,Eae=-2,Tae=-2,Iae=-2,xae=-2,bae=-2,kae=-2,Sae=-2,Aae=-2,Pae=-2,Nae=-2,Cae=-2,Rae=-2,Dae=-2,jae=-2,Vae=-2,Oae=2,Mae=-2,Lae=-2,Fae=-2,zae=-2,Uae=-2,Bae=-2,$ae=-2,qae=-2,Wae=-2,Gae=-1,Hae=-2,Kae=-2,Qae=-2,Yae=-2,Xae=-2,Jae=1,Zae=1,ece=1,tce=2,nce=-2,sce=-2,rce=2,ice=-2,oce=-2,ace=-2,cce=-2,lce=-2,uce=-2,dce=-2,hce=-2,fce=-2,mce=2,pce=2,gce=2,yce=2,vce=2,_ce=3,wce=-2,Ece=-2,Tce=-2,Ice=-2,xce=-2,bce=-2,kce=-2,Sce=2,Ace=2,Pce=2,Nce=1,Cce=1,Rce=2,Dce=2,jce=1,Vce=-2,Oce=-2,Mce=-2,Lce=-2,Fce=-2,zce=-2,Uce=2,Bce=-2,$ce=-2,qce=-2,Wce=-2,Gce=-2,Hce=-2,Kce=-2,Qce=2,Yce=1,Xce=-1,Jce=2,Zce=1,ele=1,tle=2,nle=-3,sle=-1,rle=-1,ile=-1,ole=-2,ale=-2,cle=2,lle=2,ule=-2,dle=-2,hle=-2,fle=-1,mle=-1,ple=-3,gle=-3,yle=-3,vle=-3,_le=-1,wle=-2,Ele=-4,Tle=-4,Ile=-2,xle=2,ble=-2,kle=-2,Sle=-2,Ale=-3,Ple=1,Nle=1,Cle=1,Rle=2,Dle=1,jle=2,Vle=2,Ole=2,Mle=2,Lle=3,Fle=3,zle=3,Ule=-2,Ble=3,$le=3,qle=-1,Wle=2,Gle=2,Hle=2,Kle=1,Qle=-3,Yle=-3,Xle=-2,Jle=-2,Zle=-2,eue=-2,tue=-2,nue=-3,sue=-3,rue=-3,iue=-3,oue=2,aue=2,cue=2,lue=2,uue=3,due=-2,hue=-2,fue=-1,mue=-2,pue=-2,gue=-2,yue=-2,vue=2,_ue=-1,wue=-1,Eue=1,Tue=1,Iue=1,xue=1,bue=1,kue=1,Sue=3,Aue=-2,Pue=-2,Nue=-1,Cue=1,Rue=2,Due=-1,jue=-1,Vue=-1,Oue=1,Mue=1,Lue=1,Fue=-2,zue=-2,Uue=-2,Bue=-2,$ue=-3,que=-3,Wue=-2,Gue=-2,Hue=-1,Kue=4,Que=1,Yue=2,Xue=2,Jue=2,Zue=2,ede=2,tde=2,nde=2,sde=-1,rde=-1,ide=-1,ode=-1,ade=-2,cde=2,lde=-2,ude=4,dde=4,hde=-3,fde=-3,mde=-3,pde=-3,gde=-3,yde=-2,vde=-2,_de=-2,wde=-2,Ede=-2,Tde=3,Ide=4,xde=4,bde=4,kde=-2,Sde=-2,Ade=-1,Pde=3,Nde=-1,Cde=-1,Rde=-1,Dde=-1,jde=3,Vde=3,Ode=-3,Mde=-3,Lde=-3,Fde=-3,zde=-3,Ude=-3,Bde=-3,$de=-2,qde=3,Wde=3,Gde=3,Hde=3,Kde=3,Qde=3,Yde=2,Xde=-1,Jde=3,Zde=3,ehe=3,the=3,nhe=3,she=3,rhe=-3,ihe=-2,ohe=-3,ahe=-3,che=-1,lhe=-1,uhe=-1,dhe=2,hhe=-2,fhe=-3,mhe=-3,phe=-3,ghe=-3,yhe=3,vhe=-2,_he=-2,whe=-2,Ehe=-1,The=-1,Ihe=-1,xhe=-1,bhe=-3,khe=3,She=3,Ahe=3,Phe=4,Nhe=4,Che=1,Rhe=1,Dhe=2,jhe=2,Vhe=-2,Ohe=3,Mhe=-3,Lhe=1,Fhe=-2,zhe=1,Uhe=-2,Bhe=-2,$he=-2,qhe=-2,Whe=2,Ghe=3,Hhe=3,Khe=-2,Qhe=-2,Yhe=2,Xhe=2,Jhe=-2,Zhe=4,efe=3,tfe=3,nfe=3,sfe=-2,rfe=-2,ife=-2,ofe=-2,afe=-3,cfe=-2,lfe=-1,ufe=-1,dfe=-2,hfe=-2,ffe=-2,mfe=-2,pfe=-2,gfe=-2,yfe=-2,vfe=-3,_fe=-3,wfe=-2,Efe=-2,Tfe=-2,Ife=-2,xfe=-2,bfe=-2,kfe=-2,Sfe=-3,Afe=-3,Pfe=-3,Nfe=-3,Cfe=-2,Rfe=-2,Dfe=-2,jfe=-2,Vfe=-3,Ofe=-1,Mfe=-2,Lfe=-2,Ffe=-2,zfe=-2,Ufe=-2,Bfe=-2,$fe=-2,qfe=-2,Wfe=-2,Gfe=-2,Hfe=-2,Kfe=-2,Qfe=-2,Yfe=-2,Xfe=-2,Jfe=-2,Zfe=-2,eme=-2,tme=-2,nme=-2,sme=-2,rme=-2,ime=-2,ome=-2,ame=-2,cme=-2,lme=-2,ume=-2,dme=-2,hme=-2,fme=-2,mme=-2,pme=-2,gme=2,yme=2,vme=2,_me=2,wme=-2,Eme=-2,Tme=-2,Ime=-2,xme=-2,bme=-1,kme=-1,Sme=-1,Ame=-1,Pme=-3,Nme=-5,Cme=-5,Rme=1,Dme=2,jme=2,Vme=1,Ome=-2,Mme=-2,Lme=-2,Fme=-2,zme=-2,Ume=-2,Bme=-2,$me=-2,qme=-2,Wme=-3,Gme=-3,Hme=-2,Kme=-2,Qme=-1,Yme=-2,Xme=-2,Jme=-2,Zme=-3,epe=1,tpe=-2,npe=-2,spe=-2,rpe=-2,ipe=-2,ope=-2,ape=-2,cpe=-1,lpe=-2,upe=-2,dpe=3,hpe=2,fpe=-5,mpe=-5,ppe=-1,gpe=2,ype=2,vpe=-1,_pe=-2,wpe=-2,Epe=-2,Tpe=2,Ipe=2,xpe=-2,bpe=2,kpe=-1,Spe=2,Ape=-3,Ppe=-2,Npe=-2,Cpe=-3,Rpe=-2,Dpe=-2,jpe=2,Vpe=-2,Ope=-2,Mpe=-2,Lpe=-2,Fpe=-2,zpe=-2,Upe=-2,Bpe=-2,$pe=-2,qpe=-2,Wpe=-2,Gpe=-2,Hpe=-2,Kpe=-2,Qpe=-2,Ype=-2,Xpe=-2,Jpe=-2,Zpe=-2,ege=-2,tge=-2,nge=-1,sge=2,rge=3,ige=-2,oge=2,age=2,cge=-2,lge=-2,uge=-2,dge=-2,hge=2,fge=2,mge=-2,pge=-2,gge=-2,yge=-2,vge=-2,_ge=-2,wge=-2,Ege=-2,Tge=-2,Ige=-2,xge=-2,bge=-2,kge=-3,Sge=-3,Age=-3,Pge=2,Nge=5,Cge=4,Rge=-1,Dge=-1,jge=-2,Vge=-2,Oge=-2,Mge=-2,Lge=-2,Fge=-2,zge=-2,Uge=-2,Bge=-2,$ge=-2,qge=-1,Wge=-2,Gge=-2,Hge=-2,Kge=-2,Qge=-2,Yge=-2,Xge=-2,Jge=-1,Zge=-3,eye=-1,tye=-2,nye=-2,sye=-2,rye=-3,iye=-3,oye=-3,aye=3,cye=-1,lye=2,uye=2,dye=2,hye=2,fye=-1,mye=1,pye=2,gye=-1,yye=-1,vye=-2,_ye=-1,wye=2,Eye=2,Tye=2,Iye=-2,xye=-2,bye=-2,kye=-2,Sye=-2,Aye=-1,Pye=3,Nye=2,Cye=3,Rye=3,Dye=2,jye=-2,Vye=-3,Oye=-2,Mye=-2,Lye=-2,Fye=-2,zye=-2,Uye=-2,Bye=-2,$ye=-2,qye=-2,Wye=-3,Gye=-2,Hye=-2,Kye=-2,Qye=-2,Yye=2,Xye=-2,Jye=2,Zye=-1,eve=-2,tve=-2,nve=-2,sve=-4,rve=-4,ive=-3,ove=-2,ave=-1,cve=-2,lve=-3,uve=-3,dve=-3,hve=-3,fve=2,mve=3,pve=1,gve=3,yve=3,vve=3,_ve=-2,wve=2,Eve=-2,Tve=-2,Ive=-2,xve=-2,bve=-2,kve=2,Sve=2,Ave=2,Pve=-2,Nve=-2,Cve=-2,Rve=-2,Dve=-2,jve=-2,Vve=-2,Ove=-2,Mve=-2,Lve=-2,Fve=-2,zve=3,Uve=3,Bve=2,$ve=2,qve=-2,Wve=-1,Gve=-1,Hve=-1,Kve=-1,Qve=-1,Yve=2,Xve=-2,Jve=3,Zve=3,e_e=3,t_e=3,n_e=1,s_e=1,r_e=1,i_e=-2,o_e=-2,a_e=-2,c_e=1,l_e=-1,u_e=-2,d_e=-1,h_e=-1,f_e=-1,m_e=1,p_e=-1,g_e=-1,y_e=-1,v_e=-1,__e=-5,w_e=-2,E_e=-2,T_e=-2,I_e=2,x_e=2,b_e=-2,k_e=-2,S_e=2,A_e=2,P_e=-2,N_e=2,C_e=2,R_e=-1,D_e=-1,j_e=2,V_e=1,O_e=1,M_e=1,L_e=1,F_e=1,z_e=1,U_e=1,B_e=1,$_e=-2,q_e=-1,W_e=-2,G_e=-1,H_e=-1,K_e=1,Q_e=1,Y_e=3,X_e=3,J_e=1,Z_e=1,ewe=-2,twe=-2,nwe=-2,swe=-2,rwe=2,iwe=2,owe=-1,awe=-1,cwe=-1,lwe=-1,uwe=2,dwe=-3,hwe=-2,fwe=-2,mwe=-2,pwe=-2,gwe=-2,ywe=-2,vwe=1,_we=1,wwe=2,Ewe=-1,Twe=-2,Iwe=-2,xwe=2,bwe=2,kwe=-2,Swe=-1,Awe=-1,Pwe=-3,Nwe=-3,Cwe=-3,Rwe=-2,Dwe=-2,jwe=-1,Vwe=-3,Owe=-3,Mwe=-3,Lwe=-3,Fwe=-4,zwe=-4,Uwe=-4,Bwe=2,$we=2,qwe=2,Wwe=4,Gwe=-2,Hwe=2,Kwe=1,Qwe=1,Ywe=1,Xwe=1,Jwe=1,Zwe=1,e2e=1,t2e=2,n2e=-2,s2e=-2,r2e=-2,i2e=-2,o2e=-2,a2e=2,c2e=2,l2e=2,u2e=2,d2e=2,h2e=1,f2e=1,m2e=1,p2e=2,g2e=-2,y2e=-2,v2e=-2,_2e=-2,w2e=-2,E2e=-2,T2e=-2,I2e=-2,x2e=-2,b2e=1,k2e=-1,S2e=-1,A2e=-1,P2e=-2,N2e=-1,C2e=4,R2e=4,D2e=4,j2e=4,V2e=2,O2e=-1,M2e=2,L2e=2,F2e=2,z2e=2,U2e=1,B2e=2,$2e=1,q2e=2,W2e=2,G2e=2,H2e=-2,K2e=-2,Q2e=-2,Y2e=-2,X2e=-2,J2e=-2,Z2e=-2,e0e=-2,t0e=-1,n0e=-2,s0e=-2,r0e=2,i0e=2,o0e=2,a0e=-2,c0e=-1,l0e=-1,u0e=-1,d0e=-1,h0e=2,f0e=2,m0e=2,p0e=2,g0e=2,y0e=2,v0e=2,_0e=2,w0e=2,E0e=1,T0e=2,I0e=2,x0e=2,b0e=-2,k0e=1,S0e=1,A0e=1,P0e=1,N0e=-2,C0e=-2,R0e=-2,D0e=-2,j0e=-1,V0e=-2,O0e=-1,M0e=-2,L0e=-2,F0e=-1,z0e=-2,U0e=-2,B0e=2,$0e=2,q0e=2,W0e=-2,G0e=2,H0e=2,K0e=2,Q0e=2,Y0e=2,X0e=2,J0e=-3,Z0e=-1,e1e=-1,t1e=2,n1e=2,s1e=2,r1e=3,i1e=3,o1e=-2,a1e=-2,c1e=1,l1e=1,u1e=-2,d1e=-2,h1e=-2,f1e=3,m1e=-2,p1e=-2,g1e=-2,y1e=-2,v1e=-2,_1e=2,w1e=4,E1e=4,T1e=4,I1e=2,x1e=2,b1e=2,k1e=1,S1e=4,A1e=4,P1e=4,N1e=-3,C1e=-2,R1e=-2,D1e=-2,j1e=-2,V1e=-2,O1e=-2,M1e=-2,L1e=-2,F1e=-2,z1e=-2,U1e=1,B1e=1,$1e=2,q1e=1,W1e=1,G1e=2,H1e=2,K1e=2,Q1e=2,Y1e=2,X1e=-1,J1e=-2,Z1e=2,eEe=-2,tEe=-2,nEe=2,sEe=2,rEe=1,iEe=-2,oEe=-2,aEe=-3,cEe=-3,lEe=-3,uEe=-2,dEe=-2,hEe=-2,fEe=-2,mEe=-2,pEe=-2,gEe=-2,yEe=-2,vEe=-2,_Ee=3,wEe=-2,EEe=-2,TEe=-2,IEe=-2,xEe=-2,bEe=-2,kEe=-2,SEe=-3,AEe=-4,PEe=2,NEe=2,CEe=2,REe=2,DEe=2,jEe=-2,VEe=-2,OEe=-1,MEe=-3,LEe=-3,FEe=-2,zEe=-2,UEe=-2,BEe=-2,$Ee=2,qEe=1,WEe=1,GEe=-2,HEe=-2,KEe=-2,QEe=-2,YEe=3,XEe=-2,JEe=-2,ZEe=-2,eTe=-2,tTe=1,nTe=1,sTe=1,rTe=-2,iTe=-4,oTe=-4,aTe=-3,cTe=-2,lTe=-2,uTe=-2,dTe=-2,hTe=-2,fTe=-1,mTe=-2,pTe=-2,gTe=-4,yTe=-1,vTe=-2,_Te=-2,wTe=-2,ETe=1,TTe=1,ITe=-1,xTe=-1,bTe=1,kTe=-2,STe=2,ATe=2,PTe=2,NTe=2,CTe=-3,RTe=-2,DTe=-2,jTe=-2,VTe=-2,OTe=-2,MTe=-2,LTe=-2,FTe=-2,zTe=-2,UTe=-2,BTe=-2,$Te=-2,qTe=-3,WTe=-3,GTe=-3,HTe=-2,KTe=2,QTe=2,YTe=2,XTe=-1,JTe=-2,ZTe=-2,eIe=-1,tIe=-5,nIe=1,sIe=2,rIe=2,iIe=-2,oIe=2,aIe=2,cIe=2,lIe=2,uIe=-2,dIe=-2,hIe=-2,fIe=-2,mIe=-2,pIe=-1,gIe=-2,yIe=-2,vIe=-2,_Ie=-2,wIe=-2,EIe=-2,TIe=-2,IIe=-2,xIe=1,bIe=-1,kIe=2,SIe=2,AIe=2,PIe=2,NIe=2,CIe=2,RIe=1,DIe=1,jIe=1,VIe=1,OIe=1,MIe=1,LIe=-2,FIe=3,zIe=3,UIe=3,BIe=2,$Ie=-1,qIe=-2,WIe=-2,GIe=-1,HIe=1,KIe=-2,QIe=-3,YIe=-3,XIe=-2,JIe=1,ZIe=3,exe=3,txe=3,nxe=2,sxe=-2,rxe=1,ixe=2,oxe=-2,axe=-2,cxe=3,lxe=-2,uxe=-2,dxe=2,hxe=2,fxe=-2,mxe=-2,pxe=-2,gxe=-2,yxe=-1,vxe=-2,_xe=-2,wxe=2,Exe=-2,Txe=-2,Ixe=-2,xxe=-2,bxe=2,kxe=-2,Sxe=-2,Axe=-2,Pxe=3,Nxe=-2,Cxe=-2,Rxe=-2,Dxe=-2,jxe=2,Vxe=-2,Oxe=-2,Mxe=-2,Lxe=-2,Fxe=-2,zxe=-1,Uxe=1,Bxe=1,$xe=1,qxe=2,Wxe=-2,Gxe=-2,Hxe=-2,Kxe=-2,Qxe=-2,Yxe=-2,Xxe=-2,Jxe=-2,Zxe=-2,ebe=-1,tbe=-1,nbe=-1,sbe=-1,rbe=2,ibe=1,obe=-1,abe=-1,cbe=-2,lbe=2,ube=2,dbe=2,hbe=2,fbe=2,mbe=2,pbe=-1,gbe=-2,ybe=-2,vbe=-2,_be=-2,wbe=-1,Ebe=-2,Tbe=-1,Ibe=2,xbe=2,bbe=2,kbe=-1,Sbe=-2,Abe=-2,Pbe=-2,Nbe=-2,Cbe=-2,Rbe=-2,Dbe=-2,jbe=4,Vbe=-2,Obe=-3,Mbe=-2,Lbe=2,Fbe=-2,zbe=1,Ube=1,Bbe=-2,$be=3,qbe=3,Wbe=3,Gbe=3,Hbe=2,Kbe=3,Qbe=3,Ybe=-3,Xbe=-3,Jbe=-2,Zbe=-2,eke=-2,tke=-2,nke=-2,ske=-2,rke=-2,ike=-2,oke=-2,ake=-2,cke=-2,lke=-2,uke=-2,dke=-2,hke=2,fke=2,mke=-2,pke=-2,gke=-2,yke=2,vke=5,_ke=2,wke=2,Eke=2,Tke=1,Ike=1,xke=1,bke=2,kke=2,Ske=4,Ake=2,Pke=2,Nke=2,Cke=-1,Rke=-1,Dke=-1,jke=-1,Vke=-1,Oke=-1,Mke=-2,Lke=1,Fke=2,zke=2,Uke=-2,Bke=-2,$ke=-2,qke=2,Wke=3,Gke=3,Hke=2,Kke=2,Qke=-3,Yke=-3,Xke=-3,Jke=2,Zke=2,eSe=-2,tSe=-2,nSe=2,sSe=-2,rSe=-2,iSe=-2,oSe=-2,aSe=-2,cSe=2,lSe=2,uSe=-2,dSe=-1,hSe=-3,fSe=-3,mSe=4,pSe=4,gSe=-3,ySe=-3,vSe=-2,_Se=-2,wSe=-3,ESe=-3,TSe=-3,ISe=2,xSe=2,bSe=2,kSe=-2,SSe=2,ASe=-2,PSe=-2,NSe=-2,CSe=-2,RSe=-2,DSe=-2,jSe=-2,VSe=5,OSe=-2,MSe=-2,LSe=-2,FSe=-2,zSe=-2,USe=-2,BSe=-2,$Se=-2,qSe=2,WSe=2,GSe=-2,HSe=2,KSe=2,QSe=-2,YSe=-4,XSe=-4,JSe=-4,ZSe=-4,eAe=-2,tAe=-2,nAe=-2,sAe=-2,rAe=-2,iAe=-2,oAe=-3,aAe=-2,cAe=-2,lAe=-2,uAe=2,dAe=-2,hAe=-2,fAe=-2,mAe=-2,pAe=-1,gAe=-2,yAe=-1,vAe=-3,_Ae=-3,wAe=-2,EAe=-3,TAe=-3,IAe=2,xAe=2,bAe=-2,kAe=-2,SAe=-2,AAe=-2,PAe=-2,NAe=2,CAe=-2,RAe=-2,DAe=4,jAe=4,VAe=-2,OAe=-2,MAe=-2,LAe=-2,FAe=-2,zAe=1,UAe=2,BAe=1,$Ae=-2,qAe=-5,WAe=-3,GAe=-3,HAe=-3,KAe=-3,QAe=-3,YAe=2,XAe=-2,JAe=-3,ZAe=-3,ePe=-2,tPe=-2,nPe=-2,sPe=-2,rPe=-2,iPe=-2,oPe=-1,aPe=-2,cPe=-2,lPe=-2,uPe=-1,dPe=-1,hPe=2,fPe=-1,mPe=-1,pPe=-2,gPe=-2,yPe=-1,vPe=-1,_Pe=-1,wPe=-1,EPe=-2,TPe=-1,IPe=-1,xPe=-1,bPe=-1,kPe=-2,SPe=-2,APe=-2,PPe=-2,NPe=-2,CPe=-2,RPe=-2,DPe=-2,jPe=-2,VPe=-2,OPe=-2,MPe=-1,LPe=-2,FPe=-1,zPe=2,UPe=-2,BPe=-2,$Pe=-2,qPe=-2,WPe=-2,GPe=-2,HPe=-2,KPe=-3,QPe=-2,YPe=-2,XPe=-2,JPe=-2,ZPe=-3,eNe=-2,tNe=-2,nNe=-2,sNe=-2,rNe=1,iNe=-2,oNe=-2,aNe=-2,cNe=-2,lNe=-2,uNe=-2,dNe=1,hNe=-2,fNe=-1,mNe=-2,pNe=-2,gNe=1,yNe=-2,vNe=-2,_Ne=-2,wNe=-2,ENe=-2,TNe=-2,INe=1,xNe=-2,bNe=-2,kNe=-2,SNe=-2,ANe=-2,PNe=-2,NNe=2,CNe=-1,RNe=-1,DNe=-2,jNe=-2,VNe=-2,ONe=2,MNe=-2,LNe=-2,FNe=-2,zNe=-1,UNe=2,BNe=-2,$Ne=-2,qNe=-2,WNe=2,GNe=-3,HNe=-2,KNe=-2,QNe=-2,YNe=-2,XNe=-1,JNe=2,ZNe=2,eCe=-2,tCe=-2,nCe=-2,sCe=1,rCe=1,iCe=1,oCe=1,aCe=-2,cCe=-1,lCe=-1,uCe=1,dCe=-2,hCe=-2,fCe=3,mCe=-2,pCe=-3,gCe=-3,yCe=-3,vCe=-3,_Ce=-3,wCe=-3,ECe=-3,TCe=3,ICe=3,xCe=3,bCe=3,kCe=3,SCe=3,ACe=-3,PCe=2,NCe=2,CCe=2,RCe=2,DCe=-2,jCe=-2,VCe=-2,OCe=-2,MCe=-2,LCe=-2,FCe=-3,zCe=-3,UCe=-3,BCe=2,$Ce=-2,qCe=1,WCe=3,GCe=1,HCe=1,KCe=3,QCe=1,YCe=-3,XCe=3,JCe=2,ZCe=-1,eRe=-3,tRe=-3,nRe=-3,sRe=-3,rRe=-2,iRe=-2,oRe=-2,aRe=-2,cRe=-3,lRe=1,uRe=-2,dRe=-2,hRe=1,fRe=2,mRe=2,pRe=2,gRe=-2,yRe=-2,vRe=-3,_Re=-3,wRe=-2,ERe=-1,TRe=-2,IRe=-2,xRe=-1,bRe=-2,kRe=-2,SRe=-2,ARe=-2,PRe=3,NRe=2,CRe=2,RRe=-2,DRe=-2,jRe=-2,VRe=-2,ORe=2,MRe=2,LRe=2,FRe=1,zRe=-3,URe=-4,BRe=-2,$Re=-1,qRe=2,WRe=4,GRe=4,HRe=4,KRe=4,QRe=3,YRe=1,XRe=1,JRe=1,ZRe=1,eDe=-3,tDe=2,nDe=-2,sDe=-3,rDe=3,iDe=4,oDe=4,aDe=3,cDe=3,lDe=4,uDe=4,dDe=-1,hDe=-3,fDe=-3,mDe=-3,pDe=-3,gDe=-3,yDe=-3,vDe=-3,_De=-3,wDe=-3,EDe=3,TDe=-3,IDe=2,xDe=-2,bDe=2,kDe=4,SDe=4,ADe=4,PDe=-3,NDe=-2,CDe=-2,RDe=-2,DDe=-2,jDe=-2,VDe=-2,ODe=-2,MDe=-2,LDe=-2,FDe=-4,zDe=-4,UDe=-4,BDe=3,$De=3,qDe=4,WDe=4,GDe=1,HDe=1,KDe=2,QDe=1,YDe=2,XDe=-2,JDe=3,ZDe=-2,e3e=-2,t3e=2,n3e={abandon:RV,abandoned:DV,abandons:jV,abducted:VV,abduction:OV,abductions:MV,abhor:LV,abhorred:FV,abhorrent:zV,abhors:UV,abilities:BV,ability:$V,aboard:qV,aborted:WV,aborts:GV,absentee:HV,absentees:KV,absolve:QV,absolved:YV,absolves:XV,absolving:JV,absorbed:ZV,abuse:eO,abused:tO,abuses:nO,abusing:sO,abusive:rO,accept:iO,acceptable:oO,acceptance:aO,accepted:cO,accepting:lO,accepts:uO,accessible:dO,accident:hO,accidental:fO,accidentally:mO,accidents:pO,acclaim:gO,acclaimed:yO,accolade:vO,accomplish:_O,accomplished:wO,accomplishes:EO,accomplishment:TO,accomplishments:IO,accusation:xO,accusations:bO,accuse:kO,accused:SO,accuses:AO,accusing:PO,ache:NO,achievable:CO,aching:RO,acquit:DO,acquits:jO,acquitted:VO,acquitting:OO,acrimonious:MO,active:LO,adequate:FO,admire:zO,admired:UO,admires:BO,admiring:$O,admit:qO,admits:WO,admitted:GO,admonish:HO,admonished:KO,adopt:QO,adopts:YO,adorable:XO,adoration:JO,adore:ZO,adored:eM,adores:tM,adoring:nM,adoringly:sM,advanced:rM,advantage:iM,advantageous:oM,advantageously:aM,advantages:cM,adventure:lM,adventures:uM,adventurous:dM,adversary:hM,advisable:fM,affected:mM,affection:pM,affectionate:gM,affectionateness:yM,afflicted:vM,affordable:_M,affronted:wM,aficionados:EM,afraid:TM,aggravate:IM,aggravated:xM,aggravates:bM,aggravating:kM,aggression:SM,aggressions:AM,aggressive:PM,aggressiveness:NM,aghast:CM,agog:RM,agonise:DM,agonised:jM,agonises:VM,agonising:OM,agonize:MM,agonized:LM,agonizes:FM,agonizing:zM,agree:UM,agreeable:BM,agreed:$M,agreement:qM,agrees:WM,alarm:GM,alarmed:HM,alarmist:KM,alarmists:QM,alas:YM,alert:XM,alienation:JM,alive:ZM,allegation:eL,allegations:tL,allergic:nL,allow:sL,ally:rL,alone:iL,altruistic:oL,amaze:aL,amazed:cL,amazes:lL,amazing:uL,ambitious:dL,ambivalent:hL,amicable:fL,amuse:mL,amused:pL,amusement:gL,amusements:yL,anger:vL,angered:_L,angers:wL,angry:EL,anguish:TL,anguished:IL,animosity:xL,annoy:bL,annoyance:kL,annoyed:SL,annoying:AL,annoys:PL,antagonistic:NL,anti:CL,anticipation:RL,anxiety:DL,anxious:jL,apathetic:VL,apathy:OL,apeshit:ML,apocalyptic:LL,apologise:FL,apologised:zL,apologises:UL,apologising:BL,apologize:$L,apologized:qL,apologizes:WL,apologizing:GL,apology:HL,appalled:KL,appalling:QL,appealing:YL,appease:XL,appeased:JL,appeases:ZL,appeasing:e4,applaud:t4,applauded:n4,applauding:s4,applauds:r4,applause:i4,appreciate:o4,appreciated:a4,appreciates:c4,appreciating:l4,appreciation:u4,apprehensive:d4,appropriate:h4,appropriately:f4,approval:m4,approved:p4,approves:g4,ardent:y4,arrest:v4,arrested:_4,arrests:w4,arrogant:E4,arsehole:T4,ashame:I4,ashamed:x4,ass:b4,assassination:k4,assassinations:S4,assault:A4,assaults:P4,asset:N4,assets:C4,assfucking:R4,asshole:D4,astonished:j4,astound:V4,astounded:O4,astounding:M4,astoundingly:L4,astounds:F4,atrocious:z4,atrocity:U4,attack:B4,attacked:$4,attacking:q4,attacks:W4,attract:G4,attracted:H4,attracting:K4,attraction:Q4,attractions:Y4,attractive:X4,attractively:J4,attractiveness:Z4,attracts:eF,audacious:tF,aura:nF,authority:sF,avenge:rF,avenged:iF,avenger:oF,avengers:aF,avenges:cF,avenging:lF,avert:uF,averted:dF,averts:hF,avid:fF,avoid:mF,avoided:pF,avoids:gF,await:-1,awaited:yF,awaits:vF,award:_F,awarded:wF,awards:EF,awesome:TF,awful:IF,awkward:xF,axe:bF,axed:kF,backed:SF,backing:AF,backs:PF,bad:NF,"bad luck":-2,badass:CF,badly:RF,badness:DF,bailout:jF,balanced:VF,bamboozle:OF,bamboozled:MF,bamboozles:LF,ban:FF,banish:zF,bankrupt:UF,bankruptcy:BF,bankster:$F,banned:qF,barbarian:WF,barbaric:GF,barbarous:HF,bargain:KF,barrier:QF,bastard:YF,bastards:XF,battle:JF,battled:ZF,battles:ez,battling:tz,beaten:nz,beatific:sz,beating:rz,beauties:iz,beautiful:oz,beautifully:az,beautify:cz,beauty:lz,befit:uz,befitting:dz,belittle:hz,belittled:fz,beloved:mz,benefactor:pz,benefactors:gz,benefit:yz,benefits:vz,benefitted:_z,benefitting:wz,benevolent:Ez,bereave:Tz,bereaved:Iz,bereaves:xz,bereaving:bz,best:kz,"best damn":4,betray:Sz,betrayal:Az,betrayed:Pz,betraying:Nz,betrays:Cz,better:Rz,bias:Dz,biased:jz,big:Vz,bitch:Oz,bitches:Mz,bitter:Lz,bitterest:Fz,bitterly:zz,bizarre:Uz,blackmail:Bz,blackmailed:$z,blackmailing:qz,blackmails:Wz,blah:Gz,blame:Hz,blamed:Kz,blames:Qz,blaming:Yz,bless:Xz,blesses:Jz,blessing:Zz,blessings:e5,blind:t5,bliss:n5,blissful:s5,blithe:r5,bloated:i5,block:o5,blockade:a5,blockbuster:c5,blocked:l5,blocking:u5,blocks:d5,bloody:h5,blurry:f5,boastful:m5,bold:p5,boldly:g5,bomb:y5,boost:v5,boosted:_5,boosting:w5,boosts:E5,bore:T5,bored:I5,boring:x5,bother:b5,bothered:k5,bothers:S5,bothersome:A5,boycott:P5,boycotted:N5,boycotting:C5,boycotts:R5,brainwashing:D5,brave:j5,braveness:V5,bravery:O5,bravura:M5,breach:L5,breached:F5,breaches:z5,breaching:U5,breakthrough:B5,breathtaking:$5,bribe:q5,bribed:W5,bribes:G5,bribing:H5,bright:K5,brightest:Q5,brightness:Y5,brilliant:X5,brilliance:J5,brilliances:Z5,brisk:e6,broke:t6,broken:n6,brooding:s6,brutal:r6,brutally:i6,bullied:o6,bullshit:a6,bully:c6,bullying:l6,bummer:u6,buoyant:d6,burden:h6,burdened:f6,burdening:m6,burdens:p6,burglar:g6,burglary:y6,calm:v6,calmed:_6,calming:w6,calms:E6,"can't stand":-3,cancel:T6,cancelled:I6,cancelling:x6,cancels:b6,cancer:k6,capabilities:S6,capability:A6,capable:P6,captivated:N6,care:C6,carefree:R6,careful:D6,carefully:j6,carefulness:V6,careless:O6,cares:M6,caring:L6,"cashing in":-2,casualty:F6,catastrophe:z6,catastrophic:U6,cautious:B6,celebrate:$6,celebrated:q6,celebrates:W6,celebrating:G6,celebration:H6,celebrations:K6,censor:Q6,censored:Y6,censors:X6,certain:J6,chagrin:Z6,chagrined:eU,challenge:tU,champion:nU,championed:sU,champions:rU,chance:iU,chances:oU,chaos:aU,chaotic:cU,charged:lU,charges:uU,charisma:dU,charitable:hU,charm:fU,charming:mU,charmingly:pU,charmless:gU,chastise:yU,chastised:vU,chastises:_U,chastising:wU,cheat:EU,cheated:TU,cheater:IU,cheaters:xU,cheating:bU,cheats:kU,cheer:SU,cheered:AU,cheerful:PU,cheerfully:NU,cheering:CU,cheerless:RU,cheers:DU,cheery:jU,cherish:VU,cherished:OU,cherishes:MU,cherishing:LU,chic:FU,chide:zU,chided:UU,chides:BU,chiding:$U,childish:qU,chilling:WU,choke:GU,choked:HU,chokes:KU,choking:QU,clarifies:YU,clarity:XU,clash:JU,classy:ZU,clean:e9,cleaner:t9,clear:n9,cleared:s9,clearly:r9,clears:i9,clever:o9,clouded:a9,clueless:c9,cock:l9,cocksucker:u9,cocksuckers:d9,cocky:h9,coerced:f9,coercion:m9,collapse:p9,collapsed:g9,collapses:y9,collapsing:v9,collide:_9,collides:w9,colliding:E9,collision:T9,collisions:I9,colluding:x9,combat:b9,combats:k9,comedy:S9,comfort:A9,comfortable:P9,comfortably:N9,comforting:C9,comforts:R9,comic:D9,commend:j9,commended:V9,commit:O9,commitment:M9,commits:L9,committed:F9,committing:z9,compassion:U9,compassionate:B9,compelled:$9,competencies:q9,competent:W9,competitive:G9,complacent:H9,complain:K9,complained:Q9,complaining:Y9,complains:X9,complaint:J9,complaints:Z9,complicating:eB,compliment:tB,complimented:nB,compliments:sB,comprehensive:rB,concerned:iB,conciliate:oB,conciliated:aB,conciliates:cB,conciliating:lB,condemn:uB,condemnation:dB,condemned:hB,condemns:fB,confidence:mB,confident:pB,confidently:gB,conflict:yB,conflicting:vB,conflictive:_B,conflicts:wB,confuse:EB,confused:TB,confusing:IB,congrats:xB,congratulate:bB,congratulation:kB,congratulations:SB,consent:AB,consents:PB,consolable:NB,conspiracy:CB,constipation:RB,constrained:DB,contagion:jB,contagions:VB,contagious:OB,contaminant:MB,contaminants:LB,contaminate:FB,contaminated:zB,contaminates:UB,contaminating:BB,contamination:$B,contaminations:qB,contempt:WB,contemptible:GB,contemptuous:HB,contemptuously:KB,contend:QB,contender:YB,contending:XB,contentious:JB,contestable:ZB,controversial:e$,controversially:t$,controversies:n$,controversy:s$,convicted:r$,convince:i$,convinced:o$,convinces:a$,convivial:c$,cool:l$,"cool stuff":3,cornered:u$,corpse:d$,corrupt:h$,corrupted:f$,corrupting:m$,corruption:p$,corrupts:g$,costly:y$,courage:v$,courageous:_$,courageously:w$,courageousness:E$,courteous:T$,courtesy:I$,"cover-up":-3,coward:x$,cowardly:b$,coziness:k$,cramp:S$,crap:A$,crappy:P$,crash:N$,crazier:C$,craziest:R$,crazy:D$,creative:j$,crestfallen:V$,cried:O$,cries:M$,crime:L$,crimes:F$,criminal:z$,criminals:U$,criminate:B$,criminated:$$,criminates:q$,crisis:W$,critic:G$,criticise:H$,criticised:K$,criticises:Q$,criticising:Y$,criticism:X$,criticize:J$,criticized:Z$,criticizes:eq,criticizing:tq,critics:nq,critique:sq,crowding:rq,crude:iq,cruel:oq,cruelty:aq,crush:cq,crushed:lq,crushes:uq,crushing:dq,cry:hq,crying:fq,cunning:mq,cunt:pq,curious:gq,curse:yq,cut:vq,cutback:_q,cutbacks:wq,cute:Eq,cuts:Tq,cutting:Iq,cynic:xq,cynical:bq,cynicism:kq,damage:Sq,damaged:Aq,damages:Pq,damaging:Nq,damn:Cq,"damn cute":3,"damn good":4,damned:Rq,damnit:Dq,danger:jq,dangerous:Vq,dangerously:Oq,daredevil:Mq,daring:Lq,darkest:Fq,darkness:zq,dauntless:Uq,dazzling:Bq,dead:$q,deadening:qq,deadlock:Wq,deadly:Gq,deafening:Hq,dear:Kq,dearly:Qq,death:Yq,deaths:Xq,debonair:Jq,debt:Zq,deceit:e8,deceitful:t8,deceive:n8,deceived:s8,deceives:r8,deceiving:i8,deception:o8,deceptive:a8,decisive:c8,dedicated:l8,dedication:u8,defeat:d8,defeated:h8,defect:f8,defective:m8,defects:p8,defender:g8,defenders:y8,defenseless:v8,defer:_8,deferring:w8,defiant:E8,deficient:T8,deficiency:I8,deficiencies:x8,deficit:b8,deformed:k8,deformities:S8,deformity:A8,defraud:P8,defrauds:N8,deft:C8,defunct:R8,degrade:D8,degraded:j8,degrades:V8,dehumanize:O8,dehumanized:M8,dehumanizes:L8,dehumanizing:F8,deject:z8,dejected:U8,dejecting:B8,dejects:$8,delay:q8,delayed:W8,delectable:G8,delicious:H8,delight:K8,delighted:Q8,delightful:Y8,delightfully:X8,delighting:J8,delights:Z8,demand:eW,demanded:tW,demanding:nW,demands:sW,demonstration:rW,demoralize:iW,demoralized:oW,demoralizes:aW,demoralizing:cW,denial:lW,denials:uW,denied:dW,denier:hW,deniers:fW,denies:mW,denounce:pW,denounces:gW,dent:yW,deny:vW,denying:_W,deplore:wW,deplored:EW,deplores:TW,deploring:IW,deport:xW,deported:bW,deporting:kW,deports:SW,deportation:AW,deportations:PW,depressed:NW,depressing:CW,deprivation:RW,derail:DW,derailed:jW,derails:VW,derelict:OW,deride:MW,derided:LW,derides:FW,deriding:zW,derision:UW,desirable:BW,desire:$W,desired:qW,desirous:WW,despair:GW,despairing:HW,despairs:KW,desperate:QW,desperately:YW,despondent:XW,destroy:JW,destroyed:ZW,destroying:e7,destroys:t7,destruction:n7,destructive:s7,detached:r7,detain:i7,detained:o7,detention:a7,deteriorate:c7,deteriorated:l7,deteriorates:u7,deteriorating:d7,determined:h7,deterrent:f7,detract:m7,detracted:p7,detracts:g7,devastate:y7,devastated:v7,devastating:_7,devastation:w7,devastations:E7,devoted:T7,devotion:I7,devotional:x7,diamond:b7,dick:k7,dickhead:S7,die:A7,died:P7,difficult:N7,diffident:C7,dignity:R7,dilemma:D7,dilligence:j7,dipshit:V7,dire:O7,direful:M7,dirt:L7,dirtier:F7,dirtiest:z7,dirty:U7,disabilities:B7,disability:$7,disabling:q7,disadvantage:W7,disadvantaged:G7,disagree:H7,disagreeable:K7,disagreement:Q7,disappear:Y7,disappeared:X7,disappears:J7,disappoint:Z7,disappointed:eG,disappointing:tG,disappointment:nG,disappointments:sG,disappoints:rG,disapproval:iG,disapprovals:oG,disapprove:aG,disapproved:cG,disapproves:lG,disapproving:uG,disaster:dG,disasters:hG,disastrous:fG,disbelieve:mG,discard:pG,discarded:gG,discarding:yG,discards:vG,discernment:_G,discomfort:wG,disconsolate:EG,disconsolation:TG,discontented:IG,discord:xG,discounted:bG,discouraged:kG,discredited:SG,discriminate:AG,discriminated:PG,discriminates:NG,discriminating:CG,discriminatory:RG,disdain:DG,disease:jG,diseases:VG,disgrace:OG,disgraced:MG,disguise:LG,disguised:FG,disguises:zG,disguising:UG,disgust:BG,disgusted:$G,disgustful:qG,disgusting:WG,disheartened:GG,dishonest:HG,disillusioned:KG,disinclined:QG,disjointed:YG,dislike:XG,disliked:JG,dislikes:ZG,dismal:eH,dismayed:tH,dismissed:nH,disorder:sH,disorders:rH,disorganized:iH,disoriented:oH,disparage:aH,disparaged:cH,disparages:lH,disparaging:uH,displeased:dH,displeasure:hH,disproportionate:fH,dispute:mH,disputed:pH,disputes:gH,disputing:yH,disqualified:vH,disquiet:_H,disregard:wH,disregarded:EH,disregarding:TH,disregards:IH,disrespect:xH,disrespected:bH,disrupt:kH,disrupted:SH,disrupting:AH,disruption:PH,disruptions:NH,disruptive:CH,disrupts:RH,dissatisfied:DH,distasteful:jH,distinguished:VH,distort:OH,distorted:MH,distorting:LH,distorts:FH,distract:zH,distracted:UH,distraction:BH,distracts:$H,distress:qH,distressed:WH,distresses:GH,distressing:HH,distrust:KH,distrustful:QH,disturb:YH,disturbed:XH,disturbing:JH,disturbs:ZH,dithering:eK,diverting:tK,dizzy:nK,dodging:sK,dodgy:rK,"does not work":-3,dolorous:iK,donate:oK,donated:aK,donates:cK,donating:lK,donation:uK,"dont like":-2,doom:dK,doomed:hK,doubt:fK,doubted:mK,doubtful:pK,doubting:gK,doubts:yK,douche:vK,douchebag:_K,dour:wK,downcast:EK,downer:TK,downhearted:IK,downside:xK,drag:bK,dragged:kK,drags:SK,drained:AK,dread:PK,dreaded:NK,dreadful:CK,dreading:RK,dream:DK,dreams:jK,dreary:VK,droopy:OK,drop:MK,dropped:LK,drown:FK,drowned:zK,drowns:UK,drudgery:BK,drunk:$K,dubious:qK,dud:WK,dull:GK,dumb:HK,dumbass:KK,dump:QK,dumped:YK,dumps:XK,dupe:JK,duped:ZK,dupery:eQ,durable:tQ,dying:nQ,dysfunction:sQ,eager:rQ,earnest:iQ,ease:oQ,easy:aQ,ecstatic:cQ,eerie:lQ,eery:uQ,effective:dQ,effectively:hQ,effectiveness:fQ,effortlessly:mQ,elated:pQ,elation:gQ,elegant:yQ,elegantly:vQ,embarrass:_Q,embarrassed:wQ,embarrasses:EQ,embarrassing:TQ,embarrassment:IQ,embezzlement:xQ,embittered:bQ,embrace:kQ,emergency:SQ,empathetic:AQ,empower:PQ,empowerment:NQ,emptiness:CQ,empty:RQ,enchanted:DQ,encourage:jQ,encouraged:VQ,encouragement:OQ,encourages:MQ,encouraging:LQ,endorse:FQ,endorsed:zQ,endorsement:UQ,endorses:BQ,enemies:$Q,enemy:qQ,energetic:WQ,engage:GQ,engages:HQ,engrossed:KQ,engrossing:QQ,enjoy:YQ,enjoyable:XQ,enjoyed:JQ,enjoying:ZQ,enjoys:eY,enlighten:tY,enlightened:nY,enlightening:sY,enlightens:rY,ennui:iY,enrage:oY,enraged:aY,enrages:cY,enraging:lY,enrapture:uY,enslave:dY,enslaved:hY,enslaves:fY,ensure:mY,ensuring:pY,enterprising:gY,entertaining:yY,enthral:vY,enthusiastic:_Y,entitled:wY,entrusted:EY,envies:TY,envious:IY,"environment-friendly":2,envy:xY,envying:bY,erroneous:kY,error:SY,errors:AY,escape:-1,escapes:PY,escaping:NY,esteem:CY,esteemed:RY,ethical:DY,euphoria:jY,euphoric:VY,evacuate:OY,evacuated:MY,evacuates:LY,evacuating:FY,evacuation:zY,evergreen:UY,evergreens:BY,evergreening:$Y,eviction:qY,evil:WY,exacerbate:GY,exacerbated:HY,exacerbates:KY,exacerbating:QY,exaggerate:YY,exaggerated:XY,exaggerates:JY,exaggerating:ZY,exasparate:eX,exasperated:tX,exasperates:nX,exasperating:sX,excellence:rX,excellent:iX,excite:oX,excited:aX,excitement:cX,exciting:lX,exclude:uX,excluded:dX,exclusion:hX,exclusive:fX,excruciatingly:mX,excuse:pX,exempt:gX,exhausted:yX,exhilarated:vX,exhilarates:_X,exhilarating:wX,exonerate:EX,exonerated:TX,exonerates:IX,exonerating:xX,expand:bX,expands:kX,expel:SX,expelled:AX,expelling:PX,expels:NX,expertly:CX,exploit:RX,exploited:DX,exploiting:jX,exploits:VX,exploration:OX,explorations:MX,expose:LX,exposed:FX,exposes:zX,exposing:UX,exquisite:BX,extend:$X,extends:1,extremist:qX,extremists:WX,exuberant:GX,exultant:HX,exultantly:KX,fabulous:QX,fabulously:YX,fad:XX,fag:JX,faggot:ZX,faggots:eJ,fail:tJ,failed:nJ,failing:sJ,fails:rJ,failure:iJ,failures:oJ,fainthearted:aJ,fair:cJ,fairness:lJ,faith:uJ,faithful:dJ,fake:hJ,faker:fJ,fakes:mJ,faking:pJ,fallen:gJ,falling:yJ,false:-1,falsely:vJ,falsified:_J,falsify:wJ,fame:EJ,famine:TJ,famous:IJ,fan:xJ,fantastic:bJ,farce:kJ,fascinate:SJ,fascinated:AJ,fascinates:PJ,fascinating:NJ,fascination:CJ,fascist:RJ,fascists:DJ,fatal:jJ,fatalities:VJ,fatality:OJ,fatigue:MJ,fatigued:LJ,fatigues:FJ,fatiguing:zJ,favor:UJ,favorable:BJ,favorably:$J,favored:qJ,favorite:WJ,favorited:GJ,favorites:HJ,favors:KJ,favour:QJ,favourable:YJ,favourably:XJ,favoured:JJ,favourite:ZJ,favourited:eZ,favourites:tZ,favours:nZ,fear:sZ,fearful:rZ,fearfully:iZ,fearing:oZ,fearless:aZ,fearlessness:cZ,fearsome:lZ,"fed up":-3,feeble:uZ,feeling:dZ,felonies:hZ,felony:fZ,fertile:mZ,fervent:pZ,fervid:gZ,festive:yZ,fever:vZ,fiasco:_Z,fidgety:wZ,fight:EZ,fighting:TZ,fine:IZ,fines:xZ,finest:bZ,fire:kZ,fired:SZ,firing:AZ,fit:PZ,fitness:NZ,filth:CZ,filthy:RZ,flagship:DZ,flaw:jZ,flawed:VZ,flawless:OZ,flawlessly:MZ,flaws:LZ,flees:FZ,flop:zZ,flops:UZ,flu:BZ,flustered:$Z,focused:qZ,fond:WZ,fondness:GZ,fool:HZ,foolish:KZ,fools:QZ,forbid:YZ,forbidden:XZ,forbidding:JZ,forced:ZZ,foreclosure:eee,foreclosures:tee,forefront:nee,forget:see,forgetful:ree,forgettable:iee,forgive:oee,forgiving:aee,forgot:cee,forgotten:lee,fortune:uee,fortunate:dee,fortunately:hee,foul:fee,frantic:mee,fraud:pee,frauds:gee,fraudster:yee,fraudsters:vee,fraudulence:_ee,fraudulent:wee,freak:Eee,free:Tee,freedom:Iee,freedoms:xee,frenzy:bee,fresh:kee,friend:See,friendliness:Aee,friendly:Pee,friendship:Nee,fright:Cee,frightened:Ree,frightening:Dee,frikin:jee,frisky:Vee,frowning:Oee,fruitless:Mee,frustrate:Lee,frustrated:Fee,frustrates:zee,frustrating:Uee,frustration:Bee,ftw:$ee,fuck:qee,fucked:Wee,fucker:Gee,fuckers:Hee,fuckface:Kee,fuckhead:Qee,fuckin:Yee,fucking:Xee,"fucking amazing":4,"fucking beautiful":4,"fucking cute":4,"fucking fantastic":4,"fucking good":4,"fucking great":4,"fucking hot":2,"fucking love":4,"fucking loves":4,"fucking perfect":4,fucktard:Jee,fud:Zee,fuked:ete,fuking:tte,fulfill:nte,fulfilled:ste,fulfillment:rte,fulfills:ite,fuming:ote,fun:ate,funeral:cte,funerals:lte,funky:ute,funnier:dte,funny:hte,furious:fte,futile:mte,gag:pte,gagged:gte,gain:yte,gained:vte,gaining:_te,gains:wte,gallant:Ete,gallantly:Tte,gallantry:Ite,"game-changing":3,garbage:xte,gem:bte,generous:kte,generously:Ste,genial:Ate,ghastly:Pte,ghost:Nte,giddy:Cte,gift:Rte,glad:Dte,glamorous:jte,glamourous:Vte,glee:Ote,gleeful:Mte,gloom:Lte,gloomy:Fte,glorious:zte,glory:Ute,glum:Bte,god:$te,goddamn:qte,godsend:Wte,gold:Gte,good:Hte,goodlooking:Kte,goodmorning:Qte,goodness:Yte,goodwill:Xte,goofiness:Jte,goofy:Zte,grace:ene,graceful:tne,gracious:nne,grand:sne,grant:rne,granted:ine,granting:one,grants:ane,grateful:cne,gratification:lne,grave:une,gray:dne,grisly:hne,gr8:fne,great:mne,greater:pne,greatest:gne,greed:yne,greedy:vne,"green wash":-3,"green washing":-3,greenwash:_ne,greenwasher:wne,greenwashers:Ene,greenwashing:Tne,greet:Ine,greeted:xne,greeting:bne,greetings:kne,greets:Sne,grey:Ane,grief:Pne,grieved:Nne,grim:Cne,gripping:Rne,groan:Dne,groaned:jne,groaning:Vne,groans:One,gross:Mne,growing:Lne,growth:Fne,growths:zne,gruesome:Une,guarantee:Bne,guilt:$ne,guilty:qne,gullibility:Wne,gullible:Gne,gun:Hne,ha:Kne,hacked:Qne,haha:Yne,hahaha:Xne,hahahah:Jne,hail:Zne,hailed:ese,hallelujah:tse,handpicked:nse,handsome:sse,hapless:rse,haplessness:ise,happiest:ose,happiness:ase,happy:cse,harass:lse,harassed:use,harasses:dse,harassing:hse,harassment:fse,hard:mse,hardier:pse,hardship:gse,hardy:yse,harm:vse,harmed:_se,harmful:wse,harming:Ese,harmony:Tse,harmonious:Ise,harmoniously:xse,harms:bse,harried:kse,harsh:Sse,harsher:Ase,harshest:Pse,harshly:Nse,hate:Cse,hated:Rse,hater:Dse,haters:jse,hates:Vse,hating:Ose,hatred:Mse,haunt:Lse,haunted:Fse,haunting:zse,haunts:Use,havoc:Bse,hazardous:$se,headache:qse,healthy:Wse,heartbreaking:Gse,heartbroken:Hse,heartfelt:Kse,heartless:Qse,heartwarming:Yse,heaven:Xse,heavenly:Jse,heavyhearted:Zse,hehe:ere,hell:tre,hellish:nre,help:sre,helpful:rre,helping:ire,helpless:ore,helps:are,hero:cre,heroes:lre,heroic:ure,hesitant:dre,hesitate:hre,hid:fre,hide:mre,hideous:pre,hides:gre,hiding:yre,highlight:vre,hilarious:_re,hinder:wre,hindrance:Ere,hoax:Tre,hollow:Ire,homeless:xre,homesick:bre,homicide:kre,homicides:Sre,honest:Are,honor:Pre,honored:Nre,honoring:Cre,honour:Rre,honoured:Dre,honouring:jre,hooligan:Vre,hooliganism:Ore,hooligans:Mre,hope:Lre,hopeful:Fre,hopefully:zre,hopeless:Ure,hopelessness:Bre,hopes:$re,hoping:qre,horrendous:Wre,horrid:Gre,horrible:Hre,horrific:Kre,horrified:Qre,hospitalized:Yre,hostile:Xre,huckster:Jre,hug:Zre,huge:eie,hugs:tie,humane:nie,humble:sie,humbug:rie,humerous:iie,humiliated:oie,humiliation:aie,humor:cie,humorous:lie,humour:uie,humourous:die,hunger:hie,hurrah:fie,hurt:mie,hurting:pie,hurts:gie,hypocritical:yie,hysteria:vie,hysterical:_ie,hysterics:wie,icky:Eie,idiocy:Tie,idiot:Iie,idiotic:xie,ignorance:bie,ignorant:kie,ignore:Sie,ignored:Aie,ignores:Pie,ill:Nie,"ill-fated":-2,illegal:Cie,illegally:Rie,illegitimate:Die,illiteracy:jie,illness:Vie,illnesses:Oie,illogical:Mie,imaginative:Lie,imbecile:Fie,immobilized:zie,immortal:Uie,immune:Bie,impair:$ie,impaired:qie,impairing:Wie,impairment:Gie,impairs:Hie,impatient:Kie,impeachment:Qie,impeachments:Yie,impede:Xie,impeded:Jie,impedes:Zie,impeding:eoe,impedingly:toe,imperfect:noe,importance:soe,important:roe,impose:ioe,imposed:ooe,imposes:aoe,imposing:coe,imposter:loe,impotent:uoe,impress:doe,impressed:hoe,impresses:foe,impressive:moe,imprisoned:poe,imprisonment:goe,improper:yoe,improperly:voe,improve:_oe,improved:woe,improvement:Eoe,improves:Toe,improving:Ioe,inability:xoe,inaction:boe,inadequate:koe,inadvertently:Soe,inappropriate:Aoe,incapable:Poe,incapacitated:Noe,incapacitates:Coe,incapacitating:Roe,incense:Doe,incensed:joe,incenses:Voe,incensing:Ooe,incoherent:Moe,incompetence:Loe,incompetent:Foe,incomplete:zoe,incomprehensible:Uoe,inconsiderate:Boe,inconvenience:$oe,inconvenient:qoe,increase:Woe,increased:Goe,indecisive:Hoe,indestructible:Koe,indicted:Qoe,indifference:Yoe,indifferent:Xoe,indignant:Joe,indignation:Zoe,indoctrinate:eae,indoctrinated:tae,indoctrinates:nae,indoctrinating:sae,inediable:rae,inexorable:iae,inexcusable:oae,ineffective:aae,ineffectively:cae,ineffectual:lae,inefficiency:uae,inefficient:dae,inefficiently:hae,inept:fae,ineptitude:mae,infantile:pae,infantilized:gae,infatuated:yae,infatuation:vae,infect:_ae,infected:wae,infecting:Eae,infection:Tae,infections:Iae,infectious:xae,infects:bae,inferior:kae,infest:Sae,infested:Aae,infesting:Pae,infests:Nae,inflamed:Cae,inflict:Rae,inflicted:Dae,inflicting:jae,inflicts:Vae,influential:Oae,infract:Mae,infracted:Lae,infracting:Fae,infracts:zae,infringement:Uae,infuriate:Bae,infuriated:$ae,infuriates:qae,infuriating:Wae,inhibit:Gae,inhuman:Hae,injured:Kae,injuries:Qae,injury:Yae,injustice:Xae,innovate:Jae,innovates:Zae,innovation:ece,innovative:tce,inoperative:nce,inquisition:sce,inquisitive:rce,insane:ice,insanity:oce,insecure:ace,insensitive:cce,insensitivity:lce,insignificant:uce,insipid:dce,insolvent:hce,insomnia:fce,inspiration:mce,inspirational:pce,inspire:gce,inspired:yce,inspires:vce,inspiring:_ce,insufficiency:wce,insufficient:Ece,insufficiently:Tce,insult:Ice,insulted:xce,insulting:bce,insults:kce,intact:Sce,integrity:Ace,intelligent:Pce,intense:Nce,interest:Cce,interested:Rce,interesting:Dce,interests:jce,interrogated:Vce,interrupt:Oce,interrupted:Mce,interrupting:Lce,interruption:Fce,interrupts:zce,intimacy:Uce,intimidate:Bce,intimidated:$ce,intimidates:qce,intimidating:Wce,intimidation:Gce,intransigence:Hce,intransigency:Kce,intricate:Qce,intrigues:Yce,invasion:Xce,invincible:Jce,invite:Zce,inviting:ele,invulnerable:tle,irate:nle,ironic:sle,irony:rle,irrational:ile,irreparable:ole,irreproducible:ale,irresistible:cle,irresistibly:lle,irresolute:ule,irresponsible:dle,irresponsibly:hle,irreversible:fle,irreversibly:mle,irritate:ple,irritated:gle,irritates:yle,irritating:vle,isolated:_le,itchy:wle,jackass:Ele,jackasses:Tle,jailed:Ile,jaunty:xle,jealous:ble,jealousy:kle,jeopardy:Sle,jerk:Ale,jesus:Ple,jewel:Nle,jewels:Cle,jocular:Rle,join:Dle,joke:jle,jokes:Vle,jolly:Ole,jovial:Mle,joy:Lle,joyful:Fle,joyfully:zle,joyless:Ule,joyous:Ble,jubilant:$le,jumpy:qle,justice:Wle,justifiably:Gle,justified:Hle,keen:Kle,kickback:Qle,kickbacks:Yle,kidnap:Xle,kidnapped:Jle,kidnapping:Zle,kidnappings:eue,kidnaps:tue,kill:nue,killed:sue,killing:rue,kills:iue,kind:oue,"kind of":0,kinder:aue,kindness:cue,kiss:lue,kudos:uue,lack:due,lackadaisical:hue,lag:fue,lagged:mue,lagging:pue,lags:gue,lame:yue,landmark:vue,lapse:_ue,lapsed:wue,laugh:Eue,laughed:Tue,laughing:Iue,laughs:xue,laughting:bue,launched:kue,lawl:Sue,lawsuit:Aue,lawsuits:Pue,lazy:Nue,leadership:Cue,leading:Rue,leak:Due,leaked:jue,leave:Vue,legal:Oue,legally:Mue,lenient:Lue,lethal:Fue,lethality:zue,lethargic:Uue,lethargy:Bue,liar:$ue,liars:que,libelous:Wue,lied:Gue,lifeless:Hue,lifesaver:Kue,lighthearted:Que,likable:Yue,like:Xue,likeable:Jue,liked:Zue,likers:ede,likes:tde,liking:nde,limitation:sde,limited:rde,limits:ide,litigation:ode,litigious:ade,lively:cde,livid:lde,lmao:ude,lmfao:dde,loathe:hde,loathed:fde,loathes:mde,loathing:pde,loathsome:gde,lobbied:yde,lobby:vde,lobbying:_de,lobbyist:wde,lobbyists:Ede,lol:Tde,lolol:Ide,lololol:xde,lolololol:bde,lonely:kde,lonesome:Sde,longing:Ade,lool:Pde,loom:Nde,loomed:Cde,looming:Rde,looms:Dde,loool:jde,looool:Vde,loose:Ode,looses:Mde,loser:Lde,losing:Fde,loss:zde,losses:Ude,lost:Bde,lousy:$de,lovable:qde,love:Wde,loved:Gde,lovelies:Hde,lovely:Kde,loves:Qde,loving:Yde,"loving-kindness":3,lowest:Xde,loyal:Jde,loyalty:Zde,luck:ehe,luckily:the,lucky:nhe,lucrative:she,ludicrous:rhe,lugubrious:ihe,lunatic:ohe,lunatics:ahe,lurk:che,lurking:lhe,lurks:uhe,luxury:dhe,macabre:hhe,mad:fhe,maddening:mhe,"made-up":-1,madly:phe,madness:ghe,magnificent:yhe,maladaption:vhe,maldevelopment:_he,maltreatment:whe,mandatory:Ehe,manipulated:The,manipulating:Ihe,manipulation:xhe,manslaughter:bhe,marvel:khe,marvelous:She,marvels:Ahe,masterpiece:Phe,masterpieces:Nhe,matter:Che,matters:Rhe,mature:Dhe,meaningful:jhe,meaningless:Vhe,medal:Ohe,mediocrity:Mhe,meditative:Lhe,melancholy:Fhe,memorable:zhe,memoriam:Uhe,menace:Bhe,menaced:$he,menaces:qhe,mercy:Whe,merry:Ghe,mesmerizing:Hhe,mess:Khe,messed:Qhe,"messing up":-2,methodical:Yhe,methodically:Xhe,mindless:Jhe,miracle:Zhe,mirth:efe,mirthful:tfe,mirthfully:nfe,misbehave:sfe,misbehaved:rfe,misbehaves:ife,misbehaving:ofe,misbranding:afe,miscast:cfe,mischief:lfe,mischiefs:ufe,misclassified:dfe,misclassifies:hfe,misclassify:ffe,misconduct:mfe,misconducted:pfe,misconducting:gfe,misconducts:yfe,miserable:vfe,miserably:_fe,misery:wfe,misfire:Efe,misfortune:Tfe,misgiving:Ife,misinformation:xfe,misinformed:bfe,misinterpreted:kfe,mislead:Sfe,misleaded:Afe,misleading:Pfe,misleads:Nfe,misplace:Cfe,misplaced:Rfe,misplaces:Dfe,misplacing:jfe,mispricing:Vfe,misread:Ofe,misreport:Mfe,misreported:Lfe,misreporting:Ffe,misreports:zfe,misrepresent:Ufe,misrepresentation:Bfe,misrepresentations:$fe,misrepresented:qfe,misrepresenting:Wfe,misrepresents:Gfe,miss:Hfe,missed:Kfe,missing:Qfe,mistake:Yfe,mistaken:Xfe,mistakes:Jfe,mistaking:Zfe,misunderstand:eme,misunderstanding:tme,misunderstands:nme,misunderstood:sme,misuse:rme,misused:ime,misuses:ome,misusing:ame,moan:cme,moaned:lme,moaning:ume,moans:dme,mock:hme,mocked:fme,mocking:mme,mocks:pme,modernize:gme,modernized:yme,modernizes:vme,modernizing:_me,mongering:wme,monopolize:Eme,monopolized:Tme,monopolizes:Ime,monopolizing:xme,monotone:bme,moody:kme,mope:Sme,moping:Ame,moron:Pme,motherfucker:Nme,motherfucking:Cme,motivate:Rme,motivated:Dme,motivating:jme,motivation:Vme,mourn:Ome,mourned:Mme,mournful:Lme,mourning:Fme,mourns:zme,muddy:Ume,mumpish:Bme,murder:$me,murderer:qme,murdering:Wme,murderous:Gme,murders:Hme,murky:Kme,myth:Qme,n00b:Yme,naive:Xme,narcissism:Jme,nasty:Zme,natural:epe,nave:-2,needy:tpe,negative:npe,negativity:spe,neglect:rpe,neglected:ipe,neglecting:ope,neglects:ape,nerves:cpe,nervous:lpe,nervously:upe,nice:dpe,nifty:hpe,niggas:fpe,nigger:mpe,no:ppe,"no fun":-3,noble:gpe,noblest:ype,noisy:vpe,"non-approved":-2,nonsense:_pe,noob:wpe,nosey:Epe,"not good":-2,"not working":-3,notable:Tpe,noticeable:Ipe,notorious:xpe,novel:bpe,numb:kpe,nurturing:Spe,nuts:Ape,obliterate:Ppe,obliterated:Npe,obnoxious:Cpe,obscene:Rpe,obscenity:Dpe,obsessed:jpe,obsolete:Vpe,obstacle:Ope,obstacles:Mpe,obstinate:Lpe,obstruct:Fpe,obstructed:zpe,obstructing:Upe,obstruction:Bpe,obstructs:$pe,odd:qpe,offence:Wpe,offences:Gpe,offend:Hpe,offended:Kpe,offender:Qpe,offending:Ype,offends:Xpe,offense:Jpe,offenses:Zpe,offensive:ege,offensively:tge,offline:nge,oks:sge,ominous:rge,"once-in-a-lifetime":3,oops:ige,opportunities:oge,opportunity:age,oppressed:cge,oppression:lge,oppressions:uge,oppressive:dge,optimism:hge,optimistic:fge,optionless:mge,ostracize:pge,ostracized:gge,ostracizes:yge,ouch:vge,outage:_ge,outages:wge,outbreak:Ege,outbreaks:Tge,outcry:Ige,outmaneuvered:xge,outnumbered:bge,outrage:kge,outraged:Sge,outrageous:Age,outreach:Pge,outstanding:Nge,overjoyed:Cge,overload:Rge,overlooked:Dge,overprotective:jge,overran:Vge,overreact:Oge,overreacted:Mge,overreacting:Lge,overreaction:Fge,overreacts:zge,oversell:Uge,overselling:Bge,oversells:$ge,oversight:qge,oversimplification:Wge,oversimplified:Gge,oversimplifies:Hge,oversimplify:Kge,oversold:Qge,overstatement:Yge,overstatements:Xge,overweight:Jge,overwrought:Zge,oxymoron:eye,pain:tye,pained:nye,painful:sye,panic:rye,panicked:iye,panics:oye,paradise:aye,paradox:cye,pardon:lye,pardoned:uye,pardoning:dye,pardons:hye,parley:fye,passion:mye,passionate:pye,passive:gye,passively:yye,pathetic:vye,pay:_ye,peace:wye,peaceful:Eye,peacefully:Tye,penalize:Iye,penalized:xye,penalizes:bye,penalizing:kye,penalty:Sye,pensive:Aye,perfect:Pye,perfected:Nye,perfection:Cye,perfectly:Rye,perfects:Dye,peril:jye,perjury:Vye,perpetrated:Oye,perpetrator:Mye,perpetrators:Lye,perplexed:Fye,persecute:zye,persecuted:Uye,persecutes:Bye,persecuting:$ye,perturbed:qye,pervert:Wye,pesky:Gye,pessimism:Hye,pessimistic:Kye,petrified:Qye,philanthropy:Yye,phobic:Xye,picturesque:Jye,pileup:Zye,pillage:eve,pique:tve,piqued:nve,piss:sve,pissed:rve,pissing:ive,piteous:ove,pitied:ave,pity:cve,plague:lve,plagued:uve,plagues:dve,plaguing:hve,playful:fve,pleasant:mve,please:pve,pleased:gve,pleasurable:yve,pleasure:vve,plodding:_ve,poignant:wve,pointless:Eve,poised:Tve,poison:Ive,poisoned:xve,poisons:bve,polished:kve,polite:Sve,politeness:Ave,pollutant:Pve,pollute:Nve,polluted:Cve,polluter:Rve,polluters:Dve,pollutes:jve,pollution:Vve,poor:Ove,poorer:Mve,poorest:Lve,poorly:Fve,popular:zve,popularity:Uve,positive:Bve,positively:$ve,possessive:qve,"post-traumatic":-2,postpone:Wve,postponed:Gve,postpones:Hve,postponing:Kve,poverty:Qve,powerful:Yve,powerless:Xve,praise:Jve,praised:Zve,praises:e_e,praising:t_e,pray:n_e,praying:s_e,prays:r_e,prblm:i_e,prblms:o_e,predatory:a_e,prepared:c_e,pressure:l_e,pressured:u_e,pretend:d_e,pretending:h_e,pretends:f_e,pretty:m_e,prevent:p_e,prevented:g_e,preventing:y_e,prevents:v_e,prick:__e,prison:w_e,prisoner:E_e,prisoners:T_e,privileged:I_e,proactive:x_e,problem:b_e,problems:k_e,profit:S_e,profitable:A_e,profiteer:P_e,profits:N_e,progress:C_e,prohibit:R_e,prohibits:D_e,prominent:j_e,promise:V_e,promised:O_e,promises:M_e,promote:L_e,promoted:F_e,promotes:z_e,promoting:U_e,promptly:B_e,propaganda:$_e,prosecute:q_e,prosecuted:W_e,prosecutes:G_e,prosecution:H_e,prospect:K_e,prospects:Q_e,prosperity:Y_e,prosperous:X_e,protect:J_e,protected:1,protects:Z_e,protest:ewe,protesters:twe,protesting:nwe,protests:swe,proud:rwe,proudly:iwe,provoke:owe,provoked:awe,provokes:cwe,provoking:lwe,prudence:uwe,pseudoscience:dwe,psychopathic:hwe,punish:fwe,punished:mwe,punishes:pwe,punishing:gwe,punitive:ywe,pure:vwe,purest:_we,purposeful:wwe,pushy:Ewe,puzzled:Twe,quaking:Iwe,qualities:xwe,quality:bwe,questionable:kwe,questioned:Swe,questioning:Awe,racism:Pwe,racist:Nwe,racists:Cwe,rage:Rwe,rageful:Dwe,rainy:jwe,rant:Vwe,ranter:Owe,ranters:Mwe,rants:Lwe,rape:Fwe,raped:zwe,rapist:Uwe,rapture:Bwe,raptured:$we,raptures:qwe,rapturous:Wwe,rash:Gwe,ratified:Hwe,reach:Kwe,reached:Qwe,reaches:Ywe,reaching:Xwe,reassure:Jwe,reassured:Zwe,reassures:e2e,reassuring:t2e,rebel:n2e,rebellion:s2e,rebels:r2e,recession:i2e,reckless:o2e,recognition:a2e,recommend:c2e,recommended:l2e,recommends:u2e,redeemed:d2e,refine:h2e,refined:f2e,refines:m2e,refreshingly:p2e,refuse:g2e,refused:y2e,refuses:v2e,refusing:_2e,regret:w2e,regretful:E2e,regrets:T2e,regretted:I2e,regretting:x2e,reigning:b2e,reject:k2e,rejected:S2e,rejecting:A2e,rejection:P2e,rejects:N2e,rejoice:C2e,rejoiced:R2e,rejoices:D2e,rejoicing:j2e,relaxed:V2e,relentless:O2e,reliability:M2e,reliable:L2e,reliably:F2e,reliant:z2e,relieve:U2e,relieved:B2e,relieves:$2e,relieving:q2e,relishing:W2e,remarkable:G2e,remorse:H2e,repellent:K2e,repercussion:Q2e,repercussions:Y2e,reprimand:X2e,reprimanded:J2e,reprimanding:Z2e,reprimands:e0e,repulse:t0e,repulsed:n0e,repulsive:s0e,rescue:r0e,rescued:i0e,rescues:o0e,resentful:a0e,resign:c0e,resigned:l0e,resigning:u0e,resigns:d0e,resolute:h0e,resolution:f0e,resolve:m0e,resolved:p0e,resolves:g0e,resolving:y0e,respect:v0e,respected:_0e,respects:w0e,responsibility:E0e,responsible:T0e,responsive:I0e,restful:x0e,restless:b0e,restore:k0e,restored:S0e,restores:A0e,restoring:P0e,restrict:N0e,restricted:C0e,restricting:R0e,restriction:D0e,restrictive:j0e,restricts:V0e,retained:O0e,retard:M0e,retarded:L0e,retreat:F0e,revenge:z0e,revengeful:U0e,revered:B0e,revive:$0e,revives:q0e,revolting:W0e,reward:G0e,rewarded:H0e,rewarding:K0e,rewards:Q0e,rich:Y0e,richly:X0e,ridiculous:J0e,rig:Z0e,rigged:e1e,"right direction":3,righteousness:t1e,rightful:n1e,rightfully:s1e,rigorous:r1e,rigorously:i1e,riot:o1e,riots:a1e,rise:c1e,rises:l1e,risk:u1e,risks:d1e,risky:h1e,riveting:f1e,rob:m1e,robber:p1e,robed:g1e,robing:y1e,robs:v1e,robust:_1e,rofl:w1e,roflcopter:E1e,roflmao:T1e,romance:I1e,romantical:x1e,romantically:b1e,rose:k1e,rotfl:S1e,rotflmfao:A1e,rotflol:P1e,rotten:N1e,rude:C1e,ruin:R1e,ruined:D1e,ruining:j1e,ruins:V1e,sabotage:O1e,sad:M1e,sadden:L1e,saddened:F1e,sadly:z1e,safe:U1e,safely:B1e,safer:$1e,safety:q1e,salient:W1e,salute:G1e,saluted:H1e,salutes:K1e,saluting:Q1e,salvation:Y1e,sappy:X1e,sarcastic:J1e,satisfied:Z1e,savange:eEe,savanges:tEe,save:nEe,saved:sEe,savings:rEe,scam:iEe,scams:oEe,scandal:aEe,scandalous:cEe,scandals:lEe,scapegoat:uEe,scapegoats:dEe,scare:hEe,scared:fEe,scar:mEe,scars:pEe,scary:gEe,sceptical:yEe,scold:vEe,scoop:_Ee,scorn:wEe,scornful:EEe,scream:TEe,screamed:IEe,screaming:xEe,screams:bEe,screwed:kEe,"screwed up":-3,scum:SEe,scumbag:AEe,seamless:PEe,seamlessly:NEe,secure:CEe,secured:REe,secures:DEe,sedition:jEe,seditious:VEe,seduced:OEe,"self-abuse":-2,"self-confident":2,"self-contradictory":-2,"self-deluded":-2,selfish:MEe,selfishness:LEe,sentence:FEe,sentenced:zEe,sentences:UEe,sentencing:BEe,serene:$Ee,settlement:qEe,settlements:WEe,severe:GEe,severely:HEe,sexist:KEe,sexistic:QEe,sexy:YEe,shaky:XEe,shame:JEe,shamed:ZEe,shameful:eTe,share:tTe,shared:nTe,shares:sTe,shattered:rTe,shit:iTe,shithead:oTe,shitty:aTe,shock:cTe,shocked:lTe,shocking:uTe,shocks:dTe,shoody:hTe,shoot:fTe,"short-sighted":-2,"short-sightedness":-2,shortage:mTe,shortages:pTe,shrew:gTe,shy:yTe,sick:vTe,sickness:_Te,"side-effect":-2,"side-effects":-2,sigh:wTe,significance:ETe,significant:TTe,silencing:ITe,silly:xTe,simplicity:bTe,sin:kTe,sincere:STe,sincerely:ATe,sincerest:PTe,sincerity:NTe,sinful:CTe,singleminded:RTe,sinister:DTe,sins:jTe,skeptic:VTe,skeptical:OTe,skepticism:MTe,skeptics:LTe,slam:FTe,slash:zTe,slashed:UTe,slashes:BTe,slashing:$Te,slave:qTe,slavery:WTe,slaves:GTe,sleeplessness:HTe,slick:KTe,slicker:QTe,slickest:YTe,slip:XTe,sloppy:JTe,sluggish:ZTe,slumping:eIe,slut:tIe,smart:nIe,smarter:sIe,smartest:rIe,smear:iIe,smile:oIe,smiled:aIe,smiles:cIe,smiling:lIe,smog:uIe,smuggle:dIe,smuggled:hIe,smuggling:fIe,smuggles:mIe,sneaky:pIe,sneeze:gIe,sneezed:yIe,sneezes:vIe,sneezing:_Ie,snub:wIe,snubbed:EIe,snubbing:TIe,snubs:IIe,sobering:xIe,solemn:bIe,solid:kIe,solidarity:SIe,solidified:AIe,solidifies:PIe,solidify:NIe,solidifying:CIe,solution:RIe,solutions:DIe,solve:jIe,solved:VIe,solves:OIe,solving:MIe,somber:LIe,"some kind":0,"son-of-a-bitch":-5,soothe:FIe,soothed:zIe,soothing:UIe,sophisticated:BIe,sore:$Ie,sorrow:qIe,sorrowful:WIe,sorry:GIe,spacious:HIe,spam:KIe,spammer:QIe,spammers:YIe,spamming:XIe,spark:JIe,sparkle:ZIe,sparkles:exe,sparkling:txe,spearhead:nxe,speculative:sxe,spirit:rxe,spirited:ixe,spiritless:oxe,spiteful:axe,splendid:cxe,spoiled:lxe,spoilt:uxe,spotless:dxe,sprightly:hxe,squander:fxe,squandered:mxe,squandering:pxe,squanders:gxe,squelched:yxe,stab:vxe,stabbed:_xe,stable:wxe,stabs:Exe,stall:Txe,stalled:Ixe,stalling:xxe,stamina:bxe,stampede:kxe,stank:Sxe,startled:Axe,startling:Pxe,starve:Nxe,starved:Cxe,starves:Rxe,starving:Dxe,steadfast:jxe,steal:Vxe,stealing:Oxe,steals:Mxe,stereotype:Lxe,stereotyped:Fxe,stifled:zxe,stimulate:Uxe,stimulated:Bxe,stimulates:$xe,stimulating:qxe,stingy:Wxe,stink:Gxe,stinked:Hxe,stinker:Kxe,stinking:Qxe,stinks:Yxe,stinky:Xxe,stole:Jxe,stolen:Zxe,stop:ebe,stopped:tbe,stopping:nbe,stops:sbe,stout:rbe,straight:ibe,strange:obe,strangely:abe,strangled:cbe,strength:lbe,strengthen:ube,strengthened:dbe,strengthening:hbe,strengthens:fbe,strengths:mbe,stress:pbe,stressed:gbe,stressor:ybe,stressors:vbe,stricken:_be,strike:wbe,strikers:Ebe,strikes:Tbe,strong:Ibe,stronger:xbe,strongest:bbe,struck:kbe,struggle:Sbe,struggled:Abe,struggles:Pbe,struggling:Nbe,stubborn:Cbe,stuck:Rbe,stunned:Dbe,stunning:jbe,stupid:Vbe,stupidity:Obe,stupidly:Mbe,suave:Lbe,subpoena:Fbe,substantial:zbe,substantially:Ube,subversive:Bbe,succeed:$be,succeeded:qbe,succeeding:Wbe,succeeds:Gbe,success:Hbe,successful:Kbe,successfully:Qbe,suck:Ybe,sucks:Xbe,sue:Jbe,sued:Zbe,sueing:eke,sues:tke,suffer:nke,suffered:ske,sufferer:rke,sufferers:ike,suffering:oke,suffers:ake,suicidal:cke,suicide:lke,suicides:uke,suing:dke,suitable:hke,suited:fke,sulking:mke,sulky:pke,sullen:gke,sunshine:yke,super:3,superb:vke,superior:_ke,support:wke,supported:Eke,supporter:Tke,supporters:Ike,supporting:xke,supportive:bke,supports:kke,supreme:Ske,survived:Ake,surviving:Pke,survivor:Nke,suspect:Cke,suspected:Rke,suspecting:Dke,suspects:jke,suspend:Vke,suspended:Oke,suspicious:Mke,sustainability:Lke,sustainable:Fke,sustainably:zke,swear:Uke,swearing:Bke,swears:$ke,sweet:qke,sweeter:Wke,sweetest:Gke,swift:Hke,swiftly:Kke,swindle:Qke,swindles:Yke,swindling:Xke,sympathetic:Jke,sympathy:Zke,taint:eSe,tainted:tSe,talent:nSe,tard:sSe,tarnish:rSe,tarnished:iSe,tarnishes:oSe,tears:aSe,tender:cSe,tenderness:lSe,tense:uSe,tension:dSe,terrible:hSe,terribly:fSe,terrific:mSe,terrifically:pSe,terrified:gSe,terror:ySe,terrorist:vSe,terrorists:_Se,terrorize:wSe,terrorized:ESe,terrorizes:TSe,thank:ISe,thankful:xSe,thanks:bSe,thorny:kSe,thoughtful:SSe,thoughtless:ASe,threat:PSe,threaten:NSe,threatened:CSe,threatening:RSe,threatens:DSe,threats:jSe,thrilled:VSe,thwart:OSe,thwarted:MSe,thwarting:LSe,thwarts:FSe,timid:zSe,timorous:USe,tired:BSe,tits:$Se,tolerance:qSe,tolerant:WSe,toothless:GSe,top:HSe,tops:KSe,torn:QSe,torture:YSe,tortured:XSe,tortures:JSe,torturing:ZSe,totalitarian:eAe,totalitarianism:tAe,tout:nAe,touted:sAe,touting:rAe,touts:iAe,toxic:oAe,tragedies:aAe,tragedy:cAe,tragic:lAe,tranquil:uAe,transgress:dAe,transgressed:hAe,transgresses:fAe,transgressing:mAe,trap:pAe,trapped:gAe,traps:yAe,trauma:vAe,traumatic:_Ae,travesty:wAe,treason:EAe,treasonous:TAe,treasure:IAe,treasures:xAe,trembling:bAe,tremor:kAe,tremors:SAe,tremulous:AAe,tribulation:PAe,tribute:NAe,tricked:CAe,trickery:RAe,triumph:DAe,triumphant:jAe,troll:VAe,trouble:OAe,troubled:MAe,troubles:LAe,troubling:FAe,true:2,trust:zAe,trusted:UAe,trusts:BAe,tumor:$Ae,twat:qAe,tyran:WAe,tyrannic:GAe,tyrannical:HAe,tyrannically:KAe,tyrans:QAe,ubiquitous:YAe,ugh:XAe,ugliness:JAe,ugly:ZAe,unable:ePe,unacceptable:tPe,unappeasable:nPe,unappreciated:sPe,unapproved:rPe,unattractive:iPe,unavailable:oPe,unavailing:aPe,unaware:cPe,unbearable:lPe,unbelievable:uPe,unbelieving:dPe,unbiased:hPe,uncertain:fPe,unclear:mPe,uncomfortable:pPe,unconcerned:gPe,unconfirmed:yPe,unconvinced:vPe,uncredited:_Pe,undecided:wPe,undercooked:EPe,underestimate:TPe,underestimated:IPe,underestimates:xPe,underestimating:bPe,undermine:kPe,undermined:SPe,undermines:APe,undermining:PPe,underperform:NPe,underperformed:CPe,underperforming:RPe,underperforms:DPe,undeserving:jPe,undesirable:VPe,uneasy:OPe,unemployed:MPe,unemployment:LPe,unequal:FPe,unequaled:zPe,unethical:UPe,uneventful:BPe,unfair:$Pe,unfavorable:qPe,unfit:WPe,unfitted:GPe,unfocused:HPe,unforgivable:KPe,unforgiving:QPe,unfulfilled:YPe,unfunny:XPe,ungenerous:JPe,ungrateful:ZPe,unhappy:eNe,unhappiness:tNe,unhealthy:nNe,unhygienic:sNe,unified:rNe,unimaginative:iNe,unimpressed:oNe,uninspired:aNe,unintelligent:cNe,unintentional:lNe,uninvolving:uNe,united:dNe,unjust:hNe,unlikely:fNe,unlovable:mNe,unloved:pNe,unmatched:gNe,unmotivated:yNe,unoriginal:vNe,unparliamentary:_Ne,unpleasant:wNe,unpleasantness:ENe,unprofessional:TNe,unravel:INe,unreleting:xNe,unresearched:bNe,unsafe:kNe,unsatisfied:SNe,unscientific:ANe,unsecured:PNe,unselfish:NNe,unsettled:CNe,unsold:RNe,unsophisticated:DNe,unsound:jNe,unstable:VNe,unstoppable:ONe,unsuccessful:MNe,unsuccessfully:LNe,unsupported:FNe,unsure:zNe,untarnished:UNe,untrue:BNe,unwanted:$Ne,unworthy:qNe,uplifting:WNe,uproar:GNe,upset:HNe,upsets:KNe,upsetting:QNe,uptight:YNe,urgent:XNe,useful:JNe,usefulness:ZNe,useless:eCe,uselessness:tCe,vague:nCe,validate:sCe,validated:rCe,validates:iCe,validating:oCe,vapid:aCe,verdict:cCe,verdicts:lCe,vested:uCe,vexation:dCe,vexing:hCe,vibrant:fCe,vicious:mCe,victim:pCe,victimization:gCe,victimize:yCe,victimized:vCe,victimizes:_Ce,victimizing:wCe,victims:ECe,victor:TCe,victors:ICe,victory:xCe,victories:bCe,vigilant:kCe,vigor:SCe,vile:ACe,vindicate:PCe,vindicated:NCe,vindicates:CCe,vindicating:RCe,violate:DCe,violated:jCe,violates:VCe,violating:OCe,violation:MCe,violations:LCe,violence:FCe,"violence-related":-3,violent:zCe,violently:UCe,virtuous:BCe,virulent:$Ce,vision:qCe,visionary:WCe,visioning:GCe,visions:HCe,vitality:KCe,vitamin:QCe,vitriolic:YCe,vivacious:XCe,vividly:JCe,vociferous:ZCe,vomit:eRe,vomited:tRe,vomiting:nRe,vomits:sRe,vulnerability:rRe,vulnerable:iRe,walkout:oRe,walkouts:aRe,wanker:cRe,want:lRe,war:uRe,warfare:dRe,warm:hRe,warmhearted:fRe,warmness:mRe,warmth:pRe,warn:gRe,warned:yRe,warning:vRe,warnings:_Re,warns:wRe,waste:ERe,wasted:TRe,wasting:IRe,wavering:xRe,weak:bRe,weakened:kRe,weakness:SRe,weaknesses:ARe,wealth:PRe,wealthier:NRe,wealthy:CRe,weary:RRe,weep:DRe,weeping:jRe,weird:VRe,welcome:ORe,welcomed:MRe,welcomes:LRe,"well-being":2,"well-championed":3,"well-developed":2,"well-established":2,"well-focused":2,"well-groomed":2,"well-proportioned":2,whimsical:FRe,whitewash:zRe,whore:URe,wicked:BRe,widowed:$Re,willingness:qRe,win:WRe,winner:GRe,winning:HRe,wins:KRe,winwin:QRe,wisdom:YRe,wish:XRe,wishes:JRe,wishing:ZRe,withdrawal:eDe,wits:tDe,woebegone:nDe,woeful:sDe,won:rDe,wonderful:iDe,wonderfully:oDe,woo:aDe,woohoo:cDe,wooo:lDe,woow:uDe,worn:dDe,worried:hDe,worries:fDe,worry:mDe,worrying:pDe,worse:gDe,worsen:yDe,worsened:vDe,worsening:_De,worsens:wDe,worshiped:EDe,worst:TDe,worth:IDe,worthless:xDe,worthy:bDe,wow:kDe,wowow:SDe,wowww:ADe,wrathful:PDe,wreck:NDe,wrenching:CDe,wrong:RDe,wrongdoing:DDe,wrongdoings:jDe,wronged:VDe,wrongful:ODe,wrongfully:MDe,wrongly:LDe,wtf:FDe,wtff:zDe,wtfff:UDe,xo:BDe,xoxo:$De,xoxoxo:qDe,xoxoxoxo:WDe,yeah:GDe,yearning:HDe,yeees:KDe,yes:QDe,youthful:YDe,yucky:XDe,yummy:JDe,zealot:ZDe,zealots:e3e,zealous:t3e},s3e=1,r3e=1,i3e=1,o3e=1,a3e=1,c3e=1,l3e=1,u3e={cant:s3e,"can't":1,dont:r3e,"don't":1,doesnt:i3e,"doesn't":1,not:o3e,non:a3e,wont:c3e,"won't":1,isnt:l3e,"isn't":1};var d3e=u3e,h3e={apply:function(t,e,n){if(e>0){var s=t[e-1];d3e[s]&&(n=-n)}return n}},f3e={labels:n3e,scoringStrategy:h3e},kx=CV,Sx=f3e;Object.assign(Sx.labels,kx);var au={en:Sx},m3e={addLanguage:function(t,e){if(!e.labels)throw new Error("language.labels must be defined!");Object.assign(e.labels,kx),au[t]=e},getLanguage:function(t){if(!t)return au.en;if(!au[t])try{var e=NV("../languages/"+t+"/index");this.addLanguage(t,e)}catch{throw new Error("No language found: "+t)}return au[t]},getLabels:function(t){var e=this.getLanguage(t);return e.labels},applyScoringStrategy:function(t,e,n,s){var r=this.getLanguage(t),i=r.scoringStrategy||p3e;return i.apply(e,n,s)}},p3e={apply:function(t,e,n){return n}},g3e=PV,wp=m3e,Iy=function(t){this.options=t};Iy.prototype.registerLanguage=function(t,e){wp.addLanguage(t,e)};Iy.prototype.analyze=function(t,e,n){typeof t>"u"&&(t=""),typeof e=="function"&&(n=e,e={}),e=e||{};var s=e.language||"en",r=wp.getLabels(s);typeof e.extras=="object"&&(r=Object.assign(r,e.extras));for(var i=g3e(t),o=0,a=[],c=[],d=[],f=[],m=i.length;m--;){var g=i[m];if(r.hasOwnProperty(g)){a.push(g);var T=r[g];T=wp.applyScoringStrategy(s,i,m,T),T>0&&c.push(g),T<0&&d.push(g),o+=T;var k={};k[g]=T,f.push(k)}}var A={score:o,comparative:i.length>0?o/i.length:0,calculation:f,tokens:i,words:a,positive:c,negative:d};if(typeof n=="function")process.nextTick(function(){n(null,A)});else return A};var y3e=Iy;const v3e=P2(y3e),_3e=new v3e;function Ld(t){return!t||t.trim()===""?null:_3e.analyze(t)}function xy(t){if(!t||t.trim()==="")return[];const e=t.toLowerCase().replace(/[^a-z0-9\s]/g,"").split(/\s+/).filter(s=>s.length>3);return[...new Set(e)].sort((s,r)=>r.length-s.length).slice(0,3)}function w3e(){const{user:t}=bn(),[e,n]=P.useState([]),[s,r]=P.useState({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),[i,o]=P.useState(!1),[a,c]=P.useState(null),[d,f]=P.useState(!0),[m,g]=P.useState(!1),[T,k]=P.useState(""),[A,C]=P.useState(null),[x,v]=P.useState([]),b=new Date().toISOString().split("T")[0];P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const N=await hs.fetchWorkoutsByUser(t.uid);n(N.workouts||[])}catch(N){console.error("Error fetching workouts:",N),k("Failed to load workouts")}finally{f(!1)}})()},[t]);const R=w=>{const{name:N,value:D}=w.target;r(S=>({...S,[N]:D}))},L=async w=>{if(w.preventDefault(),console.log(" Workout submit started"),console.log(" Form data:",s),console.log(" Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error(" No user ID found"),k("Please log in to save workouts");return}if(!s.title||!s.durationMinutes||!s.date){k("Please fill in all required fields");return}try{g(!0),k("");let N;if(s.date){const le=s.date.split("-"),X=parseInt(le[0]),q=parseInt(le[1]),ae=parseInt(le[2]),$=new Date;console.log(" Date parsing debug:"),console.log("  Form input:",s.date),console.log("  Split parts:",le),console.log("  Parsed year:",X),console.log("  Parsed month (human readable):",q),console.log("  Parsed day:",ae),console.log("  Month for Date constructor (0-indexed):",q-1),N=new Date(X,q-1,ae,$.getHours(),$.getMinutes(),$.getSeconds()),console.log(" Created date:",N),console.log(" Verify - Year:",N.getFullYear()),console.log(" Verify - Month (0-indexed):",N.getMonth()),console.log(" Verify - Month (human):",N.getMonth()+1),console.log(" Verify - Day:",N.getDate()),console.log(" Final formatted:",N.toLocaleDateString())}else N=B.getCurrentLocalTime();const D={title:s.title,type:s.type,durationMinutes:parseInt(s.durationMinutes),date:N,notes:s.notes,caloriesBurned:s.caloriesBurned?parseInt(s.caloriesBurned):0};console.log(" Final workout data:",D),console.log(" Will be saved as:",B.formatLocalDateTime(D.date));let S;if(i&&a?S=await hs.updateWorkout(t.uid,a,D):S=await hs.logWorkout(t.uid,D),console.log(" Workout service result:",S),S.success){console.log(" Workout logged successfully!");const le=await hs.fetchWorkoutsByUser(t.uid);n(le.workouts||[]),r({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),o(!1),c(null),k("");const X=Ld(s.notes);if(C(X),v(xy(s.notes)),!i||!a){const q={...D,sentiment:X?X.score:null};S=await hs.logWorkout(t.uid,q)}}}catch(N){console.error(" Workout logging error:",N),k("Failed to save workout. Please try again.")}finally{g(!1)}},M=w=>{var D,S;o(!0),c(w.id);const N=w.date instanceof Date?w.date.toISOString().split("T")[0]:new Date(w.date).toISOString().split("T")[0];r({date:N,durationMinutes:((D=w.durationMinutes)==null?void 0:D.toString())||"",title:w.title||"",type:w.type||"General",notes:w.notes||"",caloriesBurned:((S=w.caloriesBurned)==null?void 0:S.toString())||""})},E=async w=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this workout?"))try{await hs.deleteWorkout(t.uid,w),n(N=>N.filter(D=>D.id!==w))}catch(N){console.error("Error deleting workout:",N),k("Failed to delete workout")}},y=()=>{o(!1),c(null),r({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""})},I=e.filter(w=>(w.date instanceof Date?w.date.toISOString().split("T")[0]:new Date(w.date).toISOString().split("T")[0])===b);return d?u.jsx("div",{className:"workout-loading",children:"Loading workouts..."}):u.jsxs("div",{className:"workout-page",children:[u.jsxs("div",{className:"workout-card",children:[u.jsx("h1",{className:"workout-title",children:i?"Edit Workout Session":"Log Workout Session"}),T&&u.jsx("div",{className:"error-message",children:T}),u.jsxs("form",{onSubmit:L,className:"workout-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:s.date,onChange:R,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Title",u.jsx("input",{type:"text",name:"title",value:s.title,onChange:R,className:"form-input",placeholder:"e.g., Morning Run, Gym Session",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Type",u.jsxs("select",{name:"type",value:s.type,onChange:R,className:"form-input",children:[u.jsx("option",{value:"General",children:"General"}),u.jsx("option",{value:"Cardio",children:"Cardio"}),u.jsx("option",{value:"Strength",children:"Strength Training"}),u.jsx("option",{value:"Yoga",children:"Yoga"}),u.jsx("option",{value:"Running",children:"Running"}),u.jsx("option",{value:"Cycling",children:"Cycling"}),u.jsx("option",{value:"Swimming",children:"Swimming"}),u.jsx("option",{value:"Walking",children:"Walking"}),u.jsx("option",{value:"HIIT",children:"HIIT"}),u.jsx("option",{value:"Other",children:"Other"})]})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration / Length (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:s.durationMinutes,onChange:R,className:"form-input",min:"1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Calories Burned (Optional)",u.jsx("input",{type:"number",name:"caloriesBurned",value:s.caloriesBurned,onChange:R,className:"form-input",min:"0",placeholder:"0"})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:s.notes,onChange:R,className:"form-input form-textarea",placeholder:"How did it feel? Any achievements?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Workout":"Log Workout"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:y,disabled:m,children:"Cancel"})]})]})]}),u.jsxs("div",{className:"workout-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Workouts (",I.length,")"]}),I.length===0?u.jsx("p",{className:"no-workouts",children:"No workouts logged for today. Start your fitness journey!"}):u.jsx("ul",{className:"log-list",children:I.map(w=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"workout-info",children:[u.jsx("span",{className:"workout-title-display",children:w.title}),u.jsx("span",{className:"workout-type",children:w.type}),u.jsxs("span",{className:"workout-duration",children:[w.durationMinutes," min"]}),w.caloriesBurned>0&&u.jsxs("span",{className:"workout-calories",children:[w.caloriesBurned," cal"]}),w.notes&&u.jsx("span",{className:"workout-notes",children:w.notes})]}),u.jsxs("div",{className:"workout-actions",children:[u.jsx("button",{onClick:()=>M(w),className:"edit-button",disabled:m,children:"Edit"}),u.jsx("button",{onClick:()=>E(w.id),className:"delete-button",disabled:m,children:"Delete"})]})]},w.id))})]}),A&&u.jsxs("div",{className:"sentiment-feedback",children:[A.score>0&&"Your note sounds positive! ",A.score<0&&"Your note sounds a bit negative. ",A.score===0&&"Your note sounds neutral. ",x.length>0&&u.jsxs("div",{className:"keywords",children:[u.jsx("strong",{children:"Keywords:"})," ",x.join(", ")]})]})]})}const Zs={silence:{name:"Silence",description:"Pure silence for traditional meditation",icon:"",neurological:"Promotes introspection and self-awareness",frequency:null,baseFreq:null},pink_noise_rain:{name:"Pink Noise Rain",description:"Synthetic pink noise for deep relaxation",icon:"",neurological:"Pink noise (1/f) - enhances deep sleep and memory consolidation",frequency:"pink_noise",baseFreq:200,waveType:"sawtooth"},alpha_waves:{name:"Ocean Waves",description:"Realistic ocean waves with alpha wave entrainment",icon:"",neurological:"Ocean rhythms (0.1 Hz) naturally entrain alpha waves (8-12 Hz) for relaxation",frequency:"ocean_waves",waveFrequency:.1,baseFreq:60,highFreq:200,alphaCarrier:200,alphaBeat:10,waveType:"sine"},earth_frequency:{name:"Earth Resonance",description:"Schumann resonance for grounding",icon:"",neurological:"Earth frequency (7.83 Hz) - natural grounding and balance",frequency:"earth_binaural",carrierFreq:136.1,waveType:"sine"},white_noise:{name:"White Noise",description:"Full spectrum noise for focus",icon:"",neurological:"White noise - masks distractions, improves concentration",frequency:"white_noise",baseFreq:440,waveType:"square"},gamma_focus:{name:"Gamma Focus",description:"High-frequency binaural beats for peak concentration",icon:"",neurological:"Gamma waves (40 Hz) - heightened awareness and cognitive performance",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},theta_deep:{name:"Theta Deep State",description:"Deep theta waves for profound meditation",icon:"",neurological:"Theta waves (6 Hz) - deep meditation, creativity, and memory consolidation",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},healing_bowls:{name:"Healing Harmonics",description:"432 Hz healing frequency with natural harmonics",icon:"",neurological:'432 Hz "healing frequency" with harmonic overtones for cellular resonance',frequency:"harmonic",baseFreq:432,harmonics:[432,648,864,1296],waveType:"triangle",premium:!0},delta_deep_sleep:{name:"Delta Deep Sleep",description:"0.5-4 Hz for deep sleep and regeneration",icon:"",neurological:"Delta waves (0.5-4 Hz) - deep sleep, physical healing, and immune system boost",frequency:"delta",baseFreq:2,binauralBeat:2,leftEar:200,rightEar:202,waveType:"sine",premium:!0},theta_creativity:{name:"Theta Creativity",description:"4-8 Hz for creativity and insight",icon:"",neurological:"Theta waves (4-8 Hz) - enhanced creativity, insight, and problem-solving",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},alpha_relaxation:{name:"Alpha Relaxation",description:"8-12 Hz for relaxation and stress reduction",icon:"",neurological:"Alpha waves (8-12 Hz) - relaxation, stress reduction, and improved learning",frequency:"alpha",baseFreq:10,binauralBeat:10,leftEar:200,rightEar:210,waveType:"sine",premium:!0},beta_focus:{name:"Beta Focus",description:"13-30 Hz for focus and alertness",icon:"",neurological:"Beta waves (13-30 Hz) - focused attention, alertness, and cognitive performance",frequency:"beta",baseFreq:20,binauralBeat:20,leftEar:200,rightEar:220,waveType:"sine",premium:!0},gamma_insight:{name:"Gamma Insight",description:"30-100 Hz for insight and peak performance",icon:"",neurological:"Gamma waves (30-100 Hz) - insight, peak performance, and heightened awareness",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},anxiety_relief_528:{name:"Anxiety Relief (528 Hz)",description:"528 Hz frequency for anxiety and stress relief",icon:"",neurological:'528 Hz "Love frequency" - reduces anxiety, promotes healing, and DNA repair',frequency:"single_tone",baseFreq:528,waveType:"sine",premium:!0},depression_lift_639:{name:"Depression Lift (639 Hz)",description:"639 Hz frequency for emotional balance",icon:"",neurological:'639 Hz "Connection frequency" - improves relationships, emotional balance, and communication',frequency:"single_tone",baseFreq:639,waveType:"sine",premium:!0},confidence_boost_741:{name:"Confidence Boost (741 Hz)",description:"741 Hz frequency for self-expression and confidence",icon:"",neurological:'741 Hz "Expression frequency" - enhances self-expression, confidence, and creativity',frequency:"single_tone",baseFreq:741,waveType:"sine",premium:!0},intuition_852:{name:"Intuition (852 Hz)",description:"852 Hz frequency for intuition and spiritual awareness",icon:"",neurological:'852 Hz "Intuition frequency" - enhances intuition, spiritual awareness, and inner wisdom',frequency:"single_tone",baseFreq:852,waveType:"sine",premium:!0},solfeggio_396:{name:"Liberation (396 Hz)",description:"396 Hz Solfeggio frequency for fear and guilt release",icon:"",neurological:'396 Hz "Liberation frequency" - releases fear, guilt, and negative emotions',frequency:"single_tone",baseFreq:396,waveType:"sine",premium:!0},solfeggio_417:{name:"Transformation (417 Hz)",description:"417 Hz Solfeggio frequency for change and transformation",icon:"",neurological:'417 Hz "Transformation frequency" - facilitates change, transformation, and new beginnings',frequency:"single_tone",baseFreq:417,waveType:"sine",premium:!0},solfeggio_963:{name:"Awakening (963 Hz)",description:"963 Hz Solfeggio frequency for spiritual awakening",icon:"",neurological:'963 Hz "Awakening frequency" - spiritual awakening, connection to higher consciousness',frequency:"single_tone",baseFreq:963,waveType:"sine",premium:!0}},cu={mindfulness:{name:"Mindfulness",description:"Present-moment awareness practice",duration:[5,10,15,20],icon:""},breathing:{name:"Breathing",description:"Focused breathwork exercises",duration:[3,5,10],icon:""},body_scan:{name:"Body Scan",description:"Progressive muscle relaxation",duration:[10,15,20],icon:""},loving_kindness:{name:"Loving Kindness",description:"Compassion and heart-opening meditation",duration:[5,10,15],icon:""},flow_state:{name:"Flow State",description:"Neurologically optimized for peak performance",duration:[5,7,10],icon:"",premium:!0}};function Ax({children:t,fallback:e,showUpgrade:n=!0,feature:s="this feature",className:r=""}){const{isPremium:i,upgradeToPremium:o}=bn();return i?t:e||u.jsx("div",{className:`premium-gate ${r}`,children:u.jsxs("div",{className:"premium-lock",children:[u.jsx("div",{className:"lock-icon",children:""}),u.jsx("h3",{children:"Premium Feature"}),u.jsxs("p",{children:["Upgrade to unlock ",s]}),n&&u.jsx("button",{onClick:Xc,className:"unlock-button",children:"Upgrade to Premium - $4.99/month"})]})})}function E3e(){const{user:t,isPremium:e}=bn(),[n,s]=P.useState([]),[r,i]=P.useState({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),[o,a]=P.useState(!1),[c,d]=P.useState(null),[f,m]=P.useState(!0),[g,T]=P.useState(!1),[k,A]=P.useState(""),[C,x]=P.useState(!1),[v,b]=P.useState(0),[R,L]=P.useState(5),[M,E]=P.useState(!1),[y,I]=P.useState(!1),[w,N]=P.useState("silence");P.useEffect(()=>{console.log(" currentSoundscape changed to:",w)},[w]);const[D,S]=P.useState(""),[le,X]=P.useState(null),[q,ae]=P.useState(null),[$,ee]=P.useState(null),[ie,ge]=P.useState(null),[me,ke]=P.useState(null),[it,Jt]=P.useState(!1),[Zt,It]=P.useState(!1),ne=P.useRef(null);B.formatLocalDate(new Date),P.useEffect(()=>{(()=>{const U="wakeLock"in navigator;Jt(U),console.log(" Wake Lock API supported:",U)})()},[]),P.useEffect(()=>{const j=async()=>{if(t!=null&&t.uid)try{m(!0),console.log(" Fetching meditations for timezone:",B.getUserTimezone());const H=((await fs.fetchMeditationsByUser(t.uid)).meditations||[]).map(re=>({...re,localDate:B.formatLocalDate(re.date),localDateTime:B.formatLocalDateTime(re.date),relativeTime:B.getRelativeTime(re.date),isToday:B.isToday(re.date)}));s(H),console.log(" Loaded meditations with timezone data:",H.length)}catch(U){console.error("Error fetching meditations:",U),A("Failed to load meditation sessions")}finally{m(!1)}};t!=null&&t.uid&&j()},[t]),P.useEffect(()=>(console.log(" Audio effect triggered - isSessionActive:",C,"currentSoundscape:",w),C&&w!=="silence"&&(console.log(" Setting up audio for soundscape:",w),is()),()=>{if($)try{Array.isArray($)?$.forEach(j=>{j.stop&&j.stop()}):$.stop&&$.stop()}catch(j){console.log("Audio cleanup error:",j)}}),[C,w]),P.useEffect(()=>(C&&!M?ne.current=setInterval(()=>{b(j=>{const U=j+1;return U>=180&&!y&&(I(!0),Lh()),U})},1e3):clearInterval(ne.current),()=>clearInterval(ne.current)),[C,M,y]),P.useEffect(()=>{C&&v>=R*60&&(console.log(" Timer completed! Auto-stopping session..."),console.log(" Final session stats:"),console.log("  - Duration:",Math.floor(v/60),"minutes"),console.log("  - Target:",R,"minutes"),console.log("  - Soundscape:",w),console.log("  - Deep state achieved:",y),console.log("  - Start time:",B.formatLocalDateTime(le)),pa(),ot())},[C,v,R,w,y,le]);const ye=n.filter(j=>j.isToday||B.isToday(j.date));console.log(" Today's meditations:",ye.length),P.useEffect(()=>()=>{Ye(),ne.current&&clearInterval(ne.current)},[]);const Re=async()=>{try{if(!it)return console.log(" Wake Lock API not supported, using fallback methods"),!1;const j=await navigator.wakeLock.request("screen");return ke(j),It(!0),console.log(" Wake lock activated"),j.addEventListener("release",()=>{console.log(" Wake lock was released"),It(!1),ke(null)}),!0}catch(j){return console.error(" Failed to request wake lock:",j),!1}},Ye=()=>{try{me&&(me.release(),ke(null),It(!1),console.log(" Wake lock released"))}catch(j){console.error(" Error releasing wake lock:",j)}},xt=()=>!it&&(console.log(" Using fallback keep-awake methods"),q&&q.state==="suspended"&&q.resume(),"vibrate"in navigator)?setInterval(()=>{navigator.vibrate(1)},3e4):null,is=()=>{try{const j=new(window.AudioContext||window.webkitAudioContext);ae(j);const U=j.createGain();U.connect(j.destination),U.gain.value=.1,ge(U);const H=Zs[w];if(!(H!=null&&H.frequency)){console.log(" Silence selected");return}switch(H.frequency){case"gamma":case"theta":$r(j,U,H);break;case"alpha":fa(j,U,H);break;case"ocean_waves":_l(j,U,H);break;case"earth_binaural":yl(j,U,H);break;case"harmonic":Mh(j,U,H.harmonics||[H.baseFreq]);break;case"pink_noise":vl(j,U);break;case"white_noise":ma(j,U);break;case"single_tone":case"natural":Oh(j,U,H.baseFreq,H.waveType||"sine");break;default:console.log(" Unknown frequency type:",H.frequency)}}catch(j){console.error("Audio setup failed:",j)}},$r=(j,U,H)=>{const re=j.createOscillator();re.frequency.setValueAtTime(H.leftEar,j.currentTime),re.type=H.waveType||"sine";const ce=j.createOscillator();ce.frequency.setValueAtTime(H.rightEar,j.currentTime),ce.type=H.waveType||"sine";const te=j.createStereoPanner();te.pan.value=-1;const fe=j.createStereoPanner();fe.pan.value=1,re.connect(te),te.connect(U),ce.connect(fe),fe.connect(U),re.start(),ce.start(),ee([re,ce]),console.log(` Binaural beats: ${H.leftEar}Hz (L) / ${H.rightEar}Hz (R) = ${H.binauralBeat}Hz beat`)},fa=(j,U,H)=>{const ce=H.baseFreq,te=j.createOscillator();te.frequency.setValueAtTime(200,j.currentTime),te.type=H.waveType||"sine";const fe=j.createOscillator();fe.frequency.setValueAtTime(200+ce,j.currentTime),fe.type=H.waveType||"sine";const at=j.createStereoPanner();at.pan.value=-1;const ze=j.createStereoPanner();ze.pan.value=1,te.connect(at),at.connect(U),fe.connect(ze),ze.connect(U),te.start(),fe.start(),ee([te,fe]),console.log(` Alpha binaural: 200Hz (L) / ${200+ce}Hz (R) = ${ce}Hz beat`)},yl=(j,U,H)=>{const re=H.carrierFreq||136.1,ce=7.83,te=j.createOscillator();te.frequency.setValueAtTime(re,j.currentTime),te.type=H.waveType||"sine";const fe=j.createOscillator();fe.frequency.setValueAtTime(re+ce,j.currentTime),fe.type=H.waveType||"sine";const at=j.createStereoPanner();at.pan.value=-1;const ze=j.createStereoPanner();ze.pan.value=1,te.connect(at),at.connect(U),fe.connect(ze),ze.connect(U),te.start(),fe.start(),ee([te,fe]),console.log(` Earth binaural: ${re}Hz (L) / ${re+ce}Hz (R) = ${ce}Hz Schumann beat`)},Oh=(j,U,H,re="sine")=>{const ce=j.createOscillator();ce.frequency.setValueAtTime(H,j.currentTime),ce.type=re,ce.connect(U),ce.start(),ee(ce),console.log(` Single tone: ${H}Hz (${re})`)},Mh=(j,U,H)=>{const re=H.map(ce=>{const te=j.createOscillator();te.frequency.setValueAtTime(ce,j.currentTime),te.type="triangle";const fe=j.createGain();return fe.gain.value=.3/H.length,te.connect(fe),fe.connect(U),te.start(),te});ee(re),console.log(` Harmonics: ${H.join(", ")}Hz`)},vl=(j,U)=>{const H=j.sampleRate*2,re=j.createBuffer(1,H,j.sampleRate),ce=re.getChannelData(0);for(let fe=0;fe<H;fe++){let at=0;for(let ze=0;ze<5;ze++)at+=(Math.random()*2-1)/Math.pow(2,ze);ce[fe]=at*.1}const te=j.createBufferSource();te.buffer=re,te.loop=!0,te.connect(U),te.start(),ee(te),console.log(" Pink noise generated")},ma=(j,U)=>{const H=j.sampleRate*2,re=j.createBuffer(1,H,j.sampleRate),ce=re.getChannelData(0);for(let fe=0;fe<H;fe++)ce[fe]=(Math.random()*2-1)*.1;const te=j.createBufferSource();te.buffer=re,te.loop=!0,te.connect(U),te.start(),ee(te),console.log(" White noise generated")},_l=(j,U,H)=>{const re=[],ce=j.createOscillator();ce.frequency.setValueAtTime(20,j.currentTime),ce.type="sine";const te=j.createGain();te.gain.value=.4;const fe=j.createOscillator();fe.frequency.setValueAtTime(396,j.currentTime),fe.type="sine";const at=j.createGain();at.gain.value=.05;const ze=j.createOscillator();ze.frequency.setValueAtTime(.15,j.currentTime),ze.type="sine";const qr=j.createGain();qr.gain.value=.3,ze.connect(qr),qr.connect(te.gain),ce.connect(te),te.connect(U),fe.connect(at),at.connect(U);const Ui=j.createBuffer(1,j.sampleRate*8,j.sampleRate),Ln=Ui.getChannelData(0);let Bi=0;for(let Xe=0;Xe<Ln.length;Xe++){const Mt=Math.random()*2-1;Bi=(Bi+Mt*.02)*.99;const gt=Math.sin(Xe*.001)*.3+.7;Ln[Xe]=Bi*gt*.5}const Fn=j.createBufferSource();Fn.buffer=Ui,Fn.loop=!0;const Ms=j.createOscillator();Ms.frequency.setValueAtTime(432,j.currentTime),Ms.type="triangle";const zn=j.createGain();zn.gain.value=.08;const Ls=j.createBiquadFilter();Ls.type="bandpass",Ls.frequency.setValueAtTime(300,j.currentTime),Ls.Q.setValueAtTime(.8,j.currentTime);const Ze=j.createGain();Ze.gain.value=.3;const Fs=j.createOscillator();Fs.frequency.setValueAtTime(.13,j.currentTime),Fs.type="triangle";const Un=j.createGain();Un.gain.value=.25,Fs.connect(Un),Un.connect(Ze.gain),Un.connect(zn.gain),Fn.connect(Ls),Ls.connect(Ze),Ze.connect(U),Ms.connect(zn),zn.connect(U);const zs=j.createBuffer(1,j.sampleRate*6,j.sampleRate),Il=zs.getChannelData(0);for(let Xe=0;Xe<Il.length;Xe++){let Mt=0;for(let Bn=0;Bn<3;Bn++)Mt+=(Math.random()*2-1)*Math.pow(.5,Bn);const gt=Math.random()>.98?(Math.random()*2-1)*.3:0;Il[Xe]=(Mt+gt)*.15}const Wr=j.createBufferSource();Wr.buffer=zs,Wr.loop=!0;const mn=j.createOscillator();mn.frequency.setValueAtTime(528,j.currentTime),mn.type="sine";const $i=j.createGain();$i.gain.value=.06;const qi=j.createBiquadFilter();qi.type="highpass",qi.frequency.setValueAtTime(1500,j.currentTime);const os=j.createGain();os.gain.value=.12;const Us=j.createOscillator();Us.frequency.setValueAtTime(.5,j.currentTime),Us.type="sine";const Bs=j.createGain();if(Bs.gain.value=.04,Us.connect(Bs),Bs.connect(os.gain),Bs.connect($i.gain),Wr.connect(qi),qi.connect(os),os.connect(U),mn.connect($i),$i.connect(U),H.alphaCarrier&&H.alphaBeat){const Xe=j.createOscillator();Xe.frequency.setValueAtTime(H.alphaCarrier,j.currentTime),Xe.type="sine";const Mt=j.createOscillator();Mt.frequency.setValueAtTime(H.alphaCarrier+H.alphaBeat,j.currentTime),Mt.type="sine";const gt=j.createGain();gt.gain.value=.03;const Bn=j.createStereoPanner();Bn.pan.value=-1;const Hr=j.createStereoPanner();Hr.pan.value=1,Xe.connect(Bn),Bn.connect(gt),Mt.connect(Hr),Hr.connect(gt),gt.connect(U),re.push(Xe,Mt),Xe.start(),Mt.start()}const Gr=j.createBuffer(1,j.sampleRate*10,j.sampleRate),kn=Gr.getChannelData(0);for(let Xe=0;Xe<kn.length;Xe++){let Mt=0;for(let gt=0;gt<4;gt++)Mt+=(Math.random()*2-1)/Math.pow(2,gt*.7);kn[Xe]=Mt*.2}const $s=j.createBufferSource();$s.buffer=Gr,$s.loop=!0;const qs=j.createBiquadFilter();qs.type="bandpass",qs.frequency.setValueAtTime(150,j.currentTime),qs.Q.setValueAtTime(.4,j.currentTime);const Ws=j.createGain();Ws.gain.value=.15;const as=j.createOscillator();as.frequency.setValueAtTime(.07,j.currentTime),as.type="sine";const Wi=j.createGain();Wi.gain.value=.1,as.connect(Wi),Wi.connect(Ws.gain),$s.connect(qs),qs.connect(Ws),Ws.connect(U),ce.start(),fe.start(),ze.start(),Fn.start(),Ms.start(),Fs.start(),Wr.start(),mn.start(),Us.start(),$s.start(),as.start(),re.push(ce,fe,ze,Fn,Ms,Fs,Wr,mn,Us,$s,as),ee(re),console.log(" Healing Ocean Waves: 396Hz (Liberation) + 432Hz (Earth) + 528Hz (Love) + Alpha binaural beats + Realistic ocean sounds")},Lh=()=>{console.log(" Deep state achieved at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Deep State Achieved! ",{body:`You've entered a deep meditative state at ${B.formatLocalTime(new Date)}. Well done!`,icon:"/meditation-icon.png"})},pa=()=>{console.log(" Session completed at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Meditation Complete! ",{body:`Great job! You completed your ${R}-minute meditation session.`,icon:"/meditation-icon.png"});try{const j=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAcugtTxzD2sLYPs7lkgCBl5gQEDgVs+l4G6tGEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAc=");j.volume=.3,j.play().catch(()=>{})}catch{}},ga=async(j,U,H)=>{const re=B.getCurrentLocalTime();if(console.log(" Starting meditation session in timezone:",B.getUserTimezone()),console.log(" Session start time:",B.formatLocalDateTime(re)),console.log(" Selected soundscape:",H),L(j),b(0),x(!0),E(!1),I(!1),X(re),!await Re()){console.log(" Wake lock failed, using fallback methods");const te=xt();te&&(ne.current=te)}"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},wl=()=>{const j=B.getCurrentLocalTime();console.log(" Session paused at:",B.formatLocalDateTime(j)),E(!M),$&&q&&(M?q.resume():q.suspend())},ot=async()=>{const j=B.getCurrentLocalTime();if(console.log(" Session ended at:",B.formatLocalDateTime(j)),console.log(" Session duration:",Math.floor(v/60),"minutes"),console.log(" Target duration:",R,"minutes"),console.log(" Session completed?",v>=R*60),Ye(),$){if(Array.isArray($))$.forEach(U=>{try{U.stop?U.stop():U.disconnect&&U.disconnect()}catch(H){console.log("Oscillator cleanup:",H)}});else try{$.stop?$.stop():$.disconnect&&$.disconnect()}catch(U){console.log("Oscillator cleanup:",U)}ee(null)}if(q){try{await q.close()}catch(U){console.log("AudioContext cleanup:",U)}ae(null)}if(x(!1),E(!1),v>=60){console.log(" Auto-logging session (duration >= 1 minute)"),console.log(" Session time check:",v,"seconds"),console.log(" Firebase user:",t==null?void 0:t.uid),console.log(" Session start time:",le);try{await pt(),console.log(" Auto-log completed successfully")}catch(U){console.error(" Auto-log failed:",U)}}else console.log(" Session too short, not logging (< 1 minute)");console.log(" Audio stopped and session ended successfully")},pt=async()=>{var j;if(!(!(t!=null&&t.uid)||!le))try{console.log(" Auto-logging session with timezone data"),console.log(" Session start time:",B.formatLocalDateTime(le)),console.log(" Session duration:",Math.floor(v/60),"minutes");const U={date:le,durationMinutes:Math.floor(v/60),type:"mindfulness",soundscape:w,completed:v>=R*60,deepStateAchieved:y,moodBefore:D,targetDuration:R,sessionStartTime:le,sessionEndTime:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone(),notes:r.notes,sentiment:r.notes?(j=Ld(r.notes))==null?void 0:j.score:null};console.log(" Session data being saved:",U);const H=await fs.logMeditation(t.uid,U);console.log(" API Response:",H);const re={...H.meditation,localDate:B.formatLocalDate(H.meditation.date),localDateTime:B.formatLocalDateTime(H.meditation.date),relativeTime:B.getRelativeTime(H.meditation.date),isToday:B.isToday(H.meditation.date)};console.log(" Adding meditation to UI:",re),console.log(" Is today?",re.isToday),console.log(" Local date:",re.localDate),s(ce=>{const te=[re,...ce];return console.log(" Updated meditations list:",te.length,"total"),te}),console.log(" Session auto-logged and added to UI successfully")}catch(U){console.error(" Error auto-logging session:",U),console.error(" Error details:",U.message)}},fn=j=>{const{name:U,value:H}=j.target;i(re=>({...re,[U]:H}))},El=async j=>{if(j.preventDefault(),!!(t!=null&&t.uid)){T(!0),A("");try{console.log(" Submitting meditation in timezone:",B.getUserTimezone());const U=r.date?B.toLocalTimezone(r.date):B.getCurrentLocalTime(),H={...r,date:U,durationMinutes:parseInt(r.durationMinutes),userTimezone:B.getUserTimezone()};if(console.log(" Meditation submit data:",H),console.log(" Local meditation time:",B.formatLocalDateTime(U)),o)await fs.updateMeditation(t.uid,c,H),s(ce=>ce.map(te=>te.id===c?{...te,...H,localDate:B.formatLocalDate(U),localDateTime:B.formatLocalDateTime(U),relativeTime:B.getRelativeTime(U),isToday:B.isToday(U)}:te)),a(!1),d(null),console.log(" Meditation updated successfully");else{const ce=await fs.logMeditation(t.uid,H),te={...ce.meditation,localDate:B.formatLocalDate(ce.meditation.date),localDateTime:B.formatLocalDateTime(ce.meditation.date),relativeTime:B.getRelativeTime(ce.meditation.date),isToday:B.isToday(ce.meditation.date)};s(fe=>[te,...fe]),console.log(" Meditation logged successfully")}i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""});const re=Ld(r.notes);if(setSentimentFeedback(re),setKeywords(xy(r.notes)),!o){const ce={...H,sentiment:re?re.score:null},te=await fs.logMeditation(t.uid,ce),fe={...te.meditation,localDate:B.formatLocalDate(te.meditation.date),localDateTime:B.formatLocalDateTime(te.meditation.date),relativeTime:B.getRelativeTime(te.meditation.date),isToday:B.isToday(te.meditation.date)};s(at=>[fe,...at]),console.log(" Meditation logged successfully")}}catch(U){console.error("Error saving meditation:",U),A(o?"Failed to update meditation":"Failed to log meditation")}finally{T(!1)}}},Tl=j=>{var U;console.log(" Editing meditation from:",B.formatLocalDateTime(j.date)),i({date:B.formatLocalDate(j.date),durationMinutes:((U=j.durationMinutes)==null?void 0:U.toString())||"",type:j.type||"mindfulness",soundscape:j.soundscape||"silence",moodBefore:j.moodBefore||"",moodAfter:j.moodAfter||"",notes:j.notes||""}),a(!0),d(j.id)},Fh=async j=>{if(!(t!=null&&t.uid))return;const U=n.find(re=>re.id===j),H=`Are you sure you want to delete the meditation session from ${(U==null?void 0:U.localDateTime)||"unknown time"}?`;if(window.confirm(H))try{await fs.deleteMeditation(t.uid,j),s(re=>re.filter(ce=>ce.id!==j)),console.log(" Meditation deleted successfully")}catch(re){console.error("Error deleting meditation:",re),A("Failed to delete meditation")}},Os=j=>{const U=Math.floor(j/60),H=j%60;return`${U}:${H.toString().padStart(2,"0")}`};return f?u.jsxs("div",{className:"meditation-loading",children:[u.jsx("p",{children:"Loading meditations..."}),u.jsxs("small",{children:["Timezone: ",B.getUserTimezone()]})]}):u.jsxs("div",{className:"meditation-page",children:[C&&u.jsxs("div",{className:"session-interface",children:[u.jsxs("div",{className:"session-header",children:[u.jsx("h2",{children:" Meditation Session"}),u.jsxs("div",{className:"session-info",children:[u.jsxs("div",{className:"session-soundscape",children:[Zs[w].icon," ",Zs[w].name]}),u.jsxs("div",{className:"session-time-info",children:["Started: ",le?B.formatLocalTime(le):"Now",u.jsx("br",{}),u.jsx("small",{children:B.getUserTimezone()})]}),u.jsx("div",{className:"wake-lock-status",children:Zt?u.jsx("span",{className:"wake-lock-active",title:"Screen will stay awake during meditation",children:" Screen Awake"}):it?u.jsx("span",{className:"wake-lock-inactive",title:"Screen may sleep during meditation",children:" Screen May Sleep"}):u.jsx("span",{className:"wake-lock-unsupported",title:"Wake lock not supported on this device",children:" Using Fallback"})})]})]}),u.jsxs("div",{className:"session-timer",children:[u.jsxs("div",{className:"time-display",children:[u.jsx("span",{className:"current-time",children:Os(v)}),u.jsxs("span",{className:"target-time",children:["/ ",Os(R*60)]})]}),u.jsx("div",{className:"progress-ring",children:u.jsx("div",{className:"meditation-progress-fill",style:{background:`conic-gradient(#4CAF50 ${v/(R*60)*360}deg, #eee 0deg)`}})})]}),u.jsxs("div",{className:"session-status",children:[y&&u.jsxs("div",{className:"deep-state-indicator",children:[" Deep State Achieved at ",B.formatLocalTime(new Date)," "]}),u.jsx("div",{className:"neurological-info",children:u.jsx("p",{children:Zs[w].neurological})})]}),u.jsxs("div",{className:"session-controls",children:[u.jsxs("button",{onClick:wl,className:"pause-btn",children:[M?"":""," ",M?"Resume":"Pause"]}),u.jsx("button",{onClick:ot,className:"stop-btn",children:" End Session"})]})]}),!C&&u.jsxs("div",{className:"quick-start",children:[u.jsx("h1",{className:"meditation-title",children:" Meditation Studio"}),u.jsxs("p",{className:"subtitle",children:["Neurologically optimized for deep meditation states",u.jsx("br",{})]}),u.jsxs("div",{className:"soundscape-section",children:[u.jsx("h3",{children:" Step 1: Choose Your Soundscape"}),u.jsx("div",{className:"soundscape-instructions",children:u.jsx("p",{children:"Select a soundscape below (or choose silence for quiet meditation). Click again to deselect."})}),u.jsx("div",{className:"soundscape-grid",children:Object.entries(Zs).map(([j,U])=>u.jsxs("div",{className:`soundscape-option ${U.premium?"premium":""} ${w===j?"selected":""} ${U.premium&&!e?"locked":""}`,children:[u.jsxs("div",{className:"soundscape-header",children:[u.jsx("span",{className:"soundscape-icon",children:U.icon}),U.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsxs("div",{className:"soundscape-content",onClick:H=>{H.stopPropagation(),H.preventDefault(),console.log(" Soundscape clicked:",j,"current selection:",w),!U.premium||e?w===j?(console.log(" Deselecting soundscape to silence"),N("silence")):(console.log(" Selecting soundscape:",j),N(j)):alert("This soundscape requires Clarity Premium. Upgrade to access premium features!")},children:[u.jsx("h4",{children:U.name}),u.jsx("p",{className:"soundscape-description",children:U.description}),u.jsx("small",{className:"neurological-note",children:U.neurological})]}),U.premium&&!e&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"lock-icon",children:""})})]},j))})]}),u.jsxs("div",{className:"quick-start-grid",children:[u.jsx("h3",{children:" Step 2: Choose Your Session"}),Object.entries(cu).map(([j,U])=>u.jsxs("div",{className:`meditation-type ${U.premium?"premium":""}`,children:[u.jsxs("div",{className:"type-header",children:[u.jsx("span",{className:"type-icon",children:U.icon}),u.jsx("h3",{children:U.name}),U.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsx("p",{className:"type-description",children:U.description}),u.jsx("div",{className:"duration-options",children:U.duration.map(H=>u.jsxs("button",{onClick:()=>{D||S(prompt("How are you feeling right now? ()")||""),ga(H,j,w)},className:"duration-btn",disabled:U.premium&&!e,children:[H,"min"]},H))})]},j))]})]}),!C&&u.jsxs("div",{className:"meditation-card",children:[u.jsx("h2",{className:"form-title",children:o?"Edit Meditation Session":"Manually Log Session"}),k&&u.jsx("div",{className:"error-message",children:k}),u.jsxs("form",{onSubmit:El,className:"meditation-form",children:[u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date (",B.getUserTimezone(),")",u.jsx("input",{type:"date",name:"date",value:r.date,onChange:fn,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:r.durationMinutes,onChange:fn,className:"form-input",min:"1",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Meditation Type",u.jsx("select",{name:"type",value:r.type,onChange:fn,className:"form-input",children:Object.entries(cu).map(([j,U])=>u.jsx("option",{value:j,children:U.name},j))})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Soundscape Used",u.jsx("select",{name:"soundscape",value:r.soundscape,onChange:fn,className:"form-input",children:Object.entries(Zs).map(([j,U])=>u.jsx("option",{value:j,children:U.name},j))})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood Before",u.jsxs("select",{name:"moodBefore",value:r.moodBefore,onChange:fn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"",children:" Happy"}),u.jsx("option",{value:"",children:" Sad"}),u.jsx("option",{value:"",children:" Tired"}),u.jsx("option",{value:"",children:" Frustrated"}),u.jsx("option",{value:"",children:" Peaceful"}),u.jsx("option",{value:"",children:" Thoughtful"}),u.jsx("option",{value:"",children:" Excited"}),u.jsx("option",{value:"",children:" Anxious"})]})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood After",u.jsxs("select",{name:"moodAfter",value:r.moodAfter,onChange:fn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"",children:" Happy"}),u.jsx("option",{value:"",children:" Sad"}),u.jsx("option",{value:"",children:" Tired"}),u.jsx("option",{value:"",children:" Frustrated"}),u.jsx("option",{value:"",children:" Peaceful"}),u.jsx("option",{value:"",children:" Thoughtful"}),u.jsx("option",{value:"",children:" Excited"}),u.jsx("option",{value:"",children:" Anxious"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:r.notes,onChange:fn,className:"form-input form-textarea",placeholder:"How did the session feel? Any insights?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:g,children:g?o?"Updating...":"Logging...":o?"Update Session":"Log Session"}),o&&u.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{a(!1),d(null),i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})},disabled:g,children:"Cancel"})]})]})]}),sentimentFeedback&&u.jsxs("div",{className:"sentiment-feedback",children:[sentimentFeedback.score>0&&"Your note sounds positive! ",sentimentFeedback.score<0&&"Your note sounds a bit negative. ",sentimentFeedback.score===0&&"Your note sounds neutral. ",keywords.length>0&&u.jsxs("div",{className:"keywords",children:[u.jsx("strong",{children:"Keywords:"})," ",keywords.join(", ")]})]}),!C&&u.jsxs("div",{className:"meditation-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Sessions (",ye.length,")",u.jsx("br",{}),u.jsxs("small",{children:[B.formatLocalDate(new Date)," - ",B.getUserTimezone()]})]}),ye.length===0?u.jsxs("p",{className:"no-sessions",children:["No meditation sessions today. Start your mindfulness journey!",u.jsx("br",{}),u.jsxs("small",{children:["Local time: ",B.formatLocalDateTime(new Date)]})]}):u.jsx("ul",{className:"log-list",children:ye.map(j=>{var U,H,re,ce;return u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"meditation-info",children:[u.jsxs("div",{className:"meditation-header",children:[u.jsxs("span",{className:"meditation-type",children:[(U=cu[j.type])==null?void 0:U.icon," ",((H=cu[j.type])==null?void 0:H.name)||j.type]}),u.jsxs("span",{className:"meditation-time",children:[j.localDateTime,u.jsxs("small",{children:[" (",j.relativeTime,")"]})]})]}),u.jsxs("div",{className:"meditation-details",children:[u.jsxs("span",{className:"meditation-duration",children:[j.durationMinutes," min"]}),u.jsxs("span",{className:"meditation-soundscape",children:[(re=Zs[j.soundscape])==null?void 0:re.icon," ",(ce=Zs[j.soundscape])==null?void 0:ce.name]}),j.deepStateAchieved&&u.jsx("span",{className:"deep-state-badge",children:" Deep State"}),j.moodBefore&&j.moodAfter&&u.jsxs("span",{className:"mood-change",children:[j.moodBefore,"  ",j.moodAfter]})]}),j.notes&&u.jsx("div",{className:"meditation-notes",children:j.notes})]}),u.jsxs("div",{className:"meditation-actions",children:[u.jsx("button",{onClick:()=>Tl(j),className:"edit-button",disabled:g,children:"Edit"}),u.jsx("button",{onClick:()=>Fh(j.id),className:"delete-button",disabled:g,children:"Delete"})]})]},j.id)})})]}),!C&&u.jsxs("div",{className:"recommended-videos",children:[u.jsx("h2",{className:"recommended-title",children:" Guided Meditation Videos"}),u.jsxs("p",{className:"timezone-note",children:["Perfect for any time of day in ",B.getUserTimezone()]}),u.jsxs("div",{className:"video-tiles",children:[u.jsxs("a",{href:"https://www.youtube.com/watch?v=VpHz8Mb13_Y",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:""}),u.jsx("p",{className:"video-title",children:"Relaxation and Positivity"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=CqnWMPuyT0g",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:""}),u.jsx("p",{className:"video-title",children:"Self Love"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=056qll-07ak",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:""}),u.jsx("p",{className:"video-title",children:"Stop Thinking"})]})]})]}),u.jsx(Ax,{feature:"exclusive meditation experiences",children:u.jsxs("div",{className:"premium-meditation-features",children:[u.jsx("h3",{children:" Premium Meditation Experience"}),u.jsx("p",{children:"Unlock advanced features designed by neuroscientists:"}),u.jsxs("ul",{children:[u.jsx("li",{children:" Premium binaural soundscapes"}),u.jsx("li",{children:" Advanced session analytics"}),u.jsx("li",{children:" Personalized meditation recommendations"}),u.jsx("li",{children:" Smart session reminders based on your timezone"}),u.jsx("li",{children:" Mood tracking and insights"})]})]})})]})}function T3e(){const{user:t}=bn(),[e,n]=P.useState([]),[s,r]=P.useState({date:"",amount:"",type:"water",notes:""}),[i,o]=P.useState(!1),[a,c]=P.useState(null),[d,f]=P.useState(!0),[m,g]=P.useState(!1),[T,k]=P.useState(""),[A,C]=P.useState(0),[x,v]=P.useState(64),[b,R]=P.useState(null),[L,M]=P.useState([]);new Date().toISOString().split("T")[0],P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const q=await Wt.fetchWaterIntakeByUser(t.uid);n(q.waterIntakes||[]);const ae=await Wt.getTodayWaterIntake(t.uid);C(ae.totalOz||0),v(64)}catch(q){console.error("Error fetching water data:",q),k("Failed to load water intake data")}finally{f(!1)}})()},[t]);const E=X=>{const{name:q,value:ae}=X.target;r($=>({...$,[q]:ae}))},y=async X=>{if(X.preventDefault(),console.log(" Water submit started"),console.log(" Form data:",s),console.log(" Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error(" No user ID found"),k("Please log in to save water intake");return}if(!s.amount||!s.date){k("Please fill in all required fields");return}try{g(!0),k("");let q;if(s.date){const ie=s.date.split("-"),ge=parseInt(ie[0]),me=parseInt(ie[1]),ke=parseInt(ie[2]),it=new Date;console.log(" Water date parsing debug:"),console.log("  Form input:",s.date),console.log("  Split parts:",ie),console.log("  Parsed year:",ge),console.log("  Parsed month (human readable):",me),console.log("  Parsed day:",ke),console.log("  Month for Date constructor (0-indexed):",me-1),q=new Date(ge,me-1,ke,it.getHours(),it.getMinutes(),it.getSeconds()),console.log(" Created water date:",q),console.log(" Verify - Year:",q.getFullYear()),console.log(" Verify - Month (0-indexed):",q.getMonth()),console.log(" Verify - Month (human):",q.getMonth()+1),console.log(" Verify - Day:",q.getDate()),console.log(" Final formatted:",q.toLocaleDateString())}else q=new Date;const ae={date:q,amount:parseFloat(s.amount),type:s.type,notes:s.notes};if(console.log(" Final water data:",ae),console.log(" Will be saved as:",ae.date.toLocaleDateString()),i)await Wt.updateWaterIntake(t.uid,a,ae),n(ie=>ie.map(ge=>ge.id===a?{...ge,...ae}:ge)),o(!1),c(null);else{const ie=await Wt.logWaterIntake(t.uid,ae);n(ge=>[ie.waterIntake,...ge])}const $=await Wt.getTodayWaterIntake(t.uid);C($.totalOz||0),r({date:"",amount:"",type:"water",notes:""}),console.log(" Water intake logged successfully!");const ee=Ld(s.notes);if(R(ee),M(xy(s.notes)),!i){const ie={...ae,sentiment:ee?ee.score:null},ge=await Wt.logWaterIntake(t.uid,ie);n(me=>[ge.waterIntake,...me])}}catch(q){console.error(" Water logging error:",q),k(i?"Failed to update water intake":"Failed to log water intake")}finally{g(!1)}},I=X=>{var ae;o(!0),c(X.id);const q=X.date instanceof Date?X.date.toISOString().split("T")[0]:new Date(X.date).toISOString().split("T")[0];r({date:q,amount:((ae=X.amount)==null?void 0:ae.toString())||"",type:X.type||"water",notes:X.notes||""})},w=async X=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this water intake?"))try{await Wt.deleteWaterIntake(t.uid,X),n(ae=>ae.filter($=>$.id!==X));const q=await Wt.getTodayWaterIntake(t.uid);C(q.totalOz||0)}catch(q){console.error("Error deleting water intake:",q),k("Failed to delete water intake")}},N=()=>{o(!1),c(null),r({date:"",amount:"",type:"water",notes:""})},D=async X=>{if(t!=null&&t.uid)try{g(!0);const q=new Date,ae=new Date(q.getFullYear(),q.getMonth(),q.getDate(),q.getHours(),q.getMinutes(),q.getSeconds());console.log(" Quick add date:",ae),console.log(" Quick add formatted:",ae.toLocaleDateString()),await Wt.logWaterIntake(t.uid,{date:ae,amount:X,type:"water",notes:"",sentiment:null});const $=await Wt.fetchWaterIntakeByUser(t.uid);n($.waterIntakes||[]);const ee=await Wt.getTodayWaterIntake(t.uid);C(ee.totalOz||0),console.log(" Quick add water successful!")}catch(q){console.error(" Error quick adding water:",q),k("Failed to log water intake")}finally{g(!1)}},S=e.filter(X=>{const q=X.date instanceof Date?X.date:new Date(X.date),ae=B.isToday(q);return console.log(" Comparing dates:",{waterDate:q.toLocaleDateString(),today:new Date().toLocaleDateString(),isToday:ae,waterDateObj:q,waterDateType:typeof X.date}),ae}),le=Math.min(A/x*100,100);return d?u.jsx("div",{className:"water-loading",children:"Loading water data..."}):u.jsxs("div",{className:"water-page",children:[u.jsxs("div",{className:"water-progress",children:[u.jsx("h2",{children:"Daily Hydration Progress"}),u.jsx("div",{className:"progress-info",children:u.jsx("div",{className:"water-progress-bar",children:u.jsx("div",{className:"water-progress-fill",style:{width:`${le}%`}})})}),A>=x&&u.jsx("div",{className:"goal-achieved",children:" Daily goal achieved! Great job! "})]}),u.jsxs("div",{className:"quick-add-section",children:[u.jsx("h3",{children:"Quick Add"}),u.jsxs("div",{className:"quick-add-buttons",children:[u.jsxs("button",{onClick:()=>D(8),className:"quick-add-btn",disabled:m,children:["8 oz",u.jsx("br",{}),u.jsx("small",{children:"Glass"})]}),u.jsxs("button",{onClick:()=>D(16),className:"quick-add-btn",disabled:m,children:["16 oz",u.jsx("br",{}),u.jsx("small",{children:"Bottle"})]}),u.jsxs("button",{onClick:()=>D(20),className:"quick-add-btn",disabled:m,children:["20 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Bottle"})]}),u.jsxs("button",{onClick:()=>D(32),className:"quick-add-btn",disabled:m,children:["32 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Cup"})]})]})]}),u.jsxs("div",{className:"water-card",children:[u.jsx("h1",{className:"water-title",children:i?"Edit Water Intake":"Log Water Intake"}),T&&u.jsx("div",{className:"error-message",children:T}),u.jsxs("form",{onSubmit:y,className:"water-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:s.date,onChange:E,className:"form-input",required:!0})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Amount (oz)",u.jsx("input",{type:"number",name:"amount",value:s.amount,onChange:E,className:"form-input",min:"0.1",step:"0.1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Drink Type",u.jsxs("select",{name:"type",value:s.type,onChange:E,className:"form-input",children:[u.jsx("option",{value:"water",children:"Water"}),u.jsx("option",{value:"tea",children:"Tea"}),u.jsx("option",{value:"coffee",children:"Coffee"}),u.jsx("option",{value:"juice",children:"Juice"}),u.jsx("option",{value:"sports_drink",children:"Sports Drink"}),u.jsx("option",{value:"other",children:"Other"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("input",{type:"text",name:"notes",value:s.notes,onChange:E,className:"form-input",placeholder:"e.g., with lemon, iced, etc."})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Intake":"Log Water"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:N,disabled:m,children:"Cancel"})]})]})]}),b&&u.jsxs("div",{className:"sentiment-feedback",children:[b.score>0&&"Your note sounds positive! ",b.score<0&&"Your note sounds a bit negative. ",b.score===0&&"Your note sounds neutral. ",L.length>0&&u.jsxs("div",{className:"keywords",children:[u.jsx("strong",{children:"Keywords:"})," ",L.join(", ")]})]}),u.jsxs("div",{className:"water-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Water Intake (",S.length," entries)"]}),S.length===0?u.jsx("p",{className:"no-intake",children:"No water logged for today. Stay hydrated! "}):u.jsx("ul",{className:"log-list",children:S.map(X=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"water-info",children:[u.jsxs("span",{className:"water-amount",children:[X.amount," oz"]}),u.jsx("span",{className:"water-type",children:X.type}),X.notes&&u.jsx("span",{className:"water-notes",children:X.notes})]}),u.jsxs("div",{className:"water-actions",children:[u.jsx("button",{onClick:()=>I(X),className:"edit-button",disabled:m,children:"Edit"}),u.jsx("button",{onClick:()=>w(X.id),className:"delete-button",disabled:m,children:"Delete"})]})]},X.id))})]})]})}function I3e(){const{user:t,isPremium:e}=bn(),[n,s]=P.useState({workout:{current:0,goal:210},water:{current:0,goal:448},meditation:{current:0,goal:105}}),[r,i]=P.useState([]),[o,a]=P.useState(0),[c,d]=P.useState(!0),[f,m]=P.useState(30),[g,T]=P.useState(64),[k,A]=P.useState(15),[C,x]=P.useState(0),[v,b]=P.useState(!1),[R,L]=P.useState(!1),[M,E]=P.useState(!1),[y,I]=P.useState(null),w=()=>{const ye=new Date().getDay();return ye===0?0:7-ye};P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{d(!0);const Re=(await Ee.getUserProfile(t.uid)).user;m(Re.exerciseGoalMinutes||30),T(Re.waterGoalOz||64),A(Re.meditationGoalMinutes||15);const[Ye,xt,is]=await Promise.all([hs.getWorkoutSummary(t.uid,7),Wt.getWaterSummary(t.uid,7),fs.getMeditationSummary(t.uid,7)]);s({workout:{current:Ye.totalMinutes||0,goal:(Re.exerciseGoalMinutes||30)*7},water:{current:xt.totalOz||0,goal:(Re.waterGoalOz||64)*7},meditation:{current:is.totalMinutes||0,goal:(Re.meditationGoalMinutes||15)*7}}),setTimeout(()=>me(),100)}catch(ye){console.error("Error fetching weekly data:",ye)}finally{d(!1)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const ye=await Ee.getPoints(t.uid);x(ye)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const ye=await Ee.isChallengeCompleted(t.uid,"weekly_meditation_3","weekly");b(ye)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const ye=await Ee.isChallengeCompleted(t.uid,"diamond_week","weekly"),Re=await Ee.isChallengeCompleted(t.uid,"perfect_balance","weekly");L(ye),E(Re)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const ye=await Ee.getUserProfile(t.uid);I(ye.user.premiumSoundscapeUntil?new Date(ye.user.premiumSoundscapeUntil):null)}})()},[t]);const N=new Date,D=C>=150&&(!y||y<N),S=y&&y>N,le=async()=>{if(!(t!=null&&t.uid)||!D)return;await Ee.deductPoints(t.uid,150);const ne=new Date;ne.setDate(ne.getDate()+7),await Ee.updateUserProfile(t.uid,{premiumSoundscapeUntil:ne}),I(ne);const ye=await Ee.getPoints(t.uid);x(ye),alert("You unlocked Premium Soundscape for 1 week!")},X=n.meditation.current/(k||15),q=X>=3,ae=n.workout.current/n.workout.goal>=1.25&&n.water.current/n.water.goal>=1.25&&n.meditation.current/n.meditation.goal>=1.25,$=n.workout.current/n.workout.goal>=1&&n.water.current/n.water.goal>=1&&n.meditation.current/n.meditation.goal>=1,ee=async()=>{if(!(t!=null&&t.uid)||v||!q)return;await Ee.addPoints(t.uid,50),await Ee.completeChallenge(t.uid,"weekly_meditation_3","weekly"),b(!0);const ne=await Ee.getPoints(t.uid);x(ne),alert("You claimed 50 points for the Weekly Meditation Challenge!")},ie=async()=>{if(!(t!=null&&t.uid)||R||!ae)return;await Ee.addPoints(t.uid,200),await Ee.completeChallenge(t.uid,"diamond_week","weekly"),L(!0);const ne=await Ee.getPoints(t.uid);x(ne),alert("You claimed 200 points for Diamond Week Challenge!")},ge=async()=>{if(!(t!=null&&t.uid)||M||!$)return;await Ee.addPoints(t.uid,150),await Ee.completeChallenge(t.uid,"perfect_balance","weekly"),E(!0);const ne=await Ee.getPoints(t.uid);x(ne),alert("You claimed 150 points for Perfect Balance Challenge!")},me=()=>{const ne=[];Object.entries(n).forEach(([ye,Re])=>{const Ye=Re.current/Re.goal*100;Ye>=125?ne.push({type:ye,level:"diamond",percentage:Ye}):Ye>=100?ne.push({type:ye,level:"gold",percentage:Ye}):Ye>=75?ne.push({type:ye,level:"silver",percentage:Ye}):Ye>=50&&ne.push({type:ye,level:"bronze",percentage:Ye})}),i(ne)},ke=ne=>{switch(ne){case"diamond":return"";case"gold":return"";case"silver":return"";case"bronze":return"";default:return""}},it=ne=>ne>=100?"var(--sage-500)":ne>=75?"var(--mint)":ne>=50?"#FFD700":"var(--sage-300)",Jt=ne=>ne>=100,Zt=async()=>{if(t!=null&&t.uid)try{d(!0);const ne=f*7,ye=g*7,Re=k*7,Ye=await Ee.updateUserProfile(t.uid,{exerciseGoalMinutes:f,meditationGoalMinutes:k,waterGoalOz:g});s(xt=>({...xt,workout:{...xt.workout,goal:ne},water:{...xt.water,goal:ye},meditation:{...xt.meditation,goal:Re}})),setTimeout(()=>me(),100),console.log(" Goals updated successfully")}catch(ne){console.error(" Error updating goals:",ne)}finally{d(!1)}};if(c)return u.jsx("div",{className:"goals-loading",children:"Loading weekly goals..."});const It=w();return u.jsxs("div",{className:"goals-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:""})," ",C," Points"]}),u.jsxs("div",{className:"weekly-header",children:[u.jsx("h1",{className:"goals-title",children:"Weekly Goals"}),u.jsx("p",{className:"goals-subtitle",children:"Track your progress and earn rewards"}),u.jsxs("div",{className:"week-info",children:[u.jsx("span",{className:"week-label",children:"Current Week"}),u.jsx("span",{className:"days-remaining",children:It===0?"Last day!":`${It} days remaining`})]})]}),u.jsx("div",{className:"weekly-progress",children:Object.entries(n).map(([ne,ye])=>{const Re=Math.min(ye.current/ye.goal*100,100),Ye=Jt(Re),xt=2*Math.PI*45,is=xt,$r=xt-Re/100*xt;return u.jsxs("div",{className:`weekly-ring ${Ye?"completed":""}`,children:[u.jsxs("div",{className:"ring-container",children:[u.jsxs("svg",{className:"progress-ring",width:"120",height:"120",children:[u.jsx("circle",{className:"ring-background",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:"var(--sage-100)",strokeWidth:"8"}),u.jsx("circle",{className:"ring-progress",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:it(Re),strokeWidth:"8",strokeLinecap:"round",strokeDasharray:is,strokeDashoffset:$r,transform:"rotate(-90 60 60)"})]}),u.jsxs("div",{className:"ring-content",children:[u.jsx("span",{className:"ring-value",children:ye.current}),u.jsxs("span",{className:"ring-goal",children:["/ ",ye.goal]}),u.jsx("span",{className:"ring-label",children:ne})]})]}),u.jsxs("div",{className:"ring-percentage",children:[Math.round(Re),"%"]})]},ne)})}),u.jsxs("div",{className:"achievement-gallery",children:[u.jsx("h2",{className:"section-title",children:"This Week's Achievements"}),r.length===0?u.jsxs("div",{className:"no-achievements",children:[u.jsx("span",{className:"no-achievement-icon",children:""}),u.jsx("p",{children:"Keep going! Your first achievement is waiting."})]}):u.jsx("div",{className:"achievements-grid",children:r.map((ne,ye)=>u.jsxs("div",{className:`achievement-card ${ne.level}`,children:[u.jsx("div",{className:"achievement-icon",children:ke(ne.level)}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:ne.level.toUpperCase()}),u.jsx("p",{children:ne.type.toUpperCase()}),u.jsxs("span",{className:"achievement-percentage",children:[Math.round(ne.percentage),"%"]})]}),!e&&ne.level==="diamond"&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"premium-badge",children:"PRO"})})]},ye))})]}),u.jsxs("div",{className:"streak-section",children:[u.jsx("h2",{className:"section-title",children:"Weekly Streak"}),u.jsxs("div",{className:"streak-card",children:[u.jsx("div",{className:"streak-icon",children:""}),u.jsxs("div",{className:"streak-info",children:[u.jsx("span",{className:"streak-number",children:o}),u.jsx("span",{className:"streak-label",children:"Week Streak"})]}),u.jsxs("div",{className:"streak-next",children:[u.jsx("span",{children:"Next reward at 4 weeks"}),!e&&u.jsx("span",{className:"premium-hint",children:"PRO"})]})]})]}),u.jsxs("div",{className:"reward-marketplace",children:[u.jsx("h2",{className:"section-title",children:"Reward Marketplace"}),e?u.jsxs("div",{className:"rewards-grid",children:[u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:""}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Premium Soundscape"}),u.jsx("p",{children:"Unlock for 1 week"}),u.jsx("span",{className:"reward-cost",children:"150 points"}),u.jsx("button",{className:"claim-btn",onClick:le,disabled:!D,children:S?"Active":"Redeem"}),S&&u.jsxs("div",{className:"reward-status",children:["Active until ",y==null?void 0:y.toLocaleDateString()]})]})]}),u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:""}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Custom Badge"}),u.jsx("p",{children:"Design your own"}),u.jsx("span",{className:"reward-cost",children:"100 points"})]})]})]}):u.jsxs("div",{className:"premium-cta-card",children:[u.jsxs("div",{className:"cta-header",children:[u.jsx("h3",{children:"Unlock Premium Rewards"}),u.jsx("span",{className:"cta-price",children:"$4.99/month"})]}),u.jsxs("div",{className:"premium-features",children:[u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:""}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:""}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:""}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:""}),u.jsx("span",{children:"Challenge competitions"})]})]}),u.jsx("button",{className:"upgrade-button",onClick:Xc,children:"Upgrade with Stripe"})]})]}),u.jsxs("div",{className:"weekly-challenges",children:[u.jsx("h2",{className:"section-title",children:"Weekly Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Mindful Monday"}),u.jsx("span",{className:"challenge-reward",children:"+50 points"}),u.jsx("button",{className:"claim-btn",onClick:ee,disabled:!q||v,children:v?"Claimed":"Claim"})]}),u.jsx("p",{className:"challenge-description",children:"Complete 3 meditation sessions this week"}),u.jsxs("div",{className:"challenge-progress",children:[u.jsx("div",{className:"challenge-bar",children:u.jsx("div",{className:"challenge-fill",style:{width:`${Math.min(X/3*100,100)}%`}})}),u.jsxs("span",{className:"challenge-status",children:[Math.floor(X),"/3 completed"]})]}),!e&&u.jsx("div",{className:"challenge-premium",children:u.jsx("span",{children:"Join Premium for exclusive challenges"})})]})]}),u.jsxs("div",{className:"custom-goals-section",children:[u.jsx("h2",{className:"section-title",children:"Goal Customization"}),u.jsxs("div",{className:"custom-goals-form",children:[u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Workout Goal: ",f," minutes"]}),u.jsx("input",{type:"range",min:"15",max:"120",value:f,onChange:ne=>m(parseInt(ne.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",f*7," minutes"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Water Goal: ",g," oz"]}),u.jsx("input",{type:"range",min:"32",max:"128",value:g,onChange:ne=>T(parseInt(ne.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",g*7," oz"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Meditation Goal: ",k," minutes"]}),u.jsx("input",{type:"range",min:"5",max:"60",value:k,onChange:ne=>A(parseInt(ne.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",k*7," minutes"]})]}),u.jsx("button",{className:"save-goals-btn",onClick:Zt,disabled:c,children:c?"Saving...":"Save Custom Goals"})]})]}),u.jsxs("div",{className:"premium-challenges",children:[u.jsx("h2",{className:"section-title",children:"Exclusive Challenges"}),u.jsx(Ax,{feature:"premium challenges",className:"feature-tease",children:u.jsxs("div",{className:"challenge-preview",children:[u.jsxs("div",{className:"challenge-card premium",children:[u.jsx("div",{className:"challenge-icon",children:""}),u.jsxs("div",{className:"challenge-content",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Diamond Week Challenge"}),u.jsx("span",{className:"challenge-reward",children:"+200 points"}),u.jsx("button",{className:"claim-btn",onClick:ie,disabled:!ae||R,children:R?"Claimed":"Claim"})]}),u.jsx("p",{children:"Complete 125% of all goals for 7 consecutive days"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:" 1,247 participants this week"})})]})]}),u.jsxs("div",{className:"challenge-card premium",children:[u.jsx("div",{className:"challenge-icon",children:""}),u.jsxs("div",{className:"challenge-content",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Perfect Balance"}),u.jsx("span",{className:"challenge-reward",children:"+150 points"}),u.jsx("button",{className:"claim-btn",onClick:ge,disabled:!$||M,children:M?"Claimed":"Claim"})]}),u.jsx("p",{children:"Hit exactly 100% on all three goals in one day"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:" 892 members completed"})})]})]})]})})]})]})}function x3e(){const{user:t,loading:e,isPremium:n,userSubscription:s,trialDaysRemaining:r,upgradeToPremium:i,cancelSubscription:o}=bn(),[a,c]=P.useState(null),[d,f]=P.useState({username:"",email:"",firstName:"",lastName:"",exerciseGoalMinutes:"",waterGoalOz:"",meditationGoalMinutes:""}),[m,g]=P.useState(!0),[T,k]=P.useState(!1),[A,C]=P.useState(""),[x,v]=P.useState("");P.useEffect(()=>{const M=async()=>{if(t!=null&&t.uid)try{g(!0);const E=await Ee.getUserProfile(t.uid);c(E.user)}catch(E){console.error("Error fetching profile:",E),v("Failed to load profile data")}finally{g(!1)}};t!=null&&t.uid&&M()},[t]),P.useEffect(()=>{a&&f({username:a.username||"",email:a.email||"",firstName:a.firstName||"",lastName:a.lastName||"",exerciseGoalMinutes:a.exerciseGoalMinutes||"",waterGoalOz:a.waterGoalOz||"",meditationGoalMinutes:a.meditationGoalMinutes||""})},[a]);const b=M=>{const{name:E,value:y}=M.target;f(I=>({...I,[E]:y}))},R=async M=>{if(M.preventDefault(),!!(t!=null&&t.uid)){k(!0),v(""),C("");try{console.log("Submitting profile update:",d);const E={...d,exerciseGoalMinutes:parseInt(d.exerciseGoalMinutes)||30,waterGoalOz:parseInt(d.waterGoalOz)||64,meditationGoalMinutes:parseInt(d.meditationGoalMinutes)||10};await Ee.updateUserProfile(t.uid,E),c({...a,...E}),C("Profile updated successfully!"),setTimeout(()=>C(""),3e3)}catch(E){console.error("Error updating profile:",E),v("Failed to update profile. Please try again.")}finally{k(!1)}}},L=()=>{a&&f({username:a.username||"",email:a.email||"",firstName:a.firstName||"",lastName:a.lastName||"",exerciseGoalMinutes:a.exerciseGoalMinutes||"",waterGoalOz:a.waterGoalOz||"",meditationGoalMinutes:a.meditationGoalMinutes||""}),v(""),C("")};return e||m?u.jsx("div",{className:"profile-loading",children:"Loading profile..."}):t?u.jsx("div",{className:"profile-page",children:u.jsxs("div",{className:"profile-card",children:[u.jsxs("div",{className:"profile-header",children:[u.jsx("h1",{className:"profile-title",children:"Personal Information"}),u.jsx("p",{className:"profile-subtitle",children:"Update your profile and wellness goals"})]}),A&&u.jsx("div",{className:"success-message",children:A}),x&&u.jsx("div",{className:"error-message",children:x}),a&&u.jsxs("form",{onSubmit:R,className:"profile-form",children:[u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Account Information"}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Username",u.jsx("input",{type:"text",name:"username",value:d.username,onChange:b,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Email",u.jsx("input",{type:"email",name:"email",value:d.email,onChange:b,className:"form-input",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["First Name",u.jsx("input",{type:"text",name:"firstName",value:d.firstName,onChange:b,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Last Name",u.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:b,className:"form-input",required:!0})]})})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Daily Wellness Goals"}),u.jsx("p",{className:"section-description",children:"Set your daily targets to track your progress effectively"}),u.jsxs("div",{className:"goals-grid",children:[u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:""}),"Exercise Goal (Minutes)",u.jsx("input",{type:"number",name:"exerciseGoalMinutes",value:d.exerciseGoalMinutes,onChange:b,className:"form-input",min:"1",max:"300",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 30-60 minutes"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:""}),"Water Goal (Oz)",u.jsx("input",{type:"number",name:"waterGoalOz",value:d.waterGoalOz,onChange:b,className:"form-input",min:"1",max:"200",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 64-100 oz"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:""}),"Meditation Goal (Minutes)",u.jsx("input",{type:"number",name:"meditationGoalMinutes",value:d.meditationGoalMinutes,onChange:b,className:"form-input",min:"1",max:"120",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 5-20 minutes"})]})})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"reset-button",onClick:L,disabled:T,children:"Reset Changes"}),u.jsx("button",{type:"submit",className:"save-button",disabled:T,children:T?"Saving...":"Save Profile"})]})]}),u.jsxs("div",{className:"profile-stats",children:[u.jsx("h3",{className:"section-title",children:"Account Summary"}),u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Member Since"}),u.jsx("span",{className:"stat-value",children:a!=null&&a.createdAt?new Date(a.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Profile Updated"}),u.jsx("span",{className:"stat-value",children:a!=null&&a.updatedAt?new Date(a.updatedAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Goals Set"}),u.jsxs("span",{className:"stat-value",children:[[d.exerciseGoalMinutes,d.waterGoalOz,d.meditationGoalMinutes].filter(M=>M&&M>0).length," / 3"]})]})]})]}),u.jsxs("div",{className:"subscription-section",children:[u.jsx("h2",{children:"Your Plan"}),s==="trial"&&u.jsx("div",{className:"trial-status",children:u.jsxs("div",{className:"status-card trial",children:[u.jsx("h3",{children:"Premium Trial"}),u.jsx("p",{children:"You're experiencing the full premium experience!"}),u.jsxs("div",{className:"trial-countdown",children:[u.jsx("span",{className:"days-remaining",children:r}),u.jsx("span",{className:"days-label",children:"days remaining"})]}),u.jsxs("div",{className:"trial-benefits",children:[u.jsx("p",{children:"Currently enjoying:"}),u.jsxs("ul",{children:[u.jsx("li",{children:" Custom goal setting"}),u.jsx("li",{children:" Diamond achievements"}),u.jsx("li",{children:" Premium soundscapes"}),u.jsx("li",{children:" Advanced analytics"})]})]}),u.jsx("button",{onClick:Xc,className:"keep-premium-btn",children:"Keep Premium Access - $4.99/month"})]})}),s==="premium"&&u.jsx("div",{className:"premium-status",children:u.jsxs("div",{className:"status-card premium",children:[u.jsx("h3",{children:" Premium Member"}),u.jsx("p",{children:"You have access to all premium features!"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Your Premium Benefits:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:o,className:"cancel-btn",children:"Cancel Subscription"})]})}),s==="free"&&u.jsx("div",{className:"free-status",children:u.jsxs("div",{className:"status-card free",children:[u.jsx("h3",{children:" Free Plan"}),u.jsx("p",{children:"Upgrade to unlock premium features and enhance your wellness journey"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Unlock with Premium:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:""}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:Xc,className:"upgrade-btn",children:"Upgrade to Premium - $4.99/month"})]})})]})]})}):u.jsx("div",{className:"profile-error",children:"Please log in to view your profile."})}function b3e({children:t}){const{user:e,loading:n}=bn();return console.log(" ProtectedRoute - loading:",n,"user:",!!e),n?u.jsx("div",{className:"loading",children:"Loading..."}):e?(console.log(" Authenticated, rendering protected content"),t):(console.log(" Not authenticated, redirecting to welcome"),u.jsx(ld,{to:"/welcome",replace:!0}))}const k3e="modulepreload",S3e=function(t){return"/"+t},A2={},A3e=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=S3e(c),c in A2)return;A2[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":k3e,d||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((g,T)=>{m.addEventListener("load",g),m.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function P3e(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:r,onRegisteredSW:i,onRegisterError:o}=t;let a,c;const d=async(m=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(a=await A3e(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/sw.js",{scope:"/",type:"classic"})).catch(m=>{o==null||o(m)}),!a)return;a.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),a.addEventListener("installed",m=>{m.isUpdate||s==null||s()}),a.register({immediate:e}).then(m=>{i?i("/sw.js",m):r==null||r(m)}).catch(m=>{o==null||o(m)})}}return c=f(),d}const N3e=()=>{const[t,e]=P.useState(!1),[n,s]=P.useState(!1);P.useEffect(()=>{P3e({onNeedRefresh(){e(!0)},onOfflineReady(){s(!0)},onRegistered(o){console.log("SW registered: ",o)},onRegisterError(o){console.log("SW registration error",o)}})},[]);const r=()=>{s(!1),e(!1)},i=()=>{updateSW(),r()};return!t&&!n?null:u.jsxs("div",{className:"pwa-update-banner",children:[u.jsxs("div",{className:"pwa-update-content",children:[n&&u.jsxs("div",{className:"pwa-message",children:[u.jsx("span",{children:"App ready to work offline"}),u.jsx("button",{onClick:r,className:"pwa-close-btn",children:"Close"})]}),t&&u.jsxs("div",{className:"pwa-message",children:[u.jsx("span",{children:"New content available, click on reload button to update"}),u.jsx("button",{onClick:i,className:"pwa-update-btn",children:"Reload"}),u.jsx("button",{onClick:r,className:"pwa-close-btn",children:"Close"})]})]}),u.jsx("style",{jsx:!0,children:`
        .pwa-update-banner {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: #6c5ce7;
          color: white;
          padding: 1rem;
          z-index: 9999;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .pwa-update-content {
          max-width: 600px;
          margin: 0 auto;
        }
        
        .pwa-message {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 1rem;
        }
        
        .pwa-update-btn, .pwa-close-btn {
          background: rgba(255, 255, 255, 0.2);
          border: 1px solid rgba(255, 255, 255, 0.3);
          color: white;
          padding: 0.5rem 1rem;
          border-radius: 6px;
          cursor: pointer;
          font-size: 0.875rem;
          transition: background-color 0.2s;
        }
        
        .pwa-update-btn:hover, .pwa-close-btn:hover {
          background: rgba(255, 255, 255, 0.3);
        }
        
        @media (max-width: 768px) {
          .pwa-message {
            flex-direction: column;
            gap: 0.5rem;
          }
          
          .pwa-update-btn, .pwa-close-btn {
            width: 100%;
          }
        }
      `})]})},C3e=()=>{const[t,e]=P.useState(!1),[n,s]=P.useState(null),[r,i]=P.useState("unknown"),[o,a]=P.useState(!1);P.useEffect(()=>{const g=window.matchMedia("(display-mode: standalone)").matches,T=localStorage.getItem("clarity-pwa-dismissed")==="true";if(g||T)return;const k=/iPad|iPhone|iPod/.test(navigator.userAgent),A=/Android/.test(navigator.userAgent);i(k?"ios":A?"android":"desktop");const C=v=>{v.preventDefault(),o||(s(v),e(!0),a(!0))},x=()=>{e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",C),window.addEventListener("appinstalled",x),k&&!o){const v=setTimeout(()=>{o||(e(!0),a(!0))},3e3);return()=>clearTimeout(v)}return()=>{window.removeEventListener("beforeinstallprompt",C),window.removeEventListener("appinstalled",x)}},[o]);const c=async()=>{if(n){n.prompt();const{outcome:g}=await n.userChoice;g==="accepted"&&(e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true"))}},d=()=>{e(!1),localStorage.setItem("clarity-pwa-dismissed","true")};if(!t)return null;const m=(()=>{switch(r){case"ios":return{title:"Add Clarity to Home Screen",steps:["Tap the Share button () at the bottom",'Scroll down and tap "Add to Home Screen"','Tap "Add" to install'],icon:""};case"android":return{title:"Install Clarity App",steps:['Tap "Install" below to add to home screen','Or use the menu ()  "Add to Home Screen"'],icon:""};case"desktop":return{title:"Install Clarity App",steps:["Click the install icon () in your browser address bar",'Or use the menu  "Install Clarity"'],icon:""};default:return{title:"Install Clarity",steps:["Look for an install option in your browser menu","Or add this page to your bookmarks"],icon:""}}})();return u.jsxs("div",{className:"install-prompt-overlay",children:[u.jsxs("div",{className:"install-prompt",children:[u.jsx("button",{className:"install-close",onClick:d,children:""}),u.jsxs("div",{className:"install-content",children:[u.jsx("div",{className:"install-icon",children:m.icon}),u.jsx("h3",{children:m.title}),u.jsx("div",{className:"install-steps",children:m.steps.map((g,T)=>u.jsxs("div",{className:"install-step",children:[u.jsx("span",{className:"step-number",children:T+1}),u.jsx("span",{className:"step-text",children:g})]},T))}),r==="android"&&n&&u.jsx("button",{className:"install-button",onClick:c,children:"Install Clarity"}),u.jsx("div",{className:"install-benefits",children:u.jsx("p",{children:" Works offline   Faster loading   App-like experience"})})]})]}),u.jsx("style",{jsx:!0,children:`
        .install-prompt-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          padding: 20px;
        }

        .install-prompt {
          background: white;
          border-radius: 16px;
          padding: 24px;
          max-width: 400px;
          width: 100%;
          position: relative;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .install-close {
          position: absolute;
          top: 12px;
          right: 12px;
          background: none;
          border: none;
          font-size: 20px;
          cursor: pointer;
          color: #666;
          padding: 4px;
        }

        .install-content {
          text-align: center;
        }

        .install-icon {
          font-size: 48px;
          margin-bottom: 16px;
        }

        .install-content h3 {
          color: #6b8069;
          margin-bottom: 20px;
          font-size: 20px;
        }

        .install-steps {
          text-align: left;
          margin-bottom: 20px;
        }

        .install-step {
          display: flex;
          align-items: center;
          margin-bottom: 12px;
          padding: 8px 0;
        }

        .step-number {
          background: #6b8069;
          color: white;
          width: 24px;
          height: 24px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 12px;
          font-weight: bold;
          margin-right: 12px;
          flex-shrink: 0;
        }

        .step-text {
          color: #333;
          font-size: 14px;
          line-height: 1.4;
        }

        .install-button {
          background: #6b8069;
          color: white;
          border: none;
          border-radius: 12px;
          padding: 12px 24px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          margin-bottom: 16px;
          transition: background-color 0.2s;
        }

        .install-button:hover {
          background: #556b54;
        }

        .install-benefits {
          background: #f6f7f6;
          border-radius: 8px;
          padding: 12px;
        }

        .install-benefits p {
          color: #6b8069;
          font-size: 12px;
          margin: 0;
        }

        @media (max-width: 480px) {
          .install-prompt {
            margin: 20px;
            padding: 20px;
          }
        }
      `})]})},R3e=()=>{const[t,e]=P.useState(!1),[n,s]=P.useState(null),[r,i]=P.useState(!1),[o,a]=P.useState(!1);P.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const d=localStorage.getItem("clarity-pwa-dismissed")==="true",f=localStorage.getItem("clarity-pwa-installed")==="true";if(d||f)return;const m=k=>{k.preventDefault(),o||(s(k),e(!0),a(!0))},g=()=>{i(!0),e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",m),window.addEventListener("appinstalled",g),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!r&&!o){const k=setTimeout(()=>{o||(e(!0),a(!0))},5e3);return()=>clearTimeout(k)}return()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",g)}},[r,o]);const c=async()=>{if(n){n.prompt();const{outcome:d}=await n.userChoice;d==="accepted"&&(i(!0),e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true"))}else alert('To install: Use your browser menu  "Add to Home Screen" or "Install App"')};return!t||r?null:u.jsxs("div",{className:"floating-install-button",onClick:c,children:[u.jsx("div",{className:"install-icon",children:""}),u.jsx("span",{className:"install-text",children:"Install"}),u.jsx("style",{jsx:!0,children:`
        .floating-install-button {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background: #6b8069;
          color: white;
          border-radius: 50px;
          padding: 12px 20px;
          display: flex;
          align-items: center;
          gap: 8px;
          cursor: pointer;
          box-shadow: 0 4px 12px rgba(107, 128, 105, 0.3);
          z-index: 1000;
          transition: all 0.2s ease;
          font-weight: 600;
          font-size: 14px;
        }

        .floating-install-button:hover {
          background: #556b54;
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(107, 128, 105, 0.4);
        }

        .floating-install-button:active {
          transform: translateY(0);
        }

        .install-icon {
          font-size: 18px;
        }

        .install-text {
          white-space: nowrap;
        }

        @media (max-width: 480px) {
          .floating-install-button {
            bottom: 16px;
            right: 16px;
            padding: 10px 16px;
            font-size: 13px;
          }
        }
      `})]})},Mf={worry_worm:{name:"Worry Worm",icon:"",color:"#8B4513",size:"small",technique:"breathing",description:"Those nagging worries that won't go away",tamedMessage:"Worry Worm is now peaceful! "},panic_bear:{name:"Panic Bear",icon:"",color:"#DC143C",size:"large",technique:"progressive_relaxation",description:"Big scary feelings that make your heart race",tamedMessage:"Panic Bear is now your gentle guardian! "},overthink_octopus:{name:"Overthink Octopus",icon:"",color:"#4B0082",size:"medium",technique:"mindfulness",description:"Eight arms of spiraling thoughts",tamedMessage:"Overthink Octopus is now zen and focused! "},doom_dragon:{name:"Doom Dragon",icon:"",color:"#8B0000",size:"boss",technique:"breathing",description:"The big bad of catastrophic thinking",tamedMessage:"Doom Dragon is now your wise protector! "}},La={breathing:{name:"Deep Breathing",icon:"",instructions:["Breathe in for 4","Hold for 4","Breathe out for 6","Repeat"],duration:16e3,color:"#4CAF50"},progressive_relaxation:{name:"Progressive Relaxation",icon:"",instructions:["Tense your shoulders","Hold for 3 seconds","Release and relax","Feel the tension melt away"],duration:12e3,color:"#2196F3"},mindfulness:{name:"Mindfulness Anchor",icon:"",instructions:["Notice 3 things you can see","Notice 2 things you can hear","Notice 1 thing you can feel","You are present"],duration:15e3,color:"#FF9800"}},lu={TAMED_MONSTERS:"anxiety_game_tamed_monsters",PLAYER_STATS:"anxiety_game_player_stats"};function D3e({user:t,onUpdateStats:e}){var L,M,E;const[n,s]=P.useState("menu"),[r,i]=P.useState(null),[o,a]=P.useState([]),[c,d]=P.useState({level:1,experience:0,calmness:100,monstersDefeated:0,sanctuaryPoints:0}),[f,m]=P.useState(0),[g,T]=P.useState(0),[k,A]=P.useState(!1),C=P.useRef(null);P.useEffect(()=>{try{const y=localStorage.getItem(lu.TAMED_MONSTERS);if(y){const N=JSON.parse(y).map(D=>({...Mf[D],id:D}));a(N)}const I=localStorage.getItem(lu.PLAYER_STATS);if(I){const w=JSON.parse(I);d(w)}}catch(y){console.error("Error loading game data from localStorage:",y)}},[]);const x=()=>{const y=Object.keys(Mf),I=y[Math.floor(Math.random()*y.length)],w={...Mf[I],id:I};i(w),s("encounter");const N=w.size==="boss"?30:w.size==="large"?20:10;d(D=>({...D,calmness:Math.max(0,D.calmness-N)}))},v=()=>{const y=La[r.technique]||La.breathing;s("technique"),m(0),T(0),b(y)},b=y=>{const I=y.duration/y.instructions.length;let w=0;const N=setInterval(()=>{T(w),m((w+1)/y.instructions.length*100),w===y.instructions.length-1?(clearInterval(N),setTimeout(()=>{R()},I)):w++},I);C.current=N},R=()=>{const y=r.size==="boss"?100:r.size==="large"?50:25,I=r.size==="boss"?20:10;a(w=>[...w,r]),d(w=>({...w,experience:w.experience+y,calmness:Math.min(100,w.calmness+30),monstersDefeated:w.monstersDefeated+1,sanctuaryPoints:w.sanctuaryPoints+I,level:Math.floor((w.experience+y)/100)+1})),s("victory"),e&&e({anxietyGameScore:c.monstersDefeated+1,mindfulnessPoints:I})};return P.useEffect(()=>{if(n==="technique"&&(r==null?void 0:r.technique)==="breathing"){const y=setInterval(()=>{A(I=>!I)},2e3);return()=>clearInterval(y)}},[n,r]),P.useEffect(()=>()=>{C.current&&clearInterval(C.current)},[]),P.useEffect(()=>{try{const y=o.map(I=>I.id);localStorage.setItem(lu.TAMED_MONSTERS,JSON.stringify(y))}catch(y){console.error("Error saving tamed monsters to localStorage:",y)}},[o]),P.useEffect(()=>{try{localStorage.setItem(lu.PLAYER_STATS,JSON.stringify(c))}catch(y){console.error("Error saving player stats to localStorage:",y)}},[c]),u.jsxs("div",{className:"monster-tamer-game",children:[n==="menu"&&u.jsxs("div",{className:"game-menu",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h2",{children:" Anxiety Monster Tamer"}),u.jsx("p",{children:"Use mindfulness to tame your anxiety monsters!"})]}),u.jsxs("div",{className:"player-stats",children:[u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Level ",c.level]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Calmness: ",c.calmness,"%"]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Tamed: ",c.monstersDefeated]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:""}),u.jsxs("span",{children:["Sanctuary: ",c.sanctuaryPoints]})]})]}),u.jsx("button",{className:"encounter-btn",onClick:x,disabled:c.calmness<10,children:c.calmness<10?"Rest First ":"Encounter Monster "}),c.calmness<10&&u.jsx("button",{className:"rest-btn",onClick:()=>d(y=>({...y,calmness:Math.min(100,y.calmness+50)})),style:{background:"linear-gradient(135deg, #FF9800 0%, #FF5722 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"20px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"12px"},children:"Rest & Recover  (+50 Calmness)"}),u.jsxs("div",{className:"tamed-collection",children:[u.jsx("h3",{children:"Your Tamed Monsters:"}),u.jsx("div",{className:"tamed-grid",children:o.length===0?u.jsx("p",{className:"no-tamed",children:"No monsters tamed yet. Start your journey!"}):o.map((y,I)=>u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon",children:y.icon}),u.jsx("span",{className:"monster-name",children:y.name})]},I))})]})]}),n==="encounter"&&r&&u.jsxs("div",{className:"monster-encounter",children:[u.jsxs("div",{className:"encounter-scene",children:[u.jsxs("div",{className:`monster ${r.size} ${r.id}`,children:[u.jsx("div",{className:"monster-icon",children:r.icon}),u.jsx("div",{className:"monster-shake"})]}),u.jsxs("div",{className:"encounter-text",children:[u.jsxs("h3",{children:["A wild ",r.name," appears!"]}),u.jsx("p",{children:r.description}),u.jsx("p",{className:"calmness-drop",children:"Your calmness dropped! "})]})]}),u.jsxs("div",{className:"taming-options",children:[u.jsxs("button",{className:"tame-btn",onClick:v,children:[u.jsx("span",{className:"technique-icon",children:((L=La[r.technique])==null?void 0:L.icon)||""}),"Use ",((M=La[r.technique])==null?void 0:M.name)||"Deep Breathing"]}),u.jsx("button",{className:"run-btn",onClick:()=>s("menu"),children:"Run Away "})]})]}),n==="technique"&&r&&u.jsxs("div",{className:"taming-technique",children:[u.jsxs("div",{className:"technique-header",children:[u.jsxs("h3",{children:["Taming ",r.name]}),u.jsx("div",{className:"anxiety-progress",children:u.jsx("div",{className:"anxiety-progress-fill",style:{width:`${f}%`}})})]}),u.jsx("div",{className:`technique-visual ${k?"breathing":""}`,children:u.jsxs("div",{className:"monster-calming",children:[u.jsx("span",{className:"monster-icon",children:r.icon}),u.jsx("div",{className:"calming-aura"})]})}),u.jsx("div",{className:"technique-instructions",children:(E=La[r.technique])==null?void 0:E.instructions.map((y,I)=>u.jsx("div",{className:`instruction ${I===g?"active":I<g?"completed":""}`,children:y},I))})]}),n==="victory"&&r&&u.jsxs("div",{className:"victory-screen",children:[u.jsx("div",{className:"victory-animation",children:u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon happy",children:r.icon}),u.jsx("div",{className:"sparkles",children:""})]})}),u.jsxs("div",{className:"victory-text",children:[u.jsx("h3",{children:" Monster Tamed!"}),u.jsx("p",{children:r.tamedMessage}),u.jsxs("div",{className:"rewards",children:[u.jsx("div",{className:"reward",children:"+30 Calmness "}),u.jsxs("div",{className:"reward",children:["+",r.size==="boss"?100:r.size==="large"?50:25," Experience "]}),u.jsxs("div",{className:"reward",children:["+",r.size==="boss"?20:10," Sanctuary Points "]})]})]}),u.jsxs("div",{className:"victory-actions",children:[u.jsx("button",{className:"continue-btn",onClick:()=>s("menu"),children:"Continue Journey "}),u.jsx("button",{className:"sanctuary-btn",onClick:()=>s("sanctuary"),children:"Visit Sanctuary "})]})]}),n==="sanctuary"&&u.jsxs("div",{className:"sanctuary-view",children:[u.jsxs("div",{className:"sanctuary-header",children:[u.jsx("h2",{children:" Your Peaceful Sanctuary"}),u.jsx("p",{children:"A safe space built from your mindfulness journey"}),u.jsx("button",{className:"back-to-menu-btn",onClick:()=>s("menu"),children:" Back to Adventure"})]}),u.jsxs("div",{className:"sanctuary-stats",children:[u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:c.sanctuaryPoints}),u.jsx("span",{className:"stat-label",children:"Sanctuary Points"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:o.length}),u.jsx("span",{className:"stat-label",children:"Peaceful Companions"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsxs("span",{className:"stat-number",children:[c.calmness,"%"]}),u.jsx("span",{className:"stat-label",children:"Current Calmness"})]})]})]}),u.jsxs("div",{className:"sanctuary-garden",children:[u.jsx("h3",{children:" Mindfulness Garden"}),u.jsxs("div",{className:"garden-grid",children:[o.length===0?u.jsxs("div",{className:"empty-garden",children:[u.jsx("div",{className:"empty-garden-icon",children:""}),u.jsx("p",{children:"Your garden awaits your first peaceful companion..."}),u.jsx("small",{children:"Tame monsters to populate your sanctuary!"})]}):o.map((y,I)=>u.jsx("div",{className:"garden-companion",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"companion-icon",children:y.icon}),u.jsx("div",{className:"companion-aura"}),u.jsx("div",{className:"companion-name",children:y.name}),u.jsx("div",{className:"companion-effect",children:"Radiating peace "})]})},I)),Array.from({length:Math.max(0,6-o.length)}).map((y,I)=>u.jsx("div",{className:"garden-companion empty",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"empty-spot",children:"?"}),u.jsx("div",{className:"spot-label",children:"Awaiting Friend"})]})},`empty-${I}`))]})]}),u.jsxs("div",{className:"sanctuary-upgrades",children:[u.jsx("h3",{children:" Sanctuary Upgrades"}),u.jsxs("div",{className:"upgrades-grid",children:[u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=50?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:""}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Rainbow Bridge"}),u.jsx("p",{children:"Connects different areas of your sanctuary"}),u.jsx("span",{className:"upgrade-cost",children:"50 Points"})]}),c.sanctuaryPoints>=50?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:""})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=100?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:""}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Meditation Fountain"}),u.jsx("p",{children:"Restores calmness over time"}),u.jsx("span",{className:"upgrade-cost",children:"100 Points"})]}),c.sanctuaryPoints>=100?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:""})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=200?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:""}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Wisdom Tower"}),u.jsx("p",{children:"Unlock advanced meditation techniques"}),u.jsx("span",{className:"upgrade-cost",children:"200 Points"})]}),c.sanctuaryPoints>=200?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:""})]})]})]}),u.jsxs("div",{className:"daily-affirmations",children:[u.jsx("h3",{children:" Daily Affirmation"}),u.jsxs("div",{className:"affirmation-card",children:[u.jsx("div",{className:"affirmation-text",children:'"I am creating a sanctuary of peace within myself, one mindful moment at a time."'}),u.jsx("div",{className:"affirmation-author",children:"- Your Inner Wisdom"})]})]}),u.jsxs("div",{className:"sanctuary-actions",children:[u.jsx("button",{className:"meditation-btn",onClick:()=>{d(y=>({...y,calmness:Math.min(100,y.calmness+10)}))},children:" Meditate in Sanctuary (+10 Calmness)"}),u.jsx("button",{className:"encounter-btn",onClick:()=>{s("menu"),setTimeout(()=>{x()},500)},children:" Ready for Another Adventure"})]})]})]})}function j3e(){const{user:t}=bn(),[e,n]=P.useState({anxietyGameScore:0,mindfulnessPoints:0,totalGamesPlayed:0,currentStreak:0}),[s,r]=P.useState(!1),[i,o]=P.useState(!1),[a,c]=P.useState(0);P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const C=await Ee.getPoints(t.uid);c(C)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const C=await Ee.isChallengeCompleted(t.uid,"monster_tamer_daily","daily"),x=await Ee.isChallengeCompleted(t.uid,"mindfulness_master_daily","daily");r(C),o(x)}})()},[t]),P.useEffect(()=>{try{const A=localStorage.getItem("clarity_game_stats");if(A){const x=JSON.parse(A);n(x),console.log(" Loaded saved game stats:",x)}const C=localStorage.getItem("anxiety_game_tamed_monsters");if(C){const v=JSON.parse(C).length;n(b=>{const R={...b,anxietyGameScore:Math.max(b.anxietyGameScore,v)};return localStorage.setItem("clarity_game_stats",JSON.stringify(R)),console.log(" Synced monster count:",v),R})}}catch(A){console.error("Error loading game stats:",A)}},[]);const d=A=>{console.log(" handleUpdateStats called with:",A),n(C=>{const x={...C,anxietyGameScore:A.anxietyGameScore||C.anxietyGameScore,mindfulnessPoints:C.mindfulnessPoints+(A.mindfulnessPoints||0),totalGamesPlayed:C.totalGamesPlayed+1};try{localStorage.setItem("clarity_game_stats",JSON.stringify(x)),console.log(" Saved game stats to localStorage:",x)}catch(v){console.error("Error saving game stats:",v)}return x}),console.log(" Game stats updated:",A)},f=()=>{try{const A=localStorage.getItem("anxiety_game_tamed_monsters"),C=localStorage.getItem("anxiety_game_player_stats");if(console.log(" Debug - Tamed monsters:",A),console.log(" Debug - Player stats:",C),A){const v=JSON.parse(A).length;n(b=>({...b,anxietyGameScore:v})),console.log(" Debug - Updated anxietyGameScore to:",v)}}catch(A){console.error("Error refreshing stats:",A)}},m=e.anxietyGameScore>=3,g=e.mindfulnessPoints>=100,T=async()=>{if(!(t!=null&&t.uid)||s||!m)return;await Ee.addPoints(t.uid,50),await Ee.completeChallenge(t.uid,"monster_tamer_daily","daily"),r(!0);const A=await Ee.getPoints(t.uid);c(A),alert("You claimed 50 points for Monster Tamer Challenge!")},k=async()=>{if(!(t!=null&&t.uid)||i||!g)return;await Ee.addPoints(t.uid,75),await Ee.completeChallenge(t.uid,"mindfulness_master_daily","daily"),o(!0);const A=await Ee.getPoints(t.uid);c(A),alert("You claimed 75 points for Mindfulness Master Challenge!")};return u.jsxs("div",{className:"games-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:""})," ",a," Points"]}),u.jsxs("div",{className:"games-header",children:[u.jsx("h1",{className:"games-title",children:"Mental Wellness Games"}),u.jsx("p",{className:"games-subtitle",children:"Play games to improve your mental health"})]}),u.jsxs("div",{className:"game-stats-section",children:[u.jsxs("div",{className:"stats-header",children:[u.jsx("h2",{className:"section-title",children:"Your Gaming Stats"}),u.jsx("button",{onClick:f,className:"refresh-stats-btn",title:"Refresh stats from game data",children:" Refresh"})]}),u.jsxs("div",{className:"game-stats-grid",children:[u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.anxietyGameScore}),u.jsx("span",{className:"stat-label",children:"Monsters Tamed"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.mindfulnessPoints}),u.jsx("span",{className:"stat-label",children:"Mindfulness Points"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.totalGamesPlayed}),u.jsx("span",{className:"stat-label",children:"Games Played"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.currentStreak}),u.jsx("span",{className:"stat-label",children:"Day Streak"})]})]})]})]}),u.jsxs("div",{className:"available-games",children:[u.jsx("h2",{className:"section-title",children:"Available Games"}),u.jsxs("div",{className:"game-section",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h3",{className:"game-title",children:" Anxiety Monster Tamer"}),u.jsx("span",{className:"game-status",children:"Active"})]}),u.jsx("p",{className:"game-description",children:"Face your anxiety monsters and tame them through mindful interaction. Each monster represents different anxiety triggers. Practice coping strategies while earning points!"}),u.jsx("div",{className:"game-container",children:u.jsx(D3e,{user:t,onUpdateStats:d})})]}),u.jsxs("div",{className:"daily-challenges",children:[u.jsx("h2",{className:"section-title",children:"Daily Gaming Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:""}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Monster Tamer Challenge"}),u.jsx("p",{children:"Tame 3 anxiety monsters today"}),u.jsx("div",{className:"challenge-progress",children:u.jsx("div",{className:"daily-challenge-bar",children:u.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.anxietyGameScore/3*100,100)}%`}})})})]}),u.jsxs("div",{className:"challenge-reward",children:[u.jsx("span",{children:"+50 points"}),u.jsx("button",{className:"claim-btn",onClick:T,disabled:!m||s,children:s?"Claimed":"Claim"})]})]}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:""}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Mindfulness Master"}),u.jsx("p",{children:"Earn 100 mindfulness points"}),u.jsx("div",{className:"challenge-progress",children:u.jsx("div",{className:"daily-challenge-bar",children:u.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.mindfulnessPoints/100*100,100)}%`}})})})]}),u.jsxs("div",{className:"challenge-reward",children:[u.jsx("span",{children:"+75 points"}),u.jsx("button",{className:"claim-btn",onClick:k,disabled:!g||i,children:i?"Claimed":"Claim"})]})]})]}),u.jsxs("div",{className:"game-achievements",children:[u.jsx("h2",{className:"section-title",children:"Gaming Achievements"}),u.jsxs("div",{className:"achievements-grid",children:[e.anxietyGameScore>=1&&u.jsxs("div",{className:"achievement-card bronze",children:[u.jsx("div",{className:"achievement-icon",children:""}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"FIRST VICTORY"}),u.jsx("p",{children:"Tamed your first monster"})]})]}),e.anxietyGameScore>=5&&u.jsxs("div",{className:"achievement-card silver",children:[u.jsx("div",{className:"achievement-icon",children:""}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MONSTER HUNTER"}),u.jsx("p",{children:"Tamed 5 monsters"})]})]}),e.anxietyGameScore>=10&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:""}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"ANXIETY MASTER"}),u.jsx("p",{children:"Tamed 10 monsters"})]})]}),e.mindfulnessPoints>=100&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:""}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MINDFUL GURU"}),u.jsx("p",{children:"Earned 100+ mindfulness points"})]})]})]})]}),u.jsxs("div",{className:"coming-soon-games",children:[u.jsx("h3",{className:"section-title",children:"More Games Coming Soon"}),u.jsxs("div",{className:"game-preview-grid",children:[u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:""}),u.jsx("h4",{children:"Mindful Garden"}),u.jsx("p",{children:"Grow a virtual garden through daily meditation practice"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:""}),u.jsx("h4",{children:"Calm Waters"}),u.jsx("p",{children:"Navigate peaceful waters while practicing breathing exercises"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:""}),u.jsx("h4",{children:"Focus Quest"}),u.jsx("p",{children:"Complete challenges that improve concentration and focus"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]})]})]})]})]})}function V3e(){return u.jsx(Tx,{children:u.jsxs(wA,{children:[u.jsxs(hA,{children:[u.jsx(pn,{path:"/welcome",element:u.jsx(TV,{})}),u.jsxs(pn,{path:"/",element:u.jsx(b3e,{children:u.jsx(EV,{})}),children:[u.jsx(pn,{index:!0,element:u.jsx(ld,{to:"/dashboard",replace:!0})}),u.jsx(pn,{path:"dashboard",element:u.jsx(AV,{})}),u.jsx(pn,{path:"workout",element:u.jsx(w3e,{})}),u.jsx(pn,{path:"meditation",element:u.jsx(E3e,{})}),u.jsx(pn,{path:"water",element:u.jsx(T3e,{})}),u.jsx(pn,{path:"goals",element:u.jsx(I3e,{})}),u.jsx(pn,{path:"profile",element:u.jsx(x3e,{})}),u.jsx(pn,{path:"games",element:u.jsx(j3e,{})})]}),u.jsx(pn,{path:"*",element:u.jsx(ld,{to:"/welcome",replace:!0})})]}),u.jsx(N3e,{}),u.jsx(C3e,{}),u.jsx(R3e,{})]})})}Lf.createRoot(document.getElementById("root")).render(u.jsx(_s.StrictMode,{children:u.jsx(Tx,{children:u.jsx(V3e,{})})}));
