function Kx(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function R2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D2={exports:{}},Xd={},j2={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),Qx=Symbol.for("react.portal"),Yx=Symbol.for("react.fragment"),Xx=Symbol.for("react.strict_mode"),Jx=Symbol.for("react.profiler"),Zx=Symbol.for("react.provider"),eb=Symbol.for("react.context"),tb=Symbol.for("react.forward_ref"),nb=Symbol.for("react.suspense"),sb=Symbol.for("react.memo"),rb=Symbol.for("react.lazy"),av=Symbol.iterator;function ib(t){return t===null||typeof t!="object"?null:(t=av&&t[av]||t["@@iterator"],typeof t=="function"?t:null)}var O2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V2=Object.assign,M2={};function sa(t,e,n){this.props=t,this.context=e,this.refs=M2,this.updater=n||O2}sa.prototype.isReactComponent={};sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function L2(){}L2.prototype=sa.prototype;function Np(t,e,n){this.props=t,this.context=e,this.refs=M2,this.updater=n||O2}var Pp=Np.prototype=new L2;Pp.constructor=Np;V2(Pp,sa.prototype);Pp.isPureReactComponent=!0;var cv=Array.isArray,F2=Object.prototype.hasOwnProperty,Cp={current:null},z2={key:!0,ref:!0,__self:!0,__source:!0};function U2(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)F2.call(e,s)&&!z2.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:cl,type:t,key:i,ref:o,props:r,_owner:Cp.current}}function ob(t,e){return{$$typeof:cl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rp(t){return typeof t=="object"&&t!==null&&t.$$typeof===cl}function ab(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lv=/\/+/g;function nf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ab(""+t.key):e.toString(36)}function Iu(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cl:case Qx:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+nf(o,0):s,cv(r)?(n="",t!=null&&(n=t.replace(lv,"$&/")+"/"),Iu(r,e,n,"",function(d){return d})):r!=null&&(Rp(r)&&(r=ob(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(lv,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",cv(t))for(var a=0;a<t.length;a++){i=t[a];var c=s+nf(i,a);o+=Iu(i,e,n,c,r)}else if(c=ib(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=s+nf(i,a++),o+=Iu(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kl(t,e,n){if(t==null)return t;var s=[],r=0;return Iu(t,s,"","",function(i){return e.call(n,i,r++)}),s}function cb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},xu={transition:null},lb={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:xu,ReactCurrentOwner:Cp};function B2(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Kl,forEach:function(t,e,n){Kl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kl(t,function(){e++}),e},toArray:function(t){return Kl(t,function(e){return e})||[]},only:function(t){if(!Rp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=sa;ye.Fragment=Yx;ye.Profiler=Jx;ye.PureComponent=Np;ye.StrictMode=Xx;ye.Suspense=nb;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lb;ye.act=B2;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=V2({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Cp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)F2.call(e,c)&&!z2.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];s.children=a}return{$$typeof:cl,type:t.type,key:r,ref:i,props:s,_owner:o}};ye.createContext=function(t){return t={$$typeof:eb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Zx,_context:t},t.Consumer=t};ye.createElement=U2;ye.createFactory=function(t){var e=U2.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:tb,render:t}};ye.isValidElement=Rp;ye.lazy=function(t){return{$$typeof:rb,_payload:{_status:-1,_result:t},_init:cb}};ye.memo=function(t,e){return{$$typeof:sb,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=xu.transition;xu.transition={};try{t()}finally{xu.transition=e}};ye.unstable_act=B2;ye.useCallback=function(t,e){return Bt.current.useCallback(t,e)};ye.useContext=function(t){return Bt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Bt.current.useEffect(t,e)};ye.useId=function(){return Bt.current.useId()};ye.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Bt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};ye.useRef=function(t){return Bt.current.useRef(t)};ye.useState=function(t){return Bt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return Bt.current.useTransition()};ye.version="18.3.1";j2.exports=ye;var A=j2.exports;const ys=R2(A),ub=Kx({__proto__:null,default:ys},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db=A,hb=Symbol.for("react.element"),fb=Symbol.for("react.fragment"),mb=Object.prototype.hasOwnProperty,pb=db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gb={key:!0,ref:!0,__self:!0,__source:!0};function $2(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)mb.call(e,s)&&!gb.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:hb,type:t,key:i,ref:o,props:r,_owner:pb.current}}Xd.Fragment=fb;Xd.jsx=$2;Xd.jsxs=$2;D2.exports=Xd;var u=D2.exports,Gf={},q2={exports:{}},hn={},W2={exports:{}},G2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,J){var ne=z.length;z.push(J);e:for(;0<ne;){var fe=ne-1>>>1,he=z[fe];if(0<r(he,J))z[fe]=J,z[ne]=he,ne=fe;else break e}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var J=z[0],ne=z.pop();if(ne!==J){z[0]=ne;e:for(var fe=0,he=z.length,ke=he>>>1;fe<ke;){var Ee=2*(fe+1)-1,dt=z[Ee],qt=Ee+1,Wt=z[qt];if(0>r(dt,ne))qt<he&&0>r(Wt,dt)?(z[fe]=Wt,z[qt]=ne,fe=qt):(z[fe]=dt,z[Ee]=ne,fe=Ee);else if(qt<he&&0>r(Wt,ne))z[fe]=Wt,z[qt]=ne,fe=qt;else break e}}return J}function r(z,J){var ne=z.sortIndex-J.sortIndex;return ne!==0?ne:z.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],f=1,m=null,g=3,E=!1,S=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(z){for(var J=n(d);J!==null;){if(J.callback===null)s(d);else if(J.startTime<=z)s(d),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(d)}}function j(z){if(N=!1,I(z),!S)if(n(c)!==null)S=!0,X(L);else{var J=n(d);J!==null&&Z(j,J.startTime-z)}}function L(z,J){S=!1,N&&(N=!1,x(y),y=-1),E=!0;var ne=g;try{for(I(J),m=n(c);m!==null&&(!(m.expirationTime>J)||z&&!R());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,g=m.priorityLevel;var he=fe(m.expirationTime<=J);J=t.unstable_now(),typeof he=="function"?m.callback=he:m===n(c)&&s(c),I(J)}else s(c);m=n(c)}if(m!==null)var ke=!0;else{var Ee=n(d);Ee!==null&&Z(j,Ee.startTime-J),ke=!1}return ke}finally{m=null,g=ne,E=!1}}var M=!1,w=null,y=-1,T=5,k=-1;function R(){return!(t.unstable_now()-k<T)}function P(){if(w!==null){var z=t.unstable_now();k=z;var J=!0;try{J=w(!0,z)}finally{J?b():(M=!1,w=null)}}else M=!1}var b;if(typeof v=="function")b=function(){v(P)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,de=re.port2;re.port1.onmessage=P,b=function(){de.postMessage(null)}}else b=function(){C(P,0)};function X(z){w=z,M||(M=!0,b())}function Z(z,J){y=C(function(){z(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){S||E||(S=!0,X(L))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var ne=g;g=J;try{return z()}finally{g=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ne=g;g=z;try{return J()}finally{g=ne}},t.unstable_scheduleCallback=function(z,J,ne){var fe=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?fe+ne:fe):ne=fe,z){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ne+he,z={id:f++,callback:J,priorityLevel:z,startTime:ne,expirationTime:he,sortIndex:-1},ne>fe?(z.sortIndex=ne,e(d,z),n(c)===null&&z===n(d)&&(N?(x(y),y=-1):N=!0,Z(j,ne-fe))):(z.sortIndex=he,e(c,z),S||E||(S=!0,X(L))),z},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(z){var J=g;return function(){var ne=g;g=J;try{return z.apply(this,arguments)}finally{g=ne}}}})(G2);W2.exports=G2;var yb=W2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb=A,un=yb;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H2=new Set,bc={};function Vi(t,e){Oo(t,e),Oo(t+"Capture",e)}function Oo(t,e){for(bc[t]=e,t=0;t<e.length;t++)H2.add(e[t])}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hf=Object.prototype.hasOwnProperty,_b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uv={},dv={};function wb(t){return Hf.call(dv,t)?!0:Hf.call(uv,t)?!1:_b.test(t)?dv[t]=!0:(uv[t]=!0,!1)}function Eb(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Tb(t,e,n,s){if(e===null||typeof e>"u"||Eb(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dp=/[\-:]([a-z])/g;function jp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dp,jp);It[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dp,jp);It[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dp,jp);It[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Op(t,e,n,s){var r=It.hasOwnProperty(e)?It[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Tb(e,n,r,s)&&(n=null),s||r===null?wb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var As=vb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),ho=Symbol.for("react.portal"),fo=Symbol.for("react.fragment"),Vp=Symbol.for("react.strict_mode"),Kf=Symbol.for("react.profiler"),K2=Symbol.for("react.provider"),Q2=Symbol.for("react.context"),Mp=Symbol.for("react.forward_ref"),Qf=Symbol.for("react.suspense"),Yf=Symbol.for("react.suspense_list"),Lp=Symbol.for("react.memo"),Js=Symbol.for("react.lazy"),Y2=Symbol.for("react.offscreen"),hv=Symbol.iterator;function Oa(t){return t===null||typeof t!="object"?null:(t=hv&&t[hv]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,sf;function Qa(t){if(sf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sf=e&&e[1]||""}return`
`+sf+t}var rf=!1;function of(t,e){if(!t||rf)return"";rf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{rf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qa(t):""}function Ib(t){switch(t.tag){case 5:return Qa(t.type);case 16:return Qa("Lazy");case 13:return Qa("Suspense");case 19:return Qa("SuspenseList");case 0:case 2:case 15:return t=of(t.type,!1),t;case 11:return t=of(t.type.render,!1),t;case 1:return t=of(t.type,!0),t;default:return""}}function Xf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fo:return"Fragment";case ho:return"Portal";case Kf:return"Profiler";case Vp:return"StrictMode";case Qf:return"Suspense";case Yf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Q2:return(t.displayName||"Context")+".Consumer";case K2:return(t._context.displayName||"Context")+".Provider";case Mp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lp:return e=t.displayName||null,e!==null?e:Xf(t.type)||"Memo";case Js:e=t._payload,t=t._init;try{return Xf(t(e))}catch{}}return null}function xb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xf(e);case 8:return e===Vp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function X2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bb(t){var e=X2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yl(t){t._valueTracker||(t._valueTracker=bb(t))}function J2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=X2(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Xu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jf(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fv(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Z2(t,e){e=e.checked,e!=null&&Op(t,"checked",e,!1)}function Zf(t,e){Z2(t,e);var n=kr(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?em(t,e.type,n):e.hasOwnProperty("defaultValue")&&em(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function em(t,e,n){(e!=="number"||Xu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ya=Array.isArray;function bo(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function tm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Ya(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function e0(t,e){var n=kr(e.value),s=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function gv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function t0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?t0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xl,n0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xl=Xl||document.createElement("div"),Xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sb=["Webkit","ms","Moz","O"];Object.keys(oc).forEach(function(t){Sb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oc[e]=oc[t]})});function s0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oc.hasOwnProperty(t)&&oc[t]?(""+e).trim():e+"px"}function r0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=s0(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var kb=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sm(t,e){if(e){if(kb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function rm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var im=null;function Fp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var om=null,So=null,ko=null;function yv(t){if(t=dl(t)){if(typeof om!="function")throw Error(W(280));var e=t.stateNode;e&&(e=nh(e),om(t.stateNode,t.type,e))}}function i0(t){So?ko?ko.push(t):ko=[t]:So=t}function o0(){if(So){var t=So,e=ko;if(ko=So=null,yv(t),e)for(t=0;t<e.length;t++)yv(e[t])}}function a0(t,e){return t(e)}function c0(){}var af=!1;function l0(t,e,n){if(af)return t(e,n);af=!0;try{return a0(t,e,n)}finally{af=!1,(So!==null||ko!==null)&&(c0(),o0())}}function kc(t,e){var n=t.stateNode;if(n===null)return null;var s=nh(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var am=!1;if(ws)try{var Va={};Object.defineProperty(Va,"passive",{get:function(){am=!0}}),window.addEventListener("test",Va,Va),window.removeEventListener("test",Va,Va)}catch{am=!1}function Ab(t,e,n,s,r,i,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ac=!1,Ju=null,Zu=!1,cm=null,Nb={onError:function(t){ac=!0,Ju=t}};function Pb(t,e,n,s,r,i,o,a,c){ac=!1,Ju=null,Ab.apply(Nb,arguments)}function Cb(t,e,n,s,r,i,o,a,c){if(Pb.apply(this,arguments),ac){if(ac){var d=Ju;ac=!1,Ju=null}else throw Error(W(198));Zu||(Zu=!0,cm=d)}}function Mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function u0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vv(t){if(Mi(t)!==t)throw Error(W(188))}function Rb(t){var e=t.alternate;if(!e){if(e=Mi(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return vv(r),t;if(i===s)return vv(r),e;i=i.sibling}throw Error(W(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==s)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function d0(t){return t=Rb(t),t!==null?h0(t):null}function h0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=h0(t);if(e!==null)return e;t=t.sibling}return null}var f0=un.unstable_scheduleCallback,_v=un.unstable_cancelCallback,Db=un.unstable_shouldYield,jb=un.unstable_requestPaint,et=un.unstable_now,Ob=un.unstable_getCurrentPriorityLevel,zp=un.unstable_ImmediatePriority,m0=un.unstable_UserBlockingPriority,ed=un.unstable_NormalPriority,Vb=un.unstable_LowPriority,p0=un.unstable_IdlePriority,Jd=null,Qn=null;function Mb(t){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(Jd,t,void 0,(t.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:zb,Lb=Math.log,Fb=Math.LN2;function zb(t){return t>>>=0,t===0?32:31-(Lb(t)/Fb|0)|0}var Jl=64,Zl=4194304;function Xa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function td(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=Xa(a):(i&=o,i!==0&&(s=Xa(i)))}else o=n&~r,o!==0?s=Xa(o):i!==0&&(s=Xa(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-On(e),r=1<<n,s|=t[n],e&=~r;return s}function Ub(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bb(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-On(i),a=1<<o,c=r[o];c===-1?(!(a&n)||a&s)&&(r[o]=Ub(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function lm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function g0(){var t=Jl;return Jl<<=1,!(Jl&4194240)&&(Jl=64),t}function cf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ll(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-On(e),t[e]=n}function $b(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-On(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Up(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-On(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var Ce=0;function y0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var v0,Bp,_0,w0,E0,um=!1,eu=[],hr=null,fr=null,mr=null,Ac=new Map,Nc=new Map,er=[],qb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wv(t,e){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Ac.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nc.delete(e.pointerId)}}function Ma(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=dl(e),e!==null&&Bp(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Wb(t,e,n,s,r){switch(e){case"focusin":return hr=Ma(hr,t,e,n,s,r),!0;case"dragenter":return fr=Ma(fr,t,e,n,s,r),!0;case"mouseover":return mr=Ma(mr,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Ac.set(i,Ma(Ac.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Nc.set(i,Ma(Nc.get(i)||null,t,e,n,s,r)),!0}return!1}function T0(t){var e=ci(t.target);if(e!==null){var n=Mi(e);if(n!==null){if(e=n.tag,e===13){if(e=u0(n),e!==null){t.blockedOn=e,E0(t.priority,function(){_0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);im=s,n.target.dispatchEvent(s),im=null}else return e=dl(n),e!==null&&Bp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ev(t,e,n){bu(t)&&n.delete(e)}function Gb(){um=!1,hr!==null&&bu(hr)&&(hr=null),fr!==null&&bu(fr)&&(fr=null),mr!==null&&bu(mr)&&(mr=null),Ac.forEach(Ev),Nc.forEach(Ev)}function La(t,e){t.blockedOn===e&&(t.blockedOn=null,um||(um=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,Gb)))}function Pc(t){function e(r){return La(r,t)}if(0<eu.length){La(eu[0],t);for(var n=1;n<eu.length;n++){var s=eu[n];s.blockedOn===t&&(s.blockedOn=null)}}for(hr!==null&&La(hr,t),fr!==null&&La(fr,t),mr!==null&&La(mr,t),Ac.forEach(e),Nc.forEach(e),n=0;n<er.length;n++)s=er[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)T0(n),n.blockedOn===null&&er.shift()}var Ao=As.ReactCurrentBatchConfig,nd=!0;function Hb(t,e,n,s){var r=Ce,i=Ao.transition;Ao.transition=null;try{Ce=1,$p(t,e,n,s)}finally{Ce=r,Ao.transition=i}}function Kb(t,e,n,s){var r=Ce,i=Ao.transition;Ao.transition=null;try{Ce=4,$p(t,e,n,s)}finally{Ce=r,Ao.transition=i}}function $p(t,e,n,s){if(nd){var r=dm(t,e,n,s);if(r===null)vf(t,e,s,sd,n),wv(t,s);else if(Wb(r,t,e,n,s))s.stopPropagation();else if(wv(t,s),e&4&&-1<qb.indexOf(t)){for(;r!==null;){var i=dl(r);if(i!==null&&v0(i),i=dm(t,e,n,s),i===null&&vf(t,e,s,sd,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else vf(t,e,s,null,n)}}var sd=null;function dm(t,e,n,s){if(sd=null,t=Fp(s),t=ci(t),t!==null)if(e=Mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=u0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sd=t,null}function I0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ob()){case zp:return 1;case m0:return 4;case ed:case Vb:return 16;case p0:return 536870912;default:return 16}default:return 16}}var cr=null,qp=null,Su=null;function x0(){if(Su)return Su;var t,e=qp,n=e.length,s,r="value"in cr?cr.value:cr.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return Su=r.slice(t,1<s?1-s:void 0)}function ku(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tu(){return!0}function Tv(){return!1}function fn(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?tu:Tv,this.isPropagationStopped=Tv,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tu)},persist:function(){},isPersistent:tu}),e}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wp=fn(ra),ul=He({},ra,{view:0,detail:0}),Qb=fn(ul),lf,uf,Fa,Zd=He({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fa&&(Fa&&t.type==="mousemove"?(lf=t.screenX-Fa.screenX,uf=t.screenY-Fa.screenY):uf=lf=0,Fa=t),lf)},movementY:function(t){return"movementY"in t?t.movementY:uf}}),Iv=fn(Zd),Yb=He({},Zd,{dataTransfer:0}),Xb=fn(Yb),Jb=He({},ul,{relatedTarget:0}),df=fn(Jb),Zb=He({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),eS=fn(Zb),tS=He({},ra,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nS=fn(tS),sS=He({},ra,{data:0}),xv=fn(sS),rS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oS[t])?!!e[t]:!1}function Gp(){return aS}var cS=He({},ul,{key:function(t){if(t.key){var e=rS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ku(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gp,charCode:function(t){return t.type==="keypress"?ku(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ku(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lS=fn(cS),uS=He({},Zd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bv=fn(uS),dS=He({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gp}),hS=fn(dS),fS=He({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),mS=fn(fS),pS=He({},Zd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gS=fn(pS),yS=[9,13,27,32],Hp=ws&&"CompositionEvent"in window,cc=null;ws&&"documentMode"in document&&(cc=document.documentMode);var vS=ws&&"TextEvent"in window&&!cc,b0=ws&&(!Hp||cc&&8<cc&&11>=cc),Sv=" ",kv=!1;function S0(t,e){switch(t){case"keyup":return yS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mo=!1;function _S(t,e){switch(t){case"compositionend":return k0(e);case"keypress":return e.which!==32?null:(kv=!0,Sv);case"textInput":return t=e.data,t===Sv&&kv?null:t;default:return null}}function wS(t,e){if(mo)return t==="compositionend"||!Hp&&S0(t,e)?(t=x0(),Su=qp=cr=null,mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return b0&&e.locale!=="ko"?null:e.data;default:return null}}var ES={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ES[t.type]:e==="textarea"}function A0(t,e,n,s){i0(s),e=rd(e,"onChange"),0<e.length&&(n=new Wp("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var lc=null,Cc=null;function TS(t){F0(t,0)}function eh(t){var e=yo(t);if(J2(e))return t}function IS(t,e){if(t==="change")return e}var N0=!1;if(ws){var hf;if(ws){var ff="oninput"in document;if(!ff){var Nv=document.createElement("div");Nv.setAttribute("oninput","return;"),ff=typeof Nv.oninput=="function"}hf=ff}else hf=!1;N0=hf&&(!document.documentMode||9<document.documentMode)}function Pv(){lc&&(lc.detachEvent("onpropertychange",P0),Cc=lc=null)}function P0(t){if(t.propertyName==="value"&&eh(Cc)){var e=[];A0(e,Cc,t,Fp(t)),l0(TS,e)}}function xS(t,e,n){t==="focusin"?(Pv(),lc=e,Cc=n,lc.attachEvent("onpropertychange",P0)):t==="focusout"&&Pv()}function bS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eh(Cc)}function SS(t,e){if(t==="click")return eh(e)}function kS(t,e){if(t==="input"||t==="change")return eh(e)}function AS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mn=typeof Object.is=="function"?Object.is:AS;function Rc(t,e){if(Mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Hf.call(e,r)||!Mn(t[r],e[r]))return!1}return!0}function Cv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rv(t,e){var n=Cv(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cv(n)}}function C0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?C0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function R0(){for(var t=window,e=Xu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xu(t.document)}return e}function Kp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NS(t){var e=R0(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&C0(n.ownerDocument.documentElement,n)){if(s!==null&&Kp(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=Rv(n,i);var o=Rv(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PS=ws&&"documentMode"in document&&11>=document.documentMode,po=null,hm=null,uc=null,fm=!1;function Dv(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fm||po==null||po!==Xu(s)||(s=po,"selectionStart"in s&&Kp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),uc&&Rc(uc,s)||(uc=s,s=rd(hm,"onSelect"),0<s.length&&(e=new Wp("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=po)))}function nu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var go={animationend:nu("Animation","AnimationEnd"),animationiteration:nu("Animation","AnimationIteration"),animationstart:nu("Animation","AnimationStart"),transitionend:nu("Transition","TransitionEnd")},mf={},D0={};ws&&(D0=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function th(t){if(mf[t])return mf[t];if(!go[t])return t;var e=go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in D0)return mf[t]=e[n];return t}var j0=th("animationend"),O0=th("animationiteration"),V0=th("animationstart"),M0=th("transitionend"),L0=new Map,jv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(t,e){L0.set(t,e),Vi(e,[t])}for(var pf=0;pf<jv.length;pf++){var gf=jv[pf],CS=gf.toLowerCase(),RS=gf[0].toUpperCase()+gf.slice(1);jr(CS,"on"+RS)}jr(j0,"onAnimationEnd");jr(O0,"onAnimationIteration");jr(V0,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(M0,"onTransitionEnd");Oo("onMouseEnter",["mouseout","mouseover"]);Oo("onMouseLeave",["mouseout","mouseover"]);Oo("onPointerEnter",["pointerout","pointerover"]);Oo("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ja));function Ov(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,Cb(s,e,void 0,t),t.currentTarget=null}function F0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&r.isPropagationStopped())break e;Ov(r,a,d),i=c}else for(o=0;o<s.length;o++){if(a=s[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&r.isPropagationStopped())break e;Ov(r,a,d),i=c}}}if(Zu)throw t=cm,Zu=!1,cm=null,t}function Me(t,e){var n=e[vm];n===void 0&&(n=e[vm]=new Set);var s=t+"__bubble";n.has(s)||(z0(e,t,2,!1),n.add(s))}function yf(t,e,n){var s=0;e&&(s|=4),z0(n,t,s,e)}var su="_reactListening"+Math.random().toString(36).slice(2);function Dc(t){if(!t[su]){t[su]=!0,H2.forEach(function(n){n!=="selectionchange"&&(DS.has(n)||yf(n,!1,t),yf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[su]||(e[su]=!0,yf("selectionchange",!1,e))}}function z0(t,e,n,s){switch(I0(e)){case 1:var r=Hb;break;case 4:r=Kb;break;default:r=$p}n=r.bind(null,e,n,t),r=void 0,!am||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function vf(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ci(a),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}a=a.parentNode}}s=s.return}l0(function(){var d=i,f=Fp(n),m=[];e:{var g=L0.get(t);if(g!==void 0){var E=Wp,S=t;switch(t){case"keypress":if(ku(n)===0)break e;case"keydown":case"keyup":E=lS;break;case"focusin":S="focus",E=df;break;case"focusout":S="blur",E=df;break;case"beforeblur":case"afterblur":E=df;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Iv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Xb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=hS;break;case j0:case O0:case V0:E=eS;break;case M0:E=mS;break;case"scroll":E=Qb;break;case"wheel":E=gS;break;case"copy":case"cut":case"paste":E=nS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=bv}var N=(e&4)!==0,C=!N&&t==="scroll",x=N?g!==null?g+"Capture":null:g;N=[];for(var v=d,I;v!==null;){I=v;var j=I.stateNode;if(I.tag===5&&j!==null&&(I=j,x!==null&&(j=kc(v,x),j!=null&&N.push(jc(v,j,I)))),C)break;v=v.return}0<N.length&&(g=new E(g,S,null,n,f),m.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==im&&(S=n.relatedTarget||n.fromElement)&&(ci(S)||S[Es]))break e;if((E||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,E?(S=n.relatedTarget||n.toElement,E=d,S=S?ci(S):null,S!==null&&(C=Mi(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(E=null,S=d),E!==S)){if(N=Iv,j="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(N=bv,j="onPointerLeave",x="onPointerEnter",v="pointer"),C=E==null?g:yo(E),I=S==null?g:yo(S),g=new N(j,v+"leave",E,n,f),g.target=C,g.relatedTarget=I,j=null,ci(f)===d&&(N=new N(x,v+"enter",S,n,f),N.target=I,N.relatedTarget=C,j=N),C=j,E&&S)t:{for(N=E,x=S,v=0,I=N;I;I=Ji(I))v++;for(I=0,j=x;j;j=Ji(j))I++;for(;0<v-I;)N=Ji(N),v--;for(;0<I-v;)x=Ji(x),I--;for(;v--;){if(N===x||x!==null&&N===x.alternate)break t;N=Ji(N),x=Ji(x)}N=null}else N=null;E!==null&&Vv(m,g,E,N,!1),S!==null&&C!==null&&Vv(m,C,S,N,!0)}}e:{if(g=d?yo(d):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var L=IS;else if(Av(g))if(N0)L=kS;else{L=bS;var M=xS}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=SS);if(L&&(L=L(t,d))){A0(m,L,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&em(g,"number",g.value)}switch(M=d?yo(d):window,t){case"focusin":(Av(M)||M.contentEditable==="true")&&(po=M,hm=d,uc=null);break;case"focusout":uc=hm=po=null;break;case"mousedown":fm=!0;break;case"contextmenu":case"mouseup":case"dragend":fm=!1,Dv(m,n,f);break;case"selectionchange":if(PS)break;case"keydown":case"keyup":Dv(m,n,f)}var w;if(Hp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else mo?S0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(b0&&n.locale!=="ko"&&(mo||y!=="onCompositionStart"?y==="onCompositionEnd"&&mo&&(w=x0()):(cr=f,qp="value"in cr?cr.value:cr.textContent,mo=!0)),M=rd(d,y),0<M.length&&(y=new xv(y,t,null,n,f),m.push({event:y,listeners:M}),w?y.data=w:(w=k0(n),w!==null&&(y.data=w)))),(w=vS?_S(t,n):wS(t,n))&&(d=rd(d,"onBeforeInput"),0<d.length&&(f=new xv("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=w))}F0(m,e)})}function jc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rd(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=kc(t,n),i!=null&&s.unshift(jc(t,i,r)),i=kc(t,e),i!=null&&s.push(jc(t,i,r))),t=t.return}return s}function Ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vv(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===s)break;a.tag===5&&d!==null&&(a=d,r?(c=kc(n,i),c!=null&&o.unshift(jc(n,c,a))):r||(c=kc(n,i),c!=null&&o.push(jc(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jS=/\r\n?/g,OS=/\u0000|\uFFFD/g;function Mv(t){return(typeof t=="string"?t:""+t).replace(jS,`
`).replace(OS,"")}function ru(t,e,n){if(e=Mv(e),Mv(t)!==e&&n)throw Error(W(425))}function id(){}var mm=null,pm=null;function gm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ym=typeof setTimeout=="function"?setTimeout:void 0,VS=typeof clearTimeout=="function"?clearTimeout:void 0,Lv=typeof Promise=="function"?Promise:void 0,MS=typeof queueMicrotask=="function"?queueMicrotask:typeof Lv<"u"?function(t){return Lv.resolve(null).then(t).catch(LS)}:ym;function LS(t){setTimeout(function(){throw t})}function _f(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Pc(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Pc(e)}function pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ia=Math.random().toString(36).slice(2),$n="__reactFiber$"+ia,Oc="__reactProps$"+ia,Es="__reactContainer$"+ia,vm="__reactEvents$"+ia,FS="__reactListeners$"+ia,zS="__reactHandles$"+ia;function ci(t){var e=t[$n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Es]||n[$n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fv(t);t!==null;){if(n=t[$n])return n;t=Fv(t)}return e}t=n,n=t.parentNode}return null}function dl(t){return t=t[$n]||t[Es],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function nh(t){return t[Oc]||null}var _m=[],vo=-1;function Or(t){return{current:t}}function Le(t){0>vo||(t.current=_m[vo],_m[vo]=null,vo--)}function Oe(t,e){vo++,_m[vo]=t.current,t.current=e}var Ar={},Vt=Or(Ar),Xt=Or(!1),_i=Ar;function Vo(t,e){var n=t.type.contextTypes;if(!n)return Ar;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Jt(t){return t=t.childContextTypes,t!=null}function od(){Le(Xt),Le(Vt)}function zv(t,e,n){if(Vt.current!==Ar)throw Error(W(168));Oe(Vt,e),Oe(Xt,n)}function U0(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(W(108,xb(t)||"Unknown",r));return He({},n,s)}function ad(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ar,_i=Vt.current,Oe(Vt,t),Oe(Xt,Xt.current),!0}function Uv(t,e,n){var s=t.stateNode;if(!s)throw Error(W(169));n?(t=U0(t,e,_i),s.__reactInternalMemoizedMergedChildContext=t,Le(Xt),Le(Vt),Oe(Vt,t)):Le(Xt),Oe(Xt,n)}var ds=null,sh=!1,wf=!1;function B0(t){ds===null?ds=[t]:ds.push(t)}function US(t){sh=!0,B0(t)}function Vr(){if(!wf&&ds!==null){wf=!0;var t=0,e=Ce;try{var n=ds;for(Ce=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}ds=null,sh=!1}catch(r){throw ds!==null&&(ds=ds.slice(t+1)),f0(zp,Vr),r}finally{Ce=e,wf=!1}}return null}var _o=[],wo=0,cd=null,ld=0,gn=[],yn=0,wi=null,hs=1,fs="";function Zr(t,e){_o[wo++]=ld,_o[wo++]=cd,cd=t,ld=e}function $0(t,e,n){gn[yn++]=hs,gn[yn++]=fs,gn[yn++]=wi,wi=t;var s=hs;t=fs;var r=32-On(s)-1;s&=~(1<<r),n+=1;var i=32-On(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,hs=1<<32-On(e)+r|n<<r|s,fs=i+t}else hs=1<<i|n<<r|s,fs=t}function Qp(t){t.return!==null&&(Zr(t,1),$0(t,1,0))}function Yp(t){for(;t===cd;)cd=_o[--wo],_o[wo]=null,ld=_o[--wo],_o[wo]=null;for(;t===wi;)wi=gn[--yn],gn[yn]=null,fs=gn[--yn],gn[yn]=null,hs=gn[--yn],gn[yn]=null}var ln=null,an=null,ze=!1,Dn=null;function q0(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Bv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,an=pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wi!==null?{id:hs,overflow:fs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,an=null,!0):!1;default:return!1}}function wm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Em(t){if(ze){var e=an;if(e){var n=e;if(!Bv(t,e)){if(wm(t))throw Error(W(418));e=pr(n.nextSibling);var s=ln;e&&Bv(t,e)?q0(s,n):(t.flags=t.flags&-4097|2,ze=!1,ln=t)}}else{if(wm(t))throw Error(W(418));t.flags=t.flags&-4097|2,ze=!1,ln=t}}}function $v(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function iu(t){if(t!==ln)return!1;if(!ze)return $v(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gm(t.type,t.memoizedProps)),e&&(e=an)){if(wm(t))throw W0(),Error(W(418));for(;e;)q0(t,e),e=pr(e.nextSibling)}if($v(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=pr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=ln?pr(t.stateNode.nextSibling):null;return!0}function W0(){for(var t=an;t;)t=pr(t.nextSibling)}function Mo(){an=ln=null,ze=!1}function Xp(t){Dn===null?Dn=[t]:Dn.push(t)}var BS=As.ReactCurrentBatchConfig;function za(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var s=n.stateNode}if(!s)throw Error(W(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function ou(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qv(t){var e=t._init;return e(t._payload)}function G0(t){function e(x,v){if(t){var I=x.deletions;I===null?(x.deletions=[v],x.flags|=16):I.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function s(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function r(x,v){return x=_r(x,v),x.index=0,x.sibling=null,x}function i(x,v,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<v?(x.flags|=2,v):I):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,v,I,j){return v===null||v.tag!==6?(v=kf(I,x.mode,j),v.return=x,v):(v=r(v,I),v.return=x,v)}function c(x,v,I,j){var L=I.type;return L===fo?f(x,v,I.props.children,j,I.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Js&&qv(L)===v.type)?(j=r(v,I.props),j.ref=za(x,v,I),j.return=x,j):(j=ju(I.type,I.key,I.props,null,x.mode,j),j.ref=za(x,v,I),j.return=x,j)}function d(x,v,I,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Af(I,x.mode,j),v.return=x,v):(v=r(v,I.children||[]),v.return=x,v)}function f(x,v,I,j,L){return v===null||v.tag!==7?(v=pi(I,x.mode,j,L),v.return=x,v):(v=r(v,I),v.return=x,v)}function m(x,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=kf(""+v,x.mode,I),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ql:return I=ju(v.type,v.key,v.props,null,x.mode,I),I.ref=za(x,null,v),I.return=x,I;case ho:return v=Af(v,x.mode,I),v.return=x,v;case Js:var j=v._init;return m(x,j(v._payload),I)}if(Ya(v)||Oa(v))return v=pi(v,x.mode,I,null),v.return=x,v;ou(x,v)}return null}function g(x,v,I,j){var L=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return L!==null?null:a(x,v,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ql:return I.key===L?c(x,v,I,j):null;case ho:return I.key===L?d(x,v,I,j):null;case Js:return L=I._init,g(x,v,L(I._payload),j)}if(Ya(I)||Oa(I))return L!==null?null:f(x,v,I,j,null);ou(x,I)}return null}function E(x,v,I,j,L){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(I)||null,a(v,x,""+j,L);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ql:return x=x.get(j.key===null?I:j.key)||null,c(v,x,j,L);case ho:return x=x.get(j.key===null?I:j.key)||null,d(v,x,j,L);case Js:var M=j._init;return E(x,v,I,M(j._payload),L)}if(Ya(j)||Oa(j))return x=x.get(I)||null,f(v,x,j,L,null);ou(v,j)}return null}function S(x,v,I,j){for(var L=null,M=null,w=v,y=v=0,T=null;w!==null&&y<I.length;y++){w.index>y?(T=w,w=null):T=w.sibling;var k=g(x,w,I[y],j);if(k===null){w===null&&(w=T);break}t&&w&&k.alternate===null&&e(x,w),v=i(k,v,y),M===null?L=k:M.sibling=k,M=k,w=T}if(y===I.length)return n(x,w),ze&&Zr(x,y),L;if(w===null){for(;y<I.length;y++)w=m(x,I[y],j),w!==null&&(v=i(w,v,y),M===null?L=w:M.sibling=w,M=w);return ze&&Zr(x,y),L}for(w=s(x,w);y<I.length;y++)T=E(w,x,y,I[y],j),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?y:T.key),v=i(T,v,y),M===null?L=T:M.sibling=T,M=T);return t&&w.forEach(function(R){return e(x,R)}),ze&&Zr(x,y),L}function N(x,v,I,j){var L=Oa(I);if(typeof L!="function")throw Error(W(150));if(I=L.call(I),I==null)throw Error(W(151));for(var M=L=null,w=v,y=v=0,T=null,k=I.next();w!==null&&!k.done;y++,k=I.next()){w.index>y?(T=w,w=null):T=w.sibling;var R=g(x,w,k.value,j);if(R===null){w===null&&(w=T);break}t&&w&&R.alternate===null&&e(x,w),v=i(R,v,y),M===null?L=R:M.sibling=R,M=R,w=T}if(k.done)return n(x,w),ze&&Zr(x,y),L;if(w===null){for(;!k.done;y++,k=I.next())k=m(x,k.value,j),k!==null&&(v=i(k,v,y),M===null?L=k:M.sibling=k,M=k);return ze&&Zr(x,y),L}for(w=s(x,w);!k.done;y++,k=I.next())k=E(w,x,y,k.value,j),k!==null&&(t&&k.alternate!==null&&w.delete(k.key===null?y:k.key),v=i(k,v,y),M===null?L=k:M.sibling=k,M=k);return t&&w.forEach(function(P){return e(x,P)}),ze&&Zr(x,y),L}function C(x,v,I,j){if(typeof I=="object"&&I!==null&&I.type===fo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Ql:e:{for(var L=I.key,M=v;M!==null;){if(M.key===L){if(L=I.type,L===fo){if(M.tag===7){n(x,M.sibling),v=r(M,I.props.children),v.return=x,x=v;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Js&&qv(L)===M.type){n(x,M.sibling),v=r(M,I.props),v.ref=za(x,M,I),v.return=x,x=v;break e}n(x,M);break}else e(x,M);M=M.sibling}I.type===fo?(v=pi(I.props.children,x.mode,j,I.key),v.return=x,x=v):(j=ju(I.type,I.key,I.props,null,x.mode,j),j.ref=za(x,v,I),j.return=x,x=j)}return o(x);case ho:e:{for(M=I.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(x,v.sibling),v=r(v,I.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=Af(I,x.mode,j),v.return=x,x=v}return o(x);case Js:return M=I._init,C(x,v,M(I._payload),j)}if(Ya(I))return S(x,v,I,j);if(Oa(I))return N(x,v,I,j);ou(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(x,v.sibling),v=r(v,I),v.return=x,x=v):(n(x,v),v=kf(I,x.mode,j),v.return=x,x=v),o(x)):n(x,v)}return C}var Lo=G0(!0),H0=G0(!1),ud=Or(null),dd=null,Eo=null,Jp=null;function Zp(){Jp=Eo=dd=null}function eg(t){var e=ud.current;Le(ud),t._currentValue=e}function Tm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function No(t,e){dd=t,Jp=Eo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(Jp!==t)if(t={context:t,memoizedValue:e,next:null},Eo===null){if(dd===null)throw Error(W(308));Eo=t,dd.dependencies={lanes:0,firstContext:t}}else Eo=Eo.next=t;return e}var li=null;function tg(t){li===null?li=[t]:li.push(t)}function K0(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,tg(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ts(t,s)}function Ts(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zs=!1;function ng(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Se&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Ts(t,n)}return r=s.interleaved,r===null?(e.next=e,tg(s)):(e.next=r.next,r.next=e),s.interleaved=e,Ts(t,n)}function Au(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Up(t,n)}}function Wv(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hd(t,e,n,s){var r=t.updateQueue;Zs=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=r.baseState;o=0,f=d=c=null,a=i;do{var g=a.lane,E=a.eventTime;if((s&g)===g){f!==null&&(f=f.next={eventTime:E,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,N=a;switch(g=e,E=n,N.tag){case 1:if(S=N.payload,typeof S=="function"){m=S.call(E,m,g);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=N.payload,g=typeof S=="function"?S.call(E,m,g):S,g==null)break e;m=He({},m,g);break e;case 2:Zs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=r.effects,g===null?r.effects=[a]:g.push(a))}else E={eventTime:E,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=E,c=m):f=f.next=E,o|=g;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;g=a,a=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);if(f===null&&(c=m),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Ti|=o,t.lanes=o,t.memoizedState=m}}function Gv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(W(191,r));r.call(s)}}}var hl={},Yn=Or(hl),Vc=Or(hl),Mc=Or(hl);function ui(t){if(t===hl)throw Error(W(174));return t}function sg(t,e){switch(Oe(Mc,e),Oe(Vc,t),Oe(Yn,hl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nm(e,t)}Le(Yn),Oe(Yn,e)}function Fo(){Le(Yn),Le(Vc),Le(Mc)}function Y0(t){ui(Mc.current);var e=ui(Yn.current),n=nm(e,t.type);e!==n&&(Oe(Vc,t),Oe(Yn,n))}function rg(t){Vc.current===t&&(Le(Yn),Le(Vc))}var Be=Or(0);function fd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ef=[];function ig(){for(var t=0;t<Ef.length;t++)Ef[t]._workInProgressVersionPrimary=null;Ef.length=0}var Nu=As.ReactCurrentDispatcher,Tf=As.ReactCurrentBatchConfig,Ei=0,qe=null,at=null,mt=null,md=!1,dc=!1,Lc=0,$S=0;function kt(){throw Error(W(321))}function og(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mn(t[n],e[n]))return!1;return!0}function ag(t,e,n,s,r,i){if(Ei=i,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nu.current=t===null||t.memoizedState===null?HS:KS,t=n(s,r),dc){i=0;do{if(dc=!1,Lc=0,25<=i)throw Error(W(301));i+=1,mt=at=null,e.updateQueue=null,Nu.current=QS,t=n(s,r)}while(dc)}if(Nu.current=pd,e=at!==null&&at.next!==null,Ei=0,mt=at=qe=null,md=!1,e)throw Error(W(300));return t}function cg(){var t=Lc!==0;return Lc=0,t}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?qe.memoizedState=mt=t:mt=mt.next=t,mt}function In(){if(at===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=mt===null?qe.memoizedState:mt.next;if(e!==null)mt=e,at=t;else{if(t===null)throw Error(W(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},mt===null?qe.memoizedState=mt=t:mt=mt.next=t}return mt}function Fc(t,e){return typeof e=="function"?e(t):e}function If(t){var e=In(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var s=at,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,c=null,d=i;do{var f=d.lane;if((Ei&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=m,o=s):c=c.next=m,qe.lanes|=f,Ti|=f}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=a,Mn(s,e.memoizedState)||(Qt=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,qe.lanes|=i,Ti|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xf(t){var e=In(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Mn(i,e.memoizedState)||(Qt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function X0(){}function J0(t,e){var n=qe,s=In(),r=e(),i=!Mn(s.memoizedState,r);if(i&&(s.memoizedState=r,Qt=!0),s=s.queue,lg(t1.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,zc(9,e1.bind(null,n,s,r,e),void 0,null),pt===null)throw Error(W(349));Ei&30||Z0(n,e,r)}return r}function Z0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function e1(t,e,n,s){e.value=n,e.getSnapshot=s,n1(e)&&s1(t)}function t1(t,e,n){return n(function(){n1(e)&&s1(t)})}function n1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mn(t,n)}catch{return!0}}function s1(t){var e=Ts(t,1);e!==null&&Vn(e,t,1,-1)}function Hv(t){var e=Un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fc,lastRenderedState:t},e.queue=t,t=t.dispatch=GS.bind(null,qe,t),[e.memoizedState,t]}function zc(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function r1(){return In().memoizedState}function Pu(t,e,n,s){var r=Un();qe.flags|=t,r.memoizedState=zc(1|e,n,void 0,s===void 0?null:s)}function rh(t,e,n,s){var r=In();s=s===void 0?null:s;var i=void 0;if(at!==null){var o=at.memoizedState;if(i=o.destroy,s!==null&&og(s,o.deps)){r.memoizedState=zc(e,n,i,s);return}}qe.flags|=t,r.memoizedState=zc(1|e,n,i,s)}function Kv(t,e){return Pu(8390656,8,t,e)}function lg(t,e){return rh(2048,8,t,e)}function i1(t,e){return rh(4,2,t,e)}function o1(t,e){return rh(4,4,t,e)}function a1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function c1(t,e,n){return n=n!=null?n.concat([t]):null,rh(4,4,a1.bind(null,e,t),n)}function ug(){}function l1(t,e){var n=In();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&og(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function u1(t,e){var n=In();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&og(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function d1(t,e,n){return Ei&21?(Mn(n,e)||(n=g0(),qe.lanes|=n,Ti|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function qS(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var s=Tf.transition;Tf.transition={};try{t(!1),e()}finally{Ce=n,Tf.transition=s}}function h1(){return In().memoizedState}function WS(t,e,n){var s=vr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},f1(t))m1(e,n);else if(n=K0(t,e,n,s),n!==null){var r=Ft();Vn(n,t,s,r),p1(n,e,s)}}function GS(t,e,n){var s=vr(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(f1(t))m1(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,Mn(a,o)){var c=e.interleaved;c===null?(r.next=r,tg(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=K0(t,e,r,s),n!==null&&(r=Ft(),Vn(n,t,s,r),p1(n,e,s))}}function f1(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function m1(t,e){dc=md=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function p1(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Up(t,n)}}var pd={readContext:Tn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},HS={readContext:Tn,useCallback:function(t,e){return Un().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:Kv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pu(4194308,4,a1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pu(4,2,t,e)},useMemo:function(t,e){var n=Un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Un();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=WS.bind(null,qe,t),[s.memoizedState,t]},useRef:function(t){var e=Un();return t={current:t},e.memoizedState=t},useState:Hv,useDebugValue:ug,useDeferredValue:function(t){return Un().memoizedState=t},useTransition:function(){var t=Hv(!1),e=t[0];return t=qS.bind(null,t[1]),Un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=qe,r=Un();if(ze){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),pt===null)throw Error(W(349));Ei&30||Z0(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Kv(t1.bind(null,s,i,t),[t]),s.flags|=2048,zc(9,e1.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=Un(),e=pt.identifierPrefix;if(ze){var n=fs,s=hs;n=(s&~(1<<32-On(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$S++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KS={readContext:Tn,useCallback:l1,useContext:Tn,useEffect:lg,useImperativeHandle:c1,useInsertionEffect:i1,useLayoutEffect:o1,useMemo:u1,useReducer:If,useRef:r1,useState:function(){return If(Fc)},useDebugValue:ug,useDeferredValue:function(t){var e=In();return d1(e,at.memoizedState,t)},useTransition:function(){var t=If(Fc)[0],e=In().memoizedState;return[t,e]},useMutableSource:X0,useSyncExternalStore:J0,useId:h1,unstable_isNewReconciler:!1},QS={readContext:Tn,useCallback:l1,useContext:Tn,useEffect:lg,useImperativeHandle:c1,useInsertionEffect:i1,useLayoutEffect:o1,useMemo:u1,useReducer:xf,useRef:r1,useState:function(){return xf(Fc)},useDebugValue:ug,useDeferredValue:function(t){var e=In();return at===null?e.memoizedState=t:d1(e,at.memoizedState,t)},useTransition:function(){var t=xf(Fc)[0],e=In().memoizedState;return[t,e]},useMutableSource:X0,useSyncExternalStore:J0,useId:h1,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Im(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ih={isMounted:function(t){return(t=t._reactInternals)?Mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Ft(),r=vr(t),i=vs(s,r);i.payload=e,n!=null&&(i.callback=n),e=gr(t,i,r),e!==null&&(Vn(e,t,r,s),Au(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Ft(),r=vr(t),i=vs(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gr(t,i,r),e!==null&&(Vn(e,t,r,s),Au(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ft(),s=vr(t),r=vs(n,s);r.tag=2,e!=null&&(r.callback=e),e=gr(t,r,s),e!==null&&(Vn(e,t,s,n),Au(e,t,s))}};function Qv(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Rc(n,s)||!Rc(r,i):!0}function g1(t,e,n){var s=!1,r=Ar,i=e.contextType;return typeof i=="object"&&i!==null?i=Tn(i):(r=Jt(e)?_i:Vt.current,s=e.contextTypes,i=(s=s!=null)?Vo(t,r):Ar),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ih,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Yv(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&ih.enqueueReplaceState(e,e.state,null)}function xm(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},ng(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Tn(i):(i=Jt(e)?_i:Vt.current,r.context=Vo(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Im(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ih.enqueueReplaceState(r,r.state,null),hd(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function zo(t,e){try{var n="",s=e;do n+=Ib(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function bf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YS=typeof WeakMap=="function"?WeakMap:Map;function y1(t,e,n){n=vs(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){yd||(yd=!0,Om=s),bm(t,e)},n}function v1(t,e,n){n=vs(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){bm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bm(t,e),typeof s!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Xv(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new YS;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=uk.bind(null,t,e,n),e.then(t,t))}function Jv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zv(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vs(-1,1),e.tag=2,gr(n,e,1))),n.lanes|=1),t)}var XS=As.ReactCurrentOwner,Qt=!1;function Mt(t,e,n,s){e.child=t===null?H0(e,null,n,s):Lo(e,t.child,n,s)}function e_(t,e,n,s,r){n=n.render;var i=e.ref;return No(e,r),s=ag(t,e,n,s,i,r),n=cg(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Is(t,e,r)):(ze&&n&&Qp(e),e.flags|=1,Mt(t,e,s,r),e.child)}function t_(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!vg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,_1(t,e,i,s,r)):(t=ju(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Rc,n(o,s)&&t.ref===e.ref)return Is(t,e,r)}return e.flags|=1,t=_r(i,s),t.ref=e.ref,t.return=e,e.child=t}function _1(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Rc(i,s)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Is(t,e,r)}return Sm(t,e,n,s,r)}function w1(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Io,nn),nn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(Io,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Oe(Io,nn),nn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,Oe(Io,nn),nn|=s;return Mt(t,e,r,n),e.child}function E1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sm(t,e,n,s,r){var i=Jt(n)?_i:Vt.current;return i=Vo(e,i),No(e,r),n=ag(t,e,n,s,i,r),s=cg(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Is(t,e,r)):(ze&&s&&Qp(e),e.flags|=1,Mt(t,e,n,r),e.child)}function n_(t,e,n,s,r){if(Jt(n)){var i=!0;ad(e)}else i=!1;if(No(e,r),e.stateNode===null)Cu(t,e),g1(e,n,s),xm(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tn(d):(d=Jt(n)?_i:Vt.current,d=Vo(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||c!==d)&&Yv(e,o,s,d),Zs=!1;var g=e.memoizedState;o.state=g,hd(e,s,o,r),c=e.memoizedState,a!==s||g!==c||Xt.current||Zs?(typeof f=="function"&&(Im(e,n,f,s),c=e.memoizedState),(a=Zs||Qv(e,n,a,s,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=d,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Q0(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Pn(e.type,a),o.props=d,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Tn(c):(c=Jt(n)?_i:Vt.current,c=Vo(e,c));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==c)&&Yv(e,o,s,c),Zs=!1,g=e.memoizedState,o.state=g,hd(e,s,o,r);var S=e.memoizedState;a!==m||g!==S||Xt.current||Zs?(typeof E=="function"&&(Im(e,n,E,s),S=e.memoizedState),(d=Zs||Qv(e,n,d,s,g,S,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=S),o.props=s,o.state=S,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return km(t,e,n,s,i,r)}function km(t,e,n,s,r,i){E1(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Uv(e,n,!1),Is(t,e,i);s=e.stateNode,XS.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Lo(e,t.child,null,i),e.child=Lo(e,null,a,i)):Mt(t,e,a,i),e.memoizedState=s.state,r&&Uv(e,n,!0),e.child}function T1(t){var e=t.stateNode;e.pendingContext?zv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zv(t,e.context,!1),sg(t,e.containerInfo)}function s_(t,e,n,s,r){return Mo(),Xp(r),e.flags|=256,Mt(t,e,n,s),e.child}var Am={dehydrated:null,treeContext:null,retryLane:0};function Nm(t){return{baseLanes:t,cachePool:null,transitions:null}}function I1(t,e,n){var s=e.pendingProps,r=Be.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Oe(Be,r&1),t===null)return Em(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ch(o,s,0,null),t=pi(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Nm(n),e.memoizedState=Am,t):dg(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return JS(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=_r(r,c),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=_r(a,i):(i=pi(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?Nm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Am,s}return i=t.child,t=i.sibling,s=_r(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function dg(t,e){return e=ch({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function au(t,e,n,s){return s!==null&&Xp(s),Lo(e,t.child,null,n),t=dg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JS(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=bf(Error(W(422))),au(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=ch({mode:"visible",children:s.children},r,0,null),i=pi(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Lo(e,t.child,null,o),e.child.memoizedState=Nm(o),e.memoizedState=Am,i);if(!(e.mode&1))return au(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(W(419)),s=bf(i,s,void 0),au(t,e,o,s)}if(a=(o&t.childLanes)!==0,Qt||a){if(s=pt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ts(t,r),Vn(s,t,r,-1))}return yg(),s=bf(Error(W(421))),au(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=dk.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,an=pr(r.nextSibling),ln=e,ze=!0,Dn=null,t!==null&&(gn[yn++]=hs,gn[yn++]=fs,gn[yn++]=wi,hs=t.id,fs=t.overflow,wi=e),e=dg(e,s.children),e.flags|=4096,e)}function r_(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Tm(t.return,e,n)}function Sf(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function x1(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Mt(t,e,s.children,n),s=Be.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r_(t,n,e);else if(t.tag===19)r_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Oe(Be,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&fd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Sf(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&fd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Sf(e,!0,n,null,i);break;case"together":Sf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Is(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ti|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=_r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ZS(t,e,n){switch(e.tag){case 3:T1(e),Mo();break;case 5:Y0(e);break;case 1:Jt(e.type)&&ad(e);break;case 4:sg(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Oe(ud,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Oe(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?I1(t,e,n):(Oe(Be,Be.current&1),t=Is(t,e,n),t!==null?t.sibling:null);Oe(Be,Be.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return x1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Oe(Be,Be.current),s)break;return null;case 22:case 23:return e.lanes=0,w1(t,e,n)}return Is(t,e,n)}var b1,Pm,S1,k1;b1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pm=function(){};S1=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,ui(Yn.current);var i=null;switch(n){case"input":r=Jf(t,r),s=Jf(t,s),i=[];break;case"select":r=He({},r,{value:void 0}),s=He({},s,{value:void 0}),i=[];break;case"textarea":r=tm(t,r),s=tm(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=id)}sm(n,s);var o;n=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var a=r[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(bc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(a=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(bc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Me("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};k1=function(t,e,n,s){n!==s&&(e.flags|=4)};function Ua(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function ek(t,e,n){var s=e.pendingProps;switch(Yp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Jt(e.type)&&od(),At(e),null;case 3:return s=e.stateNode,Fo(),Le(Xt),Le(Vt),ig(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(iu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dn!==null&&(Lm(Dn),Dn=null))),Pm(t,e),At(e),null;case 5:rg(e);var r=ui(Mc.current);if(n=e.type,t!==null&&e.stateNode!=null)S1(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(W(166));return At(e),null}if(t=ui(Yn.current),iu(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[$n]=e,s[Oc]=i,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(r=0;r<Ja.length;r++)Me(Ja[r],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":fv(s,i),Me("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Me("invalid",s);break;case"textarea":pv(s,i),Me("invalid",s)}sm(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&ru(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ru(s.textContent,a,t),r=["children",""+a]):bc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",s)}switch(n){case"input":Yl(s),mv(s,i,!0);break;case"textarea":Yl(s),gv(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=id)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=t0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[$n]=e,t[Oc]=s,b1(t,e,!1,!1),e.stateNode=t;e:{switch(o=rm(n,s),n){case"dialog":Me("cancel",t),Me("close",t),r=s;break;case"iframe":case"object":case"embed":Me("load",t),r=s;break;case"video":case"audio":for(r=0;r<Ja.length;r++)Me(Ja[r],t);r=s;break;case"source":Me("error",t),r=s;break;case"img":case"image":case"link":Me("error",t),Me("load",t),r=s;break;case"details":Me("toggle",t),r=s;break;case"input":fv(t,s),r=Jf(t,s),Me("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=He({},s,{value:void 0}),Me("invalid",t);break;case"textarea":pv(t,s),r=tm(t,s),Me("invalid",t);break;default:r=s}sm(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?r0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&n0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Sc(t,c):typeof c=="number"&&Sc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Me("scroll",t):c!=null&&Op(t,i,c,o))}switch(n){case"input":Yl(t),mv(t,s,!1);break;case"textarea":Yl(t),gv(t);break;case"option":s.value!=null&&t.setAttribute("value",""+kr(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?bo(t,!!s.multiple,i,!1):s.defaultValue!=null&&bo(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=id)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)k1(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(W(166));if(n=ui(Mc.current),ui(Yn.current),iu(e)){if(s=e.stateNode,n=e.memoizedProps,s[$n]=e,(i=s.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:ru(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ru(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[$n]=e,e.stateNode=s}return At(e),null;case 13:if(Le(Be),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&an!==null&&e.mode&1&&!(e.flags&128))W0(),Mo(),e.flags|=98560,i=!1;else if(i=iu(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[$n]=e}else Mo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else Dn!==null&&(Lm(Dn),Dn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?ct===0&&(ct=3):yg())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return Fo(),Pm(t,e),t===null&&Dc(e.stateNode.containerInfo),At(e),null;case 10:return eg(e.type._context),At(e),null;case 17:return Jt(e.type)&&od(),At(e),null;case 19:if(Le(Be),i=e.memoizedState,i===null)return At(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Ua(i,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fd(t),o!==null){for(e.flags|=128,Ua(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(Be,Be.current&1|2),e.child}t=t.sibling}i.tail!==null&&et()>Uo&&(e.flags|=128,s=!0,Ua(i,!1),e.lanes=4194304)}else{if(!s)if(t=fd(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ua(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ze)return At(e),null}else 2*et()-i.renderingStartTime>Uo&&n!==1073741824&&(e.flags|=128,s=!0,Ua(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=et(),e.sibling=null,n=Be.current,Oe(Be,s?n&1|2:n&1),e):(At(e),null);case 22:case 23:return gg(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?nn&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function tk(t,e){switch(Yp(e),e.tag){case 1:return Jt(e.type)&&od(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fo(),Le(Xt),Le(Vt),ig(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rg(e),null;case 13:if(Le(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Mo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(Be),null;case 4:return Fo(),null;case 10:return eg(e.type._context),null;case 22:case 23:return gg(),null;case 24:return null;default:return null}}var cu=!1,Rt=!1,nk=typeof WeakSet=="function"?WeakSet:Set,ee=null;function To(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ye(t,e,s)}else n.current=null}function Cm(t,e,n){try{n()}catch(s){Ye(t,e,s)}}var i_=!1;function sk(t,e){if(mm=nd,t=R0(),Kp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var E;m!==n||r!==0&&m.nodeType!==3||(a=o+r),m!==i||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(E=m.firstChild)!==null;)g=m,m=E;for(;;){if(m===t)break t;if(g===n&&++d===r&&(a=o),g===i&&++f===s&&(c=o),(E=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=E}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pm={focusedElem:t,selectionRange:n},nd=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var N=S.memoizedProps,C=S.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?N:Pn(e.type,N),C);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(j){Ye(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return S=i_,i_=!1,S}function hc(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Cm(e,n,i)}r=r.next}while(r!==s)}}function oh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Rm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function A1(t){var e=t.alternate;e!==null&&(t.alternate=null,A1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$n],delete e[Oc],delete e[vm],delete e[FS],delete e[zS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N1(t){return t.tag===5||t.tag===3||t.tag===4}function o_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=id));else if(s!==4&&(t=t.child,t!==null))for(Dm(t,e,n),t=t.sibling;t!==null;)Dm(t,e,n),t=t.sibling}function jm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(jm(t,e,n),t=t.sibling;t!==null;)jm(t,e,n),t=t.sibling}var _t=null,Cn=!1;function Gs(t,e,n){for(n=n.child;n!==null;)P1(t,e,n),n=n.sibling}function P1(t,e,n){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(Jd,n)}catch{}switch(n.tag){case 5:Rt||To(n,e);case 6:var s=_t,r=Cn;_t=null,Gs(t,e,n),_t=s,Cn=r,_t!==null&&(Cn?(t=_t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_t.removeChild(n.stateNode));break;case 18:_t!==null&&(Cn?(t=_t,n=n.stateNode,t.nodeType===8?_f(t.parentNode,n):t.nodeType===1&&_f(t,n),Pc(t)):_f(_t,n.stateNode));break;case 4:s=_t,r=Cn,_t=n.stateNode.containerInfo,Cn=!0,Gs(t,e,n),_t=s,Cn=r;break;case 0:case 11:case 14:case 15:if(!Rt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Cm(n,e,o),r=r.next}while(r!==s)}Gs(t,e,n);break;case 1:if(!Rt&&(To(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Ye(n,e,a)}Gs(t,e,n);break;case 21:Gs(t,e,n);break;case 22:n.mode&1?(Rt=(s=Rt)||n.memoizedState!==null,Gs(t,e,n),Rt=s):Gs(t,e,n);break;default:Gs(t,e,n)}}function a_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nk),e.forEach(function(s){var r=hk.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Nn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:_t=a.stateNode,Cn=!1;break e;case 3:_t=a.stateNode.containerInfo,Cn=!0;break e;case 4:_t=a.stateNode.containerInfo,Cn=!0;break e}a=a.return}if(_t===null)throw Error(W(160));P1(i,o,r),_t=null,Cn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ye(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)C1(e,t),e=e.sibling}function C1(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),zn(t),s&4){try{hc(3,t,t.return),oh(3,t)}catch(N){Ye(t,t.return,N)}try{hc(5,t,t.return)}catch(N){Ye(t,t.return,N)}}break;case 1:Nn(e,t),zn(t),s&512&&n!==null&&To(n,n.return);break;case 5:if(Nn(e,t),zn(t),s&512&&n!==null&&To(n,n.return),t.flags&32){var r=t.stateNode;try{Sc(r,"")}catch(N){Ye(t,t.return,N)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Z2(r,i),rm(a,o);var d=rm(a,i);for(o=0;o<c.length;o+=2){var f=c[o],m=c[o+1];f==="style"?r0(r,m):f==="dangerouslySetInnerHTML"?n0(r,m):f==="children"?Sc(r,m):Op(r,f,m,d)}switch(a){case"input":Zf(r,i);break;case"textarea":e0(r,i);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?bo(r,!!i.multiple,E,!1):g!==!!i.multiple&&(i.defaultValue!=null?bo(r,!!i.multiple,i.defaultValue,!0):bo(r,!!i.multiple,i.multiple?[]:"",!1))}r[Oc]=i}catch(N){Ye(t,t.return,N)}}break;case 6:if(Nn(e,t),zn(t),s&4){if(t.stateNode===null)throw Error(W(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(N){Ye(t,t.return,N)}}break;case 3:if(Nn(e,t),zn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Pc(e.containerInfo)}catch(N){Ye(t,t.return,N)}break;case 4:Nn(e,t),zn(t);break;case 13:Nn(e,t),zn(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(mg=et())),s&4&&a_(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Rt=(d=Rt)||f,Nn(e,t),Rt=d):Nn(e,t),zn(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(ee=t,f=t.child;f!==null;){for(m=ee=f;ee!==null;){switch(g=ee,E=g.child,g.tag){case 0:case 11:case 14:case 15:hc(4,g,g.return);break;case 1:To(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){s=g,n=g.return;try{e=s,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(N){Ye(s,n,N)}}break;case 5:To(g,g.return);break;case 22:if(g.memoizedState!==null){l_(m);continue}}E!==null?(E.return=g,ee=E):l_(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{r=m.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=s0("display",o))}catch(N){Ye(t,t.return,N)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(N){Ye(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Nn(e,t),zn(t),s&4&&a_(t);break;case 21:break;default:Nn(e,t),zn(t)}}function zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(N1(n)){var s=n;break e}n=n.return}throw Error(W(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Sc(r,""),s.flags&=-33);var i=o_(t);jm(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=o_(t);Dm(t,a,o);break;default:throw Error(W(161))}}catch(c){Ye(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rk(t,e,n){ee=t,R1(t)}function R1(t,e,n){for(var s=(t.mode&1)!==0;ee!==null;){var r=ee,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||cu;if(!o){var a=r.alternate,c=a!==null&&a.memoizedState!==null||Rt;a=cu;var d=Rt;if(cu=o,(Rt=c)&&!d)for(ee=r;ee!==null;)o=ee,c=o.child,o.tag===22&&o.memoizedState!==null?u_(r):c!==null?(c.return=o,ee=c):u_(r);for(;i!==null;)ee=i,R1(i),i=i.sibling;ee=r,cu=a,Rt=d}c_(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ee=i):c_(t)}}function c_(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||oh(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Rt)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Gv(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Gv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Pc(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Rt||e.flags&512&&Rm(e)}catch(g){Ye(e,e.return,g)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function l_(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function u_(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{oh(4,e)}catch(c){Ye(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Ye(e,r,c)}}var i=e.return;try{Rm(e)}catch(c){Ye(e,i,c)}break;case 5:var o=e.return;try{Rm(e)}catch(c){Ye(e,o,c)}}}catch(c){Ye(e,e.return,c)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var ik=Math.ceil,gd=As.ReactCurrentDispatcher,hg=As.ReactCurrentOwner,wn=As.ReactCurrentBatchConfig,Se=0,pt=null,nt=null,Tt=0,nn=0,Io=Or(0),ct=0,Uc=null,Ti=0,ah=0,fg=0,fc=null,Kt=null,mg=0,Uo=1/0,us=null,yd=!1,Om=null,yr=null,lu=!1,lr=null,vd=0,mc=0,Vm=null,Ru=-1,Du=0;function Ft(){return Se&6?et():Ru!==-1?Ru:Ru=et()}function vr(t){return t.mode&1?Se&2&&Tt!==0?Tt&-Tt:BS.transition!==null?(Du===0&&(Du=g0()),Du):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:I0(t.type)),t):1}function Vn(t,e,n,s){if(50<mc)throw mc=0,Vm=null,Error(W(185));ll(t,n,s),(!(Se&2)||t!==pt)&&(t===pt&&(!(Se&2)&&(ah|=n),ct===4&&tr(t,Tt)),Zt(t,s),n===1&&Se===0&&!(e.mode&1)&&(Uo=et()+500,sh&&Vr()))}function Zt(t,e){var n=t.callbackNode;Bb(t,e);var s=td(t,t===pt?Tt:0);if(s===0)n!==null&&_v(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&_v(n),e===1)t.tag===0?US(d_.bind(null,t)):B0(d_.bind(null,t)),MS(function(){!(Se&6)&&Vr()}),n=null;else{switch(y0(s)){case 1:n=zp;break;case 4:n=m0;break;case 16:n=ed;break;case 536870912:n=p0;break;default:n=ed}n=z1(n,D1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function D1(t,e){if(Ru=-1,Du=0,Se&6)throw Error(W(327));var n=t.callbackNode;if(Po()&&t.callbackNode!==n)return null;var s=td(t,t===pt?Tt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=_d(t,s);else{e=s;var r=Se;Se|=2;var i=O1();(pt!==t||Tt!==e)&&(us=null,Uo=et()+500,mi(t,e));do try{ck();break}catch(a){j1(t,a)}while(!0);Zp(),gd.current=i,Se=r,nt!==null?e=0:(pt=null,Tt=0,e=ct)}if(e!==0){if(e===2&&(r=lm(t),r!==0&&(s=r,e=Mm(t,r))),e===1)throw n=Uc,mi(t,0),tr(t,s),Zt(t,et()),n;if(e===6)tr(t,s);else{if(r=t.current.alternate,!(s&30)&&!ok(r)&&(e=_d(t,s),e===2&&(i=lm(t),i!==0&&(s=i,e=Mm(t,i))),e===1))throw n=Uc,mi(t,0),tr(t,s),Zt(t,et()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(W(345));case 2:ei(t,Kt,us);break;case 3:if(tr(t,s),(s&130023424)===s&&(e=mg+500-et(),10<e)){if(td(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){Ft(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ym(ei.bind(null,t,Kt,us),e);break}ei(t,Kt,us);break;case 4:if(tr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-On(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=et()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*ik(s/1960))-s,10<s){t.timeoutHandle=ym(ei.bind(null,t,Kt,us),s);break}ei(t,Kt,us);break;case 5:ei(t,Kt,us);break;default:throw Error(W(329))}}}return Zt(t,et()),t.callbackNode===n?D1.bind(null,t):null}function Mm(t,e){var n=fc;return t.current.memoizedState.isDehydrated&&(mi(t,e).flags|=256),t=_d(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&Lm(e)),t}function Lm(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function ok(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Mn(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~fg,e&=~ah,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-On(e),s=1<<n;t[n]=-1,e&=~s}}function d_(t){if(Se&6)throw Error(W(327));Po();var e=td(t,0);if(!(e&1))return Zt(t,et()),null;var n=_d(t,e);if(t.tag!==0&&n===2){var s=lm(t);s!==0&&(e=s,n=Mm(t,s))}if(n===1)throw n=Uc,mi(t,0),tr(t,e),Zt(t,et()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ei(t,Kt,us),Zt(t,et()),null}function pg(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(Uo=et()+500,sh&&Vr())}}function Ii(t){lr!==null&&lr.tag===0&&!(Se&6)&&Po();var e=Se;Se|=1;var n=wn.transition,s=Ce;try{if(wn.transition=null,Ce=1,t)return t()}finally{Ce=s,wn.transition=n,Se=e,!(Se&6)&&Vr()}}function gg(){nn=Io.current,Le(Io)}function mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,VS(n)),nt!==null)for(n=nt.return;n!==null;){var s=n;switch(Yp(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&od();break;case 3:Fo(),Le(Xt),Le(Vt),ig();break;case 5:rg(s);break;case 4:Fo();break;case 13:Le(Be);break;case 19:Le(Be);break;case 10:eg(s.type._context);break;case 22:case 23:gg()}n=n.return}if(pt=t,nt=t=_r(t.current,null),Tt=nn=e,ct=0,Uc=null,fg=ah=Ti=0,Kt=fc=null,li!==null){for(e=0;e<li.length;e++)if(n=li[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}li=null}return t}function j1(t,e){do{var n=nt;try{if(Zp(),Nu.current=pd,md){for(var s=qe.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}md=!1}if(Ei=0,mt=at=qe=null,dc=!1,Lc=0,hg.current=null,n===null||n.return===null){ct=1,Uc=e,nt=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Tt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=Jv(o);if(E!==null){E.flags&=-257,Zv(E,o,a,i,e),E.mode&1&&Xv(i,d,e),e=E,c=d;var S=e.updateQueue;if(S===null){var N=new Set;N.add(c),e.updateQueue=N}else S.add(c);break e}else{if(!(e&1)){Xv(i,d,e),yg();break e}c=Error(W(426))}}else if(ze&&a.mode&1){var C=Jv(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Zv(C,o,a,i,e),Xp(zo(c,a));break e}}i=c=zo(c,a),ct!==4&&(ct=2),fc===null?fc=[i]:fc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=y1(i,c,e);Wv(i,x);break e;case 1:a=c;var v=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(yr===null||!yr.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=v1(i,a,e);Wv(i,j);break e}}i=i.return}while(i!==null)}M1(n)}catch(L){e=L,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function O1(){var t=gd.current;return gd.current=pd,t===null?pd:t}function yg(){(ct===0||ct===3||ct===2)&&(ct=4),pt===null||!(Ti&268435455)&&!(ah&268435455)||tr(pt,Tt)}function _d(t,e){var n=Se;Se|=2;var s=O1();(pt!==t||Tt!==e)&&(us=null,mi(t,e));do try{ak();break}catch(r){j1(t,r)}while(!0);if(Zp(),Se=n,gd.current=s,nt!==null)throw Error(W(261));return pt=null,Tt=0,ct}function ak(){for(;nt!==null;)V1(nt)}function ck(){for(;nt!==null&&!Db();)V1(nt)}function V1(t){var e=F1(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?M1(t):nt=e,hg.current=null}function M1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tk(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,nt=null;return}}else if(n=ek(n,e,nn),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);ct===0&&(ct=5)}function ei(t,e,n){var s=Ce,r=wn.transition;try{wn.transition=null,Ce=1,lk(t,e,n,s)}finally{wn.transition=r,Ce=s}return null}function lk(t,e,n,s){do Po();while(lr!==null);if(Se&6)throw Error(W(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if($b(t,i),t===pt&&(nt=pt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lu||(lu=!0,z1(ed,function(){return Po(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=wn.transition,wn.transition=null;var o=Ce;Ce=1;var a=Se;Se|=4,hg.current=null,sk(t,n),C1(n,t),NS(pm),nd=!!mm,pm=mm=null,t.current=n,rk(n),jb(),Se=a,Ce=o,wn.transition=i}else t.current=n;if(lu&&(lu=!1,lr=t,vd=r),i=t.pendingLanes,i===0&&(yr=null),Mb(n.stateNode),Zt(t,et()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(yd)throw yd=!1,t=Om,Om=null,t;return vd&1&&t.tag!==0&&Po(),i=t.pendingLanes,i&1?t===Vm?mc++:(mc=0,Vm=t):mc=0,Vr(),null}function Po(){if(lr!==null){var t=y0(vd),e=wn.transition,n=Ce;try{if(wn.transition=null,Ce=16>t?16:t,lr===null)var s=!1;else{if(t=lr,lr=null,vd=0,Se&6)throw Error(W(331));var r=Se;for(Se|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(ee=d;ee!==null;){var f=ee;switch(f.tag){case 0:case 11:case 15:hc(8,f,i)}var m=f.child;if(m!==null)m.return=f,ee=m;else for(;ee!==null;){f=ee;var g=f.sibling,E=f.return;if(A1(f),f===d){ee=null;break}if(g!==null){g.return=E,ee=g;break}ee=E}}}var S=i.alternate;if(S!==null){var N=S.child;if(N!==null){S.child=null;do{var C=N.sibling;N.sibling=null,N=C}while(N!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:hc(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ee=x;break e}ee=i.return}}var v=t.current;for(ee=v;ee!==null;){o=ee;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ee=I;else e:for(o=v;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:oh(9,a)}}catch(L){Ye(a,a.return,L)}if(a===o){ee=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,ee=j;break e}ee=a.return}}if(Se=r,Vr(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(Jd,t)}catch{}s=!0}return s}finally{Ce=n,wn.transition=e}}return!1}function h_(t,e,n){e=zo(n,e),e=y1(t,e,1),t=gr(t,e,1),e=Ft(),t!==null&&(ll(t,1,e),Zt(t,e))}function Ye(t,e,n){if(t.tag===3)h_(t,t,n);else for(;e!==null;){if(e.tag===3){h_(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(yr===null||!yr.has(s))){t=zo(n,t),t=v1(e,t,1),e=gr(e,t,1),t=Ft(),e!==null&&(ll(e,1,t),Zt(e,t));break}}e=e.return}}function uk(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Ft(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(Tt&n)===n&&(ct===4||ct===3&&(Tt&130023424)===Tt&&500>et()-mg?mi(t,0):fg|=n),Zt(t,e)}function L1(t,e){e===0&&(t.mode&1?(e=Zl,Zl<<=1,!(Zl&130023424)&&(Zl=4194304)):e=1);var n=Ft();t=Ts(t,e),t!==null&&(ll(t,e,n),Zt(t,n))}function dk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),L1(t,n)}function hk(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(W(314))}s!==null&&s.delete(e),L1(t,n)}var F1;F1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,ZS(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,ze&&e.flags&1048576&&$0(e,ld,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Cu(t,e),t=e.pendingProps;var r=Vo(e,Vt.current);No(e,n),r=ag(null,e,s,t,r,n);var i=cg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(s)?(i=!0,ad(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ng(e),r.updater=ih,e.stateNode=r,r._reactInternals=e,xm(e,s,t,n),e=km(null,e,s,!0,i,n)):(e.tag=0,ze&&i&&Qp(e),Mt(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Cu(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=mk(s),t=Pn(s,t),r){case 0:e=Sm(null,e,s,t,n);break e;case 1:e=n_(null,e,s,t,n);break e;case 11:e=e_(null,e,s,t,n);break e;case 14:e=t_(null,e,s,Pn(s.type,t),n);break e}throw Error(W(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pn(s,r),Sm(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pn(s,r),n_(t,e,s,r,n);case 3:e:{if(T1(e),t===null)throw Error(W(387));s=e.pendingProps,i=e.memoizedState,r=i.element,Q0(t,e),hd(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=zo(Error(W(423)),e),e=s_(t,e,s,n,r);break e}else if(s!==r){r=zo(Error(W(424)),e),e=s_(t,e,s,n,r);break e}else for(an=pr(e.stateNode.containerInfo.firstChild),ln=e,ze=!0,Dn=null,n=H0(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mo(),s===r){e=Is(t,e,n);break e}Mt(t,e,s,n)}e=e.child}return e;case 5:return Y0(e),t===null&&Em(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,gm(s,r)?o=null:i!==null&&gm(s,i)&&(e.flags|=32),E1(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&Em(e),null;case 13:return I1(t,e,n);case 4:return sg(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Lo(e,null,s,n):Mt(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pn(s,r),e_(t,e,s,r,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Oe(ud,s._currentValue),s._currentValue=o,i!==null)if(Mn(i.value,o)){if(i.children===r.children&&!Xt.current){e=Is(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=vs(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Tm(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Tm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Mt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,No(e,n),r=Tn(r),s=s(r),e.flags|=1,Mt(t,e,s,n),e.child;case 14:return s=e.type,r=Pn(s,e.pendingProps),r=Pn(s.type,r),t_(t,e,s,r,n);case 15:return _1(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pn(s,r),Cu(t,e),e.tag=1,Jt(s)?(t=!0,ad(e)):t=!1,No(e,n),g1(e,s,r),xm(e,s,r,n),km(null,e,s,!0,t,n);case 19:return x1(t,e,n);case 22:return w1(t,e,n)}throw Error(W(156,e.tag))};function z1(t,e){return f0(t,e)}function fk(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,s){return new fk(t,e,n,s)}function vg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mk(t){if(typeof t=="function")return vg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mp)return 11;if(t===Lp)return 14}return 2}function _r(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ju(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")vg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fo:return pi(n.children,r,i,e);case Vp:o=8,r|=8;break;case Kf:return t=vn(12,n,e,r|2),t.elementType=Kf,t.lanes=i,t;case Qf:return t=vn(13,n,e,r),t.elementType=Qf,t.lanes=i,t;case Yf:return t=vn(19,n,e,r),t.elementType=Yf,t.lanes=i,t;case Y2:return ch(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K2:o=10;break e;case Q2:o=9;break e;case Mp:o=11;break e;case Lp:o=14;break e;case Js:o=16,s=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=vn(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function pi(t,e,n,s){return t=vn(7,t,s,e),t.lanes=n,t}function ch(t,e,n,s){return t=vn(22,t,s,e),t.elementType=Y2,t.lanes=n,t.stateNode={isHidden:!1},t}function kf(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function Af(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pk(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cf(0),this.expirationTimes=cf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cf(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function _g(t,e,n,s,r,i,o,a,c){return t=new pk(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=vn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ng(i),t}function gk(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ho,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function U1(t){if(!t)return Ar;t=t._reactInternals;e:{if(Mi(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Jt(n))return U0(t,n,e)}return e}function B1(t,e,n,s,r,i,o,a,c){return t=_g(n,s,!0,t,r,i,o,a,c),t.context=U1(null),n=t.current,s=Ft(),r=vr(n),i=vs(s,r),i.callback=e??null,gr(n,i,r),t.current.lanes=r,ll(t,r,s),Zt(t,s),t}function lh(t,e,n,s){var r=e.current,i=Ft(),o=vr(r);return n=U1(n),e.context===null?e.context=n:e.pendingContext=n,e=vs(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=gr(r,e,o),t!==null&&(Vn(t,r,o,i),Au(t,r,o)),o}function wd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function f_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wg(t,e){f_(t,e),(t=t.alternate)&&f_(t,e)}function yk(){return null}var $1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Eg(t){this._internalRoot=t}uh.prototype.render=Eg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));lh(t,e,null,null)};uh.prototype.unmount=Eg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ii(function(){lh(null,t,null,null)}),e[Es]=null}};function uh(t){this._internalRoot=t}uh.prototype.unstable_scheduleHydration=function(t){if(t){var e=w0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&T0(t)}};function Tg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function m_(){}function vk(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=wd(o);i.call(d)}}var o=B1(e,s,t,0,null,!1,!1,"",m_);return t._reactRootContainer=o,t[Es]=o.current,Dc(t.nodeType===8?t.parentNode:t),Ii(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var d=wd(c);a.call(d)}}var c=_g(t,0,!1,null,null,!1,!1,"",m_);return t._reactRootContainer=c,t[Es]=c.current,Dc(t.nodeType===8?t.parentNode:t),Ii(function(){lh(e,c,n,s)}),c}function hh(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var c=wd(o);a.call(c)}}lh(e,o,t,r)}else o=vk(n,e,t,r,s);return wd(o)}v0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xa(e.pendingLanes);n!==0&&(Up(e,n|1),Zt(e,et()),!(Se&6)&&(Uo=et()+500,Vr()))}break;case 13:Ii(function(){var s=Ts(t,1);if(s!==null){var r=Ft();Vn(s,t,1,r)}}),wg(t,1)}};Bp=function(t){if(t.tag===13){var e=Ts(t,134217728);if(e!==null){var n=Ft();Vn(e,t,134217728,n)}wg(t,134217728)}};_0=function(t){if(t.tag===13){var e=vr(t),n=Ts(t,e);if(n!==null){var s=Ft();Vn(n,t,e,s)}wg(t,e)}};w0=function(){return Ce};E0=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};om=function(t,e,n){switch(e){case"input":if(Zf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=nh(s);if(!r)throw Error(W(90));J2(s),Zf(s,r)}}}break;case"textarea":e0(t,n);break;case"select":e=n.value,e!=null&&bo(t,!!n.multiple,e,!1)}};a0=pg;c0=Ii;var _k={usingClientEntryPoint:!1,Events:[dl,yo,nh,i0,o0,pg]},Ba={findFiberByHostInstance:ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wk={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:As.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=d0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||yk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{Jd=uu.inject(wk),Qn=uu}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_k;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tg(e))throw Error(W(200));return gk(t,e,null,n)};hn.createRoot=function(t,e){if(!Tg(t))throw Error(W(299));var n=!1,s="",r=$1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=_g(t,1,!1,null,null,n,!1,s,r),t[Es]=e.current,Dc(t.nodeType===8?t.parentNode:t),new Eg(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=d0(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return Ii(t)};hn.hydrate=function(t,e,n){if(!dh(e))throw Error(W(200));return hh(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!Tg(t))throw Error(W(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=$1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=B1(e,null,t,1,n??null,r,!1,i,o),t[Es]=e.current,Dc(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new uh(e)};hn.render=function(t,e,n){if(!dh(e))throw Error(W(200));return hh(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!dh(t))throw Error(W(40));return t._reactRootContainer?(Ii(function(){hh(null,null,t,!1,function(){t._reactRootContainer=null,t[Es]=null})}),!0):!1};hn.unstable_batchedUpdates=pg;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!dh(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return hh(t,e,n,!1,s)};hn.version="18.3.1-next-f1338f8080-20240426";function q1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q1)}catch(t){console.error(t)}}q1(),q2.exports=hn;var Ek=q2.exports,p_=Ek;Gf.createRoot=p_.createRoot,Gf.hydrateRoot=p_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bc(){return Bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Bc.apply(this,arguments)}var ur;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ur||(ur={}));const g_="popstate";function Tk(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:o,hash:a}=s.location;return Fm("",{pathname:i,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Ed(r)}return xk(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function W1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ik(){return Math.random().toString(36).substr(2,8)}function y_(t,e){return{usr:t.state,key:t.key,idx:e}}function Fm(t,e,n,s){return n===void 0&&(n=null),Bc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oa(e):e,{state:n,key:e&&e.key||s||Ik()})}function Ed(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function oa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function xk(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,a=ur.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(Bc({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){a=ur.Pop;let C=f(),x=C==null?null:C-d;d=C,c&&c({action:a,location:N.location,delta:x})}function g(C,x){a=ur.Push;let v=Fm(N.location,C,x);d=f()+1;let I=y_(v,d),j=N.createHref(v);try{o.pushState(I,"",j)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(j)}i&&c&&c({action:a,location:N.location,delta:1})}function E(C,x){a=ur.Replace;let v=Fm(N.location,C,x);d=f();let I=y_(v,d),j=N.createHref(v);o.replaceState(I,"",j),i&&c&&c({action:a,location:N.location,delta:0})}function S(C){let x=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof C=="string"?C:Ed(C);return v=v.replace(/ $/,"%20"),We(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let N={get action(){return a},get location(){return t(r,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(g_,m),c=C,()=>{r.removeEventListener(g_,m),c=null}},createHref(C){return e(r,C)},createURL:S,encodeLocation(C){let x=S(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:E,go(C){return o.go(C)}};return N}var v_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(v_||(v_={}));function bk(t,e,n){return n===void 0&&(n="/"),Sk(t,e,n)}function Sk(t,e,n,s){let r=typeof e=="string"?oa(e):e,i=Bo(r.pathname||"/",n);if(i==null)return null;let o=G1(t);kk(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=Lk(i);a=Vk(o[c],d)}return a}function G1(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(We(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=wr([s,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(We(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),G1(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:jk(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))r(i,o);else for(let c of H1(i.path))r(i,o,c)}),e}function H1(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=H1(s.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function kk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Ok(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const Ak=/^:[\w-]+$/,Nk=3,Pk=2,Ck=1,Rk=10,Dk=-2,__=t=>t==="*";function jk(t,e){let n=t.split("/"),s=n.length;return n.some(__)&&(s+=Dk),e&&(s+=Pk),n.filter(r=>!__(r)).reduce((r,i)=>r+(Ak.test(i)?Nk:i===""?Ck:Rk),s)}function Ok(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function Vk(t,e,n){let{routesMeta:s}=t,r={},i="/",o=[];for(let a=0;a<s.length;++a){let c=s[a],d=a===s.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=zm({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!m)return null;Object.assign(r,m.params),o.push({params:r,pathname:wr([i,m.pathname]),pathnameBase:Bk(wr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=wr([i,m.pathnameBase]))}return o}function zm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=Mk(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce((d,f,m)=>{let{paramName:g,isOptional:E}=f;if(g==="*"){let N=a[m]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const S=a[m];return E&&!S?d[g]=void 0:d[g]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Mk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),W1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(s.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function Lk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return W1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function Fk(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?oa(t):t;return{pathname:n?n.startsWith("/")?n:zk(n,e):e,search:$k(s),hash:qk(r)}}function zk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Nf(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Uk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ig(t,e){let n=Uk(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function xg(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=oa(t):(r=Bc({},t),We(!r.pathname||!r.pathname.includes("?"),Nf("?","pathname","search",r)),We(!r.pathname||!r.pathname.includes("#"),Nf("#","pathname","hash",r)),We(!r.search||!r.search.includes("#"),Nf("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;r.pathname=g.join("/")}a=m>=0?e[m]:"/"}let c=Fk(r,a),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const wr=t=>t.join("/").replace(/\/\/+/g,"/"),Bk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$k=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Wk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const K1=["post","put","patch","delete"];new Set(K1);const Gk=["get",...K1];new Set(Gk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $c(){return $c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},$c.apply(this,arguments)}const fh=A.createContext(null),Q1=A.createContext(null),Ns=A.createContext(null),mh=A.createContext(null),Ps=A.createContext({outlet:null,matches:[],isDataRoute:!1}),Y1=A.createContext(null);function Hk(t,e){let{relative:n}=e===void 0?{}:e;aa()||We(!1);let{basename:s,navigator:r}=A.useContext(Ns),{hash:i,pathname:o,search:a}=gh(t,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:wr([s,o])),r.createHref({pathname:c,search:a,hash:i})}function aa(){return A.useContext(mh)!=null}function ca(){return aa()||We(!1),A.useContext(mh).location}function X1(t){A.useContext(Ns).static||A.useLayoutEffect(t)}function ph(){let{isDataRoute:t}=A.useContext(Ps);return t?cA():Kk()}function Kk(){aa()||We(!1);let t=A.useContext(fh),{basename:e,future:n,navigator:s}=A.useContext(Ns),{matches:r}=A.useContext(Ps),{pathname:i}=ca(),o=JSON.stringify(Ig(r,n.v7_relativeSplatPath)),a=A.useRef(!1);return X1(()=>{a.current=!0}),A.useCallback(function(d,f){if(f===void 0&&(f={}),!a.current)return;if(typeof d=="number"){s.go(d);return}let m=xg(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:wr([e,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[e,s,o,i,t])}const Qk=A.createContext(null);function Yk(t){let e=A.useContext(Ps).outlet;return e&&A.createElement(Qk.Provider,{value:t},e)}function gh(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=A.useContext(Ns),{matches:r}=A.useContext(Ps),{pathname:i}=ca(),o=JSON.stringify(Ig(r,s.v7_relativeSplatPath));return A.useMemo(()=>xg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Xk(t,e){return Jk(t,e)}function Jk(t,e,n,s){aa()||We(!1);let{navigator:r}=A.useContext(Ns),{matches:i}=A.useContext(Ps),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=ca(),f;if(e){var m;let C=typeof e=="string"?oa(e):e;c==="/"||(m=C.pathname)!=null&&m.startsWith(c)||We(!1),f=C}else f=d;let g=f.pathname||"/",E=g;if(c!=="/"){let C=c.replace(/^\//,"").split("/");E="/"+g.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=bk(t,{pathname:E}),N=sA(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:wr([c,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:wr([c,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,s);return e&&N?A.createElement(mh.Provider,{value:{location:$c({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ur.Pop}},N):N}function Zk(){let t=aA(),e=Wk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:r},n):null,null)}const eA=A.createElement(Zk,null);class tA extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Ps.Provider,{value:this.props.routeContext},A.createElement(Y1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nA(t){let{routeContext:e,match:n,children:s}=t,r=A.useContext(fh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Ps.Provider,{value:e},s)}function sA(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let f=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);f>=0||We(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:E}=n,S=m.route.loader&&g[m.route.id]===void 0&&(!E||E[m.route.id]===void 0);if(m.route.lazy||S){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let E,S=!1,N=null,C=null;n&&(E=a&&m.route.id?a[m.route.id]:void 0,N=m.route.errorElement||eA,c&&(d<0&&g===0?(lA("route-fallback"),S=!0,C=null):d===g&&(S=!0,C=m.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),v=()=>{let I;return E?I=N:S?I=C:m.route.Component?I=A.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=f,A.createElement(nA,{match:m,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:I})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?A.createElement(tA,{location:n.location,revalidation:n.revalidation,component:N,error:E,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var J1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(J1||{}),Z1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Z1||{});function rA(t){let e=A.useContext(fh);return e||We(!1),e}function iA(t){let e=A.useContext(Q1);return e||We(!1),e}function oA(t){let e=A.useContext(Ps);return e||We(!1),e}function eE(t){let e=oA(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function aA(){var t;let e=A.useContext(Y1),n=iA(),s=eE();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function cA(){let{router:t}=rA(J1.UseNavigateStable),e=eE(Z1.UseNavigateStable),n=A.useRef(!1);return X1(()=>{n.current=!0}),A.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,$c({fromRouteId:e},i)))},[t,e])}const w_={};function lA(t,e,n){w_[t]||(w_[t]=!0)}function uA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Td(t){let{to:e,replace:n,state:s,relative:r}=t;aa()||We(!1);let{future:i,static:o}=A.useContext(Ns),{matches:a}=A.useContext(Ps),{pathname:c}=ca(),d=ph(),f=xg(e,Ig(a,i.v7_relativeSplatPath),c,r==="path"),m=JSON.stringify(f);return A.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:r}),[d,m,r,n,s]),null}function dA(t){return Yk(t.context)}function pn(t){We(!1)}function hA(t){let{basename:e="/",children:n=null,location:s,navigationType:r=ur.Pop,navigator:i,static:o=!1,future:a}=t;aa()&&We(!1);let c=e.replace(/^\/*/,"/"),d=A.useMemo(()=>({basename:c,navigator:i,static:o,future:$c({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof s=="string"&&(s=oa(s));let{pathname:f="/",search:m="",hash:g="",state:E=null,key:S="default"}=s,N=A.useMemo(()=>{let C=Bo(f,c);return C==null?null:{location:{pathname:C,search:m,hash:g,state:E,key:S},navigationType:r}},[c,f,m,g,E,S,r]);return N==null?null:A.createElement(Ns.Provider,{value:d},A.createElement(mh.Provider,{children:n,value:N}))}function fA(t){let{children:e,location:n}=t;return Xk(Um(e),n)}new Promise(()=>{});function Um(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(s,r)=>{if(!A.isValidElement(s))return;let i=[...e,r];if(s.type===A.Fragment){n.push.apply(n,Um(s.props.children,i));return}s.type!==pn&&We(!1),!s.props.index||!s.props.children||We(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Um(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Id(){return Id=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Id.apply(this,arguments)}function tE(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function mA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pA(t,e){return t.button===0&&(!e||e==="_self")&&!mA(t)}const gA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],vA="6";try{window.__reactRouterVersion=vA}catch{}const _A=A.createContext({isTransitioning:!1}),wA="startTransition",E_=ub[wA];function EA(t){let{basename:e,children:n,future:s,window:r}=t,i=A.useRef();i.current==null&&(i.current=Tk({window:r,v5Compat:!0}));let o=i.current,[a,c]=A.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},f=A.useCallback(m=>{d&&E_?E_(()=>c(m)):c(m)},[c,d]);return A.useLayoutEffect(()=>o.listen(f),[o,f]),A.useEffect(()=>uA(s),[s]),A.createElement(hA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:s})}const TA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xA=A.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:o,state:a,target:c,to:d,preventScrollReset:f,viewTransition:m}=e,g=tE(e,gA),{basename:E}=A.useContext(Ns),S,N=!1;if(typeof d=="string"&&IA.test(d)&&(S=d,TA))try{let I=new URL(window.location.href),j=d.startsWith("//")?new URL(I.protocol+d):new URL(d),L=Bo(j.pathname,E);j.origin===I.origin&&L!=null?d=L+j.search+j.hash:N=!0}catch{}let C=Hk(d,{relative:r}),x=SA(d,{replace:o,state:a,target:c,preventScrollReset:f,relative:r,viewTransition:m});function v(I){s&&s(I),I.defaultPrevented||x(I)}return A.createElement("a",Id({},g,{href:S||C,onClick:N||i?s:v,ref:n,target:c}))}),Zi=A.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:r=!1,className:i="",end:o=!1,style:a,to:c,viewTransition:d,children:f}=e,m=tE(e,yA),g=gh(c,{relative:m.relative}),E=ca(),S=A.useContext(Q1),{navigator:N,basename:C}=A.useContext(Ns),x=S!=null&&kA(g)&&d===!0,v=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,I=E.pathname,j=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(I=I.toLowerCase(),j=j?j.toLowerCase():null,v=v.toLowerCase()),j&&C&&(j=Bo(j,C)||j);const L=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let M=I===v||!o&&I.startsWith(v)&&I.charAt(L)==="/",w=j!=null&&(j===v||!o&&j.startsWith(v)&&j.charAt(v.length)==="/"),y={isActive:M,isPending:w,isTransitioning:x},T=M?s:void 0,k;typeof i=="function"?k=i(y):k=[i,M?"active":null,w?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(y):a;return A.createElement(xA,Id({},m,{"aria-current":T,className:k,ref:n,style:R,to:c,viewTransition:d}),typeof f=="function"?f(y):f)});var Bm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Bm||(Bm={}));var T_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(T_||(T_={}));function bA(t){let e=A.useContext(fh);return e||We(!1),e}function SA(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,c=ph(),d=ca(),f=gh(t,{relative:o});return A.useCallback(m=>{if(pA(m,n)){m.preventDefault();let g=s!==void 0?s:Ed(d)===Ed(f);c(t,{replace:g,state:r,preventScrollReset:i,relative:o,viewTransition:a})}},[d,c,f,s,r,n,t,i,o,a])}function kA(t,e){e===void 0&&(e={});let n=A.useContext(_A);n==null&&We(!1);let{basename:s}=bA(Bm.useViewTransitionState),r=gh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Bo(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Bo(n.nextLocation.pathname,s)||n.nextLocation.pathname;return zm(r.pathname,o)!=null||zm(r.pathname,i)!=null}const AA=()=>{};var I_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},NA=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},sE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,f=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|d>>6,E=d&63;c||(E=64,o||(g=64)),s.push(n[f],n[m],n[g],n[E])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||d==null||m==null)throw new PA;const g=i<<2|a>>4;if(s.push(g),d!==64){const E=a<<4&240|d>>2;if(s.push(E),m!==64){const S=d<<6&192|m;s.push(S)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CA=function(t){const e=nE(t);return sE.encodeByteArray(e,!0)},xd=function(t){return CA(t).replace(/\./g,"")},rE=function(t){try{return sE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=()=>iE().__FIREBASE_DEFAULTS__,DA=()=>{if(typeof process>"u"||typeof I_>"u")return;const t=I_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rE(t[1]);return e&&JSON.parse(e)},yh=()=>{try{return AA()||RA()||DA()||jA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oE=t=>{var e,n;return(n=(e=yh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aE=t=>{const e=oE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},cE=()=>{var t;return(t=yh())===null||t===void 0?void 0:t.config},lE=t=>{var e;return(e=yh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){return t.endsWith(".cloudworkstations.dev")}async function bg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xd(JSON.stringify(n)),xd(JSON.stringify(o)),""].join(".")}const pc={};function MA(){const t={prod:[],emulator:[]};for(const e of Object.keys(pc))pc[e]?t.emulator.push(e):t.prod.push(e);return t}function LA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let x_=!1;function Sg(t,e){if(typeof window>"u"||typeof document>"u"||!Li(window.location.host)||pc[t]===e||pc[t]||x_)return;pc[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=MA().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,E){g.setAttribute("width","24"),g.setAttribute("id",E),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{x_=!0,o()},g}function f(g,E){g.setAttribute("id",E),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=LA(s),E=n("text"),S=document.getElementById(E)||document.createElement("span"),N=n("learnmore"),C=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),v=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;a(I),f(C,N);const j=d();c(v,x),I.append(v,S,C,j),document.body.appendChild(I)}i?(S.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function uE(){var t;const e=(t=yh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $A(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dE(){return!uE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hE(){return!uE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function fE(){try{return typeof indexedDB=="object"}catch{return!1}}function qA(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="FirebaseError";class Cs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=WA,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fl.prototype.create)}}class fl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?GA(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Cs(r,a,s)}}function GA(t,e){return t.replace(HA,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const HA=/\{\$([^}]+)}/g;function KA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xi(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(b_(i)&&b_(o)){if(!xi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function b_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Za(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function ec(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function QA(t,e){const n=new YA(t,e);return n.subscribe.bind(n)}class YA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");XA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Pf),r.error===void 0&&(r.error=Pf),r.complete===void 0&&(r.complete=Pf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class Nr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new OA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eN(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ZA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZA(t){return t===ti?void 0:t}function eN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const nN={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},sN=ve.INFO,rN={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},iN=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=rN[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kg{constructor(e){this.name=e,this._logLevel=sN,this._logHandler=iN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const oN=(t,e)=>e.some(n=>t instanceof n);let S_,k_;function aN(){return S_||(S_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cN(){return k_||(k_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mE=new WeakMap,$m=new WeakMap,pE=new WeakMap,Cf=new WeakMap,Ag=new WeakMap;function lN(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Er(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mE.set(n,t)}).catch(()=>{}),Ag.set(e,t),e}function uN(t){if($m.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$m.set(t,e)}let qm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $m.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dN(t){qm=t(qm)}function hN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Rf(this),e,...n);return pE.set(s,e.sort?e.sort():[e]),Er(s)}:cN().includes(t)?function(...e){return t.apply(Rf(this),e),Er(mE.get(this))}:function(...e){return Er(t.apply(Rf(this),e))}}function fN(t){return typeof t=="function"?hN(t):(t instanceof IDBTransaction&&uN(t),oN(t,aN())?new Proxy(t,qm):t)}function Er(t){if(t instanceof IDBRequest)return lN(t);if(Cf.has(t))return Cf.get(t);const e=fN(t);return e!==t&&(Cf.set(t,e),Ag.set(e,t)),e}const Rf=t=>Ag.get(t);function mN(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Er(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Er(o.result),c.oldVersion,c.newVersion,Er(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const pN=["get","getKey","getAll","getAllKeys","count"],gN=["put","add","delete","clear"],Df=new Map;function A_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Df.get(e))return Df.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=gN.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||pN.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),r&&c.done]))[0]};return Df.set(e,i),i}dN(t=>({...t,get:(e,n,s)=>A_(e,n)||t.get(e,n,s),has:(e,n)=>!!A_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vN(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function vN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wm="@firebase/app",N_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new kg("@firebase/app"),_N="@firebase/app-compat",wN="@firebase/analytics-compat",EN="@firebase/analytics",TN="@firebase/app-check-compat",IN="@firebase/app-check",xN="@firebase/auth",bN="@firebase/auth-compat",SN="@firebase/database",kN="@firebase/data-connect",AN="@firebase/database-compat",NN="@firebase/functions",PN="@firebase/functions-compat",CN="@firebase/installations",RN="@firebase/installations-compat",DN="@firebase/messaging",jN="@firebase/messaging-compat",ON="@firebase/performance",VN="@firebase/performance-compat",MN="@firebase/remote-config",LN="@firebase/remote-config-compat",FN="@firebase/storage",zN="@firebase/storage-compat",UN="@firebase/firestore",BN="@firebase/ai",$N="@firebase/firestore-compat",qN="firebase",WN="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",GN={[Wm]:"fire-core",[_N]:"fire-core-compat",[EN]:"fire-analytics",[wN]:"fire-analytics-compat",[IN]:"fire-app-check",[TN]:"fire-app-check-compat",[xN]:"fire-auth",[bN]:"fire-auth-compat",[SN]:"fire-rtdb",[kN]:"fire-data-connect",[AN]:"fire-rtdb-compat",[NN]:"fire-fn",[PN]:"fire-fn-compat",[CN]:"fire-iid",[RN]:"fire-iid-compat",[DN]:"fire-fcm",[jN]:"fire-fcm-compat",[ON]:"fire-perf",[VN]:"fire-perf-compat",[MN]:"fire-rc",[LN]:"fire-rc-compat",[FN]:"fire-gcs",[zN]:"fire-gcs-compat",[UN]:"fire-fst",[$N]:"fire-fst-compat",[BN]:"fire-vertex","fire-js":"fire-js",[qN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Map,HN=new Map,Hm=new Map;function P_(t,e){try{t.container.addComponent(e)}catch(n){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bi(t){const e=t.name;if(Hm.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;Hm.set(e,t);for(const n of bd.values())P_(n,t);for(const n of HN.values())P_(n,t);return!0}function vh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new fl("app","Firebase",KN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=WN;function gE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Gm,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw Tr.create("bad-app-name",{appName:String(r)});if(n||(n=cE()),!n)throw Tr.create("no-options");const i=bd.get(r);if(i){if(xi(n,i.options)&&xi(s,i.config))return i;throw Tr.create("duplicate-app",{appName:r})}const o=new tN(r);for(const c of Hm.values())o.addComponent(c);const a=new QN(n,s,o);return bd.set(r,a),a}function Ng(t=Gm){const e=bd.get(t);if(!e&&t===Gm&&cE())return gE();if(!e)throw Tr.create("no-app",{appName:t});return e}function Xn(t,e,n){var s;let r=(s=GN[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(a.join(" "));return}bi(new Nr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="firebase-heartbeat-database",XN=1,qc="firebase-heartbeat-store";let jf=null;function yE(){return jf||(jf=mN(YN,XN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),jf}async function JN(t){try{const n=(await yE()).transaction(qc),s=await n.objectStore(qc).get(vE(t));return await n.done,s}catch(e){if(e instanceof Cs)xs.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(n.message)}}}async function C_(t,e){try{const s=(await yE()).transaction(qc,"readwrite");await s.objectStore(qc).put(e,vE(t)),await s.done}catch(n){if(n instanceof Cs)xs.warn(n.message);else{const s=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xs.warn(s.message)}}}function vE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=1024,eP=30;class tP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sP(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=R_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>eP){const o=rP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){xs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=R_(),{heartbeatsToSend:s,unsentEntries:r}=nP(this._heartbeatsCache.heartbeats),i=xd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return xs.warn(n),""}}}function R_(){return new Date().toISOString().substring(0,10)}function nP(t,e=ZN){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),D_(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),D_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class sP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fE()?qA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await JN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return C_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return C_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function D_(t){return xd(JSON.stringify({version:2,heartbeats:t})).length}function rP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t){bi(new Nr("platform-logger",e=>new yN(e),"PRIVATE")),bi(new Nr("heartbeat",e=>new tP(e),"PRIVATE")),Xn(Wm,N_,t),Xn(Wm,N_,"esm2017"),Xn("fire-js","")}iP("");function Pg(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function _E(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oP=_E,wE=new fl("auth","Firebase",_E());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=new kg("@firebase/auth");function aP(t,...e){Sd.logLevel<=ve.WARN&&Sd.warn(`Auth (${la}): ${t}`,...e)}function Ou(t,...e){Sd.logLevel<=ve.ERROR&&Sd.error(`Auth (${la}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,...e){throw Cg(t,...e)}function Jn(t,...e){return Cg(t,...e)}function EE(t,e,n){const s=Object.assign(Object.assign({},oP()),{[e]:n});return new fl("auth","Firebase",s).create(e,{appName:t.name})}function _s(t){return EE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cg(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return wE.create(t,...e)}function le(t,e,...n){if(!t)throw Cg(e,...n)}function ms(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ou(e),new Error(e)}function bs(t,e){t||ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cP(){return j_()==="http:"||j_()==="https:"}function j_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cP()||UA()||"connection"in navigator)?navigator.onLine:!0}function uP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n){this.shortDelay=e,this.longDelay=n,bs(n>e,"Short delay should be less than long delay!"),this.isMobile=FA()||BA()}get(){return lP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t,e){bs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fP=new pl(3e4,6e4);function Mr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Lr(t,e,n,s,r={}){return IE(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=ml(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return zA()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Li(t.emulatorConfig.host)&&(d.credentials="include"),TE.fetch()(await xE(t,t.config.apiHost,n,a),d)})}async function IE(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},dP),e);try{const r=new pP(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw du(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw du(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw du(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw du(t,"user-disabled",o);const f=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw EE(t,f,d);Ln(t,f)}}catch(r){if(r instanceof Cs)throw r;Ln(t,"network-request-failed",{message:String(r)})}}async function gl(t,e,n,s,r={}){const i=await Lr(t,e,n,s,r);return"mfaPendingCredential"in i&&Ln(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function xE(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Rg(t.config,r):`${t.config.apiScheme}://${r}`;return hP.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function mP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Jn(this.auth,"network-request-failed")),fP.get())})}}function du(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Jn(t,e,s);return r.customData._tokenResponse=n,r}function O_(t){return t!==void 0&&t.enterprise!==void 0}class gP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return mP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yP(t,e){return Lr(t,"GET","/v2/recaptchaConfig",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(t,e){return Lr(t,"POST","/v1/accounts:delete",e)}async function kd(t,e){return Lr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _P(t,e=!1){const n=rt(t),s=await n.getIdToken(e),r=Dg(s);le(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:gc(Of(r.auth_time)),issuedAtTime:gc(Of(r.iat)),expirationTime:gc(Of(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Of(t){return Number(t)*1e3}function Dg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Ou("JWT malformed, contained fewer than 3 sections"),null;try{const r=rE(n);return r?JSON.parse(r):(Ou("Failed to decode base64 JWT payload"),null)}catch(r){return Ou("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function V_(t){const e=Dg(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Cs&&wP(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function wP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ad(t){var e;const n=t.auth,s=await t.getIdToken(),r=await Wc(t,kd(n,{idToken:s}));le(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?bE(i.providerUserInfo):[],a=IP(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=c?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Qm(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function TP(t){const e=rt(t);await Ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IP(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function bE(t){return t.map(e=>{var{providerId:n}=e,s=Pg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(t,e){const n=await IE(t,{},async()=>{const s=ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await xE(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:s};return t.emulatorConfig&&Li(t.emulatorConfig.host)&&(c.credentials="include"),TE.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function bP(t,e){return Lr(t,"POST","/v2/accounts:revokeToken",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=V_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await xP(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Co;return s&&(le(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(le(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jn{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=Pg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Wc(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _P(this,e)}reload(){return TP(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ad(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await Wc(this,vP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,a,c,d,f;const m=(s=n.displayName)!==null&&s!==void 0?s:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,E=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:I,emailVerified:j,isAnonymous:L,providerData:M,stsTokenManager:w}=n;le(I&&w,e,"internal-error");const y=Co.fromJSON(this.name,w);le(typeof I=="string",e,"internal-error"),Hs(m,e.name),Hs(g,e.name),le(typeof j=="boolean",e,"internal-error"),le(typeof L=="boolean",e,"internal-error"),Hs(E,e.name),Hs(S,e.name),Hs(N,e.name),Hs(C,e.name),Hs(x,e.name),Hs(v,e.name);const T=new jn({uid:I,auth:e,email:g,emailVerified:j,displayName:m,isAnonymous:L,photoURL:S,phoneNumber:E,tenantId:N,stsTokenManager:y,createdAt:x,lastLoginAt:v});return M&&Array.isArray(M)&&(T.providerData=M.map(k=>Object.assign({},k))),C&&(T._redirectEventId=C),T}static async _fromIdTokenResponse(e,n,s=!1){const r=new Co;r.updateFromServerResponse(n);const i=new jn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Ad(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];le(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?bE(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),a=new Co;a.updateFromIdToken(s);const c=new jn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Qm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=new Map;function ps(t){bs(t instanceof Function,"Expected a class definition");let e=M_.get(t);return e?(bs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,M_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}SE.type="NONE";const L_=SE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ro{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Vu(this.userKey,r.apiKey,i),this.fullPersistenceKey=Vu("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await kd(this.auth,{idToken:e}).catch(()=>{});return n?jn._fromGetAccountInfoResponse(this.auth,n,e):null}return jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ro(ps(L_),e,s);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=r[0]||ps(L_);const o=Vu(s,e.config.apiKey,e.name);let a=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await kd(e,{idToken:f}).catch(()=>{});if(!g)break;m=await jn._fromGetAccountInfoResponse(e,g,f)}else m=jn._fromJSON(e,f);d!==i&&(a=m),i=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ro(i,e,s):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ro(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RE(e))return"Blackberry";if(DE(e))return"Webos";if(AE(e))return"Safari";if((e.includes("chrome/")||NE(e))&&!e.includes("edge/"))return"Chrome";if(CE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function kE(t=lt()){return/firefox\//i.test(t)}function AE(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NE(t=lt()){return/crios\//i.test(t)}function PE(t=lt()){return/iemobile/i.test(t)}function CE(t=lt()){return/android/i.test(t)}function RE(t=lt()){return/blackberry/i.test(t)}function DE(t=lt()){return/webos/i.test(t)}function jg(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SP(t=lt()){var e;return jg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kP(){return $A()&&document.documentMode===10}function jE(t=lt()){return jg(t)||CE(t)||DE(t)||RE(t)||/windows phone/i.test(t)||PE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t,e=[]){let n;switch(t){case"Browser":n=F_(lt());break;case"Worker":n=`${F_(lt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${la}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(t,e={}){return Lr(t,"GET","/v2/passwordPolicy",Mr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=6;class CP{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new z_(this),this.idTokenSubscription=new z_(this),this.beforeStateQueue=new AP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kd(this,{idToken:e}),s=await jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ad(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(_s(this));const n=e?rt(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NP(this),n=new CP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await bP(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ps(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&aP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fi(t){return rt(t)}class z_{constructor(e){this.auth=e,this.observer=null,this.addObserver=QA(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DP(t){_h=t}function VE(t){return _h.loadJS(t)}function jP(){return _h.recaptchaEnterpriseScript}function OP(){return _h.gapiScript}function VP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class MP{constructor(){this.enterprise=new LP}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class LP{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const FP="recaptcha-enterprise",ME="NO_RECAPTCHA";class zP{constructor(e){this.type=FP,this.auth=Fi(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{yP(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new gP(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})})}function r(i,o,a){const c=window.grecaptcha;O_(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(ME)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MP().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&O_(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=jP();c.length!==0&&(c+=a),VE(c).then(()=>{r(a,i,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function U_(t,e,n,s=!1,r=!1){const i=new zP(t);let o;if(r)o=ME;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,d=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ym(t,e,n,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await U_(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await U_(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t,e){const n=vh(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(xi(i,e??{}))return r;Ln(r,"already-initialized")}return n.initialize({options:e})}function BP(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ps);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function $P(t,e,n){const s=Fi(t);le(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=LE(e),{host:o,port:a}=qP(e),c=a===null?"":`:${a}`,d={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){le(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),le(xi(d,s.config.emulator)&&xi(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Li(o)?(bg(`${i}//${o}${c}`),Sg("Auth",!0)):WP()}function LE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qP(t){const e=LE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:B_(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:B_(o)}}}function B_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,n){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}async function GP(t,e){return Lr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(t,e){return gl(t,"POST","/v1/accounts:signInWithPassword",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(t,e){return gl(t,"POST","/v1/accounts:signInWithEmailLink",Mr(t,e))}async function QP(t,e){return gl(t,"POST","/v1/accounts:signInWithEmailLink",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends Og{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Gc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Gc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ym(e,n,"signInWithPassword",HP);case"emailLink":return KP(e,{email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ym(e,s,"signUpPassword",GP);case"emailLink":return QP(e,{idToken:n,email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t,e){return gl(t,"POST","/v1/accounts:signInWithIdp",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="http://localhost";class Si extends Og{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=Pg(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new Si(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Do(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Do(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Do(e,n)}buildRequest(){const e={requestUri:YP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ml(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JP(t){const e=Za(ec(t)).link,n=e?Za(ec(e)).deep_link_id:null,s=Za(ec(t)).deep_link_id;return(s?Za(ec(s)).link:null)||s||n||e||t}class Vg{constructor(e){var n,s,r,i,o,a;const c=Za(ec(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(s=c.oobCode)!==null&&s!==void 0?s:null,m=XP((r=c.mode)!==null&&r!==void 0?r:null);le(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=JP(e);try{return new Vg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.providerId=ua.PROVIDER_ID}static credential(e,n){return Gc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Vg.parseLink(n);return le(s,"argument-error"),Gc._fromEmailAndCode(e,s.code,s.tenantId)}}ua.PROVIDER_ID="password";ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends FE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends yl{constructor(){super("facebook.com")}static credential(e){return Si._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Si._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return sr.credential(n,s)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends yl{constructor(){super("github.com")}static credential(e){return Si._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends yl{constructor(){super("twitter.com")}static credential(e,n){return Si._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ir.credential(n,s)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(t,e){return gl(t,"POST","/v1/accounts:signUp",Mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await jn._fromIdTokenResponse(e,s,r),o=$_(s);return new ki({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=$_(s);return new ki({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function $_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends Cs{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Nd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Nd(e,n,s,r)}}function zE(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nd._fromErrorAndOperation(t,i,e,s):i})}async function eC(t,e,n=!1){const s=await Wc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ki._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(t,e,n=!1){const{auth:s}=t;if(rn(s.app))return Promise.reject(_s(s));const r="reauthenticate";try{const i=await Wc(t,zE(s,r,e,t),n);le(i.idToken,s,"internal-error");const o=Dg(i.idToken);le(o,s,"internal-error");const{sub:a}=o;return le(t.uid===a,s,"user-mismatch"),ki._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ln(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UE(t,e,n=!1){if(rn(t.app))return Promise.reject(_s(t));const s="signIn",r=await zE(t,s,e),i=await ki._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function nC(t,e){return UE(Fi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BE(t){const e=Fi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $E(t,e,n){if(rn(t.app))return Promise.reject(_s(t));const s=Fi(t),o=await Ym(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZP).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&BE(t),c}),a=await ki._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function qE(t,e,n){return rn(t.app)?Promise.reject(_s(t)):nC(rt(t),ua.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&BE(t),s})}function sC(t,e,n,s){return rt(t).onIdTokenChanged(e,n,s)}function rC(t,e,n){return rt(t).beforeAuthStateChanged(e,n)}function iC(t,e,n,s){return rt(t).onAuthStateChanged(e,n,s)}function WE(t){return rt(t).signOut()}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=1e3,aC=10;class HE extends GE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);kP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,aC):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},oC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}HE.type="LOCAL";const cC=HE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE extends GE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}KE.type="SESSION";const QE=KE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new wh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async d=>d(n.origin,i)),c=await lC(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const d=Mg("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return window}function dC(t){Zn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function hC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mC(){return YE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="firebaseLocalStorageDb",pC=1,Cd="firebaseLocalStorage",JE="fbase_key";class vl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Eh(t,e){return t.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function gC(){const t=indexedDB.deleteDatabase(XE);return new vl(t).toPromise()}function Xm(){const t=indexedDB.open(XE,pC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Cd,{keyPath:JE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Cd)?e(s):(s.close(),await gC(),e(await Xm()))})})}async function q_(t,e,n){const s=Eh(t,!0).put({[JE]:e,value:n});return new vl(s).toPromise()}async function yC(t,e){const n=Eh(t,!1).get(e),s=await new vl(n).toPromise();return s===void 0?null:s.value}function W_(t,e){const n=Eh(t,!0).delete(e);return new vl(n).toPromise()}const vC=800,_C=3;class ZE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>_C)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(mC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await hC(),!this.activeServiceWorker)return;this.sender=new uC(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xm();return await q_(e,Pd,"1"),await W_(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>q_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>yC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>W_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Eh(r,!1).getAll();return new vl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZE.type="LOCAL";const wC=ZE;new pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t,e){return e?ps(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends Og{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Do(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TC(t){return UE(t.auth,new Lg(t),t.bypassAuthState)}function IC(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),tC(n,new Lg(t),t.bypassAuthState)}async function xC(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),eC(n,new Lg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TC;case"linkViaPopup":case"linkViaRedirect":return xC;case"reauthViaPopup":case"reauthViaRedirect":return IC;default:Ln(this.auth,"internal-error")}}resolve(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new pl(2e3,1e4);class xo extends eT{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){bs(this.filter.length===1,"Popup operations only handle one event");const e=Mg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bC.get())};e()}}xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="pendingRedirect",Mu=new Map;class kC extends eT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Mu.get(this.auth._key());if(!e){try{const s=await AC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Mu.set(this.auth._key(),e)}return this.bypassAuthState||Mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AC(t,e){const n=CC(e),s=PC(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function NC(t,e){Mu.set(t._key(),e)}function PC(t){return ps(t._redirectPersistence)}function CC(t){return Vu(SC,t.config.apiKey,t.name)}async function RC(t,e,n=!1){if(rn(t.app))return Promise.reject(_s(t));const s=Fi(t),r=EC(s,e),o=await new kC(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=10*60*1e3;class jC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!tT(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Jn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DC&&this.cachedEventUids.clear(),this.cachedEventUids.has(G_(e))}saveEventToCache(e){this.cachedEventUids.add(G_(e)),this.lastProcessedEventTime=Date.now()}}function G_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function OC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t,e={}){return Lr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LC=/^https?/;async function FC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VC(t);for(const n of e)try{if(zC(n))return}catch{}Ln(t,"unauthorized-domain")}function zC(t){const e=Km(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!LC.test(n))return!1;if(MC.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new pl(3e4,6e4);function H_(){const t=Zn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function BC(t){return new Promise((e,n)=>{var s,r,i;function o(){H_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{H_(),n(Jn(t,"network-request-failed"))},timeout:UC.get()})}if(!((r=(s=Zn().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=Zn().gapi)===null||i===void 0)&&i.load)o();else{const a=VP("iframefcb");return Zn()[a]=()=>{gapi.load?o():n(Jn(t,"network-request-failed"))},VE(`${OP()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Lu=null,e})}let Lu=null;function $C(t){return Lu=Lu||BC(t),Lu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new pl(5e3,15e3),WC="__/auth/iframe",GC="emulator/auth/iframe",HC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QC(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Rg(e,GC):`https://${t.config.authDomain}/${WC}`,s={apiKey:e.apiKey,appName:t.name,v:la},r=KC.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${ml(s).slice(1)}`}async function YC(t){const e=await $C(t),n=Zn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:QC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HC,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Jn(t,"network-request-failed"),a=Zn().setTimeout(()=>{i(o)},qC.get());function c(){Zn().clearTimeout(a),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JC=500,ZC=600,eR="_blank",tR="http://localhost";class K_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nR(t,e,n,s=JC,r=ZC){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},XC),{width:s.toString(),height:r.toString(),top:i,left:o}),d=lt().toLowerCase();n&&(a=NE(d)?eR:n),kE(d)&&(e=e||tR,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[E,S])=>`${g}${E}=${S},`,"");if(SP(d)&&a!=="_self")return sR(e||"",a),new K_(null);const m=window.open(e||"",a,f);le(m,t,"popup-blocked");try{m.focus()}catch{}return new K_(m)}function sR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="__/auth/handler",iR="emulator/auth/handler",oR=encodeURIComponent("fac");async function Q_(t,e,n,s,r,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:la,eventId:r};if(e instanceof FE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",KA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof yl){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const c=await t._getAppCheckToken(),d=c?`#${oR}=${encodeURIComponent(c)}`:"";return`${aR(t)}?${ml(a).slice(1)}${d}`}function aR({config:t}){return t.emulator?Rg(t,iR):`https://${t.authDomain}/${rR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="webStorageSupport";class cR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QE,this._completeRedirectFn=RC,this._overrideRedirectResult=NC}async _openPopup(e,n,s,r){var i;bs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Q_(e,n,s,Km(),r);return nR(e,o,Mg())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Q_(e,n,s,Km(),r);return dC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(bs(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await YC(e),s=new jC(e);return n.register("authEvent",r=>(le(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vf,{type:Vf},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Vf];o!==void 0&&n(!!o),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jE()||AE()||jg()}}const lR=cR;var Y_="@firebase/auth",X_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hR(t){bi(new Nr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OE(t)},d=new RP(s,r,i,c);return BP(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),bi(new Nr("auth-internal",e=>{const n=Fi(e.getProvider("auth").getImmediate());return(s=>new uR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xn(Y_,X_,dR(t)),Xn(Y_,X_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=5*60,mR=lE("authIdTokenMaxAge")||fR;let J_=null;const pR=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>mR)return;const r=n==null?void 0:n.token;J_!==r&&(J_=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function nT(t=Ng()){const e=vh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=UP(t,{popupRedirectResolver:lR,persistence:[wC,cC,QE]}),s=lE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=pR(i.toString());rC(n,o,()=>o(n.currentUser)),sC(n,a=>o(a))}}const r=oE("auth");return r&&$P(n,`http://${r}`),n}function gR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}DP({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Jn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",gR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hR("Browser");var Z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,sT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function T(){}T.prototype=y.prototype,w.D=y.prototype,w.prototype=new T,w.prototype.constructor=w,w.C=function(k,R,P){for(var b=Array(arguments.length-2),re=2;re<arguments.length;re++)b[re-2]=arguments[re];return y.prototype[R].apply(k,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,y,T){T||(T=0);var k=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)k[R]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(R=0;16>R;++R)k[R]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=w.g[0],T=w.g[1],R=w.g[2];var P=w.g[3],b=y+(P^T&(R^P))+k[0]+3614090360&4294967295;y=T+(b<<7&4294967295|b>>>25),b=P+(R^y&(T^R))+k[1]+3905402710&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(T^P&(y^T))+k[2]+606105819&4294967295,R=P+(b<<17&4294967295|b>>>15),b=T+(y^R&(P^y))+k[3]+3250441966&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(P^T&(R^P))+k[4]+4118548399&4294967295,y=T+(b<<7&4294967295|b>>>25),b=P+(R^y&(T^R))+k[5]+1200080426&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(T^P&(y^T))+k[6]+2821735955&4294967295,R=P+(b<<17&4294967295|b>>>15),b=T+(y^R&(P^y))+k[7]+4249261313&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(P^T&(R^P))+k[8]+1770035416&4294967295,y=T+(b<<7&4294967295|b>>>25),b=P+(R^y&(T^R))+k[9]+2336552879&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(T^P&(y^T))+k[10]+4294925233&4294967295,R=P+(b<<17&4294967295|b>>>15),b=T+(y^R&(P^y))+k[11]+2304563134&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(P^T&(R^P))+k[12]+1804603682&4294967295,y=T+(b<<7&4294967295|b>>>25),b=P+(R^y&(T^R))+k[13]+4254626195&4294967295,P=y+(b<<12&4294967295|b>>>20),b=R+(T^P&(y^T))+k[14]+2792965006&4294967295,R=P+(b<<17&4294967295|b>>>15),b=T+(y^R&(P^y))+k[15]+1236535329&4294967295,T=R+(b<<22&4294967295|b>>>10),b=y+(R^P&(T^R))+k[1]+4129170786&4294967295,y=T+(b<<5&4294967295|b>>>27),b=P+(T^R&(y^T))+k[6]+3225465664&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(P^y))+k[11]+643717713&4294967295,R=P+(b<<14&4294967295|b>>>18),b=T+(P^y&(R^P))+k[0]+3921069994&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(R^P&(T^R))+k[5]+3593408605&4294967295,y=T+(b<<5&4294967295|b>>>27),b=P+(T^R&(y^T))+k[10]+38016083&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(P^y))+k[15]+3634488961&4294967295,R=P+(b<<14&4294967295|b>>>18),b=T+(P^y&(R^P))+k[4]+3889429448&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(R^P&(T^R))+k[9]+568446438&4294967295,y=T+(b<<5&4294967295|b>>>27),b=P+(T^R&(y^T))+k[14]+3275163606&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(P^y))+k[3]+4107603335&4294967295,R=P+(b<<14&4294967295|b>>>18),b=T+(P^y&(R^P))+k[8]+1163531501&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(R^P&(T^R))+k[13]+2850285829&4294967295,y=T+(b<<5&4294967295|b>>>27),b=P+(T^R&(y^T))+k[2]+4243563512&4294967295,P=y+(b<<9&4294967295|b>>>23),b=R+(y^T&(P^y))+k[7]+1735328473&4294967295,R=P+(b<<14&4294967295|b>>>18),b=T+(P^y&(R^P))+k[12]+2368359562&4294967295,T=R+(b<<20&4294967295|b>>>12),b=y+(T^R^P)+k[5]+4294588738&4294967295,y=T+(b<<4&4294967295|b>>>28),b=P+(y^T^R)+k[8]+2272392833&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^T)+k[11]+1839030562&4294967295,R=P+(b<<16&4294967295|b>>>16),b=T+(R^P^y)+k[14]+4259657740&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(T^R^P)+k[1]+2763975236&4294967295,y=T+(b<<4&4294967295|b>>>28),b=P+(y^T^R)+k[4]+1272893353&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^T)+k[7]+4139469664&4294967295,R=P+(b<<16&4294967295|b>>>16),b=T+(R^P^y)+k[10]+3200236656&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(T^R^P)+k[13]+681279174&4294967295,y=T+(b<<4&4294967295|b>>>28),b=P+(y^T^R)+k[0]+3936430074&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^T)+k[3]+3572445317&4294967295,R=P+(b<<16&4294967295|b>>>16),b=T+(R^P^y)+k[6]+76029189&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(T^R^P)+k[9]+3654602809&4294967295,y=T+(b<<4&4294967295|b>>>28),b=P+(y^T^R)+k[12]+3873151461&4294967295,P=y+(b<<11&4294967295|b>>>21),b=R+(P^y^T)+k[15]+530742520&4294967295,R=P+(b<<16&4294967295|b>>>16),b=T+(R^P^y)+k[2]+3299628645&4294967295,T=R+(b<<23&4294967295|b>>>9),b=y+(R^(T|~P))+k[0]+4096336452&4294967295,y=T+(b<<6&4294967295|b>>>26),b=P+(T^(y|~R))+k[7]+1126891415&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~T))+k[14]+2878612391&4294967295,R=P+(b<<15&4294967295|b>>>17),b=T+(P^(R|~y))+k[5]+4237533241&4294967295,T=R+(b<<21&4294967295|b>>>11),b=y+(R^(T|~P))+k[12]+1700485571&4294967295,y=T+(b<<6&4294967295|b>>>26),b=P+(T^(y|~R))+k[3]+2399980690&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~T))+k[10]+4293915773&4294967295,R=P+(b<<15&4294967295|b>>>17),b=T+(P^(R|~y))+k[1]+2240044497&4294967295,T=R+(b<<21&4294967295|b>>>11),b=y+(R^(T|~P))+k[8]+1873313359&4294967295,y=T+(b<<6&4294967295|b>>>26),b=P+(T^(y|~R))+k[15]+4264355552&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~T))+k[6]+2734768916&4294967295,R=P+(b<<15&4294967295|b>>>17),b=T+(P^(R|~y))+k[13]+1309151649&4294967295,T=R+(b<<21&4294967295|b>>>11),b=y+(R^(T|~P))+k[4]+4149444226&4294967295,y=T+(b<<6&4294967295|b>>>26),b=P+(T^(y|~R))+k[11]+3174756917&4294967295,P=y+(b<<10&4294967295|b>>>22),b=R+(y^(P|~T))+k[2]+718787259&4294967295,R=P+(b<<15&4294967295|b>>>17),b=T+(P^(R|~y))+k[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+P&4294967295}s.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var T=y-this.blockSize,k=this.B,R=this.h,P=0;P<y;){if(R==0)for(;P<=T;)r(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<y;)if(k[R++]=w.charCodeAt(P++),R==this.blockSize){r(this,k),R=0;break}}else for(;P<y;)if(k[R++]=w[P++],R==this.blockSize){r(this,k),R=0;break}}this.h=R,this.o+=y},s.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var T=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=T&255,T/=256;for(this.u(w),w=Array(16),y=T=0;4>y;++y)for(var k=0;32>k;k+=8)w[T++]=this.g[y]>>>k&255;return w};function i(w,y){var T=a;return Object.prototype.hasOwnProperty.call(T,w)?T[w]:T[w]=y(w)}function o(w,y){this.h=y;for(var T=[],k=!0,R=w.length-1;0<=R;R--){var P=w[R]|0;k&&P==y||(T[R]=P,k=!1)}this.g=T}var a={};function c(w){return-128<=w&&128>w?i(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return C(d(-w));for(var y=[],T=1,k=0;w>=T;k++)y[k]=w/T|0,T*=4294967296;return new o(y,0)}function f(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return C(f(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(y,8)),k=m,R=0;R<w.length;R+=8){var P=Math.min(8,w.length-R),b=parseInt(w.substring(R,R+P),y);8>P?(P=d(Math.pow(y,P)),k=k.j(P).add(d(b))):(k=k.j(T),k=k.add(d(b)))}return k}var m=c(0),g=c(1),E=c(16777216);t=o.prototype,t.m=function(){if(N(this))return-C(this).m();for(var w=0,y=1,T=0;T<this.g.length;T++){var k=this.i(T);w+=(0<=k?k:4294967296+k)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(N(this))return"-"+C(this).toString(w);for(var y=d(Math.pow(w,6)),T=this,k="";;){var R=j(T,y).g;T=x(T,R.j(y));var P=((0<T.g.length?T.g[0]:T.h)>>>0).toString(w);if(T=R,S(T))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=x(this,w),N(w)?-1:S(w)?0:1};function C(w){for(var y=w.g.length,T=[],k=0;k<y;k++)T[k]=~w.g[k];return new o(T,~w.h).add(g)}t.abs=function(){return N(this)?C(this):this},t.add=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],k=0,R=0;R<=y;R++){var P=k+(this.i(R)&65535)+(w.i(R)&65535),b=(P>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);k=b>>>16,P&=65535,b&=65535,T[R]=b<<16|P}return new o(T,T[T.length-1]&-2147483648?-1:0)};function x(w,y){return w.add(C(y))}t.j=function(w){if(S(this)||S(w))return m;if(N(this))return N(w)?C(this).j(C(w)):C(C(this).j(w));if(N(w))return C(this.j(C(w)));if(0>this.l(E)&&0>w.l(E))return d(this.m()*w.m());for(var y=this.g.length+w.g.length,T=[],k=0;k<2*y;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<w.g.length;R++){var P=this.i(k)>>>16,b=this.i(k)&65535,re=w.i(R)>>>16,de=w.i(R)&65535;T[2*k+2*R]+=b*de,v(T,2*k+2*R),T[2*k+2*R+1]+=P*de,v(T,2*k+2*R+1),T[2*k+2*R+1]+=b*re,v(T,2*k+2*R+1),T[2*k+2*R+2]+=P*re,v(T,2*k+2*R+2)}for(k=0;k<y;k++)T[k]=T[2*k+1]<<16|T[2*k];for(k=y;k<2*y;k++)T[k]=0;return new o(T,0)};function v(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function I(w,y){this.g=w,this.h=y}function j(w,y){if(S(y))throw Error("division by zero");if(S(w))return new I(m,m);if(N(w))return y=j(C(w),y),new I(C(y.g),C(y.h));if(N(y))return y=j(w,C(y)),new I(C(y.g),y.h);if(30<w.g.length){if(N(w)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var T=g,k=y;0>=k.l(w);)T=L(T),k=L(k);var R=M(T,1),P=M(k,1);for(k=M(k,2),T=M(T,2);!S(k);){var b=P.add(k);0>=b.l(w)&&(R=R.add(T),P=b),k=M(k,1),T=M(T,1)}return y=x(w,R.j(y)),new I(R,y)}for(R=m;0<=w.l(y);){for(T=Math.max(1,Math.floor(w.m()/y.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=d(T),b=P.j(y);N(b)||0<b.l(w);)T-=k,P=d(T),b=P.j(y);S(P)&&(P=g),R=R.add(P),w=x(w,b)}return new I(R,w)}t.A=function(w){return j(this,w).h},t.and=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],k=0;k<y;k++)T[k]=this.i(k)&w.i(k);return new o(T,this.h&w.h)},t.or=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],k=0;k<y;k++)T[k]=this.i(k)|w.i(k);return new o(T,this.h|w.h)},t.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],k=0;k<y;k++)T[k]=this.i(k)^w.i(k);return new o(T,this.h^w.h)};function L(w){for(var y=w.g.length+1,T=[],k=0;k<y;k++)T[k]=w.i(k)<<1|w.i(k-1)>>>31;return new o(T,w.h)}function M(w,y){var T=y>>5;y%=32;for(var k=w.g.length-T,R=[],P=0;P<k;P++)R[P]=0<y?w.i(P+T)>>>y|w.i(P+T+1)<<32-y:w.i(P+T);return new o(R,w.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,sT=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Ir=o}).apply(typeof Z_<"u"?Z_:typeof self<"u"?self:typeof window<"u"?window:{});var hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rT,tc,iT,Fu,Jm,oT,aT,cT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof hu=="object"&&hu];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(l,h){if(h)e:{var p=s;l=l.split(".");for(var _=0;_<l.length-1;_++){var V=l[_];if(!(V in p))break e;p=p[V]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,_=!1,V={next:function(){if(!_&&p<l.length){var F=p++;return{value:h(F,l[F]),done:!1}}return _=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,_),l.apply(h,V)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function E(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function S(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,V,F){for(var H=Array(arguments.length-2),je=2;je<arguments.length;je++)H[je-2]=arguments[je];return h.prototype[V].apply(_,H)}}function N(l){const h=l.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function C(l,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(c(_)){const V=l.length||0,F=_.length||0;l.length=V+F;for(let H=0;H<F;H++)l[V+H]=_[H]}else l.push(_)}}class x{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(l){return/^[\s\xa0]*$/.test(l)}function I(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var L=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function M(l,h,p){for(const _ in l)h.call(p,l[_],_,l)}function w(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,h){let p,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(p in _)l[p]=_[p];for(let F=0;F<T.length;F++)p=T[F],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function R(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){a.setTimeout(()=>{throw l},0)}function b(){var l=J;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class re{constructor(){this.h=this.g=null}add(h,p){const _=de.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var de=new x(()=>new X,l=>l.reset());class X{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,z=!1,J=new re,ne=()=>{const l=a.Promise.resolve(void 0);Z=()=>{l.then(fe)}};var fe=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(p){P(p)}var h=de;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}z=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function dt(l,h){if(ke.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{j(h.nodeName);var V=!0;break e}catch{}V=!1}V||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:qt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&dt.aa.h.call(this)}}S(dt,ke);var qt={2:"touch",3:"pen",4:"mouse"};dt.prototype.h=function(){dt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Wt="closure_listenable_"+(1e6*Math.random()|0),se=0;function Te(l,h,p,_,V){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=V,this.key=++se,this.da=this.fa=!1}function xe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Je(l){this.src=l,this.g={},this.h=0}Je.prototype.add=function(l,h,p,_,V){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var H=gt(l,h,_,V);return-1<H?(h=l[H],p||(h.fa=!1)):(h=new Te(h,this.src,F,!!_,V),h.fa=p,l.push(h)),h};function De(l,h){var p=h.type;if(p in l.g){var _=l.g[p],V=Array.prototype.indexOf.call(_,h,void 0),F;(F=0<=V)&&Array.prototype.splice.call(_,V,1),F&&(xe(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function gt(l,h,p,_){for(var V=0;V<l.length;++V){var F=l[V];if(!F.da&&F.listener==h&&F.capture==!!p&&F.ha==_)return V}return-1}var $i="closure_lm_"+(1e6*Math.random()|0),ga={};function ya(l,h,p,_,V){if(Array.isArray(h)){for(var F=0;F<h.length;F++)ya(l,h[F],p,_,V);return null}return p=Ta(p),l&&l[Wt]?l.K(h,p,d(_)?!!_.capture:!1,V):va(l,h,p,!1,_,V)}function va(l,h,p,_,V,F){if(!h)throw Error("Invalid event type");var H=d(V)?!!V.capture:!!V,je=Os(l);if(je||(l[$i]=je=new Je(l)),p=je.add(h,p,_,H,F),p.proxy)return p;if(_=_a(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)Ee||(V=H),V===void 0&&(V=!1),l.addEventListener(h.toString(),_,V);else if(l.attachEvent)l.attachEvent(qi(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function _a(){function l(p){return h.call(l.src,l.listener,p)}const h=js;return l}function kl(l,h,p,_,V){if(Array.isArray(h))for(var F=0;F<h.length;F++)kl(l,h[F],p,_,V);else _=d(_)?!!_.capture:!!_,p=Ta(p),l&&l[Wt]?(l=l.i,h=String(h).toString(),h in l.g&&(F=l.g[h],p=gt(F,p,_,V),-1<p&&(xe(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete l.g[h],l.h--)))):l&&(l=Os(l))&&(h=l.g[h.toString()],l=-1,h&&(l=gt(h,p,_,V)),(p=-1<l?h[l]:null)&&wa(p))}function wa(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Wt])De(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(qi(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=Os(h))?(De(p,l),p.h==0&&(p.src=null,h[$i]=null)):xe(l)}}}function qi(l){return l in ga?ga[l]:ga[l]="on"+l}function js(l,h){if(l.da)l=!0;else{h=new dt(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&wa(l),l=p.call(_,h)}return l}function Os(l){return l=l[$i],l instanceof Je?l:null}var Ea="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ta(l){return typeof l=="function"?l:(l[Ea]||(l[Ea]=function(h){return l.handleEvent(h)}),l[Ea])}function ht(){he.call(this),this.i=new Je(this),this.M=this,this.F=null}S(ht,he),ht.prototype[Wt]=!0,ht.prototype.removeEventListener=function(l,h,p,_){kl(this,l,h,p,_)};function yt(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new ke(h,l);else if(h instanceof ke)h.target=h.target||l;else{var V=h;h=new ke(_,l),k(h,V)}if(V=!0,p)for(var F=p.length-1;0<=F;F--){var H=h.g=p[F];V=Wi(H,_,!0,h)&&V}if(H=h.g=l,V=Wi(H,_,!0,h)&&V,V=Wi(H,_,!1,h)&&V,p)for(F=0;F<p.length;F++)H=h.g=p[F],V=Wi(H,_,!1,h)&&V}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)xe(p[_]);delete l.g[h],l.h--}}this.F=null},ht.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},ht.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function Wi(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var V=!0,F=0;F<h.length;++F){var H=h[F];if(H&&!H.da&&H.capture==p){var je=H.listener,vt=H.ha||H.src;H.fa&&De(l.i,H),V=je.call(vt,_)!==!1&&V}}return V&&!_.defaultPrevented}function Al(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function Nl(l){l.g=Al(()=>{l.g=null,l.i&&(l.i=!1,Nl(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Kh extends he{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Nl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(l){he.call(this),this.h=l,this.g={}}S(Br,he);var Pl=[];function Cl(l){M(l.g,function(h,p){this.g.hasOwnProperty(p)&&wa(h)},l),l.g={}}Br.prototype.N=function(){Br.aa.N.call(this),Cl(this)},Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ia=a.JSON.stringify,Qh=a.JSON.parse,Yh=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function xa(){}xa.prototype.h=null;function Rl(l){return l.h||(l.h=l.i())}function ba(){}var $r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sn(){ke.call(this,"d")}S(Sn,ke);function Sa(){ke.call(this,"c")}S(Sa,ke);var ns={},Dl=null;function qr(){return Dl=Dl||new ht}ns.La="serverreachability";function D(l){ke.call(this,ns.La,l)}S(D,ke);function B(l){const h=qr();yt(h,new D(h))}ns.STAT_EVENT="statevent";function G(l,h){ke.call(this,ns.STAT_EVENT,l),this.stat=h}S(G,ke);function K(l){const h=qr();yt(h,new G(h,l))}ns.Ma="timingevent";function ce(l,h){ke.call(this,ns.Ma,l),this.size=h}S(ce,ke);function ie(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function pe(){this.g=!0}pe.prototype.xa=function(){this.g=!1};function Ke(l,h,p,_,V,F){l.info(function(){if(l.g)if(F)for(var H="",je=F.split("&"),vt=0;vt<je.length;vt++){var Ae=je[vt].split("=");if(1<Ae.length){var bt=Ae[0];Ae=Ae[1];var St=bt.split("_");H=2<=St.length&&St[1]=="type"?H+(bt+"="+Ae+"&"):H+(bt+"=redacted&")}}else H=null;else H=F;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+h+`
`+p+`
`+H})}function ot(l,h,p,_,V,F,H){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+h+`
`+p+`
`+F+" "+H})}function Fn(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Ol(l,p)+(_?" "+_:"")})}function jl(l,h){l.info(function(){return"TIMEOUT: "+h})}pe.prototype.info=function(){};function Ol(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var V=_[1];if(Array.isArray(V)&&!(1>V.length)){var F=V[0];if(F!="noop"&&F!="stop"&&F!="close")for(var H=1;H<V.length;H++)V[H]=""}}}}return Ia(p)}catch{return h}}var Vs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ms={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ss;function rs(){}S(rs,xa),rs.prototype.g=function(){return new XMLHttpRequest},rs.prototype.i=function(){return{}},ss=new rs;function Gt(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new Br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wr}function Wr(){this.i=null,this.g="",this.h=!1}var Ls={},Fs={};function Gi(l,h,p){l.L=1,l.v=Fl(cs(h)),l.m=p,l.P=!0,ka(l,null)}function ka(l,h){l.F=Date.now(),is(l),l.A=cs(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Fy(p.i,"t",_),l.C=0,p=l.j.J,l.h=new Wr,l.g=sv(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Kh(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(Pl[0]=V.toString()),V=Pl);for(var F=0;F<V.length;F++){var H=ya(p,V[F],_||h.handleEvent,!1,h.h||h);if(!H)break;h.g[H.key]=H}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),B(),Ke(l.i,l.u,l.A,l.l,l.R,l.m)}Gt.prototype.ca=function(l){l=l.target;const h=this.M;h&&ls(l)==3?h.j():this.Y(l)},Gt.prototype.Y=function(l){try{if(l==this.g)e:{const St=ls(this.g);var h=this.g.Ba();const Xi=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||Gy(this.g)))){this.J||St!=4||h==7||(h==8||0>=Xi?B(3):B(2)),Us(this);var p=this.g.Z();this.X=p;t:if(zs(this)){var _=Gy(this.g);l="";var V=_.length,F=ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),kn(this);var H="";break t}this.h.i=new a.TextDecoder}for(h=0;h<V;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(F&&h==V-1)});_.length=0,this.h.g+=l,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=p==200,ot(this.i,this.u,this.A,this.l,this.R,St,p),this.o){if(this.T&&!this.K){t:{if(this.g){var je,vt=this.g;if((je=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(je)){var Ae=je;break t}}Ae=null}if(p=Ae)Fn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hi(this,p);else{this.o=!1,this.s=3,K(12),mn(this),kn(this);break e}}if(this.P){p=!0;let An;for(;!this.J&&this.C<H.length;)if(An=Gr(this,H),An==Fs){St==4&&(this.s=4,K(14),p=!1),Fn(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Ls){this.s=4,K(15),Fn(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else Fn(this.i,this.l,An,null),Hi(this,An);if(zs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||H.length!=0||this.h.h||(this.s=1,K(16),p=!1),this.o=this.o&&p,!p)Fn(this.i,this.l,H,"[Invalid Chunked Response]"),mn(this),kn(this);else if(0<H.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),ef(bt),bt.M=!0,K(11))}}else Fn(this.i,this.l,H,null),Hi(this,H);St==4&&mn(this),this.o&&!this.J&&(St==4?Zy(this.j,this):(this.o=!1,is(this)))}else Gx(this.g),p==400&&0<H.indexOf("Unknown SID")?(this.s=3,K(12)):(this.s=0,K(13)),mn(this),kn(this)}}}catch{}finally{}};function zs(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Gr(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?Fs:(p=Number(h.substring(p,_)),isNaN(p)?Ls:(_+=1,_+p>h.length?Fs:(h=h.slice(_,_+p),l.C=_+p,h)))}Gt.prototype.cancel=function(){this.J=!0,mn(this)};function is(l){l.S=Date.now()+l.I,Hr(l,l.I)}function Hr(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ie(g(l.ba,l),h)}function Us(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Gt.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(jl(this.i,this.A),this.L!=2&&(B(),K(17)),mn(this),this.s=2,kn(this)):Hr(this,this.S-l)};function kn(l){l.j.G==0||l.J||Zy(l.j,l)}function mn(l){Us(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Cl(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Hi(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||os(p.h,l))){if(!l.K&&os(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Wl(p),$l(p);else break e;Zh(p),K(18)}}else p.za=V[1],0<p.za-p.T&&37500>V[2]&&p.F&&p.v==0&&!p.C&&(p.C=ie(g(p.Za,p),6e3));if(1>=Kr(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Xr(p,11)}else if((l.K||p.g==l)&&Wl(p),!v(h))for(V=p.Da.g.parse(h),h=0;h<V.length;h++){let Ae=V[h];if(p.T=Ae[0],Ae=Ae[1],p.G==2)if(Ae[0]=="c"){p.K=Ae[1],p.ia=Ae[2];const bt=Ae[3];bt!=null&&(p.la=bt,p.j.info("VER="+p.la));const St=Ae[4];St!=null&&(p.Aa=St,p.j.info("SVER="+p.Aa));const Xi=Ae[5];Xi!=null&&typeof Xi=="number"&&0<Xi&&(_=1.5*Xi,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const An=l.g;if(An){const Hl=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hl){var F=_.h;F.g||Hl.indexOf("spdy")==-1&&Hl.indexOf("quic")==-1&&Hl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Qr(F,F.h),F.h=null))}if(_.D){const tf=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;tf&&(_.ya=tf,Ve(_.I,_.D,tf))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var H=l;if(_.qa=nv(_,_.J?_.ia:null,_.W),H.K){Ze(_.h,H);var je=H,vt=_.L;vt&&(je.I=vt),je.B&&(Us(je),is(je)),_.g=H}else Xy(_);0<p.i.length&&ql(p)}else Ae[0]!="stop"&&Ae[0]!="close"||Xr(p,7);else p.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Xr(p,7):Jh(p):Ae[0]!="noop"&&p.l&&p.l.ta(Ae),p.v=0)}}B(4)}catch{}}var Vl=class{constructor(l,h){this.g=l,this.map=h}};function Bs(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $s(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Kr(l){return l.h?1:l.g?l.g.size:0}function os(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Qr(l,h){l.g?l.g.add(h):l.h=h}function Ze(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Bs.prototype.cancel=function(){if(this.i=xt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function xt(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return N(l.i)}function Ht(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function as(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const _ in l)h[p++]=_;return h}}}function Ki(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=as(l),_=Ht(l),V=_.length,F=0;F<V;F++)h.call(void 0,_[F],p&&p[F],l)}var jy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dx(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),V=null;if(0<=_){var F=l[p].substring(0,_);V=l[p].substring(_+1)}else F=l[p];h(F,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Yr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Yr){this.h=l.h,Ml(this,l.j),this.o=l.o,this.g=l.g,Ll(this,l.s),this.l=l.l;var h=l.i,p=new Pa;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Oy(this,p),this.m=l.m}else l&&(h=String(l).match(jy))?(this.h=!1,Ml(this,h[1]||"",!0),this.o=Aa(h[2]||""),this.g=Aa(h[3]||"",!0),Ll(this,h[4]),this.l=Aa(h[5]||"",!0),Oy(this,h[6]||"",!0),this.m=Aa(h[7]||"")):(this.h=!1,this.i=new Pa(null,this.h))}Yr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Na(h,Vy,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Na(h,Vy,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Na(p,p.charAt(0)=="/"?Vx:Ox,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Na(p,Lx)),l.join("")};function cs(l){return new Yr(l)}function Ml(l,h,p){l.j=p?Aa(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Ll(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Oy(l,h,p){h instanceof Pa?(l.i=h,Fx(l.i,l.h)):(p||(h=Na(h,Mx)),l.i=new Pa(h,l.h))}function Ve(l,h,p){l.i.set(h,p)}function Fl(l){return Ve(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Aa(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Na(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,jx),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function jx(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Vy=/[#\/\?@]/g,Ox=/[#\?:]/g,Vx=/[#\?]/g,Mx=/[#\?@]/g,Lx=/#/g;function Pa(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function qs(l){l.g||(l.g=new Map,l.h=0,l.i&&Dx(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Pa.prototype,t.add=function(l,h){qs(this),this.i=null,l=Qi(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function My(l,h){qs(l),h=Qi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Ly(l,h){return qs(l),h=Qi(l,h),l.g.has(h)}t.forEach=function(l,h){qs(this),this.g.forEach(function(p,_){p.forEach(function(V){l.call(h,V,_,this)},this)},this)},t.na=function(){qs(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const V=l[_];for(let F=0;F<V.length;F++)p.push(h[_])}return p},t.V=function(l){qs(this);let h=[];if(typeof l=="string")Ly(this,l)&&(h=h.concat(this.g.get(Qi(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return qs(this),this.i=null,l=Qi(this,l),Ly(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Fy(l,h,p){My(l,h),0<p.length&&(l.i=null,l.g.set(Qi(l,h),N(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const F=encodeURIComponent(String(_)),H=this.V(_);for(_=0;_<H.length;_++){var V=F;H[_]!==""&&(V+="="+encodeURIComponent(String(H[_]))),l.push(V)}}return this.i=l.join("&")};function Qi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Fx(l,h){h&&!l.j&&(qs(l),l.i=null,l.g.forEach(function(p,_){var V=_.toLowerCase();_!=V&&(My(this,_),Fy(this,V,p))},l)),l.j=h}function zx(l,h){const p=new pe;if(a.Image){const _=new Image;_.onload=E(Ws,p,"TestLoadImage: loaded",!0,h,_),_.onerror=E(Ws,p,"TestLoadImage: error",!1,h,_),_.onabort=E(Ws,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=E(Ws,p,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function Ux(l,h){const p=new pe,_=new AbortController,V=setTimeout(()=>{_.abort(),Ws(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(F=>{clearTimeout(V),F.ok?Ws(p,"TestPingServer: ok",!0,h):Ws(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),Ws(p,"TestPingServer: error",!1,h)})}function Ws(l,h,p,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(p)}catch{}}function Bx(){this.g=new Yh}function $x(l,h,p){const _=p||"";try{Ki(l,function(V,F){let H=V;d(V)&&(H=Ia(V)),h.push(_+F+"="+encodeURIComponent(H))})}catch(V){throw h.push(_+"type="+encodeURIComponent("_badmap")),V}}function zl(l){this.l=l.Ub||null,this.j=l.eb||!1}S(zl,xa),zl.prototype.g=function(){return new Ul(this.l,this.j)},zl.prototype.i=function(l){return function(){return l}}({});function Ul(l,h){ht.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Ul,ht),t=Ul.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Ra(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ca(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ra(this)),this.g&&(this.readyState=3,Ra(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zy(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function zy(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ca(this):Ra(this),this.readyState==3&&zy(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ca(this))},t.Qa=function(l){this.g&&(this.response=l,Ca(this))},t.ga=function(){this.g&&Ca(this)};function Ca(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ra(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Ra(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Uy(l){let h="";return M(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Xh(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Uy(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ve(l,h,p))}function Qe(l){ht.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Qe,ht);var qx=/^https?$/i,Wx=["POST","PUT"];t=Qe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ss.g(),this.v=this.o?Rl(this.o):Rl(ss),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(F){By(this,F);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)p.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const F of _.keys())p.set(F,_.get(F));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Wx,h,void 0))||_||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,H]of p)this.g.setRequestHeader(F,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wy(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){By(this,F)}};function By(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,$y(l),Bl(l)}function $y(l){l.A||(l.A=!0,yt(l,"complete"),yt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,yt(this,"complete"),yt(this,"abort"),Bl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bl(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qy(this):this.bb())},t.bb=function(){qy(this)};function qy(l){if(l.h&&typeof o<"u"&&(!l.v[1]||ls(l)!=4||l.Z()!=2)){if(l.u&&ls(l)==4)Al(l.Ea,0,l);else if(yt(l,"readystatechange"),ls(l)==4){l.h=!1;try{const H=l.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=H===0){var V=String(l.D).match(jy)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),_=!qx.test(V?V.toLowerCase():"")}p=_}if(p)yt(l,"complete"),yt(l,"success");else{l.m=6;try{var F=2<ls(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",$y(l)}}finally{Bl(l)}}}}function Bl(l,h){if(l.g){Wy(l);const p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||yt(l,"ready");try{p.onreadystatechange=_}catch{}}}function Wy(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function ls(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<ls(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Qh(h)}};function Gy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Gx(l){const h={};l=(l.g&&2<=ls(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(v(l[_]))continue;var p=R(l[_]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const F=h[V]||[];h[V]=F,F.push(p)}w(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Da(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Hy(l){this.Aa=0,this.i=[],this.j=new pe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Da("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Da("baseRetryDelayMs",5e3,l),this.cb=Da("retryDelaySeedMs",1e4,l),this.Wa=Da("forwardChannelMaxRetries",2,l),this.wa=Da("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Bs(l&&l.concurrentRequestLimit),this.Da=new Bx,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Hy.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,_){K(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=nv(this,null,this.W),ql(this)};function Jh(l){if(Ky(l),l.G==3){var h=l.U++,p=cs(l.I);if(Ve(p,"SID",l.K),Ve(p,"RID",h),Ve(p,"TYPE","terminate"),ja(l,p),h=new Gt(l,l.j,h),h.L=2,h.v=Fl(cs(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=sv(h.j,null),h.g.ea(h.v)),h.F=Date.now(),is(h)}tv(l)}function $l(l){l.g&&(ef(l),l.g.cancel(),l.g=null)}function Ky(l){$l(l),l.u&&(a.clearTimeout(l.u),l.u=null),Wl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function ql(l){if(!$s(l.h)&&!l.s){l.s=!0;var h=l.Ga;Z||ne(),z||(Z(),z=!0),J.add(h,l),l.B=0}}function Hx(l,h){return Kr(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ie(g(l.Ga,l,h),ev(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const V=new Gt(this,this.j,l);let F=this.o;if(this.S&&(F?(F=y(F),k(F,this.S)):F=this.S),this.m!==null||this.O||(V.H=F,F=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Yy(this,V,h),p=cs(this.I),Ve(p,"RID",l),Ve(p,"CVER",22),this.D&&Ve(p,"X-HTTP-Session-Id",this.D),ja(this,p),F&&(this.O?h="headers="+encodeURIComponent(String(Uy(F)))+"&"+h:this.m&&Xh(p,this.m,F)),Qr(this.h,V),this.Ua&&Ve(p,"TYPE","init"),this.P?(Ve(p,"$req",h),Ve(p,"SID","null"),V.T=!0,Gi(V,p,null)):Gi(V,p,h),this.G=2}}else this.G==3&&(l?Qy(this,l):this.i.length==0||$s(this.h)||Qy(this))};function Qy(l,h){var p;h?p=h.l:p=l.U++;const _=cs(l.I);Ve(_,"SID",l.K),Ve(_,"RID",p),Ve(_,"AID",l.T),ja(l,_),l.m&&l.o&&Xh(_,l.m,l.o),p=new Gt(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Yy(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Qr(l.h,p),Gi(p,_,h)}function ja(l,h){l.H&&M(l.H,function(p,_){Ve(h,_,p)}),l.l&&Ki({},function(p,_){Ve(h,_,p)})}function Yy(l,h,p){p=Math.min(l.i.length,p);var _=l.l?g(l.l.Na,l.l,l):null;e:{var V=l.i;let F=-1;for(;;){const H=["count="+p];F==-1?0<p?(F=V[0].g,H.push("ofs="+F)):F=0:H.push("ofs="+F);let je=!0;for(let vt=0;vt<p;vt++){let Ae=V[vt].g;const bt=V[vt].map;if(Ae-=F,0>Ae)F=Math.max(0,V[vt].g-100),je=!1;else try{$x(bt,H,"req"+Ae+"_")}catch{_&&_(bt)}}if(je){_=H.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function Xy(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Z||ne(),z||(Z(),z=!0),J.add(h,l),l.v=0}}function Zh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ie(g(l.Fa,l),ev(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Jy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ie(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,K(10),$l(this),Jy(this))};function ef(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Jy(l){l.g=new Gt(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=cs(l.qa);Ve(h,"RID","rpc"),Ve(h,"SID",l.K),Ve(h,"AID",l.T),Ve(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ve(h,"TO",l.ja),Ve(h,"TYPE","xmlhttp"),ja(l,h),l.m&&l.o&&Xh(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Fl(cs(h)),p.m=null,p.P=!0,ka(p,l)}t.Za=function(){this.C!=null&&(this.C=null,$l(this),Zh(this),K(19))};function Wl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Zy(l,h){var p=null;if(l.g==h){Wl(l),ef(l),l.g=null;var _=2}else if(os(l.h,h))p=h.D,Ze(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var V=l.B;_=qr(),yt(_,new ce(_,p)),ql(l)}else Xy(l);else if(V=h.s,V==3||V==0&&0<h.X||!(_==1&&Hx(l,h)||_==2&&Zh(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),V){case 1:Xr(l,5);break;case 4:Xr(l,10);break;case 3:Xr(l,6);break;default:Xr(l,2)}}}function ev(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Xr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),_=l.Xa;const V=!_;_=new Yr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ml(_,"https"),Fl(_),V?zx(_.toString(),p):Ux(_.toString(),p)}else K(2);l.G=0,l.l&&l.l.sa(h),tv(l),Ky(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),K(2)):(this.j.info("Failed to ping google.com"),K(1))};function tv(l){if(l.G=0,l.ka=[],l.l){const h=xt(l.h);(h.length!=0||l.i.length!=0)&&(C(l.ka,h),C(l.ka,l.i),l.h.i.length=0,N(l.i),l.i.length=0),l.l.ra()}}function nv(l,h,p){var _=p instanceof Yr?cs(p):new Yr(p);if(_.g!="")h&&(_.g=h+"."+_.g),Ll(_,_.s);else{var V=a.location;_=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;var F=new Yr(null);_&&Ml(F,_),h&&(F.g=h),V&&Ll(F,V),p&&(F.l=p),_=F}return p=l.D,h=l.ya,p&&h&&Ve(_,p,h),Ve(_,"VER",l.la),ja(l,_),_}function sv(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Qe(new zl({eb:p})):new Qe(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rv(){}t=rv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Gl(){}Gl.prototype.g=function(l,h){return new en(l,h)};function en(l,h){ht.call(this),this.g=new Hy(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!v(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Yi(this)}S(en,ht),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Jh(this.g)},en.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Ia(l),l=p);h.i.push(new Vl(h.Ya++,l)),h.G==3&&ql(h)},en.prototype.N=function(){this.g.l=null,delete this.j,Jh(this.g),delete this.g,en.aa.N.call(this)};function iv(l){Sn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(iv,Sn);function ov(){Sa.call(this),this.status=1}S(ov,Sa);function Yi(l){this.g=l}S(Yi,rv),Yi.prototype.ua=function(){yt(this.g,"a")},Yi.prototype.ta=function(l){yt(this.g,new iv(l))},Yi.prototype.sa=function(l){yt(this.g,new ov)},Yi.prototype.ra=function(){yt(this.g,"b")},Gl.prototype.createWebChannel=Gl.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,cT=function(){return new Gl},aT=function(){return qr()},oT=ns,Jm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,Fu=Vs,Ms.COMPLETE="complete",iT=Ms,ba.EventType=$r,$r.OPEN="a",$r.CLOSE="b",$r.ERROR="c",$r.MESSAGE="d",ht.prototype.listen=ht.prototype.K,tc=ba,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,rT=Qe}).apply(typeof hu<"u"?hu:typeof self<"u"?self:typeof window<"u"?window:{});const ew="@firebase/firestore",tw="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new kg("@firebase/firestore");function oo(){return Ai.logLevel}function q(t,...e){if(Ai.logLevel<=ve.DEBUG){const n=e.map(Fg);Ai.debug(`Firestore (${da}): ${t}`,...n)}}function Lt(t,...e){if(Ai.logLevel<=ve.ERROR){const n=e.map(Fg);Ai.error(`Firestore (${da}): ${t}`,...n)}}function Ni(t,...e){if(Ai.logLevel<=ve.WARN){const n=e.map(Fg);Ai.warn(`Firestore (${da}): ${t}`,...n)}}function Fg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,lT(t,s,n)}function lT(t,e,n){let s=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Lt(s),new Error(s)}function oe(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||lT(e,r,s)}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class vR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _R{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new es;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new es,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new es)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(oe(typeof s.accessToken=="string",31837,{l:s}),new uT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new wt(e)}}class wR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ER{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new wR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const s=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new nw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=IR(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function ue(t,e){return t<e?-1:t>e?1:0}function Zm(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return ue(s,r);{const i=dT(),o=xR(i.encode(sw(t,n)),i.encode(sw(e,n)));return o!==0?o:ue(s,r)}}n+=s>65535?2:1}return ue(t.length,e.length)}function sw(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function xR(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ue(t[n],e[n]);return ue(t.length,e.length)}function $o(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}function fT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=-62135596800,iw=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*iw);return new Ge(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rw)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iw}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-rw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ge(0,0))}static max(){return new ae(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="__name__";class Bn{constructor(e,n,s){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&te(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Bn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Bn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return ue(e.length,n.length)}static compareSegments(e,n){const s=Bn.isNumericId(e),r=Bn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Bn.extractNumericId(e).compare(Bn.extractNumericId(n)):Zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ir.fromString(e.substring(4,e.length-2))}}class Ne extends Bn{construct(e,n,s){return new Ne(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Q(U.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const bR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends Bn{construct(e,n,s){return new $e(e,n,s)}static isValidIdentifier(e){return bR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ow}static keyField(){return new $e([ow])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ne.fromString(e))}static fromName(e){return new Y(Ne.fromString(e).popFirst(5))}static empty(){return new Y(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=-1;class Rd{constructor(e,n,s,r){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=r}}function ep(t){return t.fields.find(e=>e.kind===2)}function ni(t){return t.fields.filter(e=>e.kind!==2)}Rd.UNKNOWN_ID=-1;class zu{constructor(e,n){this.fieldPath=e,this.kind=n}}class Kc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Kc(0,dn.min())}}function SR(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ae.fromTimestamp(s===1e9?new Ge(n+1,0):new Ge(n,s));return new dn(r,Y.empty(),e)}function mT(t){return new dn(t.readTime,t.key,Hc)}class dn{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new dn(ae.min(),Y.empty(),Hc)}static max(){return new dn(ae.max(),Y.empty(),Hc)}}function zg(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zi(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==pT)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,s)=>{n(e)})}static reject(e){return new O((n,s)=>{s(e)})}static waitFor(e){return new O((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=O.resolve(!1);for(const s of e)n=n.next(r=>r?O.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new O((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++a,a===i&&s(o)},f=>r(f))}})}static doWhile(e,n){return new O((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="SimpleDb";class Th{static open(e,n,s,r){try{return new Th(n,e.transaction(r,s))}catch(i){throw new yc(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new es,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new yc(e,n.error)):this.S.resolve()},this.transaction.onerror=s=>{const r=Ug(s.target.error);this.S.reject(new yc(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(q(sn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new AR(n)}}class xr{static delete(e){return q(sn,"Removing database:",e),ri(iE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!fE())return!1;if(xr.F())return!0;const e=lt(),n=xr.M(e),s=0<n&&n<10,r=yT(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,n,s){this.name=e,this.version=n,this.B=s,this.L=null,xr.M(lt())===12.2&&Lt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(q(sn,"Opening database:",this.name),this.db=await new Promise((n,s)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=i=>{const o=i.target.result;n(o)},r.onblocked=()=>{s(new yc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=i=>{const o=i.target.error;o.name==="VersionError"?s(new Q(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?s(new Q(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):s(new yc(e,o))},r.onupgradeneeded=i=>{q(sn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;if(this.L!==null&&this.L!==i.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${i.oldVersion}, event.newVersion=${i.newVersion}, db.version=${o.version}`);this.B.q(o,r.transaction,i.oldVersion,this.version).next(()=>{q(sn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",n=>{const s=n.target;this.L=s.version},{passive:!0})),this.$&&(this.db.onversionchange=n=>this.$(n)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,s,r){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=Th.open(this.db,e,i?"readonly":"readwrite",s),c=r(a).next(d=>(a.v(),d)).catch(d=>(a.abort(d),O.reject(d))).toPromise();return c.catch(()=>{}),await a.D,c}catch(a){const c=a,d=c.name!=="FirebaseError"&&o<3;if(q(sn,"Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function yT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class kR{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return ri(this.K.delete())}}class yc extends Q{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Fr(t){return t.name==="IndexedDbTransactionError"}class AR{constructor(e){this.store=e}put(e,n){let s;return n!==void 0?(q(sn,"PUT",this.store.name,e,n),s=this.store.put(n,e)):(q(sn,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ri(s)}add(e){return q(sn,"ADD",this.store.name,e,e),ri(this.store.add(e))}get(e){return ri(this.store.get(e)).next(n=>(n===void 0&&(n=null),q(sn,"GET",this.store.name,e,n),n))}delete(e){return q(sn,"DELETE",this.store.name,e),ri(this.store.delete(e))}count(){return q(sn,"COUNT",this.store.name),ri(this.store.count())}J(e,n){const s=this.options(e,n),r=s.index?this.store.index(s.index):this.store;if(typeof r.getAll=="function"){const i=r.getAll(s.range);return new O((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(s),o=[];return this.Y(i,(a,c)=>{o.push(c)}).next(()=>o)}}Z(e,n){const s=this.store.getAll(e,n===null?void 0:n);return new O((r,i)=>{s.onerror=o=>{i(o.target.error)},s.onsuccess=o=>{r(o.target.result)}})}X(e,n){q(sn,"DELETE ALL",this.store.name);const s=this.options(e,n);s.ee=!1;const r=this.cursor(s);return this.Y(r,(i,o,a)=>a.delete())}te(e,n){let s;n?s=e:(s={},n=e);const r=this.cursor(s);return this.Y(r,n)}ne(e){const n=this.cursor({});return new O((s,r)=>{n.onerror=i=>{const o=Ug(i.target.error);r(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():s()}):s()}})}Y(e,n){const s=[];return new O((r,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const c=new kR(a),d=n(a.primaryKey,a.value,c);if(d instanceof O){const f=d.catch(m=>(c.done(),O.reject(m)));s.push(f)}c.isDone?r():c.j===null?a.continue():a.continue(c.j)}}).next(()=>O.waitFor(s))}options(e,n){let s;return e!==void 0&&(typeof e=="string"?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.ee?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ri(t){return new O((e,n)=>{t.onsuccess=s=>{const r=s.target.result;e(r)},t.onerror=s=>{const r=Ug(s.target.error);n(r)}})}let aw=!1;function Ug(t){const e=xr.M(lt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const s=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aw||(aw=!0,setTimeout(()=>{throw s},0)),s}}return t}const vc="IndexBackfiller";class NR{constructor(e,n){this.asyncQueue=e,this.re=n,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){q(vc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.re.se();q(vc,`Documents written: ${n}`)}catch(n){Fr(n)?q(vc,"Ignoring IndexedDB error during index backfill: ",n):await zi(n)}await this.ie(6e4)})}}class PR{constructor(e,n){this.localStore=e,this.persistence=n}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.oe(n,e))}oe(e,n){const s=new Set;let r=n,i=!0;return O.doWhile(()=>i===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!s.has(o))return q(vc,`Processing collection: ${o}`),this._e(e,o,r).next(a=>{r-=a,s.add(o)});i=!1})).next(()=>n-r)}_e(e,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,s).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ae(r,i)).next(a=>(q(vc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ae(e,n){let s=e;return n.changes.forEach((r,i)=>{const o=mT(i);zg(o,s)>0&&(s=o)}),new dn(s.readTime,s.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}_n.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=-1;function Ih(t){return t==null}function Qc(t){return t===0&&1/t==-1/0}function CR(t){return typeof t=="number"&&Number.isInteger(t)&&!Qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="";function Ot(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cw(e)),e=RR(t.get(n),e);return cw(e)}function RR(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Dd:n+="";break;default:n+=i}}return n}function cw(t){return t+Dd+""}function qn(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===Dd&&t.charAt(1)==="",56145,{path:t}),Ne.emptyPath();const n=e-2,s=[];let r="";for(let i=0;i<e;){const o=t.indexOf(Dd,i);switch((o<0||o>n)&&te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;r.length===0?c=a:(r+=a,c=r,r=""),s.push(c);break;case"":r+=t.substring(i,o),r+="\0";break;case"":r+=t.substring(i,o+1);break;default:te(61167,{path:t})}i=o+2}return new Ne(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si="remoteDocuments",_l="owner",eo="owner",Yc="mutationQueues",DR="userId",Rn="mutations",lw="batchId",di="userMutationsIndex",uw=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t,e){return[t,Ot(e)]}function vT(t,e,n){return[t,Ot(e),n]}const jR={},qo="documentMutations",jd="remoteDocumentsV14",OR=["prefixPath","collectionGroup","readTime","documentId"],Bu="documentKeyIndex",VR=["prefixPath","collectionGroup","documentId"],_T="collectionGroupIndex",MR=["collectionGroup","readTime","prefixPath","documentId"],Xc="remoteDocumentGlobal",tp="remoteDocumentGlobalKey",Wo="targets",wT="queryTargetsIndex",LR=["canonicalId","targetId"],Go="targetDocuments",FR=["targetId","path"],Bg="documentTargetsIndex",zR=["path","targetId"],Od="targetGlobalKey",yi="targetGlobal",Jc="collectionParents",UR=["collectionId","parent"],Ho="clientMetadata",BR="clientId",xh="bundles",$R="bundleId",bh="namedQueries",qR="name",$g="indexConfiguration",WR="indexId",np="collectionGroupIndex",GR="collectionGroup",_c="indexState",HR=["indexId","uid"],ET="sequenceNumberIndex",KR=["uid","sequenceNumber"],wc="indexEntries",QR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],TT="documentKeyIndex",YR=["indexId","uid","orderedDocumentKey"],Sh="documentOverlays",XR=["userId","collectionPath","documentId"],sp="collectionPathOverlayIndex",JR=["userId","collectionPath","largestBatchId"],IT="collectionGroupOverlayIndex",ZR=["userId","collectionGroup","largestBatchId"],qg="globals",eD="name",xT=[Yc,Rn,qo,si,Wo,_l,yi,Go,Ho,Xc,Jc,xh,bh],tD=[...xT,Sh],bT=[Yc,Rn,qo,jd,Wo,_l,yi,Go,Ho,Xc,Jc,xh,bh,Sh],ST=bT,Wg=[...ST,$g,_c,wc],nD=Wg,kT=[...Wg,qg],sD=kT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends gT{constructor(e,n){super(),this.he=e,this.currentSequenceNumber=n}}function ut(t,e){const n=me(t);return xr.N(n.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fu(this.root,e,this.comparator,!0)}}class fu{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Et.RED,this.left=r??Et.EMPTY,this.right=i??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Et(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Et.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hw(this.data.getIterator())}getIteratorFrom(e){return new hw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Re)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Re(this.comparator);return n.data=e,n}}class hw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function to(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new Re($e.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new NT("Invalid base64 string: "+i):i}}(e);return new it(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const rD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=rD.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ks(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="server_timestamp",CT="__type__",RT="__previous_value__",DT="__local_write_time__";function Gg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[CT])===null||n===void 0?void 0:n.stringValue)===PT}function kh(t){const e=t.mapValue.fields[RT];return Gg(e)?kh(e):e}function Zc(t){const e=Ss(t.mapValue.fields[DT].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n,s,r,i,o,a,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Vd="(default)";class Pi{constructor(e,n){this.projectId=e,this.database=n||Vd}static empty(){return new Pi("","")}get isDefaultDatabase(){return this.database===Vd}isEqual(e){return e instanceof Pi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="__type__",jT="__max__",dr={mapValue:{fields:{__type__:{stringValue:jT}}}},Kg="__vector__",Ko="value",$u={nullValue:"NULL_VALUE"};function Pr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gg(t)?4:OT(t)?9007199254740991:Ah(t)?10:11:te(28295,{value:t})}function ts(t,e){if(t===e)return!0;const n=Pr(t);if(n!==Pr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zc(t).isEqual(Zc(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ss(r.timestampValue),a=Ss(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return ks(r.bytesValue).isEqual(ks(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Fe(r.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(r.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Fe(r.integerValue)===Fe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Fe(r.doubleValue),a=Fe(i.doubleValue);return o===a?Qc(o)===Qc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return $o(t.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(dw(o)!==dw(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ts(o[c],a[c])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function el(t,e){return(t.values||[]).find(n=>ts(n,e))!==void 0}function Cr(t,e){if(t===e)return 0;const n=Pr(t),s=Pr(e);if(n!==s)return ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Fe(i.integerValue||i.doubleValue),c=Fe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return fw(t.timestampValue,e.timestampValue);case 4:return fw(Zc(t),Zc(e));case 5:return Zm(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ks(i),c=ks(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){const f=ue(a[d],c[d]);if(f!==0)return f}return ue(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ue(Fe(i.latitude),Fe(o.latitude));return a!==0?a:ue(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mw(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,d,f;const m=i.fields||{},g=o.fields||{},E=(a=m[Ko])===null||a===void 0?void 0:a.arrayValue,S=(c=g[Ko])===null||c===void 0?void 0:c.arrayValue,N=ue(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:mw(E,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===dr.mapValue&&o===dr.mapValue)return 0;if(i===dr.mapValue)return 1;if(o===dr.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const g=Zm(c[m],f[m]);if(g!==0)return g;const E=Cr(a[c[m]],d[f[m]]);if(E!==0)return E}return ue(c.length,f.length)}(t.mapValue,e.mapValue);default:throw te(23264,{Pe:n})}}function fw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Ss(t),s=Ss(e),r=ue(n.seconds,s.seconds);return r!==0?r:ue(n.nanos,s.nanos)}function mw(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Cr(n[r],s[r]);if(i)return i}return ue(n.length,s.length)}function Qo(t){return ip(t)}function ip(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ss(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ks(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=ip(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${ip(n.fields[o])}`;return r+"}"}(t.mapValue):te(61005,{value:t})}function qu(t){switch(Pr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kh(t);return e?16+qu(e):16;case 5:return 2*t.stringValue.length;case 6:return ks(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+qu(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return zr(s.fields,(i,o)=>{r+=i.length+qu(o)}),r}(t.mapValue);default:throw te(13486,{value:t})}}function tl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function op(t){return!!t&&"integerValue"in t}function nl(t){return!!t&&"arrayValue"in t}function pw(t){return!!t&&"nullValue"in t}function gw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wu(t){return!!t&&"mapValue"in t}function Ah(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Hg])===null||n===void 0?void 0:n.stringValue)===Kg}function Ec(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ec(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ec(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jT}const VT={mapValue:{fields:{[Hg]:{stringValue:Kg},[Ko]:{arrayValue:{}}}}};function oD(t){return"nullValue"in t?$u:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?tl(Pi.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Ah(t)?VT:{mapValue:{}}:te(35942,{value:t})}function aD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?tl(Pi.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?VT:"mapValue"in t?Ah(t)?{mapValue:{}}:dr:te(61959,{value:t})}function yw(t,e){const n=Cr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function vw(t,e){const n=Cr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(n)}setAll(e){let n=$e.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Ec(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Wu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){zr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Dt(Ec(this.value))}}function MT(t){const e=[];return zr(t.fields,(n,s)=>{const r=new $e([n]);if(Wu(s)){const i=MT(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Xe(e,0,ae.min(),ae.min(),ae.min(),Dt.empty(),0)}static newFoundDocument(e,n,s,r){return new Xe(e,1,n,ae.min(),s,r,0)}static newNoDocument(e,n){return new Xe(e,2,n,ae.min(),ae.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Xe(e,3,n,ae.min(),ae.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.position=e,this.inclusive=n}}function _w(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Y.comparator(Y.fromName(o.referenceValue),n.key):s=Cr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function ww(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ts(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n="asc"){this.field=e,this.dir=n}}function cD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{}class _e extends LT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new lD(e,n,s):n==="array-contains"?new hD(e,s):n==="in"?new qT(e,s):n==="not-in"?new fD(e,s):n==="array-contains-any"?new mD(e,s):new _e(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new uD(e,s):new dD(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Cr(n,this.value)):n!==null&&Pr(this.value)===Pr(n)&&this.matchesComparison(Cr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pe extends LT{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Pe(e,n)}matches(e){return Xo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Xo(t){return t.op==="and"}function ap(t){return t.op==="or"}function Qg(t){return FT(t)&&Xo(t)}function FT(t){for(const e of t.filters)if(e instanceof Pe)return!1;return!0}function cp(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+Qo(t.value);if(Qg(t))return t.filters.map(e=>cp(e)).join(",");{const e=t.filters.map(n=>cp(n)).join(",");return`${t.op}(${e})`}}function zT(t,e){return t instanceof _e?function(s,r){return r instanceof _e&&s.op===r.op&&s.field.isEqual(r.field)&&ts(s.value,r.value)}(t,e):t instanceof Pe?function(s,r){return r instanceof Pe&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&zT(o,r.filters[a]),!0):!1}(t,e):void te(19439)}function UT(t,e){const n=t.filters.concat(e);return Pe.create(n,t.op)}function BT(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${Qo(n.value)}`}(t):t instanceof Pe?function(n){return n.op.toString()+" {"+n.getFilters().map(BT).join(" ,")+"}"}(t):"Filter"}class lD extends _e{constructor(e,n,s){super(e,n,s),this.key=Y.fromName(s.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class uD extends _e{constructor(e,n){super(e,"in",n),this.keys=$T("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dD extends _e{constructor(e,n){super(e,"not-in",n),this.keys=$T("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $T(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Y.fromName(s.referenceValue))}class hD extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nl(n)&&el(n.arrayValue,this.value)}}class qT extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&el(this.value.arrayValue,n)}}class fD extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(el(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!el(this.value.arrayValue,n)}}class mD extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>el(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function lp(t,e=null,n=[],s=[],r=null,i=null,o=null){return new pD(t,e,n,s,r,i,o)}function Ci(t){const e=me(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>cp(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Qo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Qo(s)).join(",")),e.Ie=n}return e.Ie}function wl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ww(t.startAt,e.startAt)&&ww(t.endAt,e.endAt)}function Md(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ld(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function Ew(t,e,n){let s=$u,r=!0;for(const i of Ld(t,e)){let o=$u,a=!0;switch(i.op){case"<":case"<=":o=oD(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=$u}yw({value:s,inclusive:r},{value:o,inclusive:a})<0&&(s=o,r=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];yw({value:s,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(s=o,r=n.inclusive);break}}return{value:s,inclusive:r}}function Tw(t,e,n){let s=dr,r=!0;for(const i of Ld(t,e)){let o=dr,a=!0;switch(i.op){case">=":case">":o=aD(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=dr}vw({value:s,inclusive:r},{value:o,inclusive:a})>0&&(s=o,r=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];vw({value:s,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(s=o,r=n.inclusive);break}}return{value:s,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function gD(t,e,n,s,r,i,o,a){return new ha(t,e,n,s,r,i,o,a)}function Nh(t){return new ha(t)}function Iw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WT(t){return t.collectionGroup!==null}function Tc(t){const e=me(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Re($e.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new sl(i,s))}),n.has($e.keyField().canonicalString())||e.Ee.push(new sl($e.keyField(),s))}return e.Ee}function En(t){const e=me(t);return e.de||(e.de=yD(e,Tc(t))),e.de}function yD(t,e){if(t.limitType==="F")return lp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new sl(r.field,i)});const n=t.endAt?new Yo(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Yo(t.startAt.position,t.startAt.inclusive):null;return lp(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function up(t,e){const n=t.filters.concat([e]);return new ha(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dp(t,e,n){return new ha(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ph(t,e){return wl(En(t),En(e))&&t.limitType===e.limitType}function GT(t){return`${Ci(En(t))}|lt:${t.limitType}`}function ao(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>BT(r)).join(", ")}]`),Ih(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Qo(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Qo(r)).join(",")),`Target(${s})`}(En(t))}; limitType=${t.limitType})`}function El(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Y.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Tc(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,c){const d=_w(o,a,c);return o.inclusive?d<=0:d<0}(s.startAt,Tc(s),r)||s.endAt&&!function(o,a,c){const d=_w(o,a,c);return o.inclusive?d>=0:d>0}(s.endAt,Tc(s),r))}(t,e)}function vD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HT(t){return(e,n)=>{let s=!1;for(const r of Tc(t)){const i=_D(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function _D(t,e,n){const s=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),d=a.data.field(i);return c!==null&&d!==null?Cr(c,d):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return AT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=new Ue(Y.comparator);function cn(){return wD}const KT=new Ue(Y.comparator);function nc(...t){let e=KT;for(const n of t)e=e.insert(n.key,n);return e}function QT(t){let e=KT;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Wn(){return Ic()}function YT(){return Ic()}function Ic(){return new Rs(t=>t.toString(),(t,e)=>t.isEqual(e))}const ED=new Ue(Y.comparator),TD=new Re(Y.comparator);function ge(...t){let e=TD;for(const n of t)e=e.add(n);return e}const ID=new Re(ue);function xD(){return ID}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(e)?"-0":e}}function XT(t){return{integerValue:""+t}}function bD(t,e){return CR(e)?XT(e):Yg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this._=void 0}}function SD(t,e,n){return t instanceof rl?function(r,i){const o={fields:{[CT]:{stringValue:PT},[DT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Gg(i)&&(i=kh(i)),i&&(o.fields[RT]=i),{mapValue:o}}(n,e):t instanceof Jo?ZT(t,e):t instanceof Zo?eI(t,e):function(r,i){const o=JT(r,i),a=xw(o)+xw(r.Re);return op(o)&&op(r.Re)?XT(a):Yg(r.serializer,a)}(t,e)}function kD(t,e,n){return t instanceof Jo?ZT(t,e):t instanceof Zo?eI(t,e):n}function JT(t,e){return t instanceof il?function(s){return op(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class rl extends Ch{}class Jo extends Ch{constructor(e){super(),this.elements=e}}function ZT(t,e){const n=tI(e);for(const s of t.elements)n.some(r=>ts(r,s))||n.push(s);return{arrayValue:{values:n}}}class Zo extends Ch{constructor(e){super(),this.elements=e}}function eI(t,e){let n=tI(e);for(const s of t.elements)n=n.filter(r=>!ts(r,s));return{arrayValue:{values:n}}}class il extends Ch{constructor(e,n){super(),this.serializer=e,this.Re=n}}function xw(t){return Fe(t.integerValue||t.doubleValue)}function tI(t){return nl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n){this.field=e,this.transform=n}}function ND(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Jo&&r instanceof Jo||s instanceof Zo&&r instanceof Zo?$o(s.elements,r.elements,ts):s instanceof il&&r instanceof il?ts(s.Re,r.Re):s instanceof rl&&r instanceof rl}(t.transform,e.transform)}class PD{constructor(e,n){this.version=e,this.transformResults=n}}class jt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jt}static exists(e){return new jt(void 0,e)}static updateTime(e){return new jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rh{}function nI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Dh(t.key,jt.none()):new fa(t.key,t.data,jt.none());{const n=t.data,s=Dt.empty();let r=new Re($e.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Ds(t.key,s,new Yt(r.toArray()),jt.none())}}function CD(t,e,n){t instanceof fa?function(r,i,o){const a=r.value.clone(),c=Sw(r.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ds?function(r,i,o){if(!Gu(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Sw(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(sI(r)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xc(t,e,n,s){return t instanceof fa?function(i,o,a,c){if(!Gu(i.precondition,o))return a;const d=i.value.clone(),f=kw(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ds?function(i,o,a,c){if(!Gu(i.precondition,o))return a;const d=kw(i.fieldTransforms,c,o),f=o.data;return f.setAll(sI(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(i,o,a){return Gu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function RD(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=JT(s.transform,r||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(s.field,i))}return n||null}function bw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&$o(s,r,(i,o)=>ND(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fa extends Rh{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ds extends Rh{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function sI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Sw(t,e,n){const s=new Map;oe(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,kD(o,a,n[r]))}return s}function kw(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,SD(i,o,e))}return s}class Dh extends Rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rI extends Rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&CD(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=xc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=xc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=YT();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const c=nI(o,a);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,(n,s)=>bw(n,s))&&$o(this.baseMutations,e.baseMutations,(n,s)=>bw(n,s))}}class Jg{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){oe(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let r=function(){return ED}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Jg(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,Ie;function jD(t){switch(t){case U.OK:return te(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function iI(t){if(t===void 0)return Lt("GRPC error has no .code"),U.UNKNOWN;switch(t){case tt.OK:return U.OK;case tt.CANCELLED:return U.CANCELLED;case tt.UNKNOWN:return U.UNKNOWN;case tt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case tt.INTERNAL:return U.INTERNAL;case tt.UNAVAILABLE:return U.UNAVAILABLE;case tt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case tt.NOT_FOUND:return U.NOT_FOUND;case tt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case tt.ABORTED:return U.ABORTED;case tt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case tt.DATA_LOSS:return U.DATA_LOSS;default:return te(39323,{code:t})}}(Ie=tt||(tt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new Ir([4294967295,4294967295],0);function Aw(t){const e=dT().encode(t),n=new sT;return n.update(e),new Uint8Array(n.digest())}function Nw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ir([n,s],0),new Ir([r,i],0)]}class ey{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new sc(`Invalid padding: ${n}`);if(s<0)throw new sc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new sc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new sc(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ir.fromNumber(this.pe)}we(e,n,s){let r=e.add(n.multiply(Ir.fromNumber(s)));return r.compare(OD)===1&&(r=new Ir([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Aw(e),[s,r]=Nw(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);if(!this.be(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ey(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=Aw(e),[s,r]=Nw(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class sc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Tl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new jh(ae.min(),r,new Ue(ue),cn(),ge())}}class Tl{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Tl(s,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,s,r){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=r}}class oI{constructor(e,n){this.targetId=e,this.Ce=n}}class aI{constructor(e,n,s=it.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Pw{constructor(){this.Fe=0,this.Me=Cw(),this.xe=it.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ge(),n=ge(),s=ge();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:te(38017,{changeType:i})}}),new Tl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=Cw()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,oe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class VD{constructor(e){this.ze=e,this.je=new Map,this.He=cn(),this.Je=mu(),this.Ye=mu(),this.Ze=new Ue(ue)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,s=e.Ce.count,r=this._t(n);if(r){const i=r.target;if(Md(i))if(s===0){const o=new Y(i.path);this.tt(n,o,Xe.newNoDocument(o,ae.min()))}else oe(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const a=this.ct(e),c=a?this.lt(a,e,o):1;if(c!==0){this.st(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=ks(s).toUint8Array()}catch(c){if(c instanceof NT)return Ni("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ey(o,r,i)}catch(c){return Ni(c instanceof sc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),r++)}),r}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&Md(a.target)){const c=new Y(a.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Xe.newNoDocument(c,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let s=ge();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const d=this._t(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const r=new jh(e,n,this.Ze,this.He,s);return this.He=cn(),this.Je=mu(),this.Ye=mu(),this.Ze=new Ue(ue),r}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Pw,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Re(ue),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Re(ue),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Pw),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function mu(){return new Ue(Y.comparator)}function Cw(){return new Ue(Y.comparator)}const MD={asc:"ASCENDING",desc:"DESCENDING"},LD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FD={and:"AND",or:"OR"};class zD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hp(t,e){return t.useProto3Json||Ih(e)?e:{value:e}}function ea(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UD(t,e){return ea(t,e.toTimestamp())}function zt(t){return oe(!!t,49232),ae.fromTimestamp(function(n){const s=Ss(n);return new Ge(s.seconds,s.nanos)}(t))}function ty(t,e){return fp(t,e).canonicalString()}function fp(t,e){const n=function(r){return new Ne(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lI(t){const e=Ne.fromString(t);return oe(vI(e),10190,{key:e.toString()}),e}function Fd(t,e){return ty(t.databaseId,e.path)}function vi(t,e){const n=lI(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(hI(n))}function uI(t,e){return ty(t.databaseId,e)}function dI(t){const e=lI(t);return e.length===4?Ne.emptyPath():hI(e)}function mp(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hI(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Rw(t,e,n){return{name:Fd(t,e),fields:n.value.mapValue.fields}}function BD(t,e,n){const s=vi(t,e.name),r=zt(e.updateTime),i=e.createTime?zt(e.createTime):ae.min(),o=new Dt({mapValue:{fields:e.fields}}),a=Xe.newFoundDocument(s,r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function $D(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(oe(f===void 0||typeof f=="string",58123),it.fromBase64String(f||"")):(oe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),it.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=d.code===void 0?U.UNKNOWN:iI(d.code);return new Q(f,d.message||"")}(o);n=new aI(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=vi(t,s.document.name),i=zt(s.document.updateTime),o=s.document.createTime?zt(s.document.createTime):ae.min(),a=new Dt({mapValue:{fields:s.document.fields}}),c=Xe.newFoundDocument(r,i,o,a),d=s.targetIds||[],f=s.removedTargetIds||[];n=new Hu(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=vi(t,s.document),i=s.readTime?zt(s.readTime):ae.min(),o=Xe.newNoDocument(r,i),a=s.removedTargetIds||[];n=new Hu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=vi(t,s.document),i=s.removedTargetIds||[];n=new Hu([],i,r,null)}else{if(!("filter"in e))return te(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new DD(r,i),a=s.targetId;n=new oI(a,o)}}return n}function zd(t,e){let n;if(e instanceof fa)n={update:Rw(t,e.key,e.value)};else if(e instanceof Dh)n={delete:Fd(t,e.key)};else if(e instanceof Ds)n={update:Rw(t,e.key,e.data),updateMask:QD(e.fieldMask)};else{if(!(e instanceof rI))return te(16599,{ft:e.type});n={verify:Fd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof rl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof il)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw te(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:UD(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function pp(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?jt.updateTime(zt(i.updateTime)):i.exists!==void 0?jt.exists(i.exists):jt.none()}(e.currentDocument):jt.none(),s=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new rl;else if("appendMissingElements"in a){const f=a.appendMissingElements.values||[];c=new Jo(f)}else if("removeAllFromArray"in a){const f=a.removeAllFromArray.values||[];c=new Zo(f)}else"increment"in a?c=new il(o,a.increment):te(16584,{proto:a});const d=$e.fromServerFormat(a.fieldPath);return new AD(d,c)}(t,r)):[];if(e.update){e.update.name;const r=vi(t,e.update.name),i=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const d=c.fieldPaths||[];return new Yt(d.map(f=>$e.fromServerFormat(f)))}(e.updateMask);return new Ds(r,i,o,n,s)}return new fa(r,i,n,s)}if(e.delete){const r=vi(t,e.delete);return new Dh(r,n)}if(e.verify){const r=vi(t,e.verify);return new rI(r,n)}return te(1463,{proto:e})}function qD(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?zt(r.updateTime):zt(i);return o.isEqual(ae.min())&&(o=zt(i)),new PD(o,r.transformResults||[])}(n,e))):[]}function fI(t,e){return{documents:[uI(t,e.path)]}}function mI(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=uI(t,r);const i=function(d){if(d.length!==0)return yI(Pe.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:co(g.field),direction:GD(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=hp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:r}}function pI(t){let e=dI(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){oe(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=gI(m);return g instanceof Pe&&Qg(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(S){return new sl(lo(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,Ih(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,E=m.values||[];return new Yo(E,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,E=m.values||[];return new Yo(E,g)}(n.endAt)),gD(e,r,o,i,a,"F",c,d)}function WD(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=lo(n.unaryFilter.field);return _e.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=lo(n.unaryFilter.field);return _e.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=lo(n.unaryFilter.field);return _e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=lo(n.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return _e.create(lo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pe.create(n.compositeFilter.filters.map(s=>gI(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function GD(t){return MD[t]}function HD(t){return LD[t]}function KD(t){return FD[t]}function co(t){return{fieldPath:t.canonicalString()}}function lo(t){return $e.fromServerFormat(t.fieldPath)}function yI(t){return t instanceof _e?function(n){if(n.op==="=="){if(gw(n.value))return{unaryFilter:{field:co(n.field),op:"IS_NAN"}};if(pw(n.value))return{unaryFilter:{field:co(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gw(n.value))return{unaryFilter:{field:co(n.field),op:"IS_NOT_NAN"}};if(pw(n.value))return{unaryFilter:{field:co(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:co(n.field),op:HD(n.op),value:n.value}}}(t):t instanceof Pe?function(n){const s=n.getFilters().map(r=>yI(r));return s.length===1?s[0]:{compositeFilter:{op:KD(n.op),filters:s}}}(t):te(54877,{filter:t})}function QD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,s,r,i=ae.min(),o=ae.min(),a=it.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.wt=e}}function YD(t,e){let n;if(e.document)n=BD(t.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Y.fromSegments(e.noDocument.path),r=Di(e.noDocument.readTime);n=Xe.newNoDocument(s,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te(56709);{const s=Y.fromSegments(e.unknownDocument.path),r=Di(e.unknownDocument.version);n=Xe.newUnknownDocument(s,r)}}return e.readTime&&n.setReadTime(function(r){const i=new Ge(r[0],r[1]);return ae.fromTimestamp(i)}(e.readTime)),n}function Dw(t,e){const n=e.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ud(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=function(i,o){return{name:Fd(i,o.key),fields:o.data.value.mapValue.fields,updateTime:ea(i,o.version.toTimestamp()),createTime:ea(i,o.createTime.toTimestamp())}}(t.wt,e);else if(e.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:Ri(e.version)};else{if(!e.isUnknownDocument())return te(57904,{document:e});s.unknownDocument={path:n.path.toArray(),version:Ri(e.version)}}return s}function Ud(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ri(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Di(t){const e=new Ge(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function ii(t,e){const n=(e.baseMutations||[]).map(i=>pp(t.wt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const s=e.mutations.map(i=>pp(t.wt,i)),r=Ge.fromMillis(e.localWriteTimeMs);return new Xg(e.batchId,r,n,s)}function rc(t){const e=Di(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Di(t.lastLimboFreeSnapshotVersion):ae.min();let s;return s=function(i){return i.documents!==void 0}(t.query)?function(i){const o=i.documents.length;return oe(o===1,1966,{count:o}),En(Nh(dI(i.documents[0])))}(t.query):function(i){return En(pI(i))}(t.query),new gs(s,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,it.fromBase64String(t.resumeToken))}function wI(t,e){const n=Ri(e.snapshotVersion),s=Ri(e.lastLimboFreeSnapshotVersion);let r;r=Md(e.target)?fI(t.wt,e.target):mI(t.wt,e.target).gt;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ci(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:r}}function EI(t){const e=pI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dp(e,e.limit,"L"):e}function Mf(t,e){return new Zg(e.largestBatchId,pp(t.wt,e.overlayMutation))}function jw(t,e){const n=e.path.lastSegment();return[t,Ot(e.path.popLast()),n]}function Ow(t,e,n,s){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ri(s.readTime),documentKey:Ot(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{getBundleMetadata(e,n){return Vw(e).get(n).next(s=>{if(s)return function(i){return{id:i.bundleId,createTime:Di(i.createTime),version:i.version}}(s)})}saveBundleMetadata(e,n){return Vw(e).put(function(r){return{bundleId:r.id,createTime:Ri(zt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return Mw(e).get(n).next(s=>{if(s)return function(i){return{name:i.name,query:EI(i.bundledQuery),readTime:Di(i.readTime)}}(s)})}saveNamedQuery(e,n){return Mw(e).put(function(r){return{name:r.name,readTime:Ri(zt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function Vw(t){return ut(t,xh)}function Mw(t){return ut(t,bh)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.serializer=e,this.userId=n}static bt(e,n){const s=n.uid||"";return new Oh(e,s)}getOverlay(e,n){return $a(e).get(jw(this.userId,n)).next(s=>s?Mf(this.serializer,s):null)}getOverlays(e,n){const s=Wn();return O.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){const r=[];return s.forEach((i,o)=>{const a=new Zg(n,o);r.push(this.St(e,a))}),O.waitFor(r)}removeOverlaysForBatchId(e,n,s){const r=new Set;n.forEach(o=>r.add(Ot(o.getCollectionPath())));const i=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,s],[this.userId,o,s+1],!1,!0);i.push($a(e).X(sp,a))}),O.waitFor(i)}getOverlaysForCollection(e,n,s){const r=Wn(),i=Ot(n),o=IDBKeyRange.bound([this.userId,i,s],[this.userId,i,Number.POSITIVE_INFINITY],!0);return $a(e).J(sp,o).next(a=>{for(const c of a){const d=Mf(this.serializer,c);r.set(d.getKey(),d)}return r})}getOverlaysForCollectionGroup(e,n,s,r){const i=Wn();let o;const a=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return $a(e).te({index:IT,range:a},(c,d,f)=>{const m=Mf(this.serializer,d);i.size()<r||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>i)}St(e,n){return $a(e).put(function(r,i,o){const[a,c,d]=jw(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:zd(r.wt,o.mutation)}}(this.serializer,this.userId,n))}}function $a(t){return ut(t,Sh)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{Dt(e){return ut(e,qg)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(n=>{const s=n==null?void 0:n.value;return s?it.fromUint8Array(s):it.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Dt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(Fe(e.integerValue));else if("doubleValue"in e){const s=Fe(e.doubleValue);isNaN(s)?this.Mt(n,13):(this.Mt(n,15),Qc(s)?n.xt(0):n.xt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Mt(n,20),typeof s=="string"&&(s=Ss(s)),n.Ot(`${s.seconds||""}`),n.xt(s.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(ks(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.Mt(n,45),n.xt(s.latitude||0),n.xt(s.longitude||0)}else"mapValue"in e?OT(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):Ah(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):te(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){const s=e.fields||{};this.Mt(n,55);for(const r of Object.keys(s))this.Nt(r,n),this.Ct(s[r],n)}qt(e,n){var s,r;const i=e.fields||{};this.Mt(n,53);const o=Ko,a=((r=(s=i[o].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.length)||0;this.Mt(n,15),n.xt(Fe(a)),this.Nt(o,n),this.Ct(i[o],n)}$t(e,n){const s=e.values||[];this.Mt(n,50);for(const r of s)this.Ct(r,n)}kt(e,n){this.Mt(n,37),Y.fromName(e).path.forEach(s=>{this.Mt(n,60),this.Kt(s,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}}oi.Wt=new oi;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=255;function ZD(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Lw(t){const e=64-function(s){let r=0;for(let i=0;i<8;++i){const o=ZD(255&s[i]);if(r+=o,o!==8)break}return r}(t);return Math.ceil(e/8)}class ej{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.zt(s.value),s=n.next();this.jt()}Ht(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Jt(s.value),s=n.next();this.Yt()}Zt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.zt(s);else if(s<2048)this.zt(960|s>>>6),this.zt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.zt(480|s>>>12),this.zt(128|63&s>>>6),this.zt(128|63&s);else{const r=n.codePointAt(0);this.zt(240|r>>>18),this.zt(128|63&r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r)}}this.jt()}Xt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Yt()}en(e){const n=this.tn(e),s=Lw(n);this.nn(1+s),this.buffer[this.position++]=255&s;for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=255&n[r]}rn(e){const n=this.tn(e),s=Lw(n);this.nn(1+s),this.buffer[this.position++]=~(255&s);for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}sn(){this._n(no),this._n(255)}an(){this.un(no),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),s=!!(128&n[0]);n[0]^=s?255:128;for(let r=1;r<n.length;++r)n[r]^=s?255:0;return n}zt(e){const n=255&e;n===0?(this._n(0),this._n(255)):n===no?(this._n(no),this._n(0)):this._n(n)}Jt(e){const n=255&e;n===0?(this.un(0),this.un(255)):n===no?(this.un(no),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const n=e+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const r=new Uint8Array(s);r.set(this.buffer),this.buffer=r}}class tj{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class nj{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class qa{constructor(){this.ln=new ej,this.hn=new tj(this.ln),this.Pn=new nj(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,s,r){this.In=e,this.En=n,this.dn=s,this.An=r}Rn(){const e=this.An.length,n=e===0||this.An[e-1]===255?e+1:e,s=new Uint8Array(n);return s.set(this.An,0),n!==e?s.set([0],this.An.length):++s[s.length-1],new ai(this.In,this.En,this.dn,s)}Vn(e,n,s){return{indexId:this.In,uid:e,arrayValue:Ku(this.dn),directionalValue:Ku(this.An),orderedDocumentKey:Ku(n),documentKey:s.path.toArray()}}mn(e,n,s){const r=this.Vn(e,n,s);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Ks(t,e){let n=t.In-e.In;return n!==0?n:(n=Fw(t.dn,e.dn),n!==0?n:(n=Fw(t.An,e.An),n!==0?n:Y.comparator(t.En,e.En)))}function Fw(t,e){for(let n=0;n<t.length&&n<e.length;++n){const s=t[n]-e[n];if(s!==0)return s}return t.length-e.length}function Ku(t){return hE()?function(n){let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}(t):t}function zw(t){return typeof t!="string"?t:function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(t)}class Uw{constructor(e){this.fn=new Re((n,s)=>$e.comparator(n.field,s.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const n of e.filters){const s=n;s.isInequality()?this.fn=this.fn.add(s):this.pn.push(s)}}get yn(){return this.fn.size>1}wn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const n=ep(e);if(n!==void 0&&!this.bn(n))return!1;const s=ni(e);let r=new Set,i=0,o=0;for(;i<s.length&&this.bn(s[i]);++i)r=r.add(s[i].fieldPath.canonicalString());if(i===s.length)return!0;if(this.fn.size>0){const a=this.fn.getIterator().getNext();if(!r.has(a.field.canonicalString())){const c=s[i];if(!this.Sn(a,c)||!this.Dn(this.gn[o++],c))return!1}++i}for(;i<s.length;++i){const a=s[i];if(o>=this.gn.length||!this.Dn(this.gn[o++],a))return!1}return!0}vn(){if(this.yn)return null;let e=new Re($e.comparator);const n=[];for(const s of this.pn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")n.push(new zu(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),n.push(new zu(s.field,0))}for(const s of this.gn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),n.push(new zu(s.field,s.dir==="asc"?0:1)));return new Rd(Rd.UNKNOWN_ID,this.collectionId,n,Kc.empty())}bn(e){for(const n of this.pn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===s}Dn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t){var e,n;if(oe(t instanceof _e||t instanceof Pe,20012),t instanceof _e){if(t instanceof qT){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>_e.create(t.field,"==",i)))||[];return Pe.create(r,"or")}return t}const s=t.filters.map(r=>TI(r));return Pe.create(s,t.op)}function sj(t){if(t.getFilters().length===0)return[];const e=vp(TI(t));return oe(II(e),7391),gp(e)||yp(e)?[e]:e.getFilters()}function gp(t){return t instanceof _e}function yp(t){return t instanceof Pe&&Qg(t)}function II(t){return gp(t)||yp(t)||function(n){if(n instanceof Pe&&ap(n)){for(const s of n.getFilters())if(!gp(s)&&!yp(s))return!1;return!0}return!1}(t)}function vp(t){if(oe(t instanceof _e||t instanceof Pe,34018),t instanceof _e)return t;if(t.filters.length===1)return vp(t.filters[0]);const e=t.filters.map(s=>vp(s));let n=Pe.create(e,t.op);return n=Bd(n),II(n)?n:(oe(n instanceof Pe,64498),oe(Xo(n),40251),oe(n.filters.length>1,57927),n.filters.reduce((s,r)=>ny(s,r)))}function ny(t,e){let n;return oe(t instanceof _e||t instanceof Pe,38388),oe(e instanceof _e||e instanceof Pe,25473),n=t instanceof _e?e instanceof _e?function(r,i){return Pe.create([r,i],"and")}(t,e):Bw(t,e):e instanceof _e?Bw(e,t):function(r,i){if(oe(r.filters.length>0&&i.filters.length>0,48005),Xo(r)&&Xo(i))return UT(r,i.getFilters());const o=ap(r)?r:i,a=ap(r)?i:r,c=o.filters.map(d=>ny(d,a));return Pe.create(c,"or")}(t,e),Bd(n)}function Bw(t,e){if(Xo(e))return UT(e,t.getFilters());{const n=e.filters.map(s=>ny(t,s));return Pe.create(n,"or")}}function Bd(t){if(oe(t instanceof _e||t instanceof Pe,11850),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return Bd(e[0]);if(FT(t))return t;const n=e.map(r=>Bd(r)),s=[];return n.forEach(r=>{r instanceof _e?s.push(r):r instanceof Pe&&(r.op===t.op?s.push(...r.filters):s.push(r))}),s.length===1?s[0]:Pe.create(s,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.Cn=new sy}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(dn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(dn.min())}updateCollectionGroup(e,n,s){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class sy{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Re(Ne.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Re(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="IndexedDbIndexManager",pu=new Uint8Array(0);class ij{constructor(e,n){this.databaseId=n,this.Fn=new sy,this.Mn=new Rs(s=>Ci(s),(s,r)=>wl(s,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Fn.has(n)){const s=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.Fn.add(n)});const i={collectionId:s,parent:Ot(r)};return qw(e).put(i)}return O.resolve()}getCollectionParents(e,n){const s=[],r=IDBKeyRange.bound([n,""],[fT(n),""],!1,!0);return qw(e).J(r).next(i=>{for(const o of i){if(o.collectionId!==n)break;s.push(qn(o.parent))}return s})}addFieldIndex(e,n){const s=Wa(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const i=s.add(r);if(n.indexState){const o=ro(e);return i.next(a=>{o.put(Ow(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const s=Wa(e),r=ro(e),i=so(e);return s.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Wa(e),s=so(e),r=ro(e);return n.X().next(()=>s.X()).next(()=>r.X())}createTargetIndexes(e,n){return O.forEach(this.xn(n),s=>this.getIndexType(e,s).next(r=>{if(r===0||r===1){const i=new Uw(s).vn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const s=so(e);let r=!0;const i=new Map;return O.forEach(this.xn(n),o=>this.On(e,o).next(a=>{r&&(r=!!a),i.set(o,a)})).next(()=>{if(r){let o=ge();const a=[];return O.forEach(i,(c,d)=>{q($w,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(j=>`${j.fieldPath}:${j.kind}`).join(",")}`}(c)} to execute ${Ci(n)}`);const f=function(I,j){const L=ep(j);if(L===void 0)return null;for(const M of Ld(I,L.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(d,c),m=function(I,j){const L=new Map;for(const M of ni(j))for(const w of Ld(I,M.fieldPath))switch(w.op){case"==":case"in":L.set(M.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return L.set(M.fieldPath.canonicalString(),w.value),Array.from(L.values())}return null}(d,c),g=function(I,j){const L=[];let M=!0;for(const w of ni(j)){const y=w.kind===0?Ew(I,w.fieldPath,I.startAt):Tw(I,w.fieldPath,I.startAt);L.push(y.value),M&&(M=y.inclusive)}return new Yo(L,M)}(d,c),E=function(I,j){const L=[];let M=!0;for(const w of ni(j)){const y=w.kind===0?Tw(I,w.fieldPath,I.endAt):Ew(I,w.fieldPath,I.endAt);L.push(y.value),M&&(M=y.inclusive)}return new Yo(L,M)}(d,c),S=this.Nn(c,d,g),N=this.Nn(c,d,E),C=this.Bn(c,d,m),x=this.Ln(c.indexId,f,S,g.inclusive,N,E.inclusive,C);return O.forEach(x,v=>s.Z(v,n.limit).next(I=>{I.forEach(j=>{const L=Y.fromSegments(j.documentKey);o.has(L)||(o=o.add(L),a.push(L))})}))}).next(()=>a)}return O.resolve(null)})}xn(e){let n=this.Mn.get(e);return n||(e.filters.length===0?n=[e]:n=sj(Pe.create(e.filters,"and")).map(s=>lp(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,n),n)}Ln(e,n,s,r,i,o,a){const c=(n!=null?n.length:1)*Math.max(s.length,i.length),d=c/(n!=null?n.length:1),f=[];for(let m=0;m<c;++m){const g=n?this.kn(n[m/d]):pu,E=this.qn(e,g,s[m%d],r),S=this.Qn(e,g,i[m%d],o),N=a.map(C=>this.qn(e,g,C,!0));f.push(...this.createRange(E,S,N))}return f}qn(e,n,s,r){const i=new ai(e,Y.empty(),n,s);return r?i:i.Rn()}Qn(e,n,s,r){const i=new ai(e,Y.empty(),n,s);return r?i.Rn():i}On(e,n){const s=new Uw(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(i=>{let o=null;for(const a of i)s.wn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let s=2;const r=this.xn(n);return O.forEach(r,i=>this.On(e,i).next(o=>{o?s!==0&&o.fields.length<function(c){let d=new Re($e.comparator),f=!1;for(const m of c.filters)for(const g of m.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:d=d.add(g.field));for(const m of c.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(f?1:0)}(i)&&(s=1):s=0})).next(()=>function(o){return o.limit!==null}(n)&&r.length>1&&s===2?1:s)}$n(e,n){const s=new qa;for(const r of ni(e)){const i=n.data.field(r.fieldPath);if(i==null)return null;const o=s.Tn(r.kind);oi.Wt.vt(i,o)}return s.cn()}kn(e){const n=new qa;return oi.Wt.vt(e,n.Tn(0)),n.cn()}Un(e,n){const s=new qa;return oi.Wt.vt(tl(this.databaseId,n),s.Tn(function(i){const o=ni(i);return o.length===0?0:o[o.length-1].kind}(e))),s.cn()}Bn(e,n,s){if(s===null)return[];let r=[];r.push(new qa);let i=0;for(const o of ni(e)){const a=s[i++];for(const c of r)if(this.Kn(n,o.fieldPath)&&nl(a))r=this.Wn(r,o,a);else{const d=c.Tn(o.kind);oi.Wt.vt(a,d)}}return this.Gn(r)}Nn(e,n,s){return this.Bn(e,n,s.position)}Gn(e){const n=[];for(let s=0;s<e.length;++s)n[s]=e[s].cn();return n}Wn(e,n,s){const r=[...e],i=[];for(const o of s.arrayValue.values||[])for(const a of r){const c=new qa;c.seed(a.cn()),oi.Wt.vt(o,c.Tn(n.kind)),i.push(c)}return i}Kn(e,n){return!!e.filters.find(s=>s instanceof _e&&s.field.isEqual(n)&&(s.op==="in"||s.op==="not-in"))}getFieldIndexes(e,n){const s=Wa(e),r=ro(e);return(n?s.J(np,IDBKeyRange.bound(n,n)):s.J()).next(i=>{const o=[];return O.forEach(i,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const g=m?new Kc(m.sequenceNumber,new dn(Di(m.readTime),new Y(qn(m.documentKey)),m.largestBatchId)):Kc.empty(),E=f.fields.map(([S,N])=>new zu($e.fromServerFormat(S),N));return new Rd(f.indexId,f.collectionGroup,E,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((s,r)=>{const i=s.indexState.sequenceNumber-r.indexState.sequenceNumber;return i!==0?i:ue(s.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,s){const r=Wa(e),i=ro(e);return this.zn(e).next(o=>r.J(np,IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,c=>i.put(Ow(c.indexId,this.uid,o,s)))))}updateIndexEntries(e,n){const s=new Map;return O.forEach(n,(r,i)=>{const o=s.get(r.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(s.set(r.collectionGroup,a),O.forEach(a,c=>this.jn(e,r,c).next(d=>{const f=this.Hn(i,c);return d.isEqual(f)?O.resolve():this.Jn(e,i,c,d,f)}))))})}Yn(e,n,s,r){return so(e).put(r.Vn(this.uid,this.Un(s,n.key),n.key))}Zn(e,n,s,r){return so(e).delete(r.mn(this.uid,this.Un(s,n.key),n.key))}jn(e,n,s){const r=so(e);let i=new Re(Ks);return r.te({index:TT,range:IDBKeyRange.only([s.indexId,this.uid,Ku(this.Un(s,n))])},(o,a)=>{i=i.add(new ai(s.indexId,n,zw(a.arrayValue),zw(a.directionalValue)))}).next(()=>i)}Hn(e,n){let s=new Re(Ks);const r=this.$n(n,e);if(r==null)return s;const i=ep(n);if(i!=null){const o=e.data.field(i.fieldPath);if(nl(o))for(const a of o.arrayValue.values||[])s=s.add(new ai(n.indexId,e.key,this.kn(a),r))}else s=s.add(new ai(n.indexId,e.key,pu,r));return s}Jn(e,n,s,r,i){q($w,"Updating index entries for document '%s'",n.key);const o=[];return function(c,d,f,m,g){const E=c.getIterator(),S=d.getIterator();let N=to(E),C=to(S);for(;N||C;){let x=!1,v=!1;if(N&&C){const I=f(N,C);I<0?v=!0:I>0&&(x=!0)}else N!=null?v=!0:x=!0;x?(m(C),C=to(S)):v?(g(N),N=to(E)):(N=to(E),C=to(S))}}(r,i,Ks,a=>{o.push(this.Yn(e,n,s,a))},a=>{o.push(this.Zn(e,n,s,a))}),O.waitFor(o)}zn(e){let n=1;return ro(e).te({index:ET,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,r,i)=>{i.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,s){s=s.sort((o,a)=>Ks(o,a)).filter((o,a,c)=>!a||Ks(o,c[a-1])!==0);const r=[];r.push(e);for(const o of s){const a=Ks(o,e),c=Ks(o,n);if(a===0)r[0]=e.Rn();else if(a>0&&c<0)r.push(o),r.push(o.Rn());else if(c>0)break}r.push(n);const i=[];for(let o=0;o<r.length;o+=2){if(this.Xn(r[o],r[o+1]))return[];const a=r[o].mn(this.uid,pu,Y.empty()),c=r[o+1].mn(this.uid,pu,Y.empty());i.push(IDBKeyRange.bound(a,c))}return i}Xn(e,n){return Ks(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Ww)}getMinOffset(e,n){return O.mapArray(this.xn(n),s=>this.On(e,s).next(r=>r||te(44426))).next(Ww)}}function qw(t){return ut(t,Jc)}function so(t){return ut(t,wc)}function Wa(t){return ut(t,$g)}function ro(t){return ut(t,_c)}function Ww(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let s=1;s<t.length;s++){const r=t[s].indexState.offset;zg(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new dn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xI=41943040;class Pt{static withCacheSize(e){return new Pt(e,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t,e,n){const s=t.store(Rn),r=t.store(qo),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=s.te({range:o},(f,m,g)=>(a++,g.delete()));i.push(c.next(()=>{oe(a===1,47070,{batchId:n.batchId})}));const d=[];for(const f of n.mutations){const m=vT(e,f.key.path,n.batchId);i.push(r.delete(m)),d.push(f.key)}return O.waitFor(i).next(()=>d)}function $d(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(xI,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);class Vh{constructor(e,n,s,r){this.userId=e,this.serializer=n,this.indexManager=s,this.referenceDelegate=r,this.er={}}static bt(e,n,s,r){oe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Vh(i,n,s,r)}checkEmpty(e){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).te({index:di,range:s},(r,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,s,r){const i=uo(e),o=Qs(e);return o.add({}).next(a=>{oe(typeof a=="number",49019);const c=new Xg(a,n,s,r),d=function(E,S,N){const C=N.baseMutations.map(v=>zd(E.wt,v)),x=N.mutations.map(v=>zd(E.wt,v));return{userId:S,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:C,mutations:x}}(this.serializer,this.userId,c),f=[];let m=new Re((g,E)=>ue(g.canonicalString(),E.canonicalString()));for(const g of r){const E=vT(this.userId,g.key.path,a);m=m.add(g.key.path.popLast()),f.push(o.put(d)),f.push(i.put(E,jR))}return m.forEach(g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.er[a]=c.keys()}),O.waitFor(f).next(()=>c)})}lookupMutationBatch(e,n){return Qs(e).get(n).next(s=>s?(oe(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:n}),ii(this.serializer,s)):null)}tr(e,n){return this.er[n]?O.resolve(this.er[n]):this.lookupMutationBatch(e,n).next(s=>{if(s){const r=s.keys();return this.er[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=IDBKeyRange.lowerBound([this.userId,s]);let i=null;return Qs(e).te({index:di,range:r},(o,a,c)=>{a.userId===this.userId&&(oe(a.batchId>=s,47524,{nr:s}),i=ii(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=gi;return Qs(e).te({index:di,range:n,reverse:!0},(r,i,o)=>{s=i.batchId,o.done()}).next(()=>s)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,gi],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).J(di,n).next(s=>s.map(r=>ii(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const s=Uu(this.userId,n.path),r=IDBKeyRange.lowerBound(s),i=[];return uo(e).te({range:r},(o,a,c)=>{const[d,f,m]=o,g=qn(f);if(d===this.userId&&n.path.isEqual(g))return Qs(e).get(m).next(E=>{if(!E)throw te(61480,{rr:o,batchId:m});oe(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:m}),i.push(ii(this.serializer,E))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Re(ue);const r=[];return n.forEach(i=>{const o=Uu(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=uo(e).te({range:a},(d,f,m)=>{const[g,E,S]=d,N=qn(E);g===this.userId&&i.path.isEqual(N)?s=s.add(S):m.done()});r.push(c)}),O.waitFor(r).next(()=>this.ir(e,s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1,i=Uu(this.userId,s),o=IDBKeyRange.lowerBound(i);let a=new Re(ue);return uo(e).te({range:o},(c,d,f)=>{const[m,g,E]=c,S=qn(g);m===this.userId&&s.isPrefixOf(S)?S.length===r&&(a=a.add(E)):f.done()}).next(()=>this.ir(e,a))}ir(e,n){const s=[],r=[];return n.forEach(i=>{r.push(Qs(e).get(i).next(o=>{if(o===null)throw te(35274,{batchId:i});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),s.push(ii(this.serializer,o))}))}),O.waitFor(r).next(()=>s)}removeMutationBatch(e,n){return bI(e.he,this.userId,n).next(s=>(e.addOnCommittedListener(()=>{this.sr(n.batchId)}),O.forEach(s,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const s=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return uo(e).te({range:s},(i,o,a)=>{if(i[0]===this.userId){const c=qn(i[1]);r.push(c)}else a.done()}).next(()=>{oe(r.length===0,56720,{_r:r.map(i=>i.canonicalString())})})})}containsKey(e,n){return SI(e,this.userId,n)}ar(e){return kI(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:gi,lastStreamToken:""})}}function SI(t,e,n){const s=Uu(e,n.path),r=s[1],i=IDBKeyRange.lowerBound(s);let o=!1;return uo(t).te({range:i,ee:!0},(a,c,d)=>{const[f,m,g]=a;f===e&&m===r&&(o=!0),d.done()}).next(()=>o)}function Qs(t){return ut(t,Rn)}function uo(t){return ut(t,qo)}function kI(t){return ut(t,Yc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ji(0)}static lr(){return new ji(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.hr(e).next(n=>{const s=new ji(n.highestTargetId);return n.highestTargetId=s.next(),this.Pr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(n=>ae.fromTimestamp(new Ge(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,s){return this.hr(e).next(r=>(r.highestListenSequenceNumber=n,s&&(r.lastRemoteSnapshotVersion=s.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Pr(e,r)))}addTargetData(e,n){return this.Tr(e,n).next(()=>this.hr(e).next(s=>(s.targetCount+=1,this.Ir(n,s),this.Pr(e,s))))}updateTargetData(e,n){return this.Tr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>io(e).delete(n.targetId)).next(()=>this.hr(e)).next(s=>(oe(s.targetCount>0,8065),s.targetCount-=1,this.Pr(e,s)))}removeTargets(e,n,s){let r=0;const i=[];return io(e).te((o,a)=>{const c=rc(a);c.sequenceNumber<=n&&s.get(c.targetId)===null&&(r++,i.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(i)).next(()=>r)}forEachTarget(e,n){return io(e).te((s,r)=>{const i=rc(r);n(i)})}hr(e){return Hw(e).get(Od).next(n=>(oe(n!==null,2888),n))}Pr(e,n){return Hw(e).put(Od,n)}Tr(e,n){return io(e).put(wI(this.serializer,n))}Ir(e,n){let s=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,s=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.hr(e).next(n=>n.targetCount)}getTargetData(e,n){const s=Ci(n),r=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let i=null;return io(e).te({range:r,index:wT},(o,a,c)=>{const d=rc(a);wl(n,d.target)&&(i=d,c.done())}).next(()=>i)}addMatchingKeys(e,n,s){const r=[],i=or(e);return n.forEach(o=>{const a=Ot(o.path);r.push(i.put({targetId:s,path:a})),r.push(this.referenceDelegate.addReference(e,s,o))}),O.waitFor(r)}removeMatchingKeys(e,n,s){const r=or(e);return O.forEach(n,i=>{const o=Ot(i.path);return O.waitFor([r.delete([s,o]),this.referenceDelegate.removeReference(e,s,i)])})}removeMatchingKeysForTargetId(e,n){const s=or(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(r)}getMatchingKeysForTargetId(e,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),r=or(e);let i=ge();return r.te({range:s,ee:!0},(o,a,c)=>{const d=qn(o[1]),f=new Y(d);i=i.add(f)}).next(()=>i)}containsKey(e,n){const s=Ot(n.path),r=IDBKeyRange.bound([s],[fT(s)],!1,!0);let i=0;return or(e).te({index:Bg,ee:!0,range:r},([o,a],c,d)=>{o!==0&&(i++,d.done())}).next(()=>i>0)}Rt(e,n){return io(e).get(n).next(s=>s?rc(s):null)}}function io(t){return ut(t,Wo)}function Hw(t){return ut(t,yi)}function or(t){return ut(t,Go)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="LruGarbageCollector",aj=1048576;function Qw([t,e],[n,s]){const r=ue(t,n);return r===0?ue(e,s):r}class cj{constructor(e){this.Er=e,this.buffer=new Re(Qw),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Qw(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class AI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){q(Kw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fr(n)?q(Kw,"Ignoring IndexedDB error during garbage collection: ",n):await zi(n)}await this.mr(3e5)})}}class lj{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return O.resolve(_n.le);const s=new cj(n);return this.gr.forEachTarget(e,r=>s.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>s.Rr(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Gw)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gw):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,r,i,o,a,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,o=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(s=m,a=Date.now(),this.removeTargets(e,s,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),oo()<=ve.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:m})))}}function NI(t,e){return new lj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n){this.db=e,this.garbageCollector=NI(this,n)}pr(e){const n=this.br(e);return this.db.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}yr(e,n){return this.Sr(e,(s,r)=>n(r))}addReference(e,n,s){return gu(e,s)}removeReference(e,n,s){return gu(e,s)}removeTargets(e,n,s){return this.db.getTargetCache().removeTargets(e,n,s)}markPotentiallyOrphaned(e,n){return gu(e,n)}Dr(e,n){return function(r,i){let o=!1;return kI(r).ne(a=>SI(r,a,i).next(c=>(c&&(o=!0),O.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=n){const c=this.Dr(e,o).next(d=>{if(!d)return i++,s.getEntry(e,o).next(()=>(s.removeEntry(o,ae.min()),or(e).delete(function(m){return[0,Ot(m.path)]}(o))))});r.push(c)}}).next(()=>O.waitFor(r)).next(()=>s.apply(e)).next(()=>i)}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,n){return gu(e,n)}Sr(e,n){const s=or(e);let r,i=_n.le;return s.te({index:Bg},([o,a],{path:c,sequenceNumber:d})=>{o===0?(i!==_n.le&&n(new Y(qn(r)),i),i=d,r=c):i=_n.le}).next(()=>{i!==_n.le&&n(new Y(qn(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gu(t,e){return or(t).put(function(s,r){return{targetId:0,path:Ot(s.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.changes=new Rs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?O.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,s){return Jr(e).put(s)}removeEntry(e,n,s){return Jr(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ud(o),a[a.length-1]]}(n,s))}updateMetadata(e,n){return this.getMetadata(e).next(s=>(s.byteSize+=n,this.vr(e,s)))}getEntry(e,n){let s=Xe.newInvalidDocument(n);return Jr(e).te({index:Bu,range:IDBKeyRange.only(Ga(n))},(r,i)=>{s=this.Cr(n,i)}).next(()=>s)}Fr(e,n){let s={size:0,document:Xe.newInvalidDocument(n)};return Jr(e).te({index:Bu,range:IDBKeyRange.only(Ga(n))},(r,i)=>{s={document:this.Cr(n,i),size:$d(i)}}).next(()=>s)}getEntries(e,n){let s=cn();return this.Mr(e,n,(r,i)=>{const o=this.Cr(r,i);s=s.insert(r,o)}).next(()=>s)}Or(e,n){let s=cn(),r=new Ue(Y.comparator);return this.Mr(e,n,(i,o)=>{const a=this.Cr(i,o);s=s.insert(i,a),r=r.insert(i,$d(o))}).next(()=>({documents:s,Nr:r}))}Mr(e,n,s){if(n.isEmpty())return O.resolve();let r=new Re(Jw);n.forEach(c=>r=r.add(c));const i=IDBKeyRange.bound(Ga(r.first()),Ga(r.last())),o=r.getIterator();let a=o.getNext();return Jr(e).te({index:Bu,range:i},(c,d,f)=>{const m=Y.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&Jw(a,m)<0;)s(a,null),a=o.getNext();a&&a.isEqual(m)&&(s(a,d),a=o.hasNext()?o.getNext():null),a?f.H(Ga(a)):f.done()}).next(()=>{for(;a;)s(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,s,r,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Ud(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jr(e).J(IDBKeyRange.bound(a,c,!0)).next(d=>{i==null||i.incrementDocumentReadCount(d.length);let f=cn();for(const m of d){const g=this.Cr(Y.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);g.isFoundDocument()&&(El(n,g)||r.has(g.key))&&(f=f.insert(g.key,g))}return f})}getAllFromCollectionGroup(e,n,s,r){let i=cn();const o=Xw(n,s),a=Xw(n,dn.max());return Jr(e).te({index:_T,range:IDBKeyRange.bound(o,a,!0)},(c,d,f)=>{const m=this.Cr(Y.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);i=i.insert(m.key,m),i.size===r&&f.done()}).next(()=>i)}newChangeBuffer(e){return new hj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Yw(e).get(tp).next(n=>(oe(!!n,20021),n))}vr(e,n){return Yw(e).put(tp,n)}Cr(e,n){if(n){const s=YD(this.serializer,n);if(!(s.isNoDocument()&&s.version.isEqual(ae.min())))return s}return Xe.newInvalidDocument(e)}}function CI(t){return new dj(t)}class hj extends PI{constructor(e,n){super(),this.Br=e,this.trackRemovals=n,this.Lr=new Rs(s=>s.toString(),(s,r)=>s.isEqual(r))}applyChanges(e){const n=[];let s=0,r=new Re((i,o)=>ue(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Lr.get(i);if(n.push(this.Br.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=Dw(this.Br.serializer,o);r=r.add(i.path.popLast());const d=$d(c);s+=d-a.size,n.push(this.Br.addEntry(e,i,c))}else if(s-=a.size,this.trackRemovals){const c=Dw(this.Br.serializer,o.convertToNoDocument(ae.min()));n.push(this.Br.addEntry(e,i,c))}}),r.forEach(i=>{n.push(this.Br.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Br.updateMetadata(e,s)),O.waitFor(n)}getFromCache(e,n){return this.Br.Fr(e,n).next(s=>(this.Lr.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,n){return this.Br.Or(e,n).next(({documents:s,Nr:r})=>(r.forEach((i,o)=>{this.Lr.set(i,{size:o,readTime:s.get(i).readTime})}),s))}}function Yw(t){return ut(t,Xc)}function Jr(t){return ut(t,jd)}function Ga(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Xw(t,e){const n=e.documentKey.path.toArray();return[t,Ud(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Jw(t,e){const n=t.path.toArray(),s=e.path.toArray();let r=0;for(let i=0;i<n.length-2&&i<s.length-2;++i)if(r=ue(n[i],s[i]),r)return r;return r=ue(n.length,s.length),r||(r=ue(n[n.length-2],s[s.length-2]),r||ue(n[n.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&xc(s.mutation,r,Yt.empty(),Ge.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ge()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ge()){const r=Wn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=nc();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Wn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ge()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=cn();const o=Ic(),a=function(){return Ic()}();return n.forEach((c,d)=>{const f=s.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof Ds)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),xc(f.mutation,d,f.mutation.getFieldMask(),Ge.now())):o.set(d.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return a.set(d,new fj(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const s=Ic();let r=new Ue((o,a)=>o-a),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=s.get(c)||Yt.empty();f=a.applyToLocalView(d,f),s.set(c,f);const m=(r.get(a.batchId)||ge()).add(c);r=r.insert(a.batchId,m)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),d=c.key,f=c.value,m=YT();f.forEach(g=>{if(!i.has(g)){const E=nI(n.get(g),s.get(g));E!==null&&m.set(g,E),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return O.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):O.resolve(Wn());let a=Hc,c=i;return o.next(d=>O.forEach(d,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ge())).next(f=>({batchId:a,changes:QT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(s=>{let r=nc();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=nc();return this.indexManager.getCollectionParents(e,i).next(a=>O.forEach(a,c=>{const d=function(m,g){return new ha(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,r).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Xe.newInvalidDocument(f)))});let a=nc();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&xc(f.mutation,d,Yt.empty(),Ge.now()),El(n,d)&&(a=a.insert(c,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return O.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:zt(r.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:EI(r.bundledQuery),readTime:zt(r.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.overlays=new Ue(Y.comparator),this.Qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Wn();return O.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),O.resolve()}getOverlaysForCollection(e,n,s){const r=Wn(),i=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return O.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ue((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let f=i.get(d.largestBatchId);f===null&&(f=Wn(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=Wn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=r)););return O.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(s.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Zg(n,s));let i=this.Qr.get(n);i===void 0&&(i=ge(),this.Qr.set(n,i)),this.Qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.$r=new Re(ft.Ur),this.Kr=new Re(ft.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new ft(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new ft(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Y(new Ne([])),s=new ft(n,e),r=new ft(n,e+1),i=[];return this.Kr.forEachInRange([s,r],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Y(new Ne([])),s=new ft(n,e),r=new ft(n,e+1);let i=ge();return this.Kr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ft(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ft{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Y.comparator(e.key,n.key)||ue(e.Zr,n.Zr)}static Wr(e,n){return ue(e.Zr,n.Zr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Re(ft.Ur)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Xg(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Xr=this.Xr.add(new ft(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ti(s),i=r<0?0:r;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?gi:this.nr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ft(n,0),r=new ft(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,r],o=>{const a=this.ei(o.Zr);i.push(a)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Re(ue);return n.forEach(r=>{const i=new ft(r,0),o=new ft(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{s=s.add(a.Zr)})}),O.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Y.isDocumentKey(i)||(i=i.child(""));const o=new ft(new Y(i),0);let a=new Re(ue);return this.Xr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===r&&(a=a.add(c.Zr)),!0)},o),O.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(s=>{const r=this.ei(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){oe(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return O.forEach(n.mutations,r=>{const i=new ft(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new ft(n,0),r=this.Xr.firstAfterOrEqual(s);return O.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.ii=e,this.docs=function(){return new Ue(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return O.resolve(s?s.document.mutableCopy():Xe.newInvalidDocument(n))}getEntries(e,n){let s=cn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Xe.newInvalidDocument(r))}),O.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=cn();const o=n.path,a=new Y(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||zg(mT(f),s)<=0||(r.has(f.key)||El(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,s,r){te(9500)}si(e,n){return O.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new _j(this)}getSize(e){return O.resolve(this.size)}}class _j extends PI{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(s)}),O.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.persistence=e,this.oi=new Rs(n=>Ci(n),wl),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this._i=0,this.ai=new ry,this.targetCount=0,this.ui=ji.cr()}forEachTarget(e,n){return this.oi.forEach((s,r)=>n(r)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),O.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new ji(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Tr(n),O.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),O.waitFor(i).next(()=>r)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return O.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),O.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return O.resolve(s)}containsKey(e,n){return O.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n){this.ci={},this.overlays={},this.li=new _n(0),this.hi=!1,this.hi=!0,this.Pi=new gj,this.referenceDelegate=e(this),this.Ti=new wj(this),this.indexManager=new rj,this.remoteDocumentCache=function(r){return new vj(r)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new _I(n),this.Ei=new mj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new yj(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){q("MemoryPersistence","Starting transaction:",e);const r=new Ej(this.li.next());return this.referenceDelegate.di(),s(r).next(i=>this.referenceDelegate.Ai(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ri(e,n){return O.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class Ej extends gT{constructor(e){super(),this.currentSequenceNumber=e}}class Mh{constructor(e){this.persistence=e,this.Vi=new ry,this.mi=null}static fi(e){return new Mh(e)}get gi(){if(this.mi)return this.mi;throw te(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),O.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.gi,s=>{const r=Y.fromPath(s);return this.pi(e,r).next(i=>{i||n.removeEntry(r,ae.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return O.or([()=>O.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class qd{constructor(e,n){this.persistence=e,this.yi=new Rs(s=>Ot(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=NI(this,n)}static fi(e,n){return new qd(e,n)}di(){}Ai(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return O.forEach(this.yi,(s,r)=>this.Dr(e,s,r).next(i=>i?O.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,o=>this.Dr(e,o,n).next(a=>{a||(s++,i.removeEntry(o,ae.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),O.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),O.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qu(e.data.value)),n}Dr(e,n,s){return O.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return O.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.serializer=e}q(e,n,s,r){const i=new Th("createOrUpgrade",n);s<1&&r>=1&&(function(c){c.createObjectStore(_l)}(e),function(c){c.createObjectStore(Yc,{keyPath:DR}),c.createObjectStore(Rn,{keyPath:lw,autoIncrement:!0}).createIndex(di,uw,{unique:!0}),c.createObjectStore(qo)}(e),Zw(e),function(c){c.createObjectStore(si)}(e));let o=O.resolve();return s<3&&r>=3&&(s!==0&&(function(c){c.deleteObjectStore(Go),c.deleteObjectStore(Wo),c.deleteObjectStore(yi)}(e),Zw(e)),o=o.next(()=>function(c){const d=c.store(yi),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return d.put(Od,f)}(i))),s<4&&r>=4&&(s!==0&&(o=o.next(()=>function(c,d){return d.store(Rn).J().next(m=>{c.deleteObjectStore(Rn),c.createObjectStore(Rn,{keyPath:lw,autoIncrement:!0}).createIndex(di,uw,{unique:!0});const g=d.store(Rn),E=m.map(S=>g.put(S));return O.waitFor(E)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore(Ho,{keyPath:BR})})(e)})),s<5&&r>=5&&(o=o.next(()=>this.wi(i))),s<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore(Xc)}(e),this.bi(i)))),s<7&&r>=7&&(o=o.next(()=>this.Si(i))),s<8&&r>=8&&(o=o.next(()=>this.Di(e,i))),s<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),s<10&&r>=10&&(o=o.next(()=>this.Ci(i))),s<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(xh,{keyPath:$R})})(e),function(c){c.createObjectStore(bh,{keyPath:qR})}(e)})),s<12&&r>=12&&(o=o.next(()=>{(function(c){const d=c.createObjectStore(Sh,{keyPath:XR});d.createIndex(sp,JR,{unique:!1}),d.createIndex(IT,ZR,{unique:!1})})(e)})),s<13&&r>=13&&(o=o.next(()=>function(c){const d=c.createObjectStore(jd,{keyPath:OR});d.createIndex(Bu,VR),d.createIndex(_T,MR)}(e)).next(()=>this.Fi(e,i)).next(()=>e.deleteObjectStore(si))),s<14&&r>=14&&(o=o.next(()=>this.Mi(e,i))),s<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore($g,{keyPath:WR,autoIncrement:!0}).createIndex(np,GR,{unique:!1}),c.createObjectStore(_c,{keyPath:HR}).createIndex(ET,KR,{unique:!1}),c.createObjectStore(wc,{keyPath:QR}).createIndex(TT,YR,{unique:!1})}(e))),s<16&&r>=16&&(o=o.next(()=>{n.objectStore(_c).clear()}).next(()=>{n.objectStore(wc).clear()})),s<17&&r>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(qg,{keyPath:eD})})(e)})),s<18&&r>=18&&hE()&&(o=o.next(()=>{n.objectStore(_c).clear()}).next(()=>{n.objectStore(wc).clear()})),o}bi(e){let n=0;return e.store(si).te((s,r)=>{n+=$d(r)}).next(()=>{const s={byteSize:n};return e.store(Xc).put(tp,s)})}wi(e){const n=e.store(Yc),s=e.store(Rn);return n.J().next(r=>O.forEach(r,i=>{const o=IDBKeyRange.bound([i.userId,gi],[i.userId,i.lastAcknowledgedBatchId]);return s.J(di,o).next(a=>O.forEach(a,c=>{oe(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const d=ii(this.serializer,c);return bI(e,i.userId,d).next(()=>{})}))}))}Si(e){const n=e.store(Go),s=e.store(si);return e.store(yi).get(Od).next(r=>{const i=[];return s.te((o,a)=>{const c=new Ne(o),d=function(m){return[0,Ot(m)]}(c);i.push(n.get(d).next(f=>f?O.resolve():(m=>n.put({targetId:0,path:Ot(m),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(i))})}Di(e,n){e.createObjectStore(Jc,{keyPath:UR});const s=n.store(Jc),r=new sy,i=o=>{if(r.add(o)){const a=o.lastSegment(),c=o.popLast();return s.put({collectionId:a,parent:Ot(c)})}};return n.store(si).te({ee:!0},(o,a)=>{const c=new Ne(o);return i(c.popLast())}).next(()=>n.store(qo).te({ee:!0},([o,a,c],d)=>{const f=qn(a);return i(f.popLast())}))}Ci(e){const n=e.store(Wo);return n.te((s,r)=>{const i=rc(r),o=wI(this.serializer,i);return n.put(o)})}Fi(e,n){const s=n.store(si),r=[];return s.te((i,o)=>{const a=n.store(jd),c=function(m){return m.document?new Y(Ne.fromString(m.document.name).popFirst(5)):m.noDocument?Y.fromSegments(m.noDocument.path):m.unknownDocument?Y.fromSegments(m.unknownDocument.path):te(36783)}(o).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(d))}).next(()=>O.waitFor(r))}Mi(e,n){const s=n.store(Rn),r=CI(this.serializer),i=new iy(Mh.fi,this.serializer.wt);return s.J().next(o=>{const a=new Map;return o.forEach(c=>{var d;let f=(d=a.get(c.userId))!==null&&d!==void 0?d:ge();ii(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),O.forEach(a,(c,d)=>{const f=new wt(d),m=Oh.bt(this.serializer,f),g=i.getIndexManager(f),E=Vh.bt(f,this.serializer,g,i.referenceDelegate);return new RI(r,E,m,g).recalculateAndSaveOverlaysForDocumentKeys(new rp(n,_n.le),c).next()})})}}function Zw(t){t.createObjectStore(Go,{keyPath:FR}).createIndex(Bg,zR,{unique:!0}),t.createObjectStore(Wo,{keyPath:"targetId"}).createIndex(wT,LR,{unique:!0}),t.createObjectStore(yi)}const Ys="IndexedDbPersistence",Lf=18e5,Ff=5e3,zf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ij="main";class oy{constructor(e,n,s,r,i,o,a,c,d,f,m=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=s,this.xi=i,this.window=o,this.document=a,this.Oi=d,this.Ni=f,this.Bi=m,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=g=>Promise.resolve(),!oy.C())throw new Q(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uj(this,r),this.Ui=n+Ij,this.serializer=new _I(c),this.Ki=new xr(this.Ui,this.Bi,new Tj(this.serializer)),this.Pi=new JD,this.Ti=new oj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CI(this.serializer),this.Ei=new XD,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,f===!1&&Lt(Ys,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(U.FAILED_PRECONDITION,zf);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new _n(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(n=>{n||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(n=>this.isPrimary&&!n?this.Xi(e).next(()=>!1):!!n&&this.es(e).next(()=>!0))).catch(e=>{if(Fr(e))return q(Ys,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q(Ys,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return Ha(e).get(eo).next(n=>O.resolve(this.ts(n)))}ns(e){return yu(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Lf)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const s=ut(n,Ho);return s.J().next(r=>{const i=this._s(r,Lf),o=r.filter(a=>i.indexOf(a)===-1);return O.forEach(o,a=>s.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Wi)for(const n of e)this.Wi.removeItem(this.us(n.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?O.resolve(!0):Ha(e).get(eo).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,Ff)&&!this.cs(n.ownerId)){if(this.ts(n)&&this.networkEnabled)return!0;if(!this.ts(n)){if(!n.allowTabSynchronization)throw new Q(U.FAILED_PRECONDITION,zf);return!1}}return!(!this.networkEnabled||!this.inForeground)||yu(e).J().next(s=>this._s(s,Ff).find(r=>{if(this.clientId!==r.clientId){const i=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q(Ys,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[_l,Ho],e=>{const n=new rp(e,_n.le);return this.Xi(n).next(()=>this.ns(n))}),this.Ki.close(),this.Ts()}_s(e,n){return e.filter(s=>this.ss(s.updateTimeMs,n)&&!this.cs(s.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>yu(e).J().next(n=>this._s(n,Lf).map(s=>s.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,n){return Vh.bt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ij(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Oh.bt(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,n,s){q(Ys,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",i=function(c){return c===18?sD:c===17?kT:c===16?nD:c===15?Wg:c===14?ST:c===13?bT:c===12?tD:c===11?xT:void te(60245)}(this.Bi);let o;return this.Ki.runTransaction(e,r,i,a=>(o=new rp(a,this.li?this.li.next():_n.le),n==="readwrite-primary"?this.Yi(o).next(c=>!!c||this.Zi(o)).next(c=>{if(!c)throw Lt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new Q(U.FAILED_PRECONDITION,pT);return s(o)}).next(c=>this.es(o).next(()=>c)):this.Es(o).next(()=>s(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Es(e){return Ha(e).get(eo).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,Ff)&&!this.cs(n.ownerId)&&!this.ts(n)&&!(this.Ni||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Q(U.FAILED_PRECONDITION,zf)})}es(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ha(e).put(eo,n)}static C(){return xr.C()}Xi(e){const n=Ha(e);return n.get(eo).next(s=>this.ts(s)?(q(Ys,"Releasing primary lease."),n.delete(eo)):O.resolve())}ss(e,n){const s=Date.now();return!(e<s-n)&&(!(e>s)||(Lt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const n=/(?:Version|Mobile)\/1[456]/;dE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var n;try{const s=((n=this.Wi)===null||n===void 0?void 0:n.getItem(this.us(e)))!==null;return q(Ys,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Lt(Ys,"Failed to get zombied client id.",s),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){Lt("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ha(t){return ut(t,_l)}function yu(t){return ut(t,Ho)}function xj(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.ds=s,this.As=r}static Rs(e,n){let s=ge(),r=ge();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ay(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return dE()?8:yT(lt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new bj;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,s,r){return s.documentReadCount<this.gs?(oo()<=ve.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),O.resolve()):(oo()<=ve.DEBUG&&q("QueryEngine","Query:",ao(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ps*r?(oo()<=ve.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):O.resolve())}ws(e,n){if(Iw(n))return O.resolve(null);let s=En(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=dp(n,null,"F"),s=En(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=ge(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.vs(n,a);return this.Cs(n,d,o,c.readTime)?this.ws(e,dp(n,null,"F")):this.Fs(e,d,n,c)}))})))}bs(e,n,s,r){return Iw(n)||r.isEqual(ae.min())?O.resolve(null):this.ys.getDocuments(e,s).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,s,r)?O.resolve(null):(oo()<=ve.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ao(n)),this.Fs(e,o,n,SR(r,Hc)).next(a=>a))})}vs(e,n){let s=new Re(HT(e));return n.forEach((r,i)=>{El(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return oo()<=ve.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ao(n)),this.ys.getDocumentsMatchingQuery(e,n,dn.min(),s)}Fs(e,n,s,r){return this.ys.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="LocalStore",Sj=3e8;class kj{constructor(e,n,s,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new Ue(ue),this.Os=new Rs(i=>Ci(i),wl),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function jI(t,e,n,s){return new kj(t,e,n,s)}async function OI(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let c=ge();for(const d of r){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(s,c).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:a}))})})}function Aj(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,f){const m=d.batch,g=m.keys();let E=O.resolve();return g.forEach(S=>{E=E.next(()=>f.getEntry(c,S)).next(N=>{const C=d.docVersions.get(S);oe(C!==null,48541),N.version.compareTo(C)<0&&(m.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let c=ge();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function VI(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function Nj(t,e){const n=me(t),s=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const a=[];e.targetChanges.forEach((f,m)=>{const g=r.get(m);if(!g)return;a.push(n.Ti.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,f.addedDocuments,m)));let E=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(it.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,s)),r=r.insert(m,E),function(N,C,x){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Sj?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,E,f)&&a.push(n.Ti.updateTargetData(i,E))});let c=cn(),d=ge();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(Pj(i,o,e.documentUpdates).next(f=>{c=f.qs,d=f.Qs})),!s.isEqual(ae.min())){const f=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(f)}return O.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.xs=r,i))}function Pj(t,e,n){let s=ge(),r=ge();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=cn();return n.forEach((a,c)=>{const d=i.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):q(cy,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{qs:o,Qs:r}})}function Cj(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=gi),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Rj(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ti.getTargetData(s,e).next(i=>i?(r=i,O.resolve(r)):n.Ti.allocateTargetId(s).next(o=>(r=new gs(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.xs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function _p(t,e,n){const s=me(t),r=s.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Fr(o))throw o;q(cy,`Failed to update sequence numbers for target ${e}: ${o}`)}s.xs=s.xs.remove(e),s.Os.delete(r.target)}function e2(t,e,n){const s=me(t);let r=ae.min(),i=ge();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const m=me(c),g=m.Os.get(f);return g!==void 0?O.resolve(m.xs.get(g)):m.Ti.getTargetData(d,f)}(s,o,En(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,e,n?r:ae.min(),n?i:ge())).next(a=>(Dj(s,vD(e),a),{documents:a,$s:i})))}function Dj(t,e,n){let s=t.Ns.get(e)||ae.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ns.set(e,s)}class t2{constructor(){this.activeTargetIds=xD()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MI{constructor(){this.xo=new t2,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new t2,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="ConnectivityMonitor";class s2{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){q(n2,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){q(n2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu=null;function wp(){return vu===null?vu=function(){return 268435456+Math.round(2147483648*Math.random())}():vu++,"0x"+vu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="RestConnection",Oj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vj{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${r}`,this.Go=this.databaseId.database===Vd?`project_id=${s}`:`project_id=${s}&database_id=${r}`}zo(e,n,s,r,i){const o=wp(),a=this.jo(e,n.toUriEncodedString());q(Uf,`Sending RPC '${e}' ${o}:`,a,s);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,r,i);const{host:d}=new URL(a),f=Li(d);return this.Jo(e,a,c,s,f).then(m=>(q(Uf,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ni(Uf,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",s),m})}Yo(e,n,s,r,i,o){return this.zo(e,n,s,r,i)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}jo(e,n){const s=Oj[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class Lj extends Vj{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=wp();return new Promise((a,c)=>{const d=new rT;d.setWithCredentials(!0),d.listenOnce(iT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Fu.NO_ERROR:const m=d.getResponseJson();q(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Fu.TIMEOUT:q(Nt,`RPC '${e}' ${o} timed out`),c(new Q(U.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:const g=d.getStatus();if(q(Nt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E==null?void 0:E.error;if(S&&S.status&&S.message){const N=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(v)>=0?v:U.UNKNOWN}(S.status);c(new Q(N,S.message))}else c(new Q(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Q(U.UNAVAILABLE,"Connection failed."));break;default:te(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{q(Nt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);q(Nt,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",f,s,15)})}I_(e,n,s){const r=wp(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=cT(),a=aT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const f=i.join("");q(Nt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const m=o.createWebChannel(f,c);this.E_(m);let g=!1,E=!1;const S=new Mj({Zo:C=>{E?q(Nt,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(g||(q(Nt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),g=!0),q(Nt,`RPC '${e}' stream ${r} sending:`,C),m.send(C))},Xo:()=>m.close()}),N=(C,x,v)=>{C.listen(x,I=>{try{v(I)}catch(j){setTimeout(()=>{throw j},0)}})};return N(m,tc.EventType.OPEN,()=>{E||(q(Nt,`RPC '${e}' stream ${r} transport opened.`),S.__())}),N(m,tc.EventType.CLOSE,()=>{E||(E=!0,q(Nt,`RPC '${e}' stream ${r} transport closed`),S.u_(),this.d_(m))}),N(m,tc.EventType.ERROR,C=>{E||(E=!0,Ni(Nt,`RPC '${e}' stream ${r} transport errored. Name:`,C.name,"Message:",C.message),S.u_(new Q(U.UNAVAILABLE,"The operation could not be completed")))}),N(m,tc.EventType.MESSAGE,C=>{var x;if(!E){const v=C.data[0];oe(!!v,16349);const I=v,j=(I==null?void 0:I.error)||((x=I[0])===null||x===void 0?void 0:x.error);if(j){q(Nt,`RPC '${e}' stream ${r} received error:`,j);const L=j.status;let M=function(T){const k=tt[T];if(k!==void 0)return iI(k)}(L),w=j.message;M===void 0&&(M=U.INTERNAL,w="Unknown error status: "+L+" with message "+j.message),E=!0,S.u_(new Q(M,w)),m.close()}else q(Nt,`RPC '${e}' stream ${r} received:`,v),S.c_(v)}}),N(a,oT.STAT_EVENT,C=>{C.stat===Jm.PROXY?q(Nt,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===Jm.NOPROXY&&q(Nt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.a_()},0),S}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(){return typeof window<"u"?window:null}function Qu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t){return new zD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n,s=1e3,r=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=r,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),r=Math.max(0,n-s);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="PersistentStream";class FI{constructor(e,n,s,r,i,o,a,c){this.xi=e,this.S_=s,this.D_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new LI(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Lt(n.toString()),Lt("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.v_===n&&this.z_(s,r)},s=>{e(()=>{const r=new Q(U.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(r)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{s(()=>this.j_(r))}),this.stream.onMessage(r=>{s(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return q(r2,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(q(r2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zj extends FI{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=$D(this.serializer,e),s=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?zt(o.readTime):ae.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=mp(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Md(c)?{documents:fI(i,c)}:{query:mI(i,c).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cI(i,o.resumeToken);const d=hp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=ea(i,o.snapshotVersion.toTimestamp());const d=hp(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const s=WD(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=mp(this.serializer),n.removeTarget=e,this.Q_(n)}}class Uj extends FI{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=qD(e.writeResults,e.commitTime),s=zt(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=mp(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>zd(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{}class $j extends Bj{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,fp(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(U.UNKNOWN,i.toString())})}Yo(e,n,s,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,fp(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(U.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class qj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Lt(n),this.ua=!1):q("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="RemoteStore";class Wj{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{s.enqueueAndForget(async()=>{Ui(this)&&(q(Oi,"Restarting streams for network reachability change."),await async function(c){const d=me(c);d.da.add(4),await Il(d),d.Va.set("Unknown"),d.da.delete(4),await Fh(d)}(this))})}),this.Va=new qj(s,r)}}async function Fh(t){if(Ui(t))for(const e of t.Aa)await e(!0)}async function Il(t){for(const e of t.Aa)await e(!1)}function zI(t,e){const n=me(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),hy(n)?dy(n):ma(n).N_()&&uy(n,e))}function ly(t,e){const n=me(t),s=ma(n);n.Ea.delete(e),s.N_()&&UI(n,e),n.Ea.size===0&&(s.N_()?s.k_():Ui(n)&&n.Va.set("Unknown"))}function uy(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ma(t).Z_(e)}function UI(t,e){t.ma.Ke(e),ma(t).X_(e)}function dy(t){t.ma=new VD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),ma(t).start(),t.Va.ca()}function hy(t){return Ui(t)&&!ma(t).O_()&&t.Ea.size>0}function Ui(t){return me(t).da.size===0}function BI(t){t.ma=void 0}async function Gj(t){t.Va.set("Online")}async function Hj(t){t.Ea.forEach((e,n)=>{uy(t,e)})}async function Kj(t,e){BI(t),hy(t)?(t.Va.Pa(e),dy(t)):t.Va.set("Unknown")}async function Qj(t,e,n){if(t.Va.set("Online"),e instanceof aI&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ea.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ea.delete(a),r.ma.removeTarget(a))}(t,e)}catch(s){q(Oi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wd(t,s)}else if(e instanceof Hu?t.ma.Xe(e):e instanceof oI?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ae.min()))try{const s=await VI(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.ma.It(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ea.get(d);f&&i.Ea.set(d,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{const f=i.Ea.get(c);if(!f)return;i.Ea.set(c,f.withResumeToken(it.EMPTY_BYTE_STRING,f.snapshotVersion)),UI(i,c);const m=new gs(f.target,c,d,f.sequenceNumber);uy(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){q(Oi,"Failed to raise snapshot:",s),await Wd(t,s)}}async function Wd(t,e,n){if(!Fr(e))throw e;t.da.add(1),await Il(t),t.Va.set("Offline"),n||(n=()=>VI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Oi,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Fh(t)})}function $I(t,e){return e().catch(n=>Wd(t,n,e))}async function xl(t){const e=me(t),n=Rr(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:gi;for(;Yj(e);)try{const r=await Cj(e.localStore,s);if(r===null){e.Ia.length===0&&n.k_();break}s=r.batchId,Xj(e,r)}catch(r){await Wd(e,r)}qI(e)&&WI(e)}function Yj(t){return Ui(t)&&t.Ia.length<10}function Xj(t,e){t.Ia.push(e);const n=Rr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function qI(t){return Ui(t)&&!Rr(t).O_()&&t.Ia.length>0}function WI(t){Rr(t).start()}async function Jj(t){Rr(t).ia()}async function Zj(t){const e=Rr(t);for(const n of t.Ia)e.ta(n.mutations)}async function e3(t,e,n){const s=t.Ia.shift(),r=Jg.from(s,e,n);await $I(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await xl(t)}async function t3(t,e){e&&Rr(t).ea&&await async function(s,r){if(function(o){return jD(o)&&o!==U.ABORTED}(r.code)){const i=s.Ia.shift();Rr(s).L_(),await $I(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await xl(s)}}(t,e),qI(t)&&WI(t)}async function i2(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),q(Oi,"RemoteStore received new credentials");const s=Ui(n);n.da.add(3),await Il(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Fh(n)}async function n3(t,e){const n=me(t);e?(n.da.delete(2),await Fh(n)):e||(n.da.add(2),await Il(n),n.Va.set("Unknown"))}function ma(t){return t.fa||(t.fa=function(n,s,r){const i=me(n);return i.oa(),new zj(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:Gj.bind(null,t),n_:Hj.bind(null,t),i_:Kj.bind(null,t),Y_:Qj.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),hy(t)?dy(t):t.Va.set("Unknown")):(await t.fa.stop(),BI(t))})),t.fa}function Rr(t){return t.ga||(t.ga=function(n,s,r){const i=me(n);return i.oa(),new Uj(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:Jj.bind(null,t),i_:t3.bind(null,t),na:Zj.bind(null,t),ra:e3.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await xl(t)):(await t.ga.stop(),t.Ia.length>0&&(q(Oi,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new fy(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function my(t,e){if(Lt("AsyncQueue",`${e}: ${t}`),Fr(t))return new Q(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{static emptySet(e){return new jo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Y.comparator(n.key,s.key):(n,s)=>Y.comparator(n.key,s.key),this.keyedMap=nc(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new jo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.pa=new Ue(Y.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):te(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class ta{constructor(e,n,s,r,i,o,a,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ta(e,n,jo.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class r3{constructor(){this.queries=a2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=me(n),i=r.queries;r.queries=a2(),i.forEach((o,a)=>{for(const c of a.Sa)c.onError(s)})})(this,new Q(U.ABORTED,"Firestore shutting down"))}}function a2(){return new Rs(t=>GT(t),Ph)}async function GI(t,e){const n=me(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.Da()&&e.va()&&(s=2):(i=new s3,s=e.va()?0:1);try{switch(s){case 0:i.ba=await n.onListen(r,!0);break;case 1:i.ba=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=my(o,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&py(n)}async function HI(t,e){const n=me(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.va()?0:1:!i.Da()&&e.va()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function i3(t,e){const n=me(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Ma(r)&&(s=!0);o.ba=r}}s&&py(n)}function o3(t,e,n){const s=me(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function py(t){t.Ca.forEach(e=>{e.next()})}var Ep,c2;(c2=Ep||(Ep={})).xa="default",c2.Cache="cache";class KI{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new ta(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.key=e}}class YI{constructor(e){this.key=e}}class a3{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ge(),this.mutatedKeys=ge(),this.Za=HT(e),this.Xa=new jo(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new o2,r=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{const g=r.get(f),E=El(this.query,m)?m:null,S=!!g&&this.mutatedKeys.has(g.key),N=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let C=!1;g&&E?g.data.isEqual(E.data)?S!==N&&(s.track({type:3,doc:E}),C=!0):this.ru(g,E)||(s.track({type:2,doc:E}),C=!0,(c&&this.Za(E,c)>0||d&&this.Za(E,d)<0)&&(a=!0)):!g&&E?(s.track({type:0,doc:E}),C=!0):g&&!E&&(s.track({type:1,doc:g}),C=!0,(c||d)&&(a=!0)),C&&(E?(o=o.add(E),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{Xa:o,nu:s,Cs:a,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((f,m)=>function(E,S){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Vt:C})}};return N(E)-N(S)}(f.type,m.type)||this.Za(f.doc,m.doc)),this.iu(s),r=r!=null&&r;const a=n&&!r?this.su():[],c=this.Ya.size===0&&this.current&&!r?1:0,d=c!==this.Ja;return this.Ja=c,o.length!==0||d?{snapshot:new ta(this.query,e.Xa,i,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new o2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ge(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new YI(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new QI(s))}),n}au(e){this.Ha=e.$s,this.Ya=ge();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return ta.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const gy="SyncEngine";class c3{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class l3{constructor(e){this.key=e,this.cu=!1}}class u3{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Rs(a=>GT(a),Ph),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ue(Y.comparator),this.Eu=new Map,this.du=new ry,this.Au={},this.Ru=new Map,this.Vu=ji.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function d3(t,e,n=!0){const s=nx(t);let r;const i=s.hu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.uu()):r=await XI(s,e,n,!0),r}async function h3(t,e){const n=nx(t);await XI(n,e,!0,!1)}async function XI(t,e,n,s){const r=await Rj(t.localStore,En(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await f3(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&zI(t.remoteStore,r),a}async function f3(t,e,n,s,r){t.fu=(m,g,E)=>async function(N,C,x,v){let I=C.view.tu(x);I.Cs&&(I=await e2(N.localStore,C.query,!1).then(({documents:w})=>C.view.tu(w,I)));const j=v&&v.targetChanges.get(C.targetId),L=v&&v.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(I,N.isPrimaryClient,j,L);return u2(N,C.targetId,M.ou),M.snapshot}(t,m,g,E);const i=await e2(t.localStore,e,!0),o=new a3(e,i.$s),a=o.tu(i.documents),c=Tl.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),d=o.applyChanges(a,t.isPrimaryClient,c);u2(t,n,d.ou);const f=new c3(e,n,o);return t.hu.set(e,f),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function m3(t,e,n){const s=me(t),r=s.hu.get(e),i=s.Pu.get(r.targetId);if(i.length>1)return s.Pu.set(r.targetId,i.filter(o=>!Ph(o,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await _p(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&ly(s.remoteStore,r.targetId),Tp(s,r.targetId)}).catch(zi)):(Tp(s,r.targetId),await _p(s.localStore,r.targetId,!0))}async function p3(t,e){const n=me(t),s=n.hu.get(e),r=n.Pu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ly(n.remoteStore,s.targetId))}async function g3(t,e,n){const s=sx(t);try{const r=await function(o,a){const c=me(o),d=Ge.now(),f=a.reduce((E,S)=>E.add(S.key),ge());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=cn(),N=ge();return c.Bs.getEntries(E,f).next(C=>{S=C,S.forEach((x,v)=>{v.isValidDocument()||(N=N.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,S)).next(C=>{m=C;const x=[];for(const v of a){const I=RD(v,m.get(v.key).overlayedDocument);I!=null&&x.push(new Ds(v.key,I,MT(I.value.mapValue),jt.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,x,a)}).next(C=>{g=C;const x=C.applyToLocalDocumentSet(m,N);return c.documentOverlayCache.saveOverlays(E,C.batchId,x)})}).then(()=>({batchId:g.batchId,changes:QT(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let d=o.Au[o.currentUser.toKey()];d||(d=new Ue(ue)),d=d.insert(a,c),o.Au[o.currentUser.toKey()]=d}(s,r.batchId,n),await bl(s,r.changes),await xl(s.remoteStore)}catch(r){const i=my(r,"Failed to persist write");n.reject(i)}}async function JI(t,e){const n=me(t);try{const s=await Nj(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Eu.get(i);o&&(oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.cu=!0:r.modifiedDocuments.size>0?oe(o.cu,14607):r.removedDocuments.size>0&&(oe(o.cu,42227),o.cu=!1))}),await bl(n,s,e)}catch(s){await zi(s)}}function l2(t,e,n){const s=me(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.hu.forEach((i,o)=>{const a=o.view.Fa(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const c=me(o);c.onlineState=a;let d=!1;c.queries.forEach((f,m)=>{for(const g of m.Sa)g.Fa(a)&&(d=!0)}),d&&py(c)}(s.eventManager,e),r.length&&s.lu.Y_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function y3(t,e,n){const s=me(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Eu.get(e),i=r&&r.key;if(i){let o=new Ue(Y.comparator);o=o.insert(i,Xe.newNoDocument(i,ae.min()));const a=ge().add(i),c=new jh(ae.min(),new Map,new Ue(ue),o,a);await JI(s,c),s.Iu=s.Iu.remove(i),s.Eu.delete(e),yy(s)}else await _p(s.localStore,e,!1).then(()=>Tp(s,e,n)).catch(zi)}async function v3(t,e){const n=me(t),s=e.batch.batchId;try{const r=await Aj(n.localStore,e);ex(n,s,null),ZI(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await bl(n,r)}catch(r){await zi(r)}}async function _3(t,e,n){const s=me(t);try{const r=await function(o,a){const c=me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,a).next(m=>(oe(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(s.localStore,e);ex(s,e,n),ZI(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await bl(s,r)}catch(r){await zi(r)}}function ZI(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function ex(t,e,n){const s=me(t);let r=s.Au[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Au[s.currentUser.toKey()]=r}}function Tp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Pu.get(e))t.hu.delete(s),n&&t.lu.gu(s,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(s=>{t.du.containsKey(s)||tx(t,s)})}function tx(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(ly(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),yy(t))}function u2(t,e,n){for(const s of n)s instanceof QI?(t.du.addReference(s.key,e),w3(t,s)):s instanceof YI?(q(gy,"Document no longer in limbo: "+s.key),t.du.removeReference(s.key,e),t.du.containsKey(s.key)||tx(t,s.key)):te(19791,{pu:s})}function w3(t,e){const n=e.key,s=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(s)||(q(gy,"New document in limbo: "+n),t.Tu.add(s),yy(t))}function yy(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Y(Ne.fromString(e)),s=t.Vu.next();t.Eu.set(s,new l3(n)),t.Iu=t.Iu.insert(n,s),zI(t.remoteStore,new gs(En(Nh(n.path)),s,"TargetPurposeLimboResolution",_n.le))}}async function bl(t,e,n){const s=me(t),r=[],i=[],o=[];s.hu.isEmpty()||(s.hu.forEach((a,c)=>{o.push(s.fu(c,e,n).then(d=>{var f;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;s.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){r.push(d);const m=ay.Rs(c.targetId,d);i.push(m)}}))}),await Promise.all(o),s.lu.Y_(r),await async function(c,d){const f=me(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(d,g=>O.forEach(g.ds,E=>f.persistence.referenceDelegate.addReference(m,g.targetId,E)).next(()=>O.forEach(g.As,E=>f.persistence.referenceDelegate.removeReference(m,g.targetId,E)))))}catch(m){if(!Fr(m))throw m;q(cy,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const E=f.xs.get(g),S=E.snapshotVersion,N=E.withLastLimboFreeSnapshotVersion(S);f.xs=f.xs.insert(g,N)}}}(s.localStore,i))}async function E3(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){q(gy,"User change. New user:",e.toKey());const s=await OI(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(a=>{a.forEach(c=>{c.reject(new Q(U.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await bl(n,s.ks)}}function T3(t,e){const n=me(t),s=n.Eu.get(e);if(s&&s.cu)return ge().add(s.key);{let r=ge();const i=n.Pu.get(e);if(!i)return r;for(const o of i){const a=n.hu.get(o);r=r.unionWith(a.view.eu)}return r}}function nx(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y3.bind(null,e),e.lu.Y_=i3.bind(null,e.eventManager),e.lu.gu=o3.bind(null,e.eventManager),e}function sx(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_3.bind(null,e),e}class ol{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return jI(this.persistence,new DI,e.initialUser,this.serializer)}Su(e){return new iy(Mh.fi,this.serializer)}bu(e){return new MI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ol.provider={build:()=>new ol};class I3 extends ol{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){oe(this.persistence.referenceDelegate instanceof qd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new AI(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new iy(s=>qd.fi(s,n),this.serializer)}}class x3 extends ol{constructor(e,n,s){super(),this.Fu=e,this.cacheSizeBytes=n,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Fu.initialize(this,e),await sx(this.Fu.syncEngine),await xl(this.Fu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Du(e){return jI(this.persistence,new DI,e.initialUser,this.serializer)}vu(e,n){const s=this.persistence.referenceDelegate.garbageCollector;return new AI(s,e.asyncQueue,n)}Cu(e,n){const s=new PR(n,this.persistence);return new NR(e.asyncQueue,s)}Su(e){const n=xj(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new oy(this.synchronizeTabs,n,e.clientId,s,e.asyncQueue,Fj(),Qu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new MI}}class Gd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>l2(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=E3.bind(null,this.syncEngine),await n3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new r3}()}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),s=function(i){return new Lj(i)}(e.databaseInfo);return function(i,o,a,c){return new $j(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new Wj(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>l2(this.syncEngine,n,0),function(){return s2.C()?new s2:new jj}())}createSyncEngine(e,n){return function(r,i,o,a,c,d,f){const m=new u3(r,i,o,a,c,d);return f&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=me(r);q(Oi,"RemoteStore shutting down."),i.da.add(5),await Il(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gd.provider={build:()=>new Gd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Lt("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="FirestoreClient";class b3{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=wt.UNAUTHENTICATED,this.clientId=hT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{q(Dr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(q(Dr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=my(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Bf(t,e){t.asyncQueue.verifyOperationInProgress(),q(Dr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await OI(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function d2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await S3(t);q(Dr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>i2(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>i2(e.remoteStore,r)),t._onlineComponents=e}async function S3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Dr,"Using user provided OfflineComponentProvider");try{await Bf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ni("Error using user provided cache. Falling back to memory cache: "+n),await Bf(t,new ol)}}else q(Dr,"Using default OfflineComponentProvider"),await Bf(t,new I3(void 0));return t._offlineComponents}async function ix(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Dr,"Using user provided OnlineComponentProvider"),await d2(t,t._uninitializedComponentsProvider._online)):(q(Dr,"Using default OnlineComponentProvider"),await d2(t,new Gd))),t._onlineComponents}function k3(t){return ix(t).then(e=>e.syncEngine)}async function ox(t){const e=await ix(t),n=e.eventManager;return n.onListen=d3.bind(null,e.syncEngine),n.onUnlisten=m3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=h3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=p3.bind(null,e.syncEngine),n}function A3(t,e,n={}){const s=new es;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const f=new rx({next:g=>{f.xu(),o.enqueueAndForget(()=>HI(i,m));const E=g.docs.has(a);!E&&g.fromCache?d.reject(new Q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&c&&c.source==="server"?d.reject(new Q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new KI(Nh(a.path),f,{includeMetadataChanges:!0,Qa:!0});return GI(i,m)}(await ox(t),t.asyncQueue,e,n,s)),s.promise}function N3(t,e,n={}){const s=new es;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const f=new rx({next:g=>{f.xu(),o.enqueueAndForget(()=>HI(i,m)),g.fromCache&&c.source==="server"?d.reject(new Q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new KI(a,f,{includeMetadataChanges:!0,Qa:!0});return GI(i,m)}(await ox(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t,e,n){if(!n)throw new Q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P3(t,e,n,s){if(e===!0&&s===!0)throw new Q(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function f2(t){if(!Y.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function m2(t){if(Y.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function xn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zh(t);throw new Q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="firestore.googleapis.com",p2=!0;class g2{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lx,this.ssl=p2}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:p2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aj)throw new Q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ax((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new yR;switch(s.type){case"firstParty":return new ER(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=h2.get(n);s&&(q("ComponentProvider","Removing Datastore"),h2.delete(n),s.terminate())}(this),Promise.resolve()}}function C3(t,e,n,s={}){var r;t=xn(t,Uh);const i=Li(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(bg(`https://${c}`),Sg("Firestore",!0)),o.host!==lx&&o.host!==c&&Ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:s});if(!xi(d,a)&&(t._setSettings(d),s.mockUserToken)){let f,m;if(typeof s.mockUserToken=="string")f=s.mockUserToken,m=wt.MOCK_USER;else{f=VA(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new Q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new wt(g)}t._authCredentials=new vR(new uT(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class Ut{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class br extends Bi{constructor(e,n,s){super(e,n,Nh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Y(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function on(t,e,...n){if(t=rt(t),cx("collection","path",e),t instanceof Uh){const s=Ne.fromString(e,...n);return m2(s),new br(t,null,s)}{if(!(t instanceof Ut||t instanceof br))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ne.fromString(e,...n));return m2(s),new br(t.firestore,null,s)}}function st(t,e,...n){if(t=rt(t),arguments.length===1&&(e=hT.newId()),cx("doc","path",e),t instanceof Uh){const s=Ne.fromString(e,...n);return f2(s),new Ut(t,null,new Y(s))}{if(!(t instanceof Ut||t instanceof br))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ne.fromString(e,...n));return f2(s),new Ut(t.firestore,t instanceof br?t.converter:null,new Y(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="AsyncQueue";class v2{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new LI(this,"async_queue_retry"),this.rc=()=>{const s=Qu();s&&q(y2,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=Qu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Qu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new es;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Fr(e))throw e;q(y2,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Lt("INTERNAL UNHANDLED ERROR: ",_2(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const r=fy.createAndSchedule(this,e,n,s,i=>this.uc(i));return this.Zu.push(r),r}oc(){this.Xu&&te(47125,{cc:_2(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function _2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ur extends Uh{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new v2,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new v2(e),this._firestoreClient=void 0,await e}}}function R3(t,e){const n=typeof t=="object"?t:Ng(),s=typeof t=="string"?t:Vd,r=vh(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=aE("firestore");i&&C3(r,...i)}return r}function vy(t){if(t._terminated)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ux(t),t._firestoreClient}function ux(t){var e,n,s;const r=t._freezeSettings(),i=function(a,c,d,f){return new iD(a,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,ax(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new b3(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}function D3(t,e){Ni("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return j3(t,Gd.provider,{build:s=>new x3(s,n.cacheSizeBytes,void 0)}),Promise.resolve()}function j3(t,e,n){if((t=xn(t,Ur))._firestoreClient||t._terminated)throw new Q(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Q(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},ux(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new na(it.fromBase64String(e))}catch(n){throw new Q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new na(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=/^__.*__$/;class V3{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new fa(e,this.data,n,this.fieldTransforms)}}class dx{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function hx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ic:t})}}class Ty{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Ty(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:s,Rc:!1});return r.Vc(e),r}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:s,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Hd(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(hx(this.Ic)&&O3.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class M3{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Lh(e)}bc(e,n,s,r=!1){return new Ty({Ic:e,methodName:n,wc:s,path:$e.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $h(t){const e=t._freezeSettings(),n=Lh(t._databaseId);return new M3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fx(t,e,n,s,r,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,r);Iy("Data must be an object, but it was:",o,s);const a=mx(s,o);let c,d;if(i.merge)c=new Yt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=Ip(e,m,n);if(!o.contains(g))throw new Q(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);gx(f,g)||f.push(g)}c=new Yt(f),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new V3(new Dt(a),c,d)}class qh extends _y{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qh}}function L3(t,e,n,s){const r=t.bc(1,e,n);Iy("Data must be an object, but it was:",r,s);const i=[],o=Dt.empty();zr(s,(c,d)=>{const f=xy(e,c,n);d=rt(d);const m=r.mc(f);if(d instanceof qh)i.push(f);else{const g=Sl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const a=new Yt(i);return new dx(o,a,r.fieldTransforms)}function F3(t,e,n,s,r,i){const o=t.bc(1,e,n),a=[Ip(e,s,n)],c=[r];if(i.length%2!=0)throw new Q(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(Ip(e,i[g])),c.push(i[g+1]);const d=[],f=Dt.empty();for(let g=a.length-1;g>=0;--g)if(!gx(d,a[g])){const E=a[g];let S=c[g];S=rt(S);const N=o.mc(E);if(S instanceof qh)d.push(E);else{const C=Sl(S,N);C!=null&&(d.push(E),f.set(E,C))}}const m=new Yt(d);return new dx(f,m,o.fieldTransforms)}function z3(t,e,n,s=!1){return Sl(n,t.bc(s?4:3,e))}function Sl(t,e){if(px(t=rt(t)))return Iy("Unsupported field value:",e,t),mx(t,e);if(t instanceof _y)return function(s,r){if(!hx(r.Ic))throw r.gc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let c=Sl(a,r.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=rt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return bD(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ge.fromDate(s);return{timestampValue:ea(r.serializer,i)}}if(s instanceof Ge){const i=new Ge(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ea(r.serializer,i)}}if(s instanceof wy)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof na)return{bytesValue:cI(r.serializer,s._byteString)};if(s instanceof Ut){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ty(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Ey)return function(o,a){return{mapValue:{fields:{[Hg]:{stringValue:Kg},[Ko]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.gc("VectorValues must only contain numeric values.");return Yg(a.serializer,d)})}}}}}}(s,r);throw r.gc(`Unsupported field value: ${zh(s)}`)}(t,e)}function mx(t,e){const n={};return AT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(t,(s,r)=>{const i=Sl(r,e.Ac(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function px(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof wy||t instanceof na||t instanceof Ut||t instanceof _y||t instanceof Ey)}function Iy(t,e,n){if(!px(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=zh(n);throw s==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+s)}}function Ip(t,e,n){if((e=rt(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return xy(t,e);throw Hd("Field path arguments must be of type string or ",t,!1,void 0,n)}const U3=new RegExp("[~\\*/\\[\\]]");function xy(t,e,n){if(e.search(U3)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bh(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hd(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new Q(U.INVALID_ARGUMENT,a+t+c)}function gx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class B3 extends yx{data(){return super.data()}}function Wh(t,e){return typeof e=="string"?xy(t,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class by{}class vx extends by{}function Gn(t,e,...n){let s=[];e instanceof by&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof Sy).length,a=i.filter(c=>c instanceof Gh).length;if(o>1||o>0&&a>0)throw new Q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Gh extends vx{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Gh(e,n,s)}_apply(e){const n=this._parse(e);return _x(e._query,n),new Bi(e.firestore,e.converter,up(e._query,n))}_parse(e){const n=$h(e.firestore);return function(i,o,a,c,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){E2(m,f);const S=[];for(const N of m)S.push(w2(c,i,N));g={arrayValue:{values:S}}}else g=w2(c,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||E2(m,f),g=z3(a,o,m,f==="in"||f==="not-in");return _e.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ct(t,e,n){const s=e,r=Wh("where",t);return Gh._create(r,s,n)}class Sy extends by{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sy(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Pe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const c of a)_x(o,c),o=up(o,c)}(e._query,n),new Bi(e.firestore,e.converter,up(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ky extends vx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ky(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new Q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sl(i,o)}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new ha(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Hn(t,e="asc"){const n=e,s=Wh("orderBy",t);return ky._create(s,n)}function w2(t,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new Q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WT(e)&&n.indexOf("/")!==-1)throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ne.fromString(n));if(!Y.isDocumentKey(s))throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return tl(t,new Y(s))}if(n instanceof Ut)return tl(t,n._key);throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zh(n)}.`)}function E2(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _x(t,e){const n=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class q3{convertValue(e,n="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return zr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[Ko].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>Fe(o.doubleValue));return new Ey(i)}convertGeoPoint(e){return new wy(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=kh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Zc(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ne.fromString(e);oe(vI(s),9688,{name:e});const r=new Pi(s.get(1),s.get(3)),i=new Y(s.popFirst(5));return r.isEqual(n)||Lt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ex extends yx{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Wh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Yu extends Ex{data(e={}){return super.data(e)}}class W3{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ic(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Yu(this._firestore,this._userDataWriter,s.key,s,new ic(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const c=new Yu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ic(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Yu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ic(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:G3(a.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function G3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t){t=xn(t,Ut);const e=xn(t.firestore,Ur);return A3(vy(e),t._key).then(n=>H3(e,t,n))}class Tx extends q3{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function Kn(t){t=xn(t,Bi);const e=xn(t.firestore,Ur),n=vy(e),s=new Tx(e);return $3(t._query),N3(n,t._query).then(r=>new W3(e,s,t,r))}function Kd(t,e,n){t=xn(t,Ut);const s=xn(t.firestore,Ur),r=wx(t.converter,e,n);return Hh(s,[fx($h(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,jt.none())])}function Sr(t,e,n,...s){t=xn(t,Ut);const r=xn(t.firestore,Ur),i=$h(r);let o;return o=typeof(e=rt(e))=="string"||e instanceof Bh?F3(i,"updateDoc",t._key,e,n,s):L3(i,"updateDoc",t._key,e),Hh(r,[o.toMutation(t._key,jt.exists(!0))])}function Ay(t){return Hh(xn(t.firestore,Ur),[new Dh(t._key,jt.none())])}function Ny(t,e){const n=xn(t.firestore,Ur),s=st(t),r=wx(t.converter,e);return Hh(n,[fx($h(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,jt.exists(!1))]).then(()=>s)}function Hh(t,e){return function(s,r){const i=new es;return s.asyncQueue.enqueueAndForget(async()=>g3(await k3(s),r,i)),i.promise}(vy(t),e)}function H3(t,e,n){const s=n.docs.get(e._key),r=new Tx(t);return new Ex(t,r,e._key,s,new ic(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){da=r})(la),bi(new Nr("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Ur(new _R(s.getProvider("auth-internal")),new TR(o,s.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pi(d.options.projectId,f)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Xn(ew,tw,e),Xn(ew,tw,"esm2017")})();var K3="firebase",Q3="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn(K3,Q3,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n,s,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,rn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||s.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r==null||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="us-central1";class X3{constructor(e,n,s,r,i=xp,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Y3(e,n,s,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(i);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=xp}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function J3(t,e,n){const s=Li(e);t.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(bg(t.emulatorOrigin),Sg("Functions",!0))}const T2="@firebase/functions",I2="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="auth-internal",eO="app-check-internal",tO="messaging-internal";function nO(t){const e=(n,{instanceIdentifier:s})=>{const r=n.getProvider("app").getImmediate(),i=n.getProvider(Z3),o=n.getProvider(tO),a=n.getProvider(eO);return new X3(r,i,o,a,s)};bi(new Nr(Ix,e,"PUBLIC").setMultipleInstances(!0)),Xn(T2,I2,t),Xn(T2,I2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t=Ng(),e=xp){const s=vh(rt(t),Ix).getImmediate({identifier:e}),r=aE("functions");return r&&rO(s,...r),s}function rO(t,e,n){J3(rt(t),e,n)}nO();const iO={apiKey:"AIzaSyBn2jG-T2SesKFr0TsfeQa04wlBmDeEoG4",authDomain:"clarity-311c3.firebaseapp.com",projectId:"clarity-311c3",storageBucket:"clarity-311c3.firebasestorage.app",messagingSenderId:"459484415688",appId:"1:459484415688:web:bac719ee243bbd9821c7fd"},Py=gE(iO),hi=nT(Py),be=R3(Py);D3(be).catch(t=>{t.code==="failed-precondition"?console.warn("Firestore persistence failed: multiple tabs open"):t.code==="unimplemented"&&console.warn("Firestore persistence is not available in this browser")});sO(Py,"us-central1");const xx=A.createContext(),bn=()=>{const t=A.useContext(xx);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},bx=({children:t})=>{const[e,n]=A.useState(null),[s,r]=A.useState(null),[i,o]=A.useState("free"),[a,c]=A.useState(!0),[d,f]=A.useState(!1),m=A.useRef(!0),g=(j,L)=>{if(!j||!L)return{isTrialActive:!1,daysRemaining:0};const M=L.seconds?new Date(L.seconds*1e3):new Date(L),w=new Date,y=w<M,T=Math.ceil((M-w)/(24*60*60*1e3));return{isTrialActive:y,daysRemaining:Math.max(0,T),trialEndDate:M}},E=async j=>{try{const L=await pa(st(be,"users",j));if(L.exists()){const M=L.data(),w=g(M.trialStartDate,M.trialEndDate);if(console.log("🔍 Profile Data:",M),console.log("📅 Trial Status:",w),!m.current)return;if(M.subscription==="trial"&&!w.isTrialActive){const y={...M,subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date};await Sr(st(be,"users",j),{subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date}),m.current&&(r({...y,...w}),o("free"))}else m.current&&(r({...M,...w}),o(M.subscription))}}catch(L){console.error("Error fetching user profile:",L),m.current&&c(!1)}};A.useEffect(()=>iC(hi,async L=>{console.log("🔥 Auth state changed:",L?"User logged in":"User logged out");try{if(!m.current)return;n(L),f(!!L),L?await E(L.uid):m.current&&(r(null),o("free"))}catch(M){console.error("Error in auth state change:",M)}finally{m.current&&c(!1)}}),[]),A.useEffect(()=>()=>{m.current=!1},[]);const S=async(j,L,M={})=>{try{const{user:w}=await $E(hi,j,L),y={email:w.email,uid:w.uid,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date,firstName:M.firstName||"",lastName:M.lastName||"",exerciseGoalMinutes:M.exerciseGoalMinutes||30,waterGoalOz:M.waterGoalOz||64,meditationGoalMinutes:M.meditationGoalMinutes||10};if(await Kd(st(be,"users",w.uid),y),m.current){const T=g(y.trialStartDate,y.trialEndDate);r({...y,...T}),o("trial")}return{success:!0,user:w}}catch(w){throw console.error("Signup error:",w),w}},N=async(j,L)=>{try{const{user:M}=await qE(hi,j,L);return console.log("✅ Login successful, Firebase will trigger auth state change"),{success:!0,user:M}}catch(M){throw console.error("Login error:",M),M}},C=async()=>{try{return await WE(hi),m.current&&(n(null),r(null),o("free"),f(!1)),{success:!0}}catch(j){throw console.error("Logout error:",j),j}},x=async()=>{try{if(e!=null&&e.uid){const j={subscription:"premium",subscriptionStatus:"premium_paid",premiumStartDate:new Date,updatedAt:new Date};return await Sr(st(be,"users",e.uid),j),m.current&&(o("premium"),r(L=>({...L,...j}))),{success:!0}}}catch(j){throw console.error("Error upgrading to premium:",j),j}},v=async()=>{try{if(e!=null&&e.uid){const j={subscription:"free",subscriptionCancelledAt:new Date,updatedAt:new Date};return await Sr(st(be,"users",e.uid),j),m.current&&(o("free"),r(L=>({...L,...j}))),{success:!0}}}catch(j){throw console.error("Error cancelling subscription:",j),j}},I={user:e,userProfile:s,userSubscription:i,isAuthenticated:d,isPremium:i==="premium"||i==="trial",isTrialActive:(s==null?void 0:s.isTrialActive)||!1,trialDaysRemaining:(s==null?void 0:s.daysRemaining)||0,loading:a,signup:S,login:N,logout:C,upgradeToPremium:x,cancelSubscription:v,fetchUserProfile:E,authKey:(e==null?void 0:e.uid)||"no-user"};return u.jsx(xx.Provider,{value:I,children:t})},Sx="/assets/Logo-BuPYrDrj.png";var kx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x2=ys.createContext&&ys.createContext(kx),oO=["attr","size","title"];function aO(t,e){if(t==null)return{};var n=cO(t,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function cO(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function Qd(){return Qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Qd.apply(this,arguments)}function b2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Yd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b2(Object(n),!0).forEach(function(s){lO(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b2(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function lO(t,e,n){return e=uO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uO(t){var e=dO(t,"string");return typeof e=="symbol"?e:e+""}function dO(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ax(t){return t&&t.map((e,n)=>ys.createElement(e.tag,Yd({key:n},e.attr),Ax(e.child)))}function hO(t){return e=>ys.createElement(fO,Qd({attr:Yd({},t.attr)},e),Ax(t.child))}function fO(t){var e=n=>{var{attr:s,size:r,title:i}=t,o=aO(t,oO),a=r||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),ys.createElement("svg",Qd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:c,style:Yd(Yd({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&ys.createElement("title",null,i),t.children)};return x2!==void 0?ys.createElement(x2.Consumer,null,n=>e(n)):e(kx)}function mO(t){return hO({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(t)}async function pO(t,e){try{const n=st(be,"users",t),s=await pa(n);let r=0;return s.exists()&&typeof s.data().points=="number"&&(r=s.data().points),await Sr(n,{points:r+e,updatedAt:new Date}),{success:!0,newPoints:r+e}}catch(n){return console.error("Error adding points:",n),{success:!1,error:n}}}async function gO(t,e){try{const n=st(be,"users",t),s=await pa(n);let r=0;return s.exists()&&typeof s.data().points=="number"&&(r=s.data().points),r<e?{success:!1,error:"Not enough points"}:(await Sr(n,{points:r-e,updatedAt:new Date}),{success:!0,newPoints:r-e})}catch(n){return console.error("Error deducting points:",n),{success:!1,error:n}}}async function yO(t){try{const e=st(be,"users",t),n=await pa(e);return n.exists()&&typeof n.data().points=="number"?n.data().points:0}catch(e){return console.error("Error getting points:",e),0}}async function vO(t,e,n="daily"){try{const s=new Date;let r;if(n==="daily")r=s.toISOString().split("T")[0];else if(n==="weekly"){const o=s.getFullYear(),a=Math.ceil(((s-new Date(o,0,1))/864e5+new Date(o,0,1).getDay()+1)/7);r=`${o}-W${a}`}else r="unknown";const i=st(be,`users/${t}/challenges`,`${e}_${r}`);return await Kd(i,{challengeId:e,period:n,periodKey:r,completedAt:new Date}),{success:!0}}catch(s){return console.error("Error completing challenge:",s),{success:!1,error:s}}}async function _O(t,e,n="daily"){try{const s=new Date;let r;if(n==="daily")r=s.toISOString().split("T")[0];else if(n==="weekly"){const a=s.getFullYear(),c=Math.ceil(((s-new Date(a,0,1))/864e5+new Date(a,0,1).getDay()+1)/7);r=`${a}-W${c}`}else r="unknown";const i=st(be,`users/${t}/challenges`,`${e}_${r}`);return(await pa(i)).exists()}catch(s){return console.error("Error checking challenge completion:",s),!1}}const we={async register(t){try{const e=await $E(hi,t.email,t.password);return await Kd(st(be,"users",e.user.uid),{username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,exerciseGoalMinutes:t.exerciseGoalMinutes||30,waterGoalOz:t.waterGoalOz||64,meditationGoalMinutes:t.meditationGoalMinutes||10,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date}),{user:e.user}}catch(e){throw new Error(e.message)}},async login(t,e){try{return{user:(await qE(hi,t,e)).user}}catch{throw new Error("Invalid credentials")}},async logout(){try{return await WE(hi),{message:"success"}}catch(t){throw new Error(t.message)}},async getUserProfile(t){try{const e=await pa(st(be,"users",t));if(!e.exists())throw new Error("User not found");return{user:{id:t,...e.data()}}}catch(e){throw new Error(e.message)}},async updateUserProfile(t,e){try{const n=st(be,"users",t);return await Kd(n,{...e,updatedAt:new Date},{merge:!0}),{user:{id:t,...e}}}catch(n){throw new Error("Error updating profile: "+n.message)}},addPoints:pO,deductPoints:gO,getPoints:yO,completeChallenge:vO,isChallengeCompleted:_O};function wO(){const{user:t,logout:e}=bn(),n=ph(),[s,r]=A.useState(!1),[i,o]=A.useState(null),[a,c]=A.useState(!1),d=A.useRef();A.useEffect(()=>{const S=async()=>{if(t!=null&&t.uid)try{c(!0);const N=await we.getUserProfile(t.uid);o(N.user)}catch(N){console.error("Error fetching user profile:",N)}finally{c(!1)}};t!=null&&t.uid&&S()},[t]);const f=S=>{S.stopPropagation(),r(!s)};A.useEffect(()=>{if(!s)return;const S=N=>{d.current&&!d.current.contains(N.target)&&r(!1)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[s]);const m=async S=>{S.preventDefault(),r(!1);try{await e(),n("/welcome")}catch(N){console.error("Error logging out:",N),n("/welcome")}},g=()=>{r(!1),n("/profile")};if(!t)return null;const E="profile-dropdown"+(s?"":" hidden");return u.jsxs("div",{className:"profile-button-container",children:[u.jsx("button",{onClick:f,className:"profile-button",children:u.jsx(mO,{className:"profile-icon"})}),u.jsxs("ul",{className:E,ref:d,children:[u.jsx("li",{className:"profile-info",children:u.jsx("div",{className:"user-details",children:u.jsx("span",{className:"user-name",children:i!=null&&i.firstName&&(i!=null&&i.lastName)?`${i.firstName} ${i.lastName}`:(i==null?void 0:i.username)||"User"})})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:g,className:"dropdown-button",children:"👤 Edit Profile"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>{r(!1),n("/dashboard")},className:"dropdown-button",children:"📊 Dashboard"})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:m,className:"dropdown-button logout-button",children:"🚪 Sign Out"})})]})]})}function EO(){const{userSubscription:t,isTrialActive:e,trialDaysRemaining:n,upgradeToPremium:s}=bn();if(t==="premium"||t==="free"||!e)return null;const r=n<=3,i=(14-n)/14*100,o=()=>n===1?"Last day of premium!":n<=3?`Only ${n} days left!`:`${n} days remaining`,a=()=>n===1?"Keep Premium - $4.99/mo":n<=3?"Don't Lose Premium!":"Keep Premium - $4.99/mo";return u.jsxs("div",{className:`trial-banner ${r?"urgent":""}`,children:[u.jsxs("div",{className:"trial-content",children:[u.jsxs("div",{className:"trial-info",children:[u.jsx("span",{className:"trial-icon",children:r?"⏰":"✨"}),u.jsxs("div",{className:"trial-text",children:[u.jsx("h4",{children:r?"Premium Trial Ending!":"Premium Trial Active"}),u.jsx("p",{children:o()})]})]}),u.jsx("button",{onClick:s,className:"trial-upgrade-btn",children:a()})]}),u.jsx("div",{className:"trial-progress",children:u.jsx("div",{className:"trial-progress-bar",style:{width:`${i}%`}})})]})}function TO(){return u.jsxs("div",{className:"navigation-container",children:[u.jsxs("div",{className:"top-header",children:[u.jsxs("div",{className:"logo-container",children:[u.jsx("img",{src:Sx,alt:"Clarity logo",className:"logo"}),u.jsx("span",{className:"logo-text",children:"Your Mind + Wellness Tracker"})]}),u.jsx("a",{href:"mailto:help@loveclaritywellness.com",className:"help-icon",title:"Contact Support",style:{marginRight:"16px",fontSize:"1.6rem",textDecoration:"none"},children:"❓"}),u.jsx(wO,{})]}),u.jsx(EO,{}),u.jsx("main",{className:"main-content",children:u.jsx(dA,{})}),u.jsxs("nav",{className:"bottom-navigation",children:[u.jsxs(Zi,{to:"/dashboard",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"📊"}),u.jsx("span",{className:"nav-label",children:"Home"})]}),u.jsxs(Zi,{to:"/workout",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🏋️"}),u.jsx("span",{className:"nav-label",children:"Workout"})]}),u.jsxs(Zi,{to:"/meditation",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🧘‍♀️"}),u.jsx("span",{className:"nav-label",children:"Meditate"})]}),u.jsxs(Zi,{to:"/water",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"💧"}),u.jsx("span",{className:"nav-label",children:"Water"})]}),u.jsxs(Zi,{to:"/games",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🎮"}),u.jsx("span",{className:"nav-label",children:"Games"})]}),u.jsxs(Zi,{to:"/goals",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🎯"}),u.jsx("span",{className:"nav-label",children:"Goals"})]})]})]})}function IO(){const{user:t,loading:e}=bn(),[n,s]=A.useState(""),[r,i]=A.useState(""),[o,a]=A.useState(""),[c,d]=A.useState(""),[f,m]=A.useState(""),[g,E]=A.useState(""),[S,N]=A.useState(""),[C,x]=A.useState("30"),[v,I]=A.useState("64"),[j,L]=A.useState("10"),[M,w]=A.useState({}),[y,T]=A.useState(!1),[k,R]=A.useState(!1),[P,b]=A.useState("pulse");if(A.useEffect(()=>{const X=[setTimeout(()=>b("open"),2500),setTimeout(()=>b("form"),4500)];return()=>X.forEach(clearTimeout)},[]),e)return u.jsx("div",{children:"Loading..."});if(t)return u.jsx(Td,{to:"/dashboard",replace:!0});const re=async X=>{X.preventDefault(),w({}),R(!0);try{await we.login(n,r)}catch(Z){w({credential:Z.message})}finally{R(!1)}},de=async X=>{if(X.preventDefault(),r!==S){w({confirmPassword:"Confirm Password field must be the same as the Password field"});return}w({}),R(!0);try{await we.register({email:o,password:r,username:c,firstName:f,lastName:g,exerciseGoalMinutes:parseInt(C),waterGoalOz:parseInt(v),meditationGoalMinutes:parseInt(j)})}catch(Z){w({general:Z.message})}finally{R(!1)}};return u.jsxs("div",{className:"welcome-container",children:[P!=="form"&&u.jsx("div",{className:`awakening-bg ${P}`,children:u.jsx("div",{className:"awakening-eye"})}),u.jsxs("div",{className:`welcome-card ${P==="form"?"visible":""}`,children:[u.jsxs("div",{className:"welcome-header",children:[u.jsx("img",{src:Sx,alt:"Clarity logo"}),u.jsx("p",{children:"Begin your wellness today"})]}),y?u.jsxs("form",{className:"welcome-form",onSubmit:de,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Email"}),u.jsx("input",{type:"email",value:o,onChange:X=>a(X.target.value),required:!0,placeholder:"Enter your email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username"}),u.jsx("input",{type:"text",value:c,onChange:X=>d(X.target.value),required:!0,placeholder:"Choose a username"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"First Name"}),u.jsx("input",{type:"text",value:f,onChange:X=>m(X.target.value),required:!0,placeholder:"Enter your first name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Last Name"}),u.jsx("input",{type:"text",value:g,onChange:X=>E(X.target.value),required:!0,placeholder:"Enter your last name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:r,onChange:X=>i(X.target.value),required:!0,placeholder:"Create a password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Confirm Password"}),u.jsx("input",{type:"password",value:S,onChange:X=>N(X.target.value),required:!0,placeholder:"Confirm your password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Exercise Goal (minutes)"}),u.jsx("input",{type:"number",value:C,onChange:X=>x(X.target.value),required:!0,placeholder:"Daily exercise goal in minutes"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Water Goal (oz)"}),u.jsx("input",{type:"number",value:v,onChange:X=>I(X.target.value),required:!0,placeholder:"Daily water goal in ounces"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Meditation Goal (minutes)"}),u.jsx("input",{type:"number",value:j,onChange:X=>L(X.target.value),required:!0,placeholder:"Daily meditation goal in minutes"})]}),M.confirmPassword&&u.jsx("p",{className:"error-message",children:M.confirmPassword}),M.general&&u.jsx("p",{className:"error-message",children:M.general}),u.jsx("button",{type:"submit",className:"primary-button",disabled:k,children:k?"Creating Account...":"Sign Up"})]}):u.jsxs("form",{className:"welcome-form",onSubmit:re,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username or Email"}),u.jsx("input",{type:"text",value:n,onChange:X=>s(X.target.value),required:!0,placeholder:"Enter your username or email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:r,onChange:X=>i(X.target.value),required:!0,placeholder:"Enter your password"})]}),M.credential&&u.jsx("p",{className:"error-message",children:M.credential}),u.jsx("button",{type:"submit",className:"primary-button",disabled:k,children:k?"Logging In...":"Log In"})]}),u.jsx("button",{className:"secondary-button",onClick:()=>T(!y),disabled:k,children:y?"Already have an account? Log In":"Don't have an account? Sign Up"})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var bp=function(t,e){return bp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r])},bp(t,e)};function xO(t,e){bp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var bO=100,SO=100,S2=50,Sp=50,kp=50;function k2(t){var e=t.className,n=t.counterClockwise,s=t.dashRatio,r=t.pathRadius,i=t.strokeWidth,o=t.style;return A.createElement("path",{className:e,style:Object.assign({},o,AO({pathRadius:r,dashRatio:s,counterClockwise:n})),d:kO({pathRadius:r,counterClockwise:n}),strokeWidth:i,fillOpacity:0})}function kO(t){var e=t.pathRadius,n=t.counterClockwise,s=e,r=n?1:0;return`
      M `+Sp+","+kp+`
      m 0,-`+s+`
      a `+s+","+s+" "+r+" 1 1 0,"+2*s+`
      a `+s+","+s+" "+r+" 1 1 0,-"+2*s+`
    `}function AO(t){var e=t.counterClockwise,n=t.dashRatio,s=t.pathRadius,r=Math.PI*2*s,i=(1-n)*r;return{strokeDasharray:r+"px "+r+"px",strokeDashoffset:(e?-i:i)+"px"}}var $f=function(t){xO(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return S2-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var n=this.props,s=n.value,r=n.minValue,i=n.maxValue,o=Math.min(Math.max(s,r),i);return(o-r)/(i-r)},e.prototype.render=function(){var n=this.props,s=n.circleRatio,r=n.className,i=n.classes,o=n.counterClockwise,a=n.styles,c=n.strokeWidth,d=n.text,f=this.getPathRadius(),m=this.getPathRatio();return A.createElement("svg",{className:i.root+" "+r,style:a.root,viewBox:"0 0 "+bO+" "+SO,"data-test-id":"CircularProgressbar"},this.props.background?A.createElement("circle",{className:i.background,style:a.background,cx:Sp,cy:kp,r:S2}):null,A.createElement(k2,{className:i.trail,counterClockwise:o,dashRatio:s,pathRadius:f,strokeWidth:c,style:a.trail}),A.createElement(k2,{className:i.path,counterClockwise:o,dashRatio:m*s,pathRadius:f,strokeWidth:c,style:a.path}),d?A.createElement("text",{className:i.text,style:a.text,x:Sp,y:kp},d):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(A.Component);function qf(t){var e=t.rotation,n=t.strokeLinecap,s=t.textColor,r=t.textSize,i=t.pathColor,o=t.pathTransition,a=t.pathTransitionDuration,c=t.trailColor,d=t.backgroundColor,f=e==null?void 0:"rotate("+e+"turn)",m=e==null?void 0:"center center";return{root:{},path:_u({stroke:i,strokeLinecap:n,transform:f,transformOrigin:m,transition:o,transitionDuration:a==null?void 0:a+"s"}),trail:_u({stroke:c,strokeLinecap:n,transform:f,transformOrigin:m}),text:_u({fill:s,fontSize:r}),background:_u({fill:d})}}function _u(t){return Object.keys(t).forEach(function(e){t[e]==null&&delete t[e]}),t}const $={getUserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone},getCurrentLocalTime(){return new Date},getStartOfDay(t=new Date){const e=new Date(t);return e.setHours(0,0,0,0),e},getEndOfDay(t=new Date){const e=new Date(t);return e.setHours(23,59,59,999),e},formatLocalDate(t){return t.toLocaleDateString("en-CA")},formatLocalDateTime(t){return t.toLocaleString()},formatLocalTime(t){return t.toLocaleTimeString()},getLocalDateRange(t=7){const e=this.getEndOfDay(new Date),n=this.getStartOfDay(new Date);return n.setDate(n.getDate()-(t-1)),{startDate:n,endDate:e}},isToday(t){const e=new Date;return this.formatLocalDate(t)===this.formatLocalDate(e)},isSameLocalDay(t,e){return this.formatLocalDate(t)===this.formatLocalDate(e)},toLocalTimezone(t){return new Date(t)},getRelativeTime(t){const n=new Date-t,s=Math.floor(n/6e4),r=Math.floor(s/60),i=Math.floor(r/24);return s<1?"Just now":s<60?`${s} minutes ago`:r<24?`${r} hours ago`:i===1?"Yesterday":i<7?`${i} days ago`:this.formatLocalDate(t)},getCurrentWeekRange(){const t=new Date,e=t.getDay(),n=new Date(t);n.setHours(0,0,0,0),n.setDate(t.getDate()-e);const s=new Date(n);return s.setDate(n.getDate()+6),s.setHours(23,59,59,999),{startDate:n,endDate:s}}},fi={async logWorkout(t,e){try{console.log("🌍 Logging workout in timezone:",$.getUserTimezone());let n=$.getCurrentLocalTime();e.date&&(n=$.toLocalTimezone(e.date));const s={title:e.title,type:e.type||"General",durationMinutes:e.durationMinutes,date:n,notes:e.notes||"",caloriesBurned:e.caloriesBurned||0,completed:!0,createdAt:$.getCurrentLocalTime(),updatedAt:$.getCurrentLocalTime(),userTimezone:$.getUserTimezone(),sentiment:e.sentiment||null},r=await Ny(on(be,`users/${t}/workouts`),s);return{id:r.id,success:!0,workout:{...e,id:r.id}}}catch(n){throw new Error("Error logging workout: "+n.message)}},async fetchWorkoutsByUser(t){try{const e=Gn(on(be,`users/${t}/workouts`),Hn("date","desc"));return{workouts:(await Kn(e)).docs.map(r=>{var i,o,a,c;return{id:r.id,...r.data(),date:(i=r.data().date)==null?void 0:i.toDate(),localDate:$.formatLocalDate((o=r.data().date)==null?void 0:o.toDate()),localDateTime:$.formatLocalDateTime((a=r.data().date)==null?void 0:a.toDate()),relativeTime:$.getRelativeTime((c=r.data().date)==null?void 0:c.toDate())}})}}catch(e){throw new Error("Error fetching workouts: "+e.message)}},async updateWorkout(t,e,n){try{const s=st(be,`users/${t}/workouts`,e),r={...n,updatedAt:$.getCurrentLocalTime(),userTimezone:$.getUserTimezone()};return n.date&&(r.date=$.toLocalTimezone(n.date)),await Sr(s,r),{success:!0,workout:{id:e,...n}}}catch(s){throw new Error("Error updating workout: "+s.message)}},async deleteWorkout(t,e){try{return await Ay(st(be,`users/${t}/workouts`,e)),{success:!0,message:"Workout deleted successfully"}}catch(n){throw new Error("Error deleting workout: "+n.message)}},async getWorkoutSummary(t){try{const{startDate:e,endDate:n}=$.getCurrentWeekRange();console.log("🌍 Weekly workout query for timezone:",$.getUserTimezone()),console.log("📅 Query range:",$.formatLocalDateTime(e),"to",$.formatLocalDateTime(n));const s=Gn(on(be,`users/${t}/workouts`),Ct("date",">=",e),Ct("date","<=",n),Hn("date","desc")),i=(await Kn(s)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),o=i.reduce((c,d)=>c+(d.durationMinutes||0),0),a=i.reduce((c,d)=>c+(d.caloriesBurned||0),0);return{totalWorkouts:i.length,totalMinutes:o,totalCalories:a,workouts:i.slice(0,5),period:"This week",userTimezone:$.getUserTimezone()}}catch(e){throw new Error("Error fetching workout summary: "+e.message)}},async getDailyWorkoutSummary(t,e=new Date){try{const{startDate:n,endDate:s}={startDate:$.getStartOfDay(e),endDate:$.getEndOfDay(e)};console.log("🌍 Daily workout query for timezone:",$.getUserTimezone()),console.log("📅 Query range:",$.formatLocalDateTime(n),"to",$.formatLocalDateTime(s));const r=Gn(on(be,`users/${t}/workouts`),Ct("date",">=",n),Ct("date","<=",s),Hn("date","desc")),o=(await Kn(r)).docs.map(f=>{var m;return{id:f.id,...f.data(),date:(m=f.data().date)==null?void 0:m.toDate()}});console.log("💪 Found workouts for today:",o.length);const a=o.reduce((f,m)=>f+(m.durationMinutes||0),0),c=o.length,d=o.reduce((f,m)=>f+(m.caloriesBurned||0),0);return{date:$.formatLocalDate(e),totalWorkouts:c,completedWorkouts:c,totalMinutes:a,caloriesBurned:d,lastWorkout:o.length>0?o[0]:null,workouts:o,hasWorkoutsToday:o.length>0,mostCommonType:o.length>0?this.getMostCommonWorkoutType(o):null,userTimezone:$.getUserTimezone()}}catch(n){return console.error("Error fetching daily workout summary:",n),this.getEmptyDailySummary(e)}},async getWorkoutAnalytics(t,e=30){try{const s=(await this.fetchWorkoutsByUser(t)).workouts;if(s.length===0)return{totalEntries:0,averageDuration:0,averageSentiment:0,sentimentTrend:"neutral"};const r=s.reduce((c,d)=>c+(d.durationMinutes||0),0),i=s.map(c=>typeof c.sentiment=="number"?c.sentiment:0),o=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:0;let a="neutral";return o>0?a="positive":o<0&&(a="negative"),{totalEntries:s.length,averageDuration:r/s.length,averageSentiment:o,sentimentTrend:a}}catch(n){throw new Error("Error fetching workout analytics: "+n.message)}},async getPersonalizedWorkoutRecommendations(t){try{const e=await this.getWorkoutAnalytics(t),n=[];return e.averageSentiment<0&&n.push({type:"sentiment",message:"Your workout notes have been a bit negative. Try celebrating small wins and focusing on progress, not perfection!",action:"Reflect on what went well after each workout."}),e.averageDuration<20&&n.push({type:"duration",message:"Your average workout duration is below 20 minutes. Consider increasing your session length for better results.",action:"Try a 30-minute session this week."}),{recommendations:n}}catch(e){throw new Error("Error generating workout recommendations: "+e.message)}},getMostCommonWorkoutType(t){if(t.length===0)return null;const e={};return t.forEach(n=>{e[n.type]=(e[n.type]||0)+1}),Object.keys(e).reduce((n,s)=>e[n]>e[s]?n:s)},getEmptyDailySummary(t){return{date:$.formatLocalDate(t),totalWorkouts:0,completedWorkouts:0,totalMinutes:0,caloriesBurned:0,lastWorkout:null,workouts:[],hasWorkoutsToday:!1,mostCommonType:null,userTimezone:$.getUserTimezone()}}},tn={async logWaterIntake(t,e){try{const n={amount:e.amount,date:$.toLocalTimezone(e.date||new Date),userId:t,createdAt:$.getCurrentLocalTime(),userTimezone:$.getUserTimezone(),sentiment:e.sentiment||null},s=await Ny(on(be,`users/${t}/waterIntake`),n);return{id:s.id,success:!0,waterIntake:{...e,id:s.id}}}catch(n){throw new Error("Error logging water intake: "+n.message)}},async fetchWaterIntakeByUser(t,e=30){try{const n=$.getStartOfDay(new Date);n.setDate(n.getDate()-e),console.log("💧 fetchWaterIntakeByUser - Start date:",n.toLocaleDateString());const s=Gn(on(be,`users/${t}/waterIntake`),Ct("date",">=",n),Hn("date","desc")),i=(await Kn(s)).docs.map(o=>{var c;const a=o.data();return{id:o.id,...a,date:(c=a.date)!=null&&c.toDate?a.date.toDate():a.date}});return console.log("💧 fetchWaterIntakeByUser - Found intakes:",i.length),{waterIntakes:i}}catch(n){throw console.error("💧 fetchWaterIntakeByUser error:",n),new Error("Error fetching water intake: "+n.message)}},async updateWaterIntake(t,e,n){try{const s=st(be,`users/${t}/waterIntake`,e);return await Sr(s,{...n,updatedAt:new Date}),{success:!0,waterIntake:{id:e,...n}}}catch(s){throw new Error("Error updating water intake: "+s.message)}},async deleteWaterIntake(t,e){try{return await Ay(st(be,`users/${t}/waterIntake`,e)),{success:!0,message:"Water intake deleted successfully"}}catch(n){throw new Error("Error deleting water intake: "+n.message)}},async getTodayWaterIntake(t){try{const e=$.getStartOfDay(new Date),n=$.getEndOfDay(new Date);n.setMilliseconds(n.getMilliseconds()+1),console.log("💧 getTodayWaterIntake - Date range:",{today:e.toLocaleDateString(),tomorrow:n.toLocaleDateString(),todayISO:e.toISOString(),tomorrowISO:n.toISOString()});const s=Gn(on(be,`users/${t}/waterIntake`),Ct("date",">=",e),Ct("date","<",n),Hn("date","desc")),i=(await Kn(s)).docs.map(a=>{var d;const c=a.data();return{...c,date:(d=c.date)!=null&&d.toDate?c.date.toDate():c.date}});return console.log("💧 getTodayWaterIntake - Found intakes:",i.length),i.forEach(a=>{var c;console.log("  -",a.amount,"oz on",(c=a.date)==null?void 0:c.toLocaleDateString())}),{totalOz:i.reduce((a,c)=>a+(c.amount||0),0),intakeCount:i.length,intakes:i}}catch(e){throw console.error("💧 getTodayWaterIntake error:",e),new Error("Error fetching today's water intake: "+e.message)}},async getWaterSummary(t){try{const{startDate:e,endDate:n}=$.getCurrentWeekRange(),s=Gn(on(be,`users/${t}/waterIntake`),Ct("date",">=",e),Ct("date","<=",n),Hn("date","desc")),i=(await Kn(s)).docs.map(f=>f.data()),o={};i.forEach(f=>{const m=f.date.toDate().toDateString();o[m]=(o[m]||0)+f.amount});const a=i.reduce((f,m)=>f+(m.amount||0),0),c=7,d=c>0?a/c:0;return{totalOz:a,averageOz:d,dailyTotals:o,intakeCount:i.length}}catch(e){throw new Error("Error fetching water summary: "+e.message)}},async getDailyWaterIntake(t,e=new Date){try{const n=$.getStartOfDay(e),s=$.getEndOfDay(e),r=Gn(on(be,`users/${t}/waterIntake`),Ct("date",">=",n),Ct("date","<=",s),Hn("date","desc")),o=(await Kn(r)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),a=o.reduce((c,d)=>c+(d.amount||0),0);return{date:$.formatLocalDate(e),totalOz:a,totalEntries:o.length,entries:o,hasWaterToday:o.length>0,userTimezone:$.getUserTimezone()}}catch(n){return console.error("Error fetching daily water intake:",n),{date:$.formatLocalDate(e),totalOz:0,totalEntries:0,entries:[],hasWaterToday:!1,userTimezone:$.getUserTimezone()}}},async getWaterAnalytics(t,e=30){try{const s=(await this.fetchWaterIntakeByUser(t,e)).waterIntakes;if(s.length===0)return{totalEntries:0,averageAmount:0,averageSentiment:0,sentimentTrend:"neutral"};const r=s.reduce((c,d)=>c+(d.amount||0),0),i=s.map(c=>typeof c.sentiment=="number"?c.sentiment:0),o=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:0;let a="neutral";return o>0?a="positive":o<0&&(a="negative"),{totalEntries:s.length,averageAmount:r/s.length,averageSentiment:o,sentimentTrend:a}}catch(n){throw new Error("Error fetching water analytics: "+n.message)}},async getPersonalizedWaterRecommendations(t){try{const e=await this.getWaterAnalytics(t),n=[];return e.averageSentiment<0&&n.push({type:"sentiment",message:"Your water intake notes have been a bit negative. Try associating hydration with positive routines or rewards!",action:"Pair water breaks with something you enjoy."}),e.averageAmount<32&&n.push({type:"hydration",message:"Your average daily water intake is below recommended levels. Aim for at least 64oz per day.",action:"Set reminders to drink more water."}),{recommendations:n}}catch(e){throw new Error("Error generating water recommendations: "+e.message)}},calculateHourlyWaterIntake(t){const e={};return t.forEach(n=>{const s=n.date.getHours();e[s]=(e[s]||0)+n.amount}),e}},ar={async logMeditation(t,e){try{const n={title:e.title||"Meditation Session",type:e.type||"mindfulness",soundscape:e.soundscape||"silence",durationMinutes:e.durationMinutes,targetDuration:e.targetDuration||e.durationMinutes,completed:e.completed||!1,deepStateAchieved:e.deepStateAchieved||!1,date:$.toLocalTimezone(e.date||new Date),notes:e.notes||"",moodBefore:e.moodBefore||"",moodAfter:e.moodAfter||"",guidedSession:e.guidedSession||!1,interruptions:e.interruptions||0,heartRateData:e.heartRateData||null,brainwaveFrequency:e.brainwaveFrequency||null,focusLevel:e.focusLevel||null,createdAt:$.getCurrentLocalTime(),updatedAt:$.getCurrentLocalTime(),userTimezone:$.getUserTimezone(),sentiment:e.sentiment||null},s=await Ny(on(be,`users/${t}/meditations`),n);return{id:s.id,success:!0,meditation:{...n,id:s.id}}}catch(n){throw new Error("Error logging meditation: "+n.message)}},async fetchMeditationsByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const s=Gn(on(be,`users/${t}/meditations`),Ct("date",">=",n),Hn("date","desc"));return{meditations:(await Kn(s)).docs.map(o=>{var a;return{id:o.id,...o.data(),date:(a=o.data().date)==null?void 0:a.toDate()}})}}catch(n){throw new Error("Error fetching meditations: "+n.message)}},async getMeditationAnalytics(t,e=30){try{const s=(await this.fetchMeditationsByUser(t,e)).meditations;if(s.length===0)return{totalSessions:0,deepStateSuccessRate:0,averageDuration:0,favoriteTime:"morning",favoriteSound:"silence",moodImprovement:0};const i=s.filter(f=>f.deepStateAchieved).length/s.length*100,o={},a={},c=[],d=[];return s.forEach(f=>{o[f.soundscape]=(o[f.soundscape]||0)+1;const m=f.date.getHours(),g=m<12?"morning":m<18?"afternoon":"evening";if(a[g]=(a[g]||0)+1,f.moodBefore&&f.moodAfter){const E={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6},S=E[f.moodBefore]||3,N=E[f.moodAfter]||3;c.push(N-S)}f.sentiment&&d.push(f.sentiment)}),{totalSessions:s.length,deepStateSuccessRate:Math.round(i),averageDuration:s.reduce((f,m)=>f+m.durationMinutes,0)/s.length,favoriteTime:Object.keys(a).reduce((f,m)=>a[f]>a[m]?f:m,"morning"),favoriteSound:Object.keys(o).reduce((f,m)=>o[f]>o[m]?f:m,"silence"),moodImprovement:c.length>0?c.reduce((f,m)=>f+m,0)/c.length:0,consistency:s.length/e,averageSentiment:d.length>0?d.reduce((f,m)=>f+m,0)/d.length:0}}catch(n){throw new Error("Error fetching meditation analytics: "+n.message)}},async getPersonalizedRecommendations(t){try{const e=await this.getMeditationAnalytics(t),n=[];return e.deepStateSuccessRate<50&&n.push({type:"duration",message:"Try longer sessions (7-10 minutes) to achieve deeper states",action:"Increase session length"}),e.favoriteSound==="silence"&&n.push({type:"soundscape",message:'Research shows binaural beats can enhance focus. Try our "Deep Focus" soundscape.',action:"Try binaural beats"}),e.consistency<.5&&n.push({type:"consistency",message:`Your best time is ${e.favoriteTime}. Set a daily reminder for consistent practice.`,action:"Set daily reminder"}),e.averageSentiment<4&&n.push({type:"sentiment",message:"Your recent meditations have been on the lower end of the scale. Try to maintain a more positive mindset during your sessions.",action:"Focus on positive thoughts"}),{recommendations:n}}catch(e){throw new Error("Error generating recommendations: "+e.message)}},async updateMeditation(t,e,n){try{const s=st(be,`users/${t}/meditations`,e);return await Sr(s,{...n,updatedAt:new Date}),{success:!0,meditation:{id:e,...n}}}catch(s){throw new Error("Error updating meditation: "+s.message)}},async deleteMeditation(t,e){try{return await Ay(st(be,`users/${t}/meditations`,e)),{success:!0,message:"Meditation deleted successfully"}}catch(n){throw new Error("Error deleting meditation: "+n.message)}},async getMeditationSummary(t){try{const{startDate:e,endDate:n}=$.getCurrentWeekRange(),s=Gn(on(be,`users/${t}/meditations`),Ct("date",">=",e),Ct("date","<=",n),Hn("date","desc")),i=(await Kn(s)).docs.map(d=>d.data()),o=i.reduce((d,f)=>d+(f.durationMinutes||0),0),a=i.length>0?o/i.length:0,c=i.length>0?i.filter(d=>d.deepStateAchieved).length/i.length*100:0;return{totalSessions:i.length,totalMinutes:o,averageDuration:a,deepStateSuccessRate:c,favoriteSoundscape:i.length>0?this.getMostFrequent(i,"soundscape"):"silence",favoriteTime:i.length>0?this.getMostFrequent(i,"timeOfDay"):"morning",moodImprovement:this.calculateMoodImprovement(i)}}catch(e){throw console.error("Error fetching meditation summary:",e),new Error("Error fetching meditation summary: "+e.message)}},getMostFrequent(t,e){const n={};return t.forEach(s=>{const r=e==="timeOfDay"?this.getTimeOfDay(s.date):s[e];n[r]=(n[r]||0)+1}),Object.keys(n).reduce((s,r)=>n[s]>n[r]?s:r)},getTimeOfDay(t){let e;if(t instanceof Date)e=t;else if(typeof t=="string")e=new Date(t);else if(t&&t.seconds)e=new Date(t.seconds*1e3);else return console.warn("Invalid date format:",t),"unknown";if(isNaN(e.getTime()))return console.warn("Invalid date object:",t),"unknown";const n=e.getHours();return n<6?"night":n<12?"morning":n<17?"afternoon":n<21?"evening":"night"},calculateMoodImprovement(t){const e={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6};let n=0,s=0;return t.forEach(r=>{const i=e[r.moodBefore]||3,o=e[r.moodAfter]||3;n+=o-i,s++}),s>0?n/s:0},async getDailyMeditationSummary(t,e=new Date){try{const n=$.getStartOfDay(e),s=$.getEndOfDay(e);console.log("🌍 Daily meditation query for timezone:",$.getUserTimezone());const r=Gn(on(be,`users/${t}/meditations`),Ct("date",">=",n),Ct("date","<=",s),Hn("date","desc")),o=(await Kn(r)).docs.map(C=>{var x;return{id:C.id,...C.data(),date:(x=C.data().date)==null?void 0:x.toDate()}}),a=o.reduce((C,x)=>C+(x.durationMinutes||0),0),c=o.filter(C=>C.completed).length,d=o.length>0?a/o.length:0,f=o.filter(C=>C.deepStateAchieved).length,m=o.length>0?f/o.length*100:0,g=o.length>0?o[0]:null,E=o.length>0?this.getMostFrequent(o,"soundscape"):"silence",S=o.length>0?this.getMostFrequent(o,"timeOfDay"):"morning",N=this.calculateMoodImprovement(o);return{date:$.formatLocalDate(e),totalSessions:o.length,completedSessions:c,totalMinutes:a,averageDuration:Math.round(d*10)/10,deepStateAchieved:f,deepStateSuccessRate:Math.round(m),lastSession:g,favoriteSoundscape:E,favoriteTime:S,moodImprovement:Math.round(N*100)/100,sessions:o,hasSessionsToday:o.length>0,mostRecentType:(g==null?void 0:g.type)||"mindfulness",mostRecentSoundscape:(g==null?void 0:g.soundscape)||"silence",timeOfLastSession:(g==null?void 0:g.date)||null,totalInterruptions:o.reduce((C,x)=>C+(x.interruptions||0),0),averageFocusLevel:o.length>0?o.reduce((C,x)=>C+(x.focusLevel||5),0)/o.length:0,userTimezone:$.getUserTimezone()}}catch(n){return console.error("Error fetching daily meditation summary:",n),{date:e.toISOString().split("T")[0],totalSessions:0,completedSessions:0,totalMinutes:0,averageDuration:0,deepStateAchieved:0,deepStateSuccessRate:0,lastSession:null,favoriteSoundscape:"silence",favoriteTime:"morning",moodImprovement:0,sessions:[],hasSessionsToday:!1,mostRecentType:"mindfulness",mostRecentSoundscape:"silence",timeOfLastSession:null,totalInterruptions:0,averageFocusLevel:0,userTimezone:$.getUserTimezone()}}}},A2=["You are capable of amazing things.","You are loved.","You are strong.","You are beautiful.","You are enough.","You are worthy.","You are important.","You are talented.","You are special.","I am capable and strong","I am loved and loving","I am healthy and happy","I am wealthy and wise","Believe in yourself and all that you are.","You are amazing.","You are stronger than you think.","You are braver than you believe.","Every day is a new opportunity.","You are worth it.","You are worthy of all the good things.","You are deserving of love and happiness.","Stay positive, work hard, make it happen.","You are enough just as you are.","You are doing great.","Your potential is limitless.","You are a work of art.","You are doing great.","You are a gift to the world.","Keep going, you are getting there.","You are a masterpiece."],N2="https://createstripecheckoutsession-z5fchdkthq-uc.a.run.app";async function al(){const t=nT().currentUser;if(!t){alert("You must be logged in to upgrade.");return}try{console.log("🔧 Starting Stripe upgrade with direct HTTP call"),console.log("👤 User ID:",t.uid),console.log("🌐 Function URL:",N2);const e=await fetch(N2,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t.uid})});if(console.log("📡 Response status:",e.status),console.log("📡 Response headers:",e.headers),!e.ok){const r=await e.text();throw console.error("❌ HTTP error response:",r),new Error(`HTTP error! status: ${e.status}, body: ${r}`)}const n=await e.json();console.log("✅ Function call successful:",n);const{url:s}=n;console.log("🔗 Redirecting to Stripe checkout:",s),window.location.href=s}catch(e){console.error("❌ Error creating Stripe checkout session:",e),console.error("❌ Error details:",e.message),alert("Error creating checkout session. Please try again.")}}function P2(){const t=Math.floor(Math.random()*A2.length);return A2[t]}function NO(){const t=ph(),{user:e,loading:n,isPremium:s}=bn(),[r,i]=A.useState(null),[o,a]=A.useState({workout:{totalMinutes:0,sessions:0,hasWorkoutsToday:!1},meditation:{totalMinutes:0,sessions:0,hasSessionsToday:!1,deepStateAchieved:0},water:{totalOz:0,entries:0,hasWaterToday:!1}}),[c,d]=A.useState(30),[f,m]=A.useState(10),[g,E]=A.useState(64),[S,N]=A.useState(P2()),[C,x]=A.useState(!0),[v,I]=A.useState(!1),[j,L]=A.useState(0),[M,w]=A.useState([]);if(A.useEffect(()=>{if(!n&&!e){t("/welcome",{replace:!0});return}},[e,n,t]),A.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{x(!0);const b=$.getCurrentLocalTime();console.log("🌍 Dashboard timezone:",$.getUserTimezone()),console.log("📅 Local today:",$.formatLocalDateTime(b));const re=await we.getUserProfile(e.uid);i(re.user),d(re.user.exerciseGoalMinutes||30),m(re.user.meditationGoalMinutes||10),E(re.user.waterGoalOz||64),console.log("📊 Fetching workout data for date:",b);const[de,X,Z]=await Promise.all([fi.getDailyWorkoutSummary(e.uid,b),ar.getDailyMeditationSummary(e.uid,b),tn.getDailyWaterIntake(e.uid,b)]);console.log("📊 Raw workout data from Dashboard:",de),console.log("🧘 Raw meditation data:",X),console.log("💧 Raw water data:",Z),a({workout:{totalMinutes:de.totalMinutes||0,sessions:de.totalWorkouts||0,hasWorkoutsToday:de.hasWorkoutsToday||de.totalMinutes>0,calories:de.caloriesBurned||0,lastWorkoutType:de.mostCommonType},meditation:{totalMinutes:X.totalMinutes||0,sessions:X.totalSessions||0,hasSessionsToday:X.hasSessionsToday||!1,deepStateAchieved:X.deepStateAchieved||0,moodImprovement:X.moodImprovement||0,lastSessionType:X.mostRecentType},water:{totalOz:Z.totalOz||0,entries:Z.totalEntries||Z.entries||0,hasWaterToday:(Z.totalOz||0)>0,averagePerEntry:Z.averagePerEntry||0,isOnTrack:(Z.totalOz||0)>=(re.user.waterGoalOz||64)*.75}})}catch(b){console.error("Error fetching daily data:",b)}finally{x(!1)}})()},[e]),A.useEffect(()=>{const P=localStorage.getItem("affirmation"),b=localStorage.getItem("affirmationDate"),re=new Date().toISOString().split("T")[0];if(P&&b===re)N(P);else{const de=P2();N(de),localStorage.setItem("affirmation",de),localStorage.setItem("affirmationDate",re)}},[]),A.useEffect(()=>{if(console.log("Trial modal effect running",r),r&&r.subscriptionStatus==="trial_expired"&&r.subscription==="free"){const P=localStorage.getItem("dontRemindTrial"),b=localStorage.getItem("lastTrialReminded");console.log("dontRemindTrial:",P),console.log("lastReminded:",b);const re=1e3*60*60*24*7,de=Date.now();P||(!b||de-Number(b)>re)&&(I(!0),localStorage.setItem("lastTrialReminded",de),console.log("Showing trial modal!"))}},[r]),A.useEffect(()=>{(async()=>{if(e!=null&&e.uid){const b=await we.getPoints(e.uid);L(b)}})()},[e]),A.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{const[b,re,de]=await Promise.all([ar.getPersonalizedRecommendations(e.uid),tn.getPersonalizedWaterRecommendations(e.uid),fi.getPersonalizedWorkoutRecommendations(e.uid)]),X=[...(b==null?void 0:b.recommendations)||[],...(re==null?void 0:re.recommendations)||[],...(de==null?void 0:de.recommendations)||[]];w(X)}catch(b){console.error("Error fetching recommendations:",b)}})()},[e]),n||C)return u.jsx("div",{className:"dashboard-loading",children:"Loading..."});if(!e)return u.jsx("div",{className:"dashboard-loading",children:"Redirecting..."});if(!r)return u.jsx("div",{className:"dashboard-loading",children:"Loading user data..."});if(!r.firstName||!r.exerciseGoalMinutes||!r.waterGoalOz||!r.meditationGoalMinutes)return u.jsx("div",{className:"dashboard-loading",children:"Loading user profile..."});const y=Math.min(o.workout.totalMinutes/c*100,100)||0,T=Math.min(o.meditation.totalMinutes/f*100,100)||0,k=Math.min(o.water.totalOz/g*100,100)||0,R=Math.max(c-o.workout.totalMinutes,0);return r.subscriptionStatus==="trial_expired"&&r.subscription,u.jsxs("div",{className:"dashboard-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:"⭐"})," ",j," Points"]}),u.jsxs("div",{className:"welcome-section",children:[u.jsxs("h1",{children:["Welcome back, ",r.firstName,"!"]}),u.jsx("p",{children:"Here's your wellness progress for today"})]}),u.jsxs("div",{className:"progress-bars",children:[u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"💪 Today's Workout"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",c," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.workout.totalMinutes," / ",c," min"]}),u.jsx($f,{value:y,text:`${Math.round(y)}%`,styles:qf({pathColor:`rgba(62, 152, 199, ${Math.max(y/100,.3)})`,textColor:"#3e98c7"})}),u.jsx("div",{className:"daily-stats",children:o.workout.hasWorkoutsToday?u.jsxs("span",{children:["✅ ",o.workout.sessions," workouts logged"]}):u.jsx("span",{children:"No workouts logged today"})}),u.jsx("button",{className:"track-button",onClick:()=>t("/workout"),children:"Log Workout"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"🧘‍♀️ Today's Meditation"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",f," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.meditation.totalMinutes," / ",f," min"]}),u.jsx($f,{value:T,text:`${Math.round(T)}%`,styles:qf({pathColor:`rgba(138, 43, 226, ${Math.max(T/100,.3)})`,textColor:"#8a2be2"})}),u.jsxs("div",{className:"daily-stats",children:[o.meditation.hasSessionsToday?u.jsxs("span",{children:["✅ ",o.meditation.sessions," sessions completed"]}):u.jsx("span",{children:"No meditation logged today"}),o.meditation.deepStateAchieved>0&&u.jsxs("span",{className:"deep-state",children:["🌟 ",o.meditation.deepStateAchieved," deep states"]})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/meditation"),children:"Start Meditation"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"💧 Today's Hydration"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",g," oz"]}),u.jsxs("p",{className:"current-text",children:[o.water.totalOz," / ",g," oz"]}),u.jsx($f,{value:k,text:`${Math.round(k)}%`,styles:qf({pathColor:`rgba(30, 144, 255, ${Math.max(k/100,.3)})`,textColor:"#1e90ff"})}),u.jsxs("div",{className:"daily-stats",children:[o.water.hasWaterToday?u.jsxs("span",{children:["✅ ",o.water.entries," water entries"]}):u.jsx("span",{children:"No water logged today"}),o.water.isOnTrack&&u.jsx("span",{className:"on-track",children:"🎯 On track for hydration!"})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/water"),children:"Log Water"})]})]}),R>0&&u.jsx("div",{className:"notification-bar",children:u.jsxs("p",{children:["🔥 You are ",R," minutes away from your daily workout goal!"]})}),y>=100&&T>=100&&k>=100&&u.jsx("div",{className:"celebration-bar",children:u.jsx("p",{children:"🎉 Congratulations! You've achieved all your daily wellness goals! 🎉"})}),u.jsxs("div",{className:"affirmation-bar",children:[u.jsx("p",{children:"🌸 Daily Affirmation 🌸"}),u.jsx("h2",{children:S})]}),u.jsxs("div",{className:"quick-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.workout.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Exercised Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.water.totalOz}),u.jsx("span",{className:"stat-label",children:"Ounces of Water Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.meditation.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Meditated Today"})]})]}),(r.subscription==="premium"||r.subscription==="trial")&&u.jsxs("div",{className:"ai-coach-section soft-card",children:[u.jsxs("div",{className:"ai-coach-title-row",children:[u.jsx("h2",{className:"ai-coach-title",children:"🤖 Clarity AI Coach"}),u.jsx("span",{className:"ai-coach-premium-badge",children:"Premium"})]}),u.jsxs("div",{className:"ai-coach-avatar-row",children:[u.jsx("div",{className:"ai-coach-avatar","aria-label":"AI Coach",children:"🧠"}),u.jsx("div",{className:"ai-coach-chat",children:M.length>0?u.jsx("ul",{className:"ai-coach-chat-list",children:M.map((P,b)=>u.jsxs("li",{className:"ai-coach-message",children:[u.jsxs("div",{className:"ai-coach-bubble",children:[u.jsx("span",{className:"ai-coach-label",children:"Coach:"})," ",P.message,P.action&&u.jsxs("div",{className:"ai-coach-action",children:[u.jsx("span",{className:"ai-coach-action-label",children:"Try this:"})," ",P.action]})]}),P.type&&u.jsx("div",{className:"ai-coach-type-tag",children:P.type.charAt(0).toUpperCase()+P.type.slice(1)})]},b))}):u.jsxs("div",{className:"ai-coach-empty",children:[u.jsx("div",{className:"ai-coach-bubble ai-coach-bubble-empty",children:'"Log your workouts, meditations, water, and notes to unlock smart, personalized insights!"'}),u.jsx("div",{className:"ai-coach-tip",children:"The more you log, the smarter your AI Coach gets. Keep going! 💡"})]})})]})]}),v&&u.jsx("div",{className:"trial-modal-overlay",children:u.jsxs("div",{className:"trial-modal",children:[u.jsx("h2",{children:"Your free trial has ended"}),u.jsx("p",{children:"Upgrade to keep enjoying the AI Coach and other premium features!"}),u.jsx("button",{className:"primary-button",onClick:al,children:"Upgrade with Stripe"}),u.jsxs("div",{className:"trial-modal-actions",children:[u.jsx("button",{className:"secondary-button",onClick:()=>I(!1),children:"Remind me later"}),u.jsx("button",{className:"link-button",onClick:()=>{localStorage.setItem("dontRemindTrial","true"),I(!1)},children:"Don't remind me again"})]})]})})]})}var PO=function(t){return t.toLowerCase().replace(/\n/g," ").replace(/[.,\/#!?$%\^&\*;:{}=_`\"~()]/g," ").replace(/\s\s+/g," ").trim().split(" ")};function CO(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const RO={"😂":1,"❤":3,"♥":3,"😍":3,"😭":-1,"😘":3,"😊":3,"👌":2,"💕":3,"👏":2,"😁":2,"☺":3,"♡":3,"👍":2,"😩":-2,"🙏":2,"✌":2,"😏":1,"😉":2,"🙌":2,"🙈":2,"💪":2,"😄":2,"😒":-2,"💃":3,"💖":3,"😃":2,"😔":-1,"🎉":3,"😜":2,"🌸":3,"💜":3,"💙":3,"✨":1,"💗":3,"★":1,"█":-1,"☀":2,"😡":-1,"😎":2,"💋":3,"😋":3,"🙊":2,"😴":-1,"🎶":2,"💞":3,"😌":2,"🔫":-1,"💛":3,"💁":1,"💚":3,"♫":1,"😞":-1,"😆":2,"😝":2,"😪":-1,"😫":-1,"👊":1,"💀":-2,"😀":2,"😚":3,"😻":3,"💘":3,"☕":1,"👋":2,"🎊":3,"🍕":2,"❄":2,"😕":-2,"💔":-1,"😤":-2,"😈":1,"✈":2,"🔝":2,"😰":-1,"⚽":3,"😑":-2,"👑":3,"👉":1,"🍃":1,"🎁":3,"😠":-2,"🐧":2,"☆":2,"🍀":1,"🎈":3,"🎅":1,"😓":-1,"😣":-2,"😐":-2,"✊":2,"😨":-1,"😖":-1,"💤":1,"💓":3,"👎":-1,"💦":2,"✔":1,"😷":-1,"🙋":2,"🎄":2,"💩":-1,"🎵":2,"😛":3,"👯":2,"💎":2,"🌿":1,"🎂":3,"🌟":1,"🔮":1,"👫":1,"🏆":3,"✖":1,"☝":1,"😙":3,"⛄":2,"👅":2,"♪":2,"🍂":2,"💏":1,"🌴":2,"👈":2,"🌹":3,"🙆":2,"👻":1,"💰":1,"🍻":2,"🙅":-2,"🌞":2,"🍁":2,"⭐":2,"▪":1,"🎀":3,"🐷":1,"🙉":1,"🌺":2,"💅":1,"🐶":2,"🌚":2,"👽":1,"🎤":2,"👭":2,"🎧":2,"👆":1,"🍸":2,"🍷":2,"®":1,"🍉":3,"😇":3,"🏃":2,"😿":-2,"│":1,"🍺":2,"▶":1,"😲":-1,"🎸":2,"🍹":3,"💫":2,"📚":1,"😶":-1,"🌷":2,"💝":3,"💨":1,"🏈":2,"💍":2,"☔":1,"👸":3,"🇪":3,"░":-1,"🍩":1,"👾":1,"☁":1,"🌻":2,"↿":3,"🐯":2,"👼":1,"🍔":1,"😸":2,"👶":2,"↾":3,"💐":3,"🌊":2,"🍦":2,"🍓":3,"👇":1,"💆":1,"🍴":2,"😧":-1,"🇸":2,"😮":1,"🚫":-3,"😽":2,"🌈":2,"🙀":1,"⚠":-1,"🎮":2,"╯":-1,"🍆":2,"🍰":2,"✓":1,"👐":-1,"🍟":1,"🍌":2,"💑":3,"👬":-1,"🐣":2,"🎃":3,"▬":2,"￼":-3,"🐾":3,"🎓":2,"🏊":2,"📷":2,"👄":2,"🌼":4,"🚶":-1,"🐱":2,"🐸":-1,"🇺":2,"👿":-3,"🚬":2,"✿":1,"🐒":2,"🌍":3,"┊":5,"🐥":3,"🐼":1,"🎥":1,"💄":2,"⛔":2,"🏀":1,"💉":1,"💟":3,"🚗":1,"📝":1,"♦":2,"💭":1,"🌙":3,"🐟":3,"👣":1,"✂":-3,"🗿":2,"👪":-1,"🍭":1,"🌃":2,"❌":1,"🐰":3,"💊":2,"🚨":3,"😦":-2,"🍪":1,"🍣":-2,"✧":1,"🎆":3,"🎎":4,"🇩":3,"✅":2,"📱":1,"🙍":-2,"🍑":1,"🎼":1,"🔊":2,"🌌":2,"🍎":1,"🐻":2,"╰":-1,"💇":1,"♬":1,"🔴":2,"🍱":-2,"🍊":2,"🍒":1,"🐭":3,"👟":2,"🌎":1,"🍍":2,"🐮":3,"📲":1,"☼":1,"🌅":1,"🇷":3,"👠":1,"🌽":2,"💧":-1,"🍬":1,"😺":2,"🚀":2,"¦":3,"💢":1,"🎬":1,"🍧":1,"🍜":2,"🐏":3,"🏄":2,"➤":1,"⬆":1,"🍋":1,"🆗":2,"⚪":2,"📺":2,"🍅":1,"⛅":2,"🐢":1,"👙":2,"🏡":2,"🌾":2,"◉":1,"✏":1,"🐬":2,"🇹":3,"♣":1,"🐝":1,"🌝":1,"🇮":3,"🔋":-3,"🐍":1,"♔":2,"🔵":1,"😾":-2,"🌕":3,"🐨":2,"🔐":1,"💿":3,"🌳":2,"👰":2,"❀":2,"⚓":3,"🚴":3,"▀":-1,"👗":1,"➕":2,"💬":2,"▒":-1,"🔜":1,"🍨":1,"💲":1,"🍙":1,"🍥":-4,"▸":1,"♛":1,"😼":1,"🐙":2,"👨":2,"🍚":2,"♨":4,"🎹":1,"♕":2,"▃":5,"🇬":1,"🇧":1,"☠":-1,"🐠":2,"🚹":3,"💵":2,"✰":4,"╠":1,"👛":2,"🌱":3,"💻":1,"🌏":1,"▄":-1,"👓":1,"◄":1,"⚾":-1,"🌲":2,"👴":1,"🏠":2,"🍇":1,"🍘":2,"🐇":1,"🔞":-1,"👵":2,"◀":1,"🔙":1,"🌵":1,"🍮":-1,"🎇":3,"🐎":2,"➔":-1,"🐤":2,"╩":1,"🌑":2,"🚲":2,"🐑":-1,"🏁":2,"🎾":3,"╚":1,"🈹":1,"👮":-2,"☹":-3,"🐵":2,"✪":1,"◕":2,"🗼":3,"▐":-1,"♠":1,"┳":-2,"👺":-2,"🐚":1,"👂":-1,"🗽":1,"🍵":2,"🆒":2,"🐺":1,"⇨":2,"🌓":3,"🔒":1,"╬":-1,"👳":3,"🌂":1,"🚌":1,"♩":3,"🍡":-1,"❥":1,"🎡":1,"💌":2,"🐩":2,"🌜":2,"⌚":1,"🚿":3,"🔆":3,"🌛":3,"💂":-1,"🐔":1,"🙎":-1,"🏩":2,"🇫":2,"🔨":-1,"📢":2,"🐦":2,"🐲":-1,"♻":2,"🌘":3,"🌔":3,"👖":2,"😗":3,"🐄":1,"◟":-1,"🍢":-1,"🎨":1,"⬇":2,"🚼":3,"🇴":2,"🌗":3,"🌖":3,"🔅":5,"👜":1,"🐌":3,"💼":3,"🐹":1,"🌠":3,"🐈":1,"🌁":1,"⚫":1,"♧":2,"🏰":1,"🚵":2,"🎢":2,"🎷":3,"🎐":1,"┈":-4,"╗":2,"🌇":3,"⏰":2,"🚂":1,"◠":2,"🎿":2,"🆔":4,"🌒":3,"🐪":3,"╔":1,"╝":2,"👔":2,"🆓":1,"🐋":1,"▽":2,"🐛":1,"👕":2,"💳":2,"🏧":5,"💡":3,"⬅":2,"🐫":2,"🇱":2,"📹":2,"👞":2,"👚":3,"□":-2,"🚣":3,"🏉":3,"🗻":3,"╦":2,"⛺":3,"🐕":1,"🏂":2,"👡":2,"📻":2,"✒":1,"🌰":3,"🏢":1,"🎒":3,"⌒":3,"🏫":-2,"📴":4,"🚢":1,"🚚":-1,"🐉":1,"❒":1,"🔔":5,"◢":4,"🏥":1,"🚖":-1,"▌":-2,"☛":2,"💒":3,"🚤":2,"🐐":2,"■":-2,"🔚":2,"🎻":2,"🔷":1,"🎽":2,"📅":1,"🎺":3,"🍈":-3,"✉":1,"◤":5,"○":3,"🍼":3,"🚛":-2,"📓":1,"☉":1,"💴":-2,"➰":-1,"🔌":-1,"📕":1,"📣":2,"🚓":1,"🐗":3,"⛳":4,"┻":-3,"┛":3,"┃":2,"💺":1,"🏇":-1,"☻":1,"📞":2,"Ⓐ":-1,"🌉":3,"🚩":-2,"✎":3,"📃":2,"🏨":1,"📌":-3,"♎":-1,"💷":2,"🚄":3,"▲":3,"⛵":3,"🔸":1,"🚜":5,"🐆":2,"👒":1,"❕":1,"🔛":2,"♢":2,"🇲":2,"❅":4,"👝":2,"✞":2,"◡":1,"🎋":3,"👥":1,"🐡":1,"◆":4,"🔭":2,"🎪":1,"🐜":3,"♌":4,"☐":-5,"👷":1,"🔈":1,"📄":5,"🚐":4,"🌋":3,"📡":1,"🚳":5,"✘":4,"🅰":1,"🇼":2,"┓":3,"┣":3,"Ⓛ":2,"Ⓔ":2,"👤":4,"🚁":1,"🎠":3,"🐁":-2,"📗":1,"┐":-1,"♂":1,"📯":-1,"🔩":1,"👢":4,"◂":2,"📰":1,"📶":2,"🌄":1,"🗾":2,"🔶":2,"🏤":2,"🎩":2,"Ⓜ":1,"🔧":-4,"🐅":1,"♮":1,"🅾":-1,"📦":1,"🚊":1,"🔲":3,"△":1,"📆":5,"❛":2,"📉":2,"▵":2,"🔎":3,"☜":1,"🇯":2,"🇵":2,"📘":1,"ⓔ":3,"🔑":1,"⭕":2,"🔘":1,"🚭":5,"🚉":3,"🚪":3,"➳":2,"🚃":3,"┯":-3,"🆙":2,"🆖":1,"┗":5,"Ⓞ":2,"❇":3,"✴":3,"☊":5,"🔕":-2,"⬛":-2,"🚞":3,"🍶":3,"🌐":3,"♀":1,"🚅":3,"🚒":-2,"♋":1,"♍":3,"🕝":-2,"ⓐ":5,"📙":1,"Ⓢ":1,"📋":3,"🎱":1,"🐞":1,"🔺":1,"ⓡ":5,"♤":3,"🎯":3,"🔉":3,"↩":5,"🚾":1,"🎣":-4,"🔣":1,"❎":-5,"➥":1,"🎌":5,"◣":1,"⏬":5,"♭":1,"ⓞ":5,"🔳":2,"🏭":2,"🎳":-3,"☚":5,"➽":2,"➫":2,"➖":-5,"꒰":2,"꒱":2,"◝":-3,"📑":5,"ⓧ":5,"🔟":5,"〓":5,"ⓜ":2,"➠":5,"🚆":2,"℅":-5,"☃":2,"🚽":5,"ⓝ":5,"⇦":5,"👲":2,"🚡":-3,"🔬":5,"➗":-3,"📈":2,"⏪":2,"◎":5,"꒦":-5,"📎":5,"⑅":5,"✭":5,"♓":2,"┏":5,"☇":5,"࿎":-5,"👘":5,"↙":5,"Ⓕ":2,"Ⓦ":2,"Ⓟ":2,"🕑":2,"🕛":5,"♈":-5,"↬":5,"✍":5,"🏦":5,"🔻":5,"ⓟ":5,"ⓕ":5,"ⓘ":5,"♿":5,"⇗":5,"⇘":5,"ⓨ":5,"ⓙ":5,"▫":5,"🔇":5,"⌃":-5,"🔖":5,"📜":5,"🚝":5,"┘":-5,"✝":-5,"⍣":-5,"📮":-5,"🕕":-5,"🔯":5,"➸":5,"꒵":5,"🕥":-5,"✽":5,"📼":5,"🕐":-5,"🀄":5,"✬":5,"✫":5,"🕔":-5,"❣":5,"📫":5,"🉐":5,"🈂":-5,"🎰":-5,"҂":-5,"╤":-5,"📔":5},DO=-2,jO=-2,OO=-2,VO=-2,MO=-2,LO=-2,FO=-3,zO=-3,UO=-3,BO=-3,$O=2,qO=2,WO=1,GO=-1,HO=-1,KO=-1,QO=-1,YO=2,XO=2,JO=2,ZO=2,eV=1,tV=-3,nV=-3,sV=-3,rV=-3,iV=-3,oV=1,aV=1,cV=1,lV=1,uV=1,dV=1,hV=1,fV=-2,mV=-2,pV=-2,gV=-2,yV=2,vV=2,_V=2,wV=2,EV=2,TV=2,IV=2,xV=2,bV=-2,SV=-2,kV=-2,AV=-2,NV=-2,PV=-2,CV=-2,RV=1,DV=-2,jV=2,OV=2,VV=2,MV=2,LV=-3,FV=1,zV=1,UV=3,BV=3,$V=3,qV=3,WV=-1,GV=-1,HV=-1,KV=-2,QV=-2,YV=1,XV=1,JV=3,ZV=3,eM=3,tM=3,nM=3,sM=3,rM=3,iM=1,oM=2,aM=2,cM=2,lM=2,uM=2,dM=2,hM=2,fM=-1,mM=1,pM=-1,gM=3,yM=3,vM=3,_M=-1,wM=2,EM=-1,TM=2,IM=-2,xM=-2,bM=-2,SM=-2,kM=-2,AM=-2,NM=-2,PM=-2,CM=-2,RM=-2,DM=2,jM=-3,OM=-3,VM=-3,MM=-3,LM=-3,FM=-3,zM=-3,UM=-3,BM=1,$M=2,qM=1,WM=1,GM=1,HM=-2,KM=-2,QM=-2,YM=-2,XM=-1,JM=-1,ZM=-2,eL=1,tL=-2,nL=-2,sL=-2,rL=1,iL=2,oL=-2,aL=2,cL=2,lL=2,uL=2,dL=4,hL=2,fL=-1,mL=2,pL=3,gL=3,yL=3,vL=3,_L=-3,wL=-3,EL=-3,TL=-3,IL=-3,xL=-3,bL=-2,SL=-2,kL=-2,AL=-2,NL=-2,PL=-2,CL=-2,RL=-1,DL=1,jL=-2,OL=-2,VL=-3,ML=-3,LL=-3,FL=-2,zL=-1,UL=-1,BL=-1,$L=-1,qL=-1,WL=-1,GL=-1,HL=-1,KL=-1,QL=-2,YL=-2,XL=2,JL=2,ZL=2,e4=2,t4=2,n4=2,s4=2,r4=2,i4=2,o4=2,a4=2,c4=2,l4=2,u4=2,d4=2,h4=-2,f4=2,m4=2,p4=2,g4=2,y4=2,v4=1,_4=-2,w4=-3,E4=-2,T4=-2,I4=-4,x4=-2,b4=-2,S4=-4,k4=-3,A4=-3,N4=-2,P4=-2,C4=2,R4=2,D4=-4,j4=-4,O4=2,V4=3,M4=3,L4=3,F4=3,z4=3,U4=-3,B4=-3,$4=-1,q4=-1,W4=-1,G4=-1,H4=1,K4=1,Q4=2,Y4=2,X4=2,J4=2,Z4=2,eF=2,tF=1,nF=3,sF=1,rF=1,iF=-2,oF=-2,aF=-2,cF=-2,lF=-2,uF=-2,dF=-1,hF=-1,fF=-1,mF=2,pF=-1,gF=-1,yF=-1,vF=-1,_F=-1,wF=3,EF=3,TF=3,IF=4,xF=-3,bF=-2,SF=-1,kF=-1,AF=1,NF=2,PF=1,CF=-3,RF=-3,DF=-3,jF=-3,OF=-2,VF=1,MF=-2,LF=-2,FF=-2,zF=-2,UF=-1,BF=-3,$F=-3,qF=-3,WF=-2,GF=-2,HF=-2,KF=-2,QF=2,YF=-2,XF=-5,JF=-5,ZF=-1,ez=-1,tz=-1,nz=-2,sz=-2,rz=3,iz=-1,oz=3,az=3,cz=3,lz=3,uz=3,dz=2,hz=2,fz=-2,mz=-2,pz=3,gz=2,yz=2,vz=2,_z=2,wz=2,Ez=2,Tz=3,Iz=-2,xz=-2,bz=-2,Sz=-2,kz=3,Az=-3,Nz=-3,Pz=-3,Cz=-3,Rz=-3,Dz=2,jz=-1,Oz=-2,Vz=1,Mz=-5,Lz=-5,Fz=-2,zz=-2,Uz=-2,Bz=-2,$z=-3,qz=-3,Wz=-3,Gz=-3,Hz=-2,Kz=-2,Qz=-2,Yz=-2,Xz=-2,Jz=2,Zz=2,e5=3,t5=3,n5=-1,s5=3,r5=3,i5=2,o5=-1,a5=-1,c5=-2,l5=3,u5=-1,d5=-1,h5=-1,f5=-3,m5=-2,p5=-2,g5=2,y5=2,v5=-1,_5=1,w5=1,E5=1,T5=1,I5=-2,x5=-2,b5=-3,S5=-2,k5=-2,A5=-2,N5=-2,P5=-2,C5=-2,R5=-2,D5=-2,j5=-3,O5=2,V5=2,M5=2,L5=3,F5=-2,z5=-2,U5=-2,B5=-2,$5=3,q5=5,W5=-3,G5=-3,H5=-3,K5=-3,Q5=1,Y5=2,X5=1,J5=4,Z5=3,e6=3,t6=2,n6=-1,s6=-1,r6=-2,i6=-3,o6=-3,a6=-2,c6=-4,l6=-2,u6=-2,d6=-2,h6=2,f6=-2,m6=-2,p6=-2,g6=-2,y6=-2,v6=-2,_6=2,w6=2,E6=2,T6=2,I6=-1,x6=-1,b6=-1,S6=-1,k6=-1,A6=1,N6=1,P6=1,C6=3,R6=2,D6=1,j6=2,O6=2,V6=2,M6=-2,L6=2,F6=2,z6=-2,U6=-3,B6=-4,$6=-1,q6=3,W6=3,G6=3,H6=3,K6=3,Q6=3,Y6=-2,X6=-2,J6=-2,Z6=1,eU=-2,tU=-2,nU=-1,sU=2,rU=2,iU=2,oU=2,aU=2,cU=-2,lU=-2,uU=-3,dU=-2,hU=2,fU=2,mU=3,pU=3,gU=3,yU=-3,vU=-3,_U=-3,wU=-3,EU=-3,TU=-3,IU=-3,xU=-3,bU=-3,SU=-3,kU=-3,AU=2,NU=2,PU=2,CU=2,RU=2,DU=-2,jU=2,OU=3,VU=2,MU=2,LU=2,FU=2,zU=2,UU=-3,BU=-3,$U=-3,qU=-3,WU=-2,GU=-1,HU=-2,KU=-2,QU=-2,YU=-2,XU=2,JU=2,ZU=-2,e9=3,t9=2,n9=2,s9=1,r9=1,i9=1,o9=1,a9=2,c9=-1,l9=-2,u9=-5,d9=-5,h9=-5,f9=-2,m9=-2,p9=-2,g9=-2,y9=-2,v9=-2,_9=-2,w9=-1,E9=-1,T9=-1,I9=-2,x9=-2,b9=-3,S9=-1,k9=-1,A9=1,N9=2,P9=2,C9=2,R9=2,D9=2,j9=1,O9=2,V9=2,M9=1,L9=2,F9=1,z9=1,U9=1,B9=2,$9=2,q9=1,W9=1,G9=2,H9=2,K9=-2,Q9=-2,Y9=-2,X9=-2,J9=-2,Z9=-2,eB=-2,tB=-2,nB=2,sB=2,rB=2,iB=2,oB=-2,aB=2,cB=2,lB=2,uB=2,dB=-2,hB=-2,fB=-2,mB=-2,pB=2,gB=2,yB=2,vB=-2,_B=-2,wB=-2,EB=-2,TB=-2,IB=-2,xB=-2,bB=2,SB=2,kB=2,AB=2,NB=2,PB=2,CB=2,RB=-3,DB=-2,jB=-2,OB=-2,VB=-2,MB=-1,LB=-2,FB=-2,zB=-2,UB=-2,BB=-2,$B=-2,qB=-2,WB=-2,GB=-2,HB=-2,KB=-2,QB=-2,YB=-1,XB=-1,JB=-1,ZB=-2,e$=-2,t$=-2,n$=-2,s$=-2,r$=-2,i$=-2,o$=1,a$=1,c$=1,l$=2,u$=1,d$=-2,h$=-1,f$=-3,m$=-3,p$=-3,g$=-3,y$=-3,v$=-2,_$=2,w$=2,E$=2,T$=2,I$=2,x$=2,b$=-2,S$=-2,k$=2,A$=-1,N$=-3,P$=-3,C$=-2,R$=-2,D$=-2,j$=-2,O$=2,V$=-2,M$=-2,L$=-2,F$=-3,z$=-3,U$=-3,B$=-3,$$=-3,q$=-3,W$=-3,G$=-3,H$=-2,K$=-2,Q$=-2,Y$=-2,X$=-2,J$=-2,Z$=-2,eq=-2,tq=-2,nq=-2,sq=-2,rq=-2,iq=-1,oq=-1,aq=-3,cq=-3,lq=-1,uq=-2,dq=-1,hq=-1,fq=-1,mq=-2,pq=2,gq=-5,yq=1,vq=-1,_q=-1,wq=-2,Eq=-2,Tq=2,Iq=-1,xq=-1,bq=-2,Sq=-2,kq=-2,Aq=-3,Nq=-3,Pq=-3,Cq=-3,Rq=-2,Dq=-4,jq=-4,Oq=-2,Vq=-2,Mq=-2,Lq=2,Fq=2,zq=-2,Uq=-1,Bq=2,$q=3,qq=-3,Wq=-2,Gq=-2,Hq=-3,Kq=-1,Qq=2,Yq=3,Xq=-2,Jq=-2,Zq=2,e8=-2,t8=-3,n8=-3,s8=-3,r8=-3,i8=-3,o8=-3,a8=-3,c8=-3,l8=1,u8=2,d8=2,h8=-2,f8=-2,m8=-3,p8=-3,g8=-3,y8=2,v8=2,_8=-2,w8=-1,E8=-1,T8=-1,I8=-2,x8=-2,b8=-2,S8=-2,k8=-2,A8=-2,N8=-2,P8=-3,C8=-3,R8=2,D8=-2,j8=-2,O8=-2,V8=-2,M8=-2,L8=-2,F8=-2,z8=-2,U8=-2,B8=-2,$8=-2,q8=-2,W8=-1,G8=-1,H8=3,K8=3,Q8=3,Y8=3,X8=3,J8=3,Z8=3,eW=3,tW=-1,nW=-1,sW=-1,rW=-1,iW=-1,oW=-2,aW=-2,cW=-2,lW=-2,uW=-2,dW=-2,hW=-2,fW=-2,mW=-2,pW=-2,gW=-2,yW=-2,vW=-2,_W=-2,wW=-2,EW=-3,TW=-3,IW=-3,xW=-3,bW=-2,SW=-2,kW=-2,AW=-2,NW=-2,PW=-2,CW=-2,RW=-2,DW=-3,jW=-2,OW=-2,VW=-2,MW=-2,LW=-2,FW=-2,zW=-2,UW=-2,BW=-2,$W=2,qW=1,WW=2,GW=2,HW=-3,KW=-3,QW=-3,YW=-3,XW=-3,JW=-3,ZW=-3,e7=-3,t7=-3,n7=-3,s7=-3,r7=-3,i7=-1,o7=-2,a7=-2,c7=-2,l7=-2,u7=-2,d7=-2,h7=-2,f7=2,m7=-2,p7=-1,g7=-1,y7=-1,v7=-2,_7=-2,w7=-2,E7=-2,T7=-2,I7=3,x7=2,b7=2,S7=1,k7=-4,A7=-4,N7=-3,P7=-3,C7=-1,R7=-2,D7=2,j7=-1,O7=2,V7=-3,M7=-3,L7=-3,F7=-2,z7=-2,U7=-2,B7=-2,$7=-2,q7=-2,W7=-1,G7=-2,H7=-2,K7=-2,Q7=-2,Y7=-2,X7=-1,J7=-1,Z7=-1,eG=-2,tG=-2,nG=-2,sG=-2,rG=-2,iG=-2,oG=-2,aG=-2,cG=-2,lG=-2,uG=-2,dG=-2,hG=-2,fG=-2,mG=-3,pG=-2,gG=-1,yG=-1,vG=-1,_G=-1,wG=2,EG=-2,TG=-2,IG=-2,xG=-2,bG=-2,SG=-1,kG=-2,AG=-2,NG=-2,PG=-2,CG=-2,RG=-2,DG=-2,jG=-2,OG=-1,VG=-1,MG=-2,LG=-2,FG=-1,zG=-1,UG=-1,BG=-1,$G=-3,qG=-3,WG=-3,GG=-3,HG=-2,KG=-2,QG=-2,YG=-2,XG=-2,JG=-2,ZG=-2,eH=-2,tH=-2,nH=-2,sH=-2,rH=-2,iH=-2,oH=-2,aH=-2,cH=-2,lH=-2,uH=-2,dH=-2,hH=-2,fH=-2,mH=-2,pH=-2,gH=-2,yH=-2,vH=-2,_H=-2,wH=-2,EH=-2,TH=-2,IH=-2,xH=-2,bH=-2,SH=-2,kH=-2,AH=-2,NH=-2,PH=-2,CH=-2,RH=-2,DH=-2,jH=-2,OH=-2,VH=2,MH=-2,LH=-2,FH=-2,zH=-2,UH=-2,BH=-2,$H=-2,qH=-2,WH=-2,GH=-2,HH=-2,KH=-2,QH=-3,YH=-3,XH=-2,JH=-2,ZH=-2,eK=-2,tK=-2,nK=-1,sK=-1,rK=-2,iK=-2,oK=-2,aK=2,cK=2,lK=2,uK=2,dK=2,hK=-2,fK=-2,mK=-1,pK=-1,gK=-1,yK=-1,vK=-1,_K=-3,wK=-3,EK=-2,TK=-2,IK=-2,xK=-2,bK=-2,SK=-1,kK=-1,AK=-1,NK=-2,PK=-2,CK=-2,RK=-3,DK=-2,jK=1,OK=1,VK=-2,MK=-2,LK=-1,FK=-1,zK=-2,UK=-2,BK=-2,$K=-2,qK=-2,WK=-2,GK=-2,HK=-2,KK=-3,QK=-3,YK=-1,XK=-2,JK=-1,ZK=-2,eQ=-2,tQ=-2,nQ=2,sQ=-3,rQ=-2,iQ=2,oQ=2,aQ=2,cQ=1,lQ=4,uQ=-2,dQ=-2,hQ=2,fQ=2,mQ=2,pQ=2,gQ=3,yQ=3,vQ=2,_Q=2,wQ=-2,EQ=-2,TQ=-2,IQ=-2,xQ=-2,bQ=-3,SQ=-2,kQ=1,AQ=-2,NQ=2,PQ=2,CQ=2,RQ=-1,DQ=-1,jQ=2,OQ=2,VQ=2,MQ=2,LQ=2,FQ=2,zQ=2,UQ=2,BQ=2,$Q=2,qQ=-2,WQ=-2,GQ=2,HQ=1,KQ=1,QQ=1,YQ=3,XQ=2,JQ=2,ZQ=2,eY=2,tY=2,nY=2,sY=2,rY=2,iY=2,oY=-2,aY=-2,cY=-2,lY=-2,uY=-2,dY=3,hY=-2,fY=-2,mY=-2,pY=1,gY=1,yY=1,vY=2,_Y=3,wY=3,EY=1,TY=2,IY=-1,xY=-2,bY=-1,SY=-1,kY=-2,AY=-2,NY=-2,PY=-1,CY=-1,RY=2,DY=2,jY=2,OY=3,VY=4,MY=-1,LY=-1,FY=-1,zY=-1,UY=-1,BY=2,$Y=2,qY=-3,WY=-1,GY=-3,HY=-2,KY=-2,QY=-2,YY=-2,XY=-2,JY=-2,ZY=-2,eX=-2,tX=-2,nX=-2,sX=-2,rX=-2,iX=3,oX=3,aX=3,cX=3,lX=3,uX=3,dX=-1,hX=-2,fX=-1,mX=2,pX=-1,gX=-1,yX=-1,vX=-2,_X=3,wX=3,EX=3,TX=2,IX=2,xX=2,bX=2,SX=1,kX=1,AX=-2,NX=-2,PX=-2,CX=-2,RX=2,DX=-2,jX=-2,OX=-2,VX=-2,MX=1,LX=1,FX=-1,zX=-1,UX=-1,BX=-1,$X=3,qX=1,WX=-2,GX=-2,HX=4,KX=3,QX=3,YX=4,XX=4,JX=-2,ZX=-3,eJ=-3,tJ=-3,nJ=-2,sJ=-2,rJ=-2,iJ=-2,oJ=-2,aJ=-2,cJ=-2,lJ=2,uJ=2,dJ=1,hJ=3,fJ=-3,mJ=-3,pJ=-3,gJ=-3,yJ=-2,vJ=-1,_J=-2,wJ=-3,EJ=-3,TJ=1,IJ=-2,xJ=2,bJ=3,SJ=4,kJ=-1,AJ=3,NJ=3,PJ=3,CJ=3,RJ=3,DJ=-2,jJ=-2,OJ=-3,VJ=-3,MJ=-3,LJ=-2,FJ=-2,zJ=-2,UJ=-2,BJ=2,$J=2,qJ=2,WJ=2,GJ=2,HJ=2,KJ=2,QJ=2,YJ=2,XJ=2,JJ=2,ZJ=2,eZ=2,tZ=2,nZ=2,sZ=2,rZ=-2,iZ=-2,oZ=-2,aZ=-2,cZ=2,lZ=2,uZ=-2,dZ=-2,hZ=1,fZ=-3,mZ=-3,pZ=2,gZ=2,yZ=2,vZ=2,_Z=-2,wZ=-3,EZ=-2,TZ=-1,IZ=-2,xZ=2,bZ=-2,SZ=3,kZ=-2,AZ=-2,NZ=-2,PZ=1,CZ=1,RZ=-2,DZ=-2,jZ=2,OZ=-2,VZ=-3,MZ=2,LZ=2,FZ=-2,zZ=-1,UZ=-2,BZ=-2,$Z=-2,qZ=-2,WZ=2,GZ=2,HZ=2,KZ=-2,QZ=-2,YZ=-2,XZ=-1,JZ=-2,ZZ=-2,eee=-1,tee=-2,nee=-2,see=1,ree=-1,iee=-2,oee=-1,aee=1,cee=1,lee=-1,uee=-1,dee=2,hee=2,fee=2,mee=-3,pee=-1,gee=-4,yee=-4,vee=-4,_ee=-4,wee=-4,Eee=-4,Tee=-2,Iee=1,xee=2,bee=2,See=-3,kee=1,Aee=1,Nee=2,Pee=2,Cee=2,Ree=-2,Dee=-2,jee=-3,Oee=-2,Vee=2,Mee=-1,Lee=-2,Fee=-2,zee=-2,Uee=-2,Bee=-2,$ee=-2,qee=3,Wee=-4,Gee=-4,Hee=-4,Kee=-4,Qee=-4,Yee=-4,Xee=-4,Jee=-4,Zee=-4,ete=-3,tte=-4,nte=-4,ste=2,rte=2,ite=2,ote=2,ate=-2,cte=4,lte=-1,ute=-1,dte=2,hte=4,fte=4,mte=-3,pte=-2,gte=-2,yte=-2,vte=2,_te=2,wte=2,Ete=2,Tte=3,Ite=3,xte=3,bte=-1,Ste=3,kte=2,Ate=2,Nte=3,Pte=-2,Cte=-1,Rte=-2,Dte=2,jte=3,Ote=3,Vte=3,Mte=3,Lte=3,Fte=-1,zte=-2,Ute=2,Bte=2,$te=-2,qte=1,Wte=-3,Gte=4,Hte=2,Kte=3,Qte=3,Yte=1,Xte=3,Jte=3,Zte=-2,ene=-2,tne=1,nne=2,sne=3,rne=3,ine=1,one=1,ane=1,cne=1,lne=3,une=2,dne=-2,hne=-1,fne=-2,mne=3,pne=3,gne=3,yne=3,vne=-3,_ne=-2,wne=-3,Ene=-3,Tne=-3,Ine=-3,xne=1,bne=1,Sne=1,kne=2,Ane=1,Nne=-1,Pne=-2,Cne=-2,Rne=-2,Dne=2,jne=-2,One=-2,Vne=-2,Mne=-2,Lne=-2,Fne=1,zne=2,Une=2,Bne=-3,$ne=1,qne=-3,Wne=-3,Gne=-2,Hne=-2,Kne=-1,Qne=2,Yne=-1,Xne=3,Jne=3,Zne=3,ese=2,tse=2,nse=3,sse=1,rse=3,ise=-2,ose=-2,ase=3,cse=3,lse=3,use=-3,dse=-3,hse=-3,fse=-3,mse=-3,pse=-1,gse=2,yse=-2,vse=2,_se=-2,wse=-2,Ese=-2,Tse=-2,Ise=2,xse=2,bse=2,Sse=-2,kse=-2,Ase=-2,Nse=-2,Pse=-2,Cse=-2,Rse=-3,Dse=-3,jse=-3,Ose=-3,Vse=-3,Mse=-3,Lse=-3,Fse=-1,zse=-2,Use=1,Bse=-1,$se=-2,qse=-3,Wse=-2,Gse=2,Hse=-3,Kse=-3,Qse=3,Yse=-2,Xse=3,Jse=2,Zse=4,ere=-2,tre=2,nre=-4,sre=-2,rre=2,ire=2,ore=2,are=-2,cre=2,lre=2,ure=2,dre=3,hre=-2,fre=-2,mre=-1,pre=-1,gre=-3,yre=-1,vre=-1,_re=2,wre=2,Ere=-2,Tre=-2,Ire=-2,xre=-1,bre=-2,Sre=-2,kre=-2,Are=-2,Nre=2,Pre=2,Cre=2,Rre=2,Dre=2,jre=2,Ore=2,Vre=-2,Mre=-2,Lre=-2,Fre=2,zre=2,Ure=2,Bre=-2,$re=-2,qre=2,Wre=2,Gre=-3,Hre=-3,Kre=-3,Qre=-3,Yre=-3,Xre=-2,Jre=-2,Zre=-2,eie=2,tie=1,nie=2,sie=2,rie=1,iie=-2,oie=3,aie=-3,cie=-3,lie=2,uie=2,die=2,hie=2,fie=-2,mie=5,pie=-2,gie=-2,yie=-2,vie=-2,_ie=-3,wie=-3,Eie=-3,Tie=-3,Iie=-3,xie=-3,bie=-3,Sie=-2,kie=-2,Aie=-1,Nie=-2,Pie=-1,Cie=-2,Rie=-3,Die=-3,jie=-3,Oie=-2,Vie=-2,Mie=-2,Lie=-2,Fie=2,zie=-3,Uie=-1,Bie=2,$ie=1,qie=-2,Wie=-2,Gie=-2,Hie=-2,Kie=-2,Qie=-2,Yie=-3,Xie=-3,Jie=-2,Zie=-2,eoe=-2,toe=-2,noe=-2,soe=-2,roe=2,ioe=2,ooe=-1,aoe=-1,coe=-1,loe=-1,uoe=-2,doe=-2,hoe=3,foe=3,moe=3,poe=3,goe=-2,yoe=-2,voe=-2,_oe=-2,woe=2,Eoe=2,Toe=2,Ioe=2,xoe=2,boe=-2,Soe=-2,koe=-2,Aoe=-2,Noe=-2,Poe=-2,Coe=-2,Roe=-2,Doe=-2,joe=-2,Ooe=-2,Voe=-2,Moe=-2,Loe=-2,Foe=-2,zoe=-2,Uoe=-1,Boe=-2,$oe=-2,qoe=-2,Woe=-2,Goe=1,Hoe=1,Koe=-2,Qoe=2,Yoe=-2,Xoe=-2,Joe=-2,Zoe=-2,eae=-2,tae=-2,nae=-2,sae=-2,rae=-2,iae=-2,oae=-3,aae=-3,cae=-2,lae=-2,uae=-2,dae=-2,hae=-2,fae=-2,mae=-2,pae=-2,gae=-2,yae=-2,vae=2,_ae=2,wae=-2,Eae=-2,Tae=-2,Iae=-2,xae=-2,bae=-2,Sae=-2,kae=-2,Aae=-2,Nae=-2,Pae=-2,Cae=-2,Rae=-2,Dae=-2,jae=-2,Oae=-2,Vae=-2,Mae=2,Lae=-2,Fae=-2,zae=-2,Uae=-2,Bae=-2,$ae=-2,qae=-2,Wae=-2,Gae=-2,Hae=-1,Kae=-2,Qae=-2,Yae=-2,Xae=-2,Jae=-2,Zae=1,ece=1,tce=1,nce=2,sce=-2,rce=-2,ice=2,oce=-2,ace=-2,cce=-2,lce=-2,uce=-2,dce=-2,hce=-2,fce=-2,mce=-2,pce=2,gce=2,yce=2,vce=2,_ce=2,wce=3,Ece=-2,Tce=-2,Ice=-2,xce=-2,bce=-2,Sce=-2,kce=-2,Ace=2,Nce=2,Pce=2,Cce=1,Rce=1,Dce=2,jce=2,Oce=1,Vce=-2,Mce=-2,Lce=-2,Fce=-2,zce=-2,Uce=-2,Bce=2,$ce=-2,qce=-2,Wce=-2,Gce=-2,Hce=-2,Kce=-2,Qce=-2,Yce=2,Xce=1,Jce=-1,Zce=2,ele=1,tle=1,nle=2,sle=-3,rle=-1,ile=-1,ole=-1,ale=-2,cle=-2,lle=2,ule=2,dle=-2,hle=-2,fle=-2,mle=-1,ple=-1,gle=-3,yle=-3,vle=-3,_le=-3,wle=-1,Ele=-2,Tle=-4,Ile=-4,xle=-2,ble=2,Sle=-2,kle=-2,Ale=-2,Nle=-3,Ple=1,Cle=1,Rle=1,Dle=2,jle=1,Ole=2,Vle=2,Mle=2,Lle=2,Fle=3,zle=3,Ule=3,Ble=-2,$le=3,qle=3,Wle=-1,Gle=2,Hle=2,Kle=2,Qle=1,Yle=-3,Xle=-3,Jle=-2,Zle=-2,eue=-2,tue=-2,nue=-2,sue=-3,rue=-3,iue=-3,oue=-3,aue=2,cue=2,lue=2,uue=2,due=3,hue=-2,fue=-2,mue=-1,pue=-2,gue=-2,yue=-2,vue=-2,_ue=2,wue=-1,Eue=-1,Tue=1,Iue=1,xue=1,bue=1,Sue=1,kue=1,Aue=3,Nue=-2,Pue=-2,Cue=-1,Rue=1,Due=2,jue=-1,Oue=-1,Vue=-1,Mue=1,Lue=1,Fue=1,zue=-2,Uue=-2,Bue=-2,$ue=-2,que=-3,Wue=-3,Gue=-2,Hue=-2,Kue=-1,Que=4,Yue=1,Xue=2,Jue=2,Zue=2,ede=2,tde=2,nde=2,sde=2,rde=-1,ide=-1,ode=-1,ade=-1,cde=-2,lde=2,ude=-2,dde=4,hde=4,fde=-3,mde=-3,pde=-3,gde=-3,yde=-3,vde=-2,_de=-2,wde=-2,Ede=-2,Tde=-2,Ide=3,xde=4,bde=4,Sde=4,kde=-2,Ade=-2,Nde=-1,Pde=3,Cde=-1,Rde=-1,Dde=-1,jde=-1,Ode=3,Vde=3,Mde=-3,Lde=-3,Fde=-3,zde=-3,Ude=-3,Bde=-3,$de=-3,qde=-2,Wde=3,Gde=3,Hde=3,Kde=3,Qde=3,Yde=3,Xde=2,Jde=-1,Zde=3,ehe=3,the=3,nhe=3,she=3,rhe=3,ihe=-3,ohe=-2,ahe=-3,che=-3,lhe=-1,uhe=-1,dhe=-1,hhe=2,fhe=-2,mhe=-3,phe=-3,ghe=-3,yhe=-3,vhe=3,_he=-2,whe=-2,Ehe=-2,The=-1,Ihe=-1,xhe=-1,bhe=-1,She=-3,khe=3,Ahe=3,Nhe=3,Phe=4,Che=4,Rhe=1,Dhe=1,jhe=2,Ohe=2,Vhe=-2,Mhe=3,Lhe=-3,Fhe=1,zhe=-2,Uhe=1,Bhe=-2,$he=-2,qhe=-2,Whe=-2,Ghe=2,Hhe=3,Khe=3,Qhe=-2,Yhe=-2,Xhe=2,Jhe=2,Zhe=-2,efe=4,tfe=3,nfe=3,sfe=3,rfe=-2,ife=-2,ofe=-2,afe=-2,cfe=-3,lfe=-2,ufe=-1,dfe=-1,hfe=-2,ffe=-2,mfe=-2,pfe=-2,gfe=-2,yfe=-2,vfe=-2,_fe=-3,wfe=-3,Efe=-2,Tfe=-2,Ife=-2,xfe=-2,bfe=-2,Sfe=-2,kfe=-2,Afe=-3,Nfe=-3,Pfe=-3,Cfe=-3,Rfe=-2,Dfe=-2,jfe=-2,Ofe=-2,Vfe=-3,Mfe=-1,Lfe=-2,Ffe=-2,zfe=-2,Ufe=-2,Bfe=-2,$fe=-2,qfe=-2,Wfe=-2,Gfe=-2,Hfe=-2,Kfe=-2,Qfe=-2,Yfe=-2,Xfe=-2,Jfe=-2,Zfe=-2,eme=-2,tme=-2,nme=-2,sme=-2,rme=-2,ime=-2,ome=-2,ame=-2,cme=-2,lme=-2,ume=-2,dme=-2,hme=-2,fme=-2,mme=-2,pme=-2,gme=-2,yme=2,vme=2,_me=2,wme=2,Eme=-2,Tme=-2,Ime=-2,xme=-2,bme=-2,Sme=-1,kme=-1,Ame=-1,Nme=-1,Pme=-3,Cme=-5,Rme=-5,Dme=1,jme=2,Ome=2,Vme=1,Mme=-2,Lme=-2,Fme=-2,zme=-2,Ume=-2,Bme=-2,$me=-2,qme=-2,Wme=-2,Gme=-3,Hme=-3,Kme=-2,Qme=-2,Yme=-1,Xme=-2,Jme=-2,Zme=-2,epe=-3,tpe=1,npe=-2,spe=-2,rpe=-2,ipe=-2,ope=-2,ape=-2,cpe=-2,lpe=-1,upe=-2,dpe=-2,hpe=3,fpe=2,mpe=-5,ppe=-5,gpe=-1,ype=2,vpe=2,_pe=-1,wpe=-2,Epe=-2,Tpe=-2,Ipe=2,xpe=2,bpe=-2,Spe=2,kpe=-1,Ape=2,Npe=-3,Ppe=-2,Cpe=-2,Rpe=-3,Dpe=-2,jpe=-2,Ope=2,Vpe=-2,Mpe=-2,Lpe=-2,Fpe=-2,zpe=-2,Upe=-2,Bpe=-2,$pe=-2,qpe=-2,Wpe=-2,Gpe=-2,Hpe=-2,Kpe=-2,Qpe=-2,Ype=-2,Xpe=-2,Jpe=-2,Zpe=-2,ege=-2,tge=-2,nge=-2,sge=-1,rge=2,ige=3,oge=-2,age=2,cge=2,lge=-2,uge=-2,dge=-2,hge=-2,fge=2,mge=2,pge=-2,gge=-2,yge=-2,vge=-2,_ge=-2,wge=-2,Ege=-2,Tge=-2,Ige=-2,xge=-2,bge=-2,Sge=-2,kge=-3,Age=-3,Nge=-3,Pge=2,Cge=5,Rge=4,Dge=-1,jge=-1,Oge=-2,Vge=-2,Mge=-2,Lge=-2,Fge=-2,zge=-2,Uge=-2,Bge=-2,$ge=-2,qge=-2,Wge=-1,Gge=-2,Hge=-2,Kge=-2,Qge=-2,Yge=-2,Xge=-2,Jge=-2,Zge=-1,eye=-3,tye=-1,nye=-2,sye=-2,rye=-2,iye=-3,oye=-3,aye=-3,cye=3,lye=-1,uye=2,dye=2,hye=2,fye=2,mye=-1,pye=1,gye=2,yye=-1,vye=-1,_ye=-2,wye=-1,Eye=2,Tye=2,Iye=2,xye=-2,bye=-2,Sye=-2,kye=-2,Aye=-2,Nye=-1,Pye=3,Cye=2,Rye=3,Dye=3,jye=2,Oye=-2,Vye=-3,Mye=-2,Lye=-2,Fye=-2,zye=-2,Uye=-2,Bye=-2,$ye=-2,qye=-2,Wye=-2,Gye=-3,Hye=-2,Kye=-2,Qye=-2,Yye=-2,Xye=2,Jye=-2,Zye=2,eve=-1,tve=-2,nve=-2,sve=-2,rve=-4,ive=-4,ove=-3,ave=-2,cve=-1,lve=-2,uve=-3,dve=-3,hve=-3,fve=-3,mve=2,pve=3,gve=1,yve=3,vve=3,_ve=3,wve=-2,Eve=2,Tve=-2,Ive=-2,xve=-2,bve=-2,Sve=-2,kve=2,Ave=2,Nve=2,Pve=-2,Cve=-2,Rve=-2,Dve=-2,jve=-2,Ove=-2,Vve=-2,Mve=-2,Lve=-2,Fve=-2,zve=-2,Uve=3,Bve=3,$ve=2,qve=2,Wve=-2,Gve=-1,Hve=-1,Kve=-1,Qve=-1,Yve=-1,Xve=2,Jve=-2,Zve=3,e_e=3,t_e=3,n_e=3,s_e=1,r_e=1,i_e=1,o_e=-2,a_e=-2,c_e=-2,l_e=1,u_e=-1,d_e=-2,h_e=-1,f_e=-1,m_e=-1,p_e=1,g_e=-1,y_e=-1,v_e=-1,__e=-1,w_e=-5,E_e=-2,T_e=-2,I_e=-2,x_e=2,b_e=2,S_e=-2,k_e=-2,A_e=2,N_e=2,P_e=-2,C_e=2,R_e=2,D_e=-1,j_e=-1,O_e=2,V_e=1,M_e=1,L_e=1,F_e=1,z_e=1,U_e=1,B_e=1,$_e=1,q_e=-2,W_e=-1,G_e=-2,H_e=-1,K_e=-1,Q_e=1,Y_e=1,X_e=3,J_e=3,Z_e=1,ewe=1,twe=-2,nwe=-2,swe=-2,rwe=-2,iwe=2,owe=2,awe=-1,cwe=-1,lwe=-1,uwe=-1,dwe=2,hwe=-3,fwe=-2,mwe=-2,pwe=-2,gwe=-2,ywe=-2,vwe=-2,_we=1,wwe=1,Ewe=2,Twe=-1,Iwe=-2,xwe=-2,bwe=2,Swe=2,kwe=-2,Awe=-1,Nwe=-1,Pwe=-3,Cwe=-3,Rwe=-3,Dwe=-2,jwe=-2,Owe=-1,Vwe=-3,Mwe=-3,Lwe=-3,Fwe=-3,zwe=-4,Uwe=-4,Bwe=-4,$we=2,qwe=2,Wwe=2,Gwe=4,Hwe=-2,Kwe=2,Qwe=1,Ywe=1,Xwe=1,Jwe=1,Zwe=1,e2e=1,t2e=1,n2e=2,s2e=-2,r2e=-2,i2e=-2,o2e=-2,a2e=-2,c2e=2,l2e=2,u2e=2,d2e=2,h2e=2,f2e=1,m2e=1,p2e=1,g2e=2,y2e=-2,v2e=-2,_2e=-2,w2e=-2,E2e=-2,T2e=-2,I2e=-2,x2e=-2,b2e=-2,S2e=1,k2e=-1,A2e=-1,N2e=-1,P2e=-2,C2e=-1,R2e=4,D2e=4,j2e=4,O2e=4,V2e=2,M2e=-1,L2e=2,F2e=2,z2e=2,U2e=2,B2e=1,$2e=2,q2e=1,W2e=2,G2e=2,H2e=2,K2e=-2,Q2e=-2,Y2e=-2,X2e=-2,J2e=-2,Z2e=-2,e0e=-2,t0e=-2,n0e=-1,s0e=-2,r0e=-2,i0e=2,o0e=2,a0e=2,c0e=-2,l0e=-1,u0e=-1,d0e=-1,h0e=-1,f0e=2,m0e=2,p0e=2,g0e=2,y0e=2,v0e=2,_0e=2,w0e=2,E0e=2,T0e=1,I0e=2,x0e=2,b0e=2,S0e=-2,k0e=1,A0e=1,N0e=1,P0e=1,C0e=-2,R0e=-2,D0e=-2,j0e=-2,O0e=-1,V0e=-2,M0e=-1,L0e=-2,F0e=-2,z0e=-1,U0e=-2,B0e=-2,$0e=2,q0e=2,W0e=2,G0e=-2,H0e=2,K0e=2,Q0e=2,Y0e=2,X0e=2,J0e=2,Z0e=-3,e1e=-1,t1e=-1,n1e=2,s1e=2,r1e=2,i1e=3,o1e=3,a1e=-2,c1e=-2,l1e=1,u1e=1,d1e=-2,h1e=-2,f1e=-2,m1e=3,p1e=-2,g1e=-2,y1e=-2,v1e=-2,_1e=-2,w1e=2,E1e=4,T1e=4,I1e=4,x1e=2,b1e=2,S1e=2,k1e=1,A1e=4,N1e=4,P1e=4,C1e=-3,R1e=-2,D1e=-2,j1e=-2,O1e=-2,V1e=-2,M1e=-2,L1e=-2,F1e=-2,z1e=-2,U1e=-2,B1e=1,$1e=1,q1e=2,W1e=1,G1e=1,H1e=2,K1e=2,Q1e=2,Y1e=2,X1e=2,J1e=-1,Z1e=-2,eEe=2,tEe=-2,nEe=-2,sEe=2,rEe=2,iEe=1,oEe=-2,aEe=-2,cEe=-3,lEe=-3,uEe=-3,dEe=-2,hEe=-2,fEe=-2,mEe=-2,pEe=-2,gEe=-2,yEe=-2,vEe=-2,_Ee=-2,wEe=3,EEe=-2,TEe=-2,IEe=-2,xEe=-2,bEe=-2,SEe=-2,kEe=-2,AEe=-3,NEe=-4,PEe=2,CEe=2,REe=2,DEe=2,jEe=2,OEe=-2,VEe=-2,MEe=-1,LEe=-3,FEe=-3,zEe=-2,UEe=-2,BEe=-2,$Ee=-2,qEe=2,WEe=1,GEe=1,HEe=-2,KEe=-2,QEe=-2,YEe=-2,XEe=3,JEe=-2,ZEe=-2,eTe=-2,tTe=-2,nTe=1,sTe=1,rTe=1,iTe=-2,oTe=-4,aTe=-4,cTe=-3,lTe=-2,uTe=-2,dTe=-2,hTe=-2,fTe=-2,mTe=-1,pTe=-2,gTe=-2,yTe=-4,vTe=-1,_Te=-2,wTe=-2,ETe=-2,TTe=1,ITe=1,xTe=-1,bTe=-1,STe=1,kTe=-2,ATe=2,NTe=2,PTe=2,CTe=2,RTe=-3,DTe=-2,jTe=-2,OTe=-2,VTe=-2,MTe=-2,LTe=-2,FTe=-2,zTe=-2,UTe=-2,BTe=-2,$Te=-2,qTe=-2,WTe=-3,GTe=-3,HTe=-3,KTe=-2,QTe=2,YTe=2,XTe=2,JTe=-1,ZTe=-2,eIe=-2,tIe=-1,nIe=-5,sIe=1,rIe=2,iIe=2,oIe=-2,aIe=2,cIe=2,lIe=2,uIe=2,dIe=-2,hIe=-2,fIe=-2,mIe=-2,pIe=-2,gIe=-1,yIe=-2,vIe=-2,_Ie=-2,wIe=-2,EIe=-2,TIe=-2,IIe=-2,xIe=-2,bIe=1,SIe=-1,kIe=2,AIe=2,NIe=2,PIe=2,CIe=2,RIe=2,DIe=1,jIe=1,OIe=1,VIe=1,MIe=1,LIe=1,FIe=-2,zIe=3,UIe=3,BIe=3,$Ie=2,qIe=-1,WIe=-2,GIe=-2,HIe=-1,KIe=1,QIe=-2,YIe=-3,XIe=-3,JIe=-2,ZIe=1,exe=3,txe=3,nxe=3,sxe=2,rxe=-2,ixe=1,oxe=2,axe=-2,cxe=-2,lxe=3,uxe=-2,dxe=-2,hxe=2,fxe=2,mxe=-2,pxe=-2,gxe=-2,yxe=-2,vxe=-1,_xe=-2,wxe=-2,Exe=2,Txe=-2,Ixe=-2,xxe=-2,bxe=-2,Sxe=2,kxe=-2,Axe=-2,Nxe=-2,Pxe=3,Cxe=-2,Rxe=-2,Dxe=-2,jxe=-2,Oxe=2,Vxe=-2,Mxe=-2,Lxe=-2,Fxe=-2,zxe=-2,Uxe=-1,Bxe=1,$xe=1,qxe=1,Wxe=2,Gxe=-2,Hxe=-2,Kxe=-2,Qxe=-2,Yxe=-2,Xxe=-2,Jxe=-2,Zxe=-2,ebe=-2,tbe=-1,nbe=-1,sbe=-1,rbe=-1,ibe=2,obe=1,abe=-1,cbe=-1,lbe=-2,ube=2,dbe=2,hbe=2,fbe=2,mbe=2,pbe=2,gbe=-1,ybe=-2,vbe=-2,_be=-2,wbe=-2,Ebe=-1,Tbe=-2,Ibe=-1,xbe=2,bbe=2,Sbe=2,kbe=-1,Abe=-2,Nbe=-2,Pbe=-2,Cbe=-2,Rbe=-2,Dbe=-2,jbe=-2,Obe=4,Vbe=-2,Mbe=-3,Lbe=-2,Fbe=2,zbe=-2,Ube=1,Bbe=1,$be=-2,qbe=3,Wbe=3,Gbe=3,Hbe=3,Kbe=2,Qbe=3,Ybe=3,Xbe=-3,Jbe=-3,Zbe=-2,eSe=-2,tSe=-2,nSe=-2,sSe=-2,rSe=-2,iSe=-2,oSe=-2,aSe=-2,cSe=-2,lSe=-2,uSe=-2,dSe=-2,hSe=-2,fSe=2,mSe=2,pSe=-2,gSe=-2,ySe=-2,vSe=2,_Se=5,wSe=2,ESe=2,TSe=2,ISe=1,xSe=1,bSe=1,SSe=2,kSe=2,ASe=4,NSe=2,PSe=2,CSe=2,RSe=-1,DSe=-1,jSe=-1,OSe=-1,VSe=-1,MSe=-1,LSe=-2,FSe=1,zSe=2,USe=2,BSe=-2,$Se=-2,qSe=-2,WSe=2,GSe=3,HSe=3,KSe=2,QSe=2,YSe=-3,XSe=-3,JSe=-3,ZSe=2,eke=2,tke=-2,nke=-2,ske=2,rke=-2,ike=-2,oke=-2,ake=-2,cke=-2,lke=2,uke=2,dke=-2,hke=-1,fke=-3,mke=-3,pke=4,gke=4,yke=-3,vke=-3,_ke=-2,wke=-2,Eke=-3,Tke=-3,Ike=-3,xke=2,bke=2,Ske=2,kke=-2,Ake=2,Nke=-2,Pke=-2,Cke=-2,Rke=-2,Dke=-2,jke=-2,Oke=-2,Vke=5,Mke=-2,Lke=-2,Fke=-2,zke=-2,Uke=-2,Bke=-2,$ke=-2,qke=-2,Wke=2,Gke=2,Hke=-2,Kke=2,Qke=2,Yke=-2,Xke=-4,Jke=-4,Zke=-4,eAe=-4,tAe=-2,nAe=-2,sAe=-2,rAe=-2,iAe=-2,oAe=-2,aAe=-3,cAe=-2,lAe=-2,uAe=-2,dAe=2,hAe=-2,fAe=-2,mAe=-2,pAe=-2,gAe=-1,yAe=-2,vAe=-1,_Ae=-3,wAe=-3,EAe=-2,TAe=-3,IAe=-3,xAe=2,bAe=2,SAe=-2,kAe=-2,AAe=-2,NAe=-2,PAe=-2,CAe=2,RAe=-2,DAe=-2,jAe=4,OAe=4,VAe=-2,MAe=-2,LAe=-2,FAe=-2,zAe=-2,UAe=1,BAe=2,$Ae=1,qAe=-2,WAe=-5,GAe=-3,HAe=-3,KAe=-3,QAe=-3,YAe=-3,XAe=2,JAe=-2,ZAe=-3,eNe=-3,tNe=-2,nNe=-2,sNe=-2,rNe=-2,iNe=-2,oNe=-2,aNe=-1,cNe=-2,lNe=-2,uNe=-2,dNe=-1,hNe=-1,fNe=2,mNe=-1,pNe=-1,gNe=-2,yNe=-2,vNe=-1,_Ne=-1,wNe=-1,ENe=-1,TNe=-2,INe=-1,xNe=-1,bNe=-1,SNe=-1,kNe=-2,ANe=-2,NNe=-2,PNe=-2,CNe=-2,RNe=-2,DNe=-2,jNe=-2,ONe=-2,VNe=-2,MNe=-2,LNe=-1,FNe=-2,zNe=-1,UNe=2,BNe=-2,$Ne=-2,qNe=-2,WNe=-2,GNe=-2,HNe=-2,KNe=-2,QNe=-3,YNe=-2,XNe=-2,JNe=-2,ZNe=-2,ePe=-3,tPe=-2,nPe=-2,sPe=-2,rPe=-2,iPe=1,oPe=-2,aPe=-2,cPe=-2,lPe=-2,uPe=-2,dPe=-2,hPe=1,fPe=-2,mPe=-1,pPe=-2,gPe=-2,yPe=1,vPe=-2,_Pe=-2,wPe=-2,EPe=-2,TPe=-2,IPe=-2,xPe=1,bPe=-2,SPe=-2,kPe=-2,APe=-2,NPe=-2,PPe=-2,CPe=2,RPe=-1,DPe=-1,jPe=-2,OPe=-2,VPe=-2,MPe=2,LPe=-2,FPe=-2,zPe=-2,UPe=-1,BPe=2,$Pe=-2,qPe=-2,WPe=-2,GPe=2,HPe=-3,KPe=-2,QPe=-2,YPe=-2,XPe=-2,JPe=-1,ZPe=2,eCe=2,tCe=-2,nCe=-2,sCe=-2,rCe=1,iCe=1,oCe=1,aCe=1,cCe=-2,lCe=-1,uCe=-1,dCe=1,hCe=-2,fCe=-2,mCe=3,pCe=-2,gCe=-3,yCe=-3,vCe=-3,_Ce=-3,wCe=-3,ECe=-3,TCe=-3,ICe=3,xCe=3,bCe=3,SCe=3,kCe=3,ACe=3,NCe=-3,PCe=2,CCe=2,RCe=2,DCe=2,jCe=-2,OCe=-2,VCe=-2,MCe=-2,LCe=-2,FCe=-2,zCe=-3,UCe=-3,BCe=-3,$Ce=2,qCe=-2,WCe=1,GCe=3,HCe=1,KCe=1,QCe=3,YCe=1,XCe=-3,JCe=3,ZCe=2,eRe=-1,tRe=-3,nRe=-3,sRe=-3,rRe=-3,iRe=-2,oRe=-2,aRe=-2,cRe=-2,lRe=-3,uRe=1,dRe=-2,hRe=-2,fRe=1,mRe=2,pRe=2,gRe=2,yRe=-2,vRe=-2,_Re=-3,wRe=-3,ERe=-2,TRe=-1,IRe=-2,xRe=-2,bRe=-1,SRe=-2,kRe=-2,ARe=-2,NRe=-2,PRe=3,CRe=2,RRe=2,DRe=-2,jRe=-2,ORe=-2,VRe=-2,MRe=2,LRe=2,FRe=2,zRe=1,URe=-3,BRe=-4,$Re=-2,qRe=-1,WRe=2,GRe=4,HRe=4,KRe=4,QRe=4,YRe=3,XRe=1,JRe=1,ZRe=1,eDe=1,tDe=-3,nDe=2,sDe=-2,rDe=-3,iDe=3,oDe=4,aDe=4,cDe=3,lDe=3,uDe=4,dDe=4,hDe=-1,fDe=-3,mDe=-3,pDe=-3,gDe=-3,yDe=-3,vDe=-3,_De=-3,wDe=-3,EDe=-3,TDe=3,IDe=-3,xDe=2,bDe=-2,SDe=2,kDe=4,ADe=4,NDe=4,PDe=-3,CDe=-2,RDe=-2,DDe=-2,jDe=-2,ODe=-2,VDe=-2,MDe=-2,LDe=-2,FDe=-2,zDe=-4,UDe=-4,BDe=-4,$De=3,qDe=3,WDe=4,GDe=4,HDe=1,KDe=1,QDe=2,YDe=1,XDe=2,JDe=-2,ZDe=3,eje=-2,tje=-2,nje=2,sje={abandon:DO,abandoned:jO,abandons:OO,abducted:VO,abduction:MO,abductions:LO,abhor:FO,abhorred:zO,abhorrent:UO,abhors:BO,abilities:$O,ability:qO,aboard:WO,aborted:GO,aborts:HO,absentee:KO,absentees:QO,absolve:YO,absolved:XO,absolves:JO,absolving:ZO,absorbed:eV,abuse:tV,abused:nV,abuses:sV,abusing:rV,abusive:iV,accept:oV,acceptable:aV,acceptance:cV,accepted:lV,accepting:uV,accepts:dV,accessible:hV,accident:fV,accidental:mV,accidentally:pV,accidents:gV,acclaim:yV,acclaimed:vV,accolade:_V,accomplish:wV,accomplished:EV,accomplishes:TV,accomplishment:IV,accomplishments:xV,accusation:bV,accusations:SV,accuse:kV,accused:AV,accuses:NV,accusing:PV,ache:CV,achievable:RV,aching:DV,acquit:jV,acquits:OV,acquitted:VV,acquitting:MV,acrimonious:LV,active:FV,adequate:zV,admire:UV,admired:BV,admires:$V,admiring:qV,admit:WV,admits:GV,admitted:HV,admonish:KV,admonished:QV,adopt:YV,adopts:XV,adorable:JV,adoration:ZV,adore:eM,adored:tM,adores:nM,adoring:sM,adoringly:rM,advanced:iM,advantage:oM,advantageous:aM,advantageously:cM,advantages:lM,adventure:uM,adventures:dM,adventurous:hM,adversary:fM,advisable:mM,affected:pM,affection:gM,affectionate:yM,affectionateness:vM,afflicted:_M,affordable:wM,affronted:EM,aficionados:TM,afraid:IM,aggravate:xM,aggravated:bM,aggravates:SM,aggravating:kM,aggression:AM,aggressions:NM,aggressive:PM,aggressiveness:CM,aghast:RM,agog:DM,agonise:jM,agonised:OM,agonises:VM,agonising:MM,agonize:LM,agonized:FM,agonizes:zM,agonizing:UM,agree:BM,agreeable:$M,agreed:qM,agreement:WM,agrees:GM,alarm:HM,alarmed:KM,alarmist:QM,alarmists:YM,alas:XM,alert:JM,alienation:ZM,alive:eL,allegation:tL,allegations:nL,allergic:sL,allow:rL,ally:iL,alone:oL,altruistic:aL,amaze:cL,amazed:lL,amazes:uL,amazing:dL,ambitious:hL,ambivalent:fL,amicable:mL,amuse:pL,amused:gL,amusement:yL,amusements:vL,anger:_L,angered:wL,angers:EL,angry:TL,anguish:IL,anguished:xL,animosity:bL,annoy:SL,annoyance:kL,annoyed:AL,annoying:NL,annoys:PL,antagonistic:CL,anti:RL,anticipation:DL,anxiety:jL,anxious:OL,apathetic:VL,apathy:ML,apeshit:LL,apocalyptic:FL,apologise:zL,apologised:UL,apologises:BL,apologising:$L,apologize:qL,apologized:WL,apologizes:GL,apologizing:HL,apology:KL,appalled:QL,appalling:YL,appealing:XL,appease:JL,appeased:ZL,appeases:e4,appeasing:t4,applaud:n4,applauded:s4,applauding:r4,applauds:i4,applause:o4,appreciate:a4,appreciated:c4,appreciates:l4,appreciating:u4,appreciation:d4,apprehensive:h4,appropriate:f4,appropriately:m4,approval:p4,approved:g4,approves:y4,ardent:v4,arrest:_4,arrested:w4,arrests:E4,arrogant:T4,arsehole:I4,ashame:x4,ashamed:b4,ass:S4,assassination:k4,assassinations:A4,assault:N4,assaults:P4,asset:C4,assets:R4,assfucking:D4,asshole:j4,astonished:O4,astound:V4,astounded:M4,astounding:L4,astoundingly:F4,astounds:z4,atrocious:U4,atrocity:B4,attack:$4,attacked:q4,attacking:W4,attacks:G4,attract:H4,attracted:K4,attracting:Q4,attraction:Y4,attractions:X4,attractive:J4,attractively:Z4,attractiveness:eF,attracts:tF,audacious:nF,aura:sF,authority:rF,avenge:iF,avenged:oF,avenger:aF,avengers:cF,avenges:lF,avenging:uF,avert:dF,averted:hF,averts:fF,avid:mF,avoid:pF,avoided:gF,avoids:yF,await:-1,awaited:vF,awaits:_F,award:wF,awarded:EF,awards:TF,awesome:IF,awful:xF,awkward:bF,axe:SF,axed:kF,backed:AF,backing:NF,backs:PF,bad:CF,"bad luck":-2,badass:RF,badly:DF,badness:jF,bailout:OF,balanced:VF,bamboozle:MF,bamboozled:LF,bamboozles:FF,ban:zF,banish:UF,bankrupt:BF,bankruptcy:$F,bankster:qF,banned:WF,barbarian:GF,barbaric:HF,barbarous:KF,bargain:QF,barrier:YF,bastard:XF,bastards:JF,battle:ZF,battled:ez,battles:tz,battling:nz,beaten:sz,beatific:rz,beating:iz,beauties:oz,beautiful:az,beautifully:cz,beautify:lz,beauty:uz,befit:dz,befitting:hz,belittle:fz,belittled:mz,beloved:pz,benefactor:gz,benefactors:yz,benefit:vz,benefits:_z,benefitted:wz,benefitting:Ez,benevolent:Tz,bereave:Iz,bereaved:xz,bereaves:bz,bereaving:Sz,best:kz,"best damn":4,betray:Az,betrayal:Nz,betrayed:Pz,betraying:Cz,betrays:Rz,better:Dz,bias:jz,biased:Oz,big:Vz,bitch:Mz,bitches:Lz,bitter:Fz,bitterest:zz,bitterly:Uz,bizarre:Bz,blackmail:$z,blackmailed:qz,blackmailing:Wz,blackmails:Gz,blah:Hz,blame:Kz,blamed:Qz,blames:Yz,blaming:Xz,bless:Jz,blesses:Zz,blessing:e5,blessings:t5,blind:n5,bliss:s5,blissful:r5,blithe:i5,bloated:o5,block:a5,blockade:c5,blockbuster:l5,blocked:u5,blocking:d5,blocks:h5,bloody:f5,blurry:m5,boastful:p5,bold:g5,boldly:y5,bomb:v5,boost:_5,boosted:w5,boosting:E5,boosts:T5,bore:I5,bored:x5,boring:b5,bother:S5,bothered:k5,bothers:A5,bothersome:N5,boycott:P5,boycotted:C5,boycotting:R5,boycotts:D5,brainwashing:j5,brave:O5,braveness:V5,bravery:M5,bravura:L5,breach:F5,breached:z5,breaches:U5,breaching:B5,breakthrough:$5,breathtaking:q5,bribe:W5,bribed:G5,bribes:H5,bribing:K5,bright:Q5,brightest:Y5,brightness:X5,brilliant:J5,brilliance:Z5,brilliances:e6,brisk:t6,broke:n6,broken:s6,brooding:r6,brutal:i6,brutally:o6,bullied:a6,bullshit:c6,bully:l6,bullying:u6,bummer:d6,buoyant:h6,burden:f6,burdened:m6,burdening:p6,burdens:g6,burglar:y6,burglary:v6,calm:_6,calmed:w6,calming:E6,calms:T6,"can't stand":-3,cancel:I6,cancelled:x6,cancelling:b6,cancels:S6,cancer:k6,capabilities:A6,capability:N6,capable:P6,captivated:C6,care:R6,carefree:D6,careful:j6,carefully:O6,carefulness:V6,careless:M6,cares:L6,caring:F6,"cashing in":-2,casualty:z6,catastrophe:U6,catastrophic:B6,cautious:$6,celebrate:q6,celebrated:W6,celebrates:G6,celebrating:H6,celebration:K6,celebrations:Q6,censor:Y6,censored:X6,censors:J6,certain:Z6,chagrin:eU,chagrined:tU,challenge:nU,champion:sU,championed:rU,champions:iU,chance:oU,chances:aU,chaos:cU,chaotic:lU,charged:uU,charges:dU,charisma:hU,charitable:fU,charm:mU,charming:pU,charmingly:gU,charmless:yU,chastise:vU,chastised:_U,chastises:wU,chastising:EU,cheat:TU,cheated:IU,cheater:xU,cheaters:bU,cheating:SU,cheats:kU,cheer:AU,cheered:NU,cheerful:PU,cheerfully:CU,cheering:RU,cheerless:DU,cheers:jU,cheery:OU,cherish:VU,cherished:MU,cherishes:LU,cherishing:FU,chic:zU,chide:UU,chided:BU,chides:$U,chiding:qU,childish:WU,chilling:GU,choke:HU,choked:KU,chokes:QU,choking:YU,clarifies:XU,clarity:JU,clash:ZU,classy:e9,clean:t9,cleaner:n9,clear:s9,cleared:r9,clearly:i9,clears:o9,clever:a9,clouded:c9,clueless:l9,cock:u9,cocksucker:d9,cocksuckers:h9,cocky:f9,coerced:m9,coercion:p9,collapse:g9,collapsed:y9,collapses:v9,collapsing:_9,collide:w9,collides:E9,colliding:T9,collision:I9,collisions:x9,colluding:b9,combat:S9,combats:k9,comedy:A9,comfort:N9,comfortable:P9,comfortably:C9,comforting:R9,comforts:D9,comic:j9,commend:O9,commended:V9,commit:M9,commitment:L9,commits:F9,committed:z9,committing:U9,compassion:B9,compassionate:$9,compelled:q9,competencies:W9,competent:G9,competitive:H9,complacent:K9,complain:Q9,complained:Y9,complaining:X9,complains:J9,complaint:Z9,complaints:eB,complicating:tB,compliment:nB,complimented:sB,compliments:rB,comprehensive:iB,concerned:oB,conciliate:aB,conciliated:cB,conciliates:lB,conciliating:uB,condemn:dB,condemnation:hB,condemned:fB,condemns:mB,confidence:pB,confident:gB,confidently:yB,conflict:vB,conflicting:_B,conflictive:wB,conflicts:EB,confuse:TB,confused:IB,confusing:xB,congrats:bB,congratulate:SB,congratulation:kB,congratulations:AB,consent:NB,consents:PB,consolable:CB,conspiracy:RB,constipation:DB,constrained:jB,contagion:OB,contagions:VB,contagious:MB,contaminant:LB,contaminants:FB,contaminate:zB,contaminated:UB,contaminates:BB,contaminating:$B,contamination:qB,contaminations:WB,contempt:GB,contemptible:HB,contemptuous:KB,contemptuously:QB,contend:YB,contender:XB,contending:JB,contentious:ZB,contestable:e$,controversial:t$,controversially:n$,controversies:s$,controversy:r$,convicted:i$,convince:o$,convinced:a$,convinces:c$,convivial:l$,cool:u$,"cool stuff":3,cornered:d$,corpse:h$,corrupt:f$,corrupted:m$,corrupting:p$,corruption:g$,corrupts:y$,costly:v$,courage:_$,courageous:w$,courageously:E$,courageousness:T$,courteous:I$,courtesy:x$,"cover-up":-3,coward:b$,cowardly:S$,coziness:k$,cramp:A$,crap:N$,crappy:P$,crash:C$,crazier:R$,craziest:D$,crazy:j$,creative:O$,crestfallen:V$,cried:M$,cries:L$,crime:F$,crimes:z$,criminal:U$,criminals:B$,criminate:$$,criminated:q$,criminates:W$,crisis:G$,critic:H$,criticise:K$,criticised:Q$,criticises:Y$,criticising:X$,criticism:J$,criticize:Z$,criticized:eq,criticizes:tq,criticizing:nq,critics:sq,critique:rq,crowding:iq,crude:oq,cruel:aq,cruelty:cq,crush:lq,crushed:uq,crushes:dq,crushing:hq,cry:fq,crying:mq,cunning:pq,cunt:gq,curious:yq,curse:vq,cut:_q,cutback:wq,cutbacks:Eq,cute:Tq,cuts:Iq,cutting:xq,cynic:bq,cynical:Sq,cynicism:kq,damage:Aq,damaged:Nq,damages:Pq,damaging:Cq,damn:Rq,"damn cute":3,"damn good":4,damned:Dq,damnit:jq,danger:Oq,dangerous:Vq,dangerously:Mq,daredevil:Lq,daring:Fq,darkest:zq,darkness:Uq,dauntless:Bq,dazzling:$q,dead:qq,deadening:Wq,deadlock:Gq,deadly:Hq,deafening:Kq,dear:Qq,dearly:Yq,death:Xq,deaths:Jq,debonair:Zq,debt:e8,deceit:t8,deceitful:n8,deceive:s8,deceived:r8,deceives:i8,deceiving:o8,deception:a8,deceptive:c8,decisive:l8,dedicated:u8,dedication:d8,defeat:h8,defeated:f8,defect:m8,defective:p8,defects:g8,defender:y8,defenders:v8,defenseless:_8,defer:w8,deferring:E8,defiant:T8,deficient:I8,deficiency:x8,deficiencies:b8,deficit:S8,deformed:k8,deformities:A8,deformity:N8,defraud:P8,defrauds:C8,deft:R8,defunct:D8,degrade:j8,degraded:O8,degrades:V8,dehumanize:M8,dehumanized:L8,dehumanizes:F8,dehumanizing:z8,deject:U8,dejected:B8,dejecting:$8,dejects:q8,delay:W8,delayed:G8,delectable:H8,delicious:K8,delight:Q8,delighted:Y8,delightful:X8,delightfully:J8,delighting:Z8,delights:eW,demand:tW,demanded:nW,demanding:sW,demands:rW,demonstration:iW,demoralize:oW,demoralized:aW,demoralizes:cW,demoralizing:lW,denial:uW,denials:dW,denied:hW,denier:fW,deniers:mW,denies:pW,denounce:gW,denounces:yW,dent:vW,deny:_W,denying:wW,deplore:EW,deplored:TW,deplores:IW,deploring:xW,deport:bW,deported:SW,deporting:kW,deports:AW,deportation:NW,deportations:PW,depressed:CW,depressing:RW,deprivation:DW,derail:jW,derailed:OW,derails:VW,derelict:MW,deride:LW,derided:FW,derides:zW,deriding:UW,derision:BW,desirable:$W,desire:qW,desired:WW,desirous:GW,despair:HW,despairing:KW,despairs:QW,desperate:YW,desperately:XW,despondent:JW,destroy:ZW,destroyed:e7,destroying:t7,destroys:n7,destruction:s7,destructive:r7,detached:i7,detain:o7,detained:a7,detention:c7,deteriorate:l7,deteriorated:u7,deteriorates:d7,deteriorating:h7,determined:f7,deterrent:m7,detract:p7,detracted:g7,detracts:y7,devastate:v7,devastated:_7,devastating:w7,devastation:E7,devastations:T7,devoted:I7,devotion:x7,devotional:b7,diamond:S7,dick:k7,dickhead:A7,die:N7,died:P7,difficult:C7,diffident:R7,dignity:D7,dilemma:j7,dilligence:O7,dipshit:V7,dire:M7,direful:L7,dirt:F7,dirtier:z7,dirtiest:U7,dirty:B7,disabilities:$7,disability:q7,disabling:W7,disadvantage:G7,disadvantaged:H7,disagree:K7,disagreeable:Q7,disagreement:Y7,disappear:X7,disappeared:J7,disappears:Z7,disappoint:eG,disappointed:tG,disappointing:nG,disappointment:sG,disappointments:rG,disappoints:iG,disapproval:oG,disapprovals:aG,disapprove:cG,disapproved:lG,disapproves:uG,disapproving:dG,disaster:hG,disasters:fG,disastrous:mG,disbelieve:pG,discard:gG,discarded:yG,discarding:vG,discards:_G,discernment:wG,discomfort:EG,disconsolate:TG,disconsolation:IG,discontented:xG,discord:bG,discounted:SG,discouraged:kG,discredited:AG,discriminate:NG,discriminated:PG,discriminates:CG,discriminating:RG,discriminatory:DG,disdain:jG,disease:OG,diseases:VG,disgrace:MG,disgraced:LG,disguise:FG,disguised:zG,disguises:UG,disguising:BG,disgust:$G,disgusted:qG,disgustful:WG,disgusting:GG,disheartened:HG,dishonest:KG,disillusioned:QG,disinclined:YG,disjointed:XG,dislike:JG,disliked:ZG,dislikes:eH,dismal:tH,dismayed:nH,dismissed:sH,disorder:rH,disorders:iH,disorganized:oH,disoriented:aH,disparage:cH,disparaged:lH,disparages:uH,disparaging:dH,displeased:hH,displeasure:fH,disproportionate:mH,dispute:pH,disputed:gH,disputes:yH,disputing:vH,disqualified:_H,disquiet:wH,disregard:EH,disregarded:TH,disregarding:IH,disregards:xH,disrespect:bH,disrespected:SH,disrupt:kH,disrupted:AH,disrupting:NH,disruption:PH,disruptions:CH,disruptive:RH,disrupts:DH,dissatisfied:jH,distasteful:OH,distinguished:VH,distort:MH,distorted:LH,distorting:FH,distorts:zH,distract:UH,distracted:BH,distraction:$H,distracts:qH,distress:WH,distressed:GH,distresses:HH,distressing:KH,distrust:QH,distrustful:YH,disturb:XH,disturbed:JH,disturbing:ZH,disturbs:eK,dithering:tK,diverting:nK,dizzy:sK,dodging:rK,dodgy:iK,"does not work":-3,dolorous:oK,donate:aK,donated:cK,donates:lK,donating:uK,donation:dK,"dont like":-2,doom:hK,doomed:fK,doubt:mK,doubted:pK,doubtful:gK,doubting:yK,doubts:vK,douche:_K,douchebag:wK,dour:EK,downcast:TK,downer:IK,downhearted:xK,downside:bK,drag:SK,dragged:kK,drags:AK,drained:NK,dread:PK,dreaded:CK,dreadful:RK,dreading:DK,dream:jK,dreams:OK,dreary:VK,droopy:MK,drop:LK,dropped:FK,drown:zK,drowned:UK,drowns:BK,drudgery:$K,drunk:qK,dubious:WK,dud:GK,dull:HK,dumb:KK,dumbass:QK,dump:YK,dumped:XK,dumps:JK,dupe:ZK,duped:eQ,dupery:tQ,durable:nQ,dying:sQ,dysfunction:rQ,eager:iQ,earnest:oQ,ease:aQ,easy:cQ,ecstatic:lQ,eerie:uQ,eery:dQ,effective:hQ,effectively:fQ,effectiveness:mQ,effortlessly:pQ,elated:gQ,elation:yQ,elegant:vQ,elegantly:_Q,embarrass:wQ,embarrassed:EQ,embarrasses:TQ,embarrassing:IQ,embarrassment:xQ,embezzlement:bQ,embittered:SQ,embrace:kQ,emergency:AQ,empathetic:NQ,empower:PQ,empowerment:CQ,emptiness:RQ,empty:DQ,enchanted:jQ,encourage:OQ,encouraged:VQ,encouragement:MQ,encourages:LQ,encouraging:FQ,endorse:zQ,endorsed:UQ,endorsement:BQ,endorses:$Q,enemies:qQ,enemy:WQ,energetic:GQ,engage:HQ,engages:KQ,engrossed:QQ,engrossing:YQ,enjoy:XQ,enjoyable:JQ,enjoyed:ZQ,enjoying:eY,enjoys:tY,enlighten:nY,enlightened:sY,enlightening:rY,enlightens:iY,ennui:oY,enrage:aY,enraged:cY,enrages:lY,enraging:uY,enrapture:dY,enslave:hY,enslaved:fY,enslaves:mY,ensure:pY,ensuring:gY,enterprising:yY,entertaining:vY,enthral:_Y,enthusiastic:wY,entitled:EY,entrusted:TY,envies:IY,envious:xY,"environment-friendly":2,envy:bY,envying:SY,erroneous:kY,error:AY,errors:NY,escape:-1,escapes:PY,escaping:CY,esteem:RY,esteemed:DY,ethical:jY,euphoria:OY,euphoric:VY,evacuate:MY,evacuated:LY,evacuates:FY,evacuating:zY,evacuation:UY,evergreen:BY,evergreens:$Y,evergreening:qY,eviction:WY,evil:GY,exacerbate:HY,exacerbated:KY,exacerbates:QY,exacerbating:YY,exaggerate:XY,exaggerated:JY,exaggerates:ZY,exaggerating:eX,exasparate:tX,exasperated:nX,exasperates:sX,exasperating:rX,excellence:iX,excellent:oX,excite:aX,excited:cX,excitement:lX,exciting:uX,exclude:dX,excluded:hX,exclusion:fX,exclusive:mX,excruciatingly:pX,excuse:gX,exempt:yX,exhausted:vX,exhilarated:_X,exhilarates:wX,exhilarating:EX,exonerate:TX,exonerated:IX,exonerates:xX,exonerating:bX,expand:SX,expands:kX,expel:AX,expelled:NX,expelling:PX,expels:CX,expertly:RX,exploit:DX,exploited:jX,exploiting:OX,exploits:VX,exploration:MX,explorations:LX,expose:FX,exposed:zX,exposes:UX,exposing:BX,exquisite:$X,extend:qX,extends:1,extremist:WX,extremists:GX,exuberant:HX,exultant:KX,exultantly:QX,fabulous:YX,fabulously:XX,fad:JX,fag:ZX,faggot:eJ,faggots:tJ,fail:nJ,failed:sJ,failing:rJ,fails:iJ,failure:oJ,failures:aJ,fainthearted:cJ,fair:lJ,fairness:uJ,faith:dJ,faithful:hJ,fake:fJ,faker:mJ,fakes:pJ,faking:gJ,fallen:yJ,falling:vJ,false:-1,falsely:_J,falsified:wJ,falsify:EJ,fame:TJ,famine:IJ,famous:xJ,fan:bJ,fantastic:SJ,farce:kJ,fascinate:AJ,fascinated:NJ,fascinates:PJ,fascinating:CJ,fascination:RJ,fascist:DJ,fascists:jJ,fatal:OJ,fatalities:VJ,fatality:MJ,fatigue:LJ,fatigued:FJ,fatigues:zJ,fatiguing:UJ,favor:BJ,favorable:$J,favorably:qJ,favored:WJ,favorite:GJ,favorited:HJ,favorites:KJ,favors:QJ,favour:YJ,favourable:XJ,favourably:JJ,favoured:ZJ,favourite:eZ,favourited:tZ,favourites:nZ,favours:sZ,fear:rZ,fearful:iZ,fearfully:oZ,fearing:aZ,fearless:cZ,fearlessness:lZ,fearsome:uZ,"fed up":-3,feeble:dZ,feeling:hZ,felonies:fZ,felony:mZ,fertile:pZ,fervent:gZ,fervid:yZ,festive:vZ,fever:_Z,fiasco:wZ,fidgety:EZ,fight:TZ,fighting:IZ,fine:xZ,fines:bZ,finest:SZ,fire:kZ,fired:AZ,firing:NZ,fit:PZ,fitness:CZ,filth:RZ,filthy:DZ,flagship:jZ,flaw:OZ,flawed:VZ,flawless:MZ,flawlessly:LZ,flaws:FZ,flees:zZ,flop:UZ,flops:BZ,flu:$Z,flustered:qZ,focused:WZ,fond:GZ,fondness:HZ,fool:KZ,foolish:QZ,fools:YZ,forbid:XZ,forbidden:JZ,forbidding:ZZ,forced:eee,foreclosure:tee,foreclosures:nee,forefront:see,forget:ree,forgetful:iee,forgettable:oee,forgive:aee,forgiving:cee,forgot:lee,forgotten:uee,fortune:dee,fortunate:hee,fortunately:fee,foul:mee,frantic:pee,fraud:gee,frauds:yee,fraudster:vee,fraudsters:_ee,fraudulence:wee,fraudulent:Eee,freak:Tee,free:Iee,freedom:xee,freedoms:bee,frenzy:See,fresh:kee,friend:Aee,friendliness:Nee,friendly:Pee,friendship:Cee,fright:Ree,frightened:Dee,frightening:jee,frikin:Oee,frisky:Vee,frowning:Mee,fruitless:Lee,frustrate:Fee,frustrated:zee,frustrates:Uee,frustrating:Bee,frustration:$ee,ftw:qee,fuck:Wee,fucked:Gee,fucker:Hee,fuckers:Kee,fuckface:Qee,fuckhead:Yee,fuckin:Xee,fucking:Jee,"fucking amazing":4,"fucking beautiful":4,"fucking cute":4,"fucking fantastic":4,"fucking good":4,"fucking great":4,"fucking hot":2,"fucking love":4,"fucking loves":4,"fucking perfect":4,fucktard:Zee,fud:ete,fuked:tte,fuking:nte,fulfill:ste,fulfilled:rte,fulfillment:ite,fulfills:ote,fuming:ate,fun:cte,funeral:lte,funerals:ute,funky:dte,funnier:hte,funny:fte,furious:mte,futile:pte,gag:gte,gagged:yte,gain:vte,gained:_te,gaining:wte,gains:Ete,gallant:Tte,gallantly:Ite,gallantry:xte,"game-changing":3,garbage:bte,gem:Ste,generous:kte,generously:Ate,genial:Nte,ghastly:Pte,ghost:Cte,giddy:Rte,gift:Dte,glad:jte,glamorous:Ote,glamourous:Vte,glee:Mte,gleeful:Lte,gloom:Fte,gloomy:zte,glorious:Ute,glory:Bte,glum:$te,god:qte,goddamn:Wte,godsend:Gte,gold:Hte,good:Kte,goodlooking:Qte,goodmorning:Yte,goodness:Xte,goodwill:Jte,goofiness:Zte,goofy:ene,grace:tne,graceful:nne,gracious:sne,grand:rne,grant:ine,granted:one,granting:ane,grants:cne,grateful:lne,gratification:une,grave:dne,gray:hne,grisly:fne,gr8:mne,great:pne,greater:gne,greatest:yne,greed:vne,greedy:_ne,"green wash":-3,"green washing":-3,greenwash:wne,greenwasher:Ene,greenwashers:Tne,greenwashing:Ine,greet:xne,greeted:bne,greeting:Sne,greetings:kne,greets:Ane,grey:Nne,grief:Pne,grieved:Cne,grim:Rne,gripping:Dne,groan:jne,groaned:One,groaning:Vne,groans:Mne,gross:Lne,growing:Fne,growth:zne,growths:Une,gruesome:Bne,guarantee:$ne,guilt:qne,guilty:Wne,gullibility:Gne,gullible:Hne,gun:Kne,ha:Qne,hacked:Yne,haha:Xne,hahaha:Jne,hahahah:Zne,hail:ese,hailed:tse,hallelujah:nse,handpicked:sse,handsome:rse,hapless:ise,haplessness:ose,happiest:ase,happiness:cse,happy:lse,harass:use,harassed:dse,harasses:hse,harassing:fse,harassment:mse,hard:pse,hardier:gse,hardship:yse,hardy:vse,harm:_se,harmed:wse,harmful:Ese,harming:Tse,harmony:Ise,harmonious:xse,harmoniously:bse,harms:Sse,harried:kse,harsh:Ase,harsher:Nse,harshest:Pse,harshly:Cse,hate:Rse,hated:Dse,hater:jse,haters:Ose,hates:Vse,hating:Mse,hatred:Lse,haunt:Fse,haunted:zse,haunting:Use,haunts:Bse,havoc:$se,hazardous:qse,headache:Wse,healthy:Gse,heartbreaking:Hse,heartbroken:Kse,heartfelt:Qse,heartless:Yse,heartwarming:Xse,heaven:Jse,heavenly:Zse,heavyhearted:ere,hehe:tre,hell:nre,hellish:sre,help:rre,helpful:ire,helping:ore,helpless:are,helps:cre,hero:lre,heroes:ure,heroic:dre,hesitant:hre,hesitate:fre,hid:mre,hide:pre,hideous:gre,hides:yre,hiding:vre,highlight:_re,hilarious:wre,hinder:Ere,hindrance:Tre,hoax:Ire,hollow:xre,homeless:bre,homesick:Sre,homicide:kre,homicides:Are,honest:Nre,honor:Pre,honored:Cre,honoring:Rre,honour:Dre,honoured:jre,honouring:Ore,hooligan:Vre,hooliganism:Mre,hooligans:Lre,hope:Fre,hopeful:zre,hopefully:Ure,hopeless:Bre,hopelessness:$re,hopes:qre,hoping:Wre,horrendous:Gre,horrid:Hre,horrible:Kre,horrific:Qre,horrified:Yre,hospitalized:Xre,hostile:Jre,huckster:Zre,hug:eie,huge:tie,hugs:nie,humane:sie,humble:rie,humbug:iie,humerous:oie,humiliated:aie,humiliation:cie,humor:lie,humorous:uie,humour:die,humourous:hie,hunger:fie,hurrah:mie,hurt:pie,hurting:gie,hurts:yie,hypocritical:vie,hysteria:_ie,hysterical:wie,hysterics:Eie,icky:Tie,idiocy:Iie,idiot:xie,idiotic:bie,ignorance:Sie,ignorant:kie,ignore:Aie,ignored:Nie,ignores:Pie,ill:Cie,"ill-fated":-2,illegal:Rie,illegally:Die,illegitimate:jie,illiteracy:Oie,illness:Vie,illnesses:Mie,illogical:Lie,imaginative:Fie,imbecile:zie,immobilized:Uie,immortal:Bie,immune:$ie,impair:qie,impaired:Wie,impairing:Gie,impairment:Hie,impairs:Kie,impatient:Qie,impeachment:Yie,impeachments:Xie,impede:Jie,impeded:Zie,impedes:eoe,impeding:toe,impedingly:noe,imperfect:soe,importance:roe,important:ioe,impose:ooe,imposed:aoe,imposes:coe,imposing:loe,imposter:uoe,impotent:doe,impress:hoe,impressed:foe,impresses:moe,impressive:poe,imprisoned:goe,imprisonment:yoe,improper:voe,improperly:_oe,improve:woe,improved:Eoe,improvement:Toe,improves:Ioe,improving:xoe,inability:boe,inaction:Soe,inadequate:koe,inadvertently:Aoe,inappropriate:Noe,incapable:Poe,incapacitated:Coe,incapacitates:Roe,incapacitating:Doe,incense:joe,incensed:Ooe,incenses:Voe,incensing:Moe,incoherent:Loe,incompetence:Foe,incompetent:zoe,incomplete:Uoe,incomprehensible:Boe,inconsiderate:$oe,inconvenience:qoe,inconvenient:Woe,increase:Goe,increased:Hoe,indecisive:Koe,indestructible:Qoe,indicted:Yoe,indifference:Xoe,indifferent:Joe,indignant:Zoe,indignation:eae,indoctrinate:tae,indoctrinated:nae,indoctrinates:sae,indoctrinating:rae,inediable:iae,inexorable:oae,inexcusable:aae,ineffective:cae,ineffectively:lae,ineffectual:uae,inefficiency:dae,inefficient:hae,inefficiently:fae,inept:mae,ineptitude:pae,infantile:gae,infantilized:yae,infatuated:vae,infatuation:_ae,infect:wae,infected:Eae,infecting:Tae,infection:Iae,infections:xae,infectious:bae,infects:Sae,inferior:kae,infest:Aae,infested:Nae,infesting:Pae,infests:Cae,inflamed:Rae,inflict:Dae,inflicted:jae,inflicting:Oae,inflicts:Vae,influential:Mae,infract:Lae,infracted:Fae,infracting:zae,infracts:Uae,infringement:Bae,infuriate:$ae,infuriated:qae,infuriates:Wae,infuriating:Gae,inhibit:Hae,inhuman:Kae,injured:Qae,injuries:Yae,injury:Xae,injustice:Jae,innovate:Zae,innovates:ece,innovation:tce,innovative:nce,inoperative:sce,inquisition:rce,inquisitive:ice,insane:oce,insanity:ace,insecure:cce,insensitive:lce,insensitivity:uce,insignificant:dce,insipid:hce,insolvent:fce,insomnia:mce,inspiration:pce,inspirational:gce,inspire:yce,inspired:vce,inspires:_ce,inspiring:wce,insufficiency:Ece,insufficient:Tce,insufficiently:Ice,insult:xce,insulted:bce,insulting:Sce,insults:kce,intact:Ace,integrity:Nce,intelligent:Pce,intense:Cce,interest:Rce,interested:Dce,interesting:jce,interests:Oce,interrogated:Vce,interrupt:Mce,interrupted:Lce,interrupting:Fce,interruption:zce,interrupts:Uce,intimacy:Bce,intimidate:$ce,intimidated:qce,intimidates:Wce,intimidating:Gce,intimidation:Hce,intransigence:Kce,intransigency:Qce,intricate:Yce,intrigues:Xce,invasion:Jce,invincible:Zce,invite:ele,inviting:tle,invulnerable:nle,irate:sle,ironic:rle,irony:ile,irrational:ole,irreparable:ale,irreproducible:cle,irresistible:lle,irresistibly:ule,irresolute:dle,irresponsible:hle,irresponsibly:fle,irreversible:mle,irreversibly:ple,irritate:gle,irritated:yle,irritates:vle,irritating:_le,isolated:wle,itchy:Ele,jackass:Tle,jackasses:Ile,jailed:xle,jaunty:ble,jealous:Sle,jealousy:kle,jeopardy:Ale,jerk:Nle,jesus:Ple,jewel:Cle,jewels:Rle,jocular:Dle,join:jle,joke:Ole,jokes:Vle,jolly:Mle,jovial:Lle,joy:Fle,joyful:zle,joyfully:Ule,joyless:Ble,joyous:$le,jubilant:qle,jumpy:Wle,justice:Gle,justifiably:Hle,justified:Kle,keen:Qle,kickback:Yle,kickbacks:Xle,kidnap:Jle,kidnapped:Zle,kidnapping:eue,kidnappings:tue,kidnaps:nue,kill:sue,killed:rue,killing:iue,kills:oue,kind:aue,"kind of":0,kinder:cue,kindness:lue,kiss:uue,kudos:due,lack:hue,lackadaisical:fue,lag:mue,lagged:pue,lagging:gue,lags:yue,lame:vue,landmark:_ue,lapse:wue,lapsed:Eue,laugh:Tue,laughed:Iue,laughing:xue,laughs:bue,laughting:Sue,launched:kue,lawl:Aue,lawsuit:Nue,lawsuits:Pue,lazy:Cue,leadership:Rue,leading:Due,leak:jue,leaked:Oue,leave:Vue,legal:Mue,legally:Lue,lenient:Fue,lethal:zue,lethality:Uue,lethargic:Bue,lethargy:$ue,liar:que,liars:Wue,libelous:Gue,lied:Hue,lifeless:Kue,lifesaver:Que,lighthearted:Yue,likable:Xue,like:Jue,likeable:Zue,liked:ede,likers:tde,likes:nde,liking:sde,limitation:rde,limited:ide,limits:ode,litigation:ade,litigious:cde,lively:lde,livid:ude,lmao:dde,lmfao:hde,loathe:fde,loathed:mde,loathes:pde,loathing:gde,loathsome:yde,lobbied:vde,lobby:_de,lobbying:wde,lobbyist:Ede,lobbyists:Tde,lol:Ide,lolol:xde,lololol:bde,lolololol:Sde,lonely:kde,lonesome:Ade,longing:Nde,lool:Pde,loom:Cde,loomed:Rde,looming:Dde,looms:jde,loool:Ode,looool:Vde,loose:Mde,looses:Lde,loser:Fde,losing:zde,loss:Ude,losses:Bde,lost:$de,lousy:qde,lovable:Wde,love:Gde,loved:Hde,lovelies:Kde,lovely:Qde,loves:Yde,loving:Xde,"loving-kindness":3,lowest:Jde,loyal:Zde,loyalty:ehe,luck:the,luckily:nhe,lucky:she,lucrative:rhe,ludicrous:ihe,lugubrious:ohe,lunatic:ahe,lunatics:che,lurk:lhe,lurking:uhe,lurks:dhe,luxury:hhe,macabre:fhe,mad:mhe,maddening:phe,"made-up":-1,madly:ghe,madness:yhe,magnificent:vhe,maladaption:_he,maldevelopment:whe,maltreatment:Ehe,mandatory:The,manipulated:Ihe,manipulating:xhe,manipulation:bhe,manslaughter:She,marvel:khe,marvelous:Ahe,marvels:Nhe,masterpiece:Phe,masterpieces:Che,matter:Rhe,matters:Dhe,mature:jhe,meaningful:Ohe,meaningless:Vhe,medal:Mhe,mediocrity:Lhe,meditative:Fhe,melancholy:zhe,memorable:Uhe,memoriam:Bhe,menace:$he,menaced:qhe,menaces:Whe,mercy:Ghe,merry:Hhe,mesmerizing:Khe,mess:Qhe,messed:Yhe,"messing up":-2,methodical:Xhe,methodically:Jhe,mindless:Zhe,miracle:efe,mirth:tfe,mirthful:nfe,mirthfully:sfe,misbehave:rfe,misbehaved:ife,misbehaves:ofe,misbehaving:afe,misbranding:cfe,miscast:lfe,mischief:ufe,mischiefs:dfe,misclassified:hfe,misclassifies:ffe,misclassify:mfe,misconduct:pfe,misconducted:gfe,misconducting:yfe,misconducts:vfe,miserable:_fe,miserably:wfe,misery:Efe,misfire:Tfe,misfortune:Ife,misgiving:xfe,misinformation:bfe,misinformed:Sfe,misinterpreted:kfe,mislead:Afe,misleaded:Nfe,misleading:Pfe,misleads:Cfe,misplace:Rfe,misplaced:Dfe,misplaces:jfe,misplacing:Ofe,mispricing:Vfe,misread:Mfe,misreport:Lfe,misreported:Ffe,misreporting:zfe,misreports:Ufe,misrepresent:Bfe,misrepresentation:$fe,misrepresentations:qfe,misrepresented:Wfe,misrepresenting:Gfe,misrepresents:Hfe,miss:Kfe,missed:Qfe,missing:Yfe,mistake:Xfe,mistaken:Jfe,mistakes:Zfe,mistaking:eme,misunderstand:tme,misunderstanding:nme,misunderstands:sme,misunderstood:rme,misuse:ime,misused:ome,misuses:ame,misusing:cme,moan:lme,moaned:ume,moaning:dme,moans:hme,mock:fme,mocked:mme,mocking:pme,mocks:gme,modernize:yme,modernized:vme,modernizes:_me,modernizing:wme,mongering:Eme,monopolize:Tme,monopolized:Ime,monopolizes:xme,monopolizing:bme,monotone:Sme,moody:kme,mope:Ame,moping:Nme,moron:Pme,motherfucker:Cme,motherfucking:Rme,motivate:Dme,motivated:jme,motivating:Ome,motivation:Vme,mourn:Mme,mourned:Lme,mournful:Fme,mourning:zme,mourns:Ume,muddy:Bme,mumpish:$me,murder:qme,murderer:Wme,murdering:Gme,murderous:Hme,murders:Kme,murky:Qme,myth:Yme,n00b:Xme,naive:Jme,narcissism:Zme,nasty:epe,natural:tpe,naïve:-2,needy:npe,negative:spe,negativity:rpe,neglect:ipe,neglected:ope,neglecting:ape,neglects:cpe,nerves:lpe,nervous:upe,nervously:dpe,nice:hpe,nifty:fpe,niggas:mpe,nigger:ppe,no:gpe,"no fun":-3,noble:ype,noblest:vpe,noisy:_pe,"non-approved":-2,nonsense:wpe,noob:Epe,nosey:Tpe,"not good":-2,"not working":-3,notable:Ipe,noticeable:xpe,notorious:bpe,novel:Spe,numb:kpe,nurturing:Ape,nuts:Npe,obliterate:Ppe,obliterated:Cpe,obnoxious:Rpe,obscene:Dpe,obscenity:jpe,obsessed:Ope,obsolete:Vpe,obstacle:Mpe,obstacles:Lpe,obstinate:Fpe,obstruct:zpe,obstructed:Upe,obstructing:Bpe,obstruction:$pe,obstructs:qpe,odd:Wpe,offence:Gpe,offences:Hpe,offend:Kpe,offended:Qpe,offender:Ype,offending:Xpe,offends:Jpe,offense:Zpe,offenses:ege,offensive:tge,offensively:nge,offline:sge,oks:rge,ominous:ige,"once-in-a-lifetime":3,oops:oge,opportunities:age,opportunity:cge,oppressed:lge,oppression:uge,oppressions:dge,oppressive:hge,optimism:fge,optimistic:mge,optionless:pge,ostracize:gge,ostracized:yge,ostracizes:vge,ouch:_ge,outage:wge,outages:Ege,outbreak:Tge,outbreaks:Ige,outcry:xge,outmaneuvered:bge,outnumbered:Sge,outrage:kge,outraged:Age,outrageous:Nge,outreach:Pge,outstanding:Cge,overjoyed:Rge,overload:Dge,overlooked:jge,overprotective:Oge,overran:Vge,overreact:Mge,overreacted:Lge,overreacting:Fge,overreaction:zge,overreacts:Uge,oversell:Bge,overselling:$ge,oversells:qge,oversight:Wge,oversimplification:Gge,oversimplified:Hge,oversimplifies:Kge,oversimplify:Qge,oversold:Yge,overstatement:Xge,overstatements:Jge,overweight:Zge,overwrought:eye,oxymoron:tye,pain:nye,pained:sye,painful:rye,panic:iye,panicked:oye,panics:aye,paradise:cye,paradox:lye,pardon:uye,pardoned:dye,pardoning:hye,pardons:fye,parley:mye,passion:pye,passionate:gye,passive:yye,passively:vye,pathetic:_ye,pay:wye,peace:Eye,peaceful:Tye,peacefully:Iye,penalize:xye,penalized:bye,penalizes:Sye,penalizing:kye,penalty:Aye,pensive:Nye,perfect:Pye,perfected:Cye,perfection:Rye,perfectly:Dye,perfects:jye,peril:Oye,perjury:Vye,perpetrated:Mye,perpetrator:Lye,perpetrators:Fye,perplexed:zye,persecute:Uye,persecuted:Bye,persecutes:$ye,persecuting:qye,perturbed:Wye,pervert:Gye,pesky:Hye,pessimism:Kye,pessimistic:Qye,petrified:Yye,philanthropy:Xye,phobic:Jye,picturesque:Zye,pileup:eve,pillage:tve,pique:nve,piqued:sve,piss:rve,pissed:ive,pissing:ove,piteous:ave,pitied:cve,pity:lve,plague:uve,plagued:dve,plagues:hve,plaguing:fve,playful:mve,pleasant:pve,please:gve,pleased:yve,pleasurable:vve,pleasure:_ve,plodding:wve,poignant:Eve,pointless:Tve,poised:Ive,poison:xve,poisoned:bve,poisons:Sve,polished:kve,polite:Ave,politeness:Nve,pollutant:Pve,pollute:Cve,polluted:Rve,polluter:Dve,polluters:jve,pollutes:Ove,pollution:Vve,poor:Mve,poorer:Lve,poorest:Fve,poorly:zve,popular:Uve,popularity:Bve,positive:$ve,positively:qve,possessive:Wve,"post-traumatic":-2,postpone:Gve,postponed:Hve,postpones:Kve,postponing:Qve,poverty:Yve,powerful:Xve,powerless:Jve,praise:Zve,praised:e_e,praises:t_e,praising:n_e,pray:s_e,praying:r_e,prays:i_e,prblm:o_e,prblms:a_e,predatory:c_e,prepared:l_e,pressure:u_e,pressured:d_e,pretend:h_e,pretending:f_e,pretends:m_e,pretty:p_e,prevent:g_e,prevented:y_e,preventing:v_e,prevents:__e,prick:w_e,prison:E_e,prisoner:T_e,prisoners:I_e,privileged:x_e,proactive:b_e,problem:S_e,problems:k_e,profit:A_e,profitable:N_e,profiteer:P_e,profits:C_e,progress:R_e,prohibit:D_e,prohibits:j_e,prominent:O_e,promise:V_e,promised:M_e,promises:L_e,promote:F_e,promoted:z_e,promotes:U_e,promoting:B_e,promptly:$_e,propaganda:q_e,prosecute:W_e,prosecuted:G_e,prosecutes:H_e,prosecution:K_e,prospect:Q_e,prospects:Y_e,prosperity:X_e,prosperous:J_e,protect:Z_e,protected:1,protects:ewe,protest:twe,protesters:nwe,protesting:swe,protests:rwe,proud:iwe,proudly:owe,provoke:awe,provoked:cwe,provokes:lwe,provoking:uwe,prudence:dwe,pseudoscience:hwe,psychopathic:fwe,punish:mwe,punished:pwe,punishes:gwe,punishing:ywe,punitive:vwe,pure:_we,purest:wwe,purposeful:Ewe,pushy:Twe,puzzled:Iwe,quaking:xwe,qualities:bwe,quality:Swe,questionable:kwe,questioned:Awe,questioning:Nwe,racism:Pwe,racist:Cwe,racists:Rwe,rage:Dwe,rageful:jwe,rainy:Owe,rant:Vwe,ranter:Mwe,ranters:Lwe,rants:Fwe,rape:zwe,raped:Uwe,rapist:Bwe,rapture:$we,raptured:qwe,raptures:Wwe,rapturous:Gwe,rash:Hwe,ratified:Kwe,reach:Qwe,reached:Ywe,reaches:Xwe,reaching:Jwe,reassure:Zwe,reassured:e2e,reassures:t2e,reassuring:n2e,rebel:s2e,rebellion:r2e,rebels:i2e,recession:o2e,reckless:a2e,recognition:c2e,recommend:l2e,recommended:u2e,recommends:d2e,redeemed:h2e,refine:f2e,refined:m2e,refines:p2e,refreshingly:g2e,refuse:y2e,refused:v2e,refuses:_2e,refusing:w2e,regret:E2e,regretful:T2e,regrets:I2e,regretted:x2e,regretting:b2e,reigning:S2e,reject:k2e,rejected:A2e,rejecting:N2e,rejection:P2e,rejects:C2e,rejoice:R2e,rejoiced:D2e,rejoices:j2e,rejoicing:O2e,relaxed:V2e,relentless:M2e,reliability:L2e,reliable:F2e,reliably:z2e,reliant:U2e,relieve:B2e,relieved:$2e,relieves:q2e,relieving:W2e,relishing:G2e,remarkable:H2e,remorse:K2e,repellent:Q2e,repercussion:Y2e,repercussions:X2e,reprimand:J2e,reprimanded:Z2e,reprimanding:e0e,reprimands:t0e,repulse:n0e,repulsed:s0e,repulsive:r0e,rescue:i0e,rescued:o0e,rescues:a0e,resentful:c0e,resign:l0e,resigned:u0e,resigning:d0e,resigns:h0e,resolute:f0e,resolution:m0e,resolve:p0e,resolved:g0e,resolves:y0e,resolving:v0e,respect:_0e,respected:w0e,respects:E0e,responsibility:T0e,responsible:I0e,responsive:x0e,restful:b0e,restless:S0e,restore:k0e,restored:A0e,restores:N0e,restoring:P0e,restrict:C0e,restricted:R0e,restricting:D0e,restriction:j0e,restrictive:O0e,restricts:V0e,retained:M0e,retard:L0e,retarded:F0e,retreat:z0e,revenge:U0e,revengeful:B0e,revered:$0e,revive:q0e,revives:W0e,revolting:G0e,reward:H0e,rewarded:K0e,rewarding:Q0e,rewards:Y0e,rich:X0e,richly:J0e,ridiculous:Z0e,rig:e1e,rigged:t1e,"right direction":3,righteousness:n1e,rightful:s1e,rightfully:r1e,rigorous:i1e,rigorously:o1e,riot:a1e,riots:c1e,rise:l1e,rises:u1e,risk:d1e,risks:h1e,risky:f1e,riveting:m1e,rob:p1e,robber:g1e,robed:y1e,robing:v1e,robs:_1e,robust:w1e,rofl:E1e,roflcopter:T1e,roflmao:I1e,romance:x1e,romantical:b1e,romantically:S1e,rose:k1e,rotfl:A1e,rotflmfao:N1e,rotflol:P1e,rotten:C1e,rude:R1e,ruin:D1e,ruined:j1e,ruining:O1e,ruins:V1e,sabotage:M1e,sad:L1e,sadden:F1e,saddened:z1e,sadly:U1e,safe:B1e,safely:$1e,safer:q1e,safety:W1e,salient:G1e,salute:H1e,saluted:K1e,salutes:Q1e,saluting:Y1e,salvation:X1e,sappy:J1e,sarcastic:Z1e,satisfied:eEe,savange:tEe,savanges:nEe,save:sEe,saved:rEe,savings:iEe,scam:oEe,scams:aEe,scandal:cEe,scandalous:lEe,scandals:uEe,scapegoat:dEe,scapegoats:hEe,scare:fEe,scared:mEe,scar:pEe,scars:gEe,scary:yEe,sceptical:vEe,scold:_Ee,scoop:wEe,scorn:EEe,scornful:TEe,scream:IEe,screamed:xEe,screaming:bEe,screams:SEe,screwed:kEe,"screwed up":-3,scum:AEe,scumbag:NEe,seamless:PEe,seamlessly:CEe,secure:REe,secured:DEe,secures:jEe,sedition:OEe,seditious:VEe,seduced:MEe,"self-abuse":-2,"self-confident":2,"self-contradictory":-2,"self-deluded":-2,selfish:LEe,selfishness:FEe,sentence:zEe,sentenced:UEe,sentences:BEe,sentencing:$Ee,serene:qEe,settlement:WEe,settlements:GEe,severe:HEe,severely:KEe,sexist:QEe,sexistic:YEe,sexy:XEe,shaky:JEe,shame:ZEe,shamed:eTe,shameful:tTe,share:nTe,shared:sTe,shares:rTe,shattered:iTe,shit:oTe,shithead:aTe,shitty:cTe,shock:lTe,shocked:uTe,shocking:dTe,shocks:hTe,shoody:fTe,shoot:mTe,"short-sighted":-2,"short-sightedness":-2,shortage:pTe,shortages:gTe,shrew:yTe,shy:vTe,sick:_Te,sickness:wTe,"side-effect":-2,"side-effects":-2,sigh:ETe,significance:TTe,significant:ITe,silencing:xTe,silly:bTe,simplicity:STe,sin:kTe,sincere:ATe,sincerely:NTe,sincerest:PTe,sincerity:CTe,sinful:RTe,singleminded:DTe,sinister:jTe,sins:OTe,skeptic:VTe,skeptical:MTe,skepticism:LTe,skeptics:FTe,slam:zTe,slash:UTe,slashed:BTe,slashes:$Te,slashing:qTe,slave:WTe,slavery:GTe,slaves:HTe,sleeplessness:KTe,slick:QTe,slicker:YTe,slickest:XTe,slip:JTe,sloppy:ZTe,sluggish:eIe,slumping:tIe,slut:nIe,smart:sIe,smarter:rIe,smartest:iIe,smear:oIe,smile:aIe,smiled:cIe,smiles:lIe,smiling:uIe,smog:dIe,smuggle:hIe,smuggled:fIe,smuggling:mIe,smuggles:pIe,sneaky:gIe,sneeze:yIe,sneezed:vIe,sneezes:_Ie,sneezing:wIe,snub:EIe,snubbed:TIe,snubbing:IIe,snubs:xIe,sobering:bIe,solemn:SIe,solid:kIe,solidarity:AIe,solidified:NIe,solidifies:PIe,solidify:CIe,solidifying:RIe,solution:DIe,solutions:jIe,solve:OIe,solved:VIe,solves:MIe,solving:LIe,somber:FIe,"some kind":0,"son-of-a-bitch":-5,soothe:zIe,soothed:UIe,soothing:BIe,sophisticated:$Ie,sore:qIe,sorrow:WIe,sorrowful:GIe,sorry:HIe,spacious:KIe,spam:QIe,spammer:YIe,spammers:XIe,spamming:JIe,spark:ZIe,sparkle:exe,sparkles:txe,sparkling:nxe,spearhead:sxe,speculative:rxe,spirit:ixe,spirited:oxe,spiritless:axe,spiteful:cxe,splendid:lxe,spoiled:uxe,spoilt:dxe,spotless:hxe,sprightly:fxe,squander:mxe,squandered:pxe,squandering:gxe,squanders:yxe,squelched:vxe,stab:_xe,stabbed:wxe,stable:Exe,stabs:Txe,stall:Ixe,stalled:xxe,stalling:bxe,stamina:Sxe,stampede:kxe,stank:Axe,startled:Nxe,startling:Pxe,starve:Cxe,starved:Rxe,starves:Dxe,starving:jxe,steadfast:Oxe,steal:Vxe,stealing:Mxe,steals:Lxe,stereotype:Fxe,stereotyped:zxe,stifled:Uxe,stimulate:Bxe,stimulated:$xe,stimulates:qxe,stimulating:Wxe,stingy:Gxe,stink:Hxe,stinked:Kxe,stinker:Qxe,stinking:Yxe,stinks:Xxe,stinky:Jxe,stole:Zxe,stolen:ebe,stop:tbe,stopped:nbe,stopping:sbe,stops:rbe,stout:ibe,straight:obe,strange:abe,strangely:cbe,strangled:lbe,strength:ube,strengthen:dbe,strengthened:hbe,strengthening:fbe,strengthens:mbe,strengths:pbe,stress:gbe,stressed:ybe,stressor:vbe,stressors:_be,stricken:wbe,strike:Ebe,strikers:Tbe,strikes:Ibe,strong:xbe,stronger:bbe,strongest:Sbe,struck:kbe,struggle:Abe,struggled:Nbe,struggles:Pbe,struggling:Cbe,stubborn:Rbe,stuck:Dbe,stunned:jbe,stunning:Obe,stupid:Vbe,stupidity:Mbe,stupidly:Lbe,suave:Fbe,subpoena:zbe,substantial:Ube,substantially:Bbe,subversive:$be,succeed:qbe,succeeded:Wbe,succeeding:Gbe,succeeds:Hbe,success:Kbe,successful:Qbe,successfully:Ybe,suck:Xbe,sucks:Jbe,sue:Zbe,sued:eSe,sueing:tSe,sues:nSe,suffer:sSe,suffered:rSe,sufferer:iSe,sufferers:oSe,suffering:aSe,suffers:cSe,suicidal:lSe,suicide:uSe,suicides:dSe,suing:hSe,suitable:fSe,suited:mSe,sulking:pSe,sulky:gSe,sullen:ySe,sunshine:vSe,super:3,superb:_Se,superior:wSe,support:ESe,supported:TSe,supporter:ISe,supporters:xSe,supporting:bSe,supportive:SSe,supports:kSe,supreme:ASe,survived:NSe,surviving:PSe,survivor:CSe,suspect:RSe,suspected:DSe,suspecting:jSe,suspects:OSe,suspend:VSe,suspended:MSe,suspicious:LSe,sustainability:FSe,sustainable:zSe,sustainably:USe,swear:BSe,swearing:$Se,swears:qSe,sweet:WSe,sweeter:GSe,sweetest:HSe,swift:KSe,swiftly:QSe,swindle:YSe,swindles:XSe,swindling:JSe,sympathetic:ZSe,sympathy:eke,taint:tke,tainted:nke,talent:ske,tard:rke,tarnish:ike,tarnished:oke,tarnishes:ake,tears:cke,tender:lke,tenderness:uke,tense:dke,tension:hke,terrible:fke,terribly:mke,terrific:pke,terrifically:gke,terrified:yke,terror:vke,terrorist:_ke,terrorists:wke,terrorize:Eke,terrorized:Tke,terrorizes:Ike,thank:xke,thankful:bke,thanks:Ske,thorny:kke,thoughtful:Ake,thoughtless:Nke,threat:Pke,threaten:Cke,threatened:Rke,threatening:Dke,threatens:jke,threats:Oke,thrilled:Vke,thwart:Mke,thwarted:Lke,thwarting:Fke,thwarts:zke,timid:Uke,timorous:Bke,tired:$ke,tits:qke,tolerance:Wke,tolerant:Gke,toothless:Hke,top:Kke,tops:Qke,torn:Yke,torture:Xke,tortured:Jke,tortures:Zke,torturing:eAe,totalitarian:tAe,totalitarianism:nAe,tout:sAe,touted:rAe,touting:iAe,touts:oAe,toxic:aAe,tragedies:cAe,tragedy:lAe,tragic:uAe,tranquil:dAe,transgress:hAe,transgressed:fAe,transgresses:mAe,transgressing:pAe,trap:gAe,trapped:yAe,traps:vAe,trauma:_Ae,traumatic:wAe,travesty:EAe,treason:TAe,treasonous:IAe,treasure:xAe,treasures:bAe,trembling:SAe,tremor:kAe,tremors:AAe,tremulous:NAe,tribulation:PAe,tribute:CAe,tricked:RAe,trickery:DAe,triumph:jAe,triumphant:OAe,troll:VAe,trouble:MAe,troubled:LAe,troubles:FAe,troubling:zAe,true:2,trust:UAe,trusted:BAe,trusts:$Ae,tumor:qAe,twat:WAe,tyran:GAe,tyrannic:HAe,tyrannical:KAe,tyrannically:QAe,tyrans:YAe,ubiquitous:XAe,ugh:JAe,ugliness:ZAe,ugly:eNe,unable:tNe,unacceptable:nNe,unappeasable:sNe,unappreciated:rNe,unapproved:iNe,unattractive:oNe,unavailable:aNe,unavailing:cNe,unaware:lNe,unbearable:uNe,unbelievable:dNe,unbelieving:hNe,unbiased:fNe,uncertain:mNe,unclear:pNe,uncomfortable:gNe,unconcerned:yNe,unconfirmed:vNe,unconvinced:_Ne,uncredited:wNe,undecided:ENe,undercooked:TNe,underestimate:INe,underestimated:xNe,underestimates:bNe,underestimating:SNe,undermine:kNe,undermined:ANe,undermines:NNe,undermining:PNe,underperform:CNe,underperformed:RNe,underperforming:DNe,underperforms:jNe,undeserving:ONe,undesirable:VNe,uneasy:MNe,unemployed:LNe,unemployment:FNe,unequal:zNe,unequaled:UNe,unethical:BNe,uneventful:$Ne,unfair:qNe,unfavorable:WNe,unfit:GNe,unfitted:HNe,unfocused:KNe,unforgivable:QNe,unforgiving:YNe,unfulfilled:XNe,unfunny:JNe,ungenerous:ZNe,ungrateful:ePe,unhappy:tPe,unhappiness:nPe,unhealthy:sPe,unhygienic:rPe,unified:iPe,unimaginative:oPe,unimpressed:aPe,uninspired:cPe,unintelligent:lPe,unintentional:uPe,uninvolving:dPe,united:hPe,unjust:fPe,unlikely:mPe,unlovable:pPe,unloved:gPe,unmatched:yPe,unmotivated:vPe,unoriginal:_Pe,unparliamentary:wPe,unpleasant:EPe,unpleasantness:TPe,unprofessional:IPe,unravel:xPe,unreleting:bPe,unresearched:SPe,unsafe:kPe,unsatisfied:APe,unscientific:NPe,unsecured:PPe,unselfish:CPe,unsettled:RPe,unsold:DPe,unsophisticated:jPe,unsound:OPe,unstable:VPe,unstoppable:MPe,unsuccessful:LPe,unsuccessfully:FPe,unsupported:zPe,unsure:UPe,untarnished:BPe,untrue:$Pe,unwanted:qPe,unworthy:WPe,uplifting:GPe,uproar:HPe,upset:KPe,upsets:QPe,upsetting:YPe,uptight:XPe,urgent:JPe,useful:ZPe,usefulness:eCe,useless:tCe,uselessness:nCe,vague:sCe,validate:rCe,validated:iCe,validates:oCe,validating:aCe,vapid:cCe,verdict:lCe,verdicts:uCe,vested:dCe,vexation:hCe,vexing:fCe,vibrant:mCe,vicious:pCe,victim:gCe,victimization:yCe,victimize:vCe,victimized:_Ce,victimizes:wCe,victimizing:ECe,victims:TCe,victor:ICe,victors:xCe,victory:bCe,victories:SCe,vigilant:kCe,vigor:ACe,vile:NCe,vindicate:PCe,vindicated:CCe,vindicates:RCe,vindicating:DCe,violate:jCe,violated:OCe,violates:VCe,violating:MCe,violation:LCe,violations:FCe,violence:zCe,"violence-related":-3,violent:UCe,violently:BCe,virtuous:$Ce,virulent:qCe,vision:WCe,visionary:GCe,visioning:HCe,visions:KCe,vitality:QCe,vitamin:YCe,vitriolic:XCe,vivacious:JCe,vividly:ZCe,vociferous:eRe,vomit:tRe,vomited:nRe,vomiting:sRe,vomits:rRe,vulnerability:iRe,vulnerable:oRe,walkout:aRe,walkouts:cRe,wanker:lRe,want:uRe,war:dRe,warfare:hRe,warm:fRe,warmhearted:mRe,warmness:pRe,warmth:gRe,warn:yRe,warned:vRe,warning:_Re,warnings:wRe,warns:ERe,waste:TRe,wasted:IRe,wasting:xRe,wavering:bRe,weak:SRe,weakened:kRe,weakness:ARe,weaknesses:NRe,wealth:PRe,wealthier:CRe,wealthy:RRe,weary:DRe,weep:jRe,weeping:ORe,weird:VRe,welcome:MRe,welcomed:LRe,welcomes:FRe,"well-being":2,"well-championed":3,"well-developed":2,"well-established":2,"well-focused":2,"well-groomed":2,"well-proportioned":2,whimsical:zRe,whitewash:URe,whore:BRe,wicked:$Re,widowed:qRe,willingness:WRe,win:GRe,winner:HRe,winning:KRe,wins:QRe,winwin:YRe,wisdom:XRe,wish:JRe,wishes:ZRe,wishing:eDe,withdrawal:tDe,wits:nDe,woebegone:sDe,woeful:rDe,won:iDe,wonderful:oDe,wonderfully:aDe,woo:cDe,woohoo:lDe,wooo:uDe,woow:dDe,worn:hDe,worried:fDe,worries:mDe,worry:pDe,worrying:gDe,worse:yDe,worsen:vDe,worsened:_De,worsening:wDe,worsens:EDe,worshiped:TDe,worst:IDe,worth:xDe,worthless:bDe,worthy:SDe,wow:kDe,wowow:ADe,wowww:NDe,wrathful:PDe,wreck:CDe,wrenching:RDe,wrong:DDe,wrongdoing:jDe,wrongdoings:ODe,wronged:VDe,wrongful:MDe,wrongfully:LDe,wrongly:FDe,wtf:zDe,wtff:UDe,wtfff:BDe,xo:$De,xoxo:qDe,xoxoxo:WDe,xoxoxoxo:GDe,yeah:HDe,yearning:KDe,yeees:QDe,yes:YDe,youthful:XDe,yucky:JDe,yummy:ZDe,zealot:eje,zealots:tje,zealous:nje},rje=1,ije=1,oje=1,aje=1,cje=1,lje=1,uje=1,dje={cant:rje,"can't":1,dont:ije,"don't":1,doesnt:oje,"doesn't":1,not:aje,non:cje,wont:lje,"won't":1,isnt:uje,"isn't":1};var hje=dje,fje={apply:function(t,e,n){if(e>0){var s=t[e-1];hje[s]&&(n=-n)}return n}},mje={labels:sje,scoringStrategy:fje},Nx=RO,Px=mje;Object.assign(Px.labels,Nx);var wu={en:Px},pje={addLanguage:function(t,e){if(!e.labels)throw new Error("language.labels must be defined!");Object.assign(e.labels,Nx),wu[t]=e},getLanguage:function(t){if(!t)return wu.en;if(!wu[t])try{var e=CO("../languages/"+t+"/index");this.addLanguage(t,e)}catch{throw new Error("No language found: "+t)}return wu[t]},getLabels:function(t){var e=this.getLanguage(t);return e.labels},applyScoringStrategy:function(t,e,n,s){var r=this.getLanguage(t),i=r.scoringStrategy||gje;return i.apply(e,n,s)}},gje={apply:function(t,e,n){return n}},yje=PO,Ap=pje,Cy=function(t){this.options=t};Cy.prototype.registerLanguage=function(t,e){Ap.addLanguage(t,e)};Cy.prototype.analyze=function(t,e,n){typeof t>"u"&&(t=""),typeof e=="function"&&(n=e,e={}),e=e||{};var s=e.language||"en",r=Ap.getLabels(s);typeof e.extras=="object"&&(r=Object.assign(r,e.extras));for(var i=yje(t),o=0,a=[],c=[],d=[],f=[],m=i.length;m--;){var g=i[m];if(r.hasOwnProperty(g)){a.push(g);var E=r[g];E=Ap.applyScoringStrategy(s,i,m,E),E>0&&c.push(g),E<0&&d.push(g),o+=E;var S={};S[g]=E,f.push(S)}}var N={score:o,comparative:i.length>0?o/i.length:0,calculation:f,tokens:i,words:a,positive:c,negative:d};if(typeof n=="function")process.nextTick(function(){n(null,N)});else return N};var vje=Cy;const _je=R2(vje),wje=new _je;function Cx(t){return!t||t.trim()===""?null:wje.analyze(t)}const Eje="https://us-central1-clarity-311c3.cloudfunctions.net/analyzeText";async function Ry(t){var e;try{const n=await fetch(Eje,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t})});if(!n.ok)throw new Error("AI analytics request failed");const s=await n.json();return{sentiment:((e=s.sentiment)==null?void 0:e.score)??null,entities:s.entities??[],source:"cloud"}}catch(n){console.error("AI analytics error (falling back to local):",n);const s=Cx(t);return{sentiment:(s==null?void 0:s.score)??null,entities:[],source:"local"}}}function Dy(t,e){if(!e||e.length===0)return null;const n=e.map(s=>s.toLowerCase());return(n.includes("tired")||n.includes("fatigue")||n.includes("stressed")||n.includes("stress"))&&t!==null&&t<0?"Sorry you're feeling tired or stressed. Try a 10-minute guided meditation or a relaxing soundscape to unwind.":(n.includes("sleep")||n.includes("insomnia"))&&t!==null&&t<0?"Having trouble sleeping? Try a sleep meditation or a calming bedtime routine tonight.":(n.includes("sore")||n.includes("soreness"))&&n.includes("workout")?"Great job on your workout! Since you're sore, consider a gentle stretching session or a rest day tomorrow.":n.includes("water")||n.includes("hydration")?"Remember to stay hydrated! Try setting a water reminder or keeping a bottle at your desk.":n.includes("motivation")&&t!==null&&t<0?"Feeling unmotivated? Try a short walk, a new workout, or listen to an uplifting playlist!":(n.includes("work")||n.includes("meeting"))&&(n.includes("stress")||n.includes("tired"))?"Work can be draining. Take a mindful break or try a breathing exercise after your next meeting.":n.includes("workout")&&t!==null&&t>0?"Awesome job on your workout! Keep up the great work and celebrate your progress!":t!==null&&t<-.3?"It's okay to have tough days. Be kind to yourself and try a wellness activity you enjoy.":t!==null&&t>.5?"You're on a roll! Keep up the positive momentum!":null}function Tje(){const{user:t}=bn(),[e,n]=A.useState([]),[s,r]=A.useState({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),[i,o]=A.useState(!1),[a,c]=A.useState(null),[d,f]=A.useState(!0),[m,g]=A.useState(!1),[E,S]=A.useState(""),[N,C]=A.useState(null),[x,v]=A.useState(!1),[I,j]=A.useState(null),L=new Date().toISOString().split("T")[0];A.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const b=await fi.fetchWorkoutsByUser(t.uid);n(b.workouts||[])}catch(b){console.error("Error fetching workouts:",b),S("Failed to load workouts")}finally{f(!1)}})()},[t]);const M=P=>{const{name:b,value:re}=P.target;r(de=>({...de,[b]:re}))},w=async P=>{if(P.preventDefault(),console.log("🚀 Workout submit started"),console.log("📊 Form data:",s),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),S("Please log in to save workouts");return}if(!s.title||!s.durationMinutes||!s.date){S("Please fill in all required fields");return}try{g(!0),S("");let b;if(s.date){const X=s.date.split("-"),Z=parseInt(X[0]),z=parseInt(X[1]),J=parseInt(X[2]),ne=new Date;b=new Date(Z,z-1,J,ne.getHours(),ne.getMinutes(),ne.getSeconds())}else b=$.getCurrentLocalTime();const re={title:s.title,type:s.type,durationMinutes:parseInt(s.durationMinutes),date:b,notes:s.notes,caloriesBurned:s.caloriesBurned?parseInt(s.caloriesBurned):0};let de;if(i&&a)de=await fi.updateWorkout(t.uid,a,re),n(X=>X.map(Z=>Z.id===a?{...Z,...re}:Z)),o(!1),c(null);else{const X=await Ry(s.notes);C({score:X.sentiment}),v(X.sentiment!==null),j(Dy(X.sentiment,X.entities));const Z={...re,sentiment:X.sentiment,entities:X.entities};de=await fi.logWorkout(t.uid,Z),n(z=>[{...Z,id:de.id},...z])}r({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),S("")}catch(b){console.error("💥 Workout logging error:",b),S("Failed to save workout. Please try again.")}finally{g(!1)}},y=P=>{var re,de;o(!0),c(P.id);const b=P.date instanceof Date?P.date.toISOString().split("T")[0]:new Date(P.date).toISOString().split("T")[0];r({date:b,durationMinutes:((re=P.durationMinutes)==null?void 0:re.toString())||"",title:P.title||"",type:P.type||"General",notes:P.notes||"",caloriesBurned:((de=P.caloriesBurned)==null?void 0:de.toString())||""})},T=async P=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this workout?"))try{await fi.deleteWorkout(t.uid,P),n(b=>b.filter(re=>re.id!==P))}catch(b){console.error("Error deleting workout:",b),S("Failed to delete workout")}},k=()=>{o(!1),c(null),r({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""})},R=e.filter(P=>(P.date instanceof Date?P.date.toISOString().split("T")[0]:new Date(P.date).toISOString().split("T")[0])===L);return d?u.jsx("div",{className:"workout-loading",children:"Loading workouts..."}):u.jsxs("div",{className:"workout-page",children:[u.jsxs("div",{className:"workout-card",children:[u.jsx("h1",{className:"workout-title",children:i?"Edit Workout Session":"Log Workout Session"}),E&&u.jsx("div",{className:"error-message",children:E}),u.jsxs("form",{onSubmit:w,className:"workout-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:s.date,onChange:M,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Title",u.jsx("input",{type:"text",name:"title",value:s.title,onChange:M,className:"form-input",placeholder:"e.g., Morning Run, Gym Session",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Type",u.jsxs("select",{name:"type",value:s.type,onChange:M,className:"form-input",children:[u.jsx("option",{value:"General",children:"General"}),u.jsx("option",{value:"Cardio",children:"Cardio"}),u.jsx("option",{value:"Strength",children:"Strength Training"}),u.jsx("option",{value:"Yoga",children:"Yoga"}),u.jsx("option",{value:"Running",children:"Running"}),u.jsx("option",{value:"Cycling",children:"Cycling"}),u.jsx("option",{value:"Swimming",children:"Swimming"}),u.jsx("option",{value:"Walking",children:"Walking"}),u.jsx("option",{value:"HIIT",children:"HIIT"}),u.jsx("option",{value:"Other",children:"Other"})]})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration / Length (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:s.durationMinutes,onChange:M,className:"form-input",min:"1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Calories Burned (Optional)",u.jsx("input",{type:"number",name:"caloriesBurned",value:s.caloriesBurned,onChange:M,className:"form-input",min:"0",placeholder:"0"})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:s.notes,onChange:M,className:"form-input form-textarea",placeholder:"How did it feel? Any achievements?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Workout":"Log Workout"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:k,disabled:m,children:"Cancel"})]})]})]}),u.jsxs("div",{className:"workout-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Workouts (",R.length,")"]}),R.length===0?u.jsx("p",{className:"no-workouts",children:"No workouts logged for today. Start your fitness journey!"}):u.jsx("ul",{className:"log-list",children:R.map(P=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"workout-info",children:[u.jsx("span",{className:"workout-title-display",children:P.title}),u.jsx("span",{className:"workout-type",children:P.type}),u.jsxs("span",{className:"workout-duration",children:[P.durationMinutes," min"]}),P.caloriesBurned>0&&u.jsxs("span",{className:"workout-calories",children:[P.caloriesBurned," cal"]}),P.notes&&u.jsx("span",{className:"workout-notes",children:P.notes})]}),u.jsxs("div",{className:"workout-actions",children:[u.jsx("button",{onClick:()=>y(P),className:"edit-button",disabled:m,children:"Edit"}),u.jsx("button",{onClick:()=>T(P.id),className:"delete-button",disabled:m,children:"Delete"})]})]},P.id))})]}),N&&x&&u.jsx("div",{className:"sentiment-modal-overlay",children:u.jsxs("div",{className:"sentiment-modal",children:[u.jsxs("span",{className:"sentiment-message",children:[N.score>0&&"Your note sounds positive! 😊",N.score<0&&"Your note sounds a bit negative. 😟",N.score===0&&"Your note sounds neutral. 😐"]}),I&&u.jsxs("div",{className:"ai-recommendation",children:[u.jsx("strong",{children:"AI Suggestion:"})," ",I]}),u.jsx("button",{className:"close-modal-btn",onClick:()=>v(!1),children:"Dismiss"})]})})]})}const Xs={silence:{name:"Silence",description:"Pure silence for traditional meditation",icon:"🤫",neurological:"Promotes introspection and self-awareness",frequency:null,baseFreq:null},pink_noise_rain:{name:"Pink Noise Rain",description:"Synthetic pink noise for deep relaxation",icon:"🌧️",neurological:"Pink noise (1/f) - enhances deep sleep and memory consolidation",frequency:"pink_noise",baseFreq:200,waveType:"sawtooth"},alpha_waves:{name:"Ocean Waves",description:"Realistic ocean waves with alpha wave entrainment",icon:"🌊",neurological:"Ocean rhythms (0.1 Hz) naturally entrain alpha waves (8-12 Hz) for relaxation",frequency:"ocean_waves",waveFrequency:.1,baseFreq:60,highFreq:200,alphaCarrier:200,alphaBeat:10,waveType:"sine"},earth_frequency:{name:"Earth Resonance",description:"Schumann resonance for grounding",icon:"🌲",neurological:"Earth frequency (7.83 Hz) - natural grounding and balance",frequency:"earth_binaural",carrierFreq:136.1,waveType:"sine"},white_noise:{name:"White Noise",description:"Full spectrum noise for focus",icon:"📻",neurological:"White noise - masks distractions, improves concentration",frequency:"white_noise",baseFreq:440,waveType:"square"},gamma_focus:{name:"Gamma Focus",description:"High-frequency binaural beats for peak concentration",icon:"🎧",neurological:"Gamma waves (40 Hz) - heightened awareness and cognitive performance",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},theta_deep:{name:"Theta Deep State",description:"Deep theta waves for profound meditation",icon:"🌙",neurological:"Theta waves (6 Hz) - deep meditation, creativity, and memory consolidation",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},healing_bowls:{name:"Healing Harmonics",description:"432 Hz healing frequency with natural harmonics",icon:"🎵",neurological:'432 Hz "healing frequency" with harmonic overtones for cellular resonance',frequency:"harmonic",baseFreq:432,harmonics:[432,648,864,1296],waveType:"triangle",premium:!0},delta_deep_sleep:{name:"Delta Deep Sleep",description:"0.5-4 Hz for deep sleep and regeneration",icon:"😴",neurological:"Delta waves (0.5-4 Hz) - deep sleep, physical healing, and immune system boost",frequency:"delta",baseFreq:2,binauralBeat:2,leftEar:200,rightEar:202,waveType:"sine",premium:!0},theta_creativity:{name:"Theta Creativity",description:"4-8 Hz for creativity and insight",icon:"🎨",neurological:"Theta waves (4-8 Hz) - enhanced creativity, insight, and problem-solving",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},alpha_relaxation:{name:"Alpha Relaxation",description:"8-12 Hz for relaxation and stress reduction",icon:"😌",neurological:"Alpha waves (8-12 Hz) - relaxation, stress reduction, and improved learning",frequency:"alpha",baseFreq:10,binauralBeat:10,leftEar:200,rightEar:210,waveType:"sine",premium:!0},beta_focus:{name:"Beta Focus",description:"13-30 Hz for focus and alertness",icon:"🎯",neurological:"Beta waves (13-30 Hz) - focused attention, alertness, and cognitive performance",frequency:"beta",baseFreq:20,binauralBeat:20,leftEar:200,rightEar:220,waveType:"sine",premium:!0},gamma_insight:{name:"Gamma Insight",description:"30-100 Hz for insight and peak performance",icon:"💡",neurological:"Gamma waves (30-100 Hz) - insight, peak performance, and heightened awareness",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},anxiety_relief_528:{name:"Anxiety Relief (528 Hz)",description:"528 Hz frequency for anxiety and stress relief",icon:"🧘",neurological:'528 Hz "Love frequency" - reduces anxiety, promotes healing, and DNA repair',frequency:"single_tone",baseFreq:528,waveType:"sine",premium:!0},depression_lift_639:{name:"Depression Lift (639 Hz)",description:"639 Hz frequency for emotional balance",icon:"🌈",neurological:'639 Hz "Connection frequency" - improves relationships, emotional balance, and communication',frequency:"single_tone",baseFreq:639,waveType:"sine",premium:!0},confidence_boost_741:{name:"Confidence Boost (741 Hz)",description:"741 Hz frequency for self-expression and confidence",icon:"💪",neurological:'741 Hz "Expression frequency" - enhances self-expression, confidence, and creativity',frequency:"single_tone",baseFreq:741,waveType:"sine",premium:!0},intuition_852:{name:"Intuition (852 Hz)",description:"852 Hz frequency for intuition and spiritual awareness",icon:"🔮",neurological:'852 Hz "Intuition frequency" - enhances intuition, spiritual awareness, and inner wisdom',frequency:"single_tone",baseFreq:852,waveType:"sine",premium:!0},solfeggio_396:{name:"Liberation (396 Hz)",description:"396 Hz Solfeggio frequency for fear and guilt release",icon:"🕊️",neurological:'396 Hz "Liberation frequency" - releases fear, guilt, and negative emotions',frequency:"single_tone",baseFreq:396,waveType:"sine",premium:!0},solfeggio_417:{name:"Transformation (417 Hz)",description:"417 Hz Solfeggio frequency for change and transformation",icon:"🦋",neurological:'417 Hz "Transformation frequency" - facilitates change, transformation, and new beginnings',frequency:"single_tone",baseFreq:417,waveType:"sine",premium:!0},solfeggio_963:{name:"Awakening (963 Hz)",description:"963 Hz Solfeggio frequency for spiritual awakening",icon:"✨",neurological:'963 Hz "Awakening frequency" - spiritual awakening, connection to higher consciousness',frequency:"single_tone",baseFreq:963,waveType:"sine",premium:!0}},Eu={mindfulness:{name:"Mindfulness",description:"Present-moment awareness practice",duration:[5,10,15,20],icon:"🧘‍♀️"},breathing:{name:"Breathing",description:"Focused breathwork exercises",duration:[3,5,10],icon:"💨"},body_scan:{name:"Body Scan",description:"Progressive muscle relaxation",duration:[10,15,20],icon:"🫁"},loving_kindness:{name:"Loving Kindness",description:"Compassion and heart-opening meditation",duration:[5,10,15],icon:"💖"},flow_state:{name:"Flow State",description:"Neurologically optimized for peak performance",duration:[5,7,10],icon:"🎯",premium:!0}};function Rx({children:t,fallback:e,showUpgrade:n=!0,feature:s="this feature",className:r=""}){const{isPremium:i,upgradeToPremium:o}=bn();return i?t:e||u.jsx("div",{className:`premium-gate ${r}`,children:u.jsxs("div",{className:"premium-lock",children:[u.jsx("div",{className:"lock-icon",children:"🔒"}),u.jsx("h3",{children:"Premium Feature"}),u.jsxs("p",{children:["Upgrade to unlock ",s]}),n&&u.jsx("button",{onClick:al,className:"unlock-button",children:"Upgrade to Premium - $4.99/month"})]})})}function Ije(){const{user:t,isPremium:e}=bn(),[n,s]=A.useState([]),[r,i]=A.useState({date:$.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),[o,a]=A.useState(!1),[c,d]=A.useState(null),[f,m]=A.useState(!0),[g,E]=A.useState(!1),[S,N]=A.useState(""),[C,x]=A.useState(null),[v,I]=A.useState(!1),[j,L]=A.useState([]),[M,w]=A.useState(null),[y,T]=A.useState(""),[k,R]=A.useState(""),[P,b]=A.useState(""),[re,de]=A.useState(!1),[X,Z]=A.useState(0),[z,J]=A.useState(5),[ne,fe]=A.useState(!1),[he,ke]=A.useState(!1),[Ee,dt]=A.useState("silence");A.useEffect(()=>{console.log("🔍 currentSoundscape changed to:",Ee)},[Ee]);const[qt,Wt]=A.useState(""),[se,Te]=A.useState(null),[xe,Je]=A.useState(null),[De,gt]=A.useState(null),[$i,ga]=A.useState(null),[ya,va]=A.useState(null),[_a,kl]=A.useState(!1),[wa,qi]=A.useState(!1),js=A.useRef(null);$.formatLocalDate(new Date),A.useEffect(()=>{(()=>{const B="wakeLock"in navigator;kl(B),console.log("🔒 Wake Lock API supported:",B)})()},[]),A.useEffect(()=>{const D=async()=>{if(t!=null&&t.uid)try{m(!0),console.log("🌍 Fetching meditations for timezone:",$.getUserTimezone());const G=((await ar.fetchMeditationsByUser(t.uid)).meditations||[]).map(K=>({...K,localDate:$.formatLocalDate(K.date),localDateTime:$.formatLocalDateTime(K.date),relativeTime:$.getRelativeTime(K.date),isToday:$.isToday(K.date)}));s(G),console.log("🧘 Loaded meditations with timezone data:",G.length)}catch(B){console.error("Error fetching meditations:",B),N("Failed to load meditation sessions")}finally{m(!1)}};t!=null&&t.uid&&D()},[t]),A.useEffect(()=>(console.log("🎵 Audio effect triggered - isSessionActive:",re,"currentSoundscape:",Ee),re&&Ee!=="silence"&&(console.log("🔊 Setting up audio for soundscape:",Ee),yt()),()=>{if(De)try{Array.isArray(De)?De.forEach(D=>{D.stop&&D.stop()}):De.stop&&De.stop()}catch(D){console.log("Audio cleanup error:",D)}}),[re,Ee]),A.useEffect(()=>(re&&!ne?js.current=setInterval(()=>{Z(D=>{const B=D+1;return B>=180&&!he&&(ke(!0),Qh()),B})},1e3):clearInterval(js.current),()=>clearInterval(js.current)),[re,ne,he]),A.useEffect(()=>{re&&X>=z*60&&(console.log("⏰ Timer completed! Auto-stopping session..."),console.log("📊 Final session stats:"),console.log("  - Duration:",Math.floor(X/60),"minutes"),console.log("  - Target:",z,"minutes"),console.log("  - Soundscape:",Ee),console.log("  - Deep state achieved:",he),console.log("  - Start time:",$.formatLocalDateTime(se)),Yh(),ba())},[re,X,z,Ee,he,se]);const Os=n.filter(D=>D.isToday||$.isToday(D.date));console.log("📋 Today's meditations:",Os.length),A.useEffect(()=>()=>{Ta(),js.current&&clearInterval(js.current)},[]);const Ea=async()=>{try{if(!_a)return console.log("🔒 Wake Lock API not supported, using fallback methods"),!1;const D=await navigator.wakeLock.request("screen");return va(D),qi(!0),console.log("🔒 Wake lock activated"),D.addEventListener("release",()=>{console.log("🔒 Wake lock was released"),qi(!1),va(null)}),!0}catch(D){return console.error("🔒 Failed to request wake lock:",D),!1}},Ta=()=>{try{ya&&(ya.release(),va(null),qi(!1),console.log("🔒 Wake lock released"))}catch(D){console.error("🔒 Error releasing wake lock:",D)}},ht=()=>!_a&&(console.log("🔒 Using fallback keep-awake methods"),xe&&xe.state==="suspended"&&xe.resume(),"vibrate"in navigator)?setInterval(()=>{navigator.vibrate(1)},3e4):null,yt=()=>{try{const D=new(window.AudioContext||window.webkitAudioContext);Je(D);const B=D.createGain();B.connect(D.destination),B.gain.value=.1,ga(B);const G=Xs[Ee];if(!(G!=null&&G.frequency)){console.log("🔇 Silence selected");return}switch(G.frequency){case"gamma":case"theta":Wi(D,B,G);break;case"alpha":Al(D,B,G);break;case"ocean_waves":Ia(D,B,G);break;case"earth_binaural":Nl(D,B,G);break;case"harmonic":Br(D,B,G.harmonics||[G.baseFreq]);break;case"pink_noise":Pl(D,B);break;case"white_noise":Cl(D,B);break;case"single_tone":case"natural":Kh(D,B,G.baseFreq,G.waveType||"sine");break;default:console.log("🔇 Unknown frequency type:",G.frequency)}}catch(D){console.error("Audio setup failed:",D)}},Wi=(D,B,G)=>{const K=D.createOscillator();K.frequency.setValueAtTime(G.leftEar,D.currentTime),K.type=G.waveType||"sine";const ce=D.createOscillator();ce.frequency.setValueAtTime(G.rightEar,D.currentTime),ce.type=G.waveType||"sine";const ie=D.createStereoPanner();ie.pan.value=-1;const pe=D.createStereoPanner();pe.pan.value=1,K.connect(ie),ie.connect(B),ce.connect(pe),pe.connect(B),K.start(),ce.start(),gt([K,ce]),console.log(`🎧 Binaural beats: ${G.leftEar}Hz (L) / ${G.rightEar}Hz (R) = ${G.binauralBeat}Hz beat`)},Al=(D,B,G)=>{const ce=G.baseFreq,ie=D.createOscillator();ie.frequency.setValueAtTime(200,D.currentTime),ie.type=G.waveType||"sine";const pe=D.createOscillator();pe.frequency.setValueAtTime(200+ce,D.currentTime),pe.type=G.waveType||"sine";const Ke=D.createStereoPanner();Ke.pan.value=-1;const ot=D.createStereoPanner();ot.pan.value=1,ie.connect(Ke),Ke.connect(B),pe.connect(ot),ot.connect(B),ie.start(),pe.start(),gt([ie,pe]),console.log(`🌊 Alpha binaural: 200Hz (L) / ${200+ce}Hz (R) = ${ce}Hz beat`)},Nl=(D,B,G)=>{const K=G.carrierFreq||136.1,ce=7.83,ie=D.createOscillator();ie.frequency.setValueAtTime(K,D.currentTime),ie.type=G.waveType||"sine";const pe=D.createOscillator();pe.frequency.setValueAtTime(K+ce,D.currentTime),pe.type=G.waveType||"sine";const Ke=D.createStereoPanner();Ke.pan.value=-1;const ot=D.createStereoPanner();ot.pan.value=1,ie.connect(Ke),Ke.connect(B),pe.connect(ot),ot.connect(B),ie.start(),pe.start(),gt([ie,pe]),console.log(`🌲 Earth binaural: ${K}Hz (L) / ${K+ce}Hz (R) = ${ce}Hz Schumann beat`)},Kh=(D,B,G,K="sine")=>{const ce=D.createOscillator();ce.frequency.setValueAtTime(G,D.currentTime),ce.type=K,ce.connect(B),ce.start(),gt(ce),console.log(`🎵 Single tone: ${G}Hz (${K})`)},Br=(D,B,G)=>{const K=G.map(ce=>{const ie=D.createOscillator();ie.frequency.setValueAtTime(ce,D.currentTime),ie.type="triangle";const pe=D.createGain();return pe.gain.value=.3/G.length,ie.connect(pe),pe.connect(B),ie.start(),ie});gt(K),console.log(`🎼 Harmonics: ${G.join(", ")}Hz`)},Pl=(D,B)=>{const G=D.sampleRate*2,K=D.createBuffer(1,G,D.sampleRate),ce=K.getChannelData(0);for(let pe=0;pe<G;pe++){let Ke=0;for(let ot=0;ot<5;ot++)Ke+=(Math.random()*2-1)/Math.pow(2,ot);ce[pe]=Ke*.1}const ie=D.createBufferSource();ie.buffer=K,ie.loop=!0,ie.connect(B),ie.start(),gt(ie),console.log("🌧️ Pink noise generated")},Cl=(D,B)=>{const G=D.sampleRate*2,K=D.createBuffer(1,G,D.sampleRate),ce=K.getChannelData(0);for(let pe=0;pe<G;pe++)ce[pe]=(Math.random()*2-1)*.1;const ie=D.createBufferSource();ie.buffer=K,ie.loop=!0,ie.connect(B),ie.start(),gt(ie),console.log("📻 White noise generated")},Ia=(D,B,G)=>{const K=[],ce=D.createOscillator();ce.frequency.setValueAtTime(20,D.currentTime),ce.type="sine";const ie=D.createGain();ie.gain.value=.4;const pe=D.createOscillator();pe.frequency.setValueAtTime(396,D.currentTime),pe.type="sine";const Ke=D.createGain();Ke.gain.value=.05;const ot=D.createOscillator();ot.frequency.setValueAtTime(.15,D.currentTime),ot.type="sine";const Fn=D.createGain();Fn.gain.value=.3,ot.connect(Fn),Fn.connect(ie.gain),ce.connect(ie),ie.connect(B),pe.connect(Ke),Ke.connect(B);const jl=D.createBuffer(1,D.sampleRate*8,D.sampleRate),Ol=jl.getChannelData(0);let Vs=0;for(let Ze=0;Ze<Ol.length;Ze++){const xt=Math.random()*2-1;Vs=(Vs+xt*.02)*.99;const Ht=Math.sin(Ze*.001)*.3+.7;Ol[Ze]=Vs*Ht*.5}const Ms=D.createBufferSource();Ms.buffer=jl,Ms.loop=!0;const ss=D.createOscillator();ss.frequency.setValueAtTime(432,D.currentTime),ss.type="triangle";const rs=D.createGain();rs.gain.value=.08;const Gt=D.createBiquadFilter();Gt.type="bandpass",Gt.frequency.setValueAtTime(300,D.currentTime),Gt.Q.setValueAtTime(.8,D.currentTime);const Wr=D.createGain();Wr.gain.value=.3;const Ls=D.createOscillator();Ls.frequency.setValueAtTime(.13,D.currentTime),Ls.type="triangle";const Fs=D.createGain();Fs.gain.value=.25,Ls.connect(Fs),Fs.connect(Wr.gain),Fs.connect(rs.gain),Ms.connect(Gt),Gt.connect(Wr),Wr.connect(B),ss.connect(rs),rs.connect(B);const Gi=D.createBuffer(1,D.sampleRate*6,D.sampleRate),ka=Gi.getChannelData(0);for(let Ze=0;Ze<ka.length;Ze++){let xt=0;for(let as=0;as<3;as++)xt+=(Math.random()*2-1)*Math.pow(.5,as);const Ht=Math.random()>.98?(Math.random()*2-1)*.3:0;ka[Ze]=(xt+Ht)*.15}const zs=D.createBufferSource();zs.buffer=Gi,zs.loop=!0;const Gr=D.createOscillator();Gr.frequency.setValueAtTime(528,D.currentTime),Gr.type="sine";const is=D.createGain();is.gain.value=.06;const Hr=D.createBiquadFilter();Hr.type="highpass",Hr.frequency.setValueAtTime(1500,D.currentTime);const Us=D.createGain();Us.gain.value=.12;const kn=D.createOscillator();kn.frequency.setValueAtTime(.5,D.currentTime),kn.type="sine";const mn=D.createGain();if(mn.gain.value=.04,kn.connect(mn),mn.connect(Us.gain),mn.connect(is.gain),zs.connect(Hr),Hr.connect(Us),Us.connect(B),Gr.connect(is),is.connect(B),G.alphaCarrier&&G.alphaBeat){const Ze=D.createOscillator();Ze.frequency.setValueAtTime(G.alphaCarrier,D.currentTime),Ze.type="sine";const xt=D.createOscillator();xt.frequency.setValueAtTime(G.alphaCarrier+G.alphaBeat,D.currentTime),xt.type="sine";const Ht=D.createGain();Ht.gain.value=.03;const as=D.createStereoPanner();as.pan.value=-1;const Ki=D.createStereoPanner();Ki.pan.value=1,Ze.connect(as),as.connect(Ht),xt.connect(Ki),Ki.connect(Ht),Ht.connect(B),K.push(Ze,xt),Ze.start(),xt.start()}const Hi=D.createBuffer(1,D.sampleRate*10,D.sampleRate),Vl=Hi.getChannelData(0);for(let Ze=0;Ze<Vl.length;Ze++){let xt=0;for(let Ht=0;Ht<4;Ht++)xt+=(Math.random()*2-1)/Math.pow(2,Ht*.7);Vl[Ze]=xt*.2}const Bs=D.createBufferSource();Bs.buffer=Hi,Bs.loop=!0;const $s=D.createBiquadFilter();$s.type="bandpass",$s.frequency.setValueAtTime(150,D.currentTime),$s.Q.setValueAtTime(.4,D.currentTime);const Kr=D.createGain();Kr.gain.value=.15;const os=D.createOscillator();os.frequency.setValueAtTime(.07,D.currentTime),os.type="sine";const Qr=D.createGain();Qr.gain.value=.1,os.connect(Qr),Qr.connect(Kr.gain),Bs.connect($s),$s.connect(Kr),Kr.connect(B),ce.start(),pe.start(),ot.start(),Ms.start(),ss.start(),Ls.start(),zs.start(),Gr.start(),kn.start(),Bs.start(),os.start(),K.push(ce,pe,ot,Ms,ss,Ls,zs,Gr,kn,Bs,os),gt(K),console.log("🌊✨ Healing Ocean Waves: 396Hz (Liberation) + 432Hz (Earth) + 528Hz (Love) + Alpha binaural beats + Realistic ocean sounds")},Qh=()=>{console.log("🌟 Deep state achieved at:",$.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Deep State Achieved! 🧘‍♀️",{body:`You've entered a deep meditative state at ${$.formatLocalTime(new Date)}. Well done!`,icon:"/meditation-icon.png"})},Yh=()=>{console.log("🎉 Session completed at:",$.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Meditation Complete! 🎉",{body:`Great job! You completed your ${z}-minute meditation session.`,icon:"/meditation-icon.png"});try{const D=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAcugtTxzD2sLYPs7lkgCBl5gQEDgVs+l4G6tGEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAc=");D.volume=.3,D.play().catch(()=>{})}catch{}},xa=async(D,B,G)=>{const K=$.getCurrentLocalTime();if(console.log("🌍 Starting meditation session in timezone:",$.getUserTimezone()),console.log("🧘 Session start time:",$.formatLocalDateTime(K)),console.log("🎵 Selected soundscape:",G),J(D),Z(0),de(!0),fe(!1),ke(!1),Te(K),!await Ea()){console.log("🔒 Wake lock failed, using fallback methods");const ie=ht();ie&&(js.current=ie)}"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},Rl=()=>{const D=$.getCurrentLocalTime();console.log("⏸️ Session paused at:",$.formatLocalDateTime(D)),fe(!ne),De&&xe&&(ne?xe.resume():xe.suspend())},ba=async()=>{const D=$.getCurrentLocalTime();if(console.log("⏹️ Session ended at:",$.formatLocalDateTime(D)),console.log("📊 Session duration:",Math.floor(X/60),"minutes"),console.log("🎯 Target duration:",z,"minutes"),console.log("✅ Session completed?",X>=z*60),Ta(),De){if(Array.isArray(De))De.forEach(B=>{try{B.stop?B.stop():B.disconnect&&B.disconnect()}catch(G){console.log("Oscillator cleanup:",G)}});else try{De.stop?De.stop():De.disconnect&&De.disconnect()}catch(B){console.log("Oscillator cleanup:",B)}gt(null)}if(xe){try{await xe.close()}catch(B){console.log("AudioContext cleanup:",B)}Je(null)}if(de(!1),fe(!1),X>=60){console.log("💾 Auto-logging session (duration >= 1 minute)"),console.log("🔍 Session time check:",X,"seconds"),console.log("🔍 Firebase user:",t==null?void 0:t.uid),console.log("🔍 Session start time:",se);try{await $r(),console.log("✅ Auto-log completed successfully")}catch(B){console.error("❌ Auto-log failed:",B)}}else console.log("⚠️ Session too short, not logging (< 1 minute)");console.log("🔇 Audio stopped and session ended successfully")},$r=async()=>{var D;if(!(!(t!=null&&t.uid)||!se))try{console.log("📝 Auto-logging session with timezone data"),console.log("🧘 Session start time:",$.formatLocalDateTime(se)),console.log("⏰ Session duration:",Math.floor(X/60),"minutes");const B={date:se,durationMinutes:Math.floor(X/60),type:"mindfulness",soundscape:Ee,completed:X>=z*60,deepStateAchieved:he,moodBefore:qt,targetDuration:z,sessionStartTime:se,sessionEndTime:$.getCurrentLocalTime(),userTimezone:$.getUserTimezone(),notes:r.notes,sentiment:r.notes?(D=Cx(r.notes))==null?void 0:D.score:null};console.log("📊 Session data being saved:",B);const G=await ar.logMeditation(t.uid,B);console.log("✅ API Response:",G);const K={...G.meditation,localDate:$.formatLocalDate(G.meditation.date),localDateTime:$.formatLocalDateTime(G.meditation.date),relativeTime:$.getRelativeTime(G.meditation.date),isToday:$.isToday(G.meditation.date)};console.log("🔄 Adding meditation to UI:",K),console.log("📅 Is today?",K.isToday),console.log("📅 Local date:",K.localDate),s(ce=>{const ie=[K,...ce];return console.log("📋 Updated meditations list:",ie.length,"total"),ie}),console.log("✅ Session auto-logged and added to UI successfully")}catch(B){console.error("💥 Error auto-logging session:",B),console.error("💥 Error details:",B.message)}},Sn=D=>{const{name:B,value:G}=D.target;i(K=>({...K,[B]:G}))},Sa=async D=>{if(D.preventDefault(),!!(t!=null&&t.uid))try{E(!0),N("");let B;if(r.date){const K=r.date.split("-"),ce=parseInt(K[0]),ie=parseInt(K[1]),pe=parseInt(K[2]),Ke=new Date;B=new Date(ce,ie-1,pe,Ke.getHours(),Ke.getMinutes(),Ke.getSeconds())}else B=$.getCurrentLocalTime();const G={...r,date:B,durationMinutes:parseInt(r.durationMinutes),userTimezone:$.getUserTimezone()};if(o)await ar.updateMeditation(t.uid,c,G),s(K=>K.map(ce=>ce.id===c?{...ce,...G,localDate:$.formatLocalDate(B),localDateTime:$.formatLocalDateTime(B),relativeTime:$.getRelativeTime(B),isToday:$.isToday(B)}:ce)),a(!1),d(null);else{const K=await Ry(r.notes);x({score:K.sentiment}),I(K.sentiment!==null),w(Dy(K.sentiment,K.entities));const ce={...G,sentiment:K.sentiment,entities:K.entities},ie=await ar.logMeditation(t.uid,ce),pe={...ie.meditation,localDate:$.formatLocalDate(ie.meditation.date),localDateTime:$.formatLocalDateTime(ie.meditation.date),relativeTime:$.getRelativeTime(ie.meditation.date),isToday:$.isToday(ie.meditation.date)};s(Ke=>[pe,...Ke])}i({date:$.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),N("")}catch(B){console.error("Error saving meditation:",B),N(o?"Failed to update meditation":"Failed to log meditation")}finally{E(!1)}},ns=D=>{var B;console.log("✏️ Editing meditation from:",$.formatLocalDateTime(D.date)),i({date:$.formatLocalDate(D.date),durationMinutes:((B=D.durationMinutes)==null?void 0:B.toString())||"",type:D.type||"mindfulness",soundscape:D.soundscape||"silence",moodBefore:D.moodBefore||"",moodAfter:D.moodAfter||"",notes:D.notes||""}),a(!0),d(D.id)},Dl=async D=>{if(!(t!=null&&t.uid))return;const B=n.find(K=>K.id===D),G=`Are you sure you want to delete the meditation session from ${(B==null?void 0:B.localDateTime)||"unknown time"}?`;if(window.confirm(G))try{await ar.deleteMeditation(t.uid,D),s(K=>K.filter(ce=>ce.id!==D)),console.log("🗑️ Meditation deleted successfully")}catch(K){console.error("Error deleting meditation:",K),N("Failed to delete meditation")}},qr=D=>{const B=Math.floor(D/60),G=D%60;return`${B}:${G.toString().padStart(2,"0")}`};return f?u.jsxs("div",{className:"meditation-loading",children:[u.jsx("p",{children:"Loading meditations..."}),u.jsxs("small",{children:["Timezone: ",$.getUserTimezone()]})]}):u.jsxs("div",{className:"meditation-page",children:[re&&u.jsxs("div",{className:"session-interface",children:[u.jsxs("div",{className:"session-header",children:[u.jsx("h2",{children:"🧘‍♀️ Meditation Session"}),u.jsxs("div",{className:"session-info",children:[u.jsxs("div",{className:"session-soundscape",children:[Xs[Ee].icon," ",Xs[Ee].name]}),u.jsxs("div",{className:"session-time-info",children:["Started: ",se?$.formatLocalTime(se):"Now",u.jsx("br",{}),u.jsx("small",{children:$.getUserTimezone()})]}),u.jsx("div",{className:"wake-lock-status",children:wa?u.jsx("span",{className:"wake-lock-active",title:"Screen will stay awake during meditation",children:"🔒 Screen Awake"}):_a?u.jsx("span",{className:"wake-lock-inactive",title:"Screen may sleep during meditation",children:"⚠️ Screen May Sleep"}):u.jsx("span",{className:"wake-lock-unsupported",title:"Wake lock not supported on this device",children:"📱 Using Fallback"})})]})]}),u.jsxs("div",{className:"session-timer",children:[u.jsxs("div",{className:"time-display",children:[u.jsx("span",{className:"current-time",children:qr(X)}),u.jsxs("span",{className:"target-time",children:["/ ",qr(z*60)]})]}),u.jsx("div",{className:"progress-ring",children:u.jsx("div",{className:"meditation-progress-fill",style:{background:`conic-gradient(#4CAF50 ${X/(z*60)*360}deg, #eee 0deg)`}})})]}),u.jsxs("div",{className:"session-status",children:[he&&u.jsxs("div",{className:"deep-state-indicator",children:["✨ Deep State Achieved at ",$.formatLocalTime(new Date)," ✨"]}),u.jsx("div",{className:"neurological-info",children:u.jsx("p",{children:Xs[Ee].neurological})})]}),u.jsxs("div",{className:"session-controls",children:[u.jsxs("button",{onClick:Rl,className:"pause-btn",children:[ne?"▶️":"⏸️"," ",ne?"Resume":"Pause"]}),u.jsx("button",{onClick:ba,className:"stop-btn",children:"⏹️ End Session"})]})]}),!re&&u.jsxs("div",{className:"quick-start",children:[u.jsx("h1",{className:"meditation-title",children:"🧘‍♀️ Meditation Studio"}),u.jsxs("p",{className:"subtitle",children:["Neurologically optimized for deep meditation states",u.jsx("br",{})]}),u.jsxs("div",{className:"soundscape-section",children:[u.jsx("h3",{children:"🎵 Step 1: Choose Your Soundscape"}),u.jsx("div",{className:"soundscape-instructions",children:u.jsx("p",{children:"Select a soundscape below (or choose silence for quiet meditation). Click again to deselect."})}),u.jsx("div",{className:"soundscape-grid",children:Object.entries(Xs).map(([D,B])=>u.jsxs("div",{className:`soundscape-option ${B.premium?"premium":""} ${Ee===D?"selected":""} ${B.premium&&!e?"locked":""}`,children:[u.jsxs("div",{className:"soundscape-header",children:[u.jsx("span",{className:"soundscape-icon",children:B.icon}),B.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsxs("div",{className:"soundscape-content",onClick:G=>{G.stopPropagation(),G.preventDefault(),console.log("🎵 Soundscape clicked:",D,"current selection:",Ee),!B.premium||e?Ee===D?(console.log("🔇 Deselecting soundscape to silence"),dt("silence")):(console.log("🔊 Selecting soundscape:",D),dt(D)):alert("This soundscape requires Clarity Premium. Upgrade to access premium features!")},children:[u.jsx("h4",{children:B.name}),u.jsx("p",{className:"soundscape-description",children:B.description}),u.jsx("small",{className:"neurological-note",children:B.neurological})]}),B.premium&&!e&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"lock-icon",children:"🔒"})})]},D))})]}),u.jsxs("div",{className:"quick-start-grid",children:[u.jsx("h3",{children:"⏰ Step 2: Choose Your Session"}),Object.entries(Eu).map(([D,B])=>u.jsxs("div",{className:`meditation-type ${B.premium?"premium":""}`,children:[u.jsxs("div",{className:"type-header",children:[u.jsx("span",{className:"type-icon",children:B.icon}),u.jsx("h3",{children:B.name}),B.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsx("p",{className:"type-description",children:B.description}),u.jsx("div",{className:"duration-options",children:B.duration.map(G=>u.jsxs("button",{onClick:()=>{qt||Wt(prompt("How are you feeling right now? (😊😔😴😤😌🤔🎉😰)")||"😐"),xa(G,D,Ee)},className:"duration-btn",disabled:B.premium&&!e,children:[G,"min"]},G))})]},D))]})]}),!re&&u.jsxs("div",{className:"meditation-card",children:[u.jsx("h2",{className:"form-title",children:o?"Edit Meditation Session":"Manually Log Session"}),S&&u.jsx("div",{className:"error-message",children:S}),u.jsxs("form",{onSubmit:Sa,className:"meditation-form",children:[u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date (",$.getUserTimezone(),")",u.jsx("input",{type:"date",name:"date",value:r.date,onChange:Sn,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:r.durationMinutes,onChange:Sn,className:"form-input",min:"1",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Meditation Type",u.jsx("select",{name:"type",value:r.type,onChange:Sn,className:"form-input",children:Object.entries(Eu).map(([D,B])=>u.jsx("option",{value:D,children:B.name},D))})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Soundscape Used",u.jsx("select",{name:"soundscape",value:r.soundscape,onChange:Sn,className:"form-input",children:Object.entries(Xs).map(([D,B])=>u.jsx("option",{value:D,children:B.name},D))})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood Before",u.jsxs("select",{name:"moodBefore",value:r.moodBefore,onChange:Sn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"😊",children:"😊 Happy"}),u.jsx("option",{value:"😔",children:"😔 Sad"}),u.jsx("option",{value:"😴",children:"😴 Tired"}),u.jsx("option",{value:"😤",children:"😤 Frustrated"}),u.jsx("option",{value:"😌",children:"😌 Peaceful"}),u.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),u.jsx("option",{value:"🎉",children:"🎉 Excited"}),u.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood After",u.jsxs("select",{name:"moodAfter",value:r.moodAfter,onChange:Sn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"😊",children:"😊 Happy"}),u.jsx("option",{value:"😔",children:"😔 Sad"}),u.jsx("option",{value:"😴",children:"😴 Tired"}),u.jsx("option",{value:"😤",children:"😤 Frustrated"}),u.jsx("option",{value:"😌",children:"😌 Peaceful"}),u.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),u.jsx("option",{value:"🎉",children:"🎉 Excited"}),u.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:r.notes,onChange:Sn,className:"form-input form-textarea",placeholder:"How did the session feel? Any insights?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:g,children:g?o?"Updating...":"Logging...":o?"Update Session":"Log Session"}),o&&u.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{a(!1),d(null),i({date:$.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})},disabled:g,children:"Cancel"})]})]})]}),C&&v&&u.jsx("div",{className:"sentiment-modal-overlay",children:u.jsxs("div",{className:"sentiment-modal",children:[u.jsxs("span",{className:"sentiment-message",children:[C.score>0&&"Your note sounds positive! 😊",C.score<0&&"Your note sounds a bit negative. 😟",C.score===0&&"Your note sounds neutral. 😐"]}),M&&u.jsxs("div",{className:"ai-recommendation",children:[u.jsx("strong",{children:"AI Suggestion:"})," ",M]}),u.jsx("button",{className:"close-modal-btn",onClick:()=>I(!1),children:"Dismiss"})]})}),!re&&u.jsxs("div",{className:"meditation-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Sessions (",Os.length,")",u.jsx("br",{}),u.jsxs("small",{children:[$.formatLocalDate(new Date)," - ",$.getUserTimezone()]})]}),Os.length===0?u.jsxs("p",{className:"no-sessions",children:["No meditation sessions today. Start your mindfulness journey!",u.jsx("br",{}),u.jsxs("small",{children:["Local time: ",$.formatLocalDateTime(new Date)]})]}):u.jsx("ul",{className:"log-list",children:Os.map(D=>{var B,G,K,ce;return u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"meditation-info",children:[u.jsxs("div",{className:"meditation-header",children:[u.jsxs("span",{className:"meditation-type",children:[(B=Eu[D.type])==null?void 0:B.icon," ",((G=Eu[D.type])==null?void 0:G.name)||D.type]}),u.jsxs("span",{className:"meditation-time",children:[D.localDateTime,u.jsxs("small",{children:[" (",D.relativeTime,")"]})]})]}),u.jsxs("div",{className:"meditation-details",children:[u.jsxs("span",{className:"meditation-duration",children:[D.durationMinutes," min"]}),u.jsxs("span",{className:"meditation-soundscape",children:[(K=Xs[D.soundscape])==null?void 0:K.icon," ",(ce=Xs[D.soundscape])==null?void 0:ce.name]}),D.deepStateAchieved&&u.jsx("span",{className:"deep-state-badge",children:"✨ Deep State"}),D.moodBefore&&D.moodAfter&&u.jsxs("span",{className:"mood-change",children:[D.moodBefore," → ",D.moodAfter]})]}),D.notes&&u.jsx("div",{className:"meditation-notes",children:D.notes})]}),u.jsxs("div",{className:"meditation-actions",children:[u.jsx("button",{onClick:()=>ns(D),className:"edit-button",disabled:g,children:"Edit"}),u.jsx("button",{onClick:()=>Dl(D.id),className:"delete-button",disabled:g,children:"Delete"})]})]},D.id)})})]}),!re&&u.jsxs("div",{className:"recommended-videos",children:[u.jsx("h2",{className:"recommended-title",children:"🎥 Guided Meditation Videos"}),u.jsxs("p",{className:"timezone-note",children:["Perfect for any time of day in ",$.getUserTimezone()]}),u.jsxs("div",{className:"video-tiles",children:[u.jsxs("a",{href:"https://www.youtube.com/watch?v=VpHz8Mb13_Y",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"🌸"}),u.jsx("p",{className:"video-title",children:"Relaxation and Positivity"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=CqnWMPuyT0g",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"💖"}),u.jsx("p",{className:"video-title",children:"Self Love"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=056qll-07ak",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"🧠"}),u.jsx("p",{className:"video-title",children:"Stop Thinking"})]})]})]}),u.jsx(Rx,{feature:"exclusive meditation experiences",children:u.jsxs("div",{className:"premium-meditation-features",children:[u.jsx("h3",{children:"🧘‍♀️ Premium Meditation Experience"}),u.jsx("p",{children:"Unlock advanced features designed by neuroscientists:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"🎵 Premium binaural soundscapes"}),u.jsx("li",{children:"📊 Advanced session analytics"}),u.jsx("li",{children:"🧠 Personalized meditation recommendations"}),u.jsx("li",{children:"⏰ Smart session reminders based on your timezone"}),u.jsx("li",{children:"📈 Mood tracking and insights"})]})]})})]})}function xje(){const{user:t}=bn(),[e,n]=A.useState([]),[s,r]=A.useState({date:"",amount:"",type:"water",notes:""}),[i,o]=A.useState(!1),[a,c]=A.useState(null),[d,f]=A.useState(!0),[m,g]=A.useState(!1),[E,S]=A.useState(""),[N,C]=A.useState(0),[x,v]=A.useState(64),[I,j]=A.useState(null),[L,M]=A.useState(!1),[w,y]=A.useState(null);new Date().toISOString().split("T")[0],A.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const z=await tn.fetchWaterIntakeByUser(t.uid);n(z.waterIntakes||[]);const J=await tn.getTodayWaterIntake(t.uid);C(J.totalOz||0),v(64)}catch(z){console.error("Error fetching water data:",z),S("Failed to load water intake data")}finally{f(!1)}})()},[t]);const T=Z=>{const{name:z,value:J}=Z.target;r(ne=>({...ne,[z]:J}))},k=async Z=>{if(Z.preventDefault(),console.log("💧 Water submit started"),console.log("📊 Form data:",s),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),S("Please log in to save water intake");return}if(!s.amount||!s.date){S("Please fill in all required fields");return}try{g(!0),S("");let z;if(s.date){const fe=s.date.split("-"),he=parseInt(fe[0]),ke=parseInt(fe[1]),Ee=parseInt(fe[2]),dt=new Date;console.log("🔍 Water date parsing debug:"),console.log("  Form input:",s.date),console.log("  Split parts:",fe),console.log("  Parsed year:",he),console.log("  Parsed month (human readable):",ke),console.log("  Parsed day:",Ee),console.log("  Month for Date constructor (0-indexed):",ke-1),z=new Date(he,ke-1,Ee,dt.getHours(),dt.getMinutes(),dt.getSeconds()),console.log("📅 Created water date:",z),console.log("📅 Verify - Year:",z.getFullYear()),console.log("📅 Verify - Month (0-indexed):",z.getMonth()),console.log("📅 Verify - Month (human):",z.getMonth()+1),console.log("📅 Verify - Day:",z.getDate()),console.log("📅 Final formatted:",z.toLocaleDateString())}else z=new Date;const J={date:z,amount:parseFloat(s.amount),type:s.type,notes:s.notes};if(console.log("💧 Final water data:",J),console.log("📅 Will be saved as:",J.date.toLocaleDateString()),i)await tn.updateWaterIntake(t.uid,a,J),n(fe=>fe.map(he=>he.id===a?{...he,...J}:he)),o(!1),c(null);else{const fe=await Ry(s.notes);j({score:fe.sentiment}),M(fe.sentiment!==null),y(Dy(fe.sentiment,fe.entities));const he={...J,sentiment:fe.sentiment,entities:fe.entities},ke=await tn.logWaterIntake(t.uid,he);n(Ee=>[ke.waterIntake,...Ee])}const ne=await tn.getTodayWaterIntake(t.uid);C(ne.totalOz||0),r({date:"",amount:"",type:"water",notes:""}),console.log("✅ Water intake logged successfully!")}catch(z){console.error("💥 Water logging error:",z),S(i?"Failed to update water intake":"Failed to log water intake")}finally{g(!1)}},R=Z=>{var J;o(!0),c(Z.id);const z=Z.date instanceof Date?Z.date.toISOString().split("T")[0]:new Date(Z.date).toISOString().split("T")[0];r({date:z,amount:((J=Z.amount)==null?void 0:J.toString())||"",type:Z.type||"water",notes:Z.notes||""})},P=async Z=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this water intake?"))try{await tn.deleteWaterIntake(t.uid,Z),n(J=>J.filter(ne=>ne.id!==Z));const z=await tn.getTodayWaterIntake(t.uid);C(z.totalOz||0)}catch(z){console.error("Error deleting water intake:",z),S("Failed to delete water intake")}},b=()=>{o(!1),c(null),r({date:"",amount:"",type:"water",notes:""})},re=async Z=>{if(t!=null&&t.uid)try{g(!0);const z=new Date,J=new Date(z.getFullYear(),z.getMonth(),z.getDate(),z.getHours(),z.getMinutes(),z.getSeconds());console.log("💧 Quick add date:",J),console.log("📅 Quick add formatted:",J.toLocaleDateString()),await tn.logWaterIntake(t.uid,{date:J,amount:Z,type:"water",notes:"",sentiment:null});const ne=await tn.fetchWaterIntakeByUser(t.uid);n(ne.waterIntakes||[]);const fe=await tn.getTodayWaterIntake(t.uid);C(fe.totalOz||0),console.log("✅ Quick add water successful!")}catch(z){console.error("💥 Error quick adding water:",z),S("Failed to log water intake")}finally{g(!1)}},de=e.filter(Z=>{const z=Z.date instanceof Date?Z.date:new Date(Z.date),J=$.isToday(z);return console.log("🔍 Comparing dates:",{waterDate:z.toLocaleDateString(),today:new Date().toLocaleDateString(),isToday:J,waterDateObj:z,waterDateType:typeof Z.date}),J}),X=Math.min(N/x*100,100);return d?u.jsx("div",{className:"water-loading",children:"Loading water data..."}):u.jsxs("div",{className:"water-page",children:[u.jsxs("div",{className:"water-progress",children:[u.jsx("h2",{children:"Daily Hydration Progress"}),u.jsx("div",{className:"progress-info",children:u.jsx("div",{className:"water-progress-bar",children:u.jsx("div",{className:"water-progress-fill",style:{width:`${X}%`}})})}),N>=x&&u.jsx("div",{className:"goal-achieved",children:"🎉 Daily goal achieved! Great job! 🎉"})]}),u.jsxs("div",{className:"quick-add-section",children:[u.jsx("h3",{children:"Quick Add"}),u.jsxs("div",{className:"quick-add-buttons",children:[u.jsxs("button",{onClick:()=>re(8),className:"quick-add-btn",disabled:m,children:["8 oz",u.jsx("br",{}),u.jsx("small",{children:"Glass"})]}),u.jsxs("button",{onClick:()=>re(16),className:"quick-add-btn",disabled:m,children:["16 oz",u.jsx("br",{}),u.jsx("small",{children:"Bottle"})]}),u.jsxs("button",{onClick:()=>re(20),className:"quick-add-btn",disabled:m,children:["20 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Bottle"})]}),u.jsxs("button",{onClick:()=>re(32),className:"quick-add-btn",disabled:m,children:["32 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Cup"})]})]})]}),u.jsxs("div",{className:"water-card",children:[u.jsx("h1",{className:"water-title",children:i?"Edit Water Intake":"Log Water Intake"}),E&&u.jsx("div",{className:"error-message",children:E}),u.jsxs("form",{onSubmit:k,className:"water-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:s.date,onChange:T,className:"form-input",required:!0})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Amount (oz)",u.jsx("input",{type:"number",name:"amount",value:s.amount,onChange:T,className:"form-input",min:"0.1",step:"0.1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Drink Type",u.jsxs("select",{name:"type",value:s.type,onChange:T,className:"form-input",children:[u.jsx("option",{value:"water",children:"Water"}),u.jsx("option",{value:"tea",children:"Tea"}),u.jsx("option",{value:"coffee",children:"Coffee"}),u.jsx("option",{value:"juice",children:"Juice"}),u.jsx("option",{value:"sports_drink",children:"Sports Drink"}),u.jsx("option",{value:"other",children:"Other"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("input",{type:"text",name:"notes",value:s.notes,onChange:T,className:"form-input",placeholder:"e.g., with lemon, iced, etc."})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Intake":"Log Water"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:b,disabled:m,children:"Cancel"})]})]})]}),I&&L&&u.jsx("div",{className:"sentiment-modal-overlay",children:u.jsxs("div",{className:"sentiment-modal",children:[u.jsxs("span",{className:"sentiment-message",children:[I.score>0&&"Your note sounds positive! 😊",I.score<0&&"Your note sounds a bit negative. 😟",I.score===0&&"Your note sounds neutral. 😐"]}),w&&u.jsxs("div",{className:"ai-recommendation",children:[u.jsx("strong",{children:"AI Suggestion:"})," ",w]}),u.jsx("button",{className:"close-modal-btn",onClick:()=>M(!1),children:"Dismiss"})]})}),u.jsxs("div",{className:"water-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Water Intake (",de.length," entries)"]}),de.length===0?u.jsx("p",{className:"no-intake",children:"No water logged for today. Stay hydrated! 💧"}):u.jsx("ul",{className:"log-list",children:de.map(Z=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"water-info",children:[u.jsxs("span",{className:"water-amount",children:[Z.amount," oz"]}),u.jsx("span",{className:"water-type",children:Z.type}),Z.notes&&u.jsx("span",{className:"water-notes",children:Z.notes})]}),u.jsxs("div",{className:"water-actions",children:[u.jsx("button",{onClick:()=>R(Z),className:"edit-button",disabled:m,children:"Edit"}),u.jsx("button",{onClick:()=>P(Z.id),className:"delete-button",disabled:m,children:"Delete"})]})]},Z.id))})]})]})}function bje(){const{user:t,isPremium:e}=bn(),[n,s]=A.useState({workout:{current:0,goal:210},water:{current:0,goal:448},meditation:{current:0,goal:105}}),[r,i]=A.useState([]),[o,a]=A.useState(0),[c,d]=A.useState(!0),[f,m]=A.useState(30),[g,E]=A.useState(64),[S,N]=A.useState(15),[C,x]=A.useState(0),[v,I]=A.useState(!1),[j,L]=A.useState(!1),[M,w]=A.useState(!1),[y,T]=A.useState(null),k=()=>{const Te=new Date().getDay();return Te===0?0:7-Te};A.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{d(!0);const xe=(await we.getUserProfile(t.uid)).user;m(xe.exerciseGoalMinutes||30),E(xe.waterGoalOz||64),N(xe.meditationGoalMinutes||15);const[Je,De,gt]=await Promise.all([fi.getWorkoutSummary(t.uid,7),tn.getWaterSummary(t.uid,7),ar.getMeditationSummary(t.uid,7)]);s({workout:{current:Je.totalMinutes||0,goal:(xe.exerciseGoalMinutes||30)*7},water:{current:De.totalOz||0,goal:(xe.waterGoalOz||64)*7},meditation:{current:gt.totalMinutes||0,goal:(xe.meditationGoalMinutes||15)*7}}),setTimeout(()=>he(),100)}catch(Te){console.error("Error fetching weekly data:",Te)}finally{d(!1)}})()},[t]),A.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const Te=await we.getPoints(t.uid);x(Te)}})()},[t]),A.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const Te=await we.isChallengeCompleted(t.uid,"weekly_meditation_3","weekly");I(Te)}})()},[t]),A.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const Te=await we.isChallengeCompleted(t.uid,"diamond_week","weekly"),xe=await we.isChallengeCompleted(t.uid,"perfect_balance","weekly");L(Te),w(xe)}})()},[t]),A.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const Te=await we.getUserProfile(t.uid);T(Te.user.premiumSoundscapeUntil?new Date(Te.user.premiumSoundscapeUntil):null)}})()},[t]);const R=new Date,P=C>=150&&(!y||y<R),b=y&&y>R,re=async()=>{if(!(t!=null&&t.uid)||!P)return;await we.deductPoints(t.uid,150);const se=new Date;se.setDate(se.getDate()+7),await we.updateUserProfile(t.uid,{premiumSoundscapeUntil:se}),T(se);const Te=await we.getPoints(t.uid);x(Te),alert("You unlocked Premium Soundscape for 1 week!")},de=n.meditation.current/(S||15),X=de>=3,Z=n.workout.current/n.workout.goal>=1.25&&n.water.current/n.water.goal>=1.25&&n.meditation.current/n.meditation.goal>=1.25,z=n.workout.current/n.workout.goal>=1&&n.water.current/n.water.goal>=1&&n.meditation.current/n.meditation.goal>=1,J=async()=>{if(!(t!=null&&t.uid)||v||!X)return;await we.addPoints(t.uid,50),await we.completeChallenge(t.uid,"weekly_meditation_3","weekly"),I(!0);const se=await we.getPoints(t.uid);x(se),alert("You claimed 50 points for the Weekly Meditation Challenge!")},ne=async()=>{if(!(t!=null&&t.uid)||j||!Z)return;await we.addPoints(t.uid,200),await we.completeChallenge(t.uid,"diamond_week","weekly"),L(!0);const se=await we.getPoints(t.uid);x(se),alert("You claimed 200 points for Diamond Week Challenge!")},fe=async()=>{if(!(t!=null&&t.uid)||M||!z)return;await we.addPoints(t.uid,150),await we.completeChallenge(t.uid,"perfect_balance","weekly"),w(!0);const se=await we.getPoints(t.uid);x(se),alert("You claimed 150 points for Perfect Balance Challenge!")},he=()=>{const se=[];Object.entries(n).forEach(([Te,xe])=>{const Je=xe.current/xe.goal*100;Je>=125?se.push({type:Te,level:"diamond",percentage:Je}):Je>=100?se.push({type:Te,level:"gold",percentage:Je}):Je>=75?se.push({type:Te,level:"silver",percentage:Je}):Je>=50&&se.push({type:Te,level:"bronze",percentage:Je})}),i(se)},ke=se=>{switch(se){case"diamond":return"💎";case"gold":return"🥇";case"silver":return"🥈";case"bronze":return"🥉";default:return"⭐"}},Ee=se=>se>=100?"var(--sage-500)":se>=75?"var(--mint)":se>=50?"#FFD700":"var(--sage-300)",dt=se=>se>=100,qt=async()=>{if(t!=null&&t.uid)try{d(!0);const se=f*7,Te=g*7,xe=S*7,Je=await we.updateUserProfile(t.uid,{exerciseGoalMinutes:f,meditationGoalMinutes:S,waterGoalOz:g});s(De=>({...De,workout:{...De.workout,goal:se},water:{...De.water,goal:Te},meditation:{...De.meditation,goal:xe}})),setTimeout(()=>he(),100),console.log("✅ Goals updated successfully")}catch(se){console.error("❌ Error updating goals:",se)}finally{d(!1)}};if(c)return u.jsx("div",{className:"goals-loading",children:"Loading weekly goals..."});const Wt=k();return u.jsxs("div",{className:"goals-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:"⭐"})," ",C," Points"]}),u.jsxs("div",{className:"weekly-header",children:[u.jsx("h1",{className:"goals-title",children:"Weekly Goals"}),u.jsx("p",{className:"goals-subtitle",children:"Track your progress and earn rewards"}),u.jsxs("div",{className:"week-info",children:[u.jsx("span",{className:"week-label",children:"Current Week"}),u.jsx("span",{className:"days-remaining",children:Wt===0?"Last day!":`${Wt} days remaining`})]})]}),u.jsx("div",{className:"weekly-progress",children:Object.entries(n).map(([se,Te])=>{const xe=Math.min(Te.current/Te.goal*100,100),Je=dt(xe),De=2*Math.PI*45,gt=De,$i=De-xe/100*De;return u.jsxs("div",{className:`weekly-ring ${Je?"completed":""}`,children:[u.jsxs("div",{className:"ring-container",children:[u.jsxs("svg",{className:"progress-ring",width:"120",height:"120",children:[u.jsx("circle",{className:"ring-background",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:"var(--sage-100)",strokeWidth:"8"}),u.jsx("circle",{className:"ring-progress",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:Ee(xe),strokeWidth:"8",strokeLinecap:"round",strokeDasharray:gt,strokeDashoffset:$i,transform:"rotate(-90 60 60)"})]}),u.jsxs("div",{className:"ring-content",children:[u.jsx("span",{className:"ring-value",children:Te.current}),u.jsxs("span",{className:"ring-goal",children:["/ ",Te.goal]}),u.jsx("span",{className:"ring-label",children:se})]})]}),u.jsxs("div",{className:"ring-percentage",children:[Math.round(xe),"%"]})]},se)})}),u.jsxs("div",{className:"achievement-gallery",children:[u.jsx("h2",{className:"section-title",children:"This Week's Achievements"}),r.length===0?u.jsxs("div",{className:"no-achievements",children:[u.jsx("span",{className:"no-achievement-icon",children:"🎯"}),u.jsx("p",{children:"Keep going! Your first achievement is waiting."})]}):u.jsx("div",{className:"achievements-grid",children:r.map((se,Te)=>u.jsxs("div",{className:`achievement-card ${se.level}`,children:[u.jsx("div",{className:"achievement-icon",children:ke(se.level)}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:se.level.toUpperCase()}),u.jsx("p",{children:se.type.toUpperCase()}),u.jsxs("span",{className:"achievement-percentage",children:[Math.round(se.percentage),"%"]})]}),!e&&se.level==="diamond"&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"premium-badge",children:"PRO"})})]},Te))})]}),u.jsxs("div",{className:"streak-section",children:[u.jsx("h2",{className:"section-title",children:"Weekly Streak"}),u.jsxs("div",{className:"streak-card",children:[u.jsx("div",{className:"streak-icon",children:"🔥"}),u.jsxs("div",{className:"streak-info",children:[u.jsx("span",{className:"streak-number",children:o}),u.jsx("span",{className:"streak-label",children:"Week Streak"})]}),u.jsxs("div",{className:"streak-next",children:[u.jsx("span",{children:"Next reward at 4 weeks"}),!e&&u.jsx("span",{className:"premium-hint",children:"PRO"})]})]})]}),u.jsxs("div",{className:"reward-marketplace",children:[u.jsx("h2",{className:"section-title",children:"Reward Marketplace"}),e?u.jsxs("div",{className:"rewards-grid",children:[u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:"🎵"}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Premium Soundscape"}),u.jsx("p",{children:"Unlock for 1 week"}),u.jsx("span",{className:"reward-cost",children:"150 points"}),u.jsx("button",{className:"claim-btn",onClick:re,disabled:!P,children:b?"Active":"Redeem"}),b&&u.jsxs("div",{className:"reward-status",children:["Active until ",y==null?void 0:y.toLocaleDateString()]})]})]}),u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:"📱"}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Custom Badge"}),u.jsx("p",{children:"Design your own"}),u.jsx("span",{className:"reward-cost",children:"100 points"})]})]})]}):u.jsxs("div",{className:"premium-cta-card",children:[u.jsxs("div",{className:"cta-header",children:[u.jsx("h3",{children:"Unlock Premium Rewards"}),u.jsx("span",{className:"cta-price",children:"$4.99/month"})]}),u.jsxs("div",{className:"premium-features",children:[u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"💎"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"🎯"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"📊"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"🏆"}),u.jsx("span",{children:"Challenge competitions"})]})]}),u.jsx("button",{className:"upgrade-button",onClick:al,children:"Upgrade with Stripe"})]})]}),u.jsxs("div",{className:"weekly-challenges",children:[u.jsx("h2",{className:"section-title",children:"Weekly Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Mindful Monday"}),u.jsx("span",{className:"challenge-reward",children:"+50 points"}),u.jsx("button",{className:"claim-btn",onClick:J,disabled:!X||v,children:v?"Claimed":"Claim"})]}),u.jsx("p",{className:"challenge-description",children:"Complete 3 meditation sessions this week"}),u.jsxs("div",{className:"challenge-progress",children:[u.jsx("div",{className:"challenge-bar",children:u.jsx("div",{className:"challenge-fill",style:{width:`${Math.min(de/3*100,100)}%`}})}),u.jsxs("span",{className:"challenge-status",children:[Math.floor(de),"/3 completed"]})]}),!e&&u.jsx("div",{className:"challenge-premium",children:u.jsx("span",{children:"Join Premium for exclusive challenges"})})]})]}),u.jsxs("div",{className:"custom-goals-section",children:[u.jsx("h2",{className:"section-title",children:"Goal Customization"}),u.jsxs("div",{className:"custom-goals-form",children:[u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Workout Goal: ",f," minutes"]}),u.jsx("input",{type:"range",min:"15",max:"120",value:f,onChange:se=>m(parseInt(se.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",f*7," minutes"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Water Goal: ",g," oz"]}),u.jsx("input",{type:"range",min:"32",max:"128",value:g,onChange:se=>E(parseInt(se.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",g*7," oz"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Meditation Goal: ",S," minutes"]}),u.jsx("input",{type:"range",min:"5",max:"60",value:S,onChange:se=>N(parseInt(se.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",S*7," minutes"]})]}),u.jsx("button",{className:"save-goals-btn",onClick:qt,disabled:c,children:c?"Saving...":"Save Custom Goals"})]})]}),u.jsxs("div",{className:"premium-challenges",children:[u.jsx("h2",{className:"section-title",children:"Exclusive Challenges"}),u.jsx(Rx,{feature:"premium challenges",className:"feature-tease",children:u.jsxs("div",{className:"challenge-preview",children:[u.jsxs("div",{className:"challenge-card premium",children:[u.jsx("div",{className:"challenge-icon",children:"💎"}),u.jsxs("div",{className:"challenge-content",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Diamond Week Challenge"}),u.jsx("span",{className:"challenge-reward",children:"+200 points"}),u.jsx("button",{className:"claim-btn",onClick:ne,disabled:!Z||j,children:j?"Claimed":"Claim"})]}),u.jsx("p",{children:"Complete 125% of all goals for 7 consecutive days"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:"🏆 1,247 participants this week"})})]})]}),u.jsxs("div",{className:"challenge-card premium",children:[u.jsx("div",{className:"challenge-icon",children:"🎯"}),u.jsxs("div",{className:"challenge-content",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Perfect Balance"}),u.jsx("span",{className:"challenge-reward",children:"+150 points"}),u.jsx("button",{className:"claim-btn",onClick:fe,disabled:!z||M,children:M?"Claimed":"Claim"})]}),u.jsx("p",{children:"Hit exactly 100% on all three goals in one day"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:"🎉 892 members completed"})})]})]})]})})]})]})}function Sje(){const{user:t,loading:e,isPremium:n,userSubscription:s,trialDaysRemaining:r,upgradeToPremium:i,cancelSubscription:o}=bn(),[a,c]=A.useState(null),[d,f]=A.useState({username:"",email:"",firstName:"",lastName:"",exerciseGoalMinutes:"",waterGoalOz:"",meditationGoalMinutes:""}),[m,g]=A.useState(!0),[E,S]=A.useState(!1),[N,C]=A.useState(""),[x,v]=A.useState("");A.useEffect(()=>{const M=async()=>{if(t!=null&&t.uid)try{g(!0);const w=await we.getUserProfile(t.uid);c(w.user)}catch(w){console.error("Error fetching profile:",w),v("Failed to load profile data")}finally{g(!1)}};t!=null&&t.uid&&M()},[t]),A.useEffect(()=>{a&&f({username:a.username||"",email:a.email||"",firstName:a.firstName||"",lastName:a.lastName||"",exerciseGoalMinutes:a.exerciseGoalMinutes||"",waterGoalOz:a.waterGoalOz||"",meditationGoalMinutes:a.meditationGoalMinutes||""})},[a]);const I=M=>{const{name:w,value:y}=M.target;f(T=>({...T,[w]:y}))},j=async M=>{if(M.preventDefault(),!!(t!=null&&t.uid)){S(!0),v(""),C("");try{console.log("Submitting profile update:",d);const w={...d,exerciseGoalMinutes:parseInt(d.exerciseGoalMinutes)||30,waterGoalOz:parseInt(d.waterGoalOz)||64,meditationGoalMinutes:parseInt(d.meditationGoalMinutes)||10};await we.updateUserProfile(t.uid,w),c({...a,...w}),C("Profile updated successfully!"),setTimeout(()=>C(""),3e3)}catch(w){console.error("Error updating profile:",w),v("Failed to update profile. Please try again.")}finally{S(!1)}}},L=()=>{a&&f({username:a.username||"",email:a.email||"",firstName:a.firstName||"",lastName:a.lastName||"",exerciseGoalMinutes:a.exerciseGoalMinutes||"",waterGoalOz:a.waterGoalOz||"",meditationGoalMinutes:a.meditationGoalMinutes||""}),v(""),C("")};return e||m?u.jsx("div",{className:"profile-loading",children:"Loading profile..."}):t?u.jsx("div",{className:"profile-page",children:u.jsxs("div",{className:"profile-card",children:[u.jsxs("div",{className:"profile-header",children:[u.jsx("h1",{className:"profile-title",children:"Personal Information"}),u.jsx("p",{className:"profile-subtitle",children:"Update your profile and wellness goals"})]}),N&&u.jsx("div",{className:"success-message",children:N}),x&&u.jsx("div",{className:"error-message",children:x}),a&&u.jsxs("form",{onSubmit:j,className:"profile-form",children:[u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Account Information"}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Username",u.jsx("input",{type:"text",name:"username",value:d.username,onChange:I,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Email",u.jsx("input",{type:"email",name:"email",value:d.email,onChange:I,className:"form-input",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["First Name",u.jsx("input",{type:"text",name:"firstName",value:d.firstName,onChange:I,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Last Name",u.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:I,className:"form-input",required:!0})]})})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Daily Wellness Goals"}),u.jsx("p",{className:"section-description",children:"Set your daily targets to track your progress effectively"}),u.jsxs("div",{className:"goals-grid",children:[u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"🏋️"}),"Exercise Goal (Minutes)",u.jsx("input",{type:"number",name:"exerciseGoalMinutes",value:d.exerciseGoalMinutes,onChange:I,className:"form-input",min:"1",max:"300",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 30-60 minutes"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"💧"}),"Water Goal (Oz)",u.jsx("input",{type:"number",name:"waterGoalOz",value:d.waterGoalOz,onChange:I,className:"form-input",min:"1",max:"200",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 64-100 oz"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"🧘"}),"Meditation Goal (Minutes)",u.jsx("input",{type:"number",name:"meditationGoalMinutes",value:d.meditationGoalMinutes,onChange:I,className:"form-input",min:"1",max:"120",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 5-20 minutes"})]})})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"reset-button",onClick:L,disabled:E,children:"Reset Changes"}),u.jsx("button",{type:"submit",className:"save-button",disabled:E,children:E?"Saving...":"Save Profile"})]})]}),u.jsxs("div",{className:"profile-stats",children:[u.jsx("h3",{className:"section-title",children:"Account Summary"}),u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Member Since"}),u.jsx("span",{className:"stat-value",children:a!=null&&a.createdAt?new Date(a.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Profile Updated"}),u.jsx("span",{className:"stat-value",children:a!=null&&a.updatedAt?new Date(a.updatedAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Goals Set"}),u.jsxs("span",{className:"stat-value",children:[[d.exerciseGoalMinutes,d.waterGoalOz,d.meditationGoalMinutes].filter(M=>M&&M>0).length," / 3"]})]})]})]}),u.jsxs("div",{className:"subscription-section",children:[u.jsx("h2",{children:"Your Plan"}),s==="trial"&&u.jsx("div",{className:"trial-status",children:u.jsxs("div",{className:"status-card trial",children:[u.jsx("h3",{children:"Premium Trial"}),u.jsx("p",{children:"You're experiencing the full premium experience!"}),u.jsxs("div",{className:"trial-countdown",children:[u.jsx("span",{className:"days-remaining",children:r}),u.jsx("span",{className:"days-label",children:"days remaining"})]}),u.jsxs("div",{className:"trial-benefits",children:[u.jsx("p",{children:"Currently enjoying:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"✓ Custom goal setting"}),u.jsx("li",{children:"✓ Diamond achievements"}),u.jsx("li",{children:"✓ Premium soundscapes"}),u.jsx("li",{children:"✓ Advanced analytics"})]})]}),u.jsx("button",{onClick:al,className:"keep-premium-btn",children:"Keep Premium Access - $4.99/month"})]})}),s==="premium"&&u.jsx("div",{className:"premium-status",children:u.jsxs("div",{className:"status-card premium",children:[u.jsx("h3",{children:"💎 Premium Member"}),u.jsx("p",{children:"You have access to all premium features!"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Your Premium Benefits:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:o,className:"cancel-btn",children:"Cancel Subscription"})]})}),s==="free"&&u.jsx("div",{className:"free-status",children:u.jsxs("div",{className:"status-card free",children:[u.jsx("h3",{children:"🆓 Free Plan"}),u.jsx("p",{children:"Upgrade to unlock premium features and enhance your wellness journey"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Unlock with Premium:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🎯"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"💎"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🎵"}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"📊"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🏆"}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"⚡"}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:al,className:"upgrade-btn",children:"Upgrade to Premium - $4.99/month"})]})})]})]})}):u.jsx("div",{className:"profile-error",children:"Please log in to view your profile."})}function kje({children:t}){const{user:e,loading:n}=bn();return console.log("🔐 ProtectedRoute - loading:",n,"user:",!!e),n?u.jsx("div",{className:"loading",children:"Loading..."}):e?(console.log("✅ Authenticated, rendering protected content"),t):(console.log("🚫 Not authenticated, redirecting to welcome"),u.jsx(Td,{to:"/welcome",replace:!0}))}const Aje="modulepreload",Nje=function(t){return"/"+t},C2={},Pje=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=Nje(c),c in C2)return;C2[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Aje,d||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((g,E)=>{m.addEventListener("load",g),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function Cje(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:r,onRegisteredSW:i,onRegisterError:o}=t;let a,c;const d=async(m=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(a=await Pje(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/sw.js",{scope:"/",type:"classic"})).catch(m=>{o==null||o(m)}),!a)return;a.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),a.addEventListener("installed",m=>{m.isUpdate||s==null||s()}),a.register({immediate:e}).then(m=>{i?i("/sw.js",m):r==null||r(m)}).catch(m=>{o==null||o(m)})}}return c=f(),d}const Rje=()=>{const[t,e]=A.useState(!1),[n,s]=A.useState(!1);A.useEffect(()=>{Cje({onNeedRefresh(){e(!0)},onOfflineReady(){s(!0)},onRegistered(o){console.log("SW registered: ",o)},onRegisterError(o){console.log("SW registration error",o)}})},[]);const r=()=>{s(!1),e(!1)},i=()=>{updateSW(),r()};return!t&&!n?null:u.jsxs("div",{className:"pwa-update-banner",children:[u.jsxs("div",{className:"pwa-update-content",children:[n&&u.jsxs("div",{className:"pwa-message",children:[u.jsx("span",{children:"App ready to work offline"}),u.jsx("button",{onClick:r,className:"pwa-close-btn",children:"Close"})]}),t&&u.jsxs("div",{className:"pwa-message",children:[u.jsx("span",{children:"New content available, click on reload button to update"}),u.jsx("button",{onClick:i,className:"pwa-update-btn",children:"Reload"}),u.jsx("button",{onClick:r,className:"pwa-close-btn",children:"Close"})]})]}),u.jsx("style",{jsx:!0,children:`
        .pwa-update-banner {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: #6c5ce7;
          color: white;
          padding: 1rem;
          z-index: 9999;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .pwa-update-content {
          max-width: 600px;
          margin: 0 auto;
        }
        
        .pwa-message {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 1rem;
        }
        
        .pwa-update-btn, .pwa-close-btn {
          background: rgba(255, 255, 255, 0.2);
          border: 1px solid rgba(255, 255, 255, 0.3);
          color: white;
          padding: 0.5rem 1rem;
          border-radius: 6px;
          cursor: pointer;
          font-size: 0.875rem;
          transition: background-color 0.2s;
        }
        
        .pwa-update-btn:hover, .pwa-close-btn:hover {
          background: rgba(255, 255, 255, 0.3);
        }
        
        @media (max-width: 768px) {
          .pwa-message {
            flex-direction: column;
            gap: 0.5rem;
          }
          
          .pwa-update-btn, .pwa-close-btn {
            width: 100%;
          }
        }
      `})]})},Dje=()=>{const[t,e]=A.useState(!1),[n,s]=A.useState(null),[r,i]=A.useState("unknown"),[o,a]=A.useState(!1);A.useEffect(()=>{const g=window.matchMedia("(display-mode: standalone)").matches,E=localStorage.getItem("clarity-pwa-dismissed")==="true";if(g||E)return;const S=/iPad|iPhone|iPod/.test(navigator.userAgent),N=/Android/.test(navigator.userAgent);i(S?"ios":N?"android":"desktop");const C=v=>{v.preventDefault(),o||(s(v),e(!0),a(!0))},x=()=>{e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",C),window.addEventListener("appinstalled",x),S&&!o){const v=setTimeout(()=>{o||(e(!0),a(!0))},3e3);return()=>clearTimeout(v)}return()=>{window.removeEventListener("beforeinstallprompt",C),window.removeEventListener("appinstalled",x)}},[o]);const c=async()=>{if(n){n.prompt();const{outcome:g}=await n.userChoice;g==="accepted"&&(e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true"))}},d=()=>{e(!1),localStorage.setItem("clarity-pwa-dismissed","true")};if(!t)return null;const m=(()=>{switch(r){case"ios":return{title:"Add Clarity to Home Screen",steps:["Tap the Share button (📤) at the bottom",'Scroll down and tap "Add to Home Screen"','Tap "Add" to install'],icon:"📱"};case"android":return{title:"Install Clarity App",steps:['Tap "Install" below to add to home screen','Or use the menu (⋮) → "Add to Home Screen"'],icon:"🤖"};case"desktop":return{title:"Install Clarity App",steps:["Click the install icon (📥) in your browser address bar",'Or use the menu → "Install Clarity"'],icon:"💻"};default:return{title:"Install Clarity",steps:["Look for an install option in your browser menu","Or add this page to your bookmarks"],icon:"📱"}}})();return u.jsxs("div",{className:"install-prompt-overlay",children:[u.jsxs("div",{className:"install-prompt",children:[u.jsx("button",{className:"install-close",onClick:d,children:"✕"}),u.jsxs("div",{className:"install-content",children:[u.jsx("div",{className:"install-icon",children:m.icon}),u.jsx("h3",{children:m.title}),u.jsx("div",{className:"install-steps",children:m.steps.map((g,E)=>u.jsxs("div",{className:"install-step",children:[u.jsx("span",{className:"step-number",children:E+1}),u.jsx("span",{className:"step-text",children:g})]},E))}),r==="android"&&n&&u.jsx("button",{className:"install-button",onClick:c,children:"Install Clarity"}),u.jsx("div",{className:"install-benefits",children:u.jsx("p",{children:"✨ Works offline • 🚀 Faster loading • 📱 App-like experience"})})]})]}),u.jsx("style",{jsx:!0,children:`
        .install-prompt-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          padding: 20px;
        }

        .install-prompt {
          background: white;
          border-radius: 16px;
          padding: 24px;
          max-width: 400px;
          width: 100%;
          position: relative;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .install-close {
          position: absolute;
          top: 12px;
          right: 12px;
          background: none;
          border: none;
          font-size: 20px;
          cursor: pointer;
          color: #666;
          padding: 4px;
        }

        .install-content {
          text-align: center;
        }

        .install-icon {
          font-size: 48px;
          margin-bottom: 16px;
        }

        .install-content h3 {
          color: #6b8069;
          margin-bottom: 20px;
          font-size: 20px;
        }

        .install-steps {
          text-align: left;
          margin-bottom: 20px;
        }

        .install-step {
          display: flex;
          align-items: center;
          margin-bottom: 12px;
          padding: 8px 0;
        }

        .step-number {
          background: #6b8069;
          color: white;
          width: 24px;
          height: 24px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 12px;
          font-weight: bold;
          margin-right: 12px;
          flex-shrink: 0;
        }

        .step-text {
          color: #333;
          font-size: 14px;
          line-height: 1.4;
        }

        .install-button {
          background: #6b8069;
          color: white;
          border: none;
          border-radius: 12px;
          padding: 12px 24px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          margin-bottom: 16px;
          transition: background-color 0.2s;
        }

        .install-button:hover {
          background: #556b54;
        }

        .install-benefits {
          background: #f6f7f6;
          border-radius: 8px;
          padding: 12px;
        }

        .install-benefits p {
          color: #6b8069;
          font-size: 12px;
          margin: 0;
        }

        @media (max-width: 480px) {
          .install-prompt {
            margin: 20px;
            padding: 20px;
          }
        }
      `})]})},jje=()=>{const[t,e]=A.useState(!1),[n,s]=A.useState(null),[r,i]=A.useState(!1),[o,a]=A.useState(!1);A.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const d=localStorage.getItem("clarity-pwa-dismissed")==="true",f=localStorage.getItem("clarity-pwa-installed")==="true";if(d||f)return;const m=S=>{S.preventDefault(),o||(s(S),e(!0),a(!0))},g=()=>{i(!0),e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",m),window.addEventListener("appinstalled",g),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!r&&!o){const S=setTimeout(()=>{o||(e(!0),a(!0))},5e3);return()=>clearTimeout(S)}return()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",g)}},[r,o]);const c=async()=>{if(n){n.prompt();const{outcome:d}=await n.userChoice;d==="accepted"&&(i(!0),e(!1),s(null),localStorage.setItem("clarity-pwa-installed","true"))}else alert('To install: Use your browser menu → "Add to Home Screen" or "Install App"')};return!t||r?null:u.jsxs("div",{className:"floating-install-button",onClick:c,children:[u.jsx("div",{className:"install-icon",children:"📱"}),u.jsx("span",{className:"install-text",children:"Install"}),u.jsx("style",{jsx:!0,children:`
        .floating-install-button {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background: #6b8069;
          color: white;
          border-radius: 50px;
          padding: 12px 20px;
          display: flex;
          align-items: center;
          gap: 8px;
          cursor: pointer;
          box-shadow: 0 4px 12px rgba(107, 128, 105, 0.3);
          z-index: 1000;
          transition: all 0.2s ease;
          font-weight: 600;
          font-size: 14px;
        }

        .floating-install-button:hover {
          background: #556b54;
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(107, 128, 105, 0.4);
        }

        .floating-install-button:active {
          transform: translateY(0);
        }

        .install-icon {
          font-size: 18px;
        }

        .install-text {
          white-space: nowrap;
        }

        @media (max-width: 480px) {
          .floating-install-button {
            bottom: 16px;
            right: 16px;
            padding: 10px 16px;
            font-size: 13px;
          }
        }
      `})]})},Wf={worry_worm:{name:"Worry Worm",icon:"🐛",color:"#8B4513",size:"small",technique:"breathing",description:"Those nagging worries that won't go away",tamedMessage:"Worry Worm is now peaceful! 🌱"},panic_bear:{name:"Panic Bear",icon:"🐻",color:"#DC143C",size:"large",technique:"progressive_relaxation",description:"Big scary feelings that make your heart race",tamedMessage:"Panic Bear is now your gentle guardian! 🧸"},overthink_octopus:{name:"Overthink Octopus",icon:"🐙",color:"#4B0082",size:"medium",technique:"mindfulness",description:"Eight arms of spiraling thoughts",tamedMessage:"Overthink Octopus is now zen and focused! 🧘‍♀️"},doom_dragon:{name:"Doom Dragon",icon:"🐉",color:"#8B0000",size:"boss",technique:"breathing",description:"The big bad of catastrophic thinking",tamedMessage:"Doom Dragon is now your wise protector! ✨"}},Ka={breathing:{name:"Deep Breathing",icon:"💨",instructions:["Breathe in for 4","Hold for 4","Breathe out for 6","Repeat"],duration:16e3,color:"#4CAF50"},progressive_relaxation:{name:"Progressive Relaxation",icon:"🧘‍♀️",instructions:["Tense your shoulders","Hold for 3 seconds","Release and relax","Feel the tension melt away"],duration:12e3,color:"#2196F3"},mindfulness:{name:"Mindfulness Anchor",icon:"⚓",instructions:["Notice 3 things you can see","Notice 2 things you can hear","Notice 1 thing you can feel","You are present"],duration:15e3,color:"#FF9800"}},Tu={TAMED_MONSTERS:"anxiety_game_tamed_monsters",PLAYER_STATS:"anxiety_game_player_stats"};function Oje({user:t,onUpdateStats:e}){var L,M,w;const[n,s]=A.useState("menu"),[r,i]=A.useState(null),[o,a]=A.useState([]),[c,d]=A.useState({level:1,experience:0,calmness:100,monstersDefeated:0,sanctuaryPoints:0}),[f,m]=A.useState(0),[g,E]=A.useState(0),[S,N]=A.useState(!1),C=A.useRef(null);A.useEffect(()=>{try{const y=localStorage.getItem(Tu.TAMED_MONSTERS);if(y){const R=JSON.parse(y).map(P=>({...Wf[P],id:P}));a(R)}const T=localStorage.getItem(Tu.PLAYER_STATS);if(T){const k=JSON.parse(T);d(k)}}catch(y){console.error("Error loading game data from localStorage:",y)}},[]);const x=()=>{const y=Object.keys(Wf),T=y[Math.floor(Math.random()*y.length)],k={...Wf[T],id:T};i(k),s("encounter");const R=k.size==="boss"?30:k.size==="large"?20:10;d(P=>({...P,calmness:Math.max(0,P.calmness-R)}))},v=()=>{const y=Ka[r.technique]||Ka.breathing;s("technique"),m(0),E(0),I(y)},I=y=>{const T=y.duration/y.instructions.length;let k=0;const R=setInterval(()=>{E(k),m((k+1)/y.instructions.length*100),k===y.instructions.length-1?(clearInterval(R),setTimeout(()=>{j()},T)):k++},T);C.current=R},j=()=>{const y=r.size==="boss"?100:r.size==="large"?50:25,T=r.size==="boss"?20:10;a(k=>[...k,r]),d(k=>({...k,experience:k.experience+y,calmness:Math.min(100,k.calmness+30),monstersDefeated:k.monstersDefeated+1,sanctuaryPoints:k.sanctuaryPoints+T,level:Math.floor((k.experience+y)/100)+1})),s("victory"),e&&e({anxietyGameScore:c.monstersDefeated+1,mindfulnessPoints:T})};return A.useEffect(()=>{if(n==="technique"&&(r==null?void 0:r.technique)==="breathing"){const y=setInterval(()=>{N(T=>!T)},2e3);return()=>clearInterval(y)}},[n,r]),A.useEffect(()=>()=>{C.current&&clearInterval(C.current)},[]),A.useEffect(()=>{try{const y=o.map(T=>T.id);localStorage.setItem(Tu.TAMED_MONSTERS,JSON.stringify(y))}catch(y){console.error("Error saving tamed monsters to localStorage:",y)}},[o]),A.useEffect(()=>{try{localStorage.setItem(Tu.PLAYER_STATS,JSON.stringify(c))}catch(y){console.error("Error saving player stats to localStorage:",y)}},[c]),u.jsxs("div",{className:"monster-tamer-game",children:[n==="menu"&&u.jsxs("div",{className:"game-menu",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h2",{children:"👾 Anxiety Monster Tamer"}),u.jsx("p",{children:"Use mindfulness to tame your anxiety monsters!"})]}),u.jsxs("div",{className:"player-stats",children:[u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"⭐"}),u.jsxs("span",{children:["Level ",c.level]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("span",{children:["Calmness: ",c.calmness,"%"]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"👾"}),u.jsxs("span",{children:["Tamed: ",c.monstersDefeated]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"🏠"}),u.jsxs("span",{children:["Sanctuary: ",c.sanctuaryPoints]})]})]}),u.jsx("button",{className:"encounter-btn",onClick:x,disabled:c.calmness<10,children:c.calmness<10?"Rest First 😴":"Encounter Monster 👾"}),c.calmness<10&&u.jsx("button",{className:"rest-btn",onClick:()=>d(y=>({...y,calmness:Math.min(100,y.calmness+50)})),style:{background:"linear-gradient(135deg, #FF9800 0%, #FF5722 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"20px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"12px"},children:"Rest & Recover 🧘‍♀️ (+50 Calmness)"}),u.jsxs("div",{className:"tamed-collection",children:[u.jsx("h3",{children:"Your Tamed Monsters:"}),u.jsx("div",{className:"tamed-grid",children:o.length===0?u.jsx("p",{className:"no-tamed",children:"No monsters tamed yet. Start your journey!"}):o.map((y,T)=>u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon",children:y.icon}),u.jsx("span",{className:"monster-name",children:y.name})]},T))})]})]}),n==="encounter"&&r&&u.jsxs("div",{className:"monster-encounter",children:[u.jsxs("div",{className:"encounter-scene",children:[u.jsxs("div",{className:`monster ${r.size} ${r.id}`,children:[u.jsx("div",{className:"monster-icon",children:r.icon}),u.jsx("div",{className:"monster-shake"})]}),u.jsxs("div",{className:"encounter-text",children:[u.jsxs("h3",{children:["A wild ",r.name," appears!"]}),u.jsx("p",{children:r.description}),u.jsx("p",{className:"calmness-drop",children:"Your calmness dropped! 😰"})]})]}),u.jsxs("div",{className:"taming-options",children:[u.jsxs("button",{className:"tame-btn",onClick:v,children:[u.jsx("span",{className:"technique-icon",children:((L=Ka[r.technique])==null?void 0:L.icon)||"💨"}),"Use ",((M=Ka[r.technique])==null?void 0:M.name)||"Deep Breathing"]}),u.jsx("button",{className:"run-btn",onClick:()=>s("menu"),children:"Run Away 🏃‍♀️"})]})]}),n==="technique"&&r&&u.jsxs("div",{className:"taming-technique",children:[u.jsxs("div",{className:"technique-header",children:[u.jsxs("h3",{children:["Taming ",r.name]}),u.jsx("div",{className:"anxiety-progress",children:u.jsx("div",{className:"anxiety-progress-fill",style:{width:`${f}%`}})})]}),u.jsx("div",{className:`technique-visual ${S?"breathing":""}`,children:u.jsxs("div",{className:"monster-calming",children:[u.jsx("span",{className:"monster-icon",children:r.icon}),u.jsx("div",{className:"calming-aura"})]})}),u.jsx("div",{className:"technique-instructions",children:(w=Ka[r.technique])==null?void 0:w.instructions.map((y,T)=>u.jsx("div",{className:`instruction ${T===g?"active":T<g?"completed":""}`,children:y},T))})]}),n==="victory"&&r&&u.jsxs("div",{className:"victory-screen",children:[u.jsx("div",{className:"victory-animation",children:u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon happy",children:r.icon}),u.jsx("div",{className:"sparkles",children:"✨✨✨"})]})}),u.jsxs("div",{className:"victory-text",children:[u.jsx("h3",{children:"🎉 Monster Tamed!"}),u.jsx("p",{children:r.tamedMessage}),u.jsxs("div",{className:"rewards",children:[u.jsx("div",{className:"reward",children:"+30 Calmness 🧘‍♀️"}),u.jsxs("div",{className:"reward",children:["+",r.size==="boss"?100:r.size==="large"?50:25," Experience ⭐"]}),u.jsxs("div",{className:"reward",children:["+",r.size==="boss"?20:10," Sanctuary Points 🏠"]})]})]}),u.jsxs("div",{className:"victory-actions",children:[u.jsx("button",{className:"continue-btn",onClick:()=>s("menu"),children:"Continue Journey ➡️"}),u.jsx("button",{className:"sanctuary-btn",onClick:()=>s("sanctuary"),children:"Visit Sanctuary 🏛️"})]})]}),n==="sanctuary"&&u.jsxs("div",{className:"sanctuary-view",children:[u.jsxs("div",{className:"sanctuary-header",children:[u.jsx("h2",{children:"🏛️ Your Peaceful Sanctuary"}),u.jsx("p",{children:"A safe space built from your mindfulness journey"}),u.jsx("button",{className:"back-to-menu-btn",onClick:()=>s("menu"),children:"← Back to Adventure"})]}),u.jsxs("div",{className:"sanctuary-stats",children:[u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"🏠"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:c.sanctuaryPoints}),u.jsx("span",{className:"stat-label",children:"Sanctuary Points"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"👾"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:o.length}),u.jsx("span",{className:"stat-label",children:"Peaceful Companions"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"stat-info",children:[u.jsxs("span",{className:"stat-number",children:[c.calmness,"%"]}),u.jsx("span",{className:"stat-label",children:"Current Calmness"})]})]})]}),u.jsxs("div",{className:"sanctuary-garden",children:[u.jsx("h3",{children:"🌸 Mindfulness Garden"}),u.jsxs("div",{className:"garden-grid",children:[o.length===0?u.jsxs("div",{className:"empty-garden",children:[u.jsx("div",{className:"empty-garden-icon",children:"🌱"}),u.jsx("p",{children:"Your garden awaits your first peaceful companion..."}),u.jsx("small",{children:"Tame monsters to populate your sanctuary!"})]}):o.map((y,T)=>u.jsx("div",{className:"garden-companion",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"companion-icon",children:y.icon}),u.jsx("div",{className:"companion-aura"}),u.jsx("div",{className:"companion-name",children:y.name}),u.jsx("div",{className:"companion-effect",children:"Radiating peace ✨"})]})},T)),Array.from({length:Math.max(0,6-o.length)}).map((y,T)=>u.jsx("div",{className:"garden-companion empty",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"empty-spot",children:"?"}),u.jsx("div",{className:"spot-label",children:"Awaiting Friend"})]})},`empty-${T}`))]})]}),u.jsxs("div",{className:"sanctuary-upgrades",children:[u.jsx("h3",{children:"🏗️ Sanctuary Upgrades"}),u.jsxs("div",{className:"upgrades-grid",children:[u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=50?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"🌈"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Rainbow Bridge"}),u.jsx("p",{children:"Connects different areas of your sanctuary"}),u.jsx("span",{className:"upgrade-cost",children:"50 Points"})]}),c.sanctuaryPoints>=50?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=100?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"⛲"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Meditation Fountain"}),u.jsx("p",{children:"Restores calmness over time"}),u.jsx("span",{className:"upgrade-cost",children:"100 Points"})]}),c.sanctuaryPoints>=100?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=200?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"🏰"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Wisdom Tower"}),u.jsx("p",{children:"Unlock advanced meditation techniques"}),u.jsx("span",{className:"upgrade-cost",children:"200 Points"})]}),c.sanctuaryPoints>=200?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]})]})]}),u.jsxs("div",{className:"daily-affirmations",children:[u.jsx("h3",{children:"💭 Daily Affirmation"}),u.jsxs("div",{className:"affirmation-card",children:[u.jsx("div",{className:"affirmation-text",children:'"I am creating a sanctuary of peace within myself, one mindful moment at a time."'}),u.jsx("div",{className:"affirmation-author",children:"- Your Inner Wisdom"})]})]}),u.jsxs("div",{className:"sanctuary-actions",children:[u.jsx("button",{className:"meditation-btn",onClick:()=>{d(y=>({...y,calmness:Math.min(100,y.calmness+10)}))},children:"🧘‍♀️ Meditate in Sanctuary (+10 Calmness)"}),u.jsx("button",{className:"encounter-btn",onClick:()=>{s("menu"),setTimeout(()=>{x()},500)},children:"👾 Ready for Another Adventure"})]})]})]})}function Vje(){const{user:t}=bn(),[e,n]=A.useState({anxietyGameScore:0,mindfulnessPoints:0,totalGamesPlayed:0,currentStreak:0}),[s,r]=A.useState(!1),[i,o]=A.useState(!1),[a,c]=A.useState(0);A.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const C=await we.getPoints(t.uid);c(C)}})()},[t]),A.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const C=await we.isChallengeCompleted(t.uid,"monster_tamer_daily","daily"),x=await we.isChallengeCompleted(t.uid,"mindfulness_master_daily","daily");r(C),o(x)}})()},[t]),A.useEffect(()=>{try{const N=localStorage.getItem("clarity_game_stats");if(N){const I=JSON.parse(N);n(I),console.log("🎮 Loaded saved game stats:",I)}const C=new Date().toDateString();localStorage.getItem("anxiety_game_last_reset")!==C&&(localStorage.setItem("anxiety_game_today_monsters","0"),localStorage.setItem("anxiety_game_last_reset",C),console.log("🎮 Reset today's monster count for new day"));const v=parseInt(localStorage.getItem("anxiety_game_today_monsters")||"0");n(I=>{const j={...I,anxietyGameScore:v};return localStorage.setItem("clarity_game_stats",JSON.stringify(j)),console.log("🎮 Today's monster count:",v),j})}catch(N){console.error("Error loading game stats:",N)}},[]);const d=N=>{console.log("🎮 handleUpdateStats called with:",N);const C=parseInt(localStorage.getItem("anxiety_game_today_monsters")||"0")+1;localStorage.setItem("anxiety_game_today_monsters",C.toString()),n(x=>{const v={...x,anxietyGameScore:C,mindfulnessPoints:x.mindfulnessPoints+(N.mindfulnessPoints||0),totalGamesPlayed:x.totalGamesPlayed+1};try{localStorage.setItem("clarity_game_stats",JSON.stringify(v)),console.log("🎮 Saved game stats to localStorage:",v)}catch(I){console.error("Error saving game stats:",I)}return v}),console.log("🎮 Game stats updated:",N)},f=()=>{try{const N=localStorage.getItem("anxiety_game_today_monsters"),C=localStorage.getItem("anxiety_game_player_stats");console.log("🎮 Debug - Today's monsters:",N),console.log("🎮 Debug - Player stats:",C);const x=parseInt(N||"0");n(v=>({...v,anxietyGameScore:x})),console.log("🎮 Debug - Updated anxietyGameScore to:",x)}catch(N){console.error("Error refreshing stats:",N)}},m=e.anxietyGameScore>=3,g=e.mindfulnessPoints>=100,E=async()=>{if(!(t!=null&&t.uid)||s||!m)return;await we.addPoints(t.uid,50),await we.completeChallenge(t.uid,"monster_tamer_daily","daily"),r(!0);const N=await we.getPoints(t.uid);c(N),alert("You claimed 50 points for Monster Tamer Challenge!")},S=async()=>{if(!(t!=null&&t.uid)||i||!g)return;await we.addPoints(t.uid,75),await we.completeChallenge(t.uid,"mindfulness_master_daily","daily"),o(!0);const N=await we.getPoints(t.uid);c(N),alert("You claimed 75 points for Mindfulness Master Challenge!")};return u.jsxs("div",{className:"games-page",children:[u.jsxs("div",{className:"points-balance",children:[u.jsx("span",{role:"img","aria-label":"points",children:"⭐"})," ",a," Points"]}),u.jsxs("div",{className:"games-header",children:[u.jsx("h1",{className:"games-title",children:"Mental Wellness Games"}),u.jsx("p",{className:"games-subtitle",children:"Play games to improve your mental health"})]}),u.jsxs("div",{className:"game-stats-section",children:[u.jsxs("div",{className:"stats-header",children:[u.jsx("h2",{className:"section-title",children:"Your Gaming Stats"}),u.jsx("button",{onClick:f,className:"refresh-stats-btn",title:"Refresh stats from game data",children:"🔄 Refresh"})]}),u.jsxs("div",{className:"game-stats-grid",children:[u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"👾"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.anxietyGameScore}),u.jsx("span",{className:"stat-label",children:"Monsters Tamed"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.mindfulnessPoints}),u.jsx("span",{className:"stat-label",children:"Mindfulness Points"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🎮"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.totalGamesPlayed}),u.jsx("span",{className:"stat-label",children:"Games Played"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🔥"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.currentStreak}),u.jsx("span",{className:"stat-label",children:"Day Streak"})]})]})]})]}),u.jsxs("div",{className:"available-games",children:[u.jsx("h2",{className:"section-title",children:"Available Games"}),u.jsxs("div",{className:"game-section",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h3",{className:"game-title",children:"🎮 Anxiety Monster Tamer"}),u.jsx("span",{className:"game-status",children:"Active"})]}),u.jsx("p",{className:"game-description",children:"Face your anxiety monsters and tame them through mindful interaction. Each monster represents different anxiety triggers. Practice coping strategies while earning points!"}),u.jsx("div",{className:"game-container",children:u.jsx(Oje,{user:t,onUpdateStats:d})})]}),u.jsxs("div",{className:"daily-challenges",children:[u.jsx("h2",{className:"section-title",children:"Daily Gaming Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:"👾"}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Monster Tamer Challenge"}),u.jsx("p",{children:"Tame 3 anxiety monsters today"}),u.jsxs("div",{className:"challenge-progress",children:[u.jsx("div",{className:"daily-challenge-bar",children:u.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.anxietyGameScore/3*100,100)}%`}})}),u.jsxs("span",{className:"challenge-status",children:[e.anxietyGameScore,"/3 tamed today"]})]})]}),u.jsxs("div",{className:"challenge-reward",children:[u.jsx("span",{children:"+50 points"}),u.jsx("button",{className:"claim-btn",onClick:E,disabled:!m||s,children:s?"Claimed":"Claim"})]})]}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Mindfulness Master"}),u.jsx("p",{children:"Earn 100 mindfulness points"}),u.jsx("div",{className:"challenge-progress",children:u.jsx("div",{className:"daily-challenge-bar",children:u.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.mindfulnessPoints/100*100,100)}%`}})})})]}),u.jsxs("div",{className:"challenge-reward",children:[u.jsx("span",{children:"+75 points"}),u.jsx("button",{className:"claim-btn",onClick:S,disabled:!g||i,children:i?"Claimed":"Claim"})]})]})]}),u.jsxs("div",{className:"game-achievements",children:[u.jsx("h2",{className:"section-title",children:"Gaming Achievements"}),u.jsxs("div",{className:"achievements-grid",children:[e.anxietyGameScore>=1&&u.jsxs("div",{className:"achievement-card bronze",children:[u.jsx("div",{className:"achievement-icon",children:"🥉"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"FIRST VICTORY"}),u.jsx("p",{children:"Tamed your first monster"})]})]}),e.anxietyGameScore>=5&&u.jsxs("div",{className:"achievement-card silver",children:[u.jsx("div",{className:"achievement-icon",children:"🥈"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MONSTER HUNTER"}),u.jsx("p",{children:"Tamed 5 monsters"})]})]}),e.anxietyGameScore>=10&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:"🥇"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"ANXIETY MASTER"}),u.jsx("p",{children:"Tamed 10 monsters"})]})]}),e.mindfulnessPoints>=100&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MINDFUL GURU"}),u.jsx("p",{children:"Earned 100+ mindfulness points"})]})]})]})]}),u.jsxs("div",{className:"coming-soon-games",children:[u.jsx("h3",{className:"section-title",children:"More Games Coming Soon"}),u.jsxs("div",{className:"game-preview-grid",children:[u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🌱"}),u.jsx("h4",{children:"Mindful Garden"}),u.jsx("p",{children:"Grow a virtual garden through daily meditation practice"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🌊"}),u.jsx("h4",{children:"Calm Waters"}),u.jsx("p",{children:"Navigate peaceful waters while practicing breathing exercises"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🎯"}),u.jsx("h4",{children:"Focus Quest"}),u.jsx("p",{children:"Complete challenges that improve concentration and focus"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]})]})]})]})]})}function Mje(){return u.jsx(bx,{children:u.jsxs(EA,{children:[u.jsxs(fA,{children:[u.jsx(pn,{path:"/welcome",element:u.jsx(IO,{})}),u.jsxs(pn,{path:"/",element:u.jsx(kje,{children:u.jsx(TO,{})}),children:[u.jsx(pn,{index:!0,element:u.jsx(Td,{to:"/dashboard",replace:!0})}),u.jsx(pn,{path:"dashboard",element:u.jsx(NO,{})}),u.jsx(pn,{path:"workout",element:u.jsx(Tje,{})}),u.jsx(pn,{path:"meditation",element:u.jsx(Ije,{})}),u.jsx(pn,{path:"water",element:u.jsx(xje,{})}),u.jsx(pn,{path:"goals",element:u.jsx(bje,{})}),u.jsx(pn,{path:"profile",element:u.jsx(Sje,{})}),u.jsx(pn,{path:"games",element:u.jsx(Vje,{})})]}),u.jsx(pn,{path:"*",element:u.jsx(Td,{to:"/welcome",replace:!0})})]}),u.jsx(Rje,{}),u.jsx(Dje,{}),u.jsx(jje,{})]})})}Gf.createRoot(document.getElementById("root")).render(u.jsx(ys.StrictMode,{children:u.jsx(bx,{children:u.jsx(Mje,{})})}));
