function DS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i_={exports:{}},du={},o_={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $a=Symbol.for("react.element"),bS=Symbol.for("react.portal"),OS=Symbol.for("react.fragment"),MS=Symbol.for("react.strict_mode"),LS=Symbol.for("react.profiler"),VS=Symbol.for("react.provider"),FS=Symbol.for("react.context"),US=Symbol.for("react.forward_ref"),zS=Symbol.for("react.suspense"),BS=Symbol.for("react.memo"),$S=Symbol.for("react.lazy"),rg=Symbol.iterator;function WS(t){return t===null||typeof t!="object"?null:(t=rg&&t[rg]||t["@@iterator"],typeof t=="function"?t:null)}var a_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l_=Object.assign,c_={};function so(t,e,n){this.props=t,this.context=e,this.refs=c_,this.updater=n||a_}so.prototype.isReactComponent={};so.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};so.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function u_(){}u_.prototype=so.prototype;function Pf(t,e,n){this.props=t,this.context=e,this.refs=c_,this.updater=n||a_}var Rf=Pf.prototype=new u_;Rf.constructor=Pf;l_(Rf,so.prototype);Rf.isPureReactComponent=!0;var sg=Array.isArray,d_=Object.prototype.hasOwnProperty,Df={current:null},h_={key:!0,ref:!0,__self:!0,__source:!0};function f_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)d_.call(e,r)&&!h_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:$a,type:t,key:i,ref:o,props:s,_owner:Df.current}}function qS(t,e){return{$$typeof:$a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jf(t){return typeof t=="object"&&t!==null&&t.$$typeof===$a}function HS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ig=/\/+/g;function fd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HS(""+t.key):e.toString(36)}function Ql(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $a:case bS:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+fd(o,0):r,sg(s)?(n="",t!=null&&(n=t.replace(ig,"$&/")+"/"),Ql(s,e,n,"",function(d){return d})):s!=null&&(jf(s)&&(s=qS(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ig,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sg(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+fd(i,l);o+=Ql(i,e,n,u,s)}else if(u=WS(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+fd(i,l++),o+=Ql(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sl(t,e,n){if(t==null)return t;var r=[],s=0;return Ql(t,r,"","",function(i){return e.call(n,i,s++)}),r}function GS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},Yl={transition:null},KS={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:Yl,ReactCurrentOwner:Df};function m_(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Sl,forEach:function(t,e,n){Sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sl(t,function(){e++}),e},toArray:function(t){return Sl(t,function(e){return e})||[]},only:function(t){if(!jf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=so;ce.Fragment=OS;ce.Profiler=LS;ce.PureComponent=Pf;ce.StrictMode=MS;ce.Suspense=zS;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KS;ce.act=m_;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=l_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Df.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)d_.call(e,u)&&!h_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:$a,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:FS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VS,_context:t},t.Consumer=t};ce.createElement=f_;ce.createFactory=function(t){var e=f_.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:US,render:t}};ce.isValidElement=jf;ce.lazy=function(t){return{$$typeof:$S,_payload:{_status:-1,_result:t},_init:GS}};ce.memo=function(t,e){return{$$typeof:BS,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Yl.transition;Yl.transition={};try{t()}finally{Yl.transition=e}};ce.unstable_act=m_;ce.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ce.useContext=function(t){return Nt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ce.useId=function(){return Nt.current.useId()};ce.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};ce.useRef=function(t){return Nt.current.useRef(t)};ce.useState=function(t){return Nt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Nt.current.useTransition()};ce.version="18.3.1";o_.exports=ce;var P=o_.exports;const Jn=jS(P),QS=DS({__proto__:null,default:Jn},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS=P,XS=Symbol.for("react.element"),JS=Symbol.for("react.fragment"),ZS=Object.prototype.hasOwnProperty,eI=YS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tI={key:!0,ref:!0,__self:!0,__source:!0};function p_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ZS.call(e,r)&&!tI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:XS,type:t,key:i,ref:o,props:s,_owner:eI.current}}du.Fragment=JS;du.jsx=p_;du.jsxs=p_;i_.exports=du;var c=i_.exports,eh={},g_={exports:{}},Ht={},y_={exports:{}},v_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Y){var ie=W.length;W.push(Y);e:for(;0<ie;){var Se=ie-1>>>1,ge=W[Se];if(0<s(ge,Y))W[Se]=Y,W[ie]=ge,ie=Se;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Y=W[0],ie=W.pop();if(ie!==Y){W[0]=ie;e:for(var Se=0,ge=W.length,Ie=ge>>>1;Se<Ie;){var Mt=2*(Se+1)-1,an=W[Mt],ln=Mt+1,Lt=W[ln];if(0>s(an,ie))ln<ge&&0>s(Lt,an)?(W[Se]=Lt,W[ln]=ie,Se=ln):(W[Se]=an,W[Mt]=ie,Se=Mt);else if(ln<ge&&0>s(Lt,ie))W[Se]=Lt,W[ln]=ie,Se=ln;else break e}}return Y}function s(W,Y){var ie=W.sortIndex-Y.sortIndex;return ie!==0?ie:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,g=3,k=!1,N=!1,j=!1,R=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(W){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=W)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function b(W){if(j=!1,x(W),!N)if(n(u)!==null)N=!0,Z(V);else{var Y=n(d);Y!==null&&Te(b,Y.startTime-W)}}function V(W,Y){N=!1,j&&(j=!1,I(y),y=-1),k=!0;var ie=g;try{for(x(Y),m=n(u);m!==null&&(!(m.expirationTime>Y)||W&&!A());){var Se=m.callback;if(typeof Se=="function"){m.callback=null,g=m.priorityLevel;var ge=Se(m.expirationTime<=Y);Y=t.unstable_now(),typeof ge=="function"?m.callback=ge:m===n(u)&&r(u),x(Y)}else r(u);m=n(u)}if(m!==null)var Ie=!0;else{var Mt=n(d);Mt!==null&&Te(b,Mt.startTime-Y),Ie=!1}return Ie}finally{m=null,g=ie,k=!1}}var O=!1,v=null,y=-1,_=5,E=-1;function A(){return!(t.unstable_now()-E<_)}function C(){if(v!==null){var W=t.unstable_now();E=W;var Y=!0;try{Y=v(!0,W)}finally{Y?S():(O=!1,v=null)}}else O=!1}var S;if(typeof T=="function")S=function(){T(C)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,He=re.port2;re.port1.onmessage=C,S=function(){He.postMessage(null)}}else S=function(){R(C,0)};function Z(W){v=W,O||(O=!0,S())}function Te(W,Y){y=R(function(){W(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){N||k||(N=!0,Z(V))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var ie=g;g=Y;try{return W()}finally{g=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ie=g;g=W;try{return Y()}finally{g=ie}},t.unstable_scheduleCallback=function(W,Y,ie){var Se=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Se+ie:Se):ie=Se,W){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ie+ge,W={id:f++,callback:Y,priorityLevel:W,startTime:ie,expirationTime:ge,sortIndex:-1},ie>Se?(W.sortIndex=ie,e(d,W),n(u)===null&&W===n(d)&&(j?(I(y),y=-1):j=!0,Te(b,ie-Se))):(W.sortIndex=ge,e(u,W),N||k||(N=!0,Z(V))),W},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(W){var Y=g;return function(){var ie=g;g=Y;try{return W.apply(this,arguments)}finally{g=ie}}}})(v_);y_.exports=v_;var nI=y_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rI=P,qt=nI;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var __=new Set,fa={};function Qs(t,e){$i(t,e),$i(t+"Capture",e)}function $i(t,e){for(fa[t]=e,t=0;t<e.length;t++)__.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),th=Object.prototype.hasOwnProperty,sI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,og={},ag={};function iI(t){return th.call(ag,t)?!0:th.call(og,t)?!1:sI.test(t)?ag[t]=!0:(og[t]=!0,!1)}function oI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aI(t,e,n,r){if(e===null||typeof e>"u"||oI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var bf=/[\-:]([a-z])/g;function Of(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bf,Of);ct[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bf,Of);ct[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bf,Of);ct[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mf(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aI(e,n,s,r)&&(n=null),r||s===null?iI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ur=rI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Il=Symbol.for("react.element"),_i=Symbol.for("react.portal"),wi=Symbol.for("react.fragment"),Lf=Symbol.for("react.strict_mode"),nh=Symbol.for("react.profiler"),w_=Symbol.for("react.provider"),E_=Symbol.for("react.context"),Vf=Symbol.for("react.forward_ref"),rh=Symbol.for("react.suspense"),sh=Symbol.for("react.suspense_list"),Ff=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),T_=Symbol.for("react.offscreen"),lg=Symbol.iterator;function jo(t){return t===null||typeof t!="object"?null:(t=lg&&t[lg]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,md;function Bo(t){if(md===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);md=e&&e[1]||""}return`
`+md+t}var pd=!1;function gd(t,e){if(!t||pd)return"";pd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{pd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bo(t):""}function lI(t){switch(t.tag){case 5:return Bo(t.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return t=gd(t.type,!1),t;case 11:return t=gd(t.type.render,!1),t;case 1:return t=gd(t.type,!0),t;default:return""}}function ih(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wi:return"Fragment";case _i:return"Portal";case nh:return"Profiler";case Lf:return"StrictMode";case rh:return"Suspense";case sh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case E_:return(t.displayName||"Context")+".Consumer";case w_:return(t._context.displayName||"Context")+".Provider";case Vf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ff:return e=t.displayName||null,e!==null?e:ih(t.type)||"Memo";case Pr:e=t._payload,t=t._init;try{return ih(t(e))}catch{}}return null}function cI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ih(e);case 8:return e===Lf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function S_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uI(t){var e=S_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xl(t){t._valueTracker||(t._valueTracker=uI(t))}function I_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=S_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function oh(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function x_(t,e){e=e.checked,e!=null&&Mf(t,"checked",e,!1)}function ah(t,e){x_(t,e);var n=ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lh(t,e.type,n):e.hasOwnProperty("defaultValue")&&lh(t,e.type,ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ug(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lh(t,e,n){(e!=="number"||yc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $o=Array.isArray;function Di(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ts(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ch(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if($o(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ts(n)}}function k_(t,e){var n=ts(e.value),r=ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function N_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?N_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kl,A_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dI=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(t){dI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jo[e]=Jo[t]})});function C_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jo.hasOwnProperty(t)&&Jo[t]?(""+e).trim():e+"px"}function P_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=C_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var hI=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dh(t,e){if(e){if(hI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function hh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fh=null;function Uf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mh=null,ji=null,bi=null;function fg(t){if(t=Ha(t)){if(typeof mh!="function")throw Error($(280));var e=t.stateNode;e&&(e=gu(e),mh(t.stateNode,t.type,e))}}function R_(t){ji?bi?bi.push(t):bi=[t]:ji=t}function D_(){if(ji){var t=ji,e=bi;if(bi=ji=null,fg(t),e)for(t=0;t<e.length;t++)fg(e[t])}}function j_(t,e){return t(e)}function b_(){}var yd=!1;function O_(t,e,n){if(yd)return t(e,n);yd=!0;try{return j_(t,e,n)}finally{yd=!1,(ji!==null||bi!==null)&&(b_(),D_())}}function pa(t,e){var n=t.stateNode;if(n===null)return null;var r=gu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ph=!1;if(nr)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){ph=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{ph=!1}function fI(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Zo=!1,vc=null,_c=!1,gh=null,mI={onError:function(t){Zo=!0,vc=t}};function pI(t,e,n,r,s,i,o,l,u){Zo=!1,vc=null,fI.apply(mI,arguments)}function gI(t,e,n,r,s,i,o,l,u){if(pI.apply(this,arguments),Zo){if(Zo){var d=vc;Zo=!1,vc=null}else throw Error($(198));_c||(_c=!0,gh=d)}}function Ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function M_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mg(t){if(Ys(t)!==t)throw Error($(188))}function yI(t){var e=t.alternate;if(!e){if(e=Ys(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return mg(s),t;if(i===r)return mg(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function L_(t){return t=yI(t),t!==null?V_(t):null}function V_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=V_(t);if(e!==null)return e;t=t.sibling}return null}var F_=qt.unstable_scheduleCallback,pg=qt.unstable_cancelCallback,vI=qt.unstable_shouldYield,_I=qt.unstable_requestPaint,Ue=qt.unstable_now,wI=qt.unstable_getCurrentPriorityLevel,zf=qt.unstable_ImmediatePriority,U_=qt.unstable_UserBlockingPriority,wc=qt.unstable_NormalPriority,EI=qt.unstable_LowPriority,z_=qt.unstable_IdlePriority,hu=null,bn=null;function TI(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(hu,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:xI,SI=Math.log,II=Math.LN2;function xI(t){return t>>>=0,t===0?32:31-(SI(t)/II|0)|0}var Nl=64,Al=4194304;function Wo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ec(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Wo(l):(i&=o,i!==0&&(r=Wo(i)))}else o=n&~s,o!==0?r=Wo(o):i!==0&&(r=Wo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),s=1<<n,r|=t[n],e&=~s;return r}function kI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=kI(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function yh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function B_(){var t=Nl;return Nl<<=1,!(Nl&4194240)&&(Nl=64),t}function vd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function AI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Bf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function $_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var W_,$f,q_,H_,G_,vh=!1,Cl=[],Br=null,$r=null,Wr=null,ga=new Map,ya=new Map,Dr=[],CI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gg(t,e){switch(t){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":ga.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ya.delete(e.pointerId)}}function Oo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ha(e),e!==null&&$f(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function PI(t,e,n,r,s){switch(e){case"focusin":return Br=Oo(Br,t,e,n,r,s),!0;case"dragenter":return $r=Oo($r,t,e,n,r,s),!0;case"mouseover":return Wr=Oo(Wr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ga.set(i,Oo(ga.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ya.set(i,Oo(ya.get(i)||null,t,e,n,r,s)),!0}return!1}function K_(t){var e=Ps(t.target);if(e!==null){var n=Ys(e);if(n!==null){if(e=n.tag,e===13){if(e=M_(n),e!==null){t.blockedOn=e,G_(t.priority,function(){q_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_h(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fh=r,n.target.dispatchEvent(r),fh=null}else return e=Ha(n),e!==null&&$f(e),t.blockedOn=n,!1;e.shift()}return!0}function yg(t,e,n){Xl(t)&&n.delete(e)}function RI(){vh=!1,Br!==null&&Xl(Br)&&(Br=null),$r!==null&&Xl($r)&&($r=null),Wr!==null&&Xl(Wr)&&(Wr=null),ga.forEach(yg),ya.forEach(yg)}function Mo(t,e){t.blockedOn===e&&(t.blockedOn=null,vh||(vh=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,RI)))}function va(t){function e(s){return Mo(s,t)}if(0<Cl.length){Mo(Cl[0],t);for(var n=1;n<Cl.length;n++){var r=Cl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Br!==null&&Mo(Br,t),$r!==null&&Mo($r,t),Wr!==null&&Mo(Wr,t),ga.forEach(e),ya.forEach(e),n=0;n<Dr.length;n++)r=Dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Dr.length&&(n=Dr[0],n.blockedOn===null);)K_(n),n.blockedOn===null&&Dr.shift()}var Oi=ur.ReactCurrentBatchConfig,Tc=!0;function DI(t,e,n,r){var s=ve,i=Oi.transition;Oi.transition=null;try{ve=1,Wf(t,e,n,r)}finally{ve=s,Oi.transition=i}}function jI(t,e,n,r){var s=ve,i=Oi.transition;Oi.transition=null;try{ve=4,Wf(t,e,n,r)}finally{ve=s,Oi.transition=i}}function Wf(t,e,n,r){if(Tc){var s=_h(t,e,n,r);if(s===null)Ad(t,e,r,Sc,n),gg(t,r);else if(PI(s,t,e,n,r))r.stopPropagation();else if(gg(t,r),e&4&&-1<CI.indexOf(t)){for(;s!==null;){var i=Ha(s);if(i!==null&&W_(i),i=_h(t,e,n,r),i===null&&Ad(t,e,r,Sc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ad(t,e,r,null,n)}}var Sc=null;function _h(t,e,n,r){if(Sc=null,t=Uf(r),t=Ps(t),t!==null)if(e=Ys(t),e===null)t=null;else if(n=e.tag,n===13){if(t=M_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sc=t,null}function Q_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wI()){case zf:return 1;case U_:return 4;case wc:case EI:return 16;case z_:return 536870912;default:return 16}default:return 16}}var Vr=null,qf=null,Jl=null;function Y_(){if(Jl)return Jl;var t,e=qf,n=e.length,r,s="value"in Vr?Vr.value:Vr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Jl=s.slice(t,1<r?1-r:void 0)}function Zl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pl(){return!0}function vg(){return!1}function Gt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pl:vg,this.isPropagationStopped=vg,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),e}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hf=Gt(io),qa=be({},io,{view:0,detail:0}),bI=Gt(qa),_d,wd,Lo,fu=be({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lo&&(Lo&&t.type==="mousemove"?(_d=t.screenX-Lo.screenX,wd=t.screenY-Lo.screenY):wd=_d=0,Lo=t),_d)},movementY:function(t){return"movementY"in t?t.movementY:wd}}),_g=Gt(fu),OI=be({},fu,{dataTransfer:0}),MI=Gt(OI),LI=be({},qa,{relatedTarget:0}),Ed=Gt(LI),VI=be({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),FI=Gt(VI),UI=be({},io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zI=Gt(UI),BI=be({},io,{data:0}),wg=Gt(BI),$I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qI[t])?!!e[t]:!1}function Gf(){return HI}var GI=be({},qa,{key:function(t){if(t.key){var e=$I[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gf,charCode:function(t){return t.type==="keypress"?Zl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KI=Gt(GI),QI=be({},fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eg=Gt(QI),YI=be({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gf}),XI=Gt(YI),JI=be({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZI=Gt(JI),ex=be({},fu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tx=Gt(ex),nx=[9,13,27,32],Kf=nr&&"CompositionEvent"in window,ea=null;nr&&"documentMode"in document&&(ea=document.documentMode);var rx=nr&&"TextEvent"in window&&!ea,X_=nr&&(!Kf||ea&&8<ea&&11>=ea),Tg=" ",Sg=!1;function J_(t,e){switch(t){case"keyup":return nx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ei=!1;function sx(t,e){switch(t){case"compositionend":return Z_(e);case"keypress":return e.which!==32?null:(Sg=!0,Tg);case"textInput":return t=e.data,t===Tg&&Sg?null:t;default:return null}}function ix(t,e){if(Ei)return t==="compositionend"||!Kf&&J_(t,e)?(t=Y_(),Jl=qf=Vr=null,Ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return X_&&e.locale!=="ko"?null:e.data;default:return null}}var ox={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ig(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ox[t.type]:e==="textarea"}function ew(t,e,n,r){R_(r),e=Ic(e,"onChange"),0<e.length&&(n=new Hf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ta=null,_a=null;function ax(t){dw(t,0)}function mu(t){var e=Ii(t);if(I_(e))return t}function lx(t,e){if(t==="change")return e}var tw=!1;if(nr){var Td;if(nr){var Sd="oninput"in document;if(!Sd){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),Sd=typeof xg.oninput=="function"}Td=Sd}else Td=!1;tw=Td&&(!document.documentMode||9<document.documentMode)}function kg(){ta&&(ta.detachEvent("onpropertychange",nw),_a=ta=null)}function nw(t){if(t.propertyName==="value"&&mu(_a)){var e=[];ew(e,_a,t,Uf(t)),O_(ax,e)}}function cx(t,e,n){t==="focusin"?(kg(),ta=e,_a=n,ta.attachEvent("onpropertychange",nw)):t==="focusout"&&kg()}function ux(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mu(_a)}function dx(t,e){if(t==="click")return mu(e)}function hx(t,e){if(t==="input"||t==="change")return mu(e)}function fx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:fx;function wa(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!th.call(e,s)||!vn(t[s],e[s]))return!1}return!0}function Ng(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ag(t,e){var n=Ng(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ng(n)}}function rw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sw(){for(var t=window,e=yc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yc(t.document)}return e}function Qf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mx(t){var e=sw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rw(n.ownerDocument.documentElement,n)){if(r!==null&&Qf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ag(n,i);var o=Ag(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var px=nr&&"documentMode"in document&&11>=document.documentMode,Ti=null,wh=null,na=null,Eh=!1;function Cg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Eh||Ti==null||Ti!==yc(r)||(r=Ti,"selectionStart"in r&&Qf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),na&&wa(na,r)||(na=r,r=Ic(wh,"onSelect"),0<r.length&&(e=new Hf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ti)))}function Rl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Si={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},Id={},iw={};nr&&(iw=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function pu(t){if(Id[t])return Id[t];if(!Si[t])return t;var e=Si[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iw)return Id[t]=e[n];return t}var ow=pu("animationend"),aw=pu("animationiteration"),lw=pu("animationstart"),cw=pu("transitionend"),uw=new Map,Pg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(t,e){uw.set(t,e),Qs(e,[t])}for(var xd=0;xd<Pg.length;xd++){var kd=Pg[xd],gx=kd.toLowerCase(),yx=kd[0].toUpperCase()+kd.slice(1);us(gx,"on"+yx)}us(ow,"onAnimationEnd");us(aw,"onAnimationIteration");us(lw,"onAnimationStart");us("dblclick","onDoubleClick");us("focusin","onFocus");us("focusout","onBlur");us(cw,"onTransitionEnd");$i("onMouseEnter",["mouseout","mouseover"]);$i("onMouseLeave",["mouseout","mouseover"]);$i("onPointerEnter",["pointerout","pointerover"]);$i("onPointerLeave",["pointerout","pointerover"]);Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vx=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function Rg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gI(r,e,void 0,t),t.currentTarget=null}function dw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Rg(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Rg(s,l,d),i=u}}}if(_c)throw t=gh,_c=!1,gh=null,t}function ke(t,e){var n=e[kh];n===void 0&&(n=e[kh]=new Set);var r=t+"__bubble";n.has(r)||(hw(e,t,2,!1),n.add(r))}function Nd(t,e,n){var r=0;e&&(r|=4),hw(n,t,r,e)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function Ea(t){if(!t[Dl]){t[Dl]=!0,__.forEach(function(n){n!=="selectionchange"&&(vx.has(n)||Nd(n,!1,t),Nd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dl]||(e[Dl]=!0,Nd("selectionchange",!1,e))}}function hw(t,e,n,r){switch(Q_(e)){case 1:var s=DI;break;case 4:s=jI;break;default:s=Wf}n=s.bind(null,e,n,t),s=void 0,!ph||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ad(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ps(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}O_(function(){var d=i,f=Uf(n),m=[];e:{var g=uw.get(t);if(g!==void 0){var k=Hf,N=t;switch(t){case"keypress":if(Zl(n)===0)break e;case"keydown":case"keyup":k=KI;break;case"focusin":N="focus",k=Ed;break;case"focusout":N="blur",k=Ed;break;case"beforeblur":case"afterblur":k=Ed;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=_g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=MI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=XI;break;case ow:case aw:case lw:k=FI;break;case cw:k=ZI;break;case"scroll":k=bI;break;case"wheel":k=tx;break;case"copy":case"cut":case"paste":k=zI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Eg}var j=(e&4)!==0,R=!j&&t==="scroll",I=j?g!==null?g+"Capture":null:g;j=[];for(var T=d,x;T!==null;){x=T;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,I!==null&&(b=pa(T,I),b!=null&&j.push(Ta(T,b,x)))),R)break;T=T.return}0<j.length&&(g=new k(g,N,null,n,f),m.push({event:g,listeners:j}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",g&&n!==fh&&(N=n.relatedTarget||n.fromElement)&&(Ps(N)||N[rr]))break e;if((k||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,k?(N=n.relatedTarget||n.toElement,k=d,N=N?Ps(N):null,N!==null&&(R=Ys(N),N!==R||N.tag!==5&&N.tag!==6)&&(N=null)):(k=null,N=d),k!==N)){if(j=_g,b="onMouseLeave",I="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(j=Eg,b="onPointerLeave",I="onPointerEnter",T="pointer"),R=k==null?g:Ii(k),x=N==null?g:Ii(N),g=new j(b,T+"leave",k,n,f),g.target=R,g.relatedTarget=x,b=null,Ps(f)===d&&(j=new j(I,T+"enter",N,n,f),j.target=x,j.relatedTarget=R,b=j),R=b,k&&N)t:{for(j=k,I=N,T=0,x=j;x;x=fi(x))T++;for(x=0,b=I;b;b=fi(b))x++;for(;0<T-x;)j=fi(j),T--;for(;0<x-T;)I=fi(I),x--;for(;T--;){if(j===I||I!==null&&j===I.alternate)break t;j=fi(j),I=fi(I)}j=null}else j=null;k!==null&&Dg(m,g,k,j,!1),N!==null&&R!==null&&Dg(m,R,N,j,!0)}}e:{if(g=d?Ii(d):window,k=g.nodeName&&g.nodeName.toLowerCase(),k==="select"||k==="input"&&g.type==="file")var V=lx;else if(Ig(g))if(tw)V=hx;else{V=ux;var O=cx}else(k=g.nodeName)&&k.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=dx);if(V&&(V=V(t,d))){ew(m,V,n,f);break e}O&&O(t,g,d),t==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&lh(g,"number",g.value)}switch(O=d?Ii(d):window,t){case"focusin":(Ig(O)||O.contentEditable==="true")&&(Ti=O,wh=d,na=null);break;case"focusout":na=wh=Ti=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,Cg(m,n,f);break;case"selectionchange":if(px)break;case"keydown":case"keyup":Cg(m,n,f)}var v;if(Kf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ei?J_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(X_&&n.locale!=="ko"&&(Ei||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ei&&(v=Y_()):(Vr=f,qf="value"in Vr?Vr.value:Vr.textContent,Ei=!0)),O=Ic(d,y),0<O.length&&(y=new wg(y,t,null,n,f),m.push({event:y,listeners:O}),v?y.data=v:(v=Z_(n),v!==null&&(y.data=v)))),(v=rx?sx(t,n):ix(t,n))&&(d=Ic(d,"onBeforeInput"),0<d.length&&(f=new wg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=v))}dw(m,e)})}function Ta(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ic(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=pa(t,n),i!=null&&r.unshift(Ta(t,i,s)),i=pa(t,e),i!=null&&r.push(Ta(t,i,s))),t=t.return}return r}function fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=pa(n,i),u!=null&&o.unshift(Ta(n,u,l))):s||(u=pa(n,i),u!=null&&o.push(Ta(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _x=/\r\n?/g,wx=/\u0000|\uFFFD/g;function jg(t){return(typeof t=="string"?t:""+t).replace(_x,`
`).replace(wx,"")}function jl(t,e,n){if(e=jg(e),jg(t)!==e&&n)throw Error($(425))}function xc(){}var Th=null,Sh=null;function Ih(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xh=typeof setTimeout=="function"?setTimeout:void 0,Ex=typeof clearTimeout=="function"?clearTimeout:void 0,bg=typeof Promise=="function"?Promise:void 0,Tx=typeof queueMicrotask=="function"?queueMicrotask:typeof bg<"u"?function(t){return bg.resolve(null).then(t).catch(Sx)}:xh;function Sx(t){setTimeout(function(){throw t})}function Cd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),va(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);va(e)}function qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Og(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oo=Math.random().toString(36).slice(2),Pn="__reactFiber$"+oo,Sa="__reactProps$"+oo,rr="__reactContainer$"+oo,kh="__reactEvents$"+oo,Ix="__reactListeners$"+oo,xx="__reactHandles$"+oo;function Ps(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Og(t);t!==null;){if(n=t[Pn])return n;t=Og(t)}return e}t=n,n=t.parentNode}return null}function Ha(t){return t=t[Pn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ii(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function gu(t){return t[Sa]||null}var Nh=[],xi=-1;function ds(t){return{current:t}}function Ae(t){0>xi||(t.current=Nh[xi],Nh[xi]=null,xi--)}function Ee(t,e){xi++,Nh[xi]=t.current,t.current=e}var ns={},wt=ds(ns),jt=ds(!1),Ls=ns;function Wi(t,e){var n=t.type.contextTypes;if(!n)return ns;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function kc(){Ae(jt),Ae(wt)}function Mg(t,e,n){if(wt.current!==ns)throw Error($(168));Ee(wt,e),Ee(jt,n)}function fw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,cI(t)||"Unknown",s));return be({},n,r)}function Nc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ns,Ls=wt.current,Ee(wt,t),Ee(jt,jt.current),!0}function Lg(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=fw(t,e,Ls),r.__reactInternalMemoizedMergedChildContext=t,Ae(jt),Ae(wt),Ee(wt,t)):Ae(jt),Ee(jt,n)}var Gn=null,yu=!1,Pd=!1;function mw(t){Gn===null?Gn=[t]:Gn.push(t)}function kx(t){yu=!0,mw(t)}function hs(){if(!Pd&&Gn!==null){Pd=!0;var t=0,e=ve;try{var n=Gn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gn=null,yu=!1}catch(s){throw Gn!==null&&(Gn=Gn.slice(t+1)),F_(zf,hs),s}finally{ve=e,Pd=!1}}return null}var ki=[],Ni=0,Ac=null,Cc=0,Jt=[],Zt=0,Vs=null,Kn=1,Qn="";function xs(t,e){ki[Ni++]=Cc,ki[Ni++]=Ac,Ac=t,Cc=e}function pw(t,e,n){Jt[Zt++]=Kn,Jt[Zt++]=Qn,Jt[Zt++]=Vs,Vs=t;var r=Kn;t=Qn;var s=32-gn(r)-1;r&=~(1<<s),n+=1;var i=32-gn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Kn=1<<32-gn(e)+s|n<<s|r,Qn=i+t}else Kn=1<<i|n<<s|r,Qn=t}function Yf(t){t.return!==null&&(xs(t,1),pw(t,1,0))}function Xf(t){for(;t===Ac;)Ac=ki[--Ni],ki[Ni]=null,Cc=ki[--Ni],ki[Ni]=null;for(;t===Vs;)Vs=Jt[--Zt],Jt[Zt]=null,Qn=Jt[--Zt],Jt[Zt]=null,Kn=Jt[--Zt],Jt[Zt]=null}var Wt=null,Bt=null,Ce=!1,mn=null;function gw(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vs!==null?{id:Kn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,Bt=null,!0):!1;default:return!1}}function Ah(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ch(t){if(Ce){var e=Bt;if(e){var n=e;if(!Vg(t,e)){if(Ah(t))throw Error($(418));e=qr(n.nextSibling);var r=Wt;e&&Vg(t,e)?gw(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Wt=t)}}else{if(Ah(t))throw Error($(418));t.flags=t.flags&-4097|2,Ce=!1,Wt=t}}}function Fg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function bl(t){if(t!==Wt)return!1;if(!Ce)return Fg(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ih(t.type,t.memoizedProps)),e&&(e=Bt)){if(Ah(t))throw yw(),Error($(418));for(;e;)gw(t,e),e=qr(e.nextSibling)}if(Fg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bt=qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=Wt?qr(t.stateNode.nextSibling):null;return!0}function yw(){for(var t=Bt;t;)t=qr(t.nextSibling)}function qi(){Bt=Wt=null,Ce=!1}function Jf(t){mn===null?mn=[t]:mn.push(t)}var Nx=ur.ReactCurrentBatchConfig;function Vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Ol(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ug(t){var e=t._init;return e(t._payload)}function vw(t){function e(I,T){if(t){var x=I.deletions;x===null?(I.deletions=[T],I.flags|=16):x.push(T)}}function n(I,T){if(!t)return null;for(;T!==null;)e(I,T),T=T.sibling;return null}function r(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function s(I,T){return I=Qr(I,T),I.index=0,I.sibling=null,I}function i(I,T,x){return I.index=x,t?(x=I.alternate,x!==null?(x=x.index,x<T?(I.flags|=2,T):x):(I.flags|=2,T)):(I.flags|=1048576,T)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,T,x,b){return T===null||T.tag!==6?(T=Ld(x,I.mode,b),T.return=I,T):(T=s(T,x),T.return=I,T)}function u(I,T,x,b){var V=x.type;return V===wi?f(I,T,x.props.children,b,x.key):T!==null&&(T.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Pr&&Ug(V)===T.type)?(b=s(T,x.props),b.ref=Vo(I,T,x),b.return=I,b):(b=oc(x.type,x.key,x.props,null,I.mode,b),b.ref=Vo(I,T,x),b.return=I,b)}function d(I,T,x,b){return T===null||T.tag!==4||T.stateNode.containerInfo!==x.containerInfo||T.stateNode.implementation!==x.implementation?(T=Vd(x,I.mode,b),T.return=I,T):(T=s(T,x.children||[]),T.return=I,T)}function f(I,T,x,b,V){return T===null||T.tag!==7?(T=Ms(x,I.mode,b,V),T.return=I,T):(T=s(T,x),T.return=I,T)}function m(I,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Ld(""+T,I.mode,x),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Il:return x=oc(T.type,T.key,T.props,null,I.mode,x),x.ref=Vo(I,null,T),x.return=I,x;case _i:return T=Vd(T,I.mode,x),T.return=I,T;case Pr:var b=T._init;return m(I,b(T._payload),x)}if($o(T)||jo(T))return T=Ms(T,I.mode,x,null),T.return=I,T;Ol(I,T)}return null}function g(I,T,x,b){var V=T!==null?T.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return V!==null?null:l(I,T,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Il:return x.key===V?u(I,T,x,b):null;case _i:return x.key===V?d(I,T,x,b):null;case Pr:return V=x._init,g(I,T,V(x._payload),b)}if($o(x)||jo(x))return V!==null?null:f(I,T,x,b,null);Ol(I,x)}return null}function k(I,T,x,b,V){if(typeof b=="string"&&b!==""||typeof b=="number")return I=I.get(x)||null,l(T,I,""+b,V);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Il:return I=I.get(b.key===null?x:b.key)||null,u(T,I,b,V);case _i:return I=I.get(b.key===null?x:b.key)||null,d(T,I,b,V);case Pr:var O=b._init;return k(I,T,x,O(b._payload),V)}if($o(b)||jo(b))return I=I.get(x)||null,f(T,I,b,V,null);Ol(T,b)}return null}function N(I,T,x,b){for(var V=null,O=null,v=T,y=T=0,_=null;v!==null&&y<x.length;y++){v.index>y?(_=v,v=null):_=v.sibling;var E=g(I,v,x[y],b);if(E===null){v===null&&(v=_);break}t&&v&&E.alternate===null&&e(I,v),T=i(E,T,y),O===null?V=E:O.sibling=E,O=E,v=_}if(y===x.length)return n(I,v),Ce&&xs(I,y),V;if(v===null){for(;y<x.length;y++)v=m(I,x[y],b),v!==null&&(T=i(v,T,y),O===null?V=v:O.sibling=v,O=v);return Ce&&xs(I,y),V}for(v=r(I,v);y<x.length;y++)_=k(v,I,y,x[y],b),_!==null&&(t&&_.alternate!==null&&v.delete(_.key===null?y:_.key),T=i(_,T,y),O===null?V=_:O.sibling=_,O=_);return t&&v.forEach(function(A){return e(I,A)}),Ce&&xs(I,y),V}function j(I,T,x,b){var V=jo(x);if(typeof V!="function")throw Error($(150));if(x=V.call(x),x==null)throw Error($(151));for(var O=V=null,v=T,y=T=0,_=null,E=x.next();v!==null&&!E.done;y++,E=x.next()){v.index>y?(_=v,v=null):_=v.sibling;var A=g(I,v,E.value,b);if(A===null){v===null&&(v=_);break}t&&v&&A.alternate===null&&e(I,v),T=i(A,T,y),O===null?V=A:O.sibling=A,O=A,v=_}if(E.done)return n(I,v),Ce&&xs(I,y),V;if(v===null){for(;!E.done;y++,E=x.next())E=m(I,E.value,b),E!==null&&(T=i(E,T,y),O===null?V=E:O.sibling=E,O=E);return Ce&&xs(I,y),V}for(v=r(I,v);!E.done;y++,E=x.next())E=k(v,I,y,E.value,b),E!==null&&(t&&E.alternate!==null&&v.delete(E.key===null?y:E.key),T=i(E,T,y),O===null?V=E:O.sibling=E,O=E);return t&&v.forEach(function(C){return e(I,C)}),Ce&&xs(I,y),V}function R(I,T,x,b){if(typeof x=="object"&&x!==null&&x.type===wi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Il:e:{for(var V=x.key,O=T;O!==null;){if(O.key===V){if(V=x.type,V===wi){if(O.tag===7){n(I,O.sibling),T=s(O,x.props.children),T.return=I,I=T;break e}}else if(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Pr&&Ug(V)===O.type){n(I,O.sibling),T=s(O,x.props),T.ref=Vo(I,O,x),T.return=I,I=T;break e}n(I,O);break}else e(I,O);O=O.sibling}x.type===wi?(T=Ms(x.props.children,I.mode,b,x.key),T.return=I,I=T):(b=oc(x.type,x.key,x.props,null,I.mode,b),b.ref=Vo(I,T,x),b.return=I,I=b)}return o(I);case _i:e:{for(O=x.key;T!==null;){if(T.key===O)if(T.tag===4&&T.stateNode.containerInfo===x.containerInfo&&T.stateNode.implementation===x.implementation){n(I,T.sibling),T=s(T,x.children||[]),T.return=I,I=T;break e}else{n(I,T);break}else e(I,T);T=T.sibling}T=Vd(x,I.mode,b),T.return=I,I=T}return o(I);case Pr:return O=x._init,R(I,T,O(x._payload),b)}if($o(x))return N(I,T,x,b);if(jo(x))return j(I,T,x,b);Ol(I,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,T!==null&&T.tag===6?(n(I,T.sibling),T=s(T,x),T.return=I,I=T):(n(I,T),T=Ld(x,I.mode,b),T.return=I,I=T),o(I)):n(I,T)}return R}var Hi=vw(!0),_w=vw(!1),Pc=ds(null),Rc=null,Ai=null,Zf=null;function em(){Zf=Ai=Rc=null}function tm(t){var e=Pc.current;Ae(Pc),t._currentValue=e}function Ph(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Mi(t,e){Rc=t,Zf=Ai=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function rn(t){var e=t._currentValue;if(Zf!==t)if(t={context:t,memoizedValue:e,next:null},Ai===null){if(Rc===null)throw Error($(308));Ai=t,Rc.dependencies={lanes:0,firstContext:t}}else Ai=Ai.next=t;return e}var Rs=null;function nm(t){Rs===null?Rs=[t]:Rs.push(t)}function ww(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,nm(e)):(n.next=s.next,s.next=n),e.interleaved=n,sr(t,r)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Rr=!1;function rm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ew(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,sr(t,n)}return s=r.interleaved,s===null?(e.next=e,nm(r)):(e.next=s.next,s.next=e),r.interleaved=e,sr(t,n)}function ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bf(t,n)}}function zg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dc(t,e,n,r){var s=t.updateQueue;Rr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,k=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:k,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,j=l;switch(g=e,k=n,j.tag){case 1:if(N=j.payload,typeof N=="function"){m=N.call(k,m,g);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=j.payload,g=typeof N=="function"?N.call(k,m,g):N,g==null)break e;m=be({},m,g);break e;case 2:Rr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else k={eventTime:k,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=k,u=m):f=f.next=k,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Us|=o,t.lanes=o,t.memoizedState=m}}function Bg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Ga={},On=ds(Ga),Ia=ds(Ga),xa=ds(Ga);function Ds(t){if(t===Ga)throw Error($(174));return t}function sm(t,e){switch(Ee(xa,e),Ee(Ia,t),Ee(On,Ga),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uh(e,t)}Ae(On),Ee(On,e)}function Gi(){Ae(On),Ae(Ia),Ae(xa)}function Tw(t){Ds(xa.current);var e=Ds(On.current),n=uh(e,t.type);e!==n&&(Ee(Ia,t),Ee(On,n))}function im(t){Ia.current===t&&(Ae(On),Ae(Ia))}var Re=ds(0);function jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rd=[];function om(){for(var t=0;t<Rd.length;t++)Rd[t]._workInProgressVersionPrimary=null;Rd.length=0}var tc=ur.ReactCurrentDispatcher,Dd=ur.ReactCurrentBatchConfig,Fs=0,De=null,Ke=null,Ze=null,bc=!1,ra=!1,ka=0,Ax=0;function ft(){throw Error($(321))}function am(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function lm(t,e,n,r,s,i){if(Fs=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tc.current=t===null||t.memoizedState===null?Dx:jx,t=n(r,s),ra){i=0;do{if(ra=!1,ka=0,25<=i)throw Error($(301));i+=1,Ze=Ke=null,e.updateQueue=null,tc.current=bx,t=n(r,s)}while(ra)}if(tc.current=Oc,e=Ke!==null&&Ke.next!==null,Fs=0,Ze=Ke=De=null,bc=!1,e)throw Error($(300));return t}function cm(){var t=ka!==0;return ka=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?De.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function sn(){if(Ke===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Ze===null?De.memoizedState:Ze.next;if(e!==null)Ze=e,Ke=t;else{if(t===null)throw Error($(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?De.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function Na(t,e){return typeof e=="function"?e(t):e}function jd(t){var e=sn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((Fs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,De.lanes|=f,Us|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,vn(r,e.memoizedState)||(Dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,Us|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bd(t){var e=sn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vn(i,e.memoizedState)||(Dt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Sw(){}function Iw(t,e){var n=De,r=sn(),s=e(),i=!vn(r.memoizedState,s);if(i&&(r.memoizedState=s,Dt=!0),r=r.queue,um(Nw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Aa(9,kw.bind(null,n,r,s,e),void 0,null),et===null)throw Error($(349));Fs&30||xw(n,e,s)}return s}function xw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kw(t,e,n,r){e.value=n,e.getSnapshot=r,Aw(e)&&Cw(t)}function Nw(t,e,n){return n(function(){Aw(e)&&Cw(t)})}function Aw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function Cw(t){var e=sr(t,1);e!==null&&yn(e,t,1,-1)}function $g(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},e.queue=t,t=t.dispatch=Rx.bind(null,De,t),[e.memoizedState,t]}function Aa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Pw(){return sn().memoizedState}function nc(t,e,n,r){var s=An();De.flags|=t,s.memoizedState=Aa(1|e,n,void 0,r===void 0?null:r)}function vu(t,e,n,r){var s=sn();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&am(r,o.deps)){s.memoizedState=Aa(e,n,i,r);return}}De.flags|=t,s.memoizedState=Aa(1|e,n,i,r)}function Wg(t,e){return nc(8390656,8,t,e)}function um(t,e){return vu(2048,8,t,e)}function Rw(t,e){return vu(4,2,t,e)}function Dw(t,e){return vu(4,4,t,e)}function jw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bw(t,e,n){return n=n!=null?n.concat([t]):null,vu(4,4,jw.bind(null,e,t),n)}function dm(){}function Ow(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&am(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Mw(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&am(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Lw(t,e,n){return Fs&21?(vn(n,e)||(n=B_(),De.lanes|=n,Us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function Cx(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Dd.transition;Dd.transition={};try{t(!1),e()}finally{ve=n,Dd.transition=r}}function Vw(){return sn().memoizedState}function Px(t,e,n){var r=Kr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fw(t))Uw(e,n);else if(n=ww(t,e,n,r),n!==null){var s=xt();yn(n,t,r,s),zw(n,e,r)}}function Rx(t,e,n){var r=Kr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fw(t))Uw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,vn(l,o)){var u=e.interleaved;u===null?(s.next=s,nm(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=ww(t,e,s,r),n!==null&&(s=xt(),yn(n,t,r,s),zw(n,e,r))}}function Fw(t){var e=t.alternate;return t===De||e!==null&&e===De}function Uw(t,e){ra=bc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bf(t,n)}}var Oc={readContext:rn,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},Dx={readContext:rn,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:rn,useEffect:Wg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nc(4194308,4,jw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=An();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Px.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:$g,useDebugValue:dm,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=$g(!1),e=t[0];return t=Cx.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=An();if(Ce){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),et===null)throw Error($(349));Fs&30||xw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Wg(Nw.bind(null,r,i,t),[t]),r.flags|=2048,Aa(9,kw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=An(),e=et.identifierPrefix;if(Ce){var n=Qn,r=Kn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ka++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ax++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jx={readContext:rn,useCallback:Ow,useContext:rn,useEffect:um,useImperativeHandle:bw,useInsertionEffect:Rw,useLayoutEffect:Dw,useMemo:Mw,useReducer:jd,useRef:Pw,useState:function(){return jd(Na)},useDebugValue:dm,useDeferredValue:function(t){var e=sn();return Lw(e,Ke.memoizedState,t)},useTransition:function(){var t=jd(Na)[0],e=sn().memoizedState;return[t,e]},useMutableSource:Sw,useSyncExternalStore:Iw,useId:Vw,unstable_isNewReconciler:!1},bx={readContext:rn,useCallback:Ow,useContext:rn,useEffect:um,useImperativeHandle:bw,useInsertionEffect:Rw,useLayoutEffect:Dw,useMemo:Mw,useReducer:bd,useRef:Pw,useState:function(){return bd(Na)},useDebugValue:dm,useDeferredValue:function(t){var e=sn();return Ke===null?e.memoizedState=t:Lw(e,Ke.memoizedState,t)},useTransition:function(){var t=bd(Na)[0],e=sn().memoizedState;return[t,e]},useMutableSource:Sw,useSyncExternalStore:Iw,useId:Vw,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _u={isMounted:function(t){return(t=t._reactInternals)?Ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Kr(t),i=Zn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(yn(e,t,s,r),ec(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Kr(t),i=Zn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(yn(e,t,s,r),ec(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=Kr(t),s=Zn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Hr(t,s,r),e!==null&&(yn(e,t,r,n),ec(e,t,r))}};function qg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!wa(n,r)||!wa(s,i):!0}function Bw(t,e,n){var r=!1,s=ns,i=e.contextType;return typeof i=="object"&&i!==null?i=rn(i):(s=bt(e)?Ls:wt.current,r=e.contextTypes,i=(r=r!=null)?Wi(t,s):ns),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_u,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Hg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_u.enqueueReplaceState(e,e.state,null)}function Dh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},rm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rn(i):(i=bt(e)?Ls:wt.current,s.context=Wi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Rh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_u.enqueueReplaceState(s,s.state,null),Dc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ki(t,e){try{var n="",r=e;do n+=lI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Od(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ox=typeof WeakMap=="function"?WeakMap:Map;function $w(t,e,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Lc||(Lc=!0,$h=r),jh(t,e)},n}function Ww(t,e,n){n=Zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){jh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){jh(t,e),typeof r!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Gg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ox;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Qx.bind(null,t,e,n),e.then(t,t))}function Kg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zn(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var Mx=ur.ReactCurrentOwner,Dt=!1;function St(t,e,n,r){e.child=t===null?_w(e,null,n,r):Hi(e,t.child,n,r)}function Yg(t,e,n,r,s){n=n.render;var i=e.ref;return Mi(e,s),r=lm(t,e,n,r,i,s),n=cm(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(Ce&&n&&Yf(e),e.flags|=1,St(t,e,r,s),e.child)}function Xg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!_m(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,qw(t,e,i,r,s)):(t=oc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:wa,n(o,r)&&t.ref===e.ref)return ir(t,e,s)}return e.flags|=1,t=Qr(i,r),t.ref=e.ref,t.return=e,e.child=t}function qw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(wa(i,r)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,ir(t,e,s)}return bh(t,e,n,r,s)}function Hw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Pi,Ft),Ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(Pi,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ee(Pi,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ee(Pi,Ft),Ft|=r;return St(t,e,s,n),e.child}function Gw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bh(t,e,n,r,s){var i=bt(n)?Ls:wt.current;return i=Wi(e,i),Mi(e,s),n=lm(t,e,n,r,i,s),r=cm(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(Ce&&r&&Yf(e),e.flags|=1,St(t,e,n,s),e.child)}function Jg(t,e,n,r,s){if(bt(n)){var i=!0;Nc(e)}else i=!1;if(Mi(e,s),e.stateNode===null)rc(t,e),Bw(e,n,r),Dh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=rn(d):(d=bt(n)?Ls:wt.current,d=Wi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Hg(e,o,r,d),Rr=!1;var g=e.memoizedState;o.state=g,Dc(e,r,o,s),u=e.memoizedState,l!==r||g!==u||jt.current||Rr?(typeof f=="function"&&(Rh(e,n,f,r),u=e.memoizedState),(l=Rr||qg(e,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ew(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:hn(e.type,l),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rn(u):(u=bt(n)?Ls:wt.current,u=Wi(e,u));var k=n.getDerivedStateFromProps;(f=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Hg(e,o,r,u),Rr=!1,g=e.memoizedState,o.state=g,Dc(e,r,o,s);var N=e.memoizedState;l!==m||g!==N||jt.current||Rr?(typeof k=="function"&&(Rh(e,n,k,r),N=e.memoizedState),(d=Rr||qg(e,n,d,r,g,N,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Oh(t,e,n,r,i,s)}function Oh(t,e,n,r,s,i){Gw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Lg(e,n,!1),ir(t,e,i);r=e.stateNode,Mx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Hi(e,t.child,null,i),e.child=Hi(e,null,l,i)):St(t,e,l,i),e.memoizedState=r.state,s&&Lg(e,n,!0),e.child}function Kw(t){var e=t.stateNode;e.pendingContext?Mg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mg(t,e.context,!1),sm(t,e.containerInfo)}function Zg(t,e,n,r,s){return qi(),Jf(s),e.flags|=256,St(t,e,n,r),e.child}var Mh={dehydrated:null,treeContext:null,retryLane:0};function Lh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qw(t,e,n){var r=e.pendingProps,s=Re.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ee(Re,s&1),t===null)return Ch(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Tu(o,r,0,null),t=Ms(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Lh(n),e.memoizedState=Mh,t):hm(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Lx(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Qr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Qr(l,i):(i=Ms(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Lh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Mh,r}return i=t.child,t=i.sibling,r=Qr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hm(t,e){return e=Tu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ml(t,e,n,r){return r!==null&&Jf(r),Hi(e,t.child,null,n),t=hm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Od(Error($(422))),Ml(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Tu({mode:"visible",children:r.children},s,0,null),i=Ms(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Hi(e,t.child,null,o),e.child.memoizedState=Lh(o),e.memoizedState=Mh,i);if(!(e.mode&1))return Ml(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=Od(i,r,void 0),Ml(t,e,o,r)}if(l=(o&t.childLanes)!==0,Dt||l){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,sr(t,s),yn(r,t,s,-1))}return vm(),r=Od(Error($(421))),Ml(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Yx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Bt=qr(s.nextSibling),Wt=e,Ce=!0,mn=null,t!==null&&(Jt[Zt++]=Kn,Jt[Zt++]=Qn,Jt[Zt++]=Vs,Kn=t.id,Qn=t.overflow,Vs=e),e=hm(e,r.children),e.flags|=4096,e)}function ey(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ph(t.return,e,n)}function Md(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Yw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(St(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ey(t,n,e);else if(t.tag===19)ey(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&jc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Md(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&jc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Md(e,!0,n,null,i);break;case"together":Md(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Qr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Vx(t,e,n){switch(e.tag){case 3:Kw(e),qi();break;case 5:Tw(e);break;case 1:bt(e.type)&&Nc(e);break;case 4:sm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ee(Pc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?Qw(t,e,n):(Ee(Re,Re.current&1),t=ir(t,e,n),t!==null?t.sibling:null);Ee(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Yw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,Hw(t,e,n)}return ir(t,e,n)}var Xw,Vh,Jw,Zw;Xw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vh=function(){};Jw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ds(On.current);var i=null;switch(n){case"input":s=oh(t,s),r=oh(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=ch(t,s),r=ch(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xc)}dh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ke("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Zw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fx(t,e,n){var r=e.pendingProps;switch(Xf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return bt(e.type)&&kc(),mt(e),null;case 3:return r=e.stateNode,Gi(),Ae(jt),Ae(wt),om(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(Hh(mn),mn=null))),Vh(t,e),mt(e),null;case 5:im(e);var s=Ds(xa.current);if(n=e.type,t!==null&&e.stateNode!=null)Jw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return mt(e),null}if(t=Ds(On.current),bl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Pn]=e,r[Sa]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<qo.length;s++)ke(qo[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":cg(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":dg(r,i),ke("invalid",r)}dh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&jl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&jl(r.textContent,l,t),s=["children",""+l]):fa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":xl(r),ug(r,i,!0);break;case"textarea":xl(r),hg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=N_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pn]=e,t[Sa]=r,Xw(t,e,!1,!1),e.stateNode=t;e:{switch(o=hh(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<qo.length;s++)ke(qo[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":cg(t,r),s=oh(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),ke("invalid",t);break;case"textarea":dg(t,r),s=ch(t,r),ke("invalid",t);break;default:s=r}dh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?P_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&A_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ma(t,u):typeof u=="number"&&ma(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ke("scroll",t):u!=null&&Mf(t,i,u,o))}switch(n){case"input":xl(t),ug(t,r,!1);break;case"textarea":xl(t),hg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ts(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Di(t,!!r.multiple,i,!1):r.defaultValue!=null&&Di(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)Zw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Ds(xa.current),Ds(On.current),bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pn]=e,(i=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:jl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=e,e.stateNode=r}return mt(e),null;case 13:if(Ae(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Bt!==null&&e.mode&1&&!(e.flags&128))yw(),qi(),e.flags|=98560,i=!1;else if(i=bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Pn]=e}else qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),i=!1}else mn!==null&&(Hh(mn),mn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Qe===0&&(Qe=3):vm())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Gi(),Vh(t,e),t===null&&Ea(e.stateNode.containerInfo),mt(e),null;case 10:return tm(e.type._context),mt(e),null;case 17:return bt(e.type)&&kc(),mt(e),null;case 19:if(Ae(Re),i=e.memoizedState,i===null)return mt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Fo(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jc(t),o!==null){for(e.flags|=128,Fo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>Qi&&(e.flags|=128,r=!0,Fo(i,!1),e.lanes=4194304)}else{if(!r)if(t=jc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return mt(e),null}else 2*Ue()-i.renderingStartTime>Qi&&n!==1073741824&&(e.flags|=128,r=!0,Fo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=Re.current,Ee(Re,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return ym(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Ux(t,e){switch(Xf(e),e.tag){case 1:return bt(e.type)&&kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gi(),Ae(jt),Ae(wt),om(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return im(e),null;case 13:if(Ae(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Re),null;case 4:return Gi(),null;case 10:return tm(e.type._context),null;case 22:case 23:return ym(),null;case 24:return null;default:return null}}var Ll=!1,vt=!1,zx=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ci(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Fh(t,e,n){try{n()}catch(r){Le(t,e,r)}}var ty=!1;function Bx(t,e){if(Th=Tc,t=sw(),Qf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var k;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(k=m.firstChild)!==null;)g=m,m=k;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(k=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=k}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sh={focusedElem:t,selectionRange:n},Tc=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var j=N.memoizedProps,R=N.memoizedState,I=e.stateNode,T=I.getSnapshotBeforeUpdate(e.elementType===e.type?j:hn(e.type,j),R);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(b){Le(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return N=ty,ty=!1,N}function sa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fh(e,n,i)}s=s.next}while(s!==r)}}function wu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Uh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function e0(t){var e=t.alternate;e!==null&&(t.alternate=null,e0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[Sa],delete e[kh],delete e[Ix],delete e[xx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function t0(t){return t.tag===5||t.tag===3||t.tag===4}function ny(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||t0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xc));else if(r!==4&&(t=t.child,t!==null))for(zh(t,e,n),t=t.sibling;t!==null;)zh(t,e,n),t=t.sibling}function Bh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bh(t,e,n),t=t.sibling;t!==null;)Bh(t,e,n),t=t.sibling}var it=null,fn=!1;function Nr(t,e,n){for(n=n.child;n!==null;)n0(t,e,n),n=n.sibling}function n0(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(hu,n)}catch{}switch(n.tag){case 5:vt||Ci(n,e);case 6:var r=it,s=fn;it=null,Nr(t,e,n),it=r,fn=s,it!==null&&(fn?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(fn?(t=it,n=n.stateNode,t.nodeType===8?Cd(t.parentNode,n):t.nodeType===1&&Cd(t,n),va(t)):Cd(it,n.stateNode));break;case 4:r=it,s=fn,it=n.stateNode.containerInfo,fn=!0,Nr(t,e,n),it=r,fn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fh(n,e,o),s=s.next}while(s!==r)}Nr(t,e,n);break;case 1:if(!vt&&(Ci(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,e,l)}Nr(t,e,n);break;case 21:Nr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Nr(t,e,n),vt=r):Nr(t,e,n);break;default:Nr(t,e,n)}}function ry(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zx),e.forEach(function(r){var s=Xx.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:it=l.stateNode,fn=!1;break e;case 3:it=l.stateNode.containerInfo,fn=!0;break e;case 4:it=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(it===null)throw Error($(160));n0(i,o,s),it=null,fn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Le(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)r0(e,t),e=e.sibling}function r0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),Nn(t),r&4){try{sa(3,t,t.return),wu(3,t)}catch(j){Le(t,t.return,j)}try{sa(5,t,t.return)}catch(j){Le(t,t.return,j)}}break;case 1:dn(e,t),Nn(t),r&512&&n!==null&&Ci(n,n.return);break;case 5:if(dn(e,t),Nn(t),r&512&&n!==null&&Ci(n,n.return),t.flags&32){var s=t.stateNode;try{ma(s,"")}catch(j){Le(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&x_(s,i),hh(l,o);var d=hh(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?P_(s,m):f==="dangerouslySetInnerHTML"?A_(s,m):f==="children"?ma(s,m):Mf(s,f,m,d)}switch(l){case"input":ah(s,i);break;case"textarea":k_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var k=i.value;k!=null?Di(s,!!i.multiple,k,!1):g!==!!i.multiple&&(i.defaultValue!=null?Di(s,!!i.multiple,i.defaultValue,!0):Di(s,!!i.multiple,i.multiple?[]:"",!1))}s[Sa]=i}catch(j){Le(t,t.return,j)}}break;case 6:if(dn(e,t),Nn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){Le(t,t.return,j)}}break;case 3:if(dn(e,t),Nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{va(e.containerInfo)}catch(j){Le(t,t.return,j)}break;case 4:dn(e,t),Nn(t);break;case 13:dn(e,t),Nn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(pm=Ue())),r&4&&ry(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(d=vt)||f,dn(e,t),vt=d):dn(e,t),Nn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(m=Q=f;Q!==null;){switch(g=Q,k=g.child,g.tag){case 0:case 11:case 14:case 15:sa(4,g,g.return);break;case 1:Ci(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(j){Le(r,n,j)}}break;case 5:Ci(g,g.return);break;case 22:if(g.memoizedState!==null){iy(m);continue}}k!==null?(k.return=g,Q=k):iy(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=C_("display",o))}catch(j){Le(t,t.return,j)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(j){Le(t,t.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:dn(e,t),Nn(t),r&4&&ry(t);break;case 21:break;default:dn(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(t0(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ma(s,""),r.flags&=-33);var i=ny(t);Bh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ny(t);zh(t,l,o);break;default:throw Error($(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $x(t,e,n){Q=t,s0(t)}function s0(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ll;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||vt;l=Ll;var d=vt;if(Ll=o,(vt=u)&&!d)for(Q=s;Q!==null;)o=Q,u=o.child,o.tag===22&&o.memoizedState!==null?oy(s):u!==null?(u.return=o,Q=u):oy(s);for(;i!==null;)Q=i,s0(i),i=i.sibling;Q=s,Ll=l,vt=d}sy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):sy(t)}}function sy(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||wu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Bg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&va(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}vt||e.flags&512&&Uh(e)}catch(g){Le(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function iy(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function oy(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wu(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{Uh(e)}catch(u){Le(e,i,u)}break;case 5:var o=e.return;try{Uh(e)}catch(u){Le(e,o,u)}}}catch(u){Le(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var Wx=Math.ceil,Mc=ur.ReactCurrentDispatcher,fm=ur.ReactCurrentOwner,tn=ur.ReactCurrentBatchConfig,me=0,et=null,$e=null,lt=0,Ft=0,Pi=ds(0),Qe=0,Ca=null,Us=0,Eu=0,mm=0,ia=null,Pt=null,pm=0,Qi=1/0,Hn=null,Lc=!1,$h=null,Gr=null,Vl=!1,Fr=null,Vc=0,oa=0,Wh=null,sc=-1,ic=0;function xt(){return me&6?Ue():sc!==-1?sc:sc=Ue()}function Kr(t){return t.mode&1?me&2&&lt!==0?lt&-lt:Nx.transition!==null?(ic===0&&(ic=B_()),ic):(t=ve,t!==0||(t=window.event,t=t===void 0?16:Q_(t.type)),t):1}function yn(t,e,n,r){if(50<oa)throw oa=0,Wh=null,Error($(185));Wa(t,n,r),(!(me&2)||t!==et)&&(t===et&&(!(me&2)&&(Eu|=n),Qe===4&&jr(t,lt)),Ot(t,r),n===1&&me===0&&!(e.mode&1)&&(Qi=Ue()+500,yu&&hs()))}function Ot(t,e){var n=t.callbackNode;NI(t,e);var r=Ec(t,t===et?lt:0);if(r===0)n!==null&&pg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pg(n),e===1)t.tag===0?kx(ay.bind(null,t)):mw(ay.bind(null,t)),Tx(function(){!(me&6)&&hs()}),n=null;else{switch($_(r)){case 1:n=zf;break;case 4:n=U_;break;case 16:n=wc;break;case 536870912:n=z_;break;default:n=wc}n=h0(n,i0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function i0(t,e){if(sc=-1,ic=0,me&6)throw Error($(327));var n=t.callbackNode;if(Li()&&t.callbackNode!==n)return null;var r=Ec(t,t===et?lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fc(t,r);else{e=r;var s=me;me|=2;var i=a0();(et!==t||lt!==e)&&(Hn=null,Qi=Ue()+500,Os(t,e));do try{Gx();break}catch(l){o0(t,l)}while(!0);em(),Mc.current=i,me=s,$e!==null?e=0:(et=null,lt=0,e=Qe)}if(e!==0){if(e===2&&(s=yh(t),s!==0&&(r=s,e=qh(t,s))),e===1)throw n=Ca,Os(t,0),jr(t,r),Ot(t,Ue()),n;if(e===6)jr(t,r);else{if(s=t.current.alternate,!(r&30)&&!qx(s)&&(e=Fc(t,r),e===2&&(i=yh(t),i!==0&&(r=i,e=qh(t,i))),e===1))throw n=Ca,Os(t,0),jr(t,r),Ot(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:ks(t,Pt,Hn);break;case 3:if(jr(t,r),(r&130023424)===r&&(e=pm+500-Ue(),10<e)){if(Ec(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=xh(ks.bind(null,t,Pt,Hn),e);break}ks(t,Pt,Hn);break;case 4:if(jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Wx(r/1960))-r,10<r){t.timeoutHandle=xh(ks.bind(null,t,Pt,Hn),r);break}ks(t,Pt,Hn);break;case 5:ks(t,Pt,Hn);break;default:throw Error($(329))}}}return Ot(t,Ue()),t.callbackNode===n?i0.bind(null,t):null}function qh(t,e){var n=ia;return t.current.memoizedState.isDehydrated&&(Os(t,e).flags|=256),t=Fc(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&Hh(e)),t}function Hh(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function qx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jr(t,e){for(e&=~mm,e&=~Eu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function ay(t){if(me&6)throw Error($(327));Li();var e=Ec(t,0);if(!(e&1))return Ot(t,Ue()),null;var n=Fc(t,e);if(t.tag!==0&&n===2){var r=yh(t);r!==0&&(e=r,n=qh(t,r))}if(n===1)throw n=Ca,Os(t,0),jr(t,e),Ot(t,Ue()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ks(t,Pt,Hn),Ot(t,Ue()),null}function gm(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(Qi=Ue()+500,yu&&hs())}}function zs(t){Fr!==null&&Fr.tag===0&&!(me&6)&&Li();var e=me;me|=1;var n=tn.transition,r=ve;try{if(tn.transition=null,ve=1,t)return t()}finally{ve=r,tn.transition=n,me=e,!(me&6)&&hs()}}function ym(){Ft=Pi.current,Ae(Pi)}function Os(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ex(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Xf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kc();break;case 3:Gi(),Ae(jt),Ae(wt),om();break;case 5:im(r);break;case 4:Gi();break;case 13:Ae(Re);break;case 19:Ae(Re);break;case 10:tm(r.type._context);break;case 22:case 23:ym()}n=n.return}if(et=t,$e=t=Qr(t.current,null),lt=Ft=e,Qe=0,Ca=null,mm=Eu=Us=0,Pt=ia=null,Rs!==null){for(e=0;e<Rs.length;e++)if(n=Rs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Rs=null}return t}function o0(t,e){do{var n=$e;try{if(em(),tc.current=Oc,bc){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bc=!1}if(Fs=0,Ze=Ke=De=null,ra=!1,ka=0,fm.current=null,n===null||n.return===null){Qe=1,Ca=e,$e=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=lt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var k=Kg(o);if(k!==null){k.flags&=-257,Qg(k,o,l,i,e),k.mode&1&&Gg(i,d,e),e=k,u=d;var N=e.updateQueue;if(N===null){var j=new Set;j.add(u),e.updateQueue=j}else N.add(u);break e}else{if(!(e&1)){Gg(i,d,e),vm();break e}u=Error($(426))}}else if(Ce&&l.mode&1){var R=Kg(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Qg(R,o,l,i,e),Jf(Ki(u,l));break e}}i=u=Ki(u,l),Qe!==4&&(Qe=2),ia===null?ia=[i]:ia.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=$w(i,u,e);zg(i,I);break e;case 1:l=u;var T=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Gr===null||!Gr.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=Ww(i,l,e);zg(i,b);break e}}i=i.return}while(i!==null)}c0(n)}catch(V){e=V,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function a0(){var t=Mc.current;return Mc.current=Oc,t===null?Oc:t}function vm(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),et===null||!(Us&268435455)&&!(Eu&268435455)||jr(et,lt)}function Fc(t,e){var n=me;me|=2;var r=a0();(et!==t||lt!==e)&&(Hn=null,Os(t,e));do try{Hx();break}catch(s){o0(t,s)}while(!0);if(em(),me=n,Mc.current=r,$e!==null)throw Error($(261));return et=null,lt=0,Qe}function Hx(){for(;$e!==null;)l0($e)}function Gx(){for(;$e!==null&&!vI();)l0($e)}function l0(t){var e=d0(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?c0(t):$e=e,fm.current=null}function c0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ux(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,$e=null;return}}else if(n=Fx(n,e,Ft),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Qe===0&&(Qe=5)}function ks(t,e,n){var r=ve,s=tn.transition;try{tn.transition=null,ve=1,Kx(t,e,n,r)}finally{tn.transition=s,ve=r}return null}function Kx(t,e,n,r){do Li();while(Fr!==null);if(me&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(AI(t,i),t===et&&($e=et=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vl||(Vl=!0,h0(wc,function(){return Li(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tn.transition,tn.transition=null;var o=ve;ve=1;var l=me;me|=4,fm.current=null,Bx(t,n),r0(n,t),mx(Sh),Tc=!!Th,Sh=Th=null,t.current=n,$x(n),_I(),me=l,ve=o,tn.transition=i}else t.current=n;if(Vl&&(Vl=!1,Fr=t,Vc=s),i=t.pendingLanes,i===0&&(Gr=null),TI(n.stateNode),Ot(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Lc)throw Lc=!1,t=$h,$h=null,t;return Vc&1&&t.tag!==0&&Li(),i=t.pendingLanes,i&1?t===Wh?oa++:(oa=0,Wh=t):oa=0,hs(),null}function Li(){if(Fr!==null){var t=$_(Vc),e=tn.transition,n=ve;try{if(tn.transition=null,ve=16>t?16:t,Fr===null)var r=!1;else{if(t=Fr,Fr=null,Vc=0,me&6)throw Error($(331));var s=me;for(me|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Q=d;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:sa(8,f,i)}var m=f.child;if(m!==null)m.return=f,Q=m;else for(;Q!==null;){f=Q;var g=f.sibling,k=f.return;if(e0(f),f===d){Q=null;break}if(g!==null){g.return=k,Q=g;break}Q=k}}}var N=i.alternate;if(N!==null){var j=N.child;if(j!==null){N.child=null;do{var R=j.sibling;j.sibling=null,j=R}while(j!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sa(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,Q=I;break e}Q=i.return}}var T=t.current;for(Q=T;Q!==null;){o=Q;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Q=x;else e:for(o=T;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:wu(9,l)}}catch(V){Le(l,l.return,V)}if(l===o){Q=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,Q=b;break e}Q=l.return}}if(me=s,hs(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(hu,t)}catch{}r=!0}return r}finally{ve=n,tn.transition=e}}return!1}function ly(t,e,n){e=Ki(n,e),e=$w(t,e,1),t=Hr(t,e,1),e=xt(),t!==null&&(Wa(t,1,e),Ot(t,e))}function Le(t,e,n){if(t.tag===3)ly(t,t,n);else for(;e!==null;){if(e.tag===3){ly(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gr===null||!Gr.has(r))){t=Ki(n,t),t=Ww(e,t,1),e=Hr(e,t,1),t=xt(),e!==null&&(Wa(e,1,t),Ot(e,t));break}}e=e.return}}function Qx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(lt&n)===n&&(Qe===4||Qe===3&&(lt&130023424)===lt&&500>Ue()-pm?Os(t,0):mm|=n),Ot(t,e)}function u0(t,e){e===0&&(t.mode&1?(e=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):e=1);var n=xt();t=sr(t,e),t!==null&&(Wa(t,e,n),Ot(t,n))}function Yx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),u0(t,n)}function Xx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),u0(t,n)}var d0;d0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,Vx(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Ce&&e.flags&1048576&&pw(e,Cc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rc(t,e),t=e.pendingProps;var s=Wi(e,wt.current);Mi(e,n),s=lm(null,e,r,t,s,n);var i=cm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(i=!0,Nc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rm(e),s.updater=_u,e.stateNode=s,s._reactInternals=e,Dh(e,r,t,n),e=Oh(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&Yf(e),St(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Zx(r),t=hn(r,t),s){case 0:e=bh(null,e,r,t,n);break e;case 1:e=Jg(null,e,r,t,n);break e;case 11:e=Yg(null,e,r,t,n);break e;case 14:e=Xg(null,e,r,hn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),bh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Jg(t,e,r,s,n);case 3:e:{if(Kw(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Ew(t,e),Dc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ki(Error($(423)),e),e=Zg(t,e,r,n,s);break e}else if(r!==s){s=Ki(Error($(424)),e),e=Zg(t,e,r,n,s);break e}else for(Bt=qr(e.stateNode.containerInfo.firstChild),Wt=e,Ce=!0,mn=null,n=_w(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qi(),r===s){e=ir(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return Tw(e),t===null&&Ch(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ih(r,s)?o=null:i!==null&&Ih(r,i)&&(e.flags|=32),Gw(t,e),St(t,e,o,n),e.child;case 6:return t===null&&Ch(e),null;case 13:return Qw(t,e,n);case 4:return sm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hi(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Yg(t,e,r,s,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ee(Pc,r._currentValue),r._currentValue=o,i!==null)if(vn(i.value,o)){if(i.children===s.children&&!jt.current){e=ir(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Zn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ph(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ph(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}St(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Mi(e,n),s=rn(s),r=r(s),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,s=hn(r,e.pendingProps),s=hn(r.type,s),Xg(t,e,r,s,n);case 15:return qw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),rc(t,e),e.tag=1,bt(r)?(t=!0,Nc(e)):t=!1,Mi(e,n),Bw(e,r,s),Dh(e,r,s,n),Oh(null,e,r,!0,t,n);case 19:return Yw(t,e,n);case 22:return Hw(t,e,n)}throw Error($(156,e.tag))};function h0(t,e){return F_(t,e)}function Jx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new Jx(t,e,n,r)}function _m(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zx(t){if(typeof t=="function")return _m(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vf)return 11;if(t===Ff)return 14}return 2}function Qr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")_m(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case wi:return Ms(n.children,s,i,e);case Lf:o=8,s|=8;break;case nh:return t=en(12,n,e,s|2),t.elementType=nh,t.lanes=i,t;case rh:return t=en(13,n,e,s),t.elementType=rh,t.lanes=i,t;case sh:return t=en(19,n,e,s),t.elementType=sh,t.lanes=i,t;case T_:return Tu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w_:o=10;break e;case E_:o=9;break e;case Vf:o=11;break e;case Ff:o=14;break e;case Pr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=en(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ms(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function Tu(t,e,n,r){return t=en(22,t,r,e),t.elementType=T_,t.lanes=n,t.stateNode={isHidden:!1},t}function Ld(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function Vd(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function e1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vd(0),this.expirationTimes=vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wm(t,e,n,r,s,i,o,l,u){return t=new e1(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=en(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rm(i),t}function t1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_i,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function f0(t){if(!t)return ns;t=t._reactInternals;e:{if(Ys(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(bt(n))return fw(t,n,e)}return e}function m0(t,e,n,r,s,i,o,l,u){return t=wm(n,r,!0,t,s,i,o,l,u),t.context=f0(null),n=t.current,r=xt(),s=Kr(n),i=Zn(r,s),i.callback=e??null,Hr(n,i,s),t.current.lanes=s,Wa(t,s,r),Ot(t,r),t}function Su(t,e,n,r){var s=e.current,i=xt(),o=Kr(s);return n=f0(n),e.context===null?e.context=n:e.pendingContext=n,e=Zn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(s,e,o),t!==null&&(yn(t,s,o,i),ec(t,s,o)),o}function Uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Em(t,e){cy(t,e),(t=t.alternate)&&cy(t,e)}function n1(){return null}var p0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tm(t){this._internalRoot=t}Iu.prototype.render=Tm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Su(t,e,null,null)};Iu.prototype.unmount=Tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zs(function(){Su(null,t,null,null)}),e[rr]=null}};function Iu(t){this._internalRoot=t}Iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=H_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dr.length&&e!==0&&e<Dr[n].priority;n++);Dr.splice(n,0,t),n===0&&K_(t)}};function Sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uy(){}function r1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Uc(o);i.call(d)}}var o=m0(e,r,t,0,null,!1,!1,"",uy);return t._reactRootContainer=o,t[rr]=o.current,Ea(t.nodeType===8?t.parentNode:t),zs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Uc(u);l.call(d)}}var u=wm(t,0,!1,null,null,!1,!1,"",uy);return t._reactRootContainer=u,t[rr]=u.current,Ea(t.nodeType===8?t.parentNode:t),zs(function(){Su(e,u,n,r)}),u}function ku(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Uc(o);l.call(u)}}Su(e,o,t,s)}else o=r1(n,e,t,s,r);return Uc(o)}W_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wo(e.pendingLanes);n!==0&&(Bf(e,n|1),Ot(e,Ue()),!(me&6)&&(Qi=Ue()+500,hs()))}break;case 13:zs(function(){var r=sr(t,1);if(r!==null){var s=xt();yn(r,t,1,s)}}),Em(t,1)}};$f=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=xt();yn(e,t,134217728,n)}Em(t,134217728)}};q_=function(t){if(t.tag===13){var e=Kr(t),n=sr(t,e);if(n!==null){var r=xt();yn(n,t,e,r)}Em(t,e)}};H_=function(){return ve};G_=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};mh=function(t,e,n){switch(e){case"input":if(ah(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gu(r);if(!s)throw Error($(90));I_(r),ah(r,s)}}}break;case"textarea":k_(t,n);break;case"select":e=n.value,e!=null&&Di(t,!!n.multiple,e,!1)}};j_=gm;b_=zs;var s1={usingClientEntryPoint:!1,Events:[Ha,Ii,gu,R_,D_,gm]},Uo={findFiberByHostInstance:Ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i1={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=L_(t),t===null?null:t.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||n1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{hu=Fl.inject(i1),bn=Fl}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s1;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sm(e))throw Error($(200));return t1(t,e,null,n)};Ht.createRoot=function(t,e){if(!Sm(t))throw Error($(299));var n=!1,r="",s=p0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wm(t,1,!1,null,null,n,!1,r,s),t[rr]=e.current,Ea(t.nodeType===8?t.parentNode:t),new Tm(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=L_(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return zs(t)};Ht.hydrate=function(t,e,n){if(!xu(e))throw Error($(200));return ku(null,t,e,!0,n)};Ht.hydrateRoot=function(t,e,n){if(!Sm(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=p0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=m0(e,null,t,1,n??null,s,!1,i,o),t[rr]=e.current,Ea(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Iu(e)};Ht.render=function(t,e,n){if(!xu(e))throw Error($(200));return ku(null,t,e,!1,n)};Ht.unmountComponentAtNode=function(t){if(!xu(t))throw Error($(40));return t._reactRootContainer?(zs(function(){ku(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Ht.unstable_batchedUpdates=gm;Ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xu(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return ku(t,e,n,!1,r)};Ht.version="18.3.1-next-f1338f8080-20240426";function g0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g0)}catch(t){console.error(t)}}g0(),g_.exports=Ht;var o1=g_.exports,dy=o1;eh.createRoot=dy.createRoot,eh.hydrateRoot=dy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pa(){return Pa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pa.apply(this,arguments)}var Ur;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ur||(Ur={}));const hy="popstate";function a1(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Gh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zc(s)}return c1(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function y0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function l1(){return Math.random().toString(36).substr(2,8)}function fy(t,e){return{usr:t.state,key:t.key,idx:e}}function Gh(t,e,n,r){return n===void 0&&(n=null),Pa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ao(e):e,{state:n,key:e&&e.key||r||l1()})}function zc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function c1(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Ur.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Pa({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=Ur.Pop;let R=f(),I=R==null?null:R-d;d=R,u&&u({action:l,location:j.location,delta:I})}function g(R,I){l=Ur.Push;let T=Gh(j.location,R,I);d=f()+1;let x=fy(T,d),b=j.createHref(T);try{o.pushState(x,"",b)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(b)}i&&u&&u({action:l,location:j.location,delta:1})}function k(R,I){l=Ur.Replace;let T=Gh(j.location,R,I);d=f();let x=fy(T,d),b=j.createHref(T);o.replaceState(x,"",b),i&&u&&u({action:l,location:j.location,delta:0})}function N(R){let I=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof R=="string"?R:zc(R);return T=T.replace(/ $/,"%20"),je(I,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,I)}let j={get action(){return l},get location(){return t(s,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(hy,m),u=R,()=>{s.removeEventListener(hy,m),u=null}},createHref(R){return e(s,R)},createURL:N,encodeLocation(R){let I=N(R);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:g,replace:k,go(R){return o.go(R)}};return j}var my;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(my||(my={}));function u1(t,e,n){return n===void 0&&(n="/"),d1(t,e,n)}function d1(t,e,n,r){let s=typeof e=="string"?ao(e):e,i=Yi(s.pathname||"/",n);if(i==null)return null;let o=v0(t);h1(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=S1(i);l=E1(o[u],d)}return l}function v0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(je(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Yr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),v0(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:_1(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of _0(i.path))s(i,o,u)}),e}function _0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=_0(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function h1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:w1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const f1=/^:[\w-]+$/,m1=3,p1=2,g1=1,y1=10,v1=-2,py=t=>t==="*";function _1(t,e){let n=t.split("/"),r=n.length;return n.some(py)&&(r+=v1),e&&(r+=p1),n.filter(s=>!py(s)).reduce((s,i)=>s+(f1.test(i)?m1:i===""?g1:y1),r)}function w1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function E1(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Kh({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Yr([i,m.pathname]),pathnameBase:N1(Yr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Yr([i,m.pathnameBase]))}return o}function Kh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=T1(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:k}=f;if(g==="*"){let j=l[m]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const N=l[m];return k&&!N?d[g]=void 0:d[g]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function T1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),y0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function S1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return y0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Yi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function I1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ao(t):t;return{pathname:n?n.startsWith("/")?n:x1(n,e):e,search:A1(r),hash:C1(s)}}function x1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Fd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function k1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Im(t,e){let n=k1(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ao(t):(s=Pa({},t),je(!s.pathname||!s.pathname.includes("?"),Fd("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),Fd("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),Fd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=I1(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Yr=t=>t.join("/").replace(/\/\/+/g,"/"),N1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),A1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,C1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function P1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const w0=["post","put","patch","delete"];new Set(w0);const R1=["get",...w0];new Set(R1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ra.apply(this,arguments)}const Nu=P.createContext(null),E0=P.createContext(null),dr=P.createContext(null),Au=P.createContext(null),hr=P.createContext({outlet:null,matches:[],isDataRoute:!1}),T0=P.createContext(null);function D1(t,e){let{relative:n}=e===void 0?{}:e;lo()||je(!1);let{basename:r,navigator:s}=P.useContext(dr),{hash:i,pathname:o,search:l}=Pu(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Yr([r,o])),s.createHref({pathname:u,search:l,hash:i})}function lo(){return P.useContext(Au)!=null}function co(){return lo()||je(!1),P.useContext(Au).location}function S0(t){P.useContext(dr).static||P.useLayoutEffect(t)}function Cu(){let{isDataRoute:t}=P.useContext(hr);return t?G1():j1()}function j1(){lo()||je(!1);let t=P.useContext(Nu),{basename:e,future:n,navigator:r}=P.useContext(dr),{matches:s}=P.useContext(hr),{pathname:i}=co(),o=JSON.stringify(Im(s,n.v7_relativeSplatPath)),l=P.useRef(!1);return S0(()=>{l.current=!0}),P.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=xm(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Yr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,i,t])}const b1=P.createContext(null);function O1(t){let e=P.useContext(hr).outlet;return e&&P.createElement(b1.Provider,{value:t},e)}function Pu(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=P.useContext(dr),{matches:s}=P.useContext(hr),{pathname:i}=co(),o=JSON.stringify(Im(s,r.v7_relativeSplatPath));return P.useMemo(()=>xm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function M1(t,e){return L1(t,e)}function L1(t,e,n,r){lo()||je(!1);let{navigator:s}=P.useContext(dr),{matches:i}=P.useContext(hr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=co(),f;if(e){var m;let R=typeof e=="string"?ao(e):e;u==="/"||(m=R.pathname)!=null&&m.startsWith(u)||je(!1),f=R}else f=d;let g=f.pathname||"/",k=g;if(u!=="/"){let R=u.replace(/^\//,"").split("/");k="/"+g.replace(/^\//,"").split("/").slice(R.length).join("/")}let N=u1(t,{pathname:k}),j=B1(N&&N.map(R=>Object.assign({},R,{params:Object.assign({},l,R.params),pathname:Yr([u,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:Yr([u,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),i,n,r);return e&&j?P.createElement(Au.Provider,{value:{location:Ra({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ur.Pop}},j):j}function V1(){let t=H1(),e=P1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,null)}const F1=P.createElement(V1,null);class U1 extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(hr.Provider,{value:this.props.routeContext},P.createElement(T0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function z1(t){let{routeContext:e,match:n,children:r}=t,s=P.useContext(Nu);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(hr.Provider,{value:e},r)}function B1(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||je(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:k}=n,N=m.route.loader&&g[m.route.id]===void 0&&(!k||k[m.route.id]===void 0);if(m.route.lazy||N){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let k,N=!1,j=null,R=null;n&&(k=l&&m.route.id?l[m.route.id]:void 0,j=m.route.errorElement||F1,u&&(d<0&&g===0?(K1("route-fallback"),N=!0,R=null):d===g&&(N=!0,R=m.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,g+1)),T=()=>{let x;return k?x=j:N?x=R:m.route.Component?x=P.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=f,P.createElement(z1,{match:m,routeContext:{outlet:f,matches:I,isDataRoute:n!=null},children:x})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?P.createElement(U1,{location:n.location,revalidation:n.revalidation,component:j,error:k,children:T(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):T()},null)}var I0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(I0||{}),x0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(x0||{});function $1(t){let e=P.useContext(Nu);return e||je(!1),e}function W1(t){let e=P.useContext(E0);return e||je(!1),e}function q1(t){let e=P.useContext(hr);return e||je(!1),e}function k0(t){let e=q1(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function H1(){var t;let e=P.useContext(T0),n=W1(),r=k0();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function G1(){let{router:t}=$1(I0.UseNavigateStable),e=k0(x0.UseNavigateStable),n=P.useRef(!1);return S0(()=>{n.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ra({fromRouteId:e},i)))},[t,e])}const gy={};function K1(t,e,n){gy[t]||(gy[t]=!0)}function Q1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Bc(t){let{to:e,replace:n,state:r,relative:s}=t;lo()||je(!1);let{future:i,static:o}=P.useContext(dr),{matches:l}=P.useContext(hr),{pathname:u}=co(),d=Cu(),f=xm(e,Im(l,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return P.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Y1(t){return O1(t.context)}function Yt(t){je(!1)}function X1(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ur.Pop,navigator:i,static:o=!1,future:l}=t;lo()&&je(!1);let u=e.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:u,navigator:i,static:o,future:Ra({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=ao(r));let{pathname:f="/",search:m="",hash:g="",state:k=null,key:N="default"}=r,j=P.useMemo(()=>{let R=Yi(f,u);return R==null?null:{location:{pathname:R,search:m,hash:g,state:k,key:N},navigationType:s}},[u,f,m,g,k,N,s]);return j==null?null:P.createElement(dr.Provider,{value:d},P.createElement(Au.Provider,{children:n,value:j}))}function J1(t){let{children:e,location:n}=t;return M1(Qh(e),n)}new Promise(()=>{});function Qh(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,Qh(r.props.children,i));return}r.type!==Yt&&je(!1),!r.props.index||!r.props.children||je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $c(){return $c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$c.apply(this,arguments)}function N0(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Z1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ek(t,e){return t.button===0&&(!e||e==="_self")&&!Z1(t)}const tk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nk=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],rk="6";try{window.__reactRouterVersion=rk}catch{}const sk=P.createContext({isTransitioning:!1}),ik="startTransition",yy=QS[ik];function ok(t){let{basename:e,children:n,future:r,window:s}=t,i=P.useRef();i.current==null&&(i.current=a1({window:s,v5Compat:!0}));let o=i.current,[l,u]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=P.useCallback(m=>{d&&yy?yy(()=>u(m)):u(m)},[u,d]);return P.useLayoutEffect(()=>o.listen(f),[o,f]),P.useEffect(()=>Q1(r),[r]),P.createElement(X1,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const ak=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ck=P.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=N0(e,tk),{basename:k}=P.useContext(dr),N,j=!1;if(typeof d=="string"&&lk.test(d)&&(N=d,ak))try{let x=new URL(window.location.href),b=d.startsWith("//")?new URL(x.protocol+d):new URL(d),V=Yi(b.pathname,k);b.origin===x.origin&&V!=null?d=V+b.search+b.hash:j=!0}catch{}let R=D1(d,{relative:s}),I=dk(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:m});function T(x){r&&r(x),x.defaultPrevented||I(x)}return P.createElement("a",$c({},g,{href:N||R,onClick:j||i?r:T,ref:n,target:u}))}),mi=P.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:u,viewTransition:d,children:f}=e,m=N0(e,nk),g=Pu(u,{relative:m.relative}),k=co(),N=P.useContext(E0),{navigator:j,basename:R}=P.useContext(dr),I=N!=null&&hk(g)&&d===!0,T=j.encodeLocation?j.encodeLocation(g).pathname:g.pathname,x=k.pathname,b=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;s||(x=x.toLowerCase(),b=b?b.toLowerCase():null,T=T.toLowerCase()),b&&R&&(b=Yi(b,R)||b);const V=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let O=x===T||!o&&x.startsWith(T)&&x.charAt(V)==="/",v=b!=null&&(b===T||!o&&b.startsWith(T)&&b.charAt(T.length)==="/"),y={isActive:O,isPending:v,isTransitioning:I},_=O?r:void 0,E;typeof i=="function"?E=i(y):E=[i,O?"active":null,v?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let A=typeof l=="function"?l(y):l;return P.createElement(ck,$c({},m,{"aria-current":_,className:E,ref:n,style:A,to:u,viewTransition:d}),typeof f=="function"?f(y):f)});var Yh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Yh||(Yh={}));var vy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(vy||(vy={}));function uk(t){let e=P.useContext(Nu);return e||je(!1),e}function dk(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=Cu(),d=co(),f=Pu(t,{relative:o});return P.useCallback(m=>{if(ek(m,n)){m.preventDefault();let g=r!==void 0?r:zc(d)===zc(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,u,f,r,s,n,t,i,o,l])}function hk(t,e){e===void 0&&(e={});let n=P.useContext(sk);n==null&&je(!1);let{basename:r}=uk(Yh.useViewTransitionState),s=Pu(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Yi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Yi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Kh(s.pathname,o)!=null||Kh(s.pathname,i)!=null}const fk=()=>{};var _y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},C0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,k=d&63;u||(k=64,o||(g=64)),r.push(n[f],n[m],n[g],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(A0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new pk;const g=i<<2|l>>4;if(r.push(g),d!==64){const k=l<<4&240|d>>2;if(r.push(k),m!==64){const N=d<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gk=function(t){const e=A0(t);return C0.encodeByteArray(e,!0)},Wc=function(t){return gk(t).replace(/\./g,"")},P0=function(t){try{return C0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=()=>yk().__FIREBASE_DEFAULTS__,_k=()=>{if(typeof process>"u"||typeof _y>"u")return;const t=_y.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&P0(t[1]);return e&&JSON.parse(e)},Ru=()=>{try{return fk()||vk()||_k()||wk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},R0=t=>{var e,n;return(n=(e=Ru())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},D0=t=>{const e=R0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},j0=()=>{var t;return(t=Ru())===null||t===void 0?void 0:t.config},b0=t=>{var e;return(e=Ru())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){return t.endsWith(".cloudworkstations.dev")}async function km(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wc(JSON.stringify(n)),Wc(JSON.stringify(o)),""].join(".")}const aa={};function Sk(){const t={prod:[],emulator:[]};for(const e of Object.keys(aa))aa[e]?t.emulator.push(e):t.prod.push(e);return t}function Ik(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let wy=!1;function Nm(t,e){if(typeof window>"u"||typeof document>"u"||!Xs(window.location.host)||aa[t]===e||aa[t]||wy)return;aa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=Sk().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,k){g.setAttribute("width","24"),g.setAttribute("id",k),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{wy=!0,o()},g}function f(g,k){g.setAttribute("id",k),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=Ik(r),k=n("text"),N=document.getElementById(k)||document.createElement("span"),j=n("learnmore"),R=document.getElementById(j)||document.createElement("a"),I=n("preprendIcon"),T=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const x=g.element;l(x),f(R,j);const b=d();u(T,I),x.append(T,N,R,b),document.body.appendChild(x)}i?(N.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function kk(){var t;const e=(t=Ru())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ak(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ck(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Pk(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Rk(){return!kk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dk(){try{return typeof indexedDB=="object"}catch{return!1}}function jk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="FirebaseError";class fr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bk,Object.setPrototypeOf(this,fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ka.prototype.create)}}class Ka{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Ok(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new fr(s,l,r)}}function Ok(t,e){return t.replace(Mk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Mk=/\{\$([^}]+)}/g;function Lk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ey(i)&&Ey(o)){if(!Bs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ey(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ho(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Go(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Vk(t,e){const n=new Fk(t,e);return n.subscribe.bind(n)}class Fk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Uk(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ud),s.error===void 0&&(s.error=Ud),s.complete===void 0&&(s.complete=Ud);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Uk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ud(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class rs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ek;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($k(e))try{this.getOrInitializeService({instanceIdentifier:Ns})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ns){return this.instances.has(e)}getOptions(e=Ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ns){return this.component?this.component.multipleInstances?e:Ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bk(t){return t===Ns?void 0:t}function $k(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const qk={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},Hk=de.INFO,Gk={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},Kk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Gk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Am{constructor(e){this.name=e,this._logLevel=Hk,this._logHandler=Kk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const Qk=(t,e)=>e.some(n=>t instanceof n);let Ty,Sy;function Yk(){return Ty||(Ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xk(){return Sy||(Sy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O0=new WeakMap,Xh=new WeakMap,M0=new WeakMap,zd=new WeakMap,Cm=new WeakMap;function Jk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Xr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&O0.set(n,t)}).catch(()=>{}),Cm.set(e,t),e}function Zk(t){if(Xh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Xh.set(t,e)}let Jh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||M0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eN(t){Jh=t(Jh)}function tN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bd(this),e,...n);return M0.set(r,e.sort?e.sort():[e]),Xr(r)}:Xk().includes(t)?function(...e){return t.apply(Bd(this),e),Xr(O0.get(this))}:function(...e){return Xr(t.apply(Bd(this),e))}}function nN(t){return typeof t=="function"?tN(t):(t instanceof IDBTransaction&&Zk(t),Qk(t,Yk())?new Proxy(t,Jh):t)}function Xr(t){if(t instanceof IDBRequest)return Jk(t);if(zd.has(t))return zd.get(t);const e=nN(t);return e!==t&&(zd.set(t,e),Cm.set(e,t)),e}const Bd=t=>Cm.get(t);function rN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Xr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Xr(o.result),u.oldVersion,u.newVersion,Xr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const sN=["get","getKey","getAll","getAllKeys","count"],iN=["put","add","delete","clear"],$d=new Map;function Iy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($d.get(e))return $d.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=iN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||sN.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return $d.set(e,i),i}eN(t=>({...t,get:(e,n,r)=>Iy(e,n)||t.get(e,n,r),has:(e,n)=>!!Iy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function aN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zh="@firebase/app",xy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Am("@firebase/app"),lN="@firebase/app-compat",cN="@firebase/analytics-compat",uN="@firebase/analytics",dN="@firebase/app-check-compat",hN="@firebase/app-check",fN="@firebase/auth",mN="@firebase/auth-compat",pN="@firebase/database",gN="@firebase/data-connect",yN="@firebase/database-compat",vN="@firebase/functions",_N="@firebase/functions-compat",wN="@firebase/installations",EN="@firebase/installations-compat",TN="@firebase/messaging",SN="@firebase/messaging-compat",IN="@firebase/performance",xN="@firebase/performance-compat",kN="@firebase/remote-config",NN="@firebase/remote-config-compat",AN="@firebase/storage",CN="@firebase/storage-compat",PN="@firebase/firestore",RN="@firebase/ai",DN="@firebase/firestore-compat",jN="firebase",bN="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="[DEFAULT]",ON={[Zh]:"fire-core",[lN]:"fire-core-compat",[uN]:"fire-analytics",[cN]:"fire-analytics-compat",[hN]:"fire-app-check",[dN]:"fire-app-check-compat",[fN]:"fire-auth",[mN]:"fire-auth-compat",[pN]:"fire-rtdb",[gN]:"fire-data-connect",[yN]:"fire-rtdb-compat",[vN]:"fire-fn",[_N]:"fire-fn-compat",[wN]:"fire-iid",[EN]:"fire-iid-compat",[TN]:"fire-fcm",[SN]:"fire-fcm-compat",[IN]:"fire-perf",[xN]:"fire-perf-compat",[kN]:"fire-rc",[NN]:"fire-rc-compat",[AN]:"fire-gcs",[CN]:"fire-gcs-compat",[PN]:"fire-fst",[DN]:"fire-fst-compat",[RN]:"fire-vertex","fire-js":"fire-js",[jN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Map,MN=new Map,tf=new Map;function ky(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $s(t){const e=t.name;if(tf.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;tf.set(e,t);for(const n of qc.values())ky(n,t);for(const n of MN.values())ky(n,t);return!0}function Du(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ut(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jr=new Ka("app","Firebase",LN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=bN;function L0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ef,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Jr.create("bad-app-name",{appName:String(s)});if(n||(n=j0()),!n)throw Jr.create("no-options");const i=qc.get(s);if(i){if(Bs(n,i.options)&&Bs(r,i.config))return i;throw Jr.create("duplicate-app",{appName:s})}const o=new Wk(s);for(const u of tf.values())o.addComponent(u);const l=new VN(n,r,o);return qc.set(s,l),l}function Pm(t=ef){const e=qc.get(t);if(!e&&t===ef&&j0())return L0();if(!e)throw Jr.create("no-app",{appName:t});return e}function Mn(t,e,n){var r;let s=(r=ON[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(l.join(" "));return}$s(new rs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="firebase-heartbeat-database",UN=1,Da="firebase-heartbeat-store";let Wd=null;function V0(){return Wd||(Wd=rN(FN,UN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Da)}catch(n){console.warn(n)}}}}).catch(t=>{throw Jr.create("idb-open",{originalErrorMessage:t.message})})),Wd}async function zN(t){try{const n=(await V0()).transaction(Da),r=await n.objectStore(Da).get(F0(t));return await n.done,r}catch(e){if(e instanceof fr)or.warn(e.message);else{const n=Jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function Ny(t,e){try{const r=(await V0()).transaction(Da,"readwrite");await r.objectStore(Da).put(e,F0(t)),await r.done}catch(n){if(n instanceof fr)or.warn(n.message);else{const r=Jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function F0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=1024,$N=30;class WN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ay();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>$N){const o=GN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ay(),{heartbeatsToSend:r,unsentEntries:s}=qN(this._heartbeatsCache.heartbeats),i=Wc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return or.warn(n),""}}}function Ay(){return new Date().toISOString().substring(0,10)}function qN(t,e=BN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Cy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Cy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dk()?jk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ny(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ny(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Cy(t){return Wc(JSON.stringify({version:2,heartbeats:t})).length}function GN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){$s(new rs("platform-logger",e=>new oN(e),"PRIVATE")),$s(new rs("heartbeat",e=>new WN(e),"PRIVATE")),Mn(Zh,xy,t),Mn(Zh,xy,"esm2017"),Mn("fire-js","")}KN("");function Rm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function U0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QN=U0,z0=new Ka("auth","Firebase",U0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Am("@firebase/auth");function YN(t,...e){Hc.logLevel<=de.WARN&&Hc.warn(`Auth (${uo}): ${t}`,...e)}function ac(t,...e){Hc.logLevel<=de.ERROR&&Hc.error(`Auth (${uo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,...e){throw Dm(t,...e)}function Ln(t,...e){return Dm(t,...e)}function B0(t,e,n){const r=Object.assign(Object.assign({},QN()),{[e]:n});return new Ka("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return B0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return z0.create(t,...e)}function ee(t,e,...n){if(!t)throw Dm(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ac(e),new Error(e)}function ar(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XN(){return Py()==="http:"||Py()==="https:"}function Py(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XN()||Ak()||"connection"in navigator)?navigator.onLine:!0}function ZN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=xk()||Ck()}get(){return JN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nA=new Ya(3e4,6e4);function fs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ms(t,e,n,r,s={}){return W0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Qa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return Nk()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Xs(t.emulatorConfig.host)&&(d.credentials="include"),$0.fetch()(await q0(t,t.config.apiHost,n,l),d)})}async function W0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},eA),e);try{const s=new sA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ul(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ul(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ul(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ul(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw B0(t,f,d);_n(t,f)}}catch(s){if(s instanceof fr)throw s;_n(t,"network-request-failed",{message:String(s)})}}async function Xa(t,e,n,r,s={}){const i=await ms(t,e,n,r,s);return"mfaPendingCredential"in i&&_n(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function q0(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?jm(t.config,s):`${t.config.apiScheme}://${s}`;return tA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function rA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ln(this.auth,"network-request-failed")),nA.get())})}}function Ul(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ln(t,e,r);return s.customData._tokenResponse=n,s}function Ry(t){return t!==void 0&&t.enterprise!==void 0}class iA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oA(t,e){return ms(t,"GET","/v2/recaptchaConfig",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(t,e){return ms(t,"POST","/v1/accounts:delete",e)}async function Gc(t,e){return ms(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lA(t,e=!1){const n=qe(t),r=await n.getIdToken(e),s=bm(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:la(qd(s.auth_time)),issuedAtTime:la(qd(s.iat)),expirationTime:la(qd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function qd(t){return Number(t)*1e3}function bm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ac("JWT malformed, contained fewer than 3 sections"),null;try{const s=P0(n);return s?JSON.parse(s):(ac("Failed to decode base64 JWT payload"),null)}catch(s){return ac("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Dy(t){const e=bm(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof fr&&cA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=la(this.lastLoginAt),this.creationTime=la(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ja(t,Gc(n,{idToken:r}));ee(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?H0(i.providerUserInfo):[],l=hA(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new rf(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function dA(t){const e=qe(t);await Kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function H0(t){return t.map(e=>{var{providerId:n}=e,r=Rm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t,e){const n=await W0(t,{},async()=>{const r=Qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await q0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Xs(t.emulatorConfig.host)&&(u.credentials="include"),$0.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mA(t,e){return ms(t,"POST","/v2/accounts:revokeToken",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=Dy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Vi;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vi,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Rm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ja(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lA(this,e)}reload(){return dA(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Kc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ut(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await ja(this,aA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,k=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,j=(l=n.tenantId)!==null&&l!==void 0?l:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,I=(d=n.createdAt)!==null&&d!==void 0?d:void 0,T=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:x,emailVerified:b,isAnonymous:V,providerData:O,stsTokenManager:v}=n;ee(x&&v,e,"internal-error");const y=Vi.fromJSON(this.name,v);ee(typeof x=="string",e,"internal-error"),Ar(m,e.name),Ar(g,e.name),ee(typeof b=="boolean",e,"internal-error"),ee(typeof V=="boolean",e,"internal-error"),Ar(k,e.name),Ar(N,e.name),Ar(j,e.name),Ar(R,e.name),Ar(I,e.name),Ar(T,e.name);const _=new pn({uid:x,auth:e,email:g,emailVerified:b,displayName:m,isAnonymous:V,photoURL:N,phoneNumber:k,tenantId:j,stsTokenManager:y,createdAt:I,lastLoginAt:T});return O&&Array.isArray(O)&&(_.providerData=O.map(E=>Object.assign({},E))),R&&(_._redirectEventId=R),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new Vi;s.updateFromServerResponse(n);const i=new pn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Kc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?H0(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Vi;l.updateFromIdToken(r);const u=new pn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new rf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=new Map;function Xn(t){ar(t instanceof Function,"Expected a class definition");let e=jy.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}G0.type="NONE";const by=G0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t,e,n){return`firebase:${t}:${e}:${n}`}class Fi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=lc(this.userKey,s.apiKey,i),this.fullPersistenceKey=lc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gc(this.auth,{idToken:e}).catch(()=>{});return n?pn._fromGetAccountInfoResponse(this.auth,n,e):null}return pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fi(Xn(by),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Xn(by);const o=lc(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await Gc(e,{idToken:f}).catch(()=>{});if(!g)break;m=await pn._fromGetAccountInfoResponse(e,g,f)}else m=pn._fromJSON(e,f);d!==i&&(l=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Fi(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Fi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(X0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(K0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Z0(e))return"Blackberry";if(eE(e))return"Webos";if(Q0(e))return"Safari";if((e.includes("chrome/")||Y0(e))&&!e.includes("edge/"))return"Chrome";if(J0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function K0(t=Et()){return/firefox\//i.test(t)}function Q0(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y0(t=Et()){return/crios\//i.test(t)}function X0(t=Et()){return/iemobile/i.test(t)}function J0(t=Et()){return/android/i.test(t)}function Z0(t=Et()){return/blackberry/i.test(t)}function eE(t=Et()){return/webos/i.test(t)}function Om(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pA(t=Et()){var e;return Om(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gA(){return Pk()&&document.documentMode===10}function tE(t=Et()){return Om(t)||J0(t)||eE(t)||Z0(t)||/windows phone/i.test(t)||X0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t,e=[]){let n;switch(t){case"Browser":n=Oy(Et());break;case"Worker":n=`${Oy(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(t,e={}){return ms(t,"GET","/v2/passwordPolicy",fs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=6;class wA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_A,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new My(this),this.idTokenSubscription=new My(this),this.beforeStateQueue=new yA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Fi.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gc(this,{idToken:e}),r=await pn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ut(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ut(this.app))return Promise.reject(er(this));const n=e?qe(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ut(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ut(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vA(this),n=new wA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ka("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await mA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Fi.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&YN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Js(t){return qe(t)}class My{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vk(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TA(t){ju=t}function rE(t){return ju.loadJS(t)}function SA(){return ju.recaptchaEnterpriseScript}function IA(){return ju.gapiScript}function xA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class kA{constructor(){this.enterprise=new NA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class NA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const AA="recaptcha-enterprise",sE="NO_RECAPTCHA";class CA{constructor(e){this.type=AA,this.auth=Js(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{oA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new iA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;Ry(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(sE)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Ry(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=SA();u.length!==0&&(u+=l),rE(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Ly(t,e,n,r=!1,s=!1){const i=new CA(t);let o;if(s)o=sE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function sf(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ly(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ly(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t,e){const n=Du(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Bs(i,e??{}))return s;_n(s,"already-initialized")}return n.initialize({options:e})}function RA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DA(t,e,n){const r=Js(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=iE(e),{host:o,port:l}=jA(e),u=l===null?"":`:${l}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(Bs(d,r.config.emulator)&&Bs(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Xs(o)?(km(`${i}//${o}${u}`),Nm("Auth",!0)):bA()}function iE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jA(t){const e=iE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Vy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Vy(o)}}}function Vy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function OA(t,e){return ms(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(t,e){return Xa(t,"POST","/v1/accounts:signInWithPassword",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}async function VA(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends Mm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ba(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ba(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sf(e,n,"signInWithPassword",MA);case"emailLink":return LA(e,{email:this._email,oobCode:this._password});default:_n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sf(e,r,"signUpPassword",OA);case"emailLink":return VA(e,{idToken:n,email:this._email,oobCode:this._password});default:_n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ui(t,e){return Xa(t,"POST","/v1/accounts:signInWithIdp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="http://localhost";class Ws extends Mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Rm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ws(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ui(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ui(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ui(e,n)}buildRequest(){const e={requestUri:FA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zA(t){const e=Ho(Go(t)).link,n=e?Ho(Go(e)).deep_link_id:null,r=Ho(Go(t)).deep_link_id;return(r?Ho(Go(r)).link:null)||r||n||e||t}class Lm{constructor(e){var n,r,s,i,o,l;const u=Ho(Go(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=UA((s=u.mode)!==null&&s!==void 0?s:null);ee(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=zA(e);try{return new Lm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.providerId=ho.PROVIDER_ID}static credential(e,n){return ba._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Lm.parseLink(n);return ee(r,"argument-error"),ba._fromEmailAndCode(e,r.code,r.tenantId)}}ho.PROVIDER_ID="password";ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends oE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Ja{constructor(){super("facebook.com")}static credential(e){return Ws._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ws._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Or.credential(n,r)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Ja{constructor(){super("github.com")}static credential(e){return Ws._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.GITHUB_SIGN_IN_METHOD="github.com";Mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Ja{constructor(){super("twitter.com")}static credential(e,n){return Ws._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Lr.credential(n,r)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(t,e){return Xa(t,"POST","/v1/accounts:signUp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await pn._fromIdTokenResponse(e,r,s),o=Fy(r);return new qs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Fy(r);return new qs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Fy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends fr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Qc(e,n,r,s)}}function aE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qc._fromErrorAndOperation(t,i,e,r):i})}async function $A(t,e,n=!1){const r=await ja(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t,e,n=!1){const{auth:r}=t;if(Ut(r.app))return Promise.reject(er(r));const s="reauthenticate";try{const i=await ja(t,aE(r,s,e,t),n);ee(i.idToken,r,"internal-error");const o=bm(i.idToken);ee(o,r,"internal-error");const{sub:l}=o;return ee(t.uid===l,r,"user-mismatch"),qs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lE(t,e,n=!1){if(Ut(t.app))return Promise.reject(er(t));const r="signIn",s=await aE(t,r,e),i=await qs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function qA(t,e){return lE(Js(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cE(t){const e=Js(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function uE(t,e,n){if(Ut(t.app))return Promise.reject(er(t));const r=Js(t),o=await sf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&cE(t),u}),l=await qs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function dE(t,e,n){return Ut(t.app)?Promise.reject(er(t)):qA(qe(t),ho.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cE(t),r})}function HA(t,e,n,r){return qe(t).onIdTokenChanged(e,n,r)}function GA(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function KA(t,e,n,r){return qe(t).onAuthStateChanged(e,n,r)}function hE(t){return qe(t).signOut()}const Yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yc,"1"),this.storage.removeItem(Yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=1e3,YA=10;class mE extends fE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);gA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,YA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},QA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}mE.type="LOCAL";const XA=mE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE extends fE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pE.type="SESSION";const gE=pE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new bu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await JA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=Vm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return window}function eC(t){Vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function tC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rC(){return yE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="firebaseLocalStorageDb",sC=1,Xc="firebaseLocalStorage",_E="fbase_key";class Za{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ou(t,e){return t.transaction([Xc],e?"readwrite":"readonly").objectStore(Xc)}function iC(){const t=indexedDB.deleteDatabase(vE);return new Za(t).toPromise()}function of(){const t=indexedDB.open(vE,sC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xc,{keyPath:_E})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xc)?e(r):(r.close(),await iC(),e(await of()))})})}async function Uy(t,e,n){const r=Ou(t,!0).put({[_E]:e,value:n});return new Za(r).toPromise()}async function oC(t,e){const n=Ou(t,!1).get(e),r=await new Za(n).toPromise();return r===void 0?null:r.value}function zy(t,e){const n=Ou(t,!0).delete(e);return new Za(n).toPromise()}const aC=800,lC=3;class wE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await of(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>lC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bu._getInstance(rC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tC(),!this.activeServiceWorker)return;this.sender=new ZA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await of();return await Uy(e,Yc,"1"),await zy(e,Yc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Uy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>oC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ou(s,!1).getAll();return new Za(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wE.type="LOCAL";const cC=wE;new Ya(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e){return e?Xn(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm extends Mm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ui(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ui(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ui(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dC(t){return lE(t.auth,new Fm(t),t.bypassAuthState)}function hC(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),WA(n,new Fm(t),t.bypassAuthState)}async function fC(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),$A(n,new Fm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dC;case"linkViaPopup":case"linkViaRedirect":return fC;case"reauthViaPopup":case"reauthViaRedirect":return hC;default:_n(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Ya(2e3,1e4);class Ri extends EE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ri.currentPopupAction&&Ri.currentPopupAction.cancel(),Ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=Vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mC.get())};e()}}Ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="pendingRedirect",cc=new Map;class gC extends EE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cc.get(this.auth._key());if(!e){try{const r=await yC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cc.set(this.auth._key(),e)}return this.bypassAuthState||cc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yC(t,e){const n=wC(e),r=_C(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function vC(t,e){cc.set(t._key(),e)}function _C(t){return Xn(t._redirectPersistence)}function wC(t){return lc(pC,t.config.apiKey,t.name)}async function EC(t,e,n=!1){if(Ut(t.app))return Promise.reject(er(t));const r=Js(t),s=uC(r,e),o=await new gC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=10*60*1e3;class SC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!TE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ln(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TC&&this.cachedEventUids.clear(),this.cachedEventUids.has(By(e))}saveEventToCache(e){this.cachedEventUids.add(By(e)),this.lastProcessedEventTime=Date.now()}}function By(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(t,e={}){return ms(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NC=/^https?/;async function AC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xC(t);for(const n of e)try{if(CC(n))return}catch{}_n(t,"unauthorized-domain")}function CC(t){const e=nf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!NC.test(n))return!1;if(kC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new Ya(3e4,6e4);function $y(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RC(t){return new Promise((e,n)=>{var r,s,i;function o(){$y(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$y(),n(Ln(t,"network-request-failed"))},timeout:PC.get()})}if(!((s=(r=Vn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Vn().gapi)===null||i===void 0)&&i.load)o();else{const l=xA("iframefcb");return Vn()[l]=()=>{gapi.load?o():n(Ln(t,"network-request-failed"))},rE(`${IA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw uc=null,e})}let uc=null;function DC(t){return uc=uc||RC(t),uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new Ya(5e3,15e3),bC="__/auth/iframe",OC="emulator/auth/iframe",MC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VC(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jm(e,OC):`https://${t.config.authDomain}/${bC}`,r={apiKey:e.apiKey,appName:t.name,v:uo},s=LC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Qa(r).slice(1)}`}async function FC(t){const e=await DC(t),n=Vn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:VC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ln(t,"network-request-failed"),l=Vn().setTimeout(()=>{i(o)},jC.get());function u(){Vn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zC=500,BC=600,$C="_blank",WC="http://localhost";class Wy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qC(t,e,n,r=zC,s=BC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},UC),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Et().toLowerCase();n&&(l=Y0(d)?$C:n),K0(d)&&(e=e||WC,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[k,N])=>`${g}${k}=${N},`,"");if(pA(d)&&l!=="_self")return HC(e||"",l),new Wy(null);const m=window.open(e||"",l,f);ee(m,t,"popup-blocked");try{m.focus()}catch{}return new Wy(m)}function HC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="__/auth/handler",KC="emulator/auth/handler",QC=encodeURIComponent("fac");async function qy(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:uo,eventId:s};if(e instanceof oE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Lk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Ja){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${QC}=${encodeURIComponent(u)}`:"";return`${YC(t)}?${Qa(l).slice(1)}${d}`}function YC({config:t}){return t.emulator?jm(t,KC):`https://${t.authDomain}/${GC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="webStorageSupport";class XC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gE,this._completeRedirectFn=EC,this._overrideRedirectResult=vC}async _openPopup(e,n,r,s){var i;ar((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await qy(e,n,r,nf(),s);return qC(e,o,Vm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await qy(e,n,r,nf(),s);return eC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await FC(e),r=new SC(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hd,{type:Hd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Hd];o!==void 0&&n(!!o),_n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tE()||Q0()||Om()}}const JC=XC;var Hy="@firebase/auth",Gy="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tP(t){$s(new rs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nE(t)},d=new EA(r,s,i,u);return RA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),$s(new rs("auth-internal",e=>{const n=Js(e.getProvider("auth").getImmediate());return(r=>new ZC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(Hy,Gy,eP(t)),Mn(Hy,Gy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=5*60,rP=b0("authIdTokenMaxAge")||nP;let Ky=null;const sP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rP)return;const s=n==null?void 0:n.token;Ky!==s&&(Ky=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function SE(t=Pm()){const e=Du(t,"auth");if(e.isInitialized())return e.getImmediate();const n=PA(t,{popupRedirectResolver:JC,persistence:[cC,XA,gE]}),r=b0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=sP(i.toString());GA(n,o,()=>o(n.currentUser)),HA(n,l=>o(l))}}const s=R0("auth");return s&&DA(n,`http://${s}`),n}function iP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ln("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",iP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tP("Browser");var Qy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,IE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function _(){}_.prototype=y.prototype,v.D=y.prototype,v.prototype=new _,v.prototype.constructor=v,v.C=function(E,A,C){for(var S=Array(arguments.length-2),re=2;re<arguments.length;re++)S[re-2]=arguments[re];return y.prototype[A].apply(E,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)E[A]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(A=0;16>A;++A)E[A]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=v.g[0],_=v.g[1],A=v.g[2];var C=v.g[3],S=y+(C^_&(A^C))+E[0]+3614090360&4294967295;y=_+(S<<7&4294967295|S>>>25),S=C+(A^y&(_^A))+E[1]+3905402710&4294967295,C=y+(S<<12&4294967295|S>>>20),S=A+(_^C&(y^_))+E[2]+606105819&4294967295,A=C+(S<<17&4294967295|S>>>15),S=_+(y^A&(C^y))+E[3]+3250441966&4294967295,_=A+(S<<22&4294967295|S>>>10),S=y+(C^_&(A^C))+E[4]+4118548399&4294967295,y=_+(S<<7&4294967295|S>>>25),S=C+(A^y&(_^A))+E[5]+1200080426&4294967295,C=y+(S<<12&4294967295|S>>>20),S=A+(_^C&(y^_))+E[6]+2821735955&4294967295,A=C+(S<<17&4294967295|S>>>15),S=_+(y^A&(C^y))+E[7]+4249261313&4294967295,_=A+(S<<22&4294967295|S>>>10),S=y+(C^_&(A^C))+E[8]+1770035416&4294967295,y=_+(S<<7&4294967295|S>>>25),S=C+(A^y&(_^A))+E[9]+2336552879&4294967295,C=y+(S<<12&4294967295|S>>>20),S=A+(_^C&(y^_))+E[10]+4294925233&4294967295,A=C+(S<<17&4294967295|S>>>15),S=_+(y^A&(C^y))+E[11]+2304563134&4294967295,_=A+(S<<22&4294967295|S>>>10),S=y+(C^_&(A^C))+E[12]+1804603682&4294967295,y=_+(S<<7&4294967295|S>>>25),S=C+(A^y&(_^A))+E[13]+4254626195&4294967295,C=y+(S<<12&4294967295|S>>>20),S=A+(_^C&(y^_))+E[14]+2792965006&4294967295,A=C+(S<<17&4294967295|S>>>15),S=_+(y^A&(C^y))+E[15]+1236535329&4294967295,_=A+(S<<22&4294967295|S>>>10),S=y+(A^C&(_^A))+E[1]+4129170786&4294967295,y=_+(S<<5&4294967295|S>>>27),S=C+(_^A&(y^_))+E[6]+3225465664&4294967295,C=y+(S<<9&4294967295|S>>>23),S=A+(y^_&(C^y))+E[11]+643717713&4294967295,A=C+(S<<14&4294967295|S>>>18),S=_+(C^y&(A^C))+E[0]+3921069994&4294967295,_=A+(S<<20&4294967295|S>>>12),S=y+(A^C&(_^A))+E[5]+3593408605&4294967295,y=_+(S<<5&4294967295|S>>>27),S=C+(_^A&(y^_))+E[10]+38016083&4294967295,C=y+(S<<9&4294967295|S>>>23),S=A+(y^_&(C^y))+E[15]+3634488961&4294967295,A=C+(S<<14&4294967295|S>>>18),S=_+(C^y&(A^C))+E[4]+3889429448&4294967295,_=A+(S<<20&4294967295|S>>>12),S=y+(A^C&(_^A))+E[9]+568446438&4294967295,y=_+(S<<5&4294967295|S>>>27),S=C+(_^A&(y^_))+E[14]+3275163606&4294967295,C=y+(S<<9&4294967295|S>>>23),S=A+(y^_&(C^y))+E[3]+4107603335&4294967295,A=C+(S<<14&4294967295|S>>>18),S=_+(C^y&(A^C))+E[8]+1163531501&4294967295,_=A+(S<<20&4294967295|S>>>12),S=y+(A^C&(_^A))+E[13]+2850285829&4294967295,y=_+(S<<5&4294967295|S>>>27),S=C+(_^A&(y^_))+E[2]+4243563512&4294967295,C=y+(S<<9&4294967295|S>>>23),S=A+(y^_&(C^y))+E[7]+1735328473&4294967295,A=C+(S<<14&4294967295|S>>>18),S=_+(C^y&(A^C))+E[12]+2368359562&4294967295,_=A+(S<<20&4294967295|S>>>12),S=y+(_^A^C)+E[5]+4294588738&4294967295,y=_+(S<<4&4294967295|S>>>28),S=C+(y^_^A)+E[8]+2272392833&4294967295,C=y+(S<<11&4294967295|S>>>21),S=A+(C^y^_)+E[11]+1839030562&4294967295,A=C+(S<<16&4294967295|S>>>16),S=_+(A^C^y)+E[14]+4259657740&4294967295,_=A+(S<<23&4294967295|S>>>9),S=y+(_^A^C)+E[1]+2763975236&4294967295,y=_+(S<<4&4294967295|S>>>28),S=C+(y^_^A)+E[4]+1272893353&4294967295,C=y+(S<<11&4294967295|S>>>21),S=A+(C^y^_)+E[7]+4139469664&4294967295,A=C+(S<<16&4294967295|S>>>16),S=_+(A^C^y)+E[10]+3200236656&4294967295,_=A+(S<<23&4294967295|S>>>9),S=y+(_^A^C)+E[13]+681279174&4294967295,y=_+(S<<4&4294967295|S>>>28),S=C+(y^_^A)+E[0]+3936430074&4294967295,C=y+(S<<11&4294967295|S>>>21),S=A+(C^y^_)+E[3]+3572445317&4294967295,A=C+(S<<16&4294967295|S>>>16),S=_+(A^C^y)+E[6]+76029189&4294967295,_=A+(S<<23&4294967295|S>>>9),S=y+(_^A^C)+E[9]+3654602809&4294967295,y=_+(S<<4&4294967295|S>>>28),S=C+(y^_^A)+E[12]+3873151461&4294967295,C=y+(S<<11&4294967295|S>>>21),S=A+(C^y^_)+E[15]+530742520&4294967295,A=C+(S<<16&4294967295|S>>>16),S=_+(A^C^y)+E[2]+3299628645&4294967295,_=A+(S<<23&4294967295|S>>>9),S=y+(A^(_|~C))+E[0]+4096336452&4294967295,y=_+(S<<6&4294967295|S>>>26),S=C+(_^(y|~A))+E[7]+1126891415&4294967295,C=y+(S<<10&4294967295|S>>>22),S=A+(y^(C|~_))+E[14]+2878612391&4294967295,A=C+(S<<15&4294967295|S>>>17),S=_+(C^(A|~y))+E[5]+4237533241&4294967295,_=A+(S<<21&4294967295|S>>>11),S=y+(A^(_|~C))+E[12]+1700485571&4294967295,y=_+(S<<6&4294967295|S>>>26),S=C+(_^(y|~A))+E[3]+2399980690&4294967295,C=y+(S<<10&4294967295|S>>>22),S=A+(y^(C|~_))+E[10]+4293915773&4294967295,A=C+(S<<15&4294967295|S>>>17),S=_+(C^(A|~y))+E[1]+2240044497&4294967295,_=A+(S<<21&4294967295|S>>>11),S=y+(A^(_|~C))+E[8]+1873313359&4294967295,y=_+(S<<6&4294967295|S>>>26),S=C+(_^(y|~A))+E[15]+4264355552&4294967295,C=y+(S<<10&4294967295|S>>>22),S=A+(y^(C|~_))+E[6]+2734768916&4294967295,A=C+(S<<15&4294967295|S>>>17),S=_+(C^(A|~y))+E[13]+1309151649&4294967295,_=A+(S<<21&4294967295|S>>>11),S=y+(A^(_|~C))+E[4]+4149444226&4294967295,y=_+(S<<6&4294967295|S>>>26),S=C+(_^(y|~A))+E[11]+3174756917&4294967295,C=y+(S<<10&4294967295|S>>>22),S=A+(y^(C|~_))+E[2]+718787259&4294967295,A=C+(S<<15&4294967295|S>>>17),S=_+(C^(A|~y))+E[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(A+(S<<21&4294967295|S>>>11))&4294967295,v.g[2]=v.g[2]+A&4294967295,v.g[3]=v.g[3]+C&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var _=y-this.blockSize,E=this.B,A=this.h,C=0;C<y;){if(A==0)for(;C<=_;)s(this,v,C),C+=this.blockSize;if(typeof v=="string"){for(;C<y;)if(E[A++]=v.charCodeAt(C++),A==this.blockSize){s(this,E),A=0;break}}else for(;C<y;)if(E[A++]=v[C++],A==this.blockSize){s(this,E),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var _=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=_&255,_/=256;for(this.u(v),v=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)v[_++]=this.g[y]>>>E&255;return v};function i(v,y){var _=l;return Object.prototype.hasOwnProperty.call(_,v)?_[v]:_[v]=y(v)}function o(v,y){this.h=y;for(var _=[],E=!0,A=v.length-1;0<=A;A--){var C=v[A]|0;E&&C==y||(_[A]=C,E=!1)}this.g=_}var l={};function u(v){return-128<=v&&128>v?i(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return m;if(0>v)return R(d(-v));for(var y=[],_=1,E=0;v>=_;E++)y[E]=v/_|0,_*=4294967296;return new o(y,0)}function f(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return R(f(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(y,8)),E=m,A=0;A<v.length;A+=8){var C=Math.min(8,v.length-A),S=parseInt(v.substring(A,A+C),y);8>C?(C=d(Math.pow(y,C)),E=E.j(C).add(d(S))):(E=E.j(_),E=E.add(d(S)))}return E}var m=u(0),g=u(1),k=u(16777216);t=o.prototype,t.m=function(){if(j(this))return-R(this).m();for(var v=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);v+=(0<=E?E:4294967296+E)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(N(this))return"0";if(j(this))return"-"+R(this).toString(v);for(var y=d(Math.pow(v,6)),_=this,E="";;){var A=b(_,y).g;_=I(_,A.j(y));var C=((0<_.g.length?_.g[0]:_.h)>>>0).toString(v);if(_=A,N(_))return C+E;for(;6>C.length;)C="0"+C;E=C+E}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function N(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function j(v){return v.h==-1}t.l=function(v){return v=I(this,v),j(v)?-1:N(v)?0:1};function R(v){for(var y=v.g.length,_=[],E=0;E<y;E++)_[E]=~v.g[E];return new o(_,~v.h).add(g)}t.abs=function(){return j(this)?R(this):this},t.add=function(v){for(var y=Math.max(this.g.length,v.g.length),_=[],E=0,A=0;A<=y;A++){var C=E+(this.i(A)&65535)+(v.i(A)&65535),S=(C>>>16)+(this.i(A)>>>16)+(v.i(A)>>>16);E=S>>>16,C&=65535,S&=65535,_[A]=S<<16|C}return new o(_,_[_.length-1]&-2147483648?-1:0)};function I(v,y){return v.add(R(y))}t.j=function(v){if(N(this)||N(v))return m;if(j(this))return j(v)?R(this).j(R(v)):R(R(this).j(v));if(j(v))return R(this.j(R(v)));if(0>this.l(k)&&0>v.l(k))return d(this.m()*v.m());for(var y=this.g.length+v.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var A=0;A<v.g.length;A++){var C=this.i(E)>>>16,S=this.i(E)&65535,re=v.i(A)>>>16,He=v.i(A)&65535;_[2*E+2*A]+=S*He,T(_,2*E+2*A),_[2*E+2*A+1]+=C*He,T(_,2*E+2*A+1),_[2*E+2*A+1]+=S*re,T(_,2*E+2*A+1),_[2*E+2*A+2]+=C*re,T(_,2*E+2*A+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function T(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function x(v,y){this.g=v,this.h=y}function b(v,y){if(N(y))throw Error("division by zero");if(N(v))return new x(m,m);if(j(v))return y=b(R(v),y),new x(R(y.g),R(y.h));if(j(y))return y=b(v,R(y)),new x(R(y.g),y.h);if(30<v.g.length){if(j(v)||j(y))throw Error("slowDivide_ only works with positive integers.");for(var _=g,E=y;0>=E.l(v);)_=V(_),E=V(E);var A=O(_,1),C=O(E,1);for(E=O(E,2),_=O(_,2);!N(E);){var S=C.add(E);0>=S.l(v)&&(A=A.add(_),C=S),E=O(E,1),_=O(_,1)}return y=I(v,A.j(y)),new x(A,y)}for(A=m;0<=v.l(y);){for(_=Math.max(1,Math.floor(v.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),C=d(_),S=C.j(y);j(S)||0<S.l(v);)_-=E,C=d(_),S=C.j(y);N(C)&&(C=g),A=A.add(C),v=I(v,S)}return new x(A,v)}t.A=function(v){return b(this,v).h},t.and=function(v){for(var y=Math.max(this.g.length,v.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&v.i(E);return new o(_,this.h&v.h)},t.or=function(v){for(var y=Math.max(this.g.length,v.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|v.i(E);return new o(_,this.h|v.h)},t.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^v.i(E);return new o(_,this.h^v.h)};function V(v){for(var y=v.g.length+1,_=[],E=0;E<y;E++)_[E]=v.i(E)<<1|v.i(E-1)>>>31;return new o(_,v.h)}function O(v,y){var _=y>>5;y%=32;for(var E=v.g.length-_,A=[],C=0;C<E;C++)A[C]=0<y?v.i(C+_)>>>y|v.i(C+_+1)<<32-y:v.i(C+_);return new o(A,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Zr=o}).apply(typeof Qy<"u"?Qy:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xE,Ko,kE,dc,af,NE,AE,CE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var w=0;w<a.length-1;w++){var M=a[w];if(!(M in p))break e;p=p[M]}a=a[a.length-1],w=p[a],h=h(w),h!=w&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,w=!1,M={next:function(){if(!w&&p<a.length){var L=p++;return{value:h(L,a[L]),done:!1}}return w=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,w),a.apply(h,M)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function k(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var w=p.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function N(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(w,M,L){for(var H=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)H[_e-2]=arguments[_e];return h.prototype[M].apply(w,H)}}function j(a){const h=a.length;if(0<h){const p=Array(h);for(let w=0;w<h;w++)p[w]=a[w];return p}return[]}function R(a,h){for(let p=1;p<arguments.length;p++){const w=arguments[p];if(u(w)){const M=a.length||0,L=w.length||0;a.length=M+L;for(let H=0;H<L;H++)a[M+H]=w[H]}else a.push(w)}}class I{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function T(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var V=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function O(a,h,p){for(const w in a)h.call(p,a[w],w,a)}function v(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function y(a){const h={};for(const p in a)h[p]=a[p];return h}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,h){let p,w;for(let M=1;M<arguments.length;M++){w=arguments[M];for(p in w)a[p]=w[p];for(let L=0;L<_.length;L++)p=_[L],Object.prototype.hasOwnProperty.call(w,p)&&(a[p]=w[p])}}function A(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function C(a){l.setTimeout(()=>{throw a},0)}function S(){var a=Y;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class re{constructor(){this.h=this.g=null}add(h,p){const w=He.get();w.set(h,p),this.h?this.h.next=w:this.g=w,this.h=w}}var He=new I(()=>new Z,a=>a.reset());class Z{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,W=!1,Y=new re,ie=()=>{const a=l.Promise.resolve(void 0);Te=()=>{a.then(Se)}};var Se=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(p){C(p)}var h=He;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}W=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Mt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function an(a,h){if(Ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(V){e:{try{b(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ln[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&an.aa.h.call(this)}}N(an,Ie);var ln={2:"touch",3:"pen",4:"mouse"};an.prototype.h=function(){an.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Lt="closure_listenable_"+(1e6*Math.random()|0),mr=0;function ri(a,h,p,w,M){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!w,this.ha=M,this.key=++mr,this.da=this.fa=!1}function si(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ys(a){this.src=a,this.g={},this.h=0}ys.prototype.add=function(a,h,p,w,M){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var H=_o(a,h,w,M);return-1<H?(h=a[H],p||(h.fa=!1)):(h=new ri(h,this.src,L,!!w,M),h.fa=p,a.push(h)),h};function vo(a,h){var p=h.type;if(p in a.g){var w=a.g[p],M=Array.prototype.indexOf.call(w,h,void 0),L;(L=0<=M)&&Array.prototype.splice.call(w,M,1),L&&(si(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function _o(a,h,p,w){for(var M=0;M<a.length;++M){var L=a[M];if(!L.da&&L.listener==h&&L.capture==!!p&&L.ha==w)return M}return-1}var wo="closure_lm_"+(1e6*Math.random()|0),Eo={};function il(a,h,p,w,M){if(Array.isArray(h)){for(var L=0;L<h.length;L++)il(a,h[L],p,w,M);return null}return p=ll(p),a&&a[Lt]?a.K(h,p,d(w)?!!w.capture:!1,M):td(a,h,p,!1,w,M)}function td(a,h,p,w,M,L){if(!h)throw Error("Invalid event type");var H=d(M)?!!M.capture:!!M,_e=So(a);if(_e||(a[wo]=_e=new ys(a)),p=_e.add(h,p,w,H,L),p.proxy)return p;if(w=nd(),p.proxy=w,w.src=a,w.listener=p,a.addEventListener)Mt||(M=H),M===void 0&&(M=!1),a.addEventListener(h.toString(),w,M);else if(a.attachEvent)a.attachEvent(al(h.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return p}function nd(){function a(p){return h.call(a.src,a.listener,p)}const h=rd;return a}function ol(a,h,p,w,M){if(Array.isArray(h))for(var L=0;L<h.length;L++)ol(a,h[L],p,w,M);else w=d(w)?!!w.capture:!!w,p=ll(p),a&&a[Lt]?(a=a.i,h=String(h).toString(),h in a.g&&(L=a.g[h],p=_o(L,p,w,M),-1<p&&(si(L[p]),Array.prototype.splice.call(L,p,1),L.length==0&&(delete a.g[h],a.h--)))):a&&(a=So(a))&&(h=a.g[h.toString()],a=-1,h&&(a=_o(h,p,w,M)),(p=-1<a?h[a]:null)&&To(p))}function To(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Lt])vo(h.i,a);else{var p=a.type,w=a.proxy;h.removeEventListener?h.removeEventListener(p,w,a.capture):h.detachEvent?h.detachEvent(al(p),w):h.addListener&&h.removeListener&&h.removeListener(w),(p=So(h))?(vo(p,a),p.h==0&&(p.src=null,h[wo]=null)):si(a)}}}function al(a){return a in Eo?Eo[a]:Eo[a]="on"+a}function rd(a,h){if(a.da)a=!0;else{h=new an(h,this);var p=a.listener,w=a.ha||a.src;a.fa&&To(a),a=p.call(w,h)}return a}function So(a){return a=a[wo],a instanceof ys?a:null}var Io="__closure_events_fn_"+(1e9*Math.random()>>>0);function ll(a){return typeof a=="function"?a:(a[Io]||(a[Io]=function(h){return a.handleEvent(h)}),a[Io])}function Ge(){ge.call(this),this.i=new ys(this),this.M=this,this.F=null}N(Ge,ge),Ge.prototype[Lt]=!0,Ge.prototype.removeEventListener=function(a,h,p,w){ol(this,a,h,p,w)};function tt(a,h){var p,w=a.F;if(w)for(p=[];w;w=w.F)p.push(w);if(a=a.M,w=h.type||h,typeof h=="string")h=new Ie(h,a);else if(h instanceof Ie)h.target=h.target||a;else{var M=h;h=new Ie(w,a),E(h,M)}if(M=!0,p)for(var L=p.length-1;0<=L;L--){var H=h.g=p[L];M=Kt(H,w,!0,h)&&M}if(H=h.g=a,M=Kt(H,w,!0,h)&&M,M=Kt(H,w,!1,h)&&M,p)for(L=0;L<p.length;L++)H=h.g=p[L],M=Kt(H,w,!1,h)&&M}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],w=0;w<p.length;w++)si(p[w]);delete a.g[h],a.h--}}this.F=null},Ge.prototype.K=function(a,h,p,w){return this.i.add(String(a),h,!1,p,w)},Ge.prototype.L=function(a,h,p,w){return this.i.add(String(a),h,!0,p,w)};function Kt(a,h,p,w){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,L=0;L<h.length;++L){var H=h[L];if(H&&!H.da&&H.capture==p){var _e=H.listener,st=H.ha||H.src;H.fa&&vo(a.i,H),M=_e.call(st,w)!==!1&&M}}return M&&!w.defaultPrevented}function cl(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function ul(a){a.g=cl(()=>{a.g=null,a.i&&(a.i=!1,ul(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class sd extends ge{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ul(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(a){ge.call(this),this.h=a,this.g={}}N(pr,ge);var D=[];function F(a){O(a.g,function(h,p){this.g.hasOwnProperty(p)&&To(h)},a),a.g={}}pr.prototype.N=function(){pr.aa.N.call(this),F(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var q=l.JSON.stringify,X=l.JSON.parse,ne=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function se(){}se.prototype.h=null;function ue(a){return a.h||(a.h=a.i())}function nt(){}var Pe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vs(){Ie.call(this,"d")}N(vs,Ie);function ii(){Ie.call(this,"c")}N(ii,Ie);var Tn={},oi=null;function Sn(){return oi=oi||new Ge}Tn.La="serverreachability";function gr(a){Ie.call(this,Tn.La,a)}N(gr,Ie);function In(a){const h=Sn();tt(h,new gr(h))}Tn.STAT_EVENT="statevent";function yr(a,h){Ie.call(this,Tn.STAT_EVENT,a),this.stat=h}N(yr,Ie);function ze(a){const h=Sn();tt(h,new yr(h,a))}Tn.Ma="timingevent";function vr(a,h){Ie.call(this,Tn.Ma,a),this.size=h}N(vr,Ie);function xn(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function _r(){this.g=!0}_r.prototype.xa=function(){this.g=!1};function dl(a,h,p,w,M,L){a.info(function(){if(a.g)if(L)for(var H="",_e=L.split("&"),st=0;st<_e.length;st++){var pe=_e[st].split("=");if(1<pe.length){var dt=pe[0];pe=pe[1];var ht=dt.split("_");H=2<=ht.length&&ht[1]=="type"?H+(dt+"="+pe+"&"):H+(dt+"=redacted&")}}else H=null;else H=L;return"XMLHTTP REQ ("+w+") [attempt "+M+"]: "+h+`
`+p+`
`+H})}function _s(a,h,p,w,M,L,H){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+M+"]: "+h+`
`+p+`
`+L+" "+H})}function Qt(a,h,p,w){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+li(a,p)+(w?" "+w:"")})}function ai(a,h){a.info(function(){return"TIMEOUT: "+h})}_r.prototype.info=function(){};function li(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var w=p[a];if(!(2>w.length)){var M=w[1];if(Array.isArray(M)&&!(1>M.length)){var L=M[0];if(L!="noop"&&L!="stop"&&L!="close")for(var H=1;H<M.length;H++)M[H]=""}}}}return q(p)}catch{return h}}var Bn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Er;function ws(){}N(ws,se),ws.prototype.g=function(){return new XMLHttpRequest},ws.prototype.i=function(){return{}},Er=new ws;function cn(a,h,p,w){this.j=a,this.i=h,this.l=p,this.R=w||1,this.U=new pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tr}function Tr(){this.i=null,this.g="",this.h=!1}var Sr={},Ir={};function $n(a,h,p){a.L=1,a.v=ml(Wn(h)),a.m=p,a.P=!0,ci(a,null)}function ci(a,h){a.F=Date.now(),rt(a),a.A=Wn(a.v);var p=a.A,w=a.R;Array.isArray(w)||(w=[String(w)]),Op(p.i,"t",w),a.C=0,p=a.j.J,a.h=new Tr,a.g=Zp(a.j,p?h:null,!a.m),0<a.O&&(a.M=new sd(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,w=a.ca;var M="readystatechange";Array.isArray(M)||(M&&(D[0]=M.toString()),M=D);for(var L=0;L<M.length;L++){var H=il(p,M[L],w||h.handleEvent,!1,h.h||h);if(!H)break;h.g[H.key]=H}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),In(),dl(a.i,a.u,a.A,a.l,a.R,a.m)}cn.prototype.ca=function(a){a=a.target;const h=this.M;h&&qn(a)==3?h.j():this.Y(a)},cn.prototype.Y=function(a){try{if(a==this.g)e:{const ht=qn(this.g);var h=this.g.Ba();const hi=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||Bp(this.g)))){this.J||ht!=4||h==7||(h==8||0>=hi?In(3):In(2)),Es(this);var p=this.g.Z();this.X=p;t:if(Ve(this)){var w=Bp(this.g);a="";var M=w.length,L=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ts(this),xo(this);var H="";break t}this.h.i=new l.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,a+=this.h.i.decode(w[h],{stream:!(L&&h==M-1)});w.length=0,this.h.g+=a,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=p==200,_s(this.i,this.u,this.A,this.l,this.R,ht,p),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,st=this.g;if((_e=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(_e)){var pe=_e;break t}}pe=null}if(p=pe)Qt(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,id(this,p);else{this.o=!1,this.s=3,ze(12),Ts(this),xo(this);break e}}if(this.P){p=!0;let un;for(;!this.J&&this.C<H.length;)if(un=Tt(this,H),un==Ir){ht==4&&(this.s=4,ze(14),p=!1),Qt(this.i,this.l,null,"[Incomplete Response]");break}else if(un==Sr){this.s=4,ze(15),Qt(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else Qt(this.i,this.l,un,null),id(this,un);if(Ve(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||H.length!=0||this.h.h||(this.s=1,ze(16),p=!1),this.o=this.o&&p,!p)Qt(this.i,this.l,H,"[Invalid Chunked Response]"),Ts(this),xo(this);else if(0<H.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),dd(dt),dt.M=!0,ze(11))}}else Qt(this.i,this.l,H,null),id(this,H);ht==4&&Ts(this),this.o&&!this.J&&(ht==4?Qp(this.j,this):(this.o=!1,rt(this)))}else PS(this.g),p==400&&0<H.indexOf("Unknown SID")?(this.s=3,ze(12)):(this.s=0,ze(13)),Ts(this),xo(this)}}}catch{}finally{}};function Ve(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Tt(a,h){var p=a.C,w=h.indexOf(`
`,p);return w==-1?Ir:(p=Number(h.substring(p,w)),isNaN(p)?Sr:(w+=1,w+p>h.length?Ir:(h=h.slice(w,w+p),a.C=w+p,h)))}cn.prototype.cancel=function(){this.J=!0,Ts(this)};function rt(a){a.S=Date.now()+a.I,kn(a,a.I)}function kn(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=xn(g(a.ba,a),h)}function Es(a){a.B&&(l.clearTimeout(a.B),a.B=null)}cn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ai(this.i,this.A),this.L!=2&&(In(),ze(17)),Ts(this),this.s=2,xo(this)):kn(this,this.S-a)};function xo(a){a.j.G==0||a.J||Qp(a.j,a)}function Ts(a){Es(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,F(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function id(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||od(p.h,a))){if(!a.K&&od(p.h,a)&&p.G==3){try{var w=p.Da.g.parse(h)}catch{w=null}if(Array.isArray(w)&&w.length==3){var M=w;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)wl(p),vl(p);else break e;ud(p),ze(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=xn(g(p.Za,p),6e3));if(1>=kp(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Is(p,11)}else if((a.K||p.g==a)&&wl(p),!T(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let pe=M[h];if(p.T=pe[0],pe=pe[1],p.G==2)if(pe[0]=="c"){p.K=pe[1],p.ia=pe[2];const dt=pe[3];dt!=null&&(p.la=dt,p.j.info("VER="+p.la));const ht=pe[4];ht!=null&&(p.Aa=ht,p.j.info("SVER="+p.Aa));const hi=pe[5];hi!=null&&typeof hi=="number"&&0<hi&&(w=1.5*hi,p.L=w,p.j.info("backChannelRequestTimeoutMs_="+w)),w=p;const un=a.g;if(un){const Tl=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tl){var L=w.h;L.g||Tl.indexOf("spdy")==-1&&Tl.indexOf("quic")==-1&&Tl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ad(L,L.h),L.h=null))}if(w.D){const hd=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;hd&&(w.ya=hd,xe(w.I,w.D,hd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),w=p;var H=a;if(w.qa=Jp(w,w.J?w.ia:null,w.W),H.K){Np(w.h,H);var _e=H,st=w.L;st&&(_e.I=st),_e.B&&(Es(_e),rt(_e)),w.g=H}else Gp(w);0<p.i.length&&_l(p)}else pe[0]!="stop"&&pe[0]!="close"||Is(p,7);else p.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Is(p,7):cd(p):pe[0]!="noop"&&p.l&&p.l.ta(pe),p.v=0)}}In(4)}catch{}}var mS=class{constructor(a,h){this.g=a,this.map=h}};function Ip(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function kp(a){return a.h?1:a.g?a.g.size:0}function od(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ad(a,h){a.g?a.g.add(h):a.h=h}function Np(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Ip.prototype.cancel=function(){if(this.i=Ap(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ap(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return j(a.i)}function pS(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,w=0;w<p;w++)h.push(a[w]);return h}h=[],p=0;for(w in a)h[p++]=a[w];return h}function gS(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const w in a)h[p++]=w;return h}}}function Cp(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=gS(a),w=pS(a),M=w.length,L=0;L<M;L++)h.call(void 0,w[L],p&&p[L],a)}var Pp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yS(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var w=a[p].indexOf("="),M=null;if(0<=w){var L=a[p].substring(0,w);M=a[p].substring(w+1)}else L=a[p];h(L,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Ss(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ss){this.h=a.h,hl(this,a.j),this.o=a.o,this.g=a.g,fl(this,a.s),this.l=a.l;var h=a.i,p=new Ao;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Rp(this,p),this.m=a.m}else a&&(h=String(a).match(Pp))?(this.h=!1,hl(this,h[1]||"",!0),this.o=ko(h[2]||""),this.g=ko(h[3]||"",!0),fl(this,h[4]),this.l=ko(h[5]||"",!0),Rp(this,h[6]||"",!0),this.m=ko(h[7]||"")):(this.h=!1,this.i=new Ao(null,this.h))}Ss.prototype.toString=function(){var a=[],h=this.j;h&&a.push(No(h,Dp,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(No(h,Dp,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(No(p,p.charAt(0)=="/"?wS:_S,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",No(p,TS)),a.join("")};function Wn(a){return new Ss(a)}function hl(a,h,p){a.j=p?ko(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function fl(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Rp(a,h,p){h instanceof Ao?(a.i=h,SS(a.i,a.h)):(p||(h=No(h,ES)),a.i=new Ao(h,a.h))}function xe(a,h,p){a.i.set(h,p)}function ml(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ko(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function No(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,vS),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function vS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Dp=/[#\/\?@]/g,_S=/[#\?:]/g,wS=/[#\?]/g,ES=/[#\?@]/g,TS=/#/g;function Ao(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function xr(a){a.g||(a.g=new Map,a.h=0,a.i&&yS(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ao.prototype,t.add=function(a,h){xr(this),this.i=null,a=ui(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function jp(a,h){xr(a),h=ui(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function bp(a,h){return xr(a),h=ui(a,h),a.g.has(h)}t.forEach=function(a,h){xr(this),this.g.forEach(function(p,w){p.forEach(function(M){a.call(h,M,w,this)},this)},this)},t.na=function(){xr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let w=0;w<h.length;w++){const M=a[w];for(let L=0;L<M.length;L++)p.push(h[w])}return p},t.V=function(a){xr(this);let h=[];if(typeof a=="string")bp(this,a)&&(h=h.concat(this.g.get(ui(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return xr(this),this.i=null,a=ui(this,a),bp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Op(a,h,p){jp(a,h),0<p.length&&(a.i=null,a.g.set(ui(a,h),j(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var w=h[p];const L=encodeURIComponent(String(w)),H=this.V(w);for(w=0;w<H.length;w++){var M=L;H[w]!==""&&(M+="="+encodeURIComponent(String(H[w]))),a.push(M)}}return this.i=a.join("&")};function ui(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function SS(a,h){h&&!a.j&&(xr(a),a.i=null,a.g.forEach(function(p,w){var M=w.toLowerCase();w!=M&&(jp(this,w),Op(this,M,p))},a)),a.j=h}function IS(a,h){const p=new _r;if(l.Image){const w=new Image;w.onload=k(kr,p,"TestLoadImage: loaded",!0,h,w),w.onerror=k(kr,p,"TestLoadImage: error",!1,h,w),w.onabort=k(kr,p,"TestLoadImage: abort",!1,h,w),w.ontimeout=k(kr,p,"TestLoadImage: timeout",!1,h,w),l.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else h(!1)}function xS(a,h){const p=new _r,w=new AbortController,M=setTimeout(()=>{w.abort(),kr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:w.signal}).then(L=>{clearTimeout(M),L.ok?kr(p,"TestPingServer: ok",!0,h):kr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),kr(p,"TestPingServer: error",!1,h)})}function kr(a,h,p,w,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),w(p)}catch{}}function kS(){this.g=new ne}function NS(a,h,p){const w=p||"";try{Cp(a,function(M,L){let H=M;d(M)&&(H=q(M)),h.push(w+L+"="+encodeURIComponent(H))})}catch(M){throw h.push(w+"type="+encodeURIComponent("_badmap")),M}}function pl(a){this.l=a.Ub||null,this.j=a.eb||!1}N(pl,se),pl.prototype.g=function(){return new gl(this.l,this.j)},pl.prototype.i=function(a){return function(){return a}}({});function gl(a,h){Ge.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(gl,Ge),t=gl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Po(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Po(this)),this.g&&(this.readyState=3,Po(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Co(this):Po(this),this.readyState==3&&Mp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Co(this))},t.Qa=function(a){this.g&&(this.response=a,Co(this))},t.ga=function(){this.g&&Co(this)};function Co(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Po(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Po(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Lp(a){let h="";return O(a,function(p,w){h+=w,h+=":",h+=p,h+=`\r
`}),h}function ld(a,h,p){e:{for(w in p){var w=!1;break e}w=!0}w||(p=Lp(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):xe(a,h,p))}function Me(a){Ge.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Me,Ge);var AS=/^https?$/i,CS=["POST","PUT"];t=Me.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Er.g(),this.v=this.o?ue(this.o):ue(Er),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){Vp(this,L);return}if(a=p||"",p=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var M in w)p.set(M,w[M]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const L of w.keys())p.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),M=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(CS,h,void 0))||w||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,H]of p)this.g.setRequestHeader(L,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zp(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Vp(this,L)}};function Vp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Fp(a),yl(a)}function Fp(a){a.A||(a.A=!0,tt(a,"complete"),tt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,tt(this,"complete"),tt(this,"abort"),yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Up(this):this.bb())},t.bb=function(){Up(this)};function Up(a){if(a.h&&typeof o<"u"&&(!a.v[1]||qn(a)!=4||a.Z()!=2)){if(a.u&&qn(a)==4)cl(a.Ea,0,a);else if(tt(a,"readystatechange"),qn(a)==4){a.h=!1;try{const H=a.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var w;if(w=H===0){var M=String(a.D).match(Pp)[1]||null;!M&&l.self&&l.self.location&&(M=l.self.location.protocol.slice(0,-1)),w=!AS.test(M?M.toLowerCase():"")}p=w}if(p)tt(a,"complete"),tt(a,"success");else{a.m=6;try{var L=2<qn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Fp(a)}}finally{yl(a)}}}}function yl(a,h){if(a.g){zp(a);const p=a.g,w=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||tt(a,"ready");try{p.onreadystatechange=w}catch{}}}function zp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function qn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),X(h)}};function Bp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function PS(a){const h={};a=(a.g&&2<=qn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(T(a[w]))continue;var p=A(a[w]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=h[M]||[];h[M]=L,L.push(p)}v(h,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ro(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function $p(a){this.Aa=0,this.i=[],this.j=new _r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ro("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ro("baseRetryDelayMs",5e3,a),this.cb=Ro("retryDelaySeedMs",1e4,a),this.Wa=Ro("forwardChannelMaxRetries",2,a),this.wa=Ro("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ip(a&&a.concurrentRequestLimit),this.Da=new kS,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$p.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,w){ze(0),this.W=a,this.H=h||{},p&&w!==void 0&&(this.H.OSID=p,this.H.OAID=w),this.F=this.X,this.I=Jp(this,null,this.W),_l(this)};function cd(a){if(Wp(a),a.G==3){var h=a.U++,p=Wn(a.I);if(xe(p,"SID",a.K),xe(p,"RID",h),xe(p,"TYPE","terminate"),Do(a,p),h=new cn(a,a.j,h),h.L=2,h.v=ml(Wn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=Zp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),rt(h)}Xp(a)}function vl(a){a.g&&(dd(a),a.g.cancel(),a.g=null)}function Wp(a){vl(a),a.u&&(l.clearTimeout(a.u),a.u=null),wl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function _l(a){if(!xp(a.h)&&!a.s){a.s=!0;var h=a.Ga;Te||ie(),W||(Te(),W=!0),Y.add(h,a),a.B=0}}function RS(a,h){return kp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=xn(g(a.Ga,a,h),Yp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const M=new cn(this,this.j,a);let L=this.o;if(this.S&&(L?(L=y(L),E(L,this.S)):L=this.S),this.m!==null||this.O||(M.H=L,L=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var w=this.i[p];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(h+=w,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Hp(this,M,h),p=Wn(this.I),xe(p,"RID",a),xe(p,"CVER",22),this.D&&xe(p,"X-HTTP-Session-Id",this.D),Do(this,p),L&&(this.O?h="headers="+encodeURIComponent(String(Lp(L)))+"&"+h:this.m&&ld(p,this.m,L)),ad(this.h,M),this.Ua&&xe(p,"TYPE","init"),this.P?(xe(p,"$req",h),xe(p,"SID","null"),M.T=!0,$n(M,p,null)):$n(M,p,h),this.G=2}}else this.G==3&&(a?qp(this,a):this.i.length==0||xp(this.h)||qp(this))};function qp(a,h){var p;h?p=h.l:p=a.U++;const w=Wn(a.I);xe(w,"SID",a.K),xe(w,"RID",p),xe(w,"AID",a.T),Do(a,w),a.m&&a.o&&ld(w,a.m,a.o),p=new cn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Hp(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ad(a.h,p),$n(p,w,h)}function Do(a,h){a.H&&O(a.H,function(p,w){xe(h,w,p)}),a.l&&Cp({},function(p,w){xe(h,w,p)})}function Hp(a,h,p){p=Math.min(a.i.length,p);var w=a.l?g(a.l.Na,a.l,a):null;e:{var M=a.i;let L=-1;for(;;){const H=["count="+p];L==-1?0<p?(L=M[0].g,H.push("ofs="+L)):L=0:H.push("ofs="+L);let _e=!0;for(let st=0;st<p;st++){let pe=M[st].g;const dt=M[st].map;if(pe-=L,0>pe)L=Math.max(0,M[st].g-100),_e=!1;else try{NS(dt,H,"req"+pe+"_")}catch{w&&w(dt)}}if(_e){w=H.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,w}function Gp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Te||ie(),W||(Te(),W=!0),Y.add(h,a),a.v=0}}function ud(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=xn(g(a.Fa,a),Yp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Kp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=xn(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ze(10),vl(this),Kp(this))};function dd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Kp(a){a.g=new cn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Wn(a.qa);xe(h,"RID","rpc"),xe(h,"SID",a.K),xe(h,"AID",a.T),xe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(h,"TO",a.ja),xe(h,"TYPE","xmlhttp"),Do(a,h),a.m&&a.o&&ld(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=ml(Wn(h)),p.m=null,p.P=!0,ci(p,a)}t.Za=function(){this.C!=null&&(this.C=null,vl(this),ud(this),ze(19))};function wl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Qp(a,h){var p=null;if(a.g==h){wl(a),dd(a),a.g=null;var w=2}else if(od(a.h,h))p=h.D,Np(a.h,h),w=1;else return;if(a.G!=0){if(h.o)if(w==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=a.B;w=Sn(),tt(w,new vr(w,p)),_l(a)}else Gp(a);else if(M=h.s,M==3||M==0&&0<h.X||!(w==1&&RS(a,h)||w==2&&ud(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),M){case 1:Is(a,5);break;case 4:Is(a,10);break;case 3:Is(a,6);break;default:Is(a,2)}}}function Yp(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function Is(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),w=a.Xa;const M=!w;w=new Ss(w||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||hl(w,"https"),ml(w),M?IS(w.toString(),p):xS(w.toString(),p)}else ze(2);a.G=0,a.l&&a.l.sa(h),Xp(a),Wp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function Xp(a){if(a.G=0,a.ka=[],a.l){const h=Ap(a.h);(h.length!=0||a.i.length!=0)&&(R(a.ka,h),R(a.ka,a.i),a.h.i.length=0,j(a.i),a.i.length=0),a.l.ra()}}function Jp(a,h,p){var w=p instanceof Ss?Wn(p):new Ss(p);if(w.g!="")h&&(w.g=h+"."+w.g),fl(w,w.s);else{var M=l.location;w=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var L=new Ss(null);w&&hl(L,w),h&&(L.g=h),M&&fl(L,M),p&&(L.l=p),w=L}return p=a.D,h=a.ya,p&&h&&xe(w,p,h),xe(w,"VER",a.la),Do(a,w),w}function Zp(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Me(new pl({eb:p})):new Me(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function eg(){}t=eg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function El(){}El.prototype.g=function(a,h){return new Vt(a,h)};function Vt(a,h){Ge.call(this),this.g=new $p(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!T(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!T(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new di(this)}N(Vt,Ge),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){cd(this.g)},Vt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=q(a),a=p);h.i.push(new mS(h.Ya++,a)),h.G==3&&_l(h)},Vt.prototype.N=function(){this.g.l=null,delete this.j,cd(this.g),delete this.g,Vt.aa.N.call(this)};function tg(a){vs.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}N(tg,vs);function ng(){ii.call(this),this.status=1}N(ng,ii);function di(a){this.g=a}N(di,eg),di.prototype.ua=function(){tt(this.g,"a")},di.prototype.ta=function(a){tt(this.g,new tg(a))},di.prototype.sa=function(a){tt(this.g,new ng)},di.prototype.ra=function(){tt(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,CE=function(){return new El},AE=function(){return Sn()},NE=Tn,af={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bn.NO_ERROR=0,Bn.TIMEOUT=8,Bn.HTTP_ERROR=6,dc=Bn,wr.COMPLETE="complete",kE=wr,nt.EventType=Pe,Pe.OPEN="a",Pe.CLOSE="b",Pe.ERROR="c",Pe.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,Ko=nt,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,xE=Me}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const Yy="@firebase/firestore",Xy="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new Am("@firebase/firestore");function pi(){return Hs.logLevel}function G(t,...e){if(Hs.logLevel<=de.DEBUG){const n=e.map(Um);Hs.debug(`Firestore (${fo}): ${t}`,...n)}}function lr(t,...e){if(Hs.logLevel<=de.ERROR){const n=e.map(Um);Hs.error(`Firestore (${fo}): ${t}`,...n)}}function Xi(t,...e){if(Hs.logLevel<=de.WARN){const n=e.map(Um);Hs.warn(`Firestore (${fo}): ${t}`,...n)}}function Um(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,PE(t,r,n)}function PE(t,e,n){let r=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw lr(r),new Error(r)}function ye(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||PE(e,s,r)}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class aP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lP{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new RE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class cP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new cP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ut(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Jy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Jy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=hP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function lf(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return le(r,s);{const i=DE(),o=fP(i.encode(Zy(t,n)),i.encode(Zy(e,n)));return o!==0?o:le(r,s)}}n+=r>65535?2:1}return le(t.length,e.length)}function Zy(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function fP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return le(t[n],e[n]);return le(t.length,e.length)}function Ji(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=-62135596800,tv=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tv);return new Ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ev)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tv}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ev;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new Ye(0,0))}static max(){return new oe(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="__name__";class Cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Cn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return le(e.length,n.length)}static compareSegments(e,n){const r=Cn.isNumericId(e),s=Cn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Cn.extractNumericId(e).compare(Cn.extractNumericId(n)):lf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zr.fromString(e.substring(4,e.length-2))}}class Ne extends Cn{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const mP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Cn{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return mP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nv}static keyField(){return new at([nv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ne.fromString(e))}static fromName(e){return new J(Ne.fromString(e).popFirst(5))}static empty(){return new J(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=-1;function pP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new ss(s,J.empty(),e)}function gP(t){return new ss(t.readTime,t.key,Oa)}class ss{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ss(oe.min(),J.empty(),Oa)}static max(){return new ss(oe.max(),J.empty(),Oa)}}function yP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _P{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==vP)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function wP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function po(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Mu.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=-1;function Lu(t){return t==null}function Jc(t){return t===0&&1/t==-1/0}function EP(t){return typeof t=="number"&&Number.isInteger(t)&&!Jc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="";function TP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rv(e)),e=SP(t.get(n),e);return rv(e)}function SP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case bE:n+="";break;default:n+=i}}return n}function rv(t){return t+bE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ps(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ot.RED,this.left=s??ot.EMPTY,this.right=i??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ot(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ot.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iv(this.data.getIterator())}getIteratorFrom(e){return new iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new $t([])}unionWith(e){let n=new Xe(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ji(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ME("Invalid base64 string: "+i):i}}(e);return new ut(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const IP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(t){if(ye(!!t,39018),typeof t=="string"){let e=0;const n=IP.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function os(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="server_timestamp",VE="__type__",FE="__previous_value__",UE="__local_write_time__";function Bm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[VE])===null||n===void 0?void 0:n.stringValue)===LE}function Vu(t){const e=t.mapValue.fields[FE];return Bm(e)?Vu(e):e}function Ma(t){const e=is(t.mapValue.fields[UE].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,n,r,s,i,o,l,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Zc="(default)";class La{constructor(e,n){this.projectId=e,this.database=n||Zc}static empty(){return new La("","")}get isDefaultDatabase(){return this.database===Zc}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="__type__",kP="__max__",$l={mapValue:{}},BE="__vector__",eu="value";function as(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bm(t)?4:AP(t)?9007199254740991:NP(t)?10:11:te(28295,{value:t})}function zn(t,e){if(t===e)return!0;const n=as(t);if(n!==as(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ma(t).isEqual(Ma(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=is(s.timestampValue),l=is(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return os(s.bytesValue).isEqual(os(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),l=Fe(i.doubleValue);return o===l?Jc(o)===Jc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ji(t.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(sv(o)!==sv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!zn(o[u],l[u])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Va(t,e){return(t.values||[]).find(n=>zn(n,e))!==void 0}function Zi(t,e){if(t===e)return 0;const n=as(t),r=as(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Fe(i.integerValue||i.doubleValue),u=Fe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return ov(t.timestampValue,e.timestampValue);case 4:return ov(Ma(t),Ma(e));case 5:return lf(t.stringValue,e.stringValue);case 6:return function(i,o){const l=os(i),u=os(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=le(l[d],u[d]);if(f!==0)return f}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=le(Fe(i.latitude),Fe(o.latitude));return l!==0?l:le(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return av(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const m=i.fields||{},g=o.fields||{},k=(l=m[eu])===null||l===void 0?void 0:l.arrayValue,N=(u=g[eu])===null||u===void 0?void 0:u.arrayValue,j=le(((d=k==null?void 0:k.values)===null||d===void 0?void 0:d.length)||0,((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0);return j!==0?j:av(k,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$l.mapValue&&o===$l.mapValue)return 0;if(i===$l.mapValue)return 1;if(o===$l.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=lf(u[m],f[m]);if(g!==0)return g;const k=Zi(l[u[m]],d[f[m]]);if(k!==0)return k}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw te(23264,{Pe:n})}}function ov(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=is(t),r=is(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function av(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Zi(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function eo(t){return cf(t)}function cf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=is(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=cf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${cf(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function hc(t){switch(as(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vu(t);return e?16+hc(e):16;case 5:return 2*t.stringValue.length;case 6:return os(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+hc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ps(r.fields,(i,o)=>{s+=i.length+hc(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function lv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function uf(t){return!!t&&"integerValue"in t}function $m(t){return!!t&&"arrayValue"in t}function cv(t){return!!t&&"nullValue"in t}function uv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fc(t){return!!t&&"mapValue"in t}function NP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zE])===null||n===void 0?void 0:n.stringValue)===BE}function ca(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ps(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ca(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ca(t.arrayValue.values[n]);return e}return Object.assign({},t)}function AP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ca(n)}setAll(e){let n=at.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ca(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());fc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];fc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ps(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Rt(ca(this.value))}}function $E(t){const e=[];return ps(t.fields,(n,r)=>{const s=new at([n]);if(fc(r)){const i=$E(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new _t(e,0,oe.min(),oe.min(),oe.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,s){return new _t(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new _t(e,2,n,oe.min(),oe.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,oe.min(),oe.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n){this.position=e,this.inclusive=n}}function dv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Zi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function hv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n="asc"){this.field=e,this.dir=n}}function CP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{}class We extends WE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RP(e,n,r):n==="array-contains"?new bP(e,r):n==="in"?new OP(e,r):n==="not-in"?new MP(e,r):n==="array-contains-any"?new LP(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DP(e,r):new jP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zi(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(Zi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends WE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new wn(e,n)}matches(e){return qE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function qE(t){return t.op==="and"}function HE(t){return PP(t)&&qE(t)}function PP(t){for(const e of t.filters)if(e instanceof wn)return!1;return!0}function df(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+eo(t.value);if(HE(t))return t.filters.map(e=>df(e)).join(",");{const e=t.filters.map(n=>df(n)).join(",");return`${t.op}(${e})`}}function GE(t,e){return t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.field.isEqual(s.field)&&zn(r.value,s.value)}(t,e):t instanceof wn?function(r,s){return s instanceof wn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&GE(o,s.filters[l]),!0):!1}(t,e):void te(19439)}function KE(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`}(t):t instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(KE).join(" ,")+"}"}(t):"Filter"}class RP extends We{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class DP extends We{constructor(e,n){super(e,"in",n),this.keys=QE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jP extends We{constructor(e,n){super(e,"not-in",n),this.keys=QE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class bP extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $m(n)&&Va(n.arrayValue,this.value)}}class OP extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Va(this.value.arrayValue,n)}}class MP extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Va(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Va(this.value.arrayValue,n)}}class LP extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$m(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Va(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function fv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new VP(t,e,n,r,s,i,o)}function Wm(t){const e=ae(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>df(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Lu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>eo(r)).join(",")),e.Ie=n}return e.Ie}function qm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hv(t.startAt,e.startAt)&&hv(t.endAt,e.endAt)}function hf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function FP(t,e,n,r,s,i,o,l){return new go(t,e,n,r,s,i,o,l)}function Hm(t){return new go(t)}function mv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YE(t){return t.collectionGroup!==null}function ua(t){const e=ae(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Xe(at.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Fa(i,r))}),n.has(at.keyField().canonicalString())||e.Ee.push(new Fa(at.keyField(),r))}return e.Ee}function Fn(t){const e=ae(t);return e.de||(e.de=UP(e,ua(t))),e.de}function UP(t,e){if(t.limitType==="F")return fv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Fa(s.field,i)});const n=t.endAt?new tu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tu(t.startAt.position,t.startAt.inclusive):null;return fv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ff(t,e){const n=t.filters.concat([e]);return new go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function mf(t,e,n){return new go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fu(t,e){return qm(Fn(t),Fn(e))&&t.limitType===e.limitType}function XE(t){return`${Wm(Fn(t))}|lt:${t.limitType}`}function gi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>KE(s)).join(", ")}]`),Lu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>eo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>eo(s)).join(",")),`Target(${r})`}(Fn(t))}; limitType=${t.limitType})`}function Uu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ua(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=dv(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,ua(r),s)||r.endAt&&!function(o,l,u){const d=dv(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,ua(r),s))}(t,e)}function zP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JE(t){return(e,n)=>{let r=!1;for(const s of ua(t)){const i=BP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function BP(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Zi(u,d):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return OE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=new Oe(J.comparator);function cr(){return $P}const ZE=new Oe(J.comparator);function Qo(...t){let e=ZE;for(const n of t)e=e.insert(n.key,n);return e}function eT(t){let e=ZE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function js(){return da()}function tT(){return da()}function da(){return new Zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const WP=new Oe(J.comparator),qP=new Xe(J.comparator);function he(...t){let e=qP;for(const n of t)e=e.add(n);return e}const HP=new Xe(le);function GP(){return HP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function nT(t){return{integerValue:""+t}}function KP(t,e){return EP(e)?nT(e):Gm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this._=void 0}}function QP(t,e,n){return t instanceof nu?function(s,i){const o={fields:{[VE]:{stringValue:LE},[UE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Bm(i)&&(i=Vu(i)),i&&(o.fields[FE]=i),{mapValue:o}}(n,e):t instanceof Ua?sT(t,e):t instanceof za?iT(t,e):function(s,i){const o=rT(s,i),l=pv(o)+pv(s.Re);return uf(o)&&uf(s.Re)?nT(l):Gm(s.serializer,l)}(t,e)}function YP(t,e,n){return t instanceof Ua?sT(t,e):t instanceof za?iT(t,e):n}function rT(t,e){return t instanceof ru?function(r){return uf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class nu extends zu{}class Ua extends zu{constructor(e){super(),this.elements=e}}function sT(t,e){const n=oT(e);for(const r of t.elements)n.some(s=>zn(s,r))||n.push(r);return{arrayValue:{values:n}}}class za extends zu{constructor(e){super(),this.elements=e}}function iT(t,e){let n=oT(e);for(const r of t.elements)n=n.filter(s=>!zn(s,r));return{arrayValue:{values:n}}}class ru extends zu{constructor(e,n){super(),this.serializer=e,this.Re=n}}function pv(t){return Fe(t.integerValue||t.doubleValue)}function oT(t){return $m(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function XP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ua&&s instanceof Ua||r instanceof za&&s instanceof za?Ji(r.elements,s.elements,zn):r instanceof ru&&s instanceof ru?zn(r.Re,s.Re):r instanceof nu&&s instanceof nu}(t.transform,e.transform)}class JP{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bu{}function aT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Km(t.key,nn.none()):new el(t.key,t.data,nn.none());{const n=t.data,r=Rt.empty();let s=new Xe(at.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new gs(t.key,r,new $t(s.toArray()),nn.none())}}function ZP(t,e,n){t instanceof el?function(s,i,o){const l=s.value.clone(),u=yv(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof gs?function(s,i,o){if(!mc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=yv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(lT(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ha(t,e,n,r){return t instanceof el?function(i,o,l,u){if(!mc(i.precondition,o))return l;const d=i.value.clone(),f=vv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof gs?function(i,o,l,u){if(!mc(i.precondition,o))return l;const d=vv(i.fieldTransforms,u,o),f=o.data;return f.setAll(lT(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return mc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function eR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=rT(r.transform,s||null);i!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,i))}return n||null}function gv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ji(r,s,(i,o)=>XP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class el extends Bu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class gs extends Bu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function lT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function yv(t,e,n){const r=new Map;ye(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,YP(o,l,n[s]))}return r}function vv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,QP(i,o,e))}return r}class Km extends Bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tR extends Bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ZP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ha(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ha(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=aT(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Ji(this.mutations,e.mutations,(n,r)=>gv(n,r))&&Ji(this.baseMutations,e.baseMutations,(n,r)=>gv(n,r))}}class Qm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return WP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Qm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,fe;function iR(t){switch(t){case U.OK:return te(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function cT(t){if(t===void 0)return lr("GRPC error has no .code"),U.UNKNOWN;switch(t){case Be.OK:return U.OK;case Be.CANCELLED:return U.CANCELLED;case Be.UNKNOWN:return U.UNKNOWN;case Be.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Be.INTERNAL:return U.INTERNAL;case Be.UNAVAILABLE:return U.UNAVAILABLE;case Be.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Be.NOT_FOUND:return U.NOT_FOUND;case Be.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Be.ABORTED:return U.ABORTED;case Be.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Be.DATA_LOSS:return U.DATA_LOSS;default:return te(39323,{code:t})}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new Zr([4294967295,4294967295],0);function _v(t){const e=DE().encode(t),n=new IE;return n.update(e),new Uint8Array(n.digest())}function wv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Zr([n,r],0),new Zr([s,i],0)]}class Ym{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yo(`Invalid padding: ${n}`);if(r<0)throw new Yo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Zr.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Zr.fromNumber(r)));return s.compare(oR)===1&&(s=new Zr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=_v(e),[r,s]=wv(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ym(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const n=_v(e),[r,s]=wv(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,tl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $u(oe.min(),s,new Oe(le),cr(),he())}}class tl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tl(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class uT{constructor(e,n){this.targetId=e,this.Ce=n}}class dT{constructor(e,n,r=ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ev{constructor(){this.Fe=0,this.Me=Tv(),this.xe=ut.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=he(),n=he(),r=he();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new tl(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=Tv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ye(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class aR{constructor(e){this.ze=e,this.je=new Map,this.He=cr(),this.Je=Wl(),this.Ye=Wl(),this.Ze=new Oe(le)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(hf(i))if(r===0){const o=new J(i.path);this.tt(n,o,_t.newNoDocument(o,oe.min()))}else ye(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=os(r).toUint8Array()}catch(u){if(u instanceof ME)return Xi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Ym(o,s,i)}catch(u){return Xi(u instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&hf(l.target)){const u=new J(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,_t.newNoDocument(u,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=he();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new $u(e,n,this.Ze,this.He,r);return this.He=cr(),this.Je=Wl(),this.Ye=Wl(),this.Ze=new Oe(le),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Ev,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Xe(le),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Xe(le),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ev),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Wl(){return new Oe(J.comparator)}function Tv(){return new Oe(J.comparator)}const lR={asc:"ASCENDING",desc:"DESCENDING"},cR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uR={and:"AND",or:"OR"};class dR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pf(t,e){return t.useProto3Json||Lu(e)?e:{value:e}}function su(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hR(t,e){return su(t,e.toTimestamp())}function Un(t){return ye(!!t,49232),oe.fromTimestamp(function(n){const r=is(n);return new Ye(r.seconds,r.nanos)}(t))}function Xm(t,e){return gf(t,e).canonicalString()}function gf(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fT(t){const e=Ne.fromString(t);return ye(vT(e),10190,{key:e.toString()}),e}function yf(t,e){return Xm(t.databaseId,e.path)}function Gd(t,e){const n=fT(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(pT(n))}function mT(t,e){return Xm(t.databaseId,e)}function fR(t){const e=fT(t);return e.length===4?Ne.emptyPath():pT(e)}function vf(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pT(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Sv(t,e,n){return{name:yf(t,e),fields:n.value.mapValue.fields}}function mR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ye(f===void 0||typeof f=="string",58123),ut.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ut.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?U.UNKNOWN:cT(d.code);return new K(f,d.message||"")}(o);n=new dT(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gd(t,r.document.name),i=Un(r.document.updateTime),o=r.document.createTime?Un(r.document.createTime):oe.min(),l=new Rt({mapValue:{fields:r.document.fields}}),u=_t.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new pc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gd(t,r.document),i=r.readTime?Un(r.readTime):oe.min(),o=_t.newNoDocument(s,i),l=r.removedTargetIds||[];n=new pc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gd(t,r.document),i=r.removedTargetIds||[];n=new pc([],i,s,null)}else{if(!("filter"in e))return te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new sR(s,i),l=r.targetId;n=new uT(l,o)}}return n}function pR(t,e){let n;if(e instanceof el)n={update:Sv(t,e.key,e.value)};else if(e instanceof Km)n={delete:yf(t,e.key)};else if(e instanceof gs)n={update:Sv(t,e.key,e.data),updateMask:IR(e.fieldMask)};else{if(!(e instanceof tR))return te(16599,{ft:e.type});n={verify:yf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof nu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof za)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ru)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:hR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function gR(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Un(s.updateTime):Un(i);return o.isEqual(oe.min())&&(o=Un(i)),new JP(o,s.transformResults||[])}(n,e))):[]}function yR(t,e){return{documents:[mT(t,e.path)]}}function vR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mT(t,s);const i=function(d){if(d.length!==0)return yT(wn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:yi(g.field),direction:ER(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=pf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:s}}function _R(t){let e=fR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=gT(m);return g instanceof wn&&HE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(N){return new Fa(vi(N.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Lu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,k=m.values||[];return new tu(k,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,k=m.values||[];return new tu(k,g)}(n.endAt)),FP(e,s,o,i,l,"F",u,d)}function wR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vi(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=vi(n.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=vi(n.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vi(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return We.create(vi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(r=>gT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function ER(t){return lR[t]}function TR(t){return cR[t]}function SR(t){return uR[t]}function yi(t){return{fieldPath:t.canonicalString()}}function vi(t){return at.fromServerFormat(t.fieldPath)}function yT(t){return t instanceof We?function(n){if(n.op==="=="){if(uv(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NAN"}};if(cv(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uv(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NOT_NAN"}};if(cv(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yi(n.field),op:TR(n.op),value:n.value}}}(t):t instanceof wn?function(n){const r=n.getFilters().map(s=>yT(s));return r.length===1?r[0]:{compositeFilter:{op:SR(n.op),filters:r}}}(t):te(54877,{filter:t})}function IR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r,s,i=oe.min(),o=oe.min(),l=ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.wt=e}}function kR(t){const e=_R({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.Cn=new AR}addToCollectionParentIndex(e,n){return this.Cn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(ss.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class AR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xe(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_T=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(_T,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new to(0)}static lr(){return new to(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="LruGarbageCollector",CR=1048576;function kv([t,e],[n,r]){const s=le(t,n);return s===0?le(e,r):s}class PR{constructor(e){this.Er=e,this.buffer=new Xe(kv),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();kv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){G(xv,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){po(n)?G(xv,"Ignoring IndexedDB error during garbage collection: ",n):await mo(n)}await this.mr(3e5)})}}class DR{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(Mu.le);const r=new PR(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(Iv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Iv):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,l,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),pi()<=de.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function jR(t,e){return new DR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.changes=new Zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ha(r.mutation,s,$t.empty(),Ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=js();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Qo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=cr();const o=da(),l=function(){return da()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof gs)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ha(f.mutation,d,f.mutation.getFieldMask(),Ye.now())):o.set(d.key,$t.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return l.set(d,new OR(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=da();let s=new Oe((o,l)=>o-l),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||$t.empty();f=l.applyToLocalView(d,f),r.set(u,f);const m=(s.get(l.batchId)||he()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,m=tT();f.forEach(g=>{if(!i.has(g)){const k=aT(n.get(g),r.get(g));k!==null&&m.set(g,k),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(js());let l=Oa,u=i;return o.next(d=>z.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?z.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,he())).next(f=>({batchId:l,changes:eT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Qo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Qo();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,u=>{const d=function(m,g){return new go(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,_t.newInvalidDocument(f)))});let l=Qo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&ha(f.mutation,d,$t.empty(),Ye.now()),Uu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return z.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Un(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:kR(s.bundledQuery),readTime:Un(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.overlays=new Oe(J.comparator),this.Qr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=js();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=js(),i=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=js(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=js(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return z.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rR(n,r));let i=this.Qr.get(n);i===void 0&&(i=he(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.$r=new Xe(Je.Ur),this.Kr=new Xe(Je.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Je(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Je(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new J(new Ne([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new J(new Ne([])),r=new Je(n,e),s=new Je(n,e+1);let i=he();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return J.comparator(e.key,n.key)||le(e.Zr,n.Zr)}static Wr(e,n){return le(e.Zr,n.Zr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Xe(Je.Ur)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nR(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Xr=this.Xr.add(new Je(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?zm:this.nr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const l=this.ei(o.Zr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(le);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{r=r.add(l.Zr)})}),z.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Je(new J(i),0);let l=new Xe(le);return this.Xr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Zr)),!0)},o),z.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return z.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Je(n,0),s=this.Xr.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.ii=e,this.docs=function(){return new Oe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():_t.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=cr();const o=n.path,l=new J(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||yP(gP(f),r)<=0||(s.has(f.key)||Uu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}si(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new BR(this)}getSize(e){return z.resolve(this.size)}}class BR extends bR{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.persistence=e,this.oi=new Zs(n=>Wm(n),qm),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this._i=0,this.ai=new Jm,this.targetCount=0,this.ui=to.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),z.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new to(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Tr(n),z.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.ci={},this.overlays={},this.li=new Mu(0),this.hi=!1,this.hi=!0,this.Pi=new FR,this.referenceDelegate=e(this),this.Ti=new $R(this),this.indexManager=new NR,this.remoteDocumentCache=function(s){return new zR(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new xR(n),this.Ei=new LR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new UR(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new WR(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return z.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class WR extends _P{constructor(e){super(),this.currentSequenceNumber=e}}class Zm{constructor(e){this.persistence=e,this.Vi=new Jm,this.mi=null}static fi(e){return new Zm(e)}get gi(){if(this.mi)return this.mi;throw te(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.gi,r=>{const s=J.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return z.or([()=>z.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class iu{constructor(e,n){this.persistence=e,this.yi=new Zs(r=>TP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=jR(this,n)}static fi(e,n){return new iu(e,n)}di(){}Ai(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return z.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?z.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,oe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),z.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hc(e.data.value)),n}Dr(e,n,r){return z.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ep(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Rk()?8:wP(Et())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new qR;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,n,o,l.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(pi()<=de.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",gi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),z.resolve()):(pi()<=de.DEBUG&&G("QueryEngine","Query:",gi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(pi()<=de.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",gi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):z.resolve())}ws(e,n){if(mv(n))return z.resolve(null);let r=Fn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=mf(n,null,"F"),r=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=he(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.vs(n,l);return this.Cs(n,d,o,u.readTime)?this.ws(e,mf(n,null,"F")):this.Fs(e,d,n,u)}))})))}bs(e,n,r,s){return mv(n)||s.isEqual(oe.min())?z.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?z.resolve(null):(pi()<=de.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gi(n)),this.Fs(e,o,n,pP(s,Oa)).next(l=>l))})}vs(e,n){let r=new Xe(JE(e));return n.forEach((s,i)=>{Uu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return pi()<=de.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",gi(n)),this.ys.getDocumentsMatchingQuery(e,n,ss.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="LocalStore",GR=3e8;class KR{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Oe(le),this.Os=new Zs(i=>Wm(i),qm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MR(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function QR(t,e,n,r){return new KR(t,e,n,r)}async function ET(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=he();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:l}))})})}function YR(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const m=d.batch,g=m.keys();let k=z.resolve();return g.forEach(N=>{k=k.next(()=>f.getEntry(u,N)).next(j=>{const R=d.docVersions.get(N);ye(R!==null,48541),j.version.compareTo(R)<0&&(m.applyToRemoteDocument(j,d),j.isValidDocument()&&(j.setReadTime(d.commitVersion),f.addEntry(j)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=he();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function TT(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function XR(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ti.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,f.addedDocuments,m)));let k=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?k=k.withResumeToken(ut.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):f.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(f.resumeToken,r)),s=s.insert(m,k),function(j,R,I){return j.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=GR?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(g,k,f)&&l.push(n.Ti.updateTargetData(i,k))});let u=cr(),d=he();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(JR(i,o,e.documentUpdates).next(f=>{u=f.qs,d=f.Qs})),!r.isEqual(oe.min())){const f=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return z.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.xs=s,i))}function JR(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=cr();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(oe.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):G(tp,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{qs:o,Qs:s}})}function ZR(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eD(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new zr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function _f(t,e,n){const r=ae(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!po(o))throw o;G(tp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function Nv(t,e,n){const r=ae(t);let s=oe.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=ae(u),g=m.Os.get(f);return g!==void 0?z.resolve(m.xs.get(g)):m.Ti.getTargetData(d,f)}(r,o,Fn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:he())).next(l=>(tD(r,zP(e),l),{documents:l,$s:i})))}function tD(t,e,n){let r=t.Ns.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class Av{constructor(){this.activeTargetIds=GP()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nD{constructor(){this.xo=new Av,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Av,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="ConnectivityMonitor";class Pv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){G(Cv,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){G(Cv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function wf(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="RestConnection",sD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iD{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Zc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=wf(),l=this.jo(e,n.toUriEncodedString());G(Kd,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,s,i);const{host:d}=new URL(l),f=Xs(d);return this.Jo(e,l,u,r,f).then(m=>(G(Kd,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Xi(Kd,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=sD[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class aD extends iD{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=wf();return new Promise((l,u)=>{const d=new xE;d.setWithCredentials(!0),d.listenOnce(kE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case dc.NO_ERROR:const m=d.getResponseJson();G(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case dc.TIMEOUT:G(pt,`RPC '${e}' ${o} timed out`),u(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case dc.HTTP_ERROR:const g=d.getStatus();if(G(pt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let k=d.getResponseJson();Array.isArray(k)&&(k=k[0]);const N=k==null?void 0:k.error;if(N&&N.status&&N.message){const j=function(I){const T=I.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(T)>=0?T:U.UNKNOWN}(N.status);u(new K(j,N.message))}else u(new K(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new K(U.UNAVAILABLE,"Connection failed."));break;default:te(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{G(pt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);G(pt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}I_(e,n,r){const s=wf(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=CE(),l=AE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");G(pt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.E_(m);let g=!1,k=!1;const N=new oD({Zo:R=>{k?G(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(G(pt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),G(pt,`RPC '${e}' stream ${s} sending:`,R),m.send(R))},Xo:()=>m.close()}),j=(R,I,T)=>{R.listen(I,x=>{try{T(x)}catch(b){setTimeout(()=>{throw b},0)}})};return j(m,Ko.EventType.OPEN,()=>{k||(G(pt,`RPC '${e}' stream ${s} transport opened.`),N.__())}),j(m,Ko.EventType.CLOSE,()=>{k||(k=!0,G(pt,`RPC '${e}' stream ${s} transport closed`),N.u_(),this.d_(m))}),j(m,Ko.EventType.ERROR,R=>{k||(k=!0,Xi(pt,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),N.u_(new K(U.UNAVAILABLE,"The operation could not be completed")))}),j(m,Ko.EventType.MESSAGE,R=>{var I;if(!k){const T=R.data[0];ye(!!T,16349);const x=T,b=(x==null?void 0:x.error)||((I=x[0])===null||I===void 0?void 0:I.error);if(b){G(pt,`RPC '${e}' stream ${s} received error:`,b);const V=b.status;let O=function(_){const E=Be[_];if(E!==void 0)return cT(E)}(V),v=b.message;O===void 0&&(O=U.INTERNAL,v="Unknown error status: "+V+" with message "+b.message),k=!0,N.u_(new K(O,v)),m.close()}else G(pt,`RPC '${e}' stream ${s} received:`,T),N.c_(T)}}),j(l,NE.STAT_EVENT,R=>{R.stat===af.PROXY?G(pt,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===af.NOPROXY&&G(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.a_()},0),N}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t){return new dR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="PersistentStream";class IT{constructor(e,n,r,s,i,o,l,u){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new ST(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new K(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return G(Rv,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(G(Rv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lD extends IT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=mR(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?Un(o.readTime):oe.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=vf(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=hf(u)?{documents:yR(i,u)}:{query:vR(i,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=hT(i,o.resumeToken);const d=pf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(oe.min())>0){l.readTime=su(i,o.snapshotVersion.toTimestamp());const d=pf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=wR(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=vf(this.serializer),n.removeTarget=e,this.Q_(n)}}class cD extends IT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=gR(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=vf(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pR(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{}class dD extends uD{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,gf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(U.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,gf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(U.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class hD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(lr(n),this.ua=!1):G("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class fD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{r.enqueueAndForget(async()=>{ei(this)&&(G(Gs,"Restarting streams for network reachability change."),await async function(u){const d=ae(u);d.da.add(4),await nl(d),d.Va.set("Unknown"),d.da.delete(4),await qu(d)}(this))})}),this.Va=new hD(r,s)}}async function qu(t){if(ei(t))for(const e of t.Aa)await e(!0)}async function nl(t){for(const e of t.Aa)await e(!1)}function xT(t,e){const n=ae(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),ip(n)?sp(n):yo(n).N_()&&rp(n,e))}function np(t,e){const n=ae(t),r=yo(n);n.Ea.delete(e),r.N_()&&kT(n,e),n.Ea.size===0&&(r.N_()?r.k_():ei(n)&&n.Va.set("Unknown"))}function rp(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(t).Z_(e)}function kT(t,e){t.ma.Ke(e),yo(t).X_(e)}function sp(t){t.ma=new aR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),yo(t).start(),t.Va.ca()}function ip(t){return ei(t)&&!yo(t).O_()&&t.Ea.size>0}function ei(t){return ae(t).da.size===0}function NT(t){t.ma=void 0}async function mD(t){t.Va.set("Online")}async function pD(t){t.Ea.forEach((e,n)=>{rp(t,e)})}async function gD(t,e){NT(t),ip(t)?(t.Va.Pa(e),sp(t)):t.Va.set("Unknown")}async function yD(t,e,n){if(t.Va.set("Online"),e instanceof dT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ea.delete(l),s.ma.removeTarget(l))}(t,e)}catch(r){G(Gs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ou(t,r)}else if(e instanceof pc?t.ma.Xe(e):e instanceof uT?t.ma.ot(e):t.ma.nt(e),!n.isEqual(oe.min()))try{const r=await TT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.ma.It(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ea.get(d);f&&i.Ea.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.Ea.get(u);if(!f)return;i.Ea.set(u,f.withResumeToken(ut.EMPTY_BYTE_STRING,f.snapshotVersion)),kT(i,u);const m=new zr(f.target,u,d,f.sequenceNumber);rp(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G(Gs,"Failed to raise snapshot:",r),await ou(t,r)}}async function ou(t,e,n){if(!po(e))throw e;t.da.add(1),await nl(t),t.Va.set("Offline"),n||(n=()=>TT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(Gs,"Retrying IndexedDB access"),await n(),t.da.delete(1),await qu(t)})}function AT(t,e){return e().catch(n=>ou(t,n,e))}async function Hu(t){const e=ae(t),n=ls(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:zm;for(;vD(e);)try{const s=await ZR(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,_D(e,s)}catch(s){await ou(e,s)}CT(e)&&PT(e)}function vD(t){return ei(t)&&t.Ia.length<10}function _D(t,e){t.Ia.push(e);const n=ls(t);n.N_()&&n.ea&&n.ta(e.mutations)}function CT(t){return ei(t)&&!ls(t).O_()&&t.Ia.length>0}function PT(t){ls(t).start()}async function wD(t){ls(t).ia()}async function ED(t){const e=ls(t);for(const n of t.Ia)e.ta(n.mutations)}async function TD(t,e,n){const r=t.Ia.shift(),s=Qm.from(r,e,n);await AT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Hu(t)}async function SD(t,e){e&&ls(t).ea&&await async function(r,s){if(function(o){return iR(o)&&o!==U.ABORTED}(s.code)){const i=r.Ia.shift();ls(r).L_(),await AT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Hu(r)}}(t,e),CT(t)&&PT(t)}async function Dv(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),G(Gs,"RemoteStore received new credentials");const r=ei(n);n.da.add(3),await nl(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await qu(n)}async function ID(t,e){const n=ae(t);e?(n.da.delete(2),await qu(n)):e||(n.da.add(2),await nl(n),n.Va.set("Unknown"))}function yo(t){return t.fa||(t.fa=function(n,r,s){const i=ae(n);return i.oa(),new lD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:mD.bind(null,t),n_:pD.bind(null,t),i_:gD.bind(null,t),Y_:yD.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),ip(t)?sp(t):t.Va.set("Unknown")):(await t.fa.stop(),NT(t))})),t.fa}function ls(t){return t.ga||(t.ga=function(n,r,s){const i=ae(n);return i.oa(),new cD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:wD.bind(null,t),i_:SD.bind(null,t),na:ED.bind(null,t),ra:TD.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Hu(t)):(await t.ga.stop(),t.Ia.length>0&&(G(Gs,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new op(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ap(t,e){if(lr("AsyncQueue",`${e}: ${t}`),po(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{static emptySet(e){return new zi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Qo(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.pa=new Oe(J.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):te(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class no{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new no(e,n,zi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class kD{constructor(){this.queries=bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=bv(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function bv(){return new Zs(t=>XE(t),Fu)}async function RT(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new xD,r=e.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=ap(o,`Initialization of query '${gi(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&lp(n)}async function DT(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ND(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Ma(s)&&(r=!0);o.ba=s}}r&&lp(n)}function AD(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function lp(t){t.Ca.forEach(e=>{e.next()})}var Ef,Ov;(Ov=Ef||(Ef={})).xa="default",Ov.Cache="cache";class jT{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new no(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=no.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Ef.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.key=e}}class OT{constructor(e){this.key=e}}class CD{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=he(),this.mutatedKeys=he(),this.Za=JE(e),this.Xa=new zi(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new jv,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),k=Uu(this.query,m)?m:null,N=!!g&&this.mutatedKeys.has(g.key),j=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let R=!1;g&&k?g.data.isEqual(k.data)?N!==j&&(r.track({type:3,doc:k}),R=!0):this.ru(g,k)||(r.track({type:2,doc:k}),R=!0,(u&&this.Za(k,u)>0||d&&this.Za(k,d)<0)&&(l=!0)):!g&&k?(r.track({type:0,doc:k}),R=!0):g&&!k&&(r.track({type:1,doc:g}),R=!0,(u||d)&&(l=!0)),R&&(k?(o=o.add(k),i=j?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Xa:o,nu:r,Cs:l,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((f,m)=>function(k,N){const j=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Vt:R})}};return j(k)-j(N)}(f.type,m.type)||this.Za(f.doc,m.doc)),this.iu(r),s=s!=null&&s;const l=n&&!s?this.su():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Ja;return this.Ja=u,o.length!==0||d?{snapshot:new no(this.query,e.Xa,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new jv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=he(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new OT(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new bT(r))}),n}au(e){this.Ha=e.$s,this.Ya=he();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return no.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const cp="SyncEngine";class PD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class RD{constructor(e){this.key=e,this.cu=!1}}class DD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Zs(l=>XE(l),Fu),this.Pu=new Map,this.Tu=new Set,this.Iu=new Oe(J.comparator),this.Eu=new Map,this.du=new Jm,this.Au={},this.Ru=new Map,this.Vu=to.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function jD(t,e,n=!0){const r=zT(t);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await MT(r,e,n,!0),s}async function bD(t,e){const n=zT(t);await MT(n,e,!0,!1)}async function MT(t,e,n,r){const s=await eD(t.localStore,Fn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await OD(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&xT(t.remoteStore,s),l}async function OD(t,e,n,r,s){t.fu=(m,g,k)=>async function(j,R,I,T){let x=R.view.tu(I);x.Cs&&(x=await Nv(j.localStore,R.query,!1).then(({documents:v})=>R.view.tu(v,x)));const b=T&&T.targetChanges.get(R.targetId),V=T&&T.targetMismatches.get(R.targetId)!=null,O=R.view.applyChanges(x,j.isPrimaryClient,b,V);return Lv(j,R.targetId,O.ou),O.snapshot}(t,m,g,k);const i=await Nv(t.localStore,e,!0),o=new CD(e,i.$s),l=o.tu(i.documents),u=tl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Lv(t,n,d.ou);const f=new PD(e,n,o);return t.hu.set(e,f),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function MD(t,e,n){const r=ae(t),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(o=>!Fu(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await _f(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&np(r.remoteStore,s.targetId),Tf(r,s.targetId)}).catch(mo)):(Tf(r,s.targetId),await _f(r.localStore,s.targetId,!0))}async function LD(t,e){const n=ae(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),np(n.remoteStore,r.targetId))}async function VD(t,e,n){const r=qD(t);try{const s=await function(o,l){const u=ae(o),d=Ye.now(),f=l.reduce((k,N)=>k.add(N.key),he());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",k=>{let N=cr(),j=he();return u.Bs.getEntries(k,f).next(R=>{N=R,N.forEach((I,T)=>{T.isValidDocument()||(j=j.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(k,N)).next(R=>{m=R;const I=[];for(const T of l){const x=eR(T,m.get(T.key).overlayedDocument);x!=null&&I.push(new gs(T.key,x,$E(x.value.mapValue),nn.exists(!0)))}return u.mutationQueue.addMutationBatch(k,d,I,l)}).next(R=>{g=R;const I=R.applyToLocalDocumentSet(m,j);return u.documentOverlayCache.saveOverlays(k,R.batchId,I)})}).then(()=>({batchId:g.batchId,changes:eT(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Au[o.currentUser.toKey()];d||(d=new Oe(le)),d=d.insert(l,u),o.Au[o.currentUser.toKey()]=d}(r,s.batchId,n),await rl(r,s.changes),await Hu(r.remoteStore)}catch(s){const i=ap(s,"Failed to persist write");n.reject(i)}}async function LT(t,e){const n=ae(t);try{const r=await XR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?ye(o.cu,14607):s.removedDocuments.size>0&&(ye(o.cu,42227),o.cu=!1))}),await rl(n,r,e)}catch(r){await mo(r)}}function Mv(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,o)=>{const l=o.view.Fa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ae(o);u.onlineState=l;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.Fa(l)&&(d=!0)}),d&&lp(u)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FD(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Oe(J.comparator);o=o.insert(i,_t.newNoDocument(i,oe.min()));const l=he().add(i),u=new $u(oe.min(),new Map,new Oe(le),o,l);await LT(r,u),r.Iu=r.Iu.remove(i),r.Eu.delete(e),up(r)}else await _f(r.localStore,e,!1).then(()=>Tf(r,e,n)).catch(mo)}async function UD(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await YR(n.localStore,e);FT(n,r,null),VT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rl(n,s)}catch(s){await mo(s)}}async function zD(t,e,n){const r=ae(t);try{const s=await function(o,l){const u=ae(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(ye(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);FT(r,e,n),VT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rl(r,s)}catch(s){await mo(s)}}function VT(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function FT(t,e,n){const r=ae(t);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function Tf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||UT(t,r)})}function UT(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(np(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),up(t))}function Lv(t,e,n){for(const r of n)r instanceof bT?(t.du.addReference(r.key,e),BD(t,r)):r instanceof OT?(G(cp,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||UT(t,r.key)):te(19791,{pu:r})}function BD(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(G(cp,"New document in limbo: "+n),t.Tu.add(r),up(t))}function up(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new J(Ne.fromString(e)),r=t.Vu.next();t.Eu.set(r,new RD(n)),t.Iu=t.Iu.insert(n,r),xT(t.remoteStore,new zr(Fn(Hm(n.path)),r,"TargetPurposeLimboResolution",Mu.le))}}async function rl(t,e,n){const r=ae(t),s=[],i=[],o=[];r.hu.isEmpty()||(r.hu.forEach((l,u)=>{o.push(r.fu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=ep.Rs(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.lu.Y_(s),await async function(u,d){const f=ae(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(d,g=>z.forEach(g.ds,k=>f.persistence.referenceDelegate.addReference(m,g.targetId,k)).next(()=>z.forEach(g.As,k=>f.persistence.referenceDelegate.removeReference(m,g.targetId,k)))))}catch(m){if(!po(m))throw m;G(tp,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const k=f.xs.get(g),N=k.snapshotVersion,j=k.withLastLimboFreeSnapshotVersion(N);f.xs=f.xs.insert(g,j)}}}(r.localStore,i))}async function $D(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){G(cp,"User change. New user:",e.toKey());const r=await ET(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(l=>{l.forEach(u=>{u.reject(new K(U.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rl(n,r.ks)}}function WD(t,e){const n=ae(t),r=n.Eu.get(e);if(r&&r.cu)return he().add(r.key);{let s=he();const i=n.Pu.get(e);if(!i)return s;for(const o of i){const l=n.hu.get(o);s=s.unionWith(l.view.eu)}return s}}function zT(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FD.bind(null,e),e.lu.Y_=ND.bind(null,e.eventManager),e.lu.gu=AD.bind(null,e.eventManager),e}function qD(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zD.bind(null,e),e}class au{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return QR(this.persistence,new HR,e.initialUser,this.serializer)}Su(e){return new wT(Zm.fi,this.serializer)}bu(e){return new nD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}au.provider={build:()=>new au};class HD extends au{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ye(this.persistence.referenceDelegate instanceof iu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RR(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new wT(r=>iu.fi(r,n),this.serializer)}}class Sf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Mv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$D.bind(null,this.syncEngine),await ID(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kD}()}createDatastore(e){const n=Wu(e.databaseInfo.databaseId),r=function(i){return new aD(i)}(e.databaseInfo);return function(i,o,l,u){return new dD(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new fD(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Mv(this.syncEngine,n,0),function(){return Pv.C()?new Pv:new rD}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const m=new DD(s,i,o,l,u,d);return f&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);G(Gs,"RemoteStore shutting down."),i.da.add(5),await nl(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Sf.provider={build:()=>new Sf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="FirestoreClient";class GD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=jE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G(cs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G(cs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ap(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yd(t,e){t.asyncQueue.verifyOperationInProgress(),G(cs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ET(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Vv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KD(t);G(cs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Dv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Dv(e.remoteStore,s)),t._onlineComponents=e}async function KD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(cs,"Using user provided OfflineComponentProvider");try{await Yd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Xi("Error using user provided cache. Falling back to memory cache: "+n),await Yd(t,new au)}}else G(cs,"Using default OfflineComponentProvider"),await Yd(t,new HD(void 0));return t._offlineComponents}async function $T(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(cs,"Using user provided OnlineComponentProvider"),await Vv(t,t._uninitializedComponentsProvider._online)):(G(cs,"Using default OnlineComponentProvider"),await Vv(t,new Sf))),t._onlineComponents}function QD(t){return $T(t).then(e=>e.syncEngine)}async function WT(t){const e=await $T(t),n=e.eventManager;return n.onListen=jD.bind(null,e.syncEngine),n.onUnlisten=MD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LD.bind(null,e.syncEngine),n}function YD(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new BT({next:g=>{f.xu(),o.enqueueAndForget(()=>DT(i,m));const k=g.docs.has(l);!k&&g.fromCache?d.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&g.fromCache&&u&&u.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new jT(Hm(l.path),f,{includeMetadataChanges:!0,Qa:!0});return RT(i,m)}(await WT(t),t.asyncQueue,e,n,r)),r.promise}function XD(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new BT({next:g=>{f.xu(),o.enqueueAndForget(()=>DT(i,m)),g.fromCache&&u.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new jT(l,f,{includeMetadataChanges:!0,Qa:!0});return RT(i,m)}(await WT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JD(t,e,n,r){if(e===!0&&r===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Uv(t){if(!J.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zv(t){if(J.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function En(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gu(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="firestore.googleapis.com",Bv=!0;class $v{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GT,this.ssl=Bv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Bv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_T;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CR)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ku{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $v({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $v(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oP;switch(r.type){case"firstParty":return new uP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fv.get(n);r&&(G("ComponentProvider","Removing Datastore"),Fv.delete(n),r.terminate())}(this),Promise.resolve()}}function ZD(t,e,n,r={}){var s;t=En(t,Ku);const i=Xs(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(km(`https://${u}`),Nm("Firestore",!0)),o.host!==GT&&o.host!==u&&Xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!Bs(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=gt.MOCK_USER;else{f=Tk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new gt(g)}t._authCredentials=new aP(new RE(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ti(this.firestore,e,this._query)}}class kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}}class es extends ti{constructor(e,n,r){super(e,n,Hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new J(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function zt(t,e,...n){if(t=qe(t),HT("collection","path",e),t instanceof Ku){const r=Ne.fromString(e,...n);return zv(r),new es(t,null,r)}{if(!(t instanceof kt||t instanceof es))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return zv(r),new es(t.firestore,null,r)}}function It(t,e,...n){if(t=qe(t),arguments.length===1&&(e=jE.newId()),HT("doc","path",e),t instanceof Ku){const r=Ne.fromString(e,...n);return Uv(r),new kt(t,null,new J(r))}{if(!(t instanceof kt||t instanceof es))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Uv(r),new kt(t.firestore,t instanceof es?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="AsyncQueue";class qv{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new ST(this,"async_queue_retry"),this.rc=()=>{const r=Qd();r&&G(Wv,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Qd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new tr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!po(e))throw e;G(Wv,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,lr("INTERNAL UNHANDLED ERROR: ",Hv(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=op.createAndSchedule(this,e,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&te(47125,{cc:Hv(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Hv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ni extends Ku{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new qv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qv(e),this._firestoreClient=void 0,await e}}}function ej(t,e){const n=typeof t=="object"?t:Pm(),r=typeof t=="string"?t:Zc,s=Du(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=D0("firestore");i&&ZD(s,...i)}return s}function dp(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tj(t),t._firestoreClient}function tj(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new xP(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,qT(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new GD(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ro(ut.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ro(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=/^__.*__$/;class rj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gs(e,this.data,this.fieldMask,n,this.fieldTransforms):new el(e,this.data,n,this.fieldTransforms)}}class KT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function QT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ic:t})}}class pp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new pp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return lu(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(QT(this.Ic)&&nj.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class sj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wu(e)}bc(e,n,r,s=!1){return new pp({Ic:e,methodName:n,wc:r,path:at.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yu(t){const e=t._freezeSettings(),n=Wu(t._databaseId);return new sj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YT(t,e,n,r,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,s);gp("Data must be an object, but it was:",o,r);const l=XT(r,o);let u,d;if(i.merge)u=new $t(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=If(e,m,n);if(!o.contains(g))throw new K(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);ZT(f,g)||f.push(g)}u=new $t(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new rj(new Rt(l),u,d)}class Xu extends hp{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xu}}function ij(t,e,n,r){const s=t.bc(1,e,n);gp("Data must be an object, but it was:",s,r);const i=[],o=Rt.empty();ps(r,(u,d)=>{const f=yp(e,u,n);d=qe(d);const m=s.mc(f);if(d instanceof Xu)i.push(f);else{const g=sl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const l=new $t(i);return new KT(o,l,s.fieldTransforms)}function oj(t,e,n,r,s,i){const o=t.bc(1,e,n),l=[If(e,r,n)],u=[s];if(i.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(If(e,i[g])),u.push(i[g+1]);const d=[],f=Rt.empty();for(let g=l.length-1;g>=0;--g)if(!ZT(d,l[g])){const k=l[g];let N=u[g];N=qe(N);const j=o.mc(k);if(N instanceof Xu)d.push(k);else{const R=sl(N,j);R!=null&&(d.push(k),f.set(k,R))}}const m=new $t(d);return new KT(f,m,o.fieldTransforms)}function aj(t,e,n,r=!1){return sl(n,t.bc(r?4:3,e))}function sl(t,e){if(JT(t=qe(t)))return gp("Unsupported field value:",e,t),XT(t,e);if(t instanceof hp)return function(r,s){if(!QT(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=sl(l,s.fc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ye.fromDate(r);return{timestampValue:su(s.serializer,i)}}if(r instanceof Ye){const i=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:su(s.serializer,i)}}if(r instanceof fp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ro)return{bytesValue:hT(s.serializer,r._byteString)};if(r instanceof kt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Xm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mp)return function(o,l){return{mapValue:{fields:{[zE]:{stringValue:BE},[eu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.gc("VectorValues must only contain numeric values.");return Gm(l.serializer,d)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${Gu(r)}`)}(t,e)}function XT(t,e){const n={};return OE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(t,(r,s)=>{const i=sl(s,e.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function JT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof fp||t instanceof ro||t instanceof kt||t instanceof hp||t instanceof mp)}function gp(t,e,n){if(!JT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Gu(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function If(t,e,n){if((e=qe(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return yp(t,e);throw lu("Field path arguments must be of type string or ",t,!1,void 0,n)}const lj=new RegExp("[~\\*/\\[\\]]");function yp(t,e,n){if(e.search(lj)>=0)throw lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qu(...e.split("."))._internalPath}catch{throw lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new K(U.INVALID_ARGUMENT,l+t+u)}function ZT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ju("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cj extends eS{data(){return super.data()}}function Ju(t,e){return typeof e=="string"?yp(t,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vp{}class tS extends vp{}function Rn(t,e,...n){let r=[];e instanceof vp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof _p).length,l=i.filter(u=>u instanceof Zu).length;if(o>1||o>0&&l>0)throw new K(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Zu extends tS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zu(e,n,r)}_apply(e){const n=this._parse(e);return nS(e._query,n),new ti(e.firestore,e.converter,ff(e._query,n))}_parse(e){const n=Yu(e.firestore);return function(i,o,l,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Kv(m,f);const N=[];for(const j of m)N.push(Gv(u,i,j));g={arrayValue:{values:N}}}else g=Gv(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Kv(m,f),g=aj(l,o,m,f==="in"||f==="not-in");return We.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yt(t,e,n){const r=e,s=Ju("where",t);return Zu._create(s,r,n)}class _p extends vp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _p(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)nS(o,u),o=ff(o,u)}(e._query,n),new ti(e.firestore,e.converter,ff(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wp extends tS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fa(i,o)}(e._query,this._field,this._direction);return new ti(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new go(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Dn(t,e="asc"){const n=e,r=Ju("orderBy",t);return wp._create(r,n)}function Gv(t,e,n){if(typeof(n=qe(n))=="string"){if(n==="")throw new K(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YE(e)&&n.indexOf("/")!==-1)throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!J.isDocumentKey(r))throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lv(t,new J(r))}if(n instanceof kt)return lv(t,n._key);throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gu(n)}.`)}function Kv(t,e){if(!Array.isArray(t)||t.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nS(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dj{convertValue(e,n="none"){switch(as(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ps(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[eu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new mp(i)}convertGeoPoint(e){return new fp(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ma(e));default:return null}}convertTimestamp(e){const n=is(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);ye(vT(r),9688,{name:e});const s=new La(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||lr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sS extends eS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ju("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class gc extends sS{data(e={}){return super.data(e)}}class hj{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new gc(this._firestore,this._userDataWriter,r.key,r,new Xo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new gc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new gc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:fj(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t){t=En(t,kt);const e=En(t.firestore,ni);return YD(dp(e),t._key).then(n=>mj(e,t,n))}class oS extends dj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function jn(t){t=En(t,ti);const e=En(t.firestore,ni),n=dp(e),r=new oS(e);return uj(t._query),XD(n,t._query).then(s=>new hj(e,r,t,s))}function xf(t,e,n){t=En(t,kt);const r=En(t.firestore,ni),s=rS(t.converter,e,n);return ed(r,[YT(Yu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,nn.none())])}function Bi(t,e,n,...r){t=En(t,kt);const s=En(t.firestore,ni),i=Yu(s);let o;return o=typeof(e=qe(e))=="string"||e instanceof Qu?oj(i,"updateDoc",t._key,e,n,r):ij(i,"updateDoc",t._key,e),ed(s,[o.toMutation(t._key,nn.exists(!0))])}function Ep(t){return ed(En(t.firestore,ni),[new Km(t._key,nn.none())])}function Tp(t,e){const n=En(t.firestore,ni),r=It(t),s=rS(t.converter,e);return ed(n,[YT(Yu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function ed(t,e){return function(r,s){const i=new tr;return r.asyncQueue.enqueueAndForget(async()=>VD(await QD(r),s,i)),i.promise}(dp(t),e)}function mj(t,e,n){const r=n.docs.get(e._key),s=new oS(t);return new sS(t,s,e._key,r,new Xo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){fo=s})(uo),$s(new rs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ni(new lP(r.getProvider("auth-internal")),new dP(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Mn(Yy,Xy,e),Mn(Yy,Xy,"esm2017")})();var pj="firebase",gj="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(pj,gj,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ut(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="us-central1";class vj{constructor(e,n,r,s,i=kf,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new yj(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=kf}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function _j(t,e,n){const r=Xs(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(km(t.emulatorOrigin),Nm("Functions",!0))}const Qv="@firebase/functions",Yv="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="auth-internal",Ej="app-check-internal",Tj="messaging-internal";function Sj(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(wj),o=n.getProvider(Tj),l=n.getProvider(Ej);return new vj(s,i,o,l,r)};$s(new rs(aS,e,"PUBLIC").setMultipleInstances(!0)),Mn(Qv,Yv,t),Mn(Qv,Yv,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t=Pm(),e=kf){const r=Du(qe(t),aS).getImmediate({identifier:e}),s=D0("functions");return s&&xj(r,...s),r}function xj(t,e,n){_j(qe(t),e,n)}Sj();const kj={apiKey:"AIzaSyBn2jG-T2SesKFr0TsfeQa04wlBmDeEoG4",authDomain:"clarity-311c3.firebaseapp.com",projectId:"clarity-311c3",storageBucket:"clarity-311c3.firebasestorage.app",messagingSenderId:"459484415688",appId:"1:459484415688:web:bac719ee243bbd9821c7fd"},Sp=L0(kj),bs=SE(Sp),we=ej(Sp);Ij(Sp,"us-central1");const lS=P.createContext(),on=()=>{const t=P.useContext(lS);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},cS=({children:t})=>{const[e,n]=P.useState(null),[r,s]=P.useState(null),[i,o]=P.useState("free"),[l,u]=P.useState(!0),[d,f]=P.useState(!1),m=P.useRef(!0),g=(b,V)=>{if(!b||!V)return{isTrialActive:!1,daysRemaining:0};const O=V.seconds?new Date(V.seconds*1e3):new Date(V),v=new Date,y=v<O,_=Math.ceil((O-v)/(24*60*60*1e3));return{isTrialActive:y,daysRemaining:Math.max(0,_),trialEndDate:O}},k=async b=>{try{const V=await iS(It(we,"users",b));if(V.exists()){const O=V.data(),v=g(O.trialStartDate,O.trialEndDate);if(console.log("🔍 Profile Data:",O),console.log("📅 Trial Status:",v),!m.current)return;if(O.subscription==="trial"&&!v.isTrialActive){const y={...O,subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date};await Bi(It(we,"users",b),{subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date}),m.current&&(s({...y,...v}),o("free"))}else m.current&&(s({...O,...v}),o(O.subscription))}}catch(V){console.error("Error fetching user profile:",V),m.current&&u(!1)}};P.useEffect(()=>KA(bs,async V=>{console.log("🔥 Auth state changed:",V?"User logged in":"User logged out");try{if(!m.current)return;n(V),f(!!V),V?await k(V.uid):m.current&&(s(null),o("free"))}catch(O){console.error("Error in auth state change:",O)}finally{m.current&&u(!1)}}),[]),P.useEffect(()=>()=>{m.current=!1},[]);const N=async(b,V,O={})=>{try{const{user:v}=await uE(bs,b,V),y={email:v.email,uid:v.uid,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date,firstName:O.firstName||"",lastName:O.lastName||"",exerciseGoalMinutes:O.exerciseGoalMinutes||30,waterGoalOz:O.waterGoalOz||64,meditationGoalMinutes:O.meditationGoalMinutes||10};if(await xf(It(we,"users",v.uid),y),m.current){const _=g(y.trialStartDate,y.trialEndDate);s({...y,..._}),o("trial")}return{success:!0,user:v}}catch(v){throw console.error("Signup error:",v),v}},j=async(b,V)=>{try{const{user:O}=await dE(bs,b,V);return console.log("✅ Login successful, Firebase will trigger auth state change"),{success:!0,user:O}}catch(O){throw console.error("Login error:",O),O}},R=async()=>{try{return await hE(bs),m.current&&(n(null),s(null),o("free"),f(!1)),{success:!0}}catch(b){throw console.error("Logout error:",b),b}},I=async()=>{try{if(e!=null&&e.uid){const b={subscription:"premium",subscriptionStatus:"premium_paid",premiumStartDate:new Date,updatedAt:new Date};return await Bi(It(we,"users",e.uid),b),m.current&&(o("premium"),s(V=>({...V,...b}))),{success:!0}}}catch(b){throw console.error("Error upgrading to premium:",b),b}},T=async()=>{try{if(e!=null&&e.uid){const b={subscription:"free",subscriptionCancelledAt:new Date,updatedAt:new Date};return await Bi(It(we,"users",e.uid),b),m.current&&(o("free"),s(V=>({...V,...b}))),{success:!0}}}catch(b){throw console.error("Error cancelling subscription:",b),b}},x={user:e,userProfile:r,userSubscription:i,isAuthenticated:d,isPremium:i==="premium"||i==="trial",isTrialActive:(r==null?void 0:r.isTrialActive)||!1,trialDaysRemaining:(r==null?void 0:r.daysRemaining)||0,loading:l,signup:N,login:j,logout:R,upgradeToPremium:I,cancelSubscription:T,fetchUserProfile:k,authKey:(e==null?void 0:e.uid)||"no-user"};return c.jsx(lS.Provider,{value:x,children:t})},uS="/assets/Logo-BuPYrDrj.png";var dS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Xv=Jn.createContext&&Jn.createContext(dS),Nj=["attr","size","title"];function Aj(t,e){if(t==null)return{};var n=Cj(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cj(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cu.apply(this,arguments)}function Jv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function uu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jv(Object(n),!0).forEach(function(r){Pj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pj(t,e,n){return e=Rj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rj(t){var e=Dj(t,"string");return typeof e=="symbol"?e:e+""}function Dj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hS(t){return t&&t.map((e,n)=>Jn.createElement(e.tag,uu({key:n},e.attr),hS(e.child)))}function jj(t){return e=>Jn.createElement(bj,cu({attr:uu({},t.attr)},e),hS(t.child))}function bj(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=Aj(t,Nj),l=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Jn.createElement("svg",cu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:uu(uu({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Jn.createElement("title",null,i),t.children)};return Xv!==void 0?Jn.createElement(Xv.Consumer,null,n=>e(n)):e(dS)}function Oj(t){return jj({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(t)}const Ks={async register(t){try{const e=await uE(bs,t.email,t.password);return await xf(It(we,"users",e.user.uid),{username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,exerciseGoalMinutes:t.exerciseGoalMinutes||30,waterGoalOz:t.waterGoalOz||64,meditationGoalMinutes:t.meditationGoalMinutes||10,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date}),{user:e.user}}catch(e){throw new Error(e.message)}},async login(t,e){try{return{user:(await dE(bs,t,e)).user}}catch{throw new Error("Invalid credentials")}},async logout(){try{return await hE(bs),{message:"success"}}catch(t){throw new Error(t.message)}},async getUserProfile(t){try{const e=await iS(It(we,"users",t));if(!e.exists())throw new Error("User not found");return{user:{id:t,...e.data()}}}catch(e){throw new Error(e.message)}},async updateUserProfile(t,e){try{const n=It(we,"users",t);return await xf(n,{...e,updatedAt:new Date},{merge:!0}),{user:{id:t,...e}}}catch(n){throw new Error("Error updating profile: "+n.message)}}};function Mj(){const{user:t,logout:e}=on(),n=Cu(),[r,s]=P.useState(!1),[i,o]=P.useState(null),[l,u]=P.useState(!1),d=P.useRef();P.useEffect(()=>{const N=async()=>{if(t!=null&&t.uid)try{u(!0);const j=await Ks.getUserProfile(t.uid);o(j.user)}catch(j){console.error("Error fetching user profile:",j)}finally{u(!1)}};t!=null&&t.uid&&N()},[t]);const f=N=>{N.stopPropagation(),s(!r)};P.useEffect(()=>{if(!r)return;const N=j=>{d.current&&!d.current.contains(j.target)&&s(!1)};return document.addEventListener("click",N),()=>document.removeEventListener("click",N)},[r]);const m=async N=>{N.preventDefault(),s(!1);try{await e(),n("/welcome")}catch(j){console.error("Error logging out:",j),n("/welcome")}},g=()=>{s(!1),n("/profile")};if(!t)return null;const k="profile-dropdown"+(r?"":" hidden");return c.jsxs("div",{className:"profile-button-container",children:[c.jsx("button",{onClick:f,className:"profile-button",children:c.jsx(Oj,{className:"profile-icon"})}),c.jsxs("ul",{className:k,ref:d,children:[c.jsx("li",{className:"profile-info",children:c.jsx("div",{className:"user-details",children:c.jsx("span",{className:"user-name",children:i!=null&&i.firstName&&(i!=null&&i.lastName)?`${i.firstName} ${i.lastName}`:(i==null?void 0:i.username)||"User"})})}),c.jsx("li",{className:"menu-divider"}),c.jsx("li",{children:c.jsx("button",{onClick:g,className:"dropdown-button",children:"👤 Edit Profile"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>{s(!1),n("/dashboard")},className:"dropdown-button",children:"📊 Dashboard"})}),c.jsx("li",{className:"menu-divider"}),c.jsx("li",{children:c.jsx("button",{onClick:m,className:"dropdown-button logout-button",children:"🚪 Sign Out"})})]})]})}function Lj(){const{userSubscription:t,isTrialActive:e,trialDaysRemaining:n,upgradeToPremium:r}=on();if(t==="premium"||t==="free"||!e)return null;const s=n<=3,i=(14-n)/14*100,o=()=>n===1?"Last day of premium!":n<=3?`Only ${n} days left!`:`${n} days remaining`,l=()=>n===1?"Keep Premium - $4.99/mo":n<=3?"Don't Lose Premium!":"Keep Premium - $4.99/mo";return c.jsxs("div",{className:`trial-banner ${s?"urgent":""}`,children:[c.jsxs("div",{className:"trial-content",children:[c.jsxs("div",{className:"trial-info",children:[c.jsx("span",{className:"trial-icon",children:s?"⏰":"✨"}),c.jsxs("div",{className:"trial-text",children:[c.jsx("h4",{children:s?"Premium Trial Ending!":"Premium Trial Active"}),c.jsx("p",{children:o()})]})]}),c.jsx("button",{onClick:r,className:"trial-upgrade-btn",children:l()})]}),c.jsx("div",{className:"trial-progress",children:c.jsx("div",{className:"trial-progress-bar",style:{width:`${i}%`}})})]})}function Vj(){return c.jsxs("div",{className:"navigation-container",children:[c.jsxs("div",{className:"top-header",children:[c.jsxs("div",{className:"logo-container",children:[c.jsx("img",{src:uS,alt:"Clarity logo",className:"logo"}),c.jsx("span",{className:"logo-text",children:"Your Mind + Wellness Tracker"})]}),c.jsx(Mj,{})]}),c.jsx(Lj,{}),c.jsx("main",{className:"main-content",children:c.jsx(Y1,{})}),c.jsxs("nav",{className:"bottom-navigation",children:[c.jsxs(mi,{to:"/dashboard",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"📊"}),c.jsx("span",{className:"nav-label",children:"Home"})]}),c.jsxs(mi,{to:"/workout",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🏋️"}),c.jsx("span",{className:"nav-label",children:"Workout"})]}),c.jsxs(mi,{to:"/meditation",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🧘‍♀️"}),c.jsx("span",{className:"nav-label",children:"Meditate"})]}),c.jsxs(mi,{to:"/water",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"💧"}),c.jsx("span",{className:"nav-label",children:"Water"})]}),c.jsxs(mi,{to:"/games",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🎮"}),c.jsx("span",{className:"nav-label",children:"Games"})]}),c.jsxs(mi,{to:"/goals",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🎯"}),c.jsx("span",{className:"nav-label",children:"Goals"})]})]})]})}function Fj(){const{user:t,loading:e}=on(),[n,r]=P.useState(""),[s,i]=P.useState(""),[o,l]=P.useState(""),[u,d]=P.useState(""),[f,m]=P.useState(""),[g,k]=P.useState(""),[N,j]=P.useState(""),[R,I]=P.useState("30"),[T,x]=P.useState("64"),[b,V]=P.useState("10"),[O,v]=P.useState({}),[y,_]=P.useState(!1),[E,A]=P.useState(!1),[C,S]=P.useState("pulse");if(P.useEffect(()=>{const Z=[setTimeout(()=>S("open"),2500),setTimeout(()=>S("form"),4500)];return()=>Z.forEach(clearTimeout)},[]),e)return c.jsx("div",{children:"Loading..."});if(t)return c.jsx(Bc,{to:"/dashboard",replace:!0});const re=async Z=>{Z.preventDefault(),v({}),A(!0);try{await Ks.login(n,s)}catch(Te){v({credential:Te.message})}finally{A(!1)}},He=async Z=>{if(Z.preventDefault(),s!==N){v({confirmPassword:"Confirm Password field must be the same as the Password field"});return}v({}),A(!0);try{await Ks.register({email:o,password:s,username:u,firstName:f,lastName:g,exerciseGoalMinutes:parseInt(R),waterGoalOz:parseInt(T),meditationGoalMinutes:parseInt(b)})}catch(Te){v({general:Te.message})}finally{A(!1)}};return c.jsxs("div",{className:"welcome-container",children:[C!=="form"&&c.jsx("div",{className:`awakening-bg ${C}`,children:c.jsx("div",{className:"awakening-eye"})}),c.jsxs("div",{className:`welcome-card ${C==="form"?"visible":""}`,children:[c.jsxs("div",{className:"welcome-header",children:[c.jsx("img",{src:uS,alt:"Clarity logo"}),c.jsx("p",{children:"Begin your wellness today"})]}),y?c.jsxs("form",{className:"welcome-form",onSubmit:He,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",value:o,onChange:Z=>l(Z.target.value),required:!0,placeholder:"Enter your email"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Username"}),c.jsx("input",{type:"text",value:u,onChange:Z=>d(Z.target.value),required:!0,placeholder:"Choose a username"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"First Name"}),c.jsx("input",{type:"text",value:f,onChange:Z=>m(Z.target.value),required:!0,placeholder:"Enter your first name"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Last Name"}),c.jsx("input",{type:"text",value:g,onChange:Z=>k(Z.target.value),required:!0,placeholder:"Enter your last name"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Password"}),c.jsx("input",{type:"password",value:s,onChange:Z=>i(Z.target.value),required:!0,placeholder:"Create a password"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Confirm Password"}),c.jsx("input",{type:"password",value:N,onChange:Z=>j(Z.target.value),required:!0,placeholder:"Confirm your password"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Exercise Goal (minutes)"}),c.jsx("input",{type:"number",value:R,onChange:Z=>I(Z.target.value),required:!0,placeholder:"Daily exercise goal in minutes"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Water Goal (oz)"}),c.jsx("input",{type:"number",value:T,onChange:Z=>x(Z.target.value),required:!0,placeholder:"Daily water goal in ounces"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Meditation Goal (minutes)"}),c.jsx("input",{type:"number",value:b,onChange:Z=>V(Z.target.value),required:!0,placeholder:"Daily meditation goal in minutes"})]}),O.confirmPassword&&c.jsx("p",{className:"error-message",children:O.confirmPassword}),O.general&&c.jsx("p",{className:"error-message",children:O.general}),c.jsx("button",{type:"submit",className:"primary-button",disabled:E,children:E?"Creating Account...":"Sign Up"})]}):c.jsxs("form",{className:"welcome-form",onSubmit:re,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Username or Email"}),c.jsx("input",{type:"text",value:n,onChange:Z=>r(Z.target.value),required:!0,placeholder:"Enter your username or email"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Password"}),c.jsx("input",{type:"password",value:s,onChange:Z=>i(Z.target.value),required:!0,placeholder:"Enter your password"})]}),O.credential&&c.jsx("p",{className:"error-message",children:O.credential}),c.jsx("button",{type:"submit",className:"primary-button",disabled:E,children:E?"Logging In...":"Log In"})]}),c.jsx("button",{className:"secondary-button",onClick:()=>_(!y),disabled:E,children:y?"Already have an account? Log In":"Don't have an account? Sign Up"})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Nf=function(t,e){return Nf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Nf(t,e)};function Uj(t,e){Nf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var zj=100,Bj=100,Zv=50,Af=50,Cf=50;function e_(t){var e=t.className,n=t.counterClockwise,r=t.dashRatio,s=t.pathRadius,i=t.strokeWidth,o=t.style;return P.createElement("path",{className:e,style:Object.assign({},o,Wj({pathRadius:s,dashRatio:r,counterClockwise:n})),d:$j({pathRadius:s,counterClockwise:n}),strokeWidth:i,fillOpacity:0})}function $j(t){var e=t.pathRadius,n=t.counterClockwise,r=e,s=n?1:0;return`
      M `+Af+","+Cf+`
      m 0,-`+r+`
      a `+r+","+r+" "+s+" 1 1 0,"+2*r+`
      a `+r+","+r+" "+s+" 1 1 0,-"+2*r+`
    `}function Wj(t){var e=t.counterClockwise,n=t.dashRatio,r=t.pathRadius,s=Math.PI*2*r,i=(1-n)*s;return{strokeDasharray:s+"px "+s+"px",strokeDashoffset:(e?-i:i)+"px"}}var Xd=function(t){Uj(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return Zv-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var n=this.props,r=n.value,s=n.minValue,i=n.maxValue,o=Math.min(Math.max(r,s),i);return(o-s)/(i-s)},e.prototype.render=function(){var n=this.props,r=n.circleRatio,s=n.className,i=n.classes,o=n.counterClockwise,l=n.styles,u=n.strokeWidth,d=n.text,f=this.getPathRadius(),m=this.getPathRatio();return P.createElement("svg",{className:i.root+" "+s,style:l.root,viewBox:"0 0 "+zj+" "+Bj,"data-test-id":"CircularProgressbar"},this.props.background?P.createElement("circle",{className:i.background,style:l.background,cx:Af,cy:Cf,r:Zv}):null,P.createElement(e_,{className:i.trail,counterClockwise:o,dashRatio:r,pathRadius:f,strokeWidth:u,style:l.trail}),P.createElement(e_,{className:i.path,counterClockwise:o,dashRatio:m*r,pathRadius:f,strokeWidth:u,style:l.path}),d?P.createElement("text",{className:i.text,style:l.text,x:Af,y:Cf},d):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(P.Component);function Jd(t){var e=t.rotation,n=t.strokeLinecap,r=t.textColor,s=t.textSize,i=t.pathColor,o=t.pathTransition,l=t.pathTransitionDuration,u=t.trailColor,d=t.backgroundColor,f=e==null?void 0:"rotate("+e+"turn)",m=e==null?void 0:"center center";return{root:{},path:Hl({stroke:i,strokeLinecap:n,transform:f,transformOrigin:m,transition:o,transitionDuration:l==null?void 0:l+"s"}),trail:Hl({stroke:u,strokeLinecap:n,transform:f,transformOrigin:m}),text:Hl({fill:r,fontSize:s}),background:Hl({fill:d})}}function Hl(t){return Object.keys(t).forEach(function(e){t[e]==null&&delete t[e]}),t}const B={getUserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone},getCurrentLocalTime(){return new Date},getStartOfDay(t=new Date){const e=new Date(t);return e.setHours(0,0,0,0),e},getEndOfDay(t=new Date){const e=new Date(t);return e.setHours(23,59,59,999),e},formatLocalDate(t){return t.toLocaleDateString("en-CA")},formatLocalDateTime(t){return t.toLocaleString()},formatLocalTime(t){return t.toLocaleTimeString()},getLocalDateRange(t=7){const e=this.getEndOfDay(new Date),n=this.getStartOfDay(new Date);return n.setDate(n.getDate()-(t-1)),{startDate:n,endDate:e}},isToday(t){const e=new Date;return this.formatLocalDate(t)===this.formatLocalDate(e)},isSameLocalDay(t,e){return this.formatLocalDate(t)===this.formatLocalDate(e)},toLocalTimezone(t){return new Date(t)},getRelativeTime(t){const n=new Date-t,r=Math.floor(n/6e4),s=Math.floor(r/60),i=Math.floor(s/24);return r<1?"Just now":r<60?`${r} minutes ago`:s<24?`${s} hours ago`:i===1?"Yesterday":i<7?`${i} days ago`:this.formatLocalDate(t)},getCurrentWeekRange(){const t=new Date,e=t.getDay(),n=new Date(t);n.setHours(0,0,0,0),n.setDate(t.getDate()-e);const r=new Date(n);return r.setDate(n.getDate()+6),r.setHours(23,59,59,999),{startDate:n,endDate:r}}},As={async logWorkout(t,e){try{console.log("🌍 Logging workout in timezone:",B.getUserTimezone());let n=B.getCurrentLocalTime();e.date&&(n=B.toLocalTimezone(e.date));const r={title:e.title,type:e.type||"General",durationMinutes:e.durationMinutes,date:n,notes:e.notes||"",caloriesBurned:e.caloriesBurned||0,completed:!0,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},s=await Tp(zt(we,`users/${t}/workouts`),r);return{id:s.id,success:!0,workout:{...e,id:s.id}}}catch(n){throw new Error("Error logging workout: "+n.message)}},async fetchWorkoutsByUser(t){try{const e=Rn(zt(we,`users/${t}/workouts`),Dn("date","desc"));return{workouts:(await jn(e)).docs.map(s=>{var i,o,l,u;return{id:s.id,...s.data(),date:(i=s.data().date)==null?void 0:i.toDate(),localDate:B.formatLocalDate((o=s.data().date)==null?void 0:o.toDate()),localDateTime:B.formatLocalDateTime((l=s.data().date)==null?void 0:l.toDate()),relativeTime:B.getRelativeTime((u=s.data().date)==null?void 0:u.toDate())}})}}catch(e){throw new Error("Error fetching workouts: "+e.message)}},async updateWorkout(t,e,n){try{const r=It(we,`users/${t}/workouts`,e),s={...n,updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()};return n.date&&(s.date=B.toLocalTimezone(n.date)),await Bi(r,s),{success:!0,workout:{id:e,...n}}}catch(r){throw new Error("Error updating workout: "+r.message)}},async deleteWorkout(t,e){try{return await Ep(It(we,`users/${t}/workouts`,e)),{success:!0,message:"Workout deleted successfully"}}catch(n){throw new Error("Error deleting workout: "+n.message)}},async getWorkoutSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange();console.log("🌍 Weekly workout query for timezone:",B.getUserTimezone()),console.log("📅 Query range:",B.formatLocalDateTime(e),"to",B.formatLocalDateTime(n));const r=Rn(zt(we,`users/${t}/workouts`),yt("date",">=",e),yt("date","<=",n),Dn("date","desc")),i=(await jn(r)).docs.map(u=>{var d;return{id:u.id,...u.data(),date:(d=u.data().date)==null?void 0:d.toDate()}}),o=i.reduce((u,d)=>u+(d.durationMinutes||0),0),l=i.reduce((u,d)=>u+(d.caloriesBurned||0),0);return{totalWorkouts:i.length,totalMinutes:o,totalCalories:l,workouts:i.slice(0,5),period:"This week",userTimezone:B.getUserTimezone()}}catch(e){throw new Error("Error fetching workout summary: "+e.message)}},async getDailyWorkoutSummary(t,e=new Date){try{const{startDate:n,endDate:r}={startDate:B.getStartOfDay(e),endDate:B.getEndOfDay(e)};console.log("🌍 Daily workout query for timezone:",B.getUserTimezone()),console.log("📅 Query range:",B.formatLocalDateTime(n),"to",B.formatLocalDateTime(r));const s=Rn(zt(we,`users/${t}/workouts`),yt("date",">=",n),yt("date","<=",r),Dn("date","desc")),o=(await jn(s)).docs.map(f=>{var m;return{id:f.id,...f.data(),date:(m=f.data().date)==null?void 0:m.toDate()}});console.log("💪 Found workouts for today:",o.length);const l=o.reduce((f,m)=>f+(m.durationMinutes||0),0),u=o.length,d=o.reduce((f,m)=>f+(m.caloriesBurned||0),0);return{date:B.formatLocalDate(e),totalWorkouts:u,completedWorkouts:u,totalMinutes:l,caloriesBurned:d,lastWorkout:o.length>0?o[0]:null,workouts:o,hasWorkoutsToday:o.length>0,mostCommonType:o.length>0?this.getMostCommonWorkoutType(o):null,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily workout summary:",n),this.getEmptyDailySummary(e)}},getMostCommonWorkoutType(t){if(t.length===0)return null;const e={};return t.forEach(n=>{e[n.type]=(e[n.type]||0)+1}),Object.keys(e).reduce((n,r)=>e[n]>e[r]?n:r)},getEmptyDailySummary(t){return{date:B.formatLocalDate(t),totalWorkouts:0,completedWorkouts:0,totalMinutes:0,caloriesBurned:0,lastWorkout:null,workouts:[],hasWorkoutsToday:!1,mostCommonType:null,userTimezone:B.getUserTimezone()}}},Xt={async logWaterIntake(t,e){try{const n={amount:e.amount,date:B.toLocalTimezone(e.date||new Date),userId:t,createdAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},r=await Tp(zt(we,`users/${t}/waterIntake`),n);return{id:r.id,success:!0,waterIntake:{...e,id:r.id}}}catch(n){throw new Error("Error logging water intake: "+n.message)}},async fetchWaterIntakeByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const r=Rn(zt(we,`users/${t}/waterIntake`),yt("date",">=",n),Dn("date","desc"));return{waterIntakes:(await jn(r)).docs.map(o=>{var l;return{id:o.id,...o.data(),date:(l=o.data().date)==null?void 0:l.toDate()}})}}catch(n){throw new Error("Error fetching water intake: "+n.message)}},async updateWaterIntake(t,e,n){try{const r=It(we,`users/${t}/waterIntake`,e);return await Bi(r,{...n,updatedAt:new Date}),{success:!0,waterIntake:{id:e,...n}}}catch(r){throw new Error("Error updating water intake: "+r.message)}},async deleteWaterIntake(t,e){try{return await Ep(It(we,`users/${t}/waterIntake`,e)),{success:!0,message:"Water intake deleted successfully"}}catch(n){throw new Error("Error deleting water intake: "+n.message)}},async getTodayWaterIntake(t){try{const e=new Date;e.setHours(0,0,0,0);const n=new Date(e);n.setDate(n.getDate()+1);const r=Rn(zt(we,`users/${t}/waterIntake`),yt("date",">=",e),yt("date","<",n),Dn("date","desc")),i=(await jn(r)).docs.map(l=>l.data());return{totalOz:i.reduce((l,u)=>l+(u.amount||0),0),intakeCount:i.length,intakes:i}}catch(e){throw new Error("Error fetching today's water intake: "+e.message)}},async getWaterSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),r=Rn(zt(we,`users/${t}/waterIntake`),yt("date",">=",e),yt("date","<=",n),Dn("date","desc")),i=(await jn(r)).docs.map(f=>f.data()),o={};i.forEach(f=>{const m=f.date.toDate().toDateString();o[m]=(o[m]||0)+f.amount});const l=i.reduce((f,m)=>f+(m.amount||0),0),u=7,d=u>0?l/u:0;return{totalOz:l,averageOz:d,dailyTotals:o,intakeCount:i.length}}catch(e){throw new Error("Error fetching water summary: "+e.message)}},async getDailyWaterIntake(t,e=new Date){try{const n=B.getStartOfDay(e),r=B.getEndOfDay(e),s=Rn(zt(we,`users/${t}/waterIntake`),yt("date",">=",n),yt("date","<=",r),Dn("date","desc")),o=(await jn(s)).docs.map(u=>{var d;return{id:u.id,...u.data(),date:(d=u.data().date)==null?void 0:d.toDate()}}),l=o.reduce((u,d)=>u+(d.amount||0),0);return{date:B.formatLocalDate(e),totalOz:l,totalEntries:o.length,entries:o,hasWaterToday:o.length>0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily water intake:",n),{date:B.formatLocalDate(e),totalOz:0,totalEntries:0,entries:[],hasWaterToday:!1,userTimezone:B.getUserTimezone()}}},calculateHourlyWaterIntake(t){const e={};return t.forEach(n=>{const r=n.date.getHours();e[r]=(e[r]||0)+n.amount}),e}},Cs={async logMeditation(t,e){try{const n={title:e.title||"Meditation Session",type:e.type||"mindfulness",soundscape:e.soundscape||"silence",durationMinutes:e.durationMinutes,targetDuration:e.targetDuration||e.durationMinutes,completed:e.completed||!1,deepStateAchieved:e.deepStateAchieved||!1,date:B.toLocalTimezone(e.date||new Date),notes:e.notes||"",moodBefore:e.moodBefore||"",moodAfter:e.moodAfter||"",guidedSession:e.guidedSession||!1,interruptions:e.interruptions||0,heartRateData:e.heartRateData||null,brainwaveFrequency:e.brainwaveFrequency||null,focusLevel:e.focusLevel||null,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},r=await Tp(zt(we,`users/${t}/meditations`),n);return{id:r.id,success:!0,meditation:{...n,id:r.id}}}catch(n){throw new Error("Error logging meditation: "+n.message)}},async fetchMeditationsByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const r=Rn(zt(we,`users/${t}/meditations`),yt("date",">=",n),Dn("date","desc"));return{meditations:(await jn(r)).docs.map(o=>{var l;return{id:o.id,...o.data(),date:(l=o.data().date)==null?void 0:l.toDate()}})}}catch(n){throw new Error("Error fetching meditations: "+n.message)}},async getMeditationAnalytics(t,e=30){try{const r=(await this.fetchMeditationsByUser(t,e)).meditations;if(r.length===0)return{totalSessions:0,deepStateSuccessRate:0,averageDuration:0,favoriteTime:"morning",favoriteSound:"silence",moodImprovement:0};const i=r.filter(d=>d.deepStateAchieved).length/r.length*100,o={},l={},u=[];return r.forEach(d=>{o[d.soundscape]=(o[d.soundscape]||0)+1;const f=d.date.getHours(),m=f<12?"morning":f<18?"afternoon":"evening";if(l[m]=(l[m]||0)+1,d.moodBefore&&d.moodAfter){const g={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6},k=g[d.moodBefore]||3,N=g[d.moodAfter]||3;u.push(N-k)}}),{totalSessions:r.length,deepStateSuccessRate:Math.round(i),averageDuration:r.reduce((d,f)=>d+f.durationMinutes,0)/r.length,favoriteTime:Object.keys(l).reduce((d,f)=>l[d]>l[f]?d:f,"morning"),favoriteSound:Object.keys(o).reduce((d,f)=>o[d]>o[f]?d:f,"silence"),moodImprovement:u.length>0?u.reduce((d,f)=>d+f,0)/u.length:0,consistency:r.length/e}}catch(n){throw new Error("Error fetching meditation analytics: "+n.message)}},async getPersonalizedRecommendations(t){try{const e=await this.getMeditationAnalytics(t),n=[];return e.deepStateSuccessRate<50&&n.push({type:"duration",message:"Try longer sessions (7-10 minutes) to achieve deeper states",action:"Increase session length"}),e.favoriteSound==="silence"&&n.push({type:"soundscape",message:'Research shows binaural beats can enhance focus. Try our "Deep Focus" soundscape.',action:"Try binaural beats"}),e.consistency<.5&&n.push({type:"consistency",message:`Your best time is ${e.favoriteTime}. Set a daily reminder for consistent practice.`,action:"Set daily reminder"}),{recommendations:n}}catch(e){throw new Error("Error generating recommendations: "+e.message)}},async updateMeditation(t,e,n){try{const r=It(we,`users/${t}/meditations`,e);return await Bi(r,{...n,updatedAt:new Date}),{success:!0,meditation:{id:e,...n}}}catch(r){throw new Error("Error updating meditation: "+r.message)}},async deleteMeditation(t,e){try{return await Ep(It(we,`users/${t}/meditations`,e)),{success:!0,message:"Meditation deleted successfully"}}catch(n){throw new Error("Error deleting meditation: "+n.message)}},async getMeditationSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),r=Rn(zt(we,`users/${t}/meditations`),yt("date",">=",e),yt("date","<=",n),Dn("date","desc")),i=(await jn(r)).docs.map(d=>d.data()),o=i.reduce((d,f)=>d+(f.durationMinutes||0),0),l=i.length>0?o/i.length:0,u=i.length>0?i.filter(d=>d.deepStateAchieved).length/i.length*100:0;return{totalSessions:i.length,totalMinutes:o,averageDuration:l,deepStateSuccessRate:u,favoriteSoundscape:i.length>0?this.getMostFrequent(i,"soundscape"):"silence",favoriteTime:i.length>0?this.getMostFrequent(i,"timeOfDay"):"morning",moodImprovement:this.calculateMoodImprovement(i)}}catch(e){throw console.error("Error fetching meditation summary:",e),new Error("Error fetching meditation summary: "+e.message)}},getMostFrequent(t,e){const n={};return t.forEach(r=>{const s=e==="timeOfDay"?this.getTimeOfDay(r.date):r[e];n[s]=(n[s]||0)+1}),Object.keys(n).reduce((r,s)=>n[r]>n[s]?r:s)},getTimeOfDay(t){let e;if(t instanceof Date)e=t;else if(typeof t=="string")e=new Date(t);else if(t&&t.seconds)e=new Date(t.seconds*1e3);else return console.warn("Invalid date format:",t),"unknown";if(isNaN(e.getTime()))return console.warn("Invalid date object:",t),"unknown";const n=e.getHours();return n<6?"night":n<12?"morning":n<17?"afternoon":n<21?"evening":"night"},calculateMoodImprovement(t){const e={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6};let n=0,r=0;return t.forEach(s=>{const i=e[s.moodBefore]||3,o=e[s.moodAfter]||3;n+=o-i,r++}),r>0?n/r:0},async getDailyMeditationSummary(t,e=new Date){try{const n=B.getStartOfDay(e),r=B.getEndOfDay(e);console.log("🌍 Daily meditation query for timezone:",B.getUserTimezone());const s=Rn(zt(we,`users/${t}/meditations`),yt("date",">=",n),yt("date","<=",r),Dn("date","desc")),o=(await jn(s)).docs.map(R=>{var I;return{id:R.id,...R.data(),date:(I=R.data().date)==null?void 0:I.toDate()}}),l=o.reduce((R,I)=>R+(I.durationMinutes||0),0),u=o.filter(R=>R.completed).length,d=o.length>0?l/o.length:0,f=o.filter(R=>R.deepStateAchieved).length,m=o.length>0?f/o.length*100:0,g=o.length>0?o[0]:null,k=o.length>0?this.getMostFrequent(o,"soundscape"):"silence",N=o.length>0?this.getMostFrequent(o,"timeOfDay"):"morning",j=this.calculateMoodImprovement(o);return{date:B.formatLocalDate(e),totalSessions:o.length,completedSessions:u,totalMinutes:l,averageDuration:Math.round(d*10)/10,deepStateAchieved:f,deepStateSuccessRate:Math.round(m),lastSession:g,favoriteSoundscape:k,favoriteTime:N,moodImprovement:Math.round(j*100)/100,sessions:o,hasSessionsToday:o.length>0,mostRecentType:(g==null?void 0:g.type)||"mindfulness",mostRecentSoundscape:(g==null?void 0:g.soundscape)||"silence",timeOfLastSession:(g==null?void 0:g.date)||null,totalInterruptions:o.reduce((R,I)=>R+(I.interruptions||0),0),averageFocusLevel:o.length>0?o.reduce((R,I)=>R+(I.focusLevel||5),0)/o.length:0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily meditation summary:",n),{date:e.toISOString().split("T")[0],totalSessions:0,completedSessions:0,totalMinutes:0,averageDuration:0,deepStateAchieved:0,deepStateSuccessRate:0,lastSession:null,favoriteSoundscape:"silence",favoriteTime:"morning",moodImprovement:0,sessions:[],hasSessionsToday:!1,mostRecentType:"mindfulness",mostRecentSoundscape:"silence",timeOfLastSession:null,totalInterruptions:0,averageFocusLevel:0,userTimezone:B.getUserTimezone()}}}},t_=["You are capable of amazing things.","You are loved.","You are strong.","You are beautiful.","You are enough.","You are worthy.","You are important.","You are talented.","You are special.","I am capable and strong","I am loved and loving","I am healthy and happy","I am wealthy and wise","Believe in yourself and all that you are.","You are amazing.","You are stronger than you think.","You are braver than you believe.","Every day is a new opportunity.","You are worth it.","You are worthy of all the good things.","You are deserving of love and happiness.","Stay positive, work hard, make it happen.","You are enough just as you are.","You are doing great.","Your potential is limitless.","You are a work of art.","You are doing great.","You are a gift to the world.","Keep going, you are getting there.","You are a masterpiece."],n_="https://createstripecheckoutsession-z5fchdkthq-uc.a.run.app";async function Ba(){const t=SE().currentUser;if(!t){alert("You must be logged in to upgrade.");return}try{console.log("🔧 Starting Stripe upgrade with direct HTTP call"),console.log("👤 User ID:",t.uid),console.log("🌐 Function URL:",n_);const e=await fetch(n_,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t.uid})});if(console.log("📡 Response status:",e.status),console.log("📡 Response headers:",e.headers),!e.ok){const s=await e.text();throw console.error("❌ HTTP error response:",s),new Error(`HTTP error! status: ${e.status}, body: ${s}`)}const n=await e.json();console.log("✅ Function call successful:",n);const{url:r}=n;console.log("🔗 Redirecting to Stripe checkout:",r),window.location.href=r}catch(e){console.error("❌ Error creating Stripe checkout session:",e),console.error("❌ Error details:",e.message),alert("Error creating checkout session. Please try again.")}}function r_(){const t=Math.floor(Math.random()*t_.length);return t_[t]}function qj(){const t=Cu(),{user:e,loading:n,isPremium:r}=on(),[s,i]=P.useState(null),[o,l]=P.useState({workout:{totalMinutes:0,sessions:0,hasWorkoutsToday:!1},meditation:{totalMinutes:0,sessions:0,hasSessionsToday:!1,deepStateAchieved:0},water:{totalOz:0,entries:0,hasWaterToday:!1}}),[u,d]=P.useState(30),[f,m]=P.useState(10),[g,k]=P.useState(64),[N,j]=P.useState(r_()),[R,I]=P.useState(!0),[T,x]=P.useState(!1);if(P.useEffect(()=>{if(!n&&!e){t("/welcome",{replace:!0});return}},[e,n,t]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{I(!0);const _=B.getCurrentLocalTime();console.log("🌍 Dashboard timezone:",B.getUserTimezone()),console.log("📅 Local today:",B.formatLocalDateTime(_));const E=await Ks.getUserProfile(e.uid);i(E.user),d(E.user.exerciseGoalMinutes||30),m(E.user.meditationGoalMinutes||10),k(E.user.waterGoalOz||64),console.log("📊 Fetching workout data for date:",_);const[A,C,S]=await Promise.all([As.getDailyWorkoutSummary(e.uid,_),Cs.getDailyMeditationSummary(e.uid,_),Xt.getDailyWaterIntake(e.uid,_)]);console.log("📊 Raw workout data from Dashboard:",A),console.log("🧘 Raw meditation data:",C),console.log("💧 Raw water data:",S),l({workout:{totalMinutes:A.totalMinutes||0,sessions:A.totalWorkouts||0,hasWorkoutsToday:A.hasWorkoutsToday||A.totalMinutes>0,calories:A.caloriesBurned||0,lastWorkoutType:A.mostCommonType},meditation:{totalMinutes:C.totalMinutes||0,sessions:C.totalSessions||0,hasSessionsToday:C.hasSessionsToday||!1,deepStateAchieved:C.deepStateAchieved||0,moodImprovement:C.moodImprovement||0,lastSessionType:C.mostRecentType},water:{totalOz:S.totalOz||0,entries:S.totalEntries||S.entries||0,hasWaterToday:(S.totalOz||0)>0,averagePerEntry:S.averagePerEntry||0,isOnTrack:(S.totalOz||0)>=(E.user.waterGoalOz||64)*.75}})}catch(_){console.error("Error fetching daily data:",_)}finally{I(!1)}})()},[e]),P.useEffect(()=>{const y=localStorage.getItem("affirmation"),_=localStorage.getItem("affirmationDate"),E=new Date().toISOString().split("T")[0];if(y&&_===E)j(y);else{const A=r_();j(A),localStorage.setItem("affirmation",A),localStorage.setItem("affirmationDate",E)}},[]),P.useEffect(()=>{if(console.log("Trial modal effect running",s),s&&s.subscriptionStatus==="trial_expired"&&s.subscription==="free"){const y=localStorage.getItem("dontRemindTrial"),_=localStorage.getItem("lastTrialReminded");console.log("dontRemindTrial:",y),console.log("lastReminded:",_);const E=1e3*60*60*24*7,A=Date.now();y||(!_||A-Number(_)>E)&&(x(!0),localStorage.setItem("lastTrialReminded",A),console.log("Showing trial modal!"))}},[s]),n||R)return c.jsx("div",{className:"dashboard-loading",children:"Loading..."});if(!e)return c.jsx("div",{className:"dashboard-loading",children:"Redirecting..."});if(!s)return c.jsx("div",{className:"dashboard-loading",children:"Loading user data..."});if(!s.firstName||!s.exerciseGoalMinutes||!s.waterGoalOz||!s.meditationGoalMinutes)return c.jsx("div",{className:"dashboard-loading",children:"Loading user profile..."});const b=Math.min(o.workout.totalMinutes/u*100,100)||0,V=Math.min(o.meditation.totalMinutes/f*100,100)||0,O=Math.min(o.water.totalOz/g*100,100)||0,v=Math.max(u-o.workout.totalMinutes,0);return s.subscriptionStatus==="trial_expired"&&s.subscription,c.jsxs("div",{className:"dashboard-page",children:[c.jsxs("div",{className:"welcome-section",children:[c.jsxs("h1",{children:["Welcome back, ",s.firstName,"!"]}),c.jsx("p",{children:"Here's your wellness progress for today"})]}),c.jsxs("div",{className:"progress-bars",children:[c.jsxs("div",{className:"progress-bar",children:[c.jsx("h2",{children:"💪 Today's Workout"}),c.jsxs("p",{className:"goal-text",children:["Daily Goal: ",u," minutes"]}),c.jsxs("p",{className:"current-text",children:[o.workout.totalMinutes," / ",u," min"]}),c.jsx(Xd,{value:b,text:`${Math.round(b)}%`,styles:Jd({pathColor:`rgba(62, 152, 199, ${Math.max(b/100,.3)})`,textColor:"#3e98c7"})}),c.jsx("div",{className:"daily-stats",children:o.workout.hasWorkoutsToday?c.jsxs("span",{children:["✅ ",o.workout.sessions," workouts logged"]}):c.jsx("span",{children:"No workouts logged today"})}),c.jsx("button",{className:"track-button",onClick:()=>t("/workout"),children:"Log Workout"})]}),c.jsxs("div",{className:"progress-bar",children:[c.jsx("h2",{children:"🧘‍♀️ Today's Meditation"}),c.jsxs("p",{className:"goal-text",children:["Daily Goal: ",f," minutes"]}),c.jsxs("p",{className:"current-text",children:[o.meditation.totalMinutes," / ",f," min"]}),c.jsx(Xd,{value:V,text:`${Math.round(V)}%`,styles:Jd({pathColor:`rgba(138, 43, 226, ${Math.max(V/100,.3)})`,textColor:"#8a2be2"})}),c.jsxs("div",{className:"daily-stats",children:[o.meditation.hasSessionsToday?c.jsxs("span",{children:["✅ ",o.meditation.sessions," sessions completed"]}):c.jsx("span",{children:"No meditation logged today"}),o.meditation.deepStateAchieved>0&&c.jsxs("span",{className:"deep-state",children:["🌟 ",o.meditation.deepStateAchieved," deep states"]})]}),c.jsx("button",{className:"track-button",onClick:()=>t("/meditation"),children:"Start Meditation"})]}),c.jsxs("div",{className:"progress-bar",children:[c.jsx("h2",{children:"💧 Today's Hydration"}),c.jsxs("p",{className:"goal-text",children:["Daily Goal: ",g," oz"]}),c.jsxs("p",{className:"current-text",children:[o.water.totalOz," / ",g," oz"]}),c.jsx(Xd,{value:O,text:`${Math.round(O)}%`,styles:Jd({pathColor:`rgba(30, 144, 255, ${Math.max(O/100,.3)})`,textColor:"#1e90ff"})}),c.jsxs("div",{className:"daily-stats",children:[o.water.hasWaterToday?c.jsxs("span",{children:["✅ ",o.water.entries," water entries"]}):c.jsx("span",{children:"No water logged today"}),o.water.isOnTrack&&c.jsx("span",{className:"on-track",children:"🎯 On track for hydration!"})]}),c.jsx("button",{className:"track-button",onClick:()=>t("/water"),children:"Log Water"})]})]}),v>0&&c.jsx("div",{className:"notification-bar",children:c.jsxs("p",{children:["🔥 You are ",v," minutes away from your daily workout goal!"]})}),b>=100&&V>=100&&O>=100&&c.jsx("div",{className:"celebration-bar",children:c.jsx("p",{children:"🎉 Congratulations! You've achieved all your daily wellness goals! 🎉"})}),c.jsxs("div",{className:"affirmation-bar",children:[c.jsx("p",{children:"🌸 Daily Affirmation 🌸"}),c.jsx("h2",{children:N})]}),c.jsxs("div",{className:"quick-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:o.workout.totalMinutes}),c.jsx("span",{className:"stat-label",children:"Minutes Exercised Today"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:o.water.totalOz}),c.jsx("span",{className:"stat-label",children:"Ounces of Water Today"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:o.meditation.totalMinutes}),c.jsx("span",{className:"stat-label",children:"Minutes Meditated Today"})]})]}),T&&c.jsx("div",{className:"trial-modal-overlay",children:c.jsxs("div",{className:"trial-modal",children:[c.jsx("h2",{children:"Your free trial has ended"}),c.jsx("p",{children:"Upgrade to keep enjoying premium features!"}),c.jsx("button",{className:"primary-button",onClick:Ba,children:"Upgrade with Stripe"}),c.jsxs("div",{className:"trial-modal-actions",children:[c.jsx("button",{className:"secondary-button",onClick:()=>x(!1),children:"Remind me later"}),c.jsx("button",{className:"link-button",onClick:()=>{localStorage.setItem("dontRemindTrial","true"),x(!1)},children:"Don't remind me again"})]})]})})]})}function Hj(){const{user:t}=on(),[e,n]=P.useState([]),[r,s]=P.useState({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),[i,o]=P.useState(!1),[l,u]=P.useState(null),[d,f]=P.useState(!0),[m,g]=P.useState(!1),[k,N]=P.useState(""),j=new Date().toISOString().split("T")[0];P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const v=await As.fetchWorkoutsByUser(t.uid);n(v.workouts||[])}catch(v){console.error("Error fetching workouts:",v),N("Failed to load workouts")}finally{f(!1)}})()},[t]);const R=O=>{const{name:v,value:y}=O.target;s(_=>({..._,[v]:y}))},I=async O=>{if(O.preventDefault(),console.log("🚀 Workout submit started"),console.log("📊 Form data:",r),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),N("Please log in to save workouts");return}if(!r.title||!r.durationMinutes||!r.date){N("Please fill in all required fields");return}try{g(!0),N("");let v;if(r.date){const E=r.date.split("-"),A=parseInt(E[0]),C=parseInt(E[1]),S=parseInt(E[2]),re=new Date;console.log("🔍 Date parsing debug:"),console.log("  Form input:",r.date),console.log("  Split parts:",E),console.log("  Parsed year:",A),console.log("  Parsed month (human readable):",C),console.log("  Parsed day:",S),console.log("  Month for Date constructor (0-indexed):",C-1),v=new Date(A,C-1,S,re.getHours(),re.getMinutes(),re.getSeconds()),console.log("📅 Created date:",v),console.log("📅 Verify - Year:",v.getFullYear()),console.log("📅 Verify - Month (0-indexed):",v.getMonth()),console.log("📅 Verify - Month (human):",v.getMonth()+1),console.log("📅 Verify - Day:",v.getDate()),console.log("📅 Final formatted:",v.toLocaleDateString())}else v=B.getCurrentLocalTime();const y={title:r.title,type:r.type,durationMinutes:parseInt(r.durationMinutes),date:v,notes:r.notes,caloriesBurned:r.caloriesBurned?parseInt(r.caloriesBurned):0};console.log("📝 Final workout data:",y),console.log("📅 Will be saved as:",B.formatLocalDateTime(y.date));let _;if(i&&l?_=await As.updateWorkout(t.uid,l,y):_=await As.logWorkout(t.uid,y),console.log("✅ Workout service result:",_),_.success){console.log("🎉 Workout logged successfully!");const E=await As.fetchWorkoutsByUser(t.uid);n(E.workouts||[]),s({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),o(!1),u(null),N("")}}catch(v){console.error("💥 Workout logging error:",v),N("Failed to save workout. Please try again.")}finally{g(!1)}},T=O=>{var y,_;o(!0),u(O.id);const v=O.date instanceof Date?O.date.toISOString().split("T")[0]:new Date(O.date).toISOString().split("T")[0];s({date:v,durationMinutes:((y=O.durationMinutes)==null?void 0:y.toString())||"",title:O.title||"",type:O.type||"General",notes:O.notes||"",caloriesBurned:((_=O.caloriesBurned)==null?void 0:_.toString())||""})},x=async O=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this workout?"))try{await As.deleteWorkout(t.uid,O),n(v=>v.filter(y=>y.id!==O))}catch(v){console.error("Error deleting workout:",v),N("Failed to delete workout")}},b=()=>{o(!1),u(null),s({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""})},V=e.filter(O=>(O.date instanceof Date?O.date.toISOString().split("T")[0]:new Date(O.date).toISOString().split("T")[0])===j);return d?c.jsx("div",{className:"workout-loading",children:"Loading workouts..."}):c.jsxs("div",{className:"workout-page",children:[c.jsxs("div",{className:"workout-card",children:[c.jsx("h1",{className:"workout-title",children:i?"Edit Workout Session":"Log Workout Session"}),k&&c.jsx("div",{className:"error-message",children:k}),c.jsxs("form",{onSubmit:I,className:"workout-form",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Date",c.jsx("input",{type:"date",name:"date",value:r.date,onChange:R,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Workout Title",c.jsx("input",{type:"text",name:"title",value:r.title,onChange:R,className:"form-input",placeholder:"e.g., Morning Run, Gym Session",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Workout Type",c.jsxs("select",{name:"type",value:r.type,onChange:R,className:"form-input",children:[c.jsx("option",{value:"General",children:"General"}),c.jsx("option",{value:"Cardio",children:"Cardio"}),c.jsx("option",{value:"Strength",children:"Strength Training"}),c.jsx("option",{value:"Yoga",children:"Yoga"}),c.jsx("option",{value:"Running",children:"Running"}),c.jsx("option",{value:"Cycling",children:"Cycling"}),c.jsx("option",{value:"Swimming",children:"Swimming"}),c.jsx("option",{value:"Walking",children:"Walking"}),c.jsx("option",{value:"HIIT",children:"HIIT"}),c.jsx("option",{value:"Other",children:"Other"})]})]})}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Duration / Length (Minutes)",c.jsx("input",{type:"number",name:"durationMinutes",value:r.durationMinutes,onChange:R,className:"form-input",min:"1",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Calories Burned (Optional)",c.jsx("input",{type:"number",name:"caloriesBurned",value:r.caloriesBurned,onChange:R,className:"form-input",min:"0",placeholder:"0"})]})})]}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Notes (Optional)",c.jsx("textarea",{name:"notes",value:r.notes,onChange:R,className:"form-input form-textarea",placeholder:"How did it feel? Any achievements?",rows:"3"})]})}),c.jsxs("div",{className:"form-buttons",children:[c.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Workout":"Log Workout"}),i&&c.jsx("button",{type:"button",className:"cancel-button",onClick:b,disabled:m,children:"Cancel"})]})]})]}),c.jsxs("div",{className:"workout-log",children:[c.jsxs("h2",{className:"log-title",children:["Today's Workouts (",V.length,")"]}),V.length===0?c.jsx("p",{className:"no-workouts",children:"No workouts logged for today. Start your fitness journey!"}):c.jsx("ul",{className:"log-list",children:V.map(O=>c.jsxs("li",{className:"log-item",children:[c.jsxs("div",{className:"workout-info",children:[c.jsx("span",{className:"workout-title-display",children:O.title}),c.jsx("span",{className:"workout-type",children:O.type}),c.jsxs("span",{className:"workout-duration",children:[O.durationMinutes," min"]}),O.caloriesBurned>0&&c.jsxs("span",{className:"workout-calories",children:[O.caloriesBurned," cal"]}),O.notes&&c.jsx("span",{className:"workout-notes",children:O.notes})]}),c.jsxs("div",{className:"workout-actions",children:[c.jsx("button",{onClick:()=>T(O),className:"edit-button",disabled:m,children:"Edit"}),c.jsx("button",{onClick:()=>x(O.id),className:"delete-button",disabled:m,children:"Delete"})]})]},O.id))})]})]})}const Cr={silence:{name:"Silence",description:"Pure silence for traditional meditation",icon:"🤫",neurological:"Promotes introspection and self-awareness",frequency:null,baseFreq:null},pink_noise_rain:{name:"Pink Noise Rain",description:"Synthetic pink noise for deep relaxation",icon:"🌧️",neurological:"Pink noise (1/f) - enhances deep sleep and memory consolidation",frequency:"pink_noise",baseFreq:200,waveType:"sawtooth"},alpha_waves:{name:"Ocean Waves",description:"Realistic ocean waves with alpha wave entrainment",icon:"🌊",neurological:"Ocean rhythms (0.1 Hz) naturally entrain alpha waves (8-12 Hz) for relaxation",frequency:"ocean_waves",waveFrequency:.1,baseFreq:60,highFreq:200,alphaCarrier:200,alphaBeat:10,waveType:"sine"},earth_frequency:{name:"Earth Resonance",description:"Schumann resonance for grounding",icon:"🌲",neurological:"Earth frequency (7.83 Hz) - natural grounding and balance",frequency:"earth_binaural",carrierFreq:136.1,waveType:"sine"},white_noise:{name:"White Noise",description:"Full spectrum noise for focus",icon:"📻",neurological:"White noise - masks distractions, improves concentration",frequency:"white_noise",baseFreq:440,waveType:"square"},gamma_focus:{name:"Gamma Focus",description:"High-frequency binaural beats for peak concentration",icon:"🎧",neurological:"Gamma waves (40 Hz) - heightened awareness and cognitive performance",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},theta_deep:{name:"Theta Deep State",description:"Deep theta waves for profound meditation",icon:"🌙",neurological:"Theta waves (6 Hz) - deep meditation, creativity, and memory consolidation",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},healing_bowls:{name:"Healing Harmonics",description:"432 Hz healing frequency with natural harmonics",icon:"🎵",neurological:'432 Hz "healing frequency" with harmonic overtones for cellular resonance',frequency:"harmonic",baseFreq:432,harmonics:[432,648,864,1296],waveType:"triangle",premium:!0},delta_deep_sleep:{name:"Delta Deep Sleep",description:"0.5-4 Hz for deep sleep and regeneration",icon:"😴",neurological:"Delta waves (0.5-4 Hz) - deep sleep, physical healing, and immune system boost",frequency:"delta",baseFreq:2,binauralBeat:2,leftEar:200,rightEar:202,waveType:"sine",premium:!0},theta_creativity:{name:"Theta Creativity",description:"4-8 Hz for creativity and insight",icon:"🎨",neurological:"Theta waves (4-8 Hz) - enhanced creativity, insight, and problem-solving",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},alpha_relaxation:{name:"Alpha Relaxation",description:"8-12 Hz for relaxation and stress reduction",icon:"😌",neurological:"Alpha waves (8-12 Hz) - relaxation, stress reduction, and improved learning",frequency:"alpha",baseFreq:10,binauralBeat:10,leftEar:200,rightEar:210,waveType:"sine",premium:!0},beta_focus:{name:"Beta Focus",description:"13-30 Hz for focus and alertness",icon:"🎯",neurological:"Beta waves (13-30 Hz) - focused attention, alertness, and cognitive performance",frequency:"beta",baseFreq:20,binauralBeat:20,leftEar:200,rightEar:220,waveType:"sine",premium:!0},gamma_insight:{name:"Gamma Insight",description:"30-100 Hz for insight and peak performance",icon:"💡",neurological:"Gamma waves (30-100 Hz) - insight, peak performance, and heightened awareness",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},anxiety_relief_528:{name:"Anxiety Relief (528 Hz)",description:"528 Hz frequency for anxiety and stress relief",icon:"🧘",neurological:'528 Hz "Love frequency" - reduces anxiety, promotes healing, and DNA repair',frequency:"single_tone",baseFreq:528,waveType:"sine",premium:!0},depression_lift_639:{name:"Depression Lift (639 Hz)",description:"639 Hz frequency for emotional balance",icon:"🌈",neurological:'639 Hz "Connection frequency" - improves relationships, emotional balance, and communication',frequency:"single_tone",baseFreq:639,waveType:"sine",premium:!0},confidence_boost_741:{name:"Confidence Boost (741 Hz)",description:"741 Hz frequency for self-expression and confidence",icon:"💪",neurological:'741 Hz "Expression frequency" - enhances self-expression, confidence, and creativity',frequency:"single_tone",baseFreq:741,waveType:"sine",premium:!0},intuition_852:{name:"Intuition (852 Hz)",description:"852 Hz frequency for intuition and spiritual awareness",icon:"🔮",neurological:'852 Hz "Intuition frequency" - enhances intuition, spiritual awareness, and inner wisdom',frequency:"single_tone",baseFreq:852,waveType:"sine",premium:!0},solfeggio_396:{name:"Liberation (396 Hz)",description:"396 Hz Solfeggio frequency for fear and guilt release",icon:"🕊️",neurological:'396 Hz "Liberation frequency" - releases fear, guilt, and negative emotions',frequency:"single_tone",baseFreq:396,waveType:"sine",premium:!0},solfeggio_417:{name:"Transformation (417 Hz)",description:"417 Hz Solfeggio frequency for change and transformation",icon:"🦋",neurological:'417 Hz "Transformation frequency" - facilitates change, transformation, and new beginnings',frequency:"single_tone",baseFreq:417,waveType:"sine",premium:!0},solfeggio_963:{name:"Awakening (963 Hz)",description:"963 Hz Solfeggio frequency for spiritual awakening",icon:"✨",neurological:'963 Hz "Awakening frequency" - spiritual awakening, connection to higher consciousness',frequency:"single_tone",baseFreq:963,waveType:"sine",premium:!0}},Gl={mindfulness:{name:"Mindfulness",description:"Present-moment awareness practice",duration:[5,10,15,20],icon:"🧘‍♀️"},breathing:{name:"Breathing",description:"Focused breathwork exercises",duration:[3,5,10],icon:"💨"},body_scan:{name:"Body Scan",description:"Progressive muscle relaxation",duration:[10,15,20],icon:"🫁"},loving_kindness:{name:"Loving Kindness",description:"Compassion and heart-opening meditation",duration:[5,10,15],icon:"💖"},flow_state:{name:"Flow State",description:"Neurologically optimized for peak performance",duration:[5,7,10],icon:"🎯",premium:!0}};function fS({children:t,fallback:e,showUpgrade:n=!0,feature:r="this feature",className:s=""}){const{isPremium:i,upgradeToPremium:o}=on();return i?t:e||c.jsx("div",{className:`premium-gate ${s}`,children:c.jsxs("div",{className:"premium-lock",children:[c.jsx("div",{className:"lock-icon",children:"🔒"}),c.jsx("h3",{children:"Premium Feature"}),c.jsxs("p",{children:["Upgrade to unlock ",r]}),n&&c.jsx("button",{onClick:Ba,className:"unlock-button",children:"Upgrade to Premium - $4.99/month"})]})})}function Gj(){const{user:t,isPremium:e}=on(),[n,r]=P.useState([]),[s,i]=P.useState({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),[o,l]=P.useState(!1),[u,d]=P.useState(null),[f,m]=P.useState(!0),[g,k]=P.useState(!1),[N,j]=P.useState(""),[R,I]=P.useState(!1),[T,x]=P.useState(0),[b,V]=P.useState(5),[O,v]=P.useState(!1),[y,_]=P.useState(!1),[E,A]=P.useState("silence");P.useEffect(()=>{console.log("🔍 currentSoundscape changed to:",E)},[E]);const[C,S]=P.useState(""),[re,He]=P.useState(null),[Z,Te]=P.useState(null),[W,Y]=P.useState(null),[ie,Se]=P.useState(null),[ge,Ie]=P.useState(null),[Mt,an]=P.useState(!1),[ln,Lt]=P.useState(!1),mr=P.useRef(null);B.formatLocalDate(new Date),P.useEffect(()=>{(()=>{const F="wakeLock"in navigator;an(F),console.log("🔒 Wake Lock API supported:",F)})()},[]),P.useEffect(()=>{const D=async()=>{if(t!=null&&t.uid)try{m(!0),console.log("🌍 Fetching meditations for timezone:",B.getUserTimezone());const q=((await Cs.fetchMeditationsByUser(t.uid)).meditations||[]).map(X=>({...X,localDate:B.formatLocalDate(X.date),localDateTime:B.formatLocalDateTime(X.date),relativeTime:B.getRelativeTime(X.date),isToday:B.isToday(X.date)}));r(q),console.log("🧘 Loaded meditations with timezone data:",q.length)}catch(F){console.error("Error fetching meditations:",F),j("Failed to load meditation sessions")}finally{m(!1)}};t!=null&&t.uid&&D()},[t]),P.useEffect(()=>(console.log("🎵 Audio effect triggered - isSessionActive:",R,"currentSoundscape:",E),R&&E!=="silence"&&(console.log("🔊 Setting up audio for soundscape:",E),_o()),()=>{if(W)try{Array.isArray(W)?W.forEach(D=>{D.stop&&D.stop()}):W.stop&&W.stop()}catch(D){console.log("Audio cleanup error:",D)}}),[R,E]),P.useEffect(()=>(R&&!O?mr.current=setInterval(()=>{x(D=>{const F=D+1;return F>=180&&!y&&(_(!0),rd()),F})},1e3):clearInterval(mr.current),()=>clearInterval(mr.current)),[R,O,y]),P.useEffect(()=>{R&&T>=b*60&&(console.log("⏰ Timer completed! Auto-stopping session..."),console.log("📊 Final session stats:"),console.log("  - Duration:",Math.floor(T/60),"minutes"),console.log("  - Target:",b,"minutes"),console.log("  - Soundscape:",E),console.log("  - Deep state achieved:",y),console.log("  - Start time:",B.formatLocalDateTime(re)),So(),Ge())},[R,T,b,E,y,re]);const ri=n.filter(D=>D.isToday||B.isToday(D.date));console.log("📋 Today's meditations:",ri.length),P.useEffect(()=>()=>{ys(),mr.current&&clearInterval(mr.current)},[]);const si=async()=>{try{if(!Mt)return console.log("🔒 Wake Lock API not supported, using fallback methods"),!1;const D=await navigator.wakeLock.request("screen");return Ie(D),Lt(!0),console.log("🔒 Wake lock activated"),D.addEventListener("release",()=>{console.log("🔒 Wake lock was released"),Lt(!1),Ie(null)}),!0}catch(D){return console.error("🔒 Failed to request wake lock:",D),!1}},ys=()=>{try{ge&&(ge.release(),Ie(null),Lt(!1),console.log("🔒 Wake lock released"))}catch(D){console.error("🔒 Error releasing wake lock:",D)}},vo=()=>!Mt&&(console.log("🔒 Using fallback keep-awake methods"),Z&&Z.state==="suspended"&&Z.resume(),"vibrate"in navigator)?setInterval(()=>{navigator.vibrate(1)},3e4):null,_o=()=>{try{const D=new(window.AudioContext||window.webkitAudioContext);Te(D);const F=D.createGain();F.connect(D.destination),F.gain.value=.1,Se(F);const q=Cr[E];if(!(q!=null&&q.frequency)){console.log("🔇 Silence selected");return}switch(q.frequency){case"gamma":case"theta":wo(D,F,q);break;case"alpha":Eo(D,F,q);break;case"ocean_waves":al(D,F,q);break;case"earth_binaural":il(D,F,q);break;case"harmonic":nd(D,F,q.harmonics||[q.baseFreq]);break;case"pink_noise":ol(D,F);break;case"white_noise":To(D,F);break;case"single_tone":case"natural":td(D,F,q.baseFreq,q.waveType||"sine");break;default:console.log("🔇 Unknown frequency type:",q.frequency)}}catch(D){console.error("Audio setup failed:",D)}},wo=(D,F,q)=>{const X=D.createOscillator();X.frequency.setValueAtTime(q.leftEar,D.currentTime),X.type=q.waveType||"sine";const ne=D.createOscillator();ne.frequency.setValueAtTime(q.rightEar,D.currentTime),ne.type=q.waveType||"sine";const se=D.createStereoPanner();se.pan.value=-1;const ue=D.createStereoPanner();ue.pan.value=1,X.connect(se),se.connect(F),ne.connect(ue),ue.connect(F),X.start(),ne.start(),Y([X,ne]),console.log(`🎧 Binaural beats: ${q.leftEar}Hz (L) / ${q.rightEar}Hz (R) = ${q.binauralBeat}Hz beat`)},Eo=(D,F,q)=>{const ne=q.baseFreq,se=D.createOscillator();se.frequency.setValueAtTime(200,D.currentTime),se.type=q.waveType||"sine";const ue=D.createOscillator();ue.frequency.setValueAtTime(200+ne,D.currentTime),ue.type=q.waveType||"sine";const nt=D.createStereoPanner();nt.pan.value=-1;const Pe=D.createStereoPanner();Pe.pan.value=1,se.connect(nt),nt.connect(F),ue.connect(Pe),Pe.connect(F),se.start(),ue.start(),Y([se,ue]),console.log(`🌊 Alpha binaural: 200Hz (L) / ${200+ne}Hz (R) = ${ne}Hz beat`)},il=(D,F,q)=>{const X=q.carrierFreq||136.1,ne=7.83,se=D.createOscillator();se.frequency.setValueAtTime(X,D.currentTime),se.type=q.waveType||"sine";const ue=D.createOscillator();ue.frequency.setValueAtTime(X+ne,D.currentTime),ue.type=q.waveType||"sine";const nt=D.createStereoPanner();nt.pan.value=-1;const Pe=D.createStereoPanner();Pe.pan.value=1,se.connect(nt),nt.connect(F),ue.connect(Pe),Pe.connect(F),se.start(),ue.start(),Y([se,ue]),console.log(`🌲 Earth binaural: ${X}Hz (L) / ${X+ne}Hz (R) = ${ne}Hz Schumann beat`)},td=(D,F,q,X="sine")=>{const ne=D.createOscillator();ne.frequency.setValueAtTime(q,D.currentTime),ne.type=X,ne.connect(F),ne.start(),Y(ne),console.log(`🎵 Single tone: ${q}Hz (${X})`)},nd=(D,F,q)=>{const X=q.map(ne=>{const se=D.createOscillator();se.frequency.setValueAtTime(ne,D.currentTime),se.type="triangle";const ue=D.createGain();return ue.gain.value=.3/q.length,se.connect(ue),ue.connect(F),se.start(),se});Y(X),console.log(`🎼 Harmonics: ${q.join(", ")}Hz`)},ol=(D,F)=>{const q=D.sampleRate*2,X=D.createBuffer(1,q,D.sampleRate),ne=X.getChannelData(0);for(let ue=0;ue<q;ue++){let nt=0;for(let Pe=0;Pe<5;Pe++)nt+=(Math.random()*2-1)/Math.pow(2,Pe);ne[ue]=nt*.1}const se=D.createBufferSource();se.buffer=X,se.loop=!0,se.connect(F),se.start(),Y(se),console.log("🌧️ Pink noise generated")},To=(D,F)=>{const q=D.sampleRate*2,X=D.createBuffer(1,q,D.sampleRate),ne=X.getChannelData(0);for(let ue=0;ue<q;ue++)ne[ue]=(Math.random()*2-1)*.1;const se=D.createBufferSource();se.buffer=X,se.loop=!0,se.connect(F),se.start(),Y(se),console.log("📻 White noise generated")},al=(D,F,q)=>{const X=[],ne=D.createOscillator();ne.frequency.setValueAtTime(20,D.currentTime),ne.type="sine";const se=D.createGain();se.gain.value=.4;const ue=D.createOscillator();ue.frequency.setValueAtTime(396,D.currentTime),ue.type="sine";const nt=D.createGain();nt.gain.value=.05;const Pe=D.createOscillator();Pe.frequency.setValueAtTime(.15,D.currentTime),Pe.type="sine";const vs=D.createGain();vs.gain.value=.3,Pe.connect(vs),vs.connect(se.gain),ne.connect(se),se.connect(F),ue.connect(nt),nt.connect(F);const ii=D.createBuffer(1,D.sampleRate*8,D.sampleRate),Tn=ii.getChannelData(0);let oi=0;for(let Ve=0;Ve<Tn.length;Ve++){const Tt=Math.random()*2-1;oi=(oi+Tt*.02)*.99;const rt=Math.sin(Ve*.001)*.3+.7;Tn[Ve]=oi*rt*.5}const Sn=D.createBufferSource();Sn.buffer=ii,Sn.loop=!0;const gr=D.createOscillator();gr.frequency.setValueAtTime(432,D.currentTime),gr.type="triangle";const In=D.createGain();In.gain.value=.08;const yr=D.createBiquadFilter();yr.type="bandpass",yr.frequency.setValueAtTime(300,D.currentTime),yr.Q.setValueAtTime(.8,D.currentTime);const ze=D.createGain();ze.gain.value=.3;const vr=D.createOscillator();vr.frequency.setValueAtTime(.13,D.currentTime),vr.type="triangle";const xn=D.createGain();xn.gain.value=.25,vr.connect(xn),xn.connect(ze.gain),xn.connect(In.gain),Sn.connect(yr),yr.connect(ze),ze.connect(F),gr.connect(In),In.connect(F);const _r=D.createBuffer(1,D.sampleRate*6,D.sampleRate),dl=_r.getChannelData(0);for(let Ve=0;Ve<dl.length;Ve++){let Tt=0;for(let kn=0;kn<3;kn++)Tt+=(Math.random()*2-1)*Math.pow(.5,kn);const rt=Math.random()>.98?(Math.random()*2-1)*.3:0;dl[Ve]=(Tt+rt)*.15}const _s=D.createBufferSource();_s.buffer=_r,_s.loop=!0;const Qt=D.createOscillator();Qt.frequency.setValueAtTime(528,D.currentTime),Qt.type="sine";const ai=D.createGain();ai.gain.value=.06;const li=D.createBiquadFilter();li.type="highpass",li.frequency.setValueAtTime(1500,D.currentTime);const Bn=D.createGain();Bn.gain.value=.12;const wr=D.createOscillator();wr.frequency.setValueAtTime(.5,D.currentTime),wr.type="sine";const Er=D.createGain();if(Er.gain.value=.04,wr.connect(Er),Er.connect(Bn.gain),Er.connect(ai.gain),_s.connect(li),li.connect(Bn),Bn.connect(F),Qt.connect(ai),ai.connect(F),q.alphaCarrier&&q.alphaBeat){const Ve=D.createOscillator();Ve.frequency.setValueAtTime(q.alphaCarrier,D.currentTime),Ve.type="sine";const Tt=D.createOscillator();Tt.frequency.setValueAtTime(q.alphaCarrier+q.alphaBeat,D.currentTime),Tt.type="sine";const rt=D.createGain();rt.gain.value=.03;const kn=D.createStereoPanner();kn.pan.value=-1;const Es=D.createStereoPanner();Es.pan.value=1,Ve.connect(kn),kn.connect(rt),Tt.connect(Es),Es.connect(rt),rt.connect(F),X.push(Ve,Tt),Ve.start(),Tt.start()}const ws=D.createBuffer(1,D.sampleRate*10,D.sampleRate),cn=ws.getChannelData(0);for(let Ve=0;Ve<cn.length;Ve++){let Tt=0;for(let rt=0;rt<4;rt++)Tt+=(Math.random()*2-1)/Math.pow(2,rt*.7);cn[Ve]=Tt*.2}const Tr=D.createBufferSource();Tr.buffer=ws,Tr.loop=!0;const Sr=D.createBiquadFilter();Sr.type="bandpass",Sr.frequency.setValueAtTime(150,D.currentTime),Sr.Q.setValueAtTime(.4,D.currentTime);const Ir=D.createGain();Ir.gain.value=.15;const $n=D.createOscillator();$n.frequency.setValueAtTime(.07,D.currentTime),$n.type="sine";const ci=D.createGain();ci.gain.value=.1,$n.connect(ci),ci.connect(Ir.gain),Tr.connect(Sr),Sr.connect(Ir),Ir.connect(F),ne.start(),ue.start(),Pe.start(),Sn.start(),gr.start(),vr.start(),_s.start(),Qt.start(),wr.start(),Tr.start(),$n.start(),X.push(ne,ue,Pe,Sn,gr,vr,_s,Qt,wr,Tr,$n),Y(X),console.log("🌊✨ Healing Ocean Waves: 396Hz (Liberation) + 432Hz (Earth) + 528Hz (Love) + Alpha binaural beats + Realistic ocean sounds")},rd=()=>{console.log("🌟 Deep state achieved at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Deep State Achieved! 🧘‍♀️",{body:`You've entered a deep meditative state at ${B.formatLocalTime(new Date)}. Well done!`,icon:"/meditation-icon.png"})},So=()=>{console.log("🎉 Session completed at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Meditation Complete! 🎉",{body:`Great job! You completed your ${b}-minute meditation session.`,icon:"/meditation-icon.png"});try{const D=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAcugtTxzD2sLYPs7lkgCBl5gQEDgVs+l4G6tGEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAc=");D.volume=.3,D.play().catch(()=>{})}catch{}},Io=async(D,F,q)=>{const X=B.getCurrentLocalTime();if(console.log("🌍 Starting meditation session in timezone:",B.getUserTimezone()),console.log("🧘 Session start time:",B.formatLocalDateTime(X)),console.log("🎵 Selected soundscape:",q),V(D),x(0),I(!0),v(!1),_(!1),He(X),!await si()){console.log("🔒 Wake lock failed, using fallback methods");const se=vo();se&&(mr.current=se)}"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},ll=()=>{const D=B.getCurrentLocalTime();console.log("⏸️ Session paused at:",B.formatLocalDateTime(D)),v(!O),W&&Z&&(O?Z.resume():Z.suspend())},Ge=async()=>{const D=B.getCurrentLocalTime();if(console.log("⏹️ Session ended at:",B.formatLocalDateTime(D)),console.log("📊 Session duration:",Math.floor(T/60),"minutes"),console.log("🎯 Target duration:",b,"minutes"),console.log("✅ Session completed?",T>=b*60),ys(),W){if(Array.isArray(W))W.forEach(F=>{try{F.stop?F.stop():F.disconnect&&F.disconnect()}catch(q){console.log("Oscillator cleanup:",q)}});else try{W.stop?W.stop():W.disconnect&&W.disconnect()}catch(F){console.log("Oscillator cleanup:",F)}Y(null)}if(Z){try{await Z.close()}catch(F){console.log("AudioContext cleanup:",F)}Te(null)}if(I(!1),v(!1),T>=60){console.log("💾 Auto-logging session (duration >= 1 minute)"),console.log("🔍 Session time check:",T,"seconds"),console.log("🔍 Firebase user:",t==null?void 0:t.uid),console.log("🔍 Session start time:",re);try{await tt(),console.log("✅ Auto-log completed successfully")}catch(F){console.error("❌ Auto-log failed:",F)}}else console.log("⚠️ Session too short, not logging (< 1 minute)");console.log("🔇 Audio stopped and session ended successfully")},tt=async()=>{if(!(!(t!=null&&t.uid)||!re))try{console.log("📝 Auto-logging session with timezone data"),console.log("🧘 Session start time:",B.formatLocalDateTime(re)),console.log("⏰ Session duration:",Math.floor(T/60),"minutes");const D={date:re,durationMinutes:Math.floor(T/60),type:"mindfulness",soundscape:E,completed:T>=b*60,deepStateAchieved:y,moodBefore:C,targetDuration:b,sessionStartTime:re,sessionEndTime:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()};console.log("📊 Session data being saved:",D);const F=await Cs.logMeditation(t.uid,D);console.log("✅ API Response:",F);const q={...F.meditation,localDate:B.formatLocalDate(F.meditation.date),localDateTime:B.formatLocalDateTime(F.meditation.date),relativeTime:B.getRelativeTime(F.meditation.date),isToday:B.isToday(F.meditation.date)};console.log("🔄 Adding meditation to UI:",q),console.log("📅 Is today?",q.isToday),console.log("📅 Local date:",q.localDate),r(X=>{const ne=[q,...X];return console.log("📋 Updated meditations list:",ne.length,"total"),ne}),console.log("✅ Session auto-logged and added to UI successfully")}catch(D){console.error("💥 Error auto-logging session:",D),console.error("💥 Error details:",D.message)}},Kt=D=>{const{name:F,value:q}=D.target;i(X=>({...X,[F]:q}))},cl=async D=>{if(D.preventDefault(),!!(t!=null&&t.uid)){k(!0),j("");try{console.log("🌍 Submitting meditation in timezone:",B.getUserTimezone());const F=s.date?B.toLocalTimezone(s.date):B.getCurrentLocalTime(),q={...s,date:F,durationMinutes:parseInt(s.durationMinutes),userTimezone:B.getUserTimezone()};if(console.log("📝 Meditation submit data:",q),console.log("📅 Local meditation time:",B.formatLocalDateTime(F)),o)await Cs.updateMeditation(t.uid,u,q),r(X=>X.map(ne=>ne.id===u?{...ne,...q,localDate:B.formatLocalDate(F),localDateTime:B.formatLocalDateTime(F),relativeTime:B.getRelativeTime(F),isToday:B.isToday(F)}:ne)),l(!1),d(null),console.log("✅ Meditation updated successfully");else{const X=await Cs.logMeditation(t.uid,q),ne={...X.meditation,localDate:B.formatLocalDate(X.meditation.date),localDateTime:B.formatLocalDateTime(X.meditation.date),relativeTime:B.getRelativeTime(X.meditation.date),isToday:B.isToday(X.meditation.date)};r(se=>[ne,...se]),console.log("✅ Meditation logged successfully")}i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})}catch(F){console.error("Error saving meditation:",F),j(o?"Failed to update meditation":"Failed to log meditation")}finally{k(!1)}}},ul=D=>{var F;console.log("✏️ Editing meditation from:",B.formatLocalDateTime(D.date)),i({date:B.formatLocalDate(D.date),durationMinutes:((F=D.durationMinutes)==null?void 0:F.toString())||"",type:D.type||"mindfulness",soundscape:D.soundscape||"silence",moodBefore:D.moodBefore||"",moodAfter:D.moodAfter||"",notes:D.notes||""}),l(!0),d(D.id)},sd=async D=>{if(!(t!=null&&t.uid))return;const F=n.find(X=>X.id===D),q=`Are you sure you want to delete the meditation session from ${(F==null?void 0:F.localDateTime)||"unknown time"}?`;if(window.confirm(q))try{await Cs.deleteMeditation(t.uid,D),r(X=>X.filter(ne=>ne.id!==D)),console.log("🗑️ Meditation deleted successfully")}catch(X){console.error("Error deleting meditation:",X),j("Failed to delete meditation")}},pr=D=>{const F=Math.floor(D/60),q=D%60;return`${F}:${q.toString().padStart(2,"0")}`};return f?c.jsxs("div",{className:"meditation-loading",children:[c.jsx("p",{children:"Loading meditations..."}),c.jsxs("small",{children:["Timezone: ",B.getUserTimezone()]})]}):c.jsxs("div",{className:"meditation-page",children:[R&&c.jsxs("div",{className:"session-interface",children:[c.jsxs("div",{className:"session-header",children:[c.jsx("h2",{children:"🧘‍♀️ Meditation Session"}),c.jsxs("div",{className:"session-info",children:[c.jsxs("div",{className:"session-soundscape",children:[Cr[E].icon," ",Cr[E].name]}),c.jsxs("div",{className:"session-time-info",children:["Started: ",re?B.formatLocalTime(re):"Now",c.jsx("br",{}),c.jsx("small",{children:B.getUserTimezone()})]}),c.jsx("div",{className:"wake-lock-status",children:ln?c.jsx("span",{className:"wake-lock-active",title:"Screen will stay awake during meditation",children:"🔒 Screen Awake"}):Mt?c.jsx("span",{className:"wake-lock-inactive",title:"Screen may sleep during meditation",children:"⚠️ Screen May Sleep"}):c.jsx("span",{className:"wake-lock-unsupported",title:"Wake lock not supported on this device",children:"📱 Using Fallback"})})]})]}),c.jsxs("div",{className:"session-timer",children:[c.jsxs("div",{className:"time-display",children:[c.jsx("span",{className:"current-time",children:pr(T)}),c.jsxs("span",{className:"target-time",children:["/ ",pr(b*60)]})]}),c.jsx("div",{className:"progress-ring",children:c.jsx("div",{className:"meditation-progress-fill",style:{background:`conic-gradient(#4CAF50 ${T/(b*60)*360}deg, #eee 0deg)`}})})]}),c.jsxs("div",{className:"session-status",children:[y&&c.jsxs("div",{className:"deep-state-indicator",children:["✨ Deep State Achieved at ",B.formatLocalTime(new Date)," ✨"]}),c.jsx("div",{className:"neurological-info",children:c.jsx("p",{children:Cr[E].neurological})})]}),c.jsxs("div",{className:"session-controls",children:[c.jsxs("button",{onClick:ll,className:"pause-btn",children:[O?"▶️":"⏸️"," ",O?"Resume":"Pause"]}),c.jsx("button",{onClick:Ge,className:"stop-btn",children:"⏹️ End Session"})]})]}),!R&&c.jsxs("div",{className:"quick-start",children:[c.jsx("h1",{className:"meditation-title",children:"🧘‍♀️ Meditation Studio"}),c.jsxs("p",{className:"subtitle",children:["Neurologically optimized for deep meditation states",c.jsx("br",{})]}),c.jsxs("div",{className:"soundscape-section",children:[c.jsx("h3",{children:"🎵 Step 1: Choose Your Soundscape"}),c.jsx("div",{className:"soundscape-instructions",children:c.jsx("p",{children:"Select a soundscape below (or choose silence for quiet meditation). Click again to deselect."})}),c.jsx("div",{className:"soundscape-grid",children:Object.entries(Cr).map(([D,F])=>c.jsxs("div",{className:`soundscape-option ${F.premium?"premium":""} ${E===D?"selected":""} ${F.premium&&!e?"locked":""}`,children:[c.jsxs("div",{className:"soundscape-header",children:[c.jsx("span",{className:"soundscape-icon",children:F.icon}),F.premium&&!e&&c.jsx("span",{className:"premium-badge",children:"PRO"})]}),c.jsxs("div",{className:"soundscape-content",onClick:q=>{q.stopPropagation(),q.preventDefault(),console.log("🎵 Soundscape clicked:",D,"current selection:",E),!F.premium||e?E===D?(console.log("🔇 Deselecting soundscape to silence"),A("silence")):(console.log("🔊 Selecting soundscape:",D),A(D)):alert("This soundscape requires Clarity Premium. Upgrade to access premium features!")},children:[c.jsx("h4",{children:F.name}),c.jsx("p",{className:"soundscape-description",children:F.description}),c.jsx("small",{className:"neurological-note",children:F.neurological})]}),F.premium&&!e&&c.jsx("div",{className:"premium-overlay",children:c.jsx("span",{className:"lock-icon",children:"🔒"})})]},D))})]}),c.jsxs("div",{className:"quick-start-grid",children:[c.jsx("h3",{children:"⏰ Step 2: Choose Your Session"}),Object.entries(Gl).map(([D,F])=>c.jsxs("div",{className:`meditation-type ${F.premium?"premium":""}`,children:[c.jsxs("div",{className:"type-header",children:[c.jsx("span",{className:"type-icon",children:F.icon}),c.jsx("h3",{children:F.name}),F.premium&&!e&&c.jsx("span",{className:"premium-badge",children:"PRO"})]}),c.jsx("p",{className:"type-description",children:F.description}),c.jsx("div",{className:"duration-options",children:F.duration.map(q=>c.jsxs("button",{onClick:()=>{C||S(prompt("How are you feeling right now? (😊😔😴😤😌🤔🎉😰)")||"😐"),Io(q,D,E)},className:"duration-btn",disabled:F.premium&&!e,children:[q,"min"]},q))})]},D))]})]}),!R&&c.jsxs("div",{className:"meditation-card",children:[c.jsx("h2",{className:"form-title",children:o?"Edit Meditation Session":"Manually Log Session"}),N&&c.jsx("div",{className:"error-message",children:N}),c.jsxs("form",{onSubmit:cl,className:"meditation-form",children:[c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Date (",B.getUserTimezone(),")",c.jsx("input",{type:"date",name:"date",value:s.date,onChange:Kt,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Duration (Minutes)",c.jsx("input",{type:"number",name:"durationMinutes",value:s.durationMinutes,onChange:Kt,className:"form-input",min:"1",required:!0})]})})]}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Meditation Type",c.jsx("select",{name:"type",value:s.type,onChange:Kt,className:"form-input",children:Object.entries(Gl).map(([D,F])=>c.jsx("option",{value:D,children:F.name},D))})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Soundscape Used",c.jsx("select",{name:"soundscape",value:s.soundscape,onChange:Kt,className:"form-input",children:Object.entries(Cr).map(([D,F])=>c.jsx("option",{value:D,children:F.name},D))})]})})]}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Mood Before",c.jsxs("select",{name:"moodBefore",value:s.moodBefore,onChange:Kt,className:"form-input",children:[c.jsx("option",{value:"",children:"Select mood..."}),c.jsx("option",{value:"😊",children:"😊 Happy"}),c.jsx("option",{value:"😔",children:"😔 Sad"}),c.jsx("option",{value:"😴",children:"😴 Tired"}),c.jsx("option",{value:"😤",children:"😤 Frustrated"}),c.jsx("option",{value:"😌",children:"😌 Peaceful"}),c.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),c.jsx("option",{value:"🎉",children:"🎉 Excited"}),c.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Mood After",c.jsxs("select",{name:"moodAfter",value:s.moodAfter,onChange:Kt,className:"form-input",children:[c.jsx("option",{value:"",children:"Select mood..."}),c.jsx("option",{value:"😊",children:"😊 Happy"}),c.jsx("option",{value:"😔",children:"😔 Sad"}),c.jsx("option",{value:"😴",children:"😴 Tired"}),c.jsx("option",{value:"😤",children:"😤 Frustrated"}),c.jsx("option",{value:"😌",children:"😌 Peaceful"}),c.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),c.jsx("option",{value:"🎉",children:"🎉 Excited"}),c.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})})]}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Notes (Optional)",c.jsx("textarea",{name:"notes",value:s.notes,onChange:Kt,className:"form-input form-textarea",placeholder:"How did the session feel? Any insights?",rows:"3"})]})}),c.jsxs("div",{className:"form-buttons",children:[c.jsx("button",{type:"submit",className:"log-button",disabled:g,children:g?o?"Updating...":"Logging...":o?"Update Session":"Log Session"}),o&&c.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{l(!1),d(null),i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})},disabled:g,children:"Cancel"})]})]})]}),!R&&c.jsxs("div",{className:"meditation-log",children:[c.jsxs("h2",{className:"log-title",children:["Today's Sessions (",ri.length,")",c.jsx("br",{}),c.jsxs("small",{children:[B.formatLocalDate(new Date)," - ",B.getUserTimezone()]})]}),ri.length===0?c.jsxs("p",{className:"no-sessions",children:["No meditation sessions today. Start your mindfulness journey!",c.jsx("br",{}),c.jsxs("small",{children:["Local time: ",B.formatLocalDateTime(new Date)]})]}):c.jsx("ul",{className:"log-list",children:ri.map(D=>{var F,q,X,ne;return c.jsxs("li",{className:"log-item",children:[c.jsxs("div",{className:"meditation-info",children:[c.jsxs("div",{className:"meditation-header",children:[c.jsxs("span",{className:"meditation-type",children:[(F=Gl[D.type])==null?void 0:F.icon," ",((q=Gl[D.type])==null?void 0:q.name)||D.type]}),c.jsxs("span",{className:"meditation-time",children:[D.localDateTime,c.jsxs("small",{children:[" (",D.relativeTime,")"]})]})]}),c.jsxs("div",{className:"meditation-details",children:[c.jsxs("span",{className:"meditation-duration",children:[D.durationMinutes," min"]}),c.jsxs("span",{className:"meditation-soundscape",children:[(X=Cr[D.soundscape])==null?void 0:X.icon," ",(ne=Cr[D.soundscape])==null?void 0:ne.name]}),D.deepStateAchieved&&c.jsx("span",{className:"deep-state-badge",children:"✨ Deep State"}),D.moodBefore&&D.moodAfter&&c.jsxs("span",{className:"mood-change",children:[D.moodBefore," → ",D.moodAfter]})]}),D.notes&&c.jsx("div",{className:"meditation-notes",children:D.notes})]}),c.jsxs("div",{className:"meditation-actions",children:[c.jsx("button",{onClick:()=>ul(D),className:"edit-button",disabled:g,children:"Edit"}),c.jsx("button",{onClick:()=>sd(D.id),className:"delete-button",disabled:g,children:"Delete"})]})]},D.id)})})]}),!R&&c.jsxs("div",{className:"recommended-videos",children:[c.jsx("h2",{className:"recommended-title",children:"🎥 Guided Meditation Videos"}),c.jsxs("p",{className:"timezone-note",children:["Perfect for any time of day in ",B.getUserTimezone()]}),c.jsxs("div",{className:"video-tiles",children:[c.jsxs("a",{href:"https://www.youtube.com/watch?v=VpHz8Mb13_Y",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[c.jsx("div",{className:"video-thumbnail",children:"🌸"}),c.jsx("p",{className:"video-title",children:"Relaxation and Positivity"})]}),c.jsxs("a",{href:"https://www.youtube.com/watch?v=CqnWMPuyT0g",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[c.jsx("div",{className:"video-thumbnail",children:"💖"}),c.jsx("p",{className:"video-title",children:"Self Love"})]}),c.jsxs("a",{href:"https://www.youtube.com/watch?v=056qll-07ak",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[c.jsx("div",{className:"video-thumbnail",children:"🧠"}),c.jsx("p",{className:"video-title",children:"Stop Thinking"})]})]})]}),c.jsx(fS,{feature:"exclusive meditation experiences",children:c.jsxs("div",{className:"premium-meditation-features",children:[c.jsx("h3",{children:"🧘‍♀️ Premium Meditation Experience"}),c.jsx("p",{children:"Unlock advanced features designed by neuroscientists:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"🎵 Premium binaural soundscapes"}),c.jsx("li",{children:"📊 Advanced session analytics"}),c.jsx("li",{children:"🧠 Personalized meditation recommendations"}),c.jsx("li",{children:"⏰ Smart session reminders based on your timezone"}),c.jsx("li",{children:"📈 Mood tracking and insights"})]})]})})]})}function Kj(){const{user:t}=on(),[e,n]=P.useState([]),[r,s]=P.useState({date:"",amount:"",type:"water",notes:""}),[i,o]=P.useState(!1),[l,u]=P.useState(null),[d,f]=P.useState(!0),[m,g]=P.useState(!1),[k,N]=P.useState(""),[j,R]=P.useState(0),[I,T]=P.useState(64),x=new Date().toISOString().split("T")[0];P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const S=await Xt.fetchWaterIntakeByUser(t.uid);n(S.waterIntakes||[]);const re=await Xt.getTodayWaterIntake(t.uid);R(re.totalOz||0),T(64)}catch(S){console.error("Error fetching water data:",S),N("Failed to load water intake data")}finally{f(!1)}})()},[t]);const b=C=>{const{name:S,value:re}=C.target;s(He=>({...He,[S]:re}))},V=async C=>{if(C.preventDefault(),console.log("💧 Water submit started"),console.log("📊 Form data:",r),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),N("Please log in to save water intake");return}if(!r.amount||!r.date){N("Please fill in all required fields");return}try{g(!0),N("");let S;if(r.date){const Z=r.date.split("-"),Te=parseInt(Z[0]),W=parseInt(Z[1]),Y=parseInt(Z[2]),ie=new Date;console.log("🔍 Water date parsing debug:"),console.log("  Form input:",r.date),console.log("  Split parts:",Z),console.log("  Parsed year:",Te),console.log("  Parsed month (human readable):",W),console.log("  Parsed day:",Y),console.log("  Month for Date constructor (0-indexed):",W-1),S=new Date(Te,W-1,Y,ie.getHours(),ie.getMinutes(),ie.getSeconds()),console.log("📅 Created water date:",S),console.log("📅 Verify - Year:",S.getFullYear()),console.log("📅 Verify - Month (0-indexed):",S.getMonth()),console.log("📅 Verify - Month (human):",S.getMonth()+1),console.log("📅 Verify - Day:",S.getDate()),console.log("📅 Final formatted:",S.toLocaleDateString())}else S=new Date;const re={date:S,amount:parseFloat(r.amount),type:r.type,notes:r.notes};if(console.log("💧 Final water data:",re),console.log("📅 Will be saved as:",re.date.toLocaleDateString()),i)await Xt.updateWaterIntake(t.uid,l,re),n(Z=>Z.map(Te=>Te.id===l?{...Te,...re}:Te)),o(!1),u(null);else{const Z=await Xt.logWaterIntake(t.uid,re);n(Te=>[Z.waterIntake,...Te])}const He=await Xt.getTodayWaterIntake(t.uid);R(He.totalOz||0),s({date:"",amount:"",type:"water",notes:""}),console.log("✅ Water intake logged successfully!")}catch(S){console.error("💥 Water logging error:",S),N(i?"Failed to update water intake":"Failed to log water intake")}finally{g(!1)}},O=C=>{var re;o(!0),u(C.id);const S=C.date instanceof Date?C.date.toISOString().split("T")[0]:new Date(C.date).toISOString().split("T")[0];s({date:S,amount:((re=C.amount)==null?void 0:re.toString())||"",type:C.type||"water",notes:C.notes||""})},v=async C=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this water intake?"))try{await Xt.deleteWaterIntake(t.uid,C),n(re=>re.filter(He=>He.id!==C));const S=await Xt.getTodayWaterIntake(t.uid);R(S.totalOz||0)}catch(S){console.error("Error deleting water intake:",S),N("Failed to delete water intake")}},y=()=>{o(!1),u(null),s({date:"",amount:"",type:"water",notes:""})},_=async C=>{if(t!=null&&t.uid)try{g(!0);const S=new Date,re=new Date(S.getFullYear(),S.getMonth(),S.getDate(),S.getHours(),S.getMinutes(),S.getSeconds());console.log("💧 Quick add date:",re),console.log("📅 Quick add formatted:",re.toLocaleDateString()),await Xt.logWaterIntake(t.uid,{date:re,amount:C,type:"water",notes:""});const He=await Xt.fetchWaterIntakeByUser(t.uid);n(He.waterIntakes||[]);const Z=await Xt.getTodayWaterIntake(t.uid);R(Z.totalOz||0),console.log("✅ Quick add water successful!")}catch(S){console.error("💥 Error quick adding water:",S),N("Failed to log water intake")}finally{g(!1)}},E=e.filter(C=>{const S=C.date instanceof Date?C.date.toISOString().split("T")[0]:new Date(C.date).toISOString().split("T")[0];return console.log("🔍 Comparing dates:",{waterDate:S,today:x,match:S===x}),S===x}),A=Math.min(j/I*100,100);return d?c.jsx("div",{className:"water-loading",children:"Loading water data..."}):c.jsxs("div",{className:"water-page",children:[c.jsxs("div",{className:"water-progress",children:[c.jsx("h2",{children:"Daily Hydration Progress"}),c.jsx("div",{className:"progress-info",children:c.jsx("div",{className:"water-progress-bar",children:c.jsx("div",{className:"water-progress-fill",style:{width:`${A}%`}})})}),j>=I&&c.jsx("div",{className:"goal-achieved",children:"🎉 Daily goal achieved! Great job! 🎉"})]}),c.jsxs("div",{className:"quick-add-section",children:[c.jsx("h3",{children:"Quick Add"}),c.jsxs("div",{className:"quick-add-buttons",children:[c.jsxs("button",{onClick:()=>_(8),className:"quick-add-btn",disabled:m,children:["8 oz",c.jsx("br",{}),c.jsx("small",{children:"Glass"})]}),c.jsxs("button",{onClick:()=>_(16),className:"quick-add-btn",disabled:m,children:["16 oz",c.jsx("br",{}),c.jsx("small",{children:"Bottle"})]}),c.jsxs("button",{onClick:()=>_(20),className:"quick-add-btn",disabled:m,children:["20 oz",c.jsx("br",{}),c.jsx("small",{children:"Large Bottle"})]}),c.jsxs("button",{onClick:()=>_(32),className:"quick-add-btn",disabled:m,children:["32 oz",c.jsx("br",{}),c.jsx("small",{children:"Large Cup"})]})]})]}),c.jsxs("div",{className:"water-card",children:[c.jsx("h1",{className:"water-title",children:i?"Edit Water Intake":"Log Water Intake"}),k&&c.jsx("div",{className:"error-message",children:k}),c.jsxs("form",{onSubmit:V,className:"water-form",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Date",c.jsx("input",{type:"date",name:"date",value:r.date,onChange:b,className:"form-input",required:!0})]})}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Amount (oz)",c.jsx("input",{type:"number",name:"amount",value:r.amount,onChange:b,className:"form-input",min:"0.1",step:"0.1",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Drink Type",c.jsxs("select",{name:"type",value:r.type,onChange:b,className:"form-input",children:[c.jsx("option",{value:"water",children:"Water"}),c.jsx("option",{value:"tea",children:"Tea"}),c.jsx("option",{value:"coffee",children:"Coffee"}),c.jsx("option",{value:"juice",children:"Juice"}),c.jsx("option",{value:"sports_drink",children:"Sports Drink"}),c.jsx("option",{value:"other",children:"Other"})]})]})})]}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Notes (Optional)",c.jsx("input",{type:"text",name:"notes",value:r.notes,onChange:b,className:"form-input",placeholder:"e.g., with lemon, iced, etc."})]})}),c.jsxs("div",{className:"form-buttons",children:[c.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Intake":"Log Water"}),i&&c.jsx("button",{type:"button",className:"cancel-button",onClick:y,disabled:m,children:"Cancel"})]})]})]}),c.jsxs("div",{className:"water-log",children:[c.jsxs("h2",{className:"log-title",children:["Today's Water Intake (",E.length," entries)"]}),E.length===0?c.jsx("p",{className:"no-intake",children:"No water logged for today. Stay hydrated! 💧"}):c.jsx("ul",{className:"log-list",children:E.map(C=>c.jsxs("li",{className:"log-item",children:[c.jsxs("div",{className:"water-info",children:[c.jsxs("span",{className:"water-amount",children:[C.amount," oz"]}),c.jsx("span",{className:"water-type",children:C.type}),C.notes&&c.jsx("span",{className:"water-notes",children:C.notes})]}),c.jsxs("div",{className:"water-actions",children:[c.jsx("button",{onClick:()=>O(C),className:"edit-button",disabled:m,children:"Edit"}),c.jsx("button",{onClick:()=>v(C.id),className:"delete-button",disabled:m,children:"Delete"})]})]},C.id))})]})]})}function Qj(){const{user:t,isPremium:e}=on(),[n,r]=P.useState({workout:{current:0,goal:210},water:{current:0,goal:448},meditation:{current:0,goal:105}}),[s,i]=P.useState([]),[o,l]=P.useState(0),[u,d]=P.useState(!0),[f,m]=P.useState(30),[g,k]=P.useState(64),[N,j]=P.useState(15),R=()=>{const y=new Date().getDay();return y===0?0:7-y};P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{d(!0),console.log("🌍 Goals timezone:",B.getUserTimezone());const[y,_,E]=await Promise.all([As.getWorkoutSummary(t.uid,7),Xt.getWaterSummary(t.uid,7),Cs.getMeditationSummary(t.uid,7)]);console.log("📊 Weekly data fetched:",{workoutData:y,waterData:_,meditationData:E}),r({workout:{current:y.totalMinutes||0,goal:210},water:{current:_.totalOz||0,goal:448},meditation:{current:E.totalMinutes||0,goal:105}}),setTimeout(()=>I(),100)}catch(y){console.error("Error fetching weekly data:",y)}finally{d(!1)}})()},[t]);const I=()=>{const v=[];Object.entries(n).forEach(([y,_])=>{const E=_.current/_.goal*100;E>=125?v.push({type:y,level:"diamond",percentage:E}):E>=100?v.push({type:y,level:"gold",percentage:E}):E>=75?v.push({type:y,level:"silver",percentage:E}):E>=50&&v.push({type:y,level:"bronze",percentage:E})}),i(v)},T=v=>{switch(v){case"diamond":return"💎";case"gold":return"🥇";case"silver":return"🥈";case"bronze":return"🥉";default:return"⭐"}},x=v=>v>=100?"var(--sage-500)":v>=75?"var(--mint)":v>=50?"#FFD700":"var(--sage-300)",b=v=>v>=100,V=async()=>{if(t!=null&&t.uid)try{d(!0);const v=f*7,y=g*7,_=N*7,E=await Ks.updateUserProfile(t.uid,{exerciseGoalMinutes:f,meditationGoalMinutes:N,waterGoalOz:g});r(A=>({...A,workout:{...A.workout,goal:v},water:{...A.water,goal:y},meditation:{...A.meditation,goal:_}})),setTimeout(()=>I(),100),console.log("✅ Goals updated successfully")}catch(v){console.error("❌ Error updating goals:",v)}finally{d(!1)}};if(u)return c.jsx("div",{className:"goals-loading",children:"Loading weekly goals..."});const O=R();return c.jsxs("div",{className:"goals-page",children:[c.jsxs("div",{className:"weekly-header",children:[c.jsx("h1",{className:"goals-title",children:"Weekly Goals"}),c.jsx("p",{className:"goals-subtitle",children:"Track your progress and earn rewards"}),c.jsxs("div",{className:"week-info",children:[c.jsx("span",{className:"week-label",children:"Current Week"}),c.jsx("span",{className:"days-remaining",children:O===0?"Last day!":`${O} days remaining`})]})]}),c.jsx("div",{className:"weekly-progress",children:Object.entries(n).map(([v,y])=>{const _=Math.min(y.current/y.goal*100,100),E=b(_),A=2*Math.PI*45,C=A,S=A-_/100*A;return c.jsxs("div",{className:`weekly-ring ${E?"completed":""}`,children:[c.jsxs("div",{className:"ring-container",children:[c.jsxs("svg",{className:"progress-ring",width:"120",height:"120",children:[c.jsx("circle",{className:"ring-background",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:"var(--sage-100)",strokeWidth:"8"}),c.jsx("circle",{className:"ring-progress",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:x(_),strokeWidth:"8",strokeLinecap:"round",strokeDasharray:C,strokeDashoffset:S,transform:"rotate(-90 60 60)"})]}),c.jsxs("div",{className:"ring-content",children:[c.jsx("span",{className:"ring-value",children:y.current}),c.jsxs("span",{className:"ring-goal",children:["/ ",y.goal]}),c.jsx("span",{className:"ring-label",children:v})]})]}),c.jsxs("div",{className:"ring-percentage",children:[Math.round(_),"%"]})]},v)})}),c.jsxs("div",{className:"achievement-gallery",children:[c.jsx("h2",{className:"section-title",children:"This Week's Achievements"}),s.length===0?c.jsxs("div",{className:"no-achievements",children:[c.jsx("span",{className:"no-achievement-icon",children:"🎯"}),c.jsx("p",{children:"Keep going! Your first achievement is waiting."})]}):c.jsx("div",{className:"achievements-grid",children:s.map((v,y)=>c.jsxs("div",{className:`achievement-card ${v.level}`,children:[c.jsx("div",{className:"achievement-icon",children:T(v.level)}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:v.level.toUpperCase()}),c.jsx("p",{children:v.type.toUpperCase()}),c.jsxs("span",{className:"achievement-percentage",children:[Math.round(v.percentage),"%"]})]}),!e&&v.level==="diamond"&&c.jsx("div",{className:"premium-overlay",children:c.jsx("span",{className:"premium-badge",children:"PRO"})})]},y))})]}),c.jsxs("div",{className:"streak-section",children:[c.jsx("h2",{className:"section-title",children:"Weekly Streak"}),c.jsxs("div",{className:"streak-card",children:[c.jsx("div",{className:"streak-icon",children:"🔥"}),c.jsxs("div",{className:"streak-info",children:[c.jsx("span",{className:"streak-number",children:o}),c.jsx("span",{className:"streak-label",children:"Week Streak"})]}),c.jsxs("div",{className:"streak-next",children:[c.jsx("span",{children:"Next reward at 4 weeks"}),!e&&c.jsx("span",{className:"premium-hint",children:"PRO"})]})]})]}),c.jsxs("div",{className:"reward-marketplace",children:[c.jsx("h2",{className:"section-title",children:"Reward Marketplace"}),e?c.jsxs("div",{className:"rewards-grid",children:[c.jsxs("div",{className:"reward-item",children:[c.jsx("div",{className:"reward-icon",children:"🎵"}),c.jsxs("div",{className:"reward-info",children:[c.jsx("h4",{children:"Premium Soundscape"}),c.jsx("p",{children:"Unlock for 1 week"}),c.jsx("span",{className:"reward-cost",children:"50 points"})]})]}),c.jsxs("div",{className:"reward-item",children:[c.jsx("div",{className:"reward-icon",children:"📱"}),c.jsxs("div",{className:"reward-info",children:[c.jsx("h4",{children:"Custom Badge"}),c.jsx("p",{children:"Design your own"}),c.jsx("span",{className:"reward-cost",children:"100 points"})]})]})]}):c.jsxs("div",{className:"premium-cta-card",children:[c.jsxs("div",{className:"cta-header",children:[c.jsx("h3",{children:"Unlock Premium Rewards"}),c.jsx("span",{className:"cta-price",children:"$4.99/month"})]}),c.jsxs("div",{className:"premium-features",children:[c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"💎"}),c.jsx("span",{children:"Exclusive Diamond badges"})]}),c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"🎯"}),c.jsx("span",{children:"Custom goal setting"})]}),c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"📊"}),c.jsx("span",{children:"Advanced analytics"})]}),c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"🏆"}),c.jsx("span",{children:"Challenge competitions"})]})]}),c.jsx("button",{className:"upgrade-button",onClick:Ba,children:"Upgrade with Stripe"})]})]}),c.jsxs("div",{className:"weekly-challenges",children:[c.jsx("h2",{className:"section-title",children:"Weekly Challenges"}),c.jsxs("div",{className:"challenge-card",children:[c.jsxs("div",{className:"challenge-header",children:[c.jsx("h3",{children:"Mindful Monday"}),c.jsx("span",{className:"challenge-reward",children:"+50 points"})]}),c.jsx("p",{className:"challenge-description",children:"Complete 3 meditation sessions this week"}),c.jsxs("div",{className:"challenge-progress",children:[c.jsx("div",{className:"challenge-bar",children:c.jsx("div",{className:"challenge-fill",style:{width:"33%"}})}),c.jsx("span",{className:"challenge-status",children:"1/3 completed"})]}),!e&&c.jsx("div",{className:"challenge-premium",children:c.jsx("span",{children:"Join Premium for exclusive challenges"})})]})]}),c.jsxs("div",{className:"custom-goals-section",children:[c.jsx("h2",{className:"section-title",children:"Goal Customization"}),c.jsxs("div",{className:"custom-goals-form",children:[c.jsxs("div",{className:"goal-slider",children:[c.jsxs("label",{children:["Daily Workout Goal: ",f," minutes"]}),c.jsx("input",{type:"range",min:"15",max:"120",value:f,onChange:v=>m(parseInt(v.target.value)),className:"goal-range"}),c.jsxs("span",{children:["Weekly Goal: ",f*7," minutes"]})]}),c.jsxs("div",{className:"goal-slider",children:[c.jsxs("label",{children:["Daily Water Goal: ",g," oz"]}),c.jsx("input",{type:"range",min:"32",max:"128",value:g,onChange:v=>k(parseInt(v.target.value)),className:"goal-range"}),c.jsxs("span",{children:["Weekly Goal: ",g*7," oz"]})]}),c.jsxs("div",{className:"goal-slider",children:[c.jsxs("label",{children:["Daily Meditation Goal: ",N," minutes"]}),c.jsx("input",{type:"range",min:"5",max:"60",value:N,onChange:v=>j(parseInt(v.target.value)),className:"goal-range"}),c.jsxs("span",{children:["Weekly Goal: ",N*7," minutes"]})]}),c.jsx("button",{className:"save-goals-btn",onClick:V,disabled:u,children:u?"Saving...":"Save Custom Goals"})]})]}),c.jsxs("div",{className:"premium-challenges",children:[c.jsx("h2",{className:"section-title",children:"Exclusive Challenges"}),c.jsx(fS,{feature:"premium challenges",className:"feature-tease",children:c.jsxs("div",{className:"challenge-preview",children:[c.jsxs("div",{className:"challenge-card premium",children:[c.jsxs("div",{className:"challenge-header",children:[c.jsx("h3",{children:"💎 Diamond Week Challenge"}),c.jsx("span",{className:"challenge-reward",children:"+200 points"})]}),c.jsx("p",{children:"Complete 125% of all goals for 7 consecutive days"}),c.jsx("div",{className:"challenge-participants",children:c.jsx("span",{children:"🏆 1,247 participants this week"})})]}),c.jsxs("div",{className:"challenge-card premium",children:[c.jsxs("div",{className:"challenge-header",children:[c.jsx("h3",{children:"🎯 Perfect Balance"}),c.jsx("span",{className:"challenge-reward",children:"+150 points"})]}),c.jsx("p",{children:"Hit exactly 100% on all three goals in one day"}),c.jsx("div",{className:"challenge-participants",children:c.jsx("span",{children:"🎉 892 members completed"})})]})]})})]})]})}function Yj(){const{user:t,loading:e,isPremium:n,userSubscription:r,trialDaysRemaining:s,upgradeToPremium:i,cancelSubscription:o}=on(),[l,u]=P.useState(null),[d,f]=P.useState({username:"",email:"",firstName:"",lastName:"",exerciseGoalMinutes:"",waterGoalOz:"",meditationGoalMinutes:""}),[m,g]=P.useState(!0),[k,N]=P.useState(!1),[j,R]=P.useState(""),[I,T]=P.useState("");P.useEffect(()=>{const O=async()=>{if(t!=null&&t.uid)try{g(!0);const v=await Ks.getUserProfile(t.uid);u(v.user)}catch(v){console.error("Error fetching profile:",v),T("Failed to load profile data")}finally{g(!1)}};t!=null&&t.uid&&O()},[t]),P.useEffect(()=>{l&&f({username:l.username||"",email:l.email||"",firstName:l.firstName||"",lastName:l.lastName||"",exerciseGoalMinutes:l.exerciseGoalMinutes||"",waterGoalOz:l.waterGoalOz||"",meditationGoalMinutes:l.meditationGoalMinutes||""})},[l]);const x=O=>{const{name:v,value:y}=O.target;f(_=>({..._,[v]:y}))},b=async O=>{if(O.preventDefault(),!!(t!=null&&t.uid)){N(!0),T(""),R("");try{console.log("Submitting profile update:",d);const v={...d,exerciseGoalMinutes:parseInt(d.exerciseGoalMinutes)||30,waterGoalOz:parseInt(d.waterGoalOz)||64,meditationGoalMinutes:parseInt(d.meditationGoalMinutes)||10};await Ks.updateUserProfile(t.uid,v),u({...l,...v}),R("Profile updated successfully!"),setTimeout(()=>R(""),3e3)}catch(v){console.error("Error updating profile:",v),T("Failed to update profile. Please try again.")}finally{N(!1)}}},V=()=>{l&&f({username:l.username||"",email:l.email||"",firstName:l.firstName||"",lastName:l.lastName||"",exerciseGoalMinutes:l.exerciseGoalMinutes||"",waterGoalOz:l.waterGoalOz||"",meditationGoalMinutes:l.meditationGoalMinutes||""}),T(""),R("")};return e||m?c.jsx("div",{className:"profile-loading",children:"Loading profile..."}):t?c.jsx("div",{className:"profile-page",children:c.jsxs("div",{className:"profile-card",children:[c.jsxs("div",{className:"profile-header",children:[c.jsx("h1",{className:"profile-title",children:"Personal Information"}),c.jsx("p",{className:"profile-subtitle",children:"Update your profile and wellness goals"})]}),j&&c.jsx("div",{className:"success-message",children:j}),I&&c.jsx("div",{className:"error-message",children:I}),l&&c.jsxs("form",{onSubmit:b,className:"profile-form",children:[c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"section-title",children:"Account Information"}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Username",c.jsx("input",{type:"text",name:"username",value:d.username,onChange:x,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Email",c.jsx("input",{type:"email",name:"email",value:d.email,onChange:x,className:"form-input",required:!0})]})})]}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["First Name",c.jsx("input",{type:"text",name:"firstName",value:d.firstName,onChange:x,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Last Name",c.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:x,className:"form-input",required:!0})]})})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"section-title",children:"Daily Wellness Goals"}),c.jsx("p",{className:"section-description",children:"Set your daily targets to track your progress effectively"}),c.jsxs("div",{className:"goals-grid",children:[c.jsx("div",{className:"form-group goal-group",children:c.jsxs("label",{className:"form-label",children:[c.jsx("span",{className:"goal-icon",children:"🏋️"}),"Exercise Goal (Minutes)",c.jsx("input",{type:"number",name:"exerciseGoalMinutes",value:d.exerciseGoalMinutes,onChange:x,className:"form-input",min:"1",max:"300",required:!0}),c.jsx("small",{className:"input-help",children:"Recommended: 30-60 minutes"})]})}),c.jsx("div",{className:"form-group goal-group",children:c.jsxs("label",{className:"form-label",children:[c.jsx("span",{className:"goal-icon",children:"💧"}),"Water Goal (Oz)",c.jsx("input",{type:"number",name:"waterGoalOz",value:d.waterGoalOz,onChange:x,className:"form-input",min:"1",max:"200",required:!0}),c.jsx("small",{className:"input-help",children:"Recommended: 64-100 oz"})]})}),c.jsx("div",{className:"form-group goal-group",children:c.jsxs("label",{className:"form-label",children:[c.jsx("span",{className:"goal-icon",children:"🧘"}),"Meditation Goal (Minutes)",c.jsx("input",{type:"number",name:"meditationGoalMinutes",value:d.meditationGoalMinutes,onChange:x,className:"form-input",min:"1",max:"120",required:!0}),c.jsx("small",{className:"input-help",children:"Recommended: 5-20 minutes"})]})})]})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",className:"reset-button",onClick:V,disabled:k,children:"Reset Changes"}),c.jsx("button",{type:"submit",className:"save-button",disabled:k,children:k?"Saving...":"Save Profile"})]})]}),c.jsxs("div",{className:"profile-stats",children:[c.jsx("h3",{className:"section-title",children:"Account Summary"}),c.jsxs("div",{className:"stats-grid",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Member Since"}),c.jsx("span",{className:"stat-value",children:l!=null&&l.createdAt?new Date(l.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Profile Updated"}),c.jsx("span",{className:"stat-value",children:l!=null&&l.updatedAt?new Date(l.updatedAt.seconds*1e3).toLocaleDateString():"N/A"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Goals Set"}),c.jsxs("span",{className:"stat-value",children:[[d.exerciseGoalMinutes,d.waterGoalOz,d.meditationGoalMinutes].filter(O=>O&&O>0).length," / 3"]})]})]})]}),c.jsxs("div",{className:"subscription-section",children:[c.jsx("h2",{children:"Your Plan"}),r==="trial"&&c.jsx("div",{className:"trial-status",children:c.jsxs("div",{className:"status-card trial",children:[c.jsx("h3",{children:"Premium Trial"}),c.jsx("p",{children:"You're experiencing the full premium experience!"}),c.jsxs("div",{className:"trial-countdown",children:[c.jsx("span",{className:"days-remaining",children:s}),c.jsx("span",{className:"days-label",children:"days remaining"})]}),c.jsxs("div",{className:"trial-benefits",children:[c.jsx("p",{children:"Currently enjoying:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"✓ Custom goal setting"}),c.jsx("li",{children:"✓ Diamond achievements"}),c.jsx("li",{children:"✓ Premium soundscapes"}),c.jsx("li",{children:"✓ Advanced analytics"})]})]}),c.jsx("button",{onClick:Ba,className:"keep-premium-btn",children:"Keep Premium Access - $4.99/month"})]})}),r==="premium"&&c.jsx("div",{className:"premium-status",children:c.jsxs("div",{className:"status-card premium",children:[c.jsx("h3",{children:"💎 Premium Member"}),c.jsx("p",{children:"You have access to all premium features!"}),c.jsxs("div",{className:"premium-benefits",children:[c.jsx("h4",{children:"Your Premium Benefits:"}),c.jsxs("div",{className:"benefits-list",children:[c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Custom goal setting"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Exclusive Diamond badges"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Premium soundscapes"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Advanced analytics"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Challenge competitions"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Priority support"})]})]})]}),c.jsx("button",{onClick:o,className:"cancel-btn",children:"Cancel Subscription"})]})}),r==="free"&&c.jsx("div",{className:"free-status",children:c.jsxs("div",{className:"status-card free",children:[c.jsx("h3",{children:"🆓 Free Plan"}),c.jsx("p",{children:"Upgrade to unlock premium features and enhance your wellness journey"}),c.jsxs("div",{className:"premium-benefits",children:[c.jsx("h4",{children:"Unlock with Premium:"}),c.jsxs("div",{className:"benefits-list",children:[c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"🎯"}),c.jsx("span",{children:"Custom goal setting"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"💎"}),c.jsx("span",{children:"Exclusive Diamond badges"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"🎵"}),c.jsx("span",{children:"Premium soundscapes"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"📊"}),c.jsx("span",{children:"Advanced analytics"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"🏆"}),c.jsx("span",{children:"Challenge competitions"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"⚡"}),c.jsx("span",{children:"Priority support"})]})]})]}),c.jsx("button",{onClick:Ba,className:"upgrade-btn",children:"Upgrade to Premium - $4.99/month"})]})})]})]})}):c.jsx("div",{className:"profile-error",children:"Please log in to view your profile."})}function Xj({children:t}){const{user:e,loading:n}=on();return console.log("🔐 ProtectedRoute - loading:",n,"user:",!!e),n?c.jsx("div",{className:"loading",children:"Loading..."}):e?(console.log("✅ Authenticated, rendering protected content"),t):(console.log("🚫 Not authenticated, redirecting to welcome"),c.jsx(Bc,{to:"/welcome",replace:!0}))}const Jj="modulepreload",Zj=function(t){return"/"+t},s_={},eb=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=Zj(u),u in s_)return;s_[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Jj,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,k)=>{m.addEventListener("load",g),m.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function tb(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let l,u;const d=async(m=!0)=>{await u};async function f(){if("serviceWorker"in navigator){if(l=await eb(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/sw.js",{scope:"/",type:"classic"})).catch(m=>{o==null||o(m)}),!l)return;l.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),l.addEventListener("installed",m=>{m.isUpdate||r==null||r()}),l.register({immediate:e}).then(m=>{i?i("/sw.js",m):s==null||s(m)}).catch(m=>{o==null||o(m)})}}return u=f(),d}const nb=()=>{const[t,e]=P.useState(!1),[n,r]=P.useState(!1);P.useEffect(()=>{tb({onNeedRefresh(){e(!0)},onOfflineReady(){r(!0)},onRegistered(o){console.log("SW registered: ",o)},onRegisterError(o){console.log("SW registration error",o)}})},[]);const s=()=>{r(!1),e(!1)},i=()=>{updateSW(),s()};return!t&&!n?null:c.jsxs("div",{className:"pwa-update-banner",children:[c.jsxs("div",{className:"pwa-update-content",children:[n&&c.jsxs("div",{className:"pwa-message",children:[c.jsx("span",{children:"App ready to work offline"}),c.jsx("button",{onClick:s,className:"pwa-close-btn",children:"Close"})]}),t&&c.jsxs("div",{className:"pwa-message",children:[c.jsx("span",{children:"New content available, click on reload button to update"}),c.jsx("button",{onClick:i,className:"pwa-update-btn",children:"Reload"}),c.jsx("button",{onClick:s,className:"pwa-close-btn",children:"Close"})]})]}),c.jsx("style",{jsx:!0,children:`
        .pwa-update-banner {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: #6c5ce7;
          color: white;
          padding: 1rem;
          z-index: 9999;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .pwa-update-content {
          max-width: 600px;
          margin: 0 auto;
        }
        
        .pwa-message {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 1rem;
        }
        
        .pwa-update-btn, .pwa-close-btn {
          background: rgba(255, 255, 255, 0.2);
          border: 1px solid rgba(255, 255, 255, 0.3);
          color: white;
          padding: 0.5rem 1rem;
          border-radius: 6px;
          cursor: pointer;
          font-size: 0.875rem;
          transition: background-color 0.2s;
        }
        
        .pwa-update-btn:hover, .pwa-close-btn:hover {
          background: rgba(255, 255, 255, 0.3);
        }
        
        @media (max-width: 768px) {
          .pwa-message {
            flex-direction: column;
            gap: 0.5rem;
          }
          
          .pwa-update-btn, .pwa-close-btn {
            width: 100%;
          }
        }
      `})]})},rb=()=>{const[t,e]=P.useState(!1),[n,r]=P.useState(null),[s,i]=P.useState("unknown"),[o,l]=P.useState(!1);P.useEffect(()=>{const g=window.matchMedia("(display-mode: standalone)").matches,k=localStorage.getItem("clarity-pwa-dismissed")==="true";if(g||k)return;const N=/iPad|iPhone|iPod/.test(navigator.userAgent),j=/Android/.test(navigator.userAgent);i(N?"ios":j?"android":"desktop");const R=T=>{T.preventDefault(),o||(r(T),e(!0),l(!0))},I=()=>{e(!1),r(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",R),window.addEventListener("appinstalled",I),N&&!o){const T=setTimeout(()=>{o||(e(!0),l(!0))},3e3);return()=>clearTimeout(T)}return()=>{window.removeEventListener("beforeinstallprompt",R),window.removeEventListener("appinstalled",I)}},[o]);const u=async()=>{if(n){n.prompt();const{outcome:g}=await n.userChoice;g==="accepted"&&(e(!1),r(null),localStorage.setItem("clarity-pwa-installed","true"))}},d=()=>{e(!1),localStorage.setItem("clarity-pwa-dismissed","true")};if(!t)return null;const m=(()=>{switch(s){case"ios":return{title:"Add Clarity to Home Screen",steps:["Tap the Share button (📤) at the bottom",'Scroll down and tap "Add to Home Screen"','Tap "Add" to install'],icon:"📱"};case"android":return{title:"Install Clarity App",steps:['Tap "Install" below to add to home screen','Or use the menu (⋮) → "Add to Home Screen"'],icon:"🤖"};case"desktop":return{title:"Install Clarity App",steps:["Click the install icon (📥) in your browser address bar",'Or use the menu → "Install Clarity"'],icon:"💻"};default:return{title:"Install Clarity",steps:["Look for an install option in your browser menu","Or add this page to your bookmarks"],icon:"📱"}}})();return c.jsxs("div",{className:"install-prompt-overlay",children:[c.jsxs("div",{className:"install-prompt",children:[c.jsx("button",{className:"install-close",onClick:d,children:"✕"}),c.jsxs("div",{className:"install-content",children:[c.jsx("div",{className:"install-icon",children:m.icon}),c.jsx("h3",{children:m.title}),c.jsx("div",{className:"install-steps",children:m.steps.map((g,k)=>c.jsxs("div",{className:"install-step",children:[c.jsx("span",{className:"step-number",children:k+1}),c.jsx("span",{className:"step-text",children:g})]},k))}),s==="android"&&n&&c.jsx("button",{className:"install-button",onClick:u,children:"Install Clarity"}),c.jsx("div",{className:"install-benefits",children:c.jsx("p",{children:"✨ Works offline • 🚀 Faster loading • 📱 App-like experience"})})]})]}),c.jsx("style",{jsx:!0,children:`
        .install-prompt-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          padding: 20px;
        }

        .install-prompt {
          background: white;
          border-radius: 16px;
          padding: 24px;
          max-width: 400px;
          width: 100%;
          position: relative;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .install-close {
          position: absolute;
          top: 12px;
          right: 12px;
          background: none;
          border: none;
          font-size: 20px;
          cursor: pointer;
          color: #666;
          padding: 4px;
        }

        .install-content {
          text-align: center;
        }

        .install-icon {
          font-size: 48px;
          margin-bottom: 16px;
        }

        .install-content h3 {
          color: #6b8069;
          margin-bottom: 20px;
          font-size: 20px;
        }

        .install-steps {
          text-align: left;
          margin-bottom: 20px;
        }

        .install-step {
          display: flex;
          align-items: center;
          margin-bottom: 12px;
          padding: 8px 0;
        }

        .step-number {
          background: #6b8069;
          color: white;
          width: 24px;
          height: 24px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 12px;
          font-weight: bold;
          margin-right: 12px;
          flex-shrink: 0;
        }

        .step-text {
          color: #333;
          font-size: 14px;
          line-height: 1.4;
        }

        .install-button {
          background: #6b8069;
          color: white;
          border: none;
          border-radius: 12px;
          padding: 12px 24px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          margin-bottom: 16px;
          transition: background-color 0.2s;
        }

        .install-button:hover {
          background: #556b54;
        }

        .install-benefits {
          background: #f6f7f6;
          border-radius: 8px;
          padding: 12px;
        }

        .install-benefits p {
          color: #6b8069;
          font-size: 12px;
          margin: 0;
        }

        @media (max-width: 480px) {
          .install-prompt {
            margin: 20px;
            padding: 20px;
          }
        }
      `})]})},sb=()=>{const[t,e]=P.useState(!1),[n,r]=P.useState(null),[s,i]=P.useState(!1),[o,l]=P.useState(!1);P.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const d=localStorage.getItem("clarity-pwa-dismissed")==="true",f=localStorage.getItem("clarity-pwa-installed")==="true";if(d||f)return;const m=N=>{N.preventDefault(),o||(r(N),e(!0),l(!0))},g=()=>{i(!0),e(!1),r(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",m),window.addEventListener("appinstalled",g),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!s&&!o){const N=setTimeout(()=>{o||(e(!0),l(!0))},5e3);return()=>clearTimeout(N)}return()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",g)}},[s,o]);const u=async()=>{if(n){n.prompt();const{outcome:d}=await n.userChoice;d==="accepted"&&(i(!0),e(!1),r(null),localStorage.setItem("clarity-pwa-installed","true"))}else alert('To install: Use your browser menu → "Add to Home Screen" or "Install App"')};return!t||s?null:c.jsxs("div",{className:"floating-install-button",onClick:u,children:[c.jsx("div",{className:"install-icon",children:"📱"}),c.jsx("span",{className:"install-text",children:"Install"}),c.jsx("style",{jsx:!0,children:`
        .floating-install-button {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background: #6b8069;
          color: white;
          border-radius: 50px;
          padding: 12px 20px;
          display: flex;
          align-items: center;
          gap: 8px;
          cursor: pointer;
          box-shadow: 0 4px 12px rgba(107, 128, 105, 0.3);
          z-index: 1000;
          transition: all 0.2s ease;
          font-weight: 600;
          font-size: 14px;
        }

        .floating-install-button:hover {
          background: #556b54;
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(107, 128, 105, 0.4);
        }

        .floating-install-button:active {
          transform: translateY(0);
        }

        .install-icon {
          font-size: 18px;
        }

        .install-text {
          white-space: nowrap;
        }

        @media (max-width: 480px) {
          .floating-install-button {
            bottom: 16px;
            right: 16px;
            padding: 10px 16px;
            font-size: 13px;
          }
        }
      `})]})},Zd={worry_worm:{name:"Worry Worm",icon:"🐛",color:"#8B4513",size:"small",technique:"breathing",description:"Those nagging worries that won't go away",tamedMessage:"Worry Worm is now peaceful! 🌱"},panic_bear:{name:"Panic Bear",icon:"🐻",color:"#DC143C",size:"large",technique:"progressive_relaxation",description:"Big scary feelings that make your heart race",tamedMessage:"Panic Bear is now your gentle guardian! 🧸"},overthink_octopus:{name:"Overthink Octopus",icon:"🐙",color:"#4B0082",size:"medium",technique:"mindfulness",description:"Eight arms of spiraling thoughts",tamedMessage:"Overthink Octopus is now zen and focused! 🧘‍♀️"},doom_dragon:{name:"Doom Dragon",icon:"🐉",color:"#8B0000",size:"boss",technique:"breathing",description:"The big bad of catastrophic thinking",tamedMessage:"Doom Dragon is now your wise protector! ✨"}},zo={breathing:{name:"Deep Breathing",icon:"💨",instructions:["Breathe in for 4","Hold for 4","Breathe out for 6","Repeat"],duration:16e3,color:"#4CAF50"},progressive_relaxation:{name:"Progressive Relaxation",icon:"🧘‍♀️",instructions:["Tense your shoulders","Hold for 3 seconds","Release and relax","Feel the tension melt away"],duration:12e3,color:"#2196F3"},mindfulness:{name:"Mindfulness Anchor",icon:"⚓",instructions:["Notice 3 things you can see","Notice 2 things you can hear","Notice 1 thing you can feel","You are present"],duration:15e3,color:"#FF9800"}},Kl={TAMED_MONSTERS:"anxiety_game_tamed_monsters",PLAYER_STATS:"anxiety_game_player_stats"};function ib({user:t,onUpdateStats:e}){var V,O,v;const[n,r]=P.useState("menu"),[s,i]=P.useState(null),[o,l]=P.useState([]),[u,d]=P.useState({level:1,experience:0,calmness:100,monstersDefeated:0,sanctuaryPoints:0}),[f,m]=P.useState(0),[g,k]=P.useState(0),[N,j]=P.useState(!1),R=P.useRef(null);P.useEffect(()=>{try{const y=localStorage.getItem(Kl.TAMED_MONSTERS);if(y){const A=JSON.parse(y).map(C=>({...Zd[C],id:C}));l(A)}const _=localStorage.getItem(Kl.PLAYER_STATS);if(_){const E=JSON.parse(_);d(E)}}catch(y){console.error("Error loading game data from localStorage:",y)}},[]);const I=()=>{const y=Object.keys(Zd),_=y[Math.floor(Math.random()*y.length)],E={...Zd[_],id:_};i(E),r("encounter");const A=E.size==="boss"?30:E.size==="large"?20:10;d(C=>({...C,calmness:Math.max(0,C.calmness-A)}))},T=()=>{const y=zo[s.technique]||zo.breathing;r("technique"),m(0),k(0),x(y)},x=y=>{const _=y.duration/y.instructions.length;let E=0;const A=setInterval(()=>{k(E),m((E+1)/y.instructions.length*100),E===y.instructions.length-1?(clearInterval(A),setTimeout(()=>{b()},_)):E++},_);R.current=A},b=()=>{const y=s.size==="boss"?100:s.size==="large"?50:25,_=s.size==="boss"?20:10;l(E=>[...E,s]),d(E=>({...E,experience:E.experience+y,calmness:Math.min(100,E.calmness+30),monstersDefeated:E.monstersDefeated+1,sanctuaryPoints:E.sanctuaryPoints+_,level:Math.floor((E.experience+y)/100)+1})),r("victory"),e&&e({anxietyGameScore:u.monstersDefeated+1,mindfulnessPoints:_})};return P.useEffect(()=>{if(n==="technique"&&(s==null?void 0:s.technique)==="breathing"){const y=setInterval(()=>{j(_=>!_)},2e3);return()=>clearInterval(y)}},[n,s]),P.useEffect(()=>()=>{R.current&&clearInterval(R.current)},[]),P.useEffect(()=>{try{const y=o.map(_=>_.id);localStorage.setItem(Kl.TAMED_MONSTERS,JSON.stringify(y))}catch(y){console.error("Error saving tamed monsters to localStorage:",y)}},[o]),P.useEffect(()=>{try{localStorage.setItem(Kl.PLAYER_STATS,JSON.stringify(u))}catch(y){console.error("Error saving player stats to localStorage:",y)}},[u]),c.jsxs("div",{className:"monster-tamer-game",children:[n==="menu"&&c.jsxs("div",{className:"game-menu",children:[c.jsxs("div",{className:"game-header",children:[c.jsx("h2",{children:"👾 Anxiety Monster Tamer"}),c.jsx("p",{children:"Use mindfulness to tame your anxiety monsters!"})]}),c.jsxs("div",{className:"player-stats",children:[c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"⭐"}),c.jsxs("span",{children:["Level ",u.level]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"🧘‍♀️"}),c.jsxs("span",{children:["Calmness: ",u.calmness,"%"]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"👾"}),c.jsxs("span",{children:["Tamed: ",u.monstersDefeated]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"🏠"}),c.jsxs("span",{children:["Sanctuary: ",u.sanctuaryPoints]})]})]}),c.jsx("button",{className:"encounter-btn",onClick:I,disabled:u.calmness<10,children:u.calmness<10?"Rest First 😴":"Encounter Monster 👾"}),u.calmness<10&&c.jsx("button",{className:"rest-btn",onClick:()=>d(y=>({...y,calmness:Math.min(100,y.calmness+50)})),style:{background:"linear-gradient(135deg, #FF9800 0%, #FF5722 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"20px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"12px"},children:"Rest & Recover 🧘‍♀️ (+50 Calmness)"}),c.jsxs("div",{className:"tamed-collection",children:[c.jsx("h3",{children:"Your Tamed Monsters:"}),c.jsx("div",{className:"tamed-grid",children:o.length===0?c.jsx("p",{className:"no-tamed",children:"No monsters tamed yet. Start your journey!"}):o.map((y,_)=>c.jsxs("div",{className:"tamed-monster",children:[c.jsx("span",{className:"monster-icon",children:y.icon}),c.jsx("span",{className:"monster-name",children:y.name})]},_))})]})]}),n==="encounter"&&s&&c.jsxs("div",{className:"monster-encounter",children:[c.jsxs("div",{className:"encounter-scene",children:[c.jsxs("div",{className:`monster ${s.size} ${s.id}`,children:[c.jsx("div",{className:"monster-icon",children:s.icon}),c.jsx("div",{className:"monster-shake"})]}),c.jsxs("div",{className:"encounter-text",children:[c.jsxs("h3",{children:["A wild ",s.name," appears!"]}),c.jsx("p",{children:s.description}),c.jsx("p",{className:"calmness-drop",children:"Your calmness dropped! 😰"})]})]}),c.jsxs("div",{className:"taming-options",children:[c.jsxs("button",{className:"tame-btn",onClick:T,children:[c.jsx("span",{className:"technique-icon",children:((V=zo[s.technique])==null?void 0:V.icon)||"💨"}),"Use ",((O=zo[s.technique])==null?void 0:O.name)||"Deep Breathing"]}),c.jsx("button",{className:"run-btn",onClick:()=>r("menu"),children:"Run Away 🏃‍♀️"})]})]}),n==="technique"&&s&&c.jsxs("div",{className:"taming-technique",children:[c.jsxs("div",{className:"technique-header",children:[c.jsxs("h3",{children:["Taming ",s.name]}),c.jsx("div",{className:"anxiety-progress",children:c.jsx("div",{className:"anxiety-progress-fill",style:{width:`${f}%`}})})]}),c.jsx("div",{className:`technique-visual ${N?"breathing":""}`,children:c.jsxs("div",{className:"monster-calming",children:[c.jsx("span",{className:"monster-icon",children:s.icon}),c.jsx("div",{className:"calming-aura"})]})}),c.jsx("div",{className:"technique-instructions",children:(v=zo[s.technique])==null?void 0:v.instructions.map((y,_)=>c.jsx("div",{className:`instruction ${_===g?"active":_<g?"completed":""}`,children:y},_))})]}),n==="victory"&&s&&c.jsxs("div",{className:"victory-screen",children:[c.jsx("div",{className:"victory-animation",children:c.jsxs("div",{className:"tamed-monster",children:[c.jsx("span",{className:"monster-icon happy",children:s.icon}),c.jsx("div",{className:"sparkles",children:"✨✨✨"})]})}),c.jsxs("div",{className:"victory-text",children:[c.jsx("h3",{children:"🎉 Monster Tamed!"}),c.jsx("p",{children:s.tamedMessage}),c.jsxs("div",{className:"rewards",children:[c.jsx("div",{className:"reward",children:"+30 Calmness 🧘‍♀️"}),c.jsxs("div",{className:"reward",children:["+",s.size==="boss"?100:s.size==="large"?50:25," Experience ⭐"]}),c.jsxs("div",{className:"reward",children:["+",s.size==="boss"?20:10," Sanctuary Points 🏠"]})]})]}),c.jsxs("div",{className:"victory-actions",children:[c.jsx("button",{className:"continue-btn",onClick:()=>r("menu"),children:"Continue Journey ➡️"}),c.jsx("button",{className:"sanctuary-btn",onClick:()=>r("sanctuary"),children:"Visit Sanctuary 🏛️"})]})]}),n==="sanctuary"&&c.jsxs("div",{className:"sanctuary-view",children:[c.jsxs("div",{className:"sanctuary-header",children:[c.jsx("h2",{children:"🏛️ Your Peaceful Sanctuary"}),c.jsx("p",{children:"A safe space built from your mindfulness journey"}),c.jsx("button",{className:"back-to-menu-btn",onClick:()=>r("menu"),children:"← Back to Adventure"})]}),c.jsxs("div",{className:"sanctuary-stats",children:[c.jsxs("div",{className:"sanctuary-stat",children:[c.jsx("div",{className:"stat-icon",children:"🏠"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:u.sanctuaryPoints}),c.jsx("span",{className:"stat-label",children:"Sanctuary Points"})]})]}),c.jsxs("div",{className:"sanctuary-stat",children:[c.jsx("div",{className:"stat-icon",children:"👾"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:o.length}),c.jsx("span",{className:"stat-label",children:"Peaceful Companions"})]})]}),c.jsxs("div",{className:"sanctuary-stat",children:[c.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"stat-info",children:[c.jsxs("span",{className:"stat-number",children:[u.calmness,"%"]}),c.jsx("span",{className:"stat-label",children:"Current Calmness"})]})]})]}),c.jsxs("div",{className:"sanctuary-garden",children:[c.jsx("h3",{children:"🌸 Mindfulness Garden"}),c.jsxs("div",{className:"garden-grid",children:[o.length===0?c.jsxs("div",{className:"empty-garden",children:[c.jsx("div",{className:"empty-garden-icon",children:"🌱"}),c.jsx("p",{children:"Your garden awaits your first peaceful companion..."}),c.jsx("small",{children:"Tame monsters to populate your sanctuary!"})]}):o.map((y,_)=>c.jsx("div",{className:"garden-companion",children:c.jsxs("div",{className:"companion-spot",children:[c.jsx("span",{className:"companion-icon",children:y.icon}),c.jsx("div",{className:"companion-aura"}),c.jsx("div",{className:"companion-name",children:y.name}),c.jsx("div",{className:"companion-effect",children:"Radiating peace ✨"})]})},_)),Array.from({length:Math.max(0,6-o.length)}).map((y,_)=>c.jsx("div",{className:"garden-companion empty",children:c.jsxs("div",{className:"companion-spot",children:[c.jsx("span",{className:"empty-spot",children:"?"}),c.jsx("div",{className:"spot-label",children:"Awaiting Friend"})]})},`empty-${_}`))]})]}),c.jsxs("div",{className:"sanctuary-upgrades",children:[c.jsx("h3",{children:"🏗️ Sanctuary Upgrades"}),c.jsxs("div",{className:"upgrades-grid",children:[c.jsxs("div",{className:`upgrade-card ${u.sanctuaryPoints>=50?"available":"locked"}`,children:[c.jsx("div",{className:"upgrade-icon",children:"🌈"}),c.jsxs("div",{className:"upgrade-info",children:[c.jsx("h4",{children:"Rainbow Bridge"}),c.jsx("p",{children:"Connects different areas of your sanctuary"}),c.jsx("span",{className:"upgrade-cost",children:"50 Points"})]}),u.sanctuaryPoints>=50?c.jsx("button",{className:"upgrade-btn",children:"Build"}):c.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),c.jsxs("div",{className:`upgrade-card ${u.sanctuaryPoints>=100?"available":"locked"}`,children:[c.jsx("div",{className:"upgrade-icon",children:"⛲"}),c.jsxs("div",{className:"upgrade-info",children:[c.jsx("h4",{children:"Meditation Fountain"}),c.jsx("p",{children:"Restores calmness over time"}),c.jsx("span",{className:"upgrade-cost",children:"100 Points"})]}),u.sanctuaryPoints>=100?c.jsx("button",{className:"upgrade-btn",children:"Build"}):c.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),c.jsxs("div",{className:`upgrade-card ${u.sanctuaryPoints>=200?"available":"locked"}`,children:[c.jsx("div",{className:"upgrade-icon",children:"🏰"}),c.jsxs("div",{className:"upgrade-info",children:[c.jsx("h4",{children:"Wisdom Tower"}),c.jsx("p",{children:"Unlock advanced meditation techniques"}),c.jsx("span",{className:"upgrade-cost",children:"200 Points"})]}),u.sanctuaryPoints>=200?c.jsx("button",{className:"upgrade-btn",children:"Build"}):c.jsx("div",{className:"upgrade-locked",children:"🔒"})]})]})]}),c.jsxs("div",{className:"daily-affirmations",children:[c.jsx("h3",{children:"💭 Daily Affirmation"}),c.jsxs("div",{className:"affirmation-card",children:[c.jsx("div",{className:"affirmation-text",children:'"I am creating a sanctuary of peace within myself, one mindful moment at a time."'}),c.jsx("div",{className:"affirmation-author",children:"- Your Inner Wisdom"})]})]}),c.jsxs("div",{className:"sanctuary-actions",children:[c.jsx("button",{className:"meditation-btn",onClick:()=>{d(y=>({...y,calmness:Math.min(100,y.calmness+10)}))},children:"🧘‍♀️ Meditate in Sanctuary (+10 Calmness)"}),c.jsx("button",{className:"encounter-btn",onClick:()=>{r("menu"),setTimeout(()=>{I()},500)},children:"👾 Ready for Another Adventure"})]})]})]})}function ob(){const{user:t}=on(),[e,n]=P.useState({anxietyGameScore:0,mindfulnessPoints:0,totalGamesPlayed:0,currentStreak:0});P.useEffect(()=>{try{const i=localStorage.getItem("clarity_game_stats");if(i){const l=JSON.parse(i);n(l),console.log("🎮 Loaded saved game stats:",l)}const o=localStorage.getItem("anxiety_game_tamed_monsters");if(o){const u=JSON.parse(o).length;n(d=>{const f={...d,anxietyGameScore:Math.max(d.anxietyGameScore,u)};return localStorage.setItem("clarity_game_stats",JSON.stringify(f)),console.log("🎮 Synced monster count:",u),f})}}catch(i){console.error("Error loading game stats:",i)}},[]);const r=i=>{console.log("🎮 handleUpdateStats called with:",i),n(o=>{const l={...o,anxietyGameScore:i.anxietyGameScore||o.anxietyGameScore,mindfulnessPoints:o.mindfulnessPoints+(i.mindfulnessPoints||0),totalGamesPlayed:o.totalGamesPlayed+1};try{localStorage.setItem("clarity_game_stats",JSON.stringify(l)),console.log("🎮 Saved game stats to localStorage:",l)}catch(u){console.error("Error saving game stats:",u)}return l}),console.log("🎮 Game stats updated:",i)},s=()=>{try{const i=localStorage.getItem("anxiety_game_tamed_monsters"),o=localStorage.getItem("anxiety_game_player_stats");if(console.log("🎮 Debug - Tamed monsters:",i),console.log("🎮 Debug - Player stats:",o),i){const u=JSON.parse(i).length;n(d=>({...d,anxietyGameScore:u})),console.log("🎮 Debug - Updated anxietyGameScore to:",u)}}catch(i){console.error("Error refreshing stats:",i)}};return c.jsxs("div",{className:"games-page",children:[c.jsxs("div",{className:"games-header",children:[c.jsx("h1",{className:"games-title",children:"Mental Wellness Games"}),c.jsx("p",{className:"games-subtitle",children:"Play games to improve your mental health"})]}),c.jsxs("div",{className:"game-stats-section",children:[c.jsxs("div",{className:"stats-header",children:[c.jsx("h2",{className:"section-title",children:"Your Gaming Stats"}),c.jsx("button",{onClick:s,className:"refresh-stats-btn",title:"Refresh stats from game data",children:"🔄 Refresh"})]}),c.jsxs("div",{className:"game-stats-grid",children:[c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"👾"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.anxietyGameScore}),c.jsx("span",{className:"stat-label",children:"Monsters Tamed"})]})]}),c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.mindfulnessPoints}),c.jsx("span",{className:"stat-label",children:"Mindfulness Points"})]})]}),c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"🎮"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.totalGamesPlayed}),c.jsx("span",{className:"stat-label",children:"Games Played"})]})]}),c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"🔥"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.currentStreak}),c.jsx("span",{className:"stat-label",children:"Day Streak"})]})]})]})]}),c.jsxs("div",{className:"available-games",children:[c.jsx("h2",{className:"section-title",children:"Available Games"}),c.jsxs("div",{className:"game-section",children:[c.jsxs("div",{className:"game-header",children:[c.jsx("h3",{className:"game-title",children:"🎮 Anxiety Monster Tamer"}),c.jsx("span",{className:"game-status",children:"Active"})]}),c.jsx("p",{className:"game-description",children:"Face your anxiety monsters and tame them through mindful interaction. Each monster represents different anxiety triggers. Practice coping strategies while earning points!"}),c.jsx("div",{className:"game-container",children:c.jsx(ib,{user:t,onUpdateStats:r})})]}),c.jsxs("div",{className:"daily-challenges",children:[c.jsx("h2",{className:"section-title",children:"Daily Gaming Challenges"}),c.jsxs("div",{className:"challenge-card",children:[c.jsx("div",{className:"challenge-icon",children:"👾"}),c.jsxs("div",{className:"challenge-content",children:[c.jsx("h3",{children:"Monster Tamer Challenge"}),c.jsx("p",{children:"Tame 3 anxiety monsters today"}),c.jsx("div",{className:"challenge-progress",children:c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"challenge-progress-fill",style:{width:`${Math.min(e.anxietyGameScore/3*100,100)}%`}})})})]}),c.jsx("div",{className:"challenge-reward",children:c.jsx("span",{children:"+50 points"})})]}),c.jsxs("div",{className:"challenge-card",children:[c.jsx("div",{className:"challenge-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"challenge-content",children:[c.jsx("h3",{children:"Mindfulness Master"}),c.jsx("p",{children:"Earn 100 mindfulness points"}),c.jsx("div",{className:"challenge-progress",children:c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"challenge-progress-fill",style:{width:`${Math.min(e.mindfulnessPoints/100*100,100)}%`}})})})]}),c.jsx("div",{className:"challenge-reward",children:c.jsx("span",{children:"+75 points"})})]})]}),c.jsxs("div",{className:"game-achievements",children:[c.jsx("h2",{className:"section-title",children:"Gaming Achievements"}),c.jsxs("div",{className:"achievements-grid",children:[e.anxietyGameScore>=1&&c.jsxs("div",{className:"achievement-card bronze",children:[c.jsx("div",{className:"achievement-icon",children:"🥉"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"FIRST VICTORY"}),c.jsx("p",{children:"Tamed your first monster"})]})]}),e.anxietyGameScore>=5&&c.jsxs("div",{className:"achievement-card silver",children:[c.jsx("div",{className:"achievement-icon",children:"🥈"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"MONSTER HUNTER"}),c.jsx("p",{children:"Tamed 5 monsters"})]})]}),e.anxietyGameScore>=10&&c.jsxs("div",{className:"achievement-card gold",children:[c.jsx("div",{className:"achievement-icon",children:"🥇"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"ANXIETY MASTER"}),c.jsx("p",{children:"Tamed 10 monsters"})]})]}),e.mindfulnessPoints>=100&&c.jsxs("div",{className:"achievement-card gold",children:[c.jsx("div",{className:"achievement-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"MINDFUL GURU"}),c.jsx("p",{children:"Earned 100+ mindfulness points"})]})]})]})]}),c.jsxs("div",{className:"coming-soon-games",children:[c.jsx("h3",{className:"section-title",children:"More Games Coming Soon"}),c.jsxs("div",{className:"game-preview-grid",children:[c.jsxs("div",{className:"game-preview-card",children:[c.jsx("div",{className:"game-preview-icon",children:"🌱"}),c.jsx("h4",{children:"Mindful Garden"}),c.jsx("p",{children:"Grow a virtual garden through daily meditation practice"}),c.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),c.jsxs("div",{className:"game-preview-card",children:[c.jsx("div",{className:"game-preview-icon",children:"🌊"}),c.jsx("h4",{children:"Calm Waters"}),c.jsx("p",{children:"Navigate peaceful waters while practicing breathing exercises"}),c.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),c.jsxs("div",{className:"game-preview-card",children:[c.jsx("div",{className:"game-preview-icon",children:"🎯"}),c.jsx("h4",{children:"Focus Quest"}),c.jsx("p",{children:"Complete challenges that improve concentration and focus"}),c.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]})]})]})]})]})}function ab(){return c.jsx(cS,{children:c.jsxs(ok,{children:[c.jsxs(J1,{children:[c.jsx(Yt,{path:"/welcome",element:c.jsx(Fj,{})}),c.jsxs(Yt,{path:"/",element:c.jsx(Xj,{children:c.jsx(Vj,{})}),children:[c.jsx(Yt,{index:!0,element:c.jsx(Bc,{to:"/dashboard",replace:!0})}),c.jsx(Yt,{path:"dashboard",element:c.jsx(qj,{})}),c.jsx(Yt,{path:"workout",element:c.jsx(Hj,{})}),c.jsx(Yt,{path:"meditation",element:c.jsx(Gj,{})}),c.jsx(Yt,{path:"water",element:c.jsx(Kj,{})}),c.jsx(Yt,{path:"goals",element:c.jsx(Qj,{})}),c.jsx(Yt,{path:"profile",element:c.jsx(Yj,{})}),c.jsx(Yt,{path:"games",element:c.jsx(ob,{})})]}),c.jsx(Yt,{path:"*",element:c.jsx(Bc,{to:"/welcome",replace:!0})})]}),c.jsx(nb,{}),c.jsx(rb,{}),c.jsx(sb,{})]})})}eh.createRoot(document.getElementById("root")).render(c.jsx(Jn.StrictMode,{children:c.jsx(cS,{children:c.jsx(ab,{})})}));
