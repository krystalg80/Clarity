function kI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function AI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xv={exports:{}},nu={},Jv={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=Symbol.for("react.element"),CI=Symbol.for("react.portal"),PI=Symbol.for("react.fragment"),RI=Symbol.for("react.strict_mode"),jI=Symbol.for("react.profiler"),DI=Symbol.for("react.provider"),bI=Symbol.for("react.context"),OI=Symbol.for("react.forward_ref"),MI=Symbol.for("react.suspense"),LI=Symbol.for("react.memo"),VI=Symbol.for("react.lazy"),Qp=Symbol.iterator;function FI(t){return t===null||typeof t!="object"?null:(t=Qp&&t[Qp]||t["@@iterator"],typeof t=="function"?t:null)}var Zv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e_=Object.assign,t_={};function Xi(t,e,n){this.props=t,this.context=e,this.refs=t_,this.updater=n||Zv}Xi.prototype.isReactComponent={};Xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function n_(){}n_.prototype=Xi.prototype;function Ef(t,e,n){this.props=t,this.context=e,this.refs=t_,this.updater=n||Zv}var Tf=Ef.prototype=new n_;Tf.constructor=Ef;e_(Tf,Xi.prototype);Tf.isPureReactComponent=!0;var Yp=Array.isArray,r_=Object.prototype.hasOwnProperty,If={current:null},s_={key:!0,ref:!0,__self:!0,__source:!0};function i_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)r_.call(e,r)&&!s_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:La,type:t,key:i,ref:o,props:s,_owner:If.current}}function UI(t,e){return{$$typeof:La,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sf(t){return typeof t=="object"&&t!==null&&t.$$typeof===La}function zI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xp=/\/+/g;function od(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zI(""+t.key):e.toString(36)}function Ul(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case La:case CI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+od(o,0):r,Yp(s)?(n="",t!=null&&(n=t.replace(Xp,"$&/")+"/"),Ul(s,e,n,"",function(d){return d})):s!=null&&(Sf(s)&&(s=UI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Xp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Yp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+od(i,l);o+=Ul(i,e,n,u,s)}else if(u=FI(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+od(i,l++),o+=Ul(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function pl(t,e,n){if(t==null)return t;var r=[],s=0;return Ul(t,r,"","",function(i){return e.call(n,i,s++)}),r}function BI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},zl={transition:null},$I={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:zl,ReactCurrentOwner:If};function o_(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:pl,forEach:function(t,e,n){pl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return pl(t,function(){e++}),e},toArray:function(t){return pl(t,function(e){return e})||[]},only:function(t){if(!Sf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=Xi;ce.Fragment=PI;ce.Profiler=jI;ce.PureComponent=Ef;ce.StrictMode=RI;ce.Suspense=MI;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$I;ce.act=o_;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=e_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=If.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)r_.call(e,u)&&!s_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:La,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:bI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DI,_context:t},t.Consumer=t};ce.createElement=i_;ce.createFactory=function(t){var e=i_.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:OI,render:t}};ce.isValidElement=Sf;ce.lazy=function(t){return{$$typeof:VI,_payload:{_status:-1,_result:t},_init:BI}};ce.memo=function(t,e){return{$$typeof:LI,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=zl.transition;zl.transition={};try{t()}finally{zl.transition=e}};ce.unstable_act=o_;ce.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ce.useContext=function(t){return Nt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ce.useId=function(){return Nt.current.useId()};ce.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};ce.useRef=function(t){return Nt.current.useRef(t)};ce.useState=function(t){return Nt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Nt.current.useTransition()};ce.version="18.3.1";Jv.exports=ce;var j=Jv.exports;const Yn=AI(j),WI=kI({__proto__:null,default:Yn},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qI=j,GI=Symbol.for("react.element"),HI=Symbol.for("react.fragment"),KI=Object.prototype.hasOwnProperty,QI=qI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YI={key:!0,ref:!0,__self:!0,__source:!0};function a_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KI.call(e,r)&&!YI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:GI,type:t,key:i,ref:o,props:s,_owner:QI.current}}nu.Fragment=HI;nu.jsx=a_;nu.jsxs=a_;Xv.exports=nu;var c=Xv.exports,Gd={},l_={exports:{}},$t={},c_={exports:{}},u_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,X){var se=q.length;q.push(X);e:for(;0<se;){var Se=se-1>>>1,ge=q[Se];if(0<s(ge,X))q[Se]=X,q[se]=ge,se=Se;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var X=q[0],se=q.pop();if(se!==X){q[0]=se;e:for(var Se=0,ge=q.length,Ee=ge>>>1;Se<Ee;){var nn=2*(Se+1)-1,rn=q[nn],sn=nn+1,on=q[sn];if(0>s(rn,se))sn<ge&&0>s(on,rn)?(q[Se]=on,q[sn]=se,Se=sn):(q[Se]=rn,q[nn]=se,Se=nn);else if(sn<ge&&0>s(on,se))q[Se]=on,q[sn]=se,Se=sn;else break e}}return X}function s(q,X){var se=q.sortIndex-X.sortIndex;return se!==0?se:q.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,g=3,N=!1,k=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(q){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=q)r(d),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(d)}}function D(q){if(R=!1,S(q),!k)if(n(u)!==null)k=!0,Z(V);else{var X=n(d);X!==null&&Ie(D,X.startTime-q)}}function V(q,X){k=!1,R&&(R=!1,x(y),y=-1),N=!0;var se=g;try{for(S(X),p=n(u);p!==null&&(!(p.expirationTime>X)||q&&!A());){var Se=p.callback;if(typeof Se=="function"){p.callback=null,g=p.priorityLevel;var ge=Se(p.expirationTime<=X);X=t.unstable_now(),typeof ge=="function"?p.callback=ge:p===n(u)&&r(u),S(X)}else r(u);p=n(u)}if(p!==null)var Ee=!0;else{var nn=n(d);nn!==null&&Ie(D,nn.startTime-X),Ee=!1}return Ee}finally{p=null,g=se,N=!1}}var O=!1,v=null,y=-1,w=5,T=-1;function A(){return!(t.unstable_now()-T<w)}function C(){if(v!==null){var q=t.unstable_now();T=q;var X=!0;try{X=v(!0,q)}finally{X?I():(O=!1,v=null)}}else O=!1}var I;if(typeof E=="function")I=function(){E(C)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,qe=re.port2;re.port1.onmessage=C,I=function(){qe.postMessage(null)}}else I=function(){P(C,0)};function Z(q){v=q,O||(O=!0,I())}function Ie(q,X){y=P(function(){q(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){k||N||(k=!0,Z(V))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var se=g;g=X;try{return q()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=g;g=q;try{return X()}finally{g=se}},t.unstable_scheduleCallback=function(q,X,se){var Se=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Se+se:Se):se=Se,q){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=se+ge,q={id:f++,callback:X,priorityLevel:q,startTime:se,expirationTime:ge,sortIndex:-1},se>Se?(q.sortIndex=se,e(d,q),n(u)===null&&q===n(d)&&(R?(x(y),y=-1):R=!0,Ie(D,se-Se))):(q.sortIndex=ge,e(u,q),k||N||(k=!0,Z(V))),q},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(q){var X=g;return function(){var se=g;g=X;try{return q.apply(this,arguments)}finally{g=se}}}})(u_);c_.exports=u_;var XI=c_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JI=j,Bt=XI;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d_=new Set,la={};function Bs(t,e){Oi(t,e),Oi(t+"Capture",e)}function Oi(t,e){for(la[t]=e,t=0;t<e.length;t++)d_.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hd=Object.prototype.hasOwnProperty,ZI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jp={},Zp={};function eS(t){return Hd.call(Zp,t)?!0:Hd.call(Jp,t)?!1:ZI.test(t)?Zp[t]=!0:(Jp[t]=!0,!1)}function tS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nS(t,e,n,r){if(e===null||typeof e>"u"||tS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var xf=/[\-:]([a-z])/g;function Nf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xf,Nf);at[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xf,Nf);at[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xf,Nf);at[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function kf(t,e,n,r){var s=at.hasOwnProperty(e)?at[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nS(e,n,s,r)&&(n=null),r||s===null?eS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var lr=JI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gl=Symbol.for("react.element"),di=Symbol.for("react.portal"),hi=Symbol.for("react.fragment"),Af=Symbol.for("react.strict_mode"),Kd=Symbol.for("react.profiler"),h_=Symbol.for("react.provider"),f_=Symbol.for("react.context"),Cf=Symbol.for("react.forward_ref"),Qd=Symbol.for("react.suspense"),Yd=Symbol.for("react.suspense_list"),Pf=Symbol.for("react.memo"),Ir=Symbol.for("react.lazy"),m_=Symbol.for("react.offscreen"),eg=Symbol.iterator;function Ao(t){return t===null||typeof t!="object"?null:(t=eg&&t[eg]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,ad;function Lo(t){if(ad===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ad=e&&e[1]||""}return`
`+ad+t}var ld=!1;function cd(t,e){if(!t||ld)return"";ld=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{ld=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lo(t):""}function rS(t){switch(t.tag){case 5:return Lo(t.type);case 16:return Lo("Lazy");case 13:return Lo("Suspense");case 19:return Lo("SuspenseList");case 0:case 2:case 15:return t=cd(t.type,!1),t;case 11:return t=cd(t.type.render,!1),t;case 1:return t=cd(t.type,!0),t;default:return""}}function Xd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hi:return"Fragment";case di:return"Portal";case Kd:return"Profiler";case Af:return"StrictMode";case Qd:return"Suspense";case Yd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case f_:return(t.displayName||"Context")+".Consumer";case h_:return(t._context.displayName||"Context")+".Provider";case Cf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pf:return e=t.displayName||null,e!==null?e:Xd(t.type)||"Memo";case Ir:e=t._payload,t=t._init;try{return Xd(t(e))}catch{}}return null}function sS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xd(e);case 8:return e===Af?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function p_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iS(t){var e=p_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yl(t){t._valueTracker||(t._valueTracker=iS(t))}function g_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=p_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jd(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function y_(t,e){e=e.checked,e!=null&&kf(t,"checked",e,!1)}function Zd(t,e){y_(t,e);var n=Kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?eh(t,e.type,n):e.hasOwnProperty("defaultValue")&&eh(t,e.type,Kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ng(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function eh(t,e,n){(e!=="number"||lc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vo=Array.isArray;function Si(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function th(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Vo(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kr(n)}}function v_(t,e){var n=Kr(e.value),r=Kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function __(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?__(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vl,w_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vl=vl||document.createElement("div"),vl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ca(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ho={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oS=["Webkit","ms","Moz","O"];Object.keys(Ho).forEach(function(t){oS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ho[e]=Ho[t]})});function E_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ho.hasOwnProperty(t)&&Ho[t]?(""+e).trim():e+"px"}function T_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=E_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var aS=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rh(t,e){if(e){if(aS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function sh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ih=null;function Rf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oh=null,xi=null,Ni=null;function ig(t){if(t=Ua(t)){if(typeof oh!="function")throw Error(W(280));var e=t.stateNode;e&&(e=au(e),oh(t.stateNode,t.type,e))}}function I_(t){xi?Ni?Ni.push(t):Ni=[t]:xi=t}function S_(){if(xi){var t=xi,e=Ni;if(Ni=xi=null,ig(t),e)for(t=0;t<e.length;t++)ig(e[t])}}function x_(t,e){return t(e)}function N_(){}var ud=!1;function k_(t,e,n){if(ud)return t(e,n);ud=!0;try{return x_(t,e,n)}finally{ud=!1,(xi!==null||Ni!==null)&&(N_(),S_())}}function ua(t,e){var n=t.stateNode;if(n===null)return null;var r=au(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var ah=!1;if(er)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){ah=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{ah=!1}function lS(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ko=!1,cc=null,uc=!1,lh=null,cS={onError:function(t){Ko=!0,cc=t}};function uS(t,e,n,r,s,i,o,l,u){Ko=!1,cc=null,lS.apply(cS,arguments)}function dS(t,e,n,r,s,i,o,l,u){if(uS.apply(this,arguments),Ko){if(Ko){var d=cc;Ko=!1,cc=null}else throw Error(W(198));uc||(uc=!0,lh=d)}}function $s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function A_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function og(t){if($s(t)!==t)throw Error(W(188))}function hS(t){var e=t.alternate;if(!e){if(e=$s(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return og(s),t;if(i===r)return og(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function C_(t){return t=hS(t),t!==null?P_(t):null}function P_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=P_(t);if(e!==null)return e;t=t.sibling}return null}var R_=Bt.unstable_scheduleCallback,ag=Bt.unstable_cancelCallback,fS=Bt.unstable_shouldYield,mS=Bt.unstable_requestPaint,Ue=Bt.unstable_now,pS=Bt.unstable_getCurrentPriorityLevel,jf=Bt.unstable_ImmediatePriority,j_=Bt.unstable_UserBlockingPriority,dc=Bt.unstable_NormalPriority,gS=Bt.unstable_LowPriority,D_=Bt.unstable_IdlePriority,ru=null,jn=null;function yS(t){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(ru,t,void 0,(t.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:wS,vS=Math.log,_S=Math.LN2;function wS(t){return t>>>=0,t===0?32:31-(vS(t)/_S|0)|0}var _l=64,wl=4194304;function Fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Fo(l):(i&=o,i!==0&&(r=Fo(i)))}else o=n&~s,o!==0?r=Fo(o):i!==0&&(r=Fo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fn(e),s=1<<n,r|=t[n],e&=~s;return r}function ES(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-fn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=ES(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function ch(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function b_(){var t=_l;return _l<<=1,!(_l&4194240)&&(_l=64),t}function dd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Va(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fn(e),t[e]=n}function IS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-fn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Df(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function O_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var M_,bf,L_,V_,F_,uh=!1,El=[],Or=null,Mr=null,Lr=null,da=new Map,ha=new Map,xr=[],SS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lg(t,e){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":da.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ha.delete(e.pointerId)}}function Po(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ua(e),e!==null&&bf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function xS(t,e,n,r,s){switch(e){case"focusin":return Or=Po(Or,t,e,n,r,s),!0;case"dragenter":return Mr=Po(Mr,t,e,n,r,s),!0;case"mouseover":return Lr=Po(Lr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return da.set(i,Po(da.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ha.set(i,Po(ha.get(i)||null,t,e,n,r,s)),!0}return!1}function U_(t){var e=Is(t.target);if(e!==null){var n=$s(e);if(n!==null){if(e=n.tag,e===13){if(e=A_(n),e!==null){t.blockedOn=e,F_(t.priority,function(){L_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ih=r,n.target.dispatchEvent(r),ih=null}else return e=Ua(n),e!==null&&bf(e),t.blockedOn=n,!1;e.shift()}return!0}function cg(t,e,n){Bl(t)&&n.delete(e)}function NS(){uh=!1,Or!==null&&Bl(Or)&&(Or=null),Mr!==null&&Bl(Mr)&&(Mr=null),Lr!==null&&Bl(Lr)&&(Lr=null),da.forEach(cg),ha.forEach(cg)}function Ro(t,e){t.blockedOn===e&&(t.blockedOn=null,uh||(uh=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,NS)))}function fa(t){function e(s){return Ro(s,t)}if(0<El.length){Ro(El[0],t);for(var n=1;n<El.length;n++){var r=El[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Or!==null&&Ro(Or,t),Mr!==null&&Ro(Mr,t),Lr!==null&&Ro(Lr,t),da.forEach(e),ha.forEach(e),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)U_(n),n.blockedOn===null&&xr.shift()}var ki=lr.ReactCurrentBatchConfig,fc=!0;function kS(t,e,n,r){var s=ve,i=ki.transition;ki.transition=null;try{ve=1,Of(t,e,n,r)}finally{ve=s,ki.transition=i}}function AS(t,e,n,r){var s=ve,i=ki.transition;ki.transition=null;try{ve=4,Of(t,e,n,r)}finally{ve=s,ki.transition=i}}function Of(t,e,n,r){if(fc){var s=dh(t,e,n,r);if(s===null)Ed(t,e,r,mc,n),lg(t,r);else if(xS(s,t,e,n,r))r.stopPropagation();else if(lg(t,r),e&4&&-1<SS.indexOf(t)){for(;s!==null;){var i=Ua(s);if(i!==null&&M_(i),i=dh(t,e,n,r),i===null&&Ed(t,e,r,mc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ed(t,e,r,null,n)}}var mc=null;function dh(t,e,n,r){if(mc=null,t=Rf(r),t=Is(t),t!==null)if(e=$s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=A_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mc=t,null}function z_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pS()){case jf:return 1;case j_:return 4;case dc:case gS:return 16;case D_:return 536870912;default:return 16}default:return 16}}var Rr=null,Mf=null,$l=null;function B_(){if($l)return $l;var t,e=Mf,n=e.length,r,s="value"in Rr?Rr.value:Rr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return $l=s.slice(t,1<r?1-r:void 0)}function Wl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tl(){return!0}function ug(){return!1}function Wt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Tl:ug,this.isPropagationStopped=ug,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tl)},persist:function(){},isPersistent:Tl}),e}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lf=Wt(Ji),Fa=be({},Ji,{view:0,detail:0}),CS=Wt(Fa),hd,fd,jo,su=be({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jo&&(jo&&t.type==="mousemove"?(hd=t.screenX-jo.screenX,fd=t.screenY-jo.screenY):fd=hd=0,jo=t),hd)},movementY:function(t){return"movementY"in t?t.movementY:fd}}),dg=Wt(su),PS=be({},su,{dataTransfer:0}),RS=Wt(PS),jS=be({},Fa,{relatedTarget:0}),md=Wt(jS),DS=be({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),bS=Wt(DS),OS=be({},Ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MS=Wt(OS),LS=be({},Ji,{data:0}),hg=Wt(LS),VS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},US={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=US[t])?!!e[t]:!1}function Vf(){return zS}var BS=be({},Fa,{key:function(t){if(t.key){var e=VS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(t){return t.type==="keypress"?Wl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$S=Wt(BS),WS=be({},su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fg=Wt(WS),qS=be({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),GS=Wt(qS),HS=be({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),KS=Wt(HS),QS=be({},su,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YS=Wt(QS),XS=[9,13,27,32],Ff=er&&"CompositionEvent"in window,Qo=null;er&&"documentMode"in document&&(Qo=document.documentMode);var JS=er&&"TextEvent"in window&&!Qo,$_=er&&(!Ff||Qo&&8<Qo&&11>=Qo),mg=" ",pg=!1;function W_(t,e){switch(t){case"keyup":return XS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fi=!1;function ZS(t,e){switch(t){case"compositionend":return q_(e);case"keypress":return e.which!==32?null:(pg=!0,mg);case"textInput":return t=e.data,t===mg&&pg?null:t;default:return null}}function ex(t,e){if(fi)return t==="compositionend"||!Ff&&W_(t,e)?(t=B_(),$l=Mf=Rr=null,fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $_&&e.locale!=="ko"?null:e.data;default:return null}}var tx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tx[t.type]:e==="textarea"}function G_(t,e,n,r){I_(r),e=pc(e,"onChange"),0<e.length&&(n=new Lf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yo=null,ma=null;function nx(t){rw(t,0)}function iu(t){var e=gi(t);if(g_(e))return t}function rx(t,e){if(t==="change")return e}var H_=!1;if(er){var pd;if(er){var gd="oninput"in document;if(!gd){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),gd=typeof yg.oninput=="function"}pd=gd}else pd=!1;H_=pd&&(!document.documentMode||9<document.documentMode)}function vg(){Yo&&(Yo.detachEvent("onpropertychange",K_),ma=Yo=null)}function K_(t){if(t.propertyName==="value"&&iu(ma)){var e=[];G_(e,ma,t,Rf(t)),k_(nx,e)}}function sx(t,e,n){t==="focusin"?(vg(),Yo=e,ma=n,Yo.attachEvent("onpropertychange",K_)):t==="focusout"&&vg()}function ix(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(ma)}function ox(t,e){if(t==="click")return iu(e)}function ax(t,e){if(t==="input"||t==="change")return iu(e)}function lx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:lx;function pa(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hd.call(e,s)||!pn(t[s],e[s]))return!1}return!0}function _g(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wg(t,e){var n=_g(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_g(n)}}function Q_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Q_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Y_(){for(var t=window,e=lc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lc(t.document)}return e}function Uf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cx(t){var e=Y_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Q_(n.ownerDocument.documentElement,n)){if(r!==null&&Uf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=wg(n,i);var o=wg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ux=er&&"documentMode"in document&&11>=document.documentMode,mi=null,hh=null,Xo=null,fh=!1;function Eg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fh||mi==null||mi!==lc(r)||(r=mi,"selectionStart"in r&&Uf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xo&&pa(Xo,r)||(Xo=r,r=pc(hh,"onSelect"),0<r.length&&(e=new Lf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mi)))}function Il(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pi={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionend:Il("Transition","TransitionEnd")},yd={},X_={};er&&(X_=document.createElement("div").style,"AnimationEvent"in window||(delete pi.animationend.animation,delete pi.animationiteration.animation,delete pi.animationstart.animation),"TransitionEvent"in window||delete pi.transitionend.transition);function ou(t){if(yd[t])return yd[t];if(!pi[t])return t;var e=pi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in X_)return yd[t]=e[n];return t}var J_=ou("animationend"),Z_=ou("animationiteration"),ew=ou("animationstart"),tw=ou("transitionend"),nw=new Map,Tg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(t,e){nw.set(t,e),Bs(e,[t])}for(var vd=0;vd<Tg.length;vd++){var _d=Tg[vd],dx=_d.toLowerCase(),hx=_d[0].toUpperCase()+_d.slice(1);rs(dx,"on"+hx)}rs(J_,"onAnimationEnd");rs(Z_,"onAnimationIteration");rs(ew,"onAnimationStart");rs("dblclick","onDoubleClick");rs("focusin","onFocus");rs("focusout","onBlur");rs(tw,"onTransitionEnd");Oi("onMouseEnter",["mouseout","mouseover"]);Oi("onMouseLeave",["mouseout","mouseover"]);Oi("onPointerEnter",["pointerout","pointerover"]);Oi("onPointerLeave",["pointerout","pointerover"]);Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function Ig(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dS(r,e,void 0,t),t.currentTarget=null}function rw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Ig(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Ig(s,l,d),i=u}}}if(uc)throw t=lh,uc=!1,lh=null,t}function Ne(t,e){var n=e[vh];n===void 0&&(n=e[vh]=new Set);var r=t+"__bubble";n.has(r)||(sw(e,t,2,!1),n.add(r))}function wd(t,e,n){var r=0;e&&(r|=4),sw(n,t,r,e)}var Sl="_reactListening"+Math.random().toString(36).slice(2);function ga(t){if(!t[Sl]){t[Sl]=!0,d_.forEach(function(n){n!=="selectionchange"&&(fx.has(n)||wd(n,!1,t),wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sl]||(e[Sl]=!0,wd("selectionchange",!1,e))}}function sw(t,e,n,r){switch(z_(e)){case 1:var s=kS;break;case 4:s=AS;break;default:s=Of}n=s.bind(null,e,n,t),s=void 0,!ah||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ed(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Is(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}k_(function(){var d=i,f=Rf(n),p=[];e:{var g=nw.get(t);if(g!==void 0){var N=Lf,k=t;switch(t){case"keypress":if(Wl(n)===0)break e;case"keydown":case"keyup":N=$S;break;case"focusin":k="focus",N=md;break;case"focusout":k="blur",N=md;break;case"beforeblur":case"afterblur":N=md;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=RS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=GS;break;case J_:case Z_:case ew:N=bS;break;case tw:N=KS;break;case"scroll":N=CS;break;case"wheel":N=YS;break;case"copy":case"cut":case"paste":N=MS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=fg}var R=(e&4)!==0,P=!R&&t==="scroll",x=R?g!==null?g+"Capture":null:g;R=[];for(var E=d,S;E!==null;){S=E;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,x!==null&&(D=ua(E,x),D!=null&&R.push(ya(E,D,S)))),P)break;E=E.return}0<R.length&&(g=new N(g,k,null,n,f),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",g&&n!==ih&&(k=n.relatedTarget||n.fromElement)&&(Is(k)||k[tr]))break e;if((N||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,N?(k=n.relatedTarget||n.toElement,N=d,k=k?Is(k):null,k!==null&&(P=$s(k),k!==P||k.tag!==5&&k.tag!==6)&&(k=null)):(N=null,k=d),N!==k)){if(R=dg,D="onMouseLeave",x="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(R=fg,D="onPointerLeave",x="onPointerEnter",E="pointer"),P=N==null?g:gi(N),S=k==null?g:gi(k),g=new R(D,E+"leave",N,n,f),g.target=P,g.relatedTarget=S,D=null,Is(f)===d&&(R=new R(x,E+"enter",k,n,f),R.target=S,R.relatedTarget=P,D=R),P=D,N&&k)t:{for(R=N,x=k,E=0,S=R;S;S=ii(S))E++;for(S=0,D=x;D;D=ii(D))S++;for(;0<E-S;)R=ii(R),E--;for(;0<S-E;)x=ii(x),S--;for(;E--;){if(R===x||x!==null&&R===x.alternate)break t;R=ii(R),x=ii(x)}R=null}else R=null;N!==null&&Sg(p,g,N,R,!1),k!==null&&P!==null&&Sg(p,P,k,R,!0)}}e:{if(g=d?gi(d):window,N=g.nodeName&&g.nodeName.toLowerCase(),N==="select"||N==="input"&&g.type==="file")var V=rx;else if(gg(g))if(H_)V=ax;else{V=ix;var O=sx}else(N=g.nodeName)&&N.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=ox);if(V&&(V=V(t,d))){G_(p,V,n,f);break e}O&&O(t,g,d),t==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&eh(g,"number",g.value)}switch(O=d?gi(d):window,t){case"focusin":(gg(O)||O.contentEditable==="true")&&(mi=O,hh=d,Xo=null);break;case"focusout":Xo=hh=mi=null;break;case"mousedown":fh=!0;break;case"contextmenu":case"mouseup":case"dragend":fh=!1,Eg(p,n,f);break;case"selectionchange":if(ux)break;case"keydown":case"keyup":Eg(p,n,f)}var v;if(Ff)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else fi?W_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&($_&&n.locale!=="ko"&&(fi||y!=="onCompositionStart"?y==="onCompositionEnd"&&fi&&(v=B_()):(Rr=f,Mf="value"in Rr?Rr.value:Rr.textContent,fi=!0)),O=pc(d,y),0<O.length&&(y=new hg(y,t,null,n,f),p.push({event:y,listeners:O}),v?y.data=v:(v=q_(n),v!==null&&(y.data=v)))),(v=JS?ZS(t,n):ex(t,n))&&(d=pc(d,"onBeforeInput"),0<d.length&&(f=new hg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=v))}rw(p,e)})}function ya(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ua(t,n),i!=null&&r.unshift(ya(t,i,s)),i=ua(t,e),i!=null&&r.push(ya(t,i,s))),t=t.return}return r}function ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=ua(n,i),u!=null&&o.unshift(ya(n,u,l))):s||(u=ua(n,i),u!=null&&o.push(ya(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var mx=/\r\n?/g,px=/\u0000|\uFFFD/g;function xg(t){return(typeof t=="string"?t:""+t).replace(mx,`
`).replace(px,"")}function xl(t,e,n){if(e=xg(e),xg(t)!==e&&n)throw Error(W(425))}function gc(){}var mh=null,ph=null;function gh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yh=typeof setTimeout=="function"?setTimeout:void 0,gx=typeof clearTimeout=="function"?clearTimeout:void 0,Ng=typeof Promise=="function"?Promise:void 0,yx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ng<"u"?function(t){return Ng.resolve(null).then(t).catch(vx)}:yh;function vx(t){setTimeout(function(){throw t})}function Td(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);fa(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),An="__reactFiber$"+Zi,va="__reactProps$"+Zi,tr="__reactContainer$"+Zi,vh="__reactEvents$"+Zi,_x="__reactListeners$"+Zi,wx="__reactHandles$"+Zi;function Is(t){var e=t[An];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[An]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kg(t);t!==null;){if(n=t[An])return n;t=kg(t)}return e}t=n,n=t.parentNode}return null}function Ua(t){return t=t[An]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function au(t){return t[va]||null}var _h=[],yi=-1;function ss(t){return{current:t}}function Ae(t){0>yi||(t.current=_h[yi],_h[yi]=null,yi--)}function Te(t,e){yi++,_h[yi]=t.current,t.current=e}var Qr={},wt=ss(Qr),jt=ss(!1),Ps=Qr;function Mi(t,e){var n=t.type.contextTypes;if(!n)return Qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dt(t){return t=t.childContextTypes,t!=null}function yc(){Ae(jt),Ae(wt)}function Ag(t,e,n){if(wt.current!==Qr)throw Error(W(168));Te(wt,e),Te(jt,n)}function iw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,sS(t)||"Unknown",s));return be({},n,r)}function vc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qr,Ps=wt.current,Te(wt,t),Te(jt,jt.current),!0}function Cg(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=iw(t,e,Ps),r.__reactInternalMemoizedMergedChildContext=t,Ae(jt),Ae(wt),Te(wt,t)):Ae(jt),Te(jt,n)}var qn=null,lu=!1,Id=!1;function ow(t){qn===null?qn=[t]:qn.push(t)}function Ex(t){lu=!0,ow(t)}function is(){if(!Id&&qn!==null){Id=!0;var t=0,e=ve;try{var n=qn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qn=null,lu=!1}catch(s){throw qn!==null&&(qn=qn.slice(t+1)),R_(jf,is),s}finally{ve=e,Id=!1}}return null}var vi=[],_i=0,_c=null,wc=0,Kt=[],Qt=0,Rs=null,Gn=1,Hn="";function vs(t,e){vi[_i++]=wc,vi[_i++]=_c,_c=t,wc=e}function aw(t,e,n){Kt[Qt++]=Gn,Kt[Qt++]=Hn,Kt[Qt++]=Rs,Rs=t;var r=Gn;t=Hn;var s=32-fn(r)-1;r&=~(1<<s),n+=1;var i=32-fn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gn=1<<32-fn(e)+s|n<<s|r,Hn=i+t}else Gn=1<<i|n<<s|r,Hn=t}function zf(t){t.return!==null&&(vs(t,1),aw(t,1,0))}function Bf(t){for(;t===_c;)_c=vi[--_i],vi[_i]=null,wc=vi[--_i],vi[_i]=null;for(;t===Rs;)Rs=Kt[--Qt],Kt[Qt]=null,Hn=Kt[--Qt],Kt[Qt]=null,Gn=Kt[--Qt],Kt[Qt]=null}var zt=null,Ft=null,Ce=!1,dn=null;function lw(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ft=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rs!==null?{id:Gn,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ft=null,!0):!1;default:return!1}}function wh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Eh(t){if(Ce){var e=Ft;if(e){var n=e;if(!Pg(t,e)){if(wh(t))throw Error(W(418));e=Vr(n.nextSibling);var r=zt;e&&Pg(t,e)?lw(r,n):(t.flags=t.flags&-4097|2,Ce=!1,zt=t)}}else{if(wh(t))throw Error(W(418));t.flags=t.flags&-4097|2,Ce=!1,zt=t}}}function Rg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Nl(t){if(t!==zt)return!1;if(!Ce)return Rg(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gh(t.type,t.memoizedProps)),e&&(e=Ft)){if(wh(t))throw cw(),Error(W(418));for(;e;)lw(t,e),e=Vr(e.nextSibling)}if(Rg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=Vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=zt?Vr(t.stateNode.nextSibling):null;return!0}function cw(){for(var t=Ft;t;)t=Vr(t.nextSibling)}function Li(){Ft=zt=null,Ce=!1}function $f(t){dn===null?dn=[t]:dn.push(t)}var Tx=lr.ReactCurrentBatchConfig;function Do(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function kl(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jg(t){var e=t._init;return e(t._payload)}function uw(t){function e(x,E){if(t){var S=x.deletions;S===null?(x.deletions=[E],x.flags|=16):S.push(E)}}function n(x,E){if(!t)return null;for(;E!==null;)e(x,E),E=E.sibling;return null}function r(x,E){for(x=new Map;E!==null;)E.key!==null?x.set(E.key,E):x.set(E.index,E),E=E.sibling;return x}function s(x,E){return x=Br(x,E),x.index=0,x.sibling=null,x}function i(x,E,S){return x.index=S,t?(S=x.alternate,S!==null?(S=S.index,S<E?(x.flags|=2,E):S):(x.flags|=2,E)):(x.flags|=1048576,E)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,E,S,D){return E===null||E.tag!==6?(E=Pd(S,x.mode,D),E.return=x,E):(E=s(E,S),E.return=x,E)}function u(x,E,S,D){var V=S.type;return V===hi?f(x,E,S.props.children,D,S.key):E!==null&&(E.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ir&&jg(V)===E.type)?(D=s(E,S.props),D.ref=Do(x,E,S),D.return=x,D):(D=Xl(S.type,S.key,S.props,null,x.mode,D),D.ref=Do(x,E,S),D.return=x,D)}function d(x,E,S,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=Rd(S,x.mode,D),E.return=x,E):(E=s(E,S.children||[]),E.return=x,E)}function f(x,E,S,D,V){return E===null||E.tag!==7?(E=Cs(S,x.mode,D,V),E.return=x,E):(E=s(E,S),E.return=x,E)}function p(x,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Pd(""+E,x.mode,S),E.return=x,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case gl:return S=Xl(E.type,E.key,E.props,null,x.mode,S),S.ref=Do(x,null,E),S.return=x,S;case di:return E=Rd(E,x.mode,S),E.return=x,E;case Ir:var D=E._init;return p(x,D(E._payload),S)}if(Vo(E)||Ao(E))return E=Cs(E,x.mode,S,null),E.return=x,E;kl(x,E)}return null}function g(x,E,S,D){var V=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return V!==null?null:l(x,E,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case gl:return S.key===V?u(x,E,S,D):null;case di:return S.key===V?d(x,E,S,D):null;case Ir:return V=S._init,g(x,E,V(S._payload),D)}if(Vo(S)||Ao(S))return V!==null?null:f(x,E,S,D,null);kl(x,S)}return null}function N(x,E,S,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return x=x.get(S)||null,l(E,x,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case gl:return x=x.get(D.key===null?S:D.key)||null,u(E,x,D,V);case di:return x=x.get(D.key===null?S:D.key)||null,d(E,x,D,V);case Ir:var O=D._init;return N(x,E,S,O(D._payload),V)}if(Vo(D)||Ao(D))return x=x.get(S)||null,f(E,x,D,V,null);kl(E,D)}return null}function k(x,E,S,D){for(var V=null,O=null,v=E,y=E=0,w=null;v!==null&&y<S.length;y++){v.index>y?(w=v,v=null):w=v.sibling;var T=g(x,v,S[y],D);if(T===null){v===null&&(v=w);break}t&&v&&T.alternate===null&&e(x,v),E=i(T,E,y),O===null?V=T:O.sibling=T,O=T,v=w}if(y===S.length)return n(x,v),Ce&&vs(x,y),V;if(v===null){for(;y<S.length;y++)v=p(x,S[y],D),v!==null&&(E=i(v,E,y),O===null?V=v:O.sibling=v,O=v);return Ce&&vs(x,y),V}for(v=r(x,v);y<S.length;y++)w=N(v,x,y,S[y],D),w!==null&&(t&&w.alternate!==null&&v.delete(w.key===null?y:w.key),E=i(w,E,y),O===null?V=w:O.sibling=w,O=w);return t&&v.forEach(function(A){return e(x,A)}),Ce&&vs(x,y),V}function R(x,E,S,D){var V=Ao(S);if(typeof V!="function")throw Error(W(150));if(S=V.call(S),S==null)throw Error(W(151));for(var O=V=null,v=E,y=E=0,w=null,T=S.next();v!==null&&!T.done;y++,T=S.next()){v.index>y?(w=v,v=null):w=v.sibling;var A=g(x,v,T.value,D);if(A===null){v===null&&(v=w);break}t&&v&&A.alternate===null&&e(x,v),E=i(A,E,y),O===null?V=A:O.sibling=A,O=A,v=w}if(T.done)return n(x,v),Ce&&vs(x,y),V;if(v===null){for(;!T.done;y++,T=S.next())T=p(x,T.value,D),T!==null&&(E=i(T,E,y),O===null?V=T:O.sibling=T,O=T);return Ce&&vs(x,y),V}for(v=r(x,v);!T.done;y++,T=S.next())T=N(v,x,y,T.value,D),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?y:T.key),E=i(T,E,y),O===null?V=T:O.sibling=T,O=T);return t&&v.forEach(function(C){return e(x,C)}),Ce&&vs(x,y),V}function P(x,E,S,D){if(typeof S=="object"&&S!==null&&S.type===hi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case gl:e:{for(var V=S.key,O=E;O!==null;){if(O.key===V){if(V=S.type,V===hi){if(O.tag===7){n(x,O.sibling),E=s(O,S.props.children),E.return=x,x=E;break e}}else if(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ir&&jg(V)===O.type){n(x,O.sibling),E=s(O,S.props),E.ref=Do(x,O,S),E.return=x,x=E;break e}n(x,O);break}else e(x,O);O=O.sibling}S.type===hi?(E=Cs(S.props.children,x.mode,D,S.key),E.return=x,x=E):(D=Xl(S.type,S.key,S.props,null,x.mode,D),D.ref=Do(x,E,S),D.return=x,x=D)}return o(x);case di:e:{for(O=S.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(x,E.sibling),E=s(E,S.children||[]),E.return=x,x=E;break e}else{n(x,E);break}else e(x,E);E=E.sibling}E=Rd(S,x.mode,D),E.return=x,x=E}return o(x);case Ir:return O=S._init,P(x,E,O(S._payload),D)}if(Vo(S))return k(x,E,S,D);if(Ao(S))return R(x,E,S,D);kl(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(x,E.sibling),E=s(E,S),E.return=x,x=E):(n(x,E),E=Pd(S,x.mode,D),E.return=x,x=E),o(x)):n(x,E)}return P}var Vi=uw(!0),dw=uw(!1),Ec=ss(null),Tc=null,wi=null,Wf=null;function qf(){Wf=wi=Tc=null}function Gf(t){var e=Ec.current;Ae(Ec),t._currentValue=e}function Th(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ai(t,e){Tc=t,Wf=wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(Wf!==t)if(t={context:t,memoizedValue:e,next:null},wi===null){if(Tc===null)throw Error(W(308));wi=t,Tc.dependencies={lanes:0,firstContext:t}}else wi=wi.next=t;return e}var Ss=null;function Hf(t){Ss===null?Ss=[t]:Ss.push(t)}function hw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Hf(e)):(n.next=s.next,s.next=n),e.interleaved=n,nr(t,r)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sr=!1;function Kf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,nr(t,n)}return s=r.interleaved,s===null?(e.next=e,Hf(r)):(e.next=s.next,s.next=e),r.interleaved=e,nr(t,n)}function ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Df(t,n)}}function Dg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ic(t,e,n,r){var s=t.updateQueue;Sr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,N=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:N,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,R=l;switch(g=e,N=n,R.tag){case 1:if(k=R.payload,typeof k=="function"){p=k.call(N,p,g);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=R.payload,g=typeof k=="function"?k.call(N,p,g):k,g==null)break e;p=be({},p,g);break e;case 2:Sr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else N={eventTime:N,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=N,u=p):f=f.next=N,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ds|=o,t.lanes=o,t.memoizedState=p}}function bg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var za={},Dn=ss(za),_a=ss(za),wa=ss(za);function xs(t){if(t===za)throw Error(W(174));return t}function Qf(t,e){switch(Te(wa,e),Te(_a,t),Te(Dn,za),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nh(e,t)}Ae(Dn),Te(Dn,e)}function Fi(){Ae(Dn),Ae(_a),Ae(wa)}function mw(t){xs(wa.current);var e=xs(Dn.current),n=nh(e,t.type);e!==n&&(Te(_a,t),Te(Dn,n))}function Yf(t){_a.current===t&&(Ae(Dn),Ae(_a))}var Re=ss(0);function Sc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sd=[];function Xf(){for(var t=0;t<Sd.length;t++)Sd[t]._workInProgressVersionPrimary=null;Sd.length=0}var Gl=lr.ReactCurrentDispatcher,xd=lr.ReactCurrentBatchConfig,js=0,je=null,Ge=null,Xe=null,xc=!1,Jo=!1,Ea=0,Ix=0;function ft(){throw Error(W(321))}function Jf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function Zf(t,e,n,r,s,i){if(js=i,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gl.current=t===null||t.memoizedState===null?kx:Ax,t=n(r,s),Jo){i=0;do{if(Jo=!1,Ea=0,25<=i)throw Error(W(301));i+=1,Xe=Ge=null,e.updateQueue=null,Gl.current=Cx,t=n(r,s)}while(Jo)}if(Gl.current=Nc,e=Ge!==null&&Ge.next!==null,js=0,Xe=Ge=je=null,xc=!1,e)throw Error(W(300));return t}function em(){var t=Ea!==0;return Ea=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?je.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function en(){if(Ge===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=Xe===null?je.memoizedState:Xe.next;if(e!==null)Xe=e,Ge=t;else{if(t===null)throw Error(W(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Xe===null?je.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Ta(t,e){return typeof e=="function"?e(t):e}function Nd(t){var e=en(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Ge,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((js&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,je.lanes|=f,Ds|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,pn(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,je.lanes|=i,Ds|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kd(t){var e=en(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);pn(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function pw(){}function gw(t,e){var n=je,r=en(),s=e(),i=!pn(r.memoizedState,s);if(i&&(r.memoizedState=s,Rt=!0),r=r.queue,tm(_w.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Ia(9,vw.bind(null,n,r,s,e),void 0,null),Je===null)throw Error(W(349));js&30||yw(n,e,s)}return s}function yw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vw(t,e,n,r){e.value=n,e.getSnapshot=r,ww(e)&&Ew(t)}function _w(t,e,n){return n(function(){ww(e)&&Ew(t)})}function ww(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function Ew(t){var e=nr(t,1);e!==null&&mn(e,t,1,-1)}function Og(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:t},e.queue=t,t=t.dispatch=Nx.bind(null,je,t),[e.memoizedState,t]}function Ia(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tw(){return en().memoizedState}function Hl(t,e,n,r){var s=Nn();je.flags|=t,s.memoizedState=Ia(1|e,n,void 0,r===void 0?null:r)}function cu(t,e,n,r){var s=en();r=r===void 0?null:r;var i=void 0;if(Ge!==null){var o=Ge.memoizedState;if(i=o.destroy,r!==null&&Jf(r,o.deps)){s.memoizedState=Ia(e,n,i,r);return}}je.flags|=t,s.memoizedState=Ia(1|e,n,i,r)}function Mg(t,e){return Hl(8390656,8,t,e)}function tm(t,e){return cu(2048,8,t,e)}function Iw(t,e){return cu(4,2,t,e)}function Sw(t,e){return cu(4,4,t,e)}function xw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Nw(t,e,n){return n=n!=null?n.concat([t]):null,cu(4,4,xw.bind(null,e,t),n)}function nm(){}function kw(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Aw(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cw(t,e,n){return js&21?(pn(n,e)||(n=b_(),je.lanes|=n,Ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function Sx(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=xd.transition;xd.transition={};try{t(!1),e()}finally{ve=n,xd.transition=r}}function Pw(){return en().memoizedState}function xx(t,e,n){var r=zr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rw(t))jw(e,n);else if(n=hw(t,e,n,r),n!==null){var s=St();mn(n,t,r,s),Dw(n,e,r)}}function Nx(t,e,n){var r=zr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rw(t))jw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,pn(l,o)){var u=e.interleaved;u===null?(s.next=s,Hf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=hw(t,e,s,r),n!==null&&(s=St(),mn(n,t,r,s),Dw(n,e,r))}}function Rw(t){var e=t.alternate;return t===je||e!==null&&e===je}function jw(t,e){Jo=xc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Dw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Df(t,n)}}var Nc={readContext:Zt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},kx={readContext:Zt,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:Mg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hl(4194308,4,xw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hl(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xx.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:Og,useDebugValue:nm,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=Og(!1),e=t[0];return t=Sx.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,s=Nn();if(Ce){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Je===null)throw Error(W(349));js&30||yw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Mg(_w.bind(null,r,i,t),[t]),r.flags|=2048,Ia(9,vw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Nn(),e=Je.identifierPrefix;if(Ce){var n=Hn,r=Gn;n=(r&~(1<<32-fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ea++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ix++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ax={readContext:Zt,useCallback:kw,useContext:Zt,useEffect:tm,useImperativeHandle:Nw,useInsertionEffect:Iw,useLayoutEffect:Sw,useMemo:Aw,useReducer:Nd,useRef:Tw,useState:function(){return Nd(Ta)},useDebugValue:nm,useDeferredValue:function(t){var e=en();return Cw(e,Ge.memoizedState,t)},useTransition:function(){var t=Nd(Ta)[0],e=en().memoizedState;return[t,e]},useMutableSource:pw,useSyncExternalStore:gw,useId:Pw,unstable_isNewReconciler:!1},Cx={readContext:Zt,useCallback:kw,useContext:Zt,useEffect:tm,useImperativeHandle:Nw,useInsertionEffect:Iw,useLayoutEffect:Sw,useMemo:Aw,useReducer:kd,useRef:Tw,useState:function(){return kd(Ta)},useDebugValue:nm,useDeferredValue:function(t){var e=en();return Ge===null?e.memoizedState=t:Cw(e,Ge.memoizedState,t)},useTransition:function(){var t=kd(Ta)[0],e=en().memoizedState;return[t,e]},useMutableSource:pw,useSyncExternalStore:gw,useId:Pw,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ih(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uu={isMounted:function(t){return(t=t._reactInternals)?$s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=St(),s=zr(t),i=Xn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Fr(t,i,s),e!==null&&(mn(e,t,s,r),ql(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=St(),s=zr(t),i=Xn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Fr(t,i,s),e!==null&&(mn(e,t,s,r),ql(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),r=zr(t),s=Xn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Fr(t,s,r),e!==null&&(mn(e,t,r,n),ql(e,t,r))}};function Lg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!pa(n,r)||!pa(s,i):!0}function bw(t,e,n){var r=!1,s=Qr,i=e.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(s=Dt(e)?Ps:wt.current,r=e.contextTypes,i=(r=r!=null)?Mi(t,s):Qr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Vg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uu.enqueueReplaceState(e,e.state,null)}function Sh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Kf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zt(i):(i=Dt(e)?Ps:wt.current,s.context=Mi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ih(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&uu.enqueueReplaceState(s,s.state,null),Ic(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ui(t,e){try{var n="",r=e;do n+=rS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ad(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Px=typeof WeakMap=="function"?WeakMap:Map;function Ow(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ac||(Ac=!0,Oh=r),xh(t,e)},n}function Mw(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){xh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){xh(t,e),typeof r!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Px;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Wx.bind(null,t,e,n),e.then(t,t))}function Ug(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Fr(n,e,1))),n.lanes|=1),t)}var Rx=lr.ReactCurrentOwner,Rt=!1;function Tt(t,e,n,r){e.child=t===null?dw(e,null,n,r):Vi(e,t.child,n,r)}function Bg(t,e,n,r,s){n=n.render;var i=e.ref;return Ai(e,s),r=Zf(t,e,n,r,i,s),n=em(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(Ce&&n&&zf(e),e.flags|=1,Tt(t,e,r,s),e.child)}function $g(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!um(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Lw(t,e,i,r,s)):(t=Xl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:pa,n(o,r)&&t.ref===e.ref)return rr(t,e,s)}return e.flags|=1,t=Br(i,r),t.ref=e.ref,t.return=e,e.child=t}function Lw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(pa(i,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,rr(t,e,s)}return Nh(t,e,n,r,s)}function Vw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ti,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Ti,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Ti,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Ti,Mt),Mt|=r;return Tt(t,e,s,n),e.child}function Fw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nh(t,e,n,r,s){var i=Dt(n)?Ps:wt.current;return i=Mi(e,i),Ai(e,s),n=Zf(t,e,n,r,i,s),r=em(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(Ce&&r&&zf(e),e.flags|=1,Tt(t,e,n,s),e.child)}function Wg(t,e,n,r,s){if(Dt(n)){var i=!0;vc(e)}else i=!1;if(Ai(e,s),e.stateNode===null)Kl(t,e),bw(e,n,r),Sh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Zt(d):(d=Dt(n)?Ps:wt.current,d=Mi(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Vg(e,o,r,d),Sr=!1;var g=e.memoizedState;o.state=g,Ic(e,r,o,s),u=e.memoizedState,l!==r||g!==u||jt.current||Sr?(typeof f=="function"&&(Ih(e,n,f,r),u=e.memoizedState),(l=Sr||Lg(e,n,l,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,fw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:cn(e.type,l),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Zt(u):(u=Dt(n)?Ps:wt.current,u=Mi(e,u));var N=n.getDerivedStateFromProps;(f=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&Vg(e,o,r,u),Sr=!1,g=e.memoizedState,o.state=g,Ic(e,r,o,s);var k=e.memoizedState;l!==p||g!==k||jt.current||Sr?(typeof N=="function"&&(Ih(e,n,N,r),k=e.memoizedState),(d=Sr||Lg(e,n,d,r,g,k,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return kh(t,e,n,r,i,s)}function kh(t,e,n,r,s,i){Fw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Cg(e,n,!1),rr(t,e,i);r=e.stateNode,Rx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Vi(e,t.child,null,i),e.child=Vi(e,null,l,i)):Tt(t,e,l,i),e.memoizedState=r.state,s&&Cg(e,n,!0),e.child}function Uw(t){var e=t.stateNode;e.pendingContext?Ag(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ag(t,e.context,!1),Qf(t,e.containerInfo)}function qg(t,e,n,r,s){return Li(),$f(s),e.flags|=256,Tt(t,e,n,r),e.child}var Ah={dehydrated:null,treeContext:null,retryLane:0};function Ch(t){return{baseLanes:t,cachePool:null,transitions:null}}function zw(t,e,n){var r=e.pendingProps,s=Re.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Re,s&1),t===null)return Eh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=fu(o,r,0,null),t=Cs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ch(n),e.memoizedState=Ah,t):rm(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return jx(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Br(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Br(l,i):(i=Cs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ch(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ah,r}return i=t.child,t=i.sibling,r=Br(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rm(t,e){return e=fu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Al(t,e,n,r){return r!==null&&$f(r),Vi(e,t.child,null,n),t=rm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ad(Error(W(422))),Al(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=fu({mode:"visible",children:r.children},s,0,null),i=Cs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Vi(e,t.child,null,o),e.child.memoizedState=Ch(o),e.memoizedState=Ah,i);if(!(e.mode&1))return Al(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(W(419)),r=Ad(i,r,void 0),Al(t,e,o,r)}if(l=(o&t.childLanes)!==0,Rt||l){if(r=Je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,nr(t,s),mn(r,t,s,-1))}return cm(),r=Ad(Error(W(421))),Al(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=qx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ft=Vr(s.nextSibling),zt=e,Ce=!0,dn=null,t!==null&&(Kt[Qt++]=Gn,Kt[Qt++]=Hn,Kt[Qt++]=Rs,Gn=t.id,Hn=t.overflow,Rs=e),e=rm(e,r.children),e.flags|=4096,e)}function Gg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Th(t.return,e,n)}function Cd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Bw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Tt(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gg(t,n,e);else if(t.tag===19)Gg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Sc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Cd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Sc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Cd(e,!0,n,null,i);break;case"together":Cd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Dx(t,e,n){switch(e.tag){case 3:Uw(e),Li();break;case 5:mw(e);break;case 1:Dt(e.type)&&vc(e);break;case 4:Qf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Ec,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?zw(t,e,n):(Te(Re,Re.current&1),t=rr(t,e,n),t!==null?t.sibling:null);Te(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Bw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,Vw(t,e,n)}return rr(t,e,n)}var $w,Ph,Ww,qw;$w=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ph=function(){};Ww=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,xs(Dn.current);var i=null;switch(n){case"input":s=Jd(t,s),r=Jd(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=th(t,s),r=th(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gc)}rh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(la.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(la.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ne("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};qw=function(t,e,n,r){n!==r&&(e.flags|=4)};function bo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bx(t,e,n){var r=e.pendingProps;switch(Bf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Dt(e.type)&&yc(),mt(e),null;case 3:return r=e.stateNode,Fi(),Ae(jt),Ae(wt),Xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Nl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dn!==null&&(Vh(dn),dn=null))),Ph(t,e),mt(e),null;case 5:Yf(e);var s=xs(wa.current);if(n=e.type,t!==null&&e.stateNode!=null)Ww(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return mt(e),null}if(t=xs(Dn.current),Nl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[An]=e,r[va]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<Uo.length;s++)Ne(Uo[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":tg(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":rg(r,i),Ne("invalid",r)}rh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&xl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&xl(r.textContent,l,t),s=["children",""+l]):la.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":yl(r),ng(r,i,!0);break;case"textarea":yl(r),sg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=gc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=__(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[An]=e,t[va]=r,$w(t,e,!1,!1),e.stateNode=t;e:{switch(o=sh(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<Uo.length;s++)Ne(Uo[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":tg(t,r),s=Jd(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":rg(t,r),s=th(t,r),Ne("invalid",t);break;default:s=r}rh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?T_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&w_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ca(t,u):typeof u=="number"&&ca(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(la.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ne("scroll",t):u!=null&&kf(t,i,u,o))}switch(n){case"input":yl(t),ng(t,r,!1);break;case"textarea":yl(t),sg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Si(t,!!r.multiple,i,!1):r.defaultValue!=null&&Si(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)qw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=xs(wa.current),xs(Dn.current),Nl(e)){if(r=e.stateNode,n=e.memoizedProps,r[An]=e,(i=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:xl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=e,e.stateNode=r}return mt(e),null;case 13:if(Ae(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Ft!==null&&e.mode&1&&!(e.flags&128))cw(),Li(),e.flags|=98560,i=!1;else if(i=Nl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[An]=e}else Li(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),i=!1}else dn!==null&&(Vh(dn),dn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?He===0&&(He=3):cm())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Fi(),Ph(t,e),t===null&&ga(e.stateNode.containerInfo),mt(e),null;case 10:return Gf(e.type._context),mt(e),null;case 17:return Dt(e.type)&&yc(),mt(e),null;case 19:if(Ae(Re),i=e.memoizedState,i===null)return mt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)bo(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Sc(t),o!==null){for(e.flags|=128,bo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>zi&&(e.flags|=128,r=!0,bo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Sc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return mt(e),null}else 2*Ue()-i.renderingStartTime>zi&&n!==1073741824&&(e.flags|=128,r=!0,bo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=Re.current,Te(Re,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return lm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function Ox(t,e){switch(Bf(e),e.tag){case 1:return Dt(e.type)&&yc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fi(),Ae(jt),Ae(wt),Xf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yf(e),null;case 13:if(Ae(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Li()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Re),null;case 4:return Fi(),null;case 10:return Gf(e.type._context),null;case 22:case 23:return lm(),null;case 24:return null;default:return null}}var Cl=!1,vt=!1,Mx=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ei(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Rh(t,e,n){try{n()}catch(r){Le(t,e,r)}}var Hg=!1;function Lx(t,e){if(mh=fc,t=Y_(),Uf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var N;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(N=p.firstChild)!==null;)g=p,p=N;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(N=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=N}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ph={focusedElem:t,selectionRange:n},fc=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var R=k.memoizedProps,P=k.memoizedState,x=e.stateNode,E=x.getSnapshotBeforeUpdate(e.elementType===e.type?R:cn(e.type,R),P);x.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(D){Le(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return k=Hg,Hg=!1,k}function Zo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rh(e,n,i)}s=s.next}while(s!==r)}}function du(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gw(t){var e=t.alternate;e!==null&&(t.alternate=null,Gw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[An],delete e[va],delete e[vh],delete e[_x],delete e[wx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hw(t){return t.tag===5||t.tag===3||t.tag===4}function Kg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gc));else if(r!==4&&(t=t.child,t!==null))for(Dh(t,e,n),t=t.sibling;t!==null;)Dh(t,e,n),t=t.sibling}function bh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bh(t,e,n),t=t.sibling;t!==null;)bh(t,e,n),t=t.sibling}var rt=null,un=!1;function wr(t,e,n){for(n=n.child;n!==null;)Kw(t,e,n),n=n.sibling}function Kw(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(ru,n)}catch{}switch(n.tag){case 5:vt||Ei(n,e);case 6:var r=rt,s=un;rt=null,wr(t,e,n),rt=r,un=s,rt!==null&&(un?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(un?(t=rt,n=n.stateNode,t.nodeType===8?Td(t.parentNode,n):t.nodeType===1&&Td(t,n),fa(t)):Td(rt,n.stateNode));break;case 4:r=rt,s=un,rt=n.stateNode.containerInfo,un=!0,wr(t,e,n),rt=r,un=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Rh(n,e,o),s=s.next}while(s!==r)}wr(t,e,n);break;case 1:if(!vt&&(Ei(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,e,l)}wr(t,e,n);break;case 21:wr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,wr(t,e,n),vt=r):wr(t,e,n);break;default:wr(t,e,n)}}function Qg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Mx),e.forEach(function(r){var s=Gx.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:rt=l.stateNode,un=!1;break e;case 3:rt=l.stateNode.containerInfo,un=!0;break e;case 4:rt=l.stateNode.containerInfo,un=!0;break e}l=l.return}if(rt===null)throw Error(W(160));Kw(i,o,s),rt=null,un=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Le(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qw(e,t),e=e.sibling}function Qw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),xn(t),r&4){try{Zo(3,t,t.return),du(3,t)}catch(R){Le(t,t.return,R)}try{Zo(5,t,t.return)}catch(R){Le(t,t.return,R)}}break;case 1:ln(e,t),xn(t),r&512&&n!==null&&Ei(n,n.return);break;case 5:if(ln(e,t),xn(t),r&512&&n!==null&&Ei(n,n.return),t.flags&32){var s=t.stateNode;try{ca(s,"")}catch(R){Le(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&y_(s,i),sh(l,o);var d=sh(l,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?T_(s,p):f==="dangerouslySetInnerHTML"?w_(s,p):f==="children"?ca(s,p):kf(s,f,p,d)}switch(l){case"input":Zd(s,i);break;case"textarea":v_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var N=i.value;N!=null?Si(s,!!i.multiple,N,!1):g!==!!i.multiple&&(i.defaultValue!=null?Si(s,!!i.multiple,i.defaultValue,!0):Si(s,!!i.multiple,i.multiple?[]:"",!1))}s[va]=i}catch(R){Le(t,t.return,R)}}break;case 6:if(ln(e,t),xn(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Le(t,t.return,R)}}break;case 3:if(ln(e,t),xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fa(e.containerInfo)}catch(R){Le(t,t.return,R)}break;case 4:ln(e,t),xn(t);break;case 13:ln(e,t),xn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(om=Ue())),r&4&&Qg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(d=vt)||f,ln(e,t),vt=d):ln(e,t),xn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Y=t,f=t.child;f!==null;){for(p=Y=f;Y!==null;){switch(g=Y,N=g.child,g.tag){case 0:case 11:case 14:case 15:Zo(4,g,g.return);break;case 1:Ei(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(R){Le(r,n,R)}}break;case 5:Ei(g,g.return);break;case 22:if(g.memoizedState!==null){Xg(p);continue}}N!==null?(N.return=g,Y=N):Xg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=E_("display",o))}catch(R){Le(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){Le(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ln(e,t),xn(t),r&4&&Qg(t);break;case 21:break;default:ln(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Hw(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ca(s,""),r.flags&=-33);var i=Kg(t);bh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Kg(t);Dh(t,l,o);break;default:throw Error(W(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Vx(t,e,n){Y=t,Yw(t)}function Yw(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Cl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||vt;l=Cl;var d=vt;if(Cl=o,(vt=u)&&!d)for(Y=s;Y!==null;)o=Y,u=o.child,o.tag===22&&o.memoizedState!==null?Jg(s):u!==null?(u.return=o,Y=u):Jg(s);for(;i!==null;)Y=i,Yw(i),i=i.sibling;Y=s,Cl=l,vt=d}Yg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):Yg(t)}}function Yg(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||du(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:cn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&bg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&fa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}vt||e.flags&512&&jh(e)}catch(g){Le(e,e.return,g)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Xg(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Jg(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{du(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{jh(e)}catch(u){Le(e,i,u)}break;case 5:var o=e.return;try{jh(e)}catch(u){Le(e,o,u)}}}catch(u){Le(e,e.return,u)}if(e===t){Y=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Y=l;break}Y=e.return}}var Fx=Math.ceil,kc=lr.ReactCurrentDispatcher,sm=lr.ReactCurrentOwner,Xt=lr.ReactCurrentBatchConfig,me=0,Je=null,$e=null,ot=0,Mt=0,Ti=ss(0),He=0,Sa=null,Ds=0,hu=0,im=0,ea=null,Ct=null,om=0,zi=1/0,Wn=null,Ac=!1,Oh=null,Ur=null,Pl=!1,jr=null,Cc=0,ta=0,Mh=null,Ql=-1,Yl=0;function St(){return me&6?Ue():Ql!==-1?Ql:Ql=Ue()}function zr(t){return t.mode&1?me&2&&ot!==0?ot&-ot:Tx.transition!==null?(Yl===0&&(Yl=b_()),Yl):(t=ve,t!==0||(t=window.event,t=t===void 0?16:z_(t.type)),t):1}function mn(t,e,n,r){if(50<ta)throw ta=0,Mh=null,Error(W(185));Va(t,n,r),(!(me&2)||t!==Je)&&(t===Je&&(!(me&2)&&(hu|=n),He===4&&Nr(t,ot)),bt(t,r),n===1&&me===0&&!(e.mode&1)&&(zi=Ue()+500,lu&&is()))}function bt(t,e){var n=t.callbackNode;TS(t,e);var r=hc(t,t===Je?ot:0);if(r===0)n!==null&&ag(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ag(n),e===1)t.tag===0?Ex(Zg.bind(null,t)):ow(Zg.bind(null,t)),yx(function(){!(me&6)&&is()}),n=null;else{switch(O_(r)){case 1:n=jf;break;case 4:n=j_;break;case 16:n=dc;break;case 536870912:n=D_;break;default:n=dc}n=s0(n,Xw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Xw(t,e){if(Ql=-1,Yl=0,me&6)throw Error(W(327));var n=t.callbackNode;if(Ci()&&t.callbackNode!==n)return null;var r=hc(t,t===Je?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pc(t,r);else{e=r;var s=me;me|=2;var i=Zw();(Je!==t||ot!==e)&&(Wn=null,zi=Ue()+500,As(t,e));do try{Bx();break}catch(l){Jw(t,l)}while(!0);qf(),kc.current=i,me=s,$e!==null?e=0:(Je=null,ot=0,e=He)}if(e!==0){if(e===2&&(s=ch(t),s!==0&&(r=s,e=Lh(t,s))),e===1)throw n=Sa,As(t,0),Nr(t,r),bt(t,Ue()),n;if(e===6)Nr(t,r);else{if(s=t.current.alternate,!(r&30)&&!Ux(s)&&(e=Pc(t,r),e===2&&(i=ch(t),i!==0&&(r=i,e=Lh(t,i))),e===1))throw n=Sa,As(t,0),Nr(t,r),bt(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:_s(t,Ct,Wn);break;case 3:if(Nr(t,r),(r&130023424)===r&&(e=om+500-Ue(),10<e)){if(hc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){St(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yh(_s.bind(null,t,Ct,Wn),e);break}_s(t,Ct,Wn);break;case 4:if(Nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-fn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Fx(r/1960))-r,10<r){t.timeoutHandle=yh(_s.bind(null,t,Ct,Wn),r);break}_s(t,Ct,Wn);break;case 5:_s(t,Ct,Wn);break;default:throw Error(W(329))}}}return bt(t,Ue()),t.callbackNode===n?Xw.bind(null,t):null}function Lh(t,e){var n=ea;return t.current.memoizedState.isDehydrated&&(As(t,e).flags|=256),t=Pc(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&Vh(e)),t}function Vh(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function Ux(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!pn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nr(t,e){for(e&=~im,e&=~hu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fn(e),r=1<<n;t[n]=-1,e&=~r}}function Zg(t){if(me&6)throw Error(W(327));Ci();var e=hc(t,0);if(!(e&1))return bt(t,Ue()),null;var n=Pc(t,e);if(t.tag!==0&&n===2){var r=ch(t);r!==0&&(e=r,n=Lh(t,r))}if(n===1)throw n=Sa,As(t,0),Nr(t,e),bt(t,Ue()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_s(t,Ct,Wn),bt(t,Ue()),null}function am(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(zi=Ue()+500,lu&&is())}}function bs(t){jr!==null&&jr.tag===0&&!(me&6)&&Ci();var e=me;me|=1;var n=Xt.transition,r=ve;try{if(Xt.transition=null,ve=1,t)return t()}finally{ve=r,Xt.transition=n,me=e,!(me&6)&&is()}}function lm(){Mt=Ti.current,Ae(Ti)}function As(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gx(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Bf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yc();break;case 3:Fi(),Ae(jt),Ae(wt),Xf();break;case 5:Yf(r);break;case 4:Fi();break;case 13:Ae(Re);break;case 19:Ae(Re);break;case 10:Gf(r.type._context);break;case 22:case 23:lm()}n=n.return}if(Je=t,$e=t=Br(t.current,null),ot=Mt=e,He=0,Sa=null,im=hu=Ds=0,Ct=ea=null,Ss!==null){for(e=0;e<Ss.length;e++)if(n=Ss[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ss=null}return t}function Jw(t,e){do{var n=$e;try{if(qf(),Gl.current=Nc,xc){for(var r=je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xc=!1}if(js=0,Xe=Ge=je=null,Jo=!1,Ea=0,sm.current=null,n===null||n.return===null){He=1,Sa=e,$e=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=ot,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var N=Ug(o);if(N!==null){N.flags&=-257,zg(N,o,l,i,e),N.mode&1&&Fg(i,d,e),e=N,u=d;var k=e.updateQueue;if(k===null){var R=new Set;R.add(u),e.updateQueue=R}else k.add(u);break e}else{if(!(e&1)){Fg(i,d,e),cm();break e}u=Error(W(426))}}else if(Ce&&l.mode&1){var P=Ug(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),zg(P,o,l,i,e),$f(Ui(u,l));break e}}i=u=Ui(u,l),He!==4&&(He=2),ea===null?ea=[i]:ea.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=Ow(i,u,e);Dg(i,x);break e;case 1:l=u;var E=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ur===null||!Ur.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Mw(i,l,e);Dg(i,D);break e}}i=i.return}while(i!==null)}t0(n)}catch(V){e=V,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function Zw(){var t=kc.current;return kc.current=Nc,t===null?Nc:t}function cm(){(He===0||He===3||He===2)&&(He=4),Je===null||!(Ds&268435455)&&!(hu&268435455)||Nr(Je,ot)}function Pc(t,e){var n=me;me|=2;var r=Zw();(Je!==t||ot!==e)&&(Wn=null,As(t,e));do try{zx();break}catch(s){Jw(t,s)}while(!0);if(qf(),me=n,kc.current=r,$e!==null)throw Error(W(261));return Je=null,ot=0,He}function zx(){for(;$e!==null;)e0($e)}function Bx(){for(;$e!==null&&!fS();)e0($e)}function e0(t){var e=r0(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?t0(t):$e=e,sm.current=null}function t0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ox(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,$e=null;return}}else if(n=bx(n,e,Mt),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);He===0&&(He=5)}function _s(t,e,n){var r=ve,s=Xt.transition;try{Xt.transition=null,ve=1,$x(t,e,n,r)}finally{Xt.transition=s,ve=r}return null}function $x(t,e,n,r){do Ci();while(jr!==null);if(me&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(IS(t,i),t===Je&&($e=Je=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pl||(Pl=!0,s0(dc,function(){return Ci(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xt.transition,Xt.transition=null;var o=ve;ve=1;var l=me;me|=4,sm.current=null,Lx(t,n),Qw(n,t),cx(ph),fc=!!mh,ph=mh=null,t.current=n,Vx(n),mS(),me=l,ve=o,Xt.transition=i}else t.current=n;if(Pl&&(Pl=!1,jr=t,Cc=s),i=t.pendingLanes,i===0&&(Ur=null),yS(n.stateNode),bt(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ac)throw Ac=!1,t=Oh,Oh=null,t;return Cc&1&&t.tag!==0&&Ci(),i=t.pendingLanes,i&1?t===Mh?ta++:(ta=0,Mh=t):ta=0,is(),null}function Ci(){if(jr!==null){var t=O_(Cc),e=Xt.transition,n=ve;try{if(Xt.transition=null,ve=16>t?16:t,jr===null)var r=!1;else{if(t=jr,jr=null,Cc=0,me&6)throw Error(W(331));var s=me;for(me|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Y=d;Y!==null;){var f=Y;switch(f.tag){case 0:case 11:case 15:Zo(8,f,i)}var p=f.child;if(p!==null)p.return=f,Y=p;else for(;Y!==null;){f=Y;var g=f.sibling,N=f.return;if(Gw(f),f===d){Y=null;break}if(g!==null){g.return=N,Y=g;break}Y=N}}}var k=i.alternate;if(k!==null){var R=k.child;if(R!==null){k.child=null;do{var P=R.sibling;R.sibling=null,R=P}while(R!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zo(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Y=x;break e}Y=i.return}}var E=t.current;for(Y=E;Y!==null;){o=Y;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Y=S;else e:for(o=E;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:du(9,l)}}catch(V){Le(l,l.return,V)}if(l===o){Y=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,Y=D;break e}Y=l.return}}if(me=s,is(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(ru,t)}catch{}r=!0}return r}finally{ve=n,Xt.transition=e}}return!1}function ey(t,e,n){e=Ui(n,e),e=Ow(t,e,1),t=Fr(t,e,1),e=St(),t!==null&&(Va(t,1,e),bt(t,e))}function Le(t,e,n){if(t.tag===3)ey(t,t,n);else for(;e!==null;){if(e.tag===3){ey(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ur===null||!Ur.has(r))){t=Ui(n,t),t=Mw(e,t,1),e=Fr(e,t,1),t=St(),e!==null&&(Va(e,1,t),bt(e,t));break}}e=e.return}}function Wx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(ot&n)===n&&(He===4||He===3&&(ot&130023424)===ot&&500>Ue()-om?As(t,0):im|=n),bt(t,e)}function n0(t,e){e===0&&(t.mode&1?(e=wl,wl<<=1,!(wl&130023424)&&(wl=4194304)):e=1);var n=St();t=nr(t,e),t!==null&&(Va(t,e,n),bt(t,n))}function qx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),n0(t,n)}function Gx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),n0(t,n)}var r0;r0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,Dx(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Ce&&e.flags&1048576&&aw(e,wc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Kl(t,e),t=e.pendingProps;var s=Mi(e,wt.current);Ai(e,n),s=Zf(null,e,r,t,s,n);var i=em();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(i=!0,vc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kf(e),s.updater=uu,e.stateNode=s,s._reactInternals=e,Sh(e,r,t,n),e=kh(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&zf(e),Tt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Kl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Kx(r),t=cn(r,t),s){case 0:e=Nh(null,e,r,t,n);break e;case 1:e=Wg(null,e,r,t,n);break e;case 11:e=Bg(null,e,r,t,n);break e;case 14:e=$g(null,e,r,cn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Nh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Wg(t,e,r,s,n);case 3:e:{if(Uw(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,fw(t,e),Ic(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ui(Error(W(423)),e),e=qg(t,e,r,n,s);break e}else if(r!==s){s=Ui(Error(W(424)),e),e=qg(t,e,r,n,s);break e}else for(Ft=Vr(e.stateNode.containerInfo.firstChild),zt=e,Ce=!0,dn=null,n=dw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Li(),r===s){e=rr(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return mw(e),t===null&&Eh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gh(r,s)?o=null:i!==null&&gh(r,i)&&(e.flags|=32),Fw(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&Eh(e),null;case 13:return zw(t,e,n);case 4:return Qf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vi(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Bg(t,e,r,s,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Ec,r._currentValue),r._currentValue=o,i!==null)if(pn(i.value,o)){if(i.children===s.children&&!jt.current){e=rr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Xn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Th(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Th(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ai(e,n),s=Zt(s),r=r(s),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,s=cn(r,e.pendingProps),s=cn(r.type,s),$g(t,e,r,s,n);case 15:return Lw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Kl(t,e),e.tag=1,Dt(r)?(t=!0,vc(e)):t=!1,Ai(e,n),bw(e,r,s),Sh(e,r,s,n),kh(null,e,r,!0,t,n);case 19:return Bw(t,e,n);case 22:return Vw(t,e,n)}throw Error(W(156,e.tag))};function s0(t,e){return R_(t,e)}function Hx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new Hx(t,e,n,r)}function um(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kx(t){if(typeof t=="function")return um(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cf)return 11;if(t===Pf)return 14}return 2}function Br(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")um(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hi:return Cs(n.children,s,i,e);case Af:o=8,s|=8;break;case Kd:return t=Yt(12,n,e,s|2),t.elementType=Kd,t.lanes=i,t;case Qd:return t=Yt(13,n,e,s),t.elementType=Qd,t.lanes=i,t;case Yd:return t=Yt(19,n,e,s),t.elementType=Yd,t.lanes=i,t;case m_:return fu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case h_:o=10;break e;case f_:o=9;break e;case Cf:o=11;break e;case Pf:o=14;break e;case Ir:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Cs(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function fu(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=m_,t.lanes=n,t.stateNode={isHidden:!1},t}function Pd(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Rd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Qx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dd(0),this.expirationTimes=dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dm(t,e,n,r,s,i,o,l,u){return t=new Qx(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kf(i),t}function Yx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function i0(t){if(!t)return Qr;t=t._reactInternals;e:{if($s(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Dt(n))return iw(t,n,e)}return e}function o0(t,e,n,r,s,i,o,l,u){return t=dm(n,r,!0,t,s,i,o,l,u),t.context=i0(null),n=t.current,r=St(),s=zr(n),i=Xn(r,s),i.callback=e??null,Fr(n,i,s),t.current.lanes=s,Va(t,s,r),bt(t,r),t}function mu(t,e,n,r){var s=e.current,i=St(),o=zr(s);return n=i0(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fr(s,e,o),t!==null&&(mn(t,s,o,i),ql(t,s,o)),o}function Rc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ty(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hm(t,e){ty(t,e),(t=t.alternate)&&ty(t,e)}function Xx(){return null}var a0=typeof reportError=="function"?reportError:function(t){console.error(t)};function fm(t){this._internalRoot=t}pu.prototype.render=fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));mu(t,e,null,null)};pu.prototype.unmount=fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bs(function(){mu(null,t,null,null)}),e[tr]=null}};function pu(t){this._internalRoot=t}pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=V_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&U_(t)}};function mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ny(){}function Jx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Rc(o);i.call(d)}}var o=o0(e,r,t,0,null,!1,!1,"",ny);return t._reactRootContainer=o,t[tr]=o.current,ga(t.nodeType===8?t.parentNode:t),bs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Rc(u);l.call(d)}}var u=dm(t,0,!1,null,null,!1,!1,"",ny);return t._reactRootContainer=u,t[tr]=u.current,ga(t.nodeType===8?t.parentNode:t),bs(function(){mu(e,u,n,r)}),u}function yu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Rc(o);l.call(u)}}mu(e,o,t,s)}else o=Jx(n,e,t,s,r);return Rc(o)}M_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fo(e.pendingLanes);n!==0&&(Df(e,n|1),bt(e,Ue()),!(me&6)&&(zi=Ue()+500,is()))}break;case 13:bs(function(){var r=nr(t,1);if(r!==null){var s=St();mn(r,t,1,s)}}),hm(t,1)}};bf=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=St();mn(e,t,134217728,n)}hm(t,134217728)}};L_=function(t){if(t.tag===13){var e=zr(t),n=nr(t,e);if(n!==null){var r=St();mn(n,t,e,r)}hm(t,e)}};V_=function(){return ve};F_=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};oh=function(t,e,n){switch(e){case"input":if(Zd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=au(r);if(!s)throw Error(W(90));g_(r),Zd(r,s)}}}break;case"textarea":v_(t,n);break;case"select":e=n.value,e!=null&&Si(t,!!n.multiple,e,!1)}};x_=am;N_=bs;var Zx={usingClientEntryPoint:!1,Events:[Ua,gi,au,I_,S_,am]},Oo={findFiberByHostInstance:Is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e1={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C_(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||Xx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{ru=Rl.inject(e1),jn=Rl}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zx;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mm(e))throw Error(W(200));return Yx(t,e,null,n)};$t.createRoot=function(t,e){if(!mm(t))throw Error(W(299));var n=!1,r="",s=a0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dm(t,1,!1,null,null,n,!1,r,s),t[tr]=e.current,ga(t.nodeType===8?t.parentNode:t),new fm(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=C_(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return bs(t)};$t.hydrate=function(t,e,n){if(!gu(e))throw Error(W(200));return yu(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!mm(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=a0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=o0(e,null,t,1,n??null,s,!1,i,o),t[tr]=e.current,ga(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new pu(e)};$t.render=function(t,e,n){if(!gu(e))throw Error(W(200));return yu(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!gu(t))throw Error(W(40));return t._reactRootContainer?(bs(function(){yu(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};$t.unstable_batchedUpdates=am;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gu(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return yu(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function l0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l0)}catch(t){console.error(t)}}l0(),l_.exports=$t;var t1=l_.exports,ry=t1;Gd.createRoot=ry.createRoot,Gd.hydrateRoot=ry.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xa(){return xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xa.apply(this,arguments)}var Dr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Dr||(Dr={}));const sy="popstate";function n1(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Fh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:jc(s)}return s1(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function c0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r1(){return Math.random().toString(36).substr(2,8)}function iy(t,e){return{usr:t.state,key:t.key,idx:e}}function Fh(t,e,n,r){return n===void 0&&(n=null),xa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?eo(e):e,{state:n,key:e&&e.key||r||r1()})}function jc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function s1(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Dr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(xa({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=Dr.Pop;let P=f(),x=P==null?null:P-d;d=P,u&&u({action:l,location:R.location,delta:x})}function g(P,x){l=Dr.Push;let E=Fh(R.location,P,x);d=f()+1;let S=iy(E,d),D=R.createHref(E);try{o.pushState(S,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(D)}i&&u&&u({action:l,location:R.location,delta:1})}function N(P,x){l=Dr.Replace;let E=Fh(R.location,P,x);d=f();let S=iy(E,d),D=R.createHref(E);o.replaceState(S,"",D),i&&u&&u({action:l,location:R.location,delta:0})}function k(P){let x=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof P=="string"?P:jc(P);return E=E.replace(/ $/,"%20"),De(x,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,x)}let R={get action(){return l},get location(){return t(s,o)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(sy,p),u=P,()=>{s.removeEventListener(sy,p),u=null}},createHref(P){return e(s,P)},createURL:k,encodeLocation(P){let x=k(P);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:N,go(P){return o.go(P)}};return R}var oy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oy||(oy={}));function i1(t,e,n){return n===void 0&&(n="/"),o1(t,e,n)}function o1(t,e,n,r){let s=typeof e=="string"?eo(e):e,i=Bi(s.pathname||"/",n);if(i==null)return null;let o=u0(t);a1(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=v1(i);l=g1(o[u],d)}return l}function u0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(De(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=$r([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(De(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),u0(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:m1(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of d0(i.path))s(i,o,u)}),e}function d0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=d0(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function a1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:p1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const l1=/^:[\w-]+$/,c1=3,u1=2,d1=1,h1=10,f1=-2,ay=t=>t==="*";function m1(t,e){let n=t.split("/"),r=n.length;return n.some(ay)&&(r+=f1),e&&(r+=u1),n.filter(s=>!ay(s)).reduce((s,i)=>s+(l1.test(i)?c1:i===""?d1:h1),r)}function p1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function g1(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=Uh({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:$r([i,p.pathname]),pathnameBase:T1($r([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=$r([i,p.pathnameBase]))}return o}function Uh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=y1(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:N}=f;if(g==="*"){let R=l[p]||"";o=i.slice(0,i.length-R.length).replace(/(.)\/+$/,"$1")}const k=l[p];return N&&!k?d[g]=void 0:d[g]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function y1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),c0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function v1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return c0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function _1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?eo(t):t;return{pathname:n?n.startsWith("/")?n:w1(n,e):e,search:I1(r),hash:S1(s)}}function w1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function jd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function E1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pm(t,e){let n=E1(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function gm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=eo(t):(s=xa({},t),De(!s.pathname||!s.pathname.includes("?"),jd("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),jd("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),jd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=_1(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const $r=t=>t.join("/").replace(/\/\/+/g,"/"),T1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),I1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,S1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function x1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const h0=["post","put","patch","delete"];new Set(h0);const N1=["get",...h0];new Set(N1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Na(){return Na=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Na.apply(this,arguments)}const vu=j.createContext(null),f0=j.createContext(null),cr=j.createContext(null),_u=j.createContext(null),ur=j.createContext({outlet:null,matches:[],isDataRoute:!1}),m0=j.createContext(null);function k1(t,e){let{relative:n}=e===void 0?{}:e;to()||De(!1);let{basename:r,navigator:s}=j.useContext(cr),{hash:i,pathname:o,search:l}=Eu(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:$r([r,o])),s.createHref({pathname:u,search:l,hash:i})}function to(){return j.useContext(_u)!=null}function no(){return to()||De(!1),j.useContext(_u).location}function p0(t){j.useContext(cr).static||j.useLayoutEffect(t)}function wu(){let{isDataRoute:t}=j.useContext(ur);return t?B1():A1()}function A1(){to()||De(!1);let t=j.useContext(vu),{basename:e,future:n,navigator:r}=j.useContext(cr),{matches:s}=j.useContext(ur),{pathname:i}=no(),o=JSON.stringify(pm(s,n.v7_relativeSplatPath)),l=j.useRef(!1);return p0(()=>{l.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=gm(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:$r([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}const C1=j.createContext(null);function P1(t){let e=j.useContext(ur).outlet;return e&&j.createElement(C1.Provider,{value:t},e)}function Eu(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(cr),{matches:s}=j.useContext(ur),{pathname:i}=no(),o=JSON.stringify(pm(s,r.v7_relativeSplatPath));return j.useMemo(()=>gm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function R1(t,e){return j1(t,e)}function j1(t,e,n,r){to()||De(!1);let{navigator:s}=j.useContext(cr),{matches:i}=j.useContext(ur),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=no(),f;if(e){var p;let P=typeof e=="string"?eo(e):e;u==="/"||(p=P.pathname)!=null&&p.startsWith(u)||De(!1),f=P}else f=d;let g=f.pathname||"/",N=g;if(u!=="/"){let P=u.replace(/^\//,"").split("/");N="/"+g.replace(/^\//,"").split("/").slice(P.length).join("/")}let k=i1(t,{pathname:N}),R=L1(k&&k.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:$r([u,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:$r([u,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),i,n,r);return e&&R?j.createElement(_u.Provider,{value:{location:Na({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Dr.Pop}},R):R}function D1(){let t=z1(),e=x1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const b1=j.createElement(D1,null);class O1 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(ur.Provider,{value:this.props.routeContext},j.createElement(m0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function M1(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(vu);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(ur.Provider,{value:e},r)}function L1(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||De(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:N}=n,k=p.route.loader&&g[p.route.id]===void 0&&(!N||N[p.route.id]===void 0);if(p.route.lazy||k){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let N,k=!1,R=null,P=null;n&&(N=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||b1,u&&(d<0&&g===0?($1("route-fallback"),k=!0,P=null):d===g&&(k=!0,P=p.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),E=()=>{let S;return N?S=R:k?S=P:p.route.Component?S=j.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=f,j.createElement(M1,{match:p,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:S})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?j.createElement(O1,{location:n.location,revalidation:n.revalidation,component:R,error:N,children:E(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):E()},null)}var g0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(g0||{}),y0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(y0||{});function V1(t){let e=j.useContext(vu);return e||De(!1),e}function F1(t){let e=j.useContext(f0);return e||De(!1),e}function U1(t){let e=j.useContext(ur);return e||De(!1),e}function v0(t){let e=U1(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function z1(){var t;let e=j.useContext(m0),n=F1(),r=v0();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function B1(){let{router:t}=V1(g0.UseNavigateStable),e=v0(y0.UseNavigateStable),n=j.useRef(!1);return p0(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Na({fromRouteId:e},i)))},[t,e])}const ly={};function $1(t,e,n){ly[t]||(ly[t]=!0)}function W1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Dc(t){let{to:e,replace:n,state:r,relative:s}=t;to()||De(!1);let{future:i,static:o}=j.useContext(cr),{matches:l}=j.useContext(ur),{pathname:u}=no(),d=wu(),f=gm(e,pm(l,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function q1(t){return P1(t.context)}function Gt(t){De(!1)}function G1(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Dr.Pop,navigator:i,static:o=!1,future:l}=t;to()&&De(!1);let u=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:i,static:o,future:Na({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=eo(r));let{pathname:f="/",search:p="",hash:g="",state:N=null,key:k="default"}=r,R=j.useMemo(()=>{let P=Bi(f,u);return P==null?null:{location:{pathname:P,search:p,hash:g,state:N,key:k},navigationType:s}},[u,f,p,g,N,k,s]);return R==null?null:j.createElement(cr.Provider,{value:d},j.createElement(_u.Provider,{children:n,value:R}))}function H1(t){let{children:e,location:n}=t;return R1(zh(e),n)}new Promise(()=>{});function zh(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,zh(r.props.children,i));return}r.type!==Gt&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=zh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bc(){return bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bc.apply(this,arguments)}function _0(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function K1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Q1(t,e){return t.button===0&&(!e||e==="_self")&&!K1(t)}const Y1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],X1=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],J1="6";try{window.__reactRouterVersion=J1}catch{}const Z1=j.createContext({isTransitioning:!1}),eN="startTransition",cy=WI[eN];function tN(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=n1({window:s,v5Compat:!0}));let o=i.current,[l,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=j.useCallback(p=>{d&&cy?cy(()=>u(p)):u(p)},[u,d]);return j.useLayoutEffect(()=>o.listen(f),[o,f]),j.useEffect(()=>W1(r),[r]),j.createElement(G1,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const nN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sN=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=_0(e,Y1),{basename:N}=j.useContext(cr),k,R=!1;if(typeof d=="string"&&rN.test(d)&&(k=d,nN))try{let S=new URL(window.location.href),D=d.startsWith("//")?new URL(S.protocol+d):new URL(d),V=Bi(D.pathname,N);D.origin===S.origin&&V!=null?d=V+D.search+D.hash:R=!0}catch{}let P=k1(d,{relative:s}),x=oN(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:p});function E(S){r&&r(S),S.defaultPrevented||x(S)}return j.createElement("a",bc({},g,{href:k||P,onClick:R||i?r:E,ref:n,target:u}))}),oi=j.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:u,viewTransition:d,children:f}=e,p=_0(e,X1),g=Eu(u,{relative:p.relative}),N=no(),k=j.useContext(f0),{navigator:R,basename:P}=j.useContext(cr),x=k!=null&&aN(g)&&d===!0,E=R.encodeLocation?R.encodeLocation(g).pathname:g.pathname,S=N.pathname,D=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;s||(S=S.toLowerCase(),D=D?D.toLowerCase():null,E=E.toLowerCase()),D&&P&&(D=Bi(D,P)||D);const V=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let O=S===E||!o&&S.startsWith(E)&&S.charAt(V)==="/",v=D!=null&&(D===E||!o&&D.startsWith(E)&&D.charAt(E.length)==="/"),y={isActive:O,isPending:v,isTransitioning:x},w=O?r:void 0,T;typeof i=="function"?T=i(y):T=[i,O?"active":null,v?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let A=typeof l=="function"?l(y):l;return j.createElement(sN,bc({},p,{"aria-current":w,className:T,ref:n,style:A,to:u,viewTransition:d}),typeof f=="function"?f(y):f)});var Bh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Bh||(Bh={}));var uy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uy||(uy={}));function iN(t){let e=j.useContext(vu);return e||De(!1),e}function oN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=wu(),d=no(),f=Eu(t,{relative:o});return j.useCallback(p=>{if(Q1(p,n)){p.preventDefault();let g=r!==void 0?r:jc(d)===jc(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,u,f,r,s,n,t,i,o,l])}function aN(t,e){e===void 0&&(e={});let n=j.useContext(Z1);n==null&&De(!1);let{basename:r}=iN(Bh.useViewTransitionState),s=Eu(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Bi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Bi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Uh(s.pathname,o)!=null||Uh(s.pathname,i)!=null}const lN=()=>{};var dy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},cN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},E0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,N=d&63;u||(N=64,o||(g=64)),r.push(n[f],n[p],n[g],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(w0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new uN;const g=i<<2|l>>4;if(r.push(g),d!==64){const N=l<<4&240|d>>2;if(r.push(N),p!==64){const k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dN=function(t){const e=w0(t);return E0.encodeByteArray(e,!0)},Oc=function(t){return dN(t).replace(/\./g,"")},T0=function(t){try{return E0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=()=>hN().__FIREBASE_DEFAULTS__,mN=()=>{if(typeof process>"u"||typeof dy>"u")return;const t=dy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&T0(t[1]);return e&&JSON.parse(e)},Tu=()=>{try{return lN()||fN()||mN()||pN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},I0=t=>{var e,n;return(n=(e=Tu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gN=t=>{const e=I0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},S0=()=>{var t;return(t=Tu())===null||t===void 0?void 0:t.config},x0=t=>{var e;return(e=Tu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){return t.endsWith(".cloudworkstations.dev")}async function N0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Oc(JSON.stringify(n)),Oc(JSON.stringify(o)),""].join(".")}const na={};function _N(){const t={prod:[],emulator:[]};for(const e of Object.keys(na))na[e]?t.emulator.push(e):t.prod.push(e);return t}function wN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let hy=!1;function k0(t,e){if(typeof window>"u"||typeof document>"u"||!ro(window.location.host)||na[t]===e||na[t]||hy)return;na[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=_N().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,N){g.setAttribute("width","24"),g.setAttribute("id",N),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{hy=!0,o()},g}function f(g,N){g.setAttribute("id",N),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=wN(r),N=n("text"),k=document.getElementById(N)||document.createElement("span"),R=n("learnmore"),P=document.getElementById(R)||document.createElement("a"),x=n("preprendIcon"),E=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;l(S),f(P,R);const D=d();u(E,x),S.append(E,k,P,D),document.body.appendChild(S)}i?(k.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function TN(){var t;const e=(t=Tu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NN(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kN(){return!TN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AN(){try{return typeof indexedDB=="object"}catch{return!1}}function CN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PN,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ba.prototype.create)}}class Ba{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?RN(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new dr(s,l,r)}}function RN(t,e){return t.replace(jN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const jN=/\{\$([^}]+)}/g;function DN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Os(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(fy(i)&&fy(o)){if(!Os(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Bo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bN(t,e){const n=new ON(t,e);return n.subscribe.bind(n)}class ON{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Dd),s.error===void 0&&(s.error=Dd),s.complete===void 0&&(s.complete=Dd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t){return t&&t._delegate?t._delegate:t}class Yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FN(e))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ws){return this.instances.has(e)}getOptions(e=ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ws){return this.component?this.component.multipleInstances?e:ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VN(t){return t===ws?void 0:t}function FN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const zN={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},BN=de.INFO,$N={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},WN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$N[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ym{constructor(e){this.name=e,this._logLevel=BN,this._logHandler=WN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const qN=(t,e)=>e.some(n=>t instanceof n);let my,py;function GN(){return my||(my=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HN(){return py||(py=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A0=new WeakMap,$h=new WeakMap,C0=new WeakMap,bd=new WeakMap,vm=new WeakMap;function KN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Wr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&A0.set(n,t)}).catch(()=>{}),vm.set(e,t),e}function QN(t){if($h.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$h.set(t,e)}let Wh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $h.get(t);if(e==="objectStoreNames")return t.objectStoreNames||C0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YN(t){Wh=t(Wh)}function XN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Od(this),e,...n);return C0.set(r,e.sort?e.sort():[e]),Wr(r)}:HN().includes(t)?function(...e){return t.apply(Od(this),e),Wr(A0.get(this))}:function(...e){return Wr(t.apply(Od(this),e))}}function JN(t){return typeof t=="function"?XN(t):(t instanceof IDBTransaction&&QN(t),qN(t,GN())?new Proxy(t,Wh):t)}function Wr(t){if(t instanceof IDBRequest)return KN(t);if(bd.has(t))return bd.get(t);const e=JN(t);return e!==t&&(bd.set(t,e),vm.set(e,t)),e}const Od=t=>vm.get(t);function ZN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Wr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Wr(o.result),u.oldVersion,u.newVersion,Wr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const ek=["get","getKey","getAll","getAllKeys","count"],tk=["put","add","delete","clear"],Md=new Map;function gy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Md.get(e))return Md.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ek.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Md.set(e,i),i}YN(t=>({...t,get:(e,n,r)=>gy(e,n)||t.get(e,n,r),has:(e,n)=>!!gy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qh="@firebase/app",yy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new ym("@firebase/app"),sk="@firebase/app-compat",ik="@firebase/analytics-compat",ok="@firebase/analytics",ak="@firebase/app-check-compat",lk="@firebase/app-check",ck="@firebase/auth",uk="@firebase/auth-compat",dk="@firebase/database",hk="@firebase/data-connect",fk="@firebase/database-compat",mk="@firebase/functions",pk="@firebase/functions-compat",gk="@firebase/installations",yk="@firebase/installations-compat",vk="@firebase/messaging",_k="@firebase/messaging-compat",wk="@firebase/performance",Ek="@firebase/performance-compat",Tk="@firebase/remote-config",Ik="@firebase/remote-config-compat",Sk="@firebase/storage",xk="@firebase/storage-compat",Nk="@firebase/firestore",kk="@firebase/ai",Ak="@firebase/firestore-compat",Ck="firebase",Pk="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="[DEFAULT]",Rk={[qh]:"fire-core",[sk]:"fire-core-compat",[ok]:"fire-analytics",[ik]:"fire-analytics-compat",[lk]:"fire-app-check",[ak]:"fire-app-check-compat",[ck]:"fire-auth",[uk]:"fire-auth-compat",[dk]:"fire-rtdb",[hk]:"fire-data-connect",[fk]:"fire-rtdb-compat",[mk]:"fire-fn",[pk]:"fire-fn-compat",[gk]:"fire-iid",[yk]:"fire-iid-compat",[vk]:"fire-fcm",[_k]:"fire-fcm-compat",[wk]:"fire-perf",[Ek]:"fire-perf-compat",[Tk]:"fire-rc",[Ik]:"fire-rc-compat",[Sk]:"fire-gcs",[xk]:"fire-gcs-compat",[Nk]:"fire-fst",[Ak]:"fire-fst-compat",[kk]:"fire-vertex","fire-js":"fire-js",[Ck]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Map,jk=new Map,Hh=new Map;function vy(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ms(t){const e=t.name;if(Hh.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;Hh.set(e,t);for(const n of Mc.values())vy(n,t);for(const n of jk.values())vy(n,t);return!0}function _m(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Lt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new Ba("app","Firebase",Dk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=Pk;function P0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gh,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw qr.create("bad-app-name",{appName:String(s)});if(n||(n=S0()),!n)throw qr.create("no-options");const i=Mc.get(s);if(i){if(Os(n,i.options)&&Os(r,i.config))return i;throw qr.create("duplicate-app",{appName:s})}const o=new UN(s);for(const u of Hh.values())o.addComponent(u);const l=new bk(n,r,o);return Mc.set(s,l),l}function R0(t=Gh){const e=Mc.get(t);if(!e&&t===Gh&&S0())return P0();if(!e)throw qr.create("no-app",{appName:t});return e}function bn(t,e,n){var r;let s=(r=Rk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(l.join(" "));return}Ms(new Yr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="firebase-heartbeat-database",Mk=1,ka="firebase-heartbeat-store";let Ld=null;function j0(){return Ld||(Ld=ZN(Ok,Mk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ka)}catch(n){console.warn(n)}}}}).catch(t=>{throw qr.create("idb-open",{originalErrorMessage:t.message})})),Ld}async function Lk(t){try{const n=(await j0()).transaction(ka),r=await n.objectStore(ka).get(D0(t));return await n.done,r}catch(e){if(e instanceof dr)sr.warn(e.message);else{const n=qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sr.warn(n.message)}}}async function _y(t,e){try{const r=(await j0()).transaction(ka,"readwrite");await r.objectStore(ka).put(e,D0(t)),await r.done}catch(n){if(n instanceof dr)sr.warn(n.message);else{const r=qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sr.warn(r.message)}}}function D0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=1024,Fk=30;class Uk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Bk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Fk){const o=$k(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wy(),{heartbeatsToSend:r,unsentEntries:s}=zk(this._heartbeatsCache.heartbeats),i=Oc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return sr.warn(n),""}}}function wy(){return new Date().toISOString().substring(0,10)}function zk(t,e=Vk){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ey(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ey(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Bk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AN()?CN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _y(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _y(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ey(t){return Oc(JSON.stringify({version:2,heartbeats:t})).length}function $k(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){Ms(new Yr("platform-logger",e=>new nk(e),"PRIVATE")),Ms(new Yr("heartbeat",e=>new Uk(e),"PRIVATE")),bn(qh,yy,t),bn(qh,yy,"esm2017"),bn("fire-js","")}Wk("");function wm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function b0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qk=b0,O0=new Ba("auth","Firebase",b0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new ym("@firebase/auth");function Gk(t,...e){Lc.logLevel<=de.WARN&&Lc.warn(`Auth (${so}): ${t}`,...e)}function Jl(t,...e){Lc.logLevel<=de.ERROR&&Lc.error(`Auth (${so}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t,...e){throw Em(t,...e)}function On(t,...e){return Em(t,...e)}function M0(t,e,n){const r=Object.assign(Object.assign({},qk()),{[e]:n});return new Ba("auth","Firebase",r).create(e,{appName:t.name})}function Jn(t){return M0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Em(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return O0.create(t,...e)}function te(t,e,...n){if(!t)throw Em(e,...n)}function Kn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jl(e),new Error(e)}function ir(t,e){t||Kn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Hk(){return Ty()==="http:"||Ty()==="https:"}function Ty(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hk()||SN()||"connection"in navigator)?navigator.onLine:!0}function Qk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.shortDelay=e,this.longDelay=n,ir(n>e,"Short delay should be less than long delay!"),this.isMobile=EN()||xN()}get(){return Kk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e){ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jk=new Wa(3e4,6e4);function os(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function as(t,e,n,r,s={}){return V0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=$a(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return IN()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ro(t.emulatorConfig.host)&&(d.credentials="include"),L0.fetch()(await F0(t,t.config.apiHost,n,l),d)})}async function V0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Yk),e);try{const s=new eA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw jl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw jl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw jl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw jl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw M0(t,f,d);gn(t,f)}}catch(s){if(s instanceof dr)throw s;gn(t,"network-request-failed",{message:String(s)})}}async function qa(t,e,n,r,s={}){const i=await as(t,e,n,r,s);return"mfaPendingCredential"in i&&gn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function F0(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Tm(t.config,s):`${t.config.apiScheme}://${s}`;return Xk.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Zk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(On(this.auth,"network-request-failed")),Jk.get())})}}function jl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=On(t,e,r);return s.customData._tokenResponse=n,s}function Iy(t){return t!==void 0&&t.enterprise!==void 0}class tA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Zk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nA(t,e){return as(t,"GET","/v2/recaptchaConfig",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(t,e){return as(t,"POST","/v1/accounts:delete",e)}async function Vc(t,e){return as(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sA(t,e=!1){const n=Ze(t),r=await n.getIdToken(e),s=Im(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ra(Vd(s.auth_time)),issuedAtTime:ra(Vd(s.iat)),expirationTime:ra(Vd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Vd(t){return Number(t)*1e3}function Im(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jl("JWT malformed, contained fewer than 3 sections"),null;try{const s=T0(n);return s?JSON.parse(s):(Jl("Failed to decode base64 JWT payload"),null)}catch(s){return Jl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Sy(t){const e=Im(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&iA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ra(this.lastLoginAt),this.creationTime=ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Aa(t,Vc(n,{idToken:r}));te(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?U0(i.providerUserInfo):[],l=lA(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Qh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function aA(t){const e=Ze(t);await Fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function U0(t){return t.map(e=>{var{providerId:n}=e,r=wm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(t,e){const n=await V0(t,{},async()=>{const r=$a({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await F0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&ro(t.emulatorConfig.host)&&(u.credentials="include"),L0.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uA(t,e){return as(t,"POST","/v2/accounts:revokeToken",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=Sy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await cA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Pi;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pi,this.toJSON())}_performRefresh(){return Kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=wm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Aa(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sA(this,e)}reload(){return aA(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lt(this.auth.app))return Promise.reject(Jn(this.auth));const e=await this.getIdToken();return await Aa(this,rA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,N=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(l=n.tenantId)!==null&&l!==void 0?l:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,E=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:S,emailVerified:D,isAnonymous:V,providerData:O,stsTokenManager:v}=n;te(S&&v,e,"internal-error");const y=Pi.fromJSON(this.name,v);te(typeof S=="string",e,"internal-error"),Er(p,e.name),Er(g,e.name),te(typeof D=="boolean",e,"internal-error"),te(typeof V=="boolean",e,"internal-error"),Er(N,e.name),Er(k,e.name),Er(R,e.name),Er(P,e.name),Er(x,e.name),Er(E,e.name);const w=new hn({uid:S,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:V,photoURL:k,phoneNumber:N,tenantId:R,stsTokenManager:y,createdAt:x,lastLoginAt:E});return O&&Array.isArray(O)&&(w.providerData=O.map(T=>Object.assign({},T))),P&&(w._redirectEventId=P),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Pi;s.updateFromServerResponse(n);const i=new hn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?U0(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Pi;l.updateFromIdToken(r);const u=new hn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Qh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=new Map;function Qn(t){ir(t instanceof Function,"Expected a class definition");let e=xy.get(t);return e?(ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}z0.type="NONE";const Ny=z0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ri{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Zl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Zl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Vc(this.auth,{idToken:e}).catch(()=>{});return n?hn._fromGetAccountInfoResponse(this.auth,n,e):null}return hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ri(Qn(Ny),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Qn(Ny);const o=Zl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let p;if(typeof f=="string"){const g=await Vc(e,{idToken:f}).catch(()=>{});if(!g)break;p=await hn._fromGetAccountInfoResponse(e,g,f)}else p=hn._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ri(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ri(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(B0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H0(e))return"Blackberry";if(K0(e))return"Webos";if($0(e))return"Safari";if((e.includes("chrome/")||W0(e))&&!e.includes("edge/"))return"Chrome";if(G0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function B0(t=Et()){return/firefox\//i.test(t)}function $0(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function W0(t=Et()){return/crios\//i.test(t)}function q0(t=Et()){return/iemobile/i.test(t)}function G0(t=Et()){return/android/i.test(t)}function H0(t=Et()){return/blackberry/i.test(t)}function K0(t=Et()){return/webos/i.test(t)}function Sm(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dA(t=Et()){var e;return Sm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hA(){return NN()&&document.documentMode===10}function Q0(t=Et()){return Sm(t)||G0(t)||K0(t)||H0(t)||/windows phone/i.test(t)||q0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t,e=[]){let n;switch(t){case"Browser":n=ky(Et());break;case"Worker":n=`${ky(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${so}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(t,e={}){return as(t,"GET","/v2/passwordPolicy",os(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=6;class gA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ay(this),this.idTokenSubscription=new Ay(this),this.beforeStateQueue=new fA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ri.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vc(this,{idToken:e}),r=await hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Lt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lt(this.app))return Promise.reject(Jn(this));const n=e?Ze(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lt(this.app)?Promise.reject(Jn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lt(this.app)?Promise.reject(Jn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mA(this),n=new gA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ba("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Ri.create(this,[Qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Lt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Gk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ws(t){return Ze(t)}class Ay{constructor(e){this.auth=e,this.observer=null,this.addObserver=bN(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vA(t){Iu=t}function X0(t){return Iu.loadJS(t)}function _A(){return Iu.recaptchaEnterpriseScript}function wA(){return Iu.gapiScript}function EA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class TA{constructor(){this.enterprise=new IA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class IA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const SA="recaptcha-enterprise",J0="NO_RECAPTCHA";class xA{constructor(e){this.type=SA,this.auth=Ws(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{nA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new tA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;Iy(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(J0)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Iy(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=_A();u.length!==0&&(u+=l),X0(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Cy(t,e,n,r=!1,s=!1){const i=new xA(t);let o;if(s)o=J0;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Yh(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Cy(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Cy(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t,e){const n=_m(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Os(i,e??{}))return s;gn(s,"already-initialized")}return n.initialize({options:e})}function kA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function AA(t,e,n){const r=Ws(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Z0(e),{host:o,port:l}=CA(e),u=l===null?"":`:${l}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(Os(d,r.config.emulator)&&Os(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,ro(o)?(N0(`${i}//${o}${u}`),k0("Auth",!0)):PA()}function Z0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CA(t){const e=Z0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Py(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Py(o)}}}function Py(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,n){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}}async function RA(t,e){return as(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(t,e){return qa(t,"POST","/v1/accounts:signInWithPassword",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e){return qa(t,"POST","/v1/accounts:signInWithEmailLink",os(t,e))}async function bA(t,e){return qa(t,"POST","/v1/accounts:signInWithEmailLink",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends xm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ca(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ca(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,n,"signInWithPassword",jA);case"emailLink":return DA(e,{email:this._email,oobCode:this._password});default:gn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,r,"signUpPassword",RA);case"emailLink":return bA(e,{idToken:n,email:this._email,oobCode:this._password});default:gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ji(t,e){return qa(t,"POST","/v1/accounts:signInWithIdp",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="http://localhost";class Ls extends xm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=wm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ls(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ji(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ji(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ji(e,n)}buildRequest(){const e={requestUri:OA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$a(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LA(t){const e=zo(Bo(t)).link,n=e?zo(Bo(e)).deep_link_id:null,r=zo(Bo(t)).deep_link_id;return(r?zo(Bo(r)).link:null)||r||n||e||t}class Nm{constructor(e){var n,r,s,i,o,l;const u=zo(Bo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=MA((s=u.mode)!==null&&s!==void 0?s:null);te(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=LA(e);try{return new Nm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.providerId=io.PROVIDER_ID}static credential(e,n){return Ca._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Nm.parseLink(n);return te(r,"argument-error"),Ca._fromEmailAndCode(e,r.code,r.tenantId)}}io.PROVIDER_ID="password";io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends eE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Ga{constructor(){super("facebook.com")}static credential(e){return Ls._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Ga{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ls._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ar.credential(n,r)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Ga{constructor(){super("github.com")}static credential(e){return Ls._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.GITHUB_SIGN_IN_METHOD="github.com";Cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Ga{constructor(){super("twitter.com")}static credential(e,n){return Ls._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pr.credential(n,r)}catch{return null}}}Pr.TWITTER_SIGN_IN_METHOD="twitter.com";Pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(t,e){return qa(t,"POST","/v1/accounts:signUp",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await hn._fromIdTokenResponse(e,r,s),o=Ry(r);return new Vs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ry(r);return new Vs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ry(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends dr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Uc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Uc(e,n,r,s)}}function tE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Uc._fromErrorAndOperation(t,i,e,r):i})}async function FA(t,e,n=!1){const r=await Aa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(t,e,n=!1){const{auth:r}=t;if(Lt(r.app))return Promise.reject(Jn(r));const s="reauthenticate";try{const i=await Aa(t,tE(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=Im(i.idToken);te(o,r,"internal-error");const{sub:l}=o;return te(t.uid===l,r,"user-mismatch"),Vs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&gn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nE(t,e,n=!1){if(Lt(t.app))return Promise.reject(Jn(t));const r="signIn",s=await tE(t,r,e),i=await Vs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function zA(t,e){return nE(Ws(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rE(t){const e=Ws(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sE(t,e,n){if(Lt(t.app))return Promise.reject(Jn(t));const r=Ws(t),o=await Yh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&rE(t),u}),l=await Vs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function iE(t,e,n){return Lt(t.app)?Promise.reject(Jn(t)):zA(Ze(t),io.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&rE(t),r})}function BA(t,e,n,r){return Ze(t).onIdTokenChanged(e,n,r)}function $A(t,e,n){return Ze(t).beforeAuthStateChanged(e,n)}function WA(t,e,n,r){return Ze(t).onAuthStateChanged(e,n,r)}function oE(t){return Ze(t).signOut()}const zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zc,"1"),this.storage.removeItem(zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1e3,GA=10;class lE extends aE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Q0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);hA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,GA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lE.type="LOCAL";const HA=lE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE extends aE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cE.type="SESSION";const uE=cE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Su(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await KA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Su.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=km("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function YA(t){Mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function XA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ZA(){return dE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="firebaseLocalStorageDb",eC=1,Bc="firebaseLocalStorage",fE="fbase_key";class Ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xu(t,e){return t.transaction([Bc],e?"readwrite":"readonly").objectStore(Bc)}function tC(){const t=indexedDB.deleteDatabase(hE);return new Ha(t).toPromise()}function Xh(){const t=indexedDB.open(hE,eC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Bc,{keyPath:fE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Bc)?e(r):(r.close(),await tC(),e(await Xh()))})})}async function jy(t,e,n){const r=xu(t,!0).put({[fE]:e,value:n});return new Ha(r).toPromise()}async function nC(t,e){const n=xu(t,!1).get(e),r=await new Ha(n).toPromise();return r===void 0?null:r.value}function Dy(t,e){const n=xu(t,!0).delete(e);return new Ha(n).toPromise()}const rC=800,sC=3;class mE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Su._getInstance(ZA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await XA(),!this.activeServiceWorker)return;this.sender=new QA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xh();return await jy(e,zc,"1"),await Dy(e,zc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=xu(s,!1).getAll();return new Ha(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mE.type="LOCAL";const iC=mE;new Wa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t,e){return e?Qn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am extends xm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ji(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ji(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ji(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aC(t){return nE(t.auth,new Am(t),t.bypassAuthState)}function lC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),UA(n,new Am(t),t.bypassAuthState)}async function cC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),FA(n,new Am(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aC;case"linkViaPopup":case"linkViaRedirect":return cC;case"reauthViaPopup":case"reauthViaRedirect":return lC;default:gn(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new Wa(2e3,1e4);class Ii extends pE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ii.currentPopupAction&&Ii.currentPopupAction.cancel(),Ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uC.get())};e()}}Ii.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="pendingRedirect",ec=new Map;class hC extends pE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ec.get(this.auth._key());if(!e){try{const r=await fC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ec.set(this.auth._key(),e)}return this.bypassAuthState||ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fC(t,e){const n=gC(e),r=pC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function mC(t,e){ec.set(t._key(),e)}function pC(t){return Qn(t._redirectPersistence)}function gC(t){return Zl(dC,t.config.apiKey,t.name)}async function yC(t,e,n=!1){if(Lt(t.app))return Promise.reject(Jn(t));const r=Ws(t),s=oC(r,e),o=await new hC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=10*60*1e3;class _C{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!gE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(On(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vC&&this.cachedEventUids.clear(),this.cachedEventUids.has(by(e))}saveEventToCache(e){this.cachedEventUids.add(by(e)),this.lastProcessedEventTime=Date.now()}}function by(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(t,e={}){return as(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IC=/^https?/;async function SC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await EC(t);for(const n of e)try{if(xC(n))return}catch{}gn(t,"unauthorized-domain")}function xC(t){const e=Kh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IC.test(n))return!1;if(TC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Wa(3e4,6e4);function Oy(){const t=Mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kC(t){return new Promise((e,n)=>{var r,s,i;function o(){Oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Oy(),n(On(t,"network-request-failed"))},timeout:NC.get()})}if(!((s=(r=Mn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Mn().gapi)===null||i===void 0)&&i.load)o();else{const l=EA("iframefcb");return Mn()[l]=()=>{gapi.load?o():n(On(t,"network-request-failed"))},X0(`${wA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw tc=null,e})}let tc=null;function AC(t){return tc=tc||kC(t),tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new Wa(5e3,15e3),PC="__/auth/iframe",RC="emulator/auth/iframe",jC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bC(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Tm(e,RC):`https://${t.config.authDomain}/${PC}`,r={apiKey:e.apiKey,appName:t.name,v:so},s=DC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${$a(r).slice(1)}`}async function OC(t){const e=await AC(t),n=Mn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:bC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=On(t,"network-request-failed"),l=Mn().setTimeout(()=>{i(o)},CC.get());function u(){Mn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LC=500,VC=600,FC="_blank",UC="http://localhost";class My{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zC(t,e,n,r=LC,s=VC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},MC),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Et().toLowerCase();n&&(l=W0(d)?FC:n),B0(d)&&(e=e||UC,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[N,k])=>`${g}${N}=${k},`,"");if(dA(d)&&l!=="_self")return BC(e||"",l),new My(null);const p=window.open(e||"",l,f);te(p,t,"popup-blocked");try{p.focus()}catch{}return new My(p)}function BC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="__/auth/handler",WC="emulator/auth/handler",qC=encodeURIComponent("fac");async function Ly(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:so,eventId:s};if(e instanceof eE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Ga){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${qC}=${encodeURIComponent(u)}`:"";return`${GC(t)}?${$a(l).slice(1)}${d}`}function GC({config:t}){return t.emulator?Tm(t,WC):`https://${t.authDomain}/${$C}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="webStorageSupport";class HC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uE,this._completeRedirectFn=yC,this._overrideRedirectResult=mC}async _openPopup(e,n,r,s){var i;ir((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Ly(e,n,r,Kh(),s);return zC(e,o,km())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Ly(e,n,r,Kh(),s);return YA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ir(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await OC(e),r=new _C(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fd,{type:Fd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Fd];o!==void 0&&n(!!o),gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Q0()||$0()||Sm()}}const KC=HC;var Vy="@firebase/auth",Fy="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XC(t){Ms(new Yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y0(t)},d=new yA(r,s,i,u);return kA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ms(new Yr("auth-internal",e=>{const n=Ws(e.getProvider("auth").getImmediate());return(r=>new QC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(Vy,Fy,YC(t)),bn(Vy,Fy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=5*60,ZC=x0("authIdTokenMaxAge")||JC;let Uy=null;const eP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZC)return;const s=n==null?void 0:n.token;Uy!==s&&(Uy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function yE(t=R0()){const e=_m(t,"auth");if(e.isInitialized())return e.getImmediate();const n=NA(t,{popupRedirectResolver:KC,persistence:[iC,HA,uE]}),r=x0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=eP(i.toString());$A(n,o,()=>o(n.currentUser)),BA(n,l=>o(l))}}const s=I0("auth");return s&&AA(n,`http://${s}`),n}function tP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=On("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",tP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XC("Browser");var zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gr,vE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function w(){}w.prototype=y.prototype,v.D=y.prototype,v.prototype=new w,v.prototype.constructor=v,v.C=function(T,A,C){for(var I=Array(arguments.length-2),re=2;re<arguments.length;re++)I[re-2]=arguments[re];return y.prototype[A].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,w){w||(w=0);var T=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)T[A]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(A=0;16>A;++A)T[A]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=v.g[0],w=v.g[1],A=v.g[2];var C=v.g[3],I=y+(C^w&(A^C))+T[0]+3614090360&4294967295;y=w+(I<<7&4294967295|I>>>25),I=C+(A^y&(w^A))+T[1]+3905402710&4294967295,C=y+(I<<12&4294967295|I>>>20),I=A+(w^C&(y^w))+T[2]+606105819&4294967295,A=C+(I<<17&4294967295|I>>>15),I=w+(y^A&(C^y))+T[3]+3250441966&4294967295,w=A+(I<<22&4294967295|I>>>10),I=y+(C^w&(A^C))+T[4]+4118548399&4294967295,y=w+(I<<7&4294967295|I>>>25),I=C+(A^y&(w^A))+T[5]+1200080426&4294967295,C=y+(I<<12&4294967295|I>>>20),I=A+(w^C&(y^w))+T[6]+2821735955&4294967295,A=C+(I<<17&4294967295|I>>>15),I=w+(y^A&(C^y))+T[7]+4249261313&4294967295,w=A+(I<<22&4294967295|I>>>10),I=y+(C^w&(A^C))+T[8]+1770035416&4294967295,y=w+(I<<7&4294967295|I>>>25),I=C+(A^y&(w^A))+T[9]+2336552879&4294967295,C=y+(I<<12&4294967295|I>>>20),I=A+(w^C&(y^w))+T[10]+4294925233&4294967295,A=C+(I<<17&4294967295|I>>>15),I=w+(y^A&(C^y))+T[11]+2304563134&4294967295,w=A+(I<<22&4294967295|I>>>10),I=y+(C^w&(A^C))+T[12]+1804603682&4294967295,y=w+(I<<7&4294967295|I>>>25),I=C+(A^y&(w^A))+T[13]+4254626195&4294967295,C=y+(I<<12&4294967295|I>>>20),I=A+(w^C&(y^w))+T[14]+2792965006&4294967295,A=C+(I<<17&4294967295|I>>>15),I=w+(y^A&(C^y))+T[15]+1236535329&4294967295,w=A+(I<<22&4294967295|I>>>10),I=y+(A^C&(w^A))+T[1]+4129170786&4294967295,y=w+(I<<5&4294967295|I>>>27),I=C+(w^A&(y^w))+T[6]+3225465664&4294967295,C=y+(I<<9&4294967295|I>>>23),I=A+(y^w&(C^y))+T[11]+643717713&4294967295,A=C+(I<<14&4294967295|I>>>18),I=w+(C^y&(A^C))+T[0]+3921069994&4294967295,w=A+(I<<20&4294967295|I>>>12),I=y+(A^C&(w^A))+T[5]+3593408605&4294967295,y=w+(I<<5&4294967295|I>>>27),I=C+(w^A&(y^w))+T[10]+38016083&4294967295,C=y+(I<<9&4294967295|I>>>23),I=A+(y^w&(C^y))+T[15]+3634488961&4294967295,A=C+(I<<14&4294967295|I>>>18),I=w+(C^y&(A^C))+T[4]+3889429448&4294967295,w=A+(I<<20&4294967295|I>>>12),I=y+(A^C&(w^A))+T[9]+568446438&4294967295,y=w+(I<<5&4294967295|I>>>27),I=C+(w^A&(y^w))+T[14]+3275163606&4294967295,C=y+(I<<9&4294967295|I>>>23),I=A+(y^w&(C^y))+T[3]+4107603335&4294967295,A=C+(I<<14&4294967295|I>>>18),I=w+(C^y&(A^C))+T[8]+1163531501&4294967295,w=A+(I<<20&4294967295|I>>>12),I=y+(A^C&(w^A))+T[13]+2850285829&4294967295,y=w+(I<<5&4294967295|I>>>27),I=C+(w^A&(y^w))+T[2]+4243563512&4294967295,C=y+(I<<9&4294967295|I>>>23),I=A+(y^w&(C^y))+T[7]+1735328473&4294967295,A=C+(I<<14&4294967295|I>>>18),I=w+(C^y&(A^C))+T[12]+2368359562&4294967295,w=A+(I<<20&4294967295|I>>>12),I=y+(w^A^C)+T[5]+4294588738&4294967295,y=w+(I<<4&4294967295|I>>>28),I=C+(y^w^A)+T[8]+2272392833&4294967295,C=y+(I<<11&4294967295|I>>>21),I=A+(C^y^w)+T[11]+1839030562&4294967295,A=C+(I<<16&4294967295|I>>>16),I=w+(A^C^y)+T[14]+4259657740&4294967295,w=A+(I<<23&4294967295|I>>>9),I=y+(w^A^C)+T[1]+2763975236&4294967295,y=w+(I<<4&4294967295|I>>>28),I=C+(y^w^A)+T[4]+1272893353&4294967295,C=y+(I<<11&4294967295|I>>>21),I=A+(C^y^w)+T[7]+4139469664&4294967295,A=C+(I<<16&4294967295|I>>>16),I=w+(A^C^y)+T[10]+3200236656&4294967295,w=A+(I<<23&4294967295|I>>>9),I=y+(w^A^C)+T[13]+681279174&4294967295,y=w+(I<<4&4294967295|I>>>28),I=C+(y^w^A)+T[0]+3936430074&4294967295,C=y+(I<<11&4294967295|I>>>21),I=A+(C^y^w)+T[3]+3572445317&4294967295,A=C+(I<<16&4294967295|I>>>16),I=w+(A^C^y)+T[6]+76029189&4294967295,w=A+(I<<23&4294967295|I>>>9),I=y+(w^A^C)+T[9]+3654602809&4294967295,y=w+(I<<4&4294967295|I>>>28),I=C+(y^w^A)+T[12]+3873151461&4294967295,C=y+(I<<11&4294967295|I>>>21),I=A+(C^y^w)+T[15]+530742520&4294967295,A=C+(I<<16&4294967295|I>>>16),I=w+(A^C^y)+T[2]+3299628645&4294967295,w=A+(I<<23&4294967295|I>>>9),I=y+(A^(w|~C))+T[0]+4096336452&4294967295,y=w+(I<<6&4294967295|I>>>26),I=C+(w^(y|~A))+T[7]+1126891415&4294967295,C=y+(I<<10&4294967295|I>>>22),I=A+(y^(C|~w))+T[14]+2878612391&4294967295,A=C+(I<<15&4294967295|I>>>17),I=w+(C^(A|~y))+T[5]+4237533241&4294967295,w=A+(I<<21&4294967295|I>>>11),I=y+(A^(w|~C))+T[12]+1700485571&4294967295,y=w+(I<<6&4294967295|I>>>26),I=C+(w^(y|~A))+T[3]+2399980690&4294967295,C=y+(I<<10&4294967295|I>>>22),I=A+(y^(C|~w))+T[10]+4293915773&4294967295,A=C+(I<<15&4294967295|I>>>17),I=w+(C^(A|~y))+T[1]+2240044497&4294967295,w=A+(I<<21&4294967295|I>>>11),I=y+(A^(w|~C))+T[8]+1873313359&4294967295,y=w+(I<<6&4294967295|I>>>26),I=C+(w^(y|~A))+T[15]+4264355552&4294967295,C=y+(I<<10&4294967295|I>>>22),I=A+(y^(C|~w))+T[6]+2734768916&4294967295,A=C+(I<<15&4294967295|I>>>17),I=w+(C^(A|~y))+T[13]+1309151649&4294967295,w=A+(I<<21&4294967295|I>>>11),I=y+(A^(w|~C))+T[4]+4149444226&4294967295,y=w+(I<<6&4294967295|I>>>26),I=C+(w^(y|~A))+T[11]+3174756917&4294967295,C=y+(I<<10&4294967295|I>>>22),I=A+(y^(C|~w))+T[2]+718787259&4294967295,A=C+(I<<15&4294967295|I>>>17),I=w+(C^(A|~y))+T[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,v.g[2]=v.g[2]+A&4294967295,v.g[3]=v.g[3]+C&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var w=y-this.blockSize,T=this.B,A=this.h,C=0;C<y;){if(A==0)for(;C<=w;)s(this,v,C),C+=this.blockSize;if(typeof v=="string"){for(;C<y;)if(T[A++]=v.charCodeAt(C++),A==this.blockSize){s(this,T),A=0;break}}else for(;C<y;)if(T[A++]=v[C++],A==this.blockSize){s(this,T),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var w=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=w&255,w/=256;for(this.u(v),v=Array(16),y=w=0;4>y;++y)for(var T=0;32>T;T+=8)v[w++]=this.g[y]>>>T&255;return v};function i(v,y){var w=l;return Object.prototype.hasOwnProperty.call(w,v)?w[v]:w[v]=y(v)}function o(v,y){this.h=y;for(var w=[],T=!0,A=v.length-1;0<=A;A--){var C=v[A]|0;T&&C==y||(w[A]=C,T=!1)}this.g=w}var l={};function u(v){return-128<=v&&128>v?i(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return p;if(0>v)return P(d(-v));for(var y=[],w=1,T=0;v>=w;T++)y[T]=v/w|0,w*=4294967296;return new o(y,0)}function f(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return P(f(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(y,8)),T=p,A=0;A<v.length;A+=8){var C=Math.min(8,v.length-A),I=parseInt(v.substring(A,A+C),y);8>C?(C=d(Math.pow(y,C)),T=T.j(C).add(d(I))):(T=T.j(w),T=T.add(d(I)))}return T}var p=u(0),g=u(1),N=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();for(var v=0,y=1,w=0;w<this.g.length;w++){var T=this.i(w);v+=(0<=T?T:4294967296+T)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(k(this))return"0";if(R(this))return"-"+P(this).toString(v);for(var y=d(Math.pow(v,6)),w=this,T="";;){var A=D(w,y).g;w=x(w,A.j(y));var C=((0<w.g.length?w.g[0]:w.h)>>>0).toString(v);if(w=A,k(w))return C+T;for(;6>C.length;)C="0"+C;T=C+T}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function k(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function R(v){return v.h==-1}t.l=function(v){return v=x(this,v),R(v)?-1:k(v)?0:1};function P(v){for(var y=v.g.length,w=[],T=0;T<y;T++)w[T]=~v.g[T];return new o(w,~v.h).add(g)}t.abs=function(){return R(this)?P(this):this},t.add=function(v){for(var y=Math.max(this.g.length,v.g.length),w=[],T=0,A=0;A<=y;A++){var C=T+(this.i(A)&65535)+(v.i(A)&65535),I=(C>>>16)+(this.i(A)>>>16)+(v.i(A)>>>16);T=I>>>16,C&=65535,I&=65535,w[A]=I<<16|C}return new o(w,w[w.length-1]&-2147483648?-1:0)};function x(v,y){return v.add(P(y))}t.j=function(v){if(k(this)||k(v))return p;if(R(this))return R(v)?P(this).j(P(v)):P(P(this).j(v));if(R(v))return P(this.j(P(v)));if(0>this.l(N)&&0>v.l(N))return d(this.m()*v.m());for(var y=this.g.length+v.g.length,w=[],T=0;T<2*y;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var A=0;A<v.g.length;A++){var C=this.i(T)>>>16,I=this.i(T)&65535,re=v.i(A)>>>16,qe=v.i(A)&65535;w[2*T+2*A]+=I*qe,E(w,2*T+2*A),w[2*T+2*A+1]+=C*qe,E(w,2*T+2*A+1),w[2*T+2*A+1]+=I*re,E(w,2*T+2*A+1),w[2*T+2*A+2]+=C*re,E(w,2*T+2*A+2)}for(T=0;T<y;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=y;T<2*y;T++)w[T]=0;return new o(w,0)};function E(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function S(v,y){this.g=v,this.h=y}function D(v,y){if(k(y))throw Error("division by zero");if(k(v))return new S(p,p);if(R(v))return y=D(P(v),y),new S(P(y.g),P(y.h));if(R(y))return y=D(v,P(y)),new S(P(y.g),y.h);if(30<v.g.length){if(R(v)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var w=g,T=y;0>=T.l(v);)w=V(w),T=V(T);var A=O(w,1),C=O(T,1);for(T=O(T,2),w=O(w,2);!k(T);){var I=C.add(T);0>=I.l(v)&&(A=A.add(w),C=I),T=O(T,1),w=O(w,1)}return y=x(v,A.j(y)),new S(A,y)}for(A=p;0<=v.l(y);){for(w=Math.max(1,Math.floor(v.m()/y.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),C=d(w),I=C.j(y);R(I)||0<I.l(v);)w-=T,C=d(w),I=C.j(y);k(C)&&(C=g),A=A.add(C),v=x(v,I)}return new S(A,v)}t.A=function(v){return D(this,v).h},t.and=function(v){for(var y=Math.max(this.g.length,v.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)&v.i(T);return new o(w,this.h&v.h)},t.or=function(v){for(var y=Math.max(this.g.length,v.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)|v.i(T);return new o(w,this.h|v.h)},t.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)^v.i(T);return new o(w,this.h^v.h)};function V(v){for(var y=v.g.length+1,w=[],T=0;T<y;T++)w[T]=v.i(T)<<1|v.i(T-1)>>>31;return new o(w,v.h)}function O(v,y){var w=y>>5;y%=32;for(var T=v.g.length-w,A=[],C=0;C<T;C++)A[C]=0<y?v.i(C+w)>>>y|v.i(C+w+1)<<32-y:v.i(C+w);return new o(A,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Gr=o}).apply(typeof zy<"u"?zy:typeof self<"u"?self:typeof window<"u"?window:{});var Dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _E,$o,wE,nc,Jh,EE,TE,IE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dl=="object"&&Dl];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var M=a[_];if(!(M in m))break e;m=m[M]}a=a[a.length-1],_=m[a],h=h(_),h!=_&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,_=!1,M={next:function(){if(!_&&m<a.length){var L=m++;return{value:h(L,a[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,_),a.apply(h,M)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function N(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function k(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(_,M,L){for(var G=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)G[_e-2]=arguments[_e];return h.prototype[M].apply(_,G)}}function R(a){const h=a.length;if(0<h){const m=Array(h);for(let _=0;_<h;_++)m[_]=a[_];return m}return[]}function P(a,h){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(u(_)){const M=a.length||0,L=_.length||0;a.length=M+L;for(let G=0;G<L;G++)a[M+G]=_[G]}else a.push(_)}}class x{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var V=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function O(a,h,m){for(const _ in a)h.call(m,a[_],_,a)}function v(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function y(a){const h={};for(const m in a)h[m]=a[m];return h}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,h){let m,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(m in _)a[m]=_[m];for(let L=0;L<w.length;L++)m=w[L],Object.prototype.hasOwnProperty.call(_,m)&&(a[m]=_[m])}}function A(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function C(a){l.setTimeout(()=>{throw a},0)}function I(){var a=X;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class re{constructor(){this.h=this.g=null}add(h,m){const _=qe.get();_.set(h,m),this.h?this.h.next=_:this.g=_,this.h=_}}var qe=new x(()=>new Z,a=>a.reset());class Z{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,q=!1,X=new re,se=()=>{const a=l.Promise.resolve(void 0);Ie=()=>{a.then(Se)}};var Se=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(m){C(m)}var h=qe;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}q=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var nn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function rn(a,h){if(Ee.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(V){e:{try{D(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:sn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&rn.aa.h.call(this)}}k(rn,Ee);var sn={2:"touch",3:"pen",4:"mouse"};rn.prototype.h=function(){rn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var on="closure_listenable_"+(1e6*Math.random()|0),qu=0;function Gu(a,h,m,_,M){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!_,this.ha=M,this.key=++qu,this.da=this.fa=!1}function Qs(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ys(a){this.src=a,this.g={},this.h=0}Ys.prototype.add=function(a,h,m,_,M){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var G=fo(a,h,_,M);return-1<G?(h=a[G],m||(h.fa=!1)):(h=new Gu(h,this.src,L,!!_,M),h.fa=m,a.push(h)),h};function ho(a,h){var m=h.type;if(m in a.g){var _=a.g[m],M=Array.prototype.indexOf.call(_,h,void 0),L;(L=0<=M)&&Array.prototype.splice.call(_,M,1),L&&(Qs(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function fo(a,h,m,_){for(var M=0;M<a.length;++M){var L=a[M];if(!L.da&&L.listener==h&&L.capture==!!m&&L.ha==_)return M}return-1}var mo="closure_lm_"+(1e6*Math.random()|0),po={};function Za(a,h,m,_,M){if(Array.isArray(h)){for(var L=0;L<h.length;L++)Za(a,h[L],m,_,M);return null}return m=U(m),a&&a[on]?a.K(h,m,d(_)?!!_.capture:!1,M):el(a,h,m,!1,_,M)}function el(a,h,m,_,M,L){if(!h)throw Error("Invalid event type");var G=d(M)?!!M.capture:!!M,_e=Xs(a);if(_e||(a[mo]=_e=new Ys(a)),m=_e.add(h,m,_,G,L),m.proxy)return m;if(_=Hu(),m.proxy=_,_.src=a,_.listener=m,a.addEventListener)nn||(M=G),M===void 0&&(M=!1),a.addEventListener(h.toString(),_,M);else if(a.attachEvent)a.attachEvent(tl(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Hu(){function a(m){return h.call(a.src,a.listener,m)}const h=Ku;return a}function _n(a,h,m,_,M){if(Array.isArray(h))for(var L=0;L<h.length;L++)_n(a,h[L],m,_,M);else _=d(_)?!!_.capture:!!_,m=U(m),a&&a[on]?(a=a.i,h=String(h).toString(),h in a.g&&(L=a.g[h],m=fo(L,m,_,M),-1<m&&(Qs(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete a.g[h],a.h--)))):a&&(a=Xs(a))&&(h=a.g[h.toString()],a=-1,h&&(a=fo(h,m,_,M)),(m=-1<a?h[a]:null)&&go(m))}function go(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[on])ho(h.i,a);else{var m=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(m,_,a.capture):h.detachEvent?h.detachEvent(tl(m),_):h.addListener&&h.removeListener&&h.removeListener(_),(m=Xs(h))?(ho(m,a),m.h==0&&(m.src=null,h[mo]=null)):Qs(a)}}}function tl(a){return a in po?po[a]:po[a]="on"+a}function Ku(a,h){if(a.da)a=!0;else{h=new rn(h,this);var m=a.listener,_=a.ha||a.src;a.fa&&go(a),a=m.call(_,h)}return a}function Xs(a){return a=a[mo],a instanceof Ys?a:null}var b="__closure_events_fn_"+(1e9*Math.random()>>>0);function U(a){return typeof a=="function"?a:(a[b]||(a[b]=function(h){return a.handleEvent(h)}),a[b])}function $(){ge.call(this),this.i=new Ys(this),this.M=this,this.F=null}k($,ge),$.prototype[on]=!0,$.prototype.removeEventListener=function(a,h,m,_){_n(this,a,h,m,_)};function H(a,h){var m,_=a.F;if(_)for(m=[];_;_=_.F)m.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new Ee(h,a);else if(h instanceof Ee)h.target=h.target||a;else{var M=h;h=new Ee(_,a),T(h,M)}if(M=!0,m)for(var L=m.length-1;0<=L;L--){var G=h.g=m[L];M=ee(G,_,!0,h)&&M}if(G=h.g=a,M=ee(G,_,!0,h)&&M,M=ee(G,_,!1,h)&&M,m)for(L=0;L<m.length;L++)G=h.g=m[L],M=ee(G,_,!1,h)&&M}$.prototype.N=function(){if($.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],_=0;_<m.length;_++)Qs(m[_]);delete a.g[h],a.h--}}this.F=null},$.prototype.K=function(a,h,m,_){return this.i.add(String(a),h,!1,m,_)},$.prototype.L=function(a,h,m,_){return this.i.add(String(a),h,!0,m,_)};function ee(a,h,m,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,L=0;L<h.length;++L){var G=h[L];if(G&&!G.da&&G.capture==m){var _e=G.listener,nt=G.ha||G.src;G.fa&&ho(a.i,G),M=_e.call(nt,_)!==!1&&M}}return M&&!_.defaultPrevented}function ae(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function ue(a){a.g=ae(()=>{a.g=null,a.i&&(a.i=!1,ue(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ct extends ge{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ue(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(a){ge.call(this),this.h=a,this.g={}}k(Pe,ge);var Js=[];function yo(a){O(a.g,function(h,m){this.g.hasOwnProperty(m)&&go(h)},a),a.g={}}Pe.prototype.N=function(){Pe.aa.N.call(this),yo(this)},Pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zs=l.JSON.stringify,vo=l.JSON.parse,us=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Un(){}Un.prototype.h=null;function ds(a){return a.h||(a.h=a.i())}function hr(){}var wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zn(){Ee.call(this,"d")}k(zn,Ee);function fr(){Ee.call(this,"c")}k(fr,Ee);var En={},_o=null;function Tn(){return _o=_o||new $}En.La="serverreachability";function mr(a){Ee.call(this,En.La,a)}k(mr,Ee);function In(a){const h=Tn();H(h,new mr(h))}En.STAT_EVENT="statevent";function hs(a,h){Ee.call(this,En.STAT_EVENT,a),this.stat=h}k(hs,Ee);function ze(a){const h=Tn();H(h,new hs(h,a))}En.Ma="timingevent";function pr(a,h){Ee.call(this,En.Ma,a),this.size=h}k(pr,Ee);function Sn(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function gr(){this.g=!0}gr.prototype.xa=function(){this.g=!1};function nl(a,h,m,_,M,L){a.info(function(){if(a.g)if(L)for(var G="",_e=L.split("&"),nt=0;nt<_e.length;nt++){var pe=_e[nt].split("=");if(1<pe.length){var dt=pe[0];pe=pe[1];var ht=dt.split("_");G=2<=ht.length&&ht[1]=="type"?G+(dt+"="+pe+"&"):G+(dt+"=redacted&")}}else G=null;else G=L;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+h+`
`+m+`
`+G})}function fs(a,h,m,_,M,L,G){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+h+`
`+m+`
`+L+" "+G})}function qt(a,h,m,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+ms(a,m)+(_?" "+_:"")})}function ei(a,h){a.info(function(){return"TIMEOUT: "+h})}gr.prototype.info=function(){};function ms(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var _=m[a];if(!(2>_.length)){var M=_[1];if(Array.isArray(M)&&!(1>M.length)){var L=M[0];if(L!="noop"&&L!="stop"&&L!="close")for(var G=1;G<M.length;G++)M[G]=""}}}}return Zs(m)}catch{return h}}var yr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ve={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},et;function tt(){}k(tt,Un),tt.prototype.g=function(){return new XMLHttpRequest},tt.prototype.i=function(){return{}},et=new tt;function ut(a,h,m,_){this.j=a,this.i=h,this.l=m,this.R=_||1,this.U=new Pe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ti}function ti(){this.i=null,this.g="",this.h=!1}var hp={},Qu={};function Yu(a,h,m){a.L=1,a.v=ol(Bn(h)),a.m=m,a.P=!0,fp(a,null)}function fp(a,h){a.F=Date.now(),rl(a),a.A=Bn(a.v);var m=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),kp(m.i,"t",_),a.C=0,m=a.j.J,a.h=new ti,a.g=qp(a.j,m?h:null,!a.m),0<a.O&&(a.M=new ct(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,_=a.ca;var M="readystatechange";Array.isArray(M)||(M&&(Js[0]=M.toString()),M=Js);for(var L=0;L<M.length;L++){var G=Za(m,M[L],_||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),In(),nl(a.i,a.u,a.A,a.l,a.R,a.m)}ut.prototype.ca=function(a){a=a.target;const h=this.M;h&&$n(a)==3?h.j():this.Y(a)},ut.prototype.Y=function(a){try{if(a==this.g)e:{const ht=$n(this.g);var h=this.g.Ba();const si=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||bp(this.g)))){this.J||ht!=4||h==7||(h==8||0>=si?In(3):In(2)),Xu(this);var m=this.g.Z();this.X=m;t:if(mp(this)){var _=bp(this.g);a="";var M=_.length,L=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),wo(this);var G="";break t}this.h.i=new l.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(L&&h==M-1)});_.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,fs(this.i,this.u,this.A,this.l,this.R,ht,m),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,nt=this.g;if((_e=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(_e)){var pe=_e;break t}}pe=null}if(m=pe)qt(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ju(this,m);else{this.o=!1,this.s=3,ze(12),ps(this),wo(this);break e}}if(this.P){m=!0;let an;for(;!this.J&&this.C<G.length;)if(an=lI(this,G),an==Qu){ht==4&&(this.s=4,ze(14),m=!1),qt(this.i,this.l,null,"[Incomplete Response]");break}else if(an==hp){this.s=4,ze(15),qt(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else qt(this.i,this.l,an,null),Ju(this,an);if(mp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||G.length!=0||this.h.h||(this.s=1,ze(16),m=!1),this.o=this.o&&m,!m)qt(this.i,this.l,G,"[Invalid Chunked Response]"),ps(this),wo(this);else if(0<G.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),sd(dt),dt.M=!0,ze(11))}}else qt(this.i,this.l,G,null),Ju(this,G);ht==4&&ps(this),this.o&&!this.J&&(ht==4?zp(this.j,this):(this.o=!1,rl(this)))}else xI(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,ze(12)):(this.s=0,ze(13)),ps(this),wo(this)}}}catch{}finally{}};function mp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function lI(a,h){var m=a.C,_=h.indexOf(`
`,m);return _==-1?Qu:(m=Number(h.substring(m,_)),isNaN(m)?hp:(_+=1,_+m>h.length?Qu:(h=h.slice(_,_+m),a.C=_+m,h)))}ut.prototype.cancel=function(){this.J=!0,ps(this)};function rl(a){a.S=Date.now()+a.I,pp(a,a.I)}function pp(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Sn(g(a.ba,a),h)}function Xu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ut.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ei(this.i,this.A),this.L!=2&&(In(),ze(17)),ps(this),this.s=2,wo(this)):pp(this,this.S-a)};function wo(a){a.j.G==0||a.J||zp(a.j,a)}function ps(a){Xu(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,yo(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Ju(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||Zu(m.h,a))){if(!a.K&&Zu(m.h,a)&&m.G==3){try{var _=m.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)hl(m),ul(m);else break e;rd(m),ze(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=Sn(g(m.Za,m),6e3));if(1>=vp(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ys(m,11)}else if((a.K||m.g==a)&&hl(m),!E(h))for(M=m.Da.g.parse(h),h=0;h<M.length;h++){let pe=M[h];if(m.T=pe[0],pe=pe[1],m.G==2)if(pe[0]=="c"){m.K=pe[1],m.ia=pe[2];const dt=pe[3];dt!=null&&(m.la=dt,m.j.info("VER="+m.la));const ht=pe[4];ht!=null&&(m.Aa=ht,m.j.info("SVER="+m.Aa));const si=pe[5];si!=null&&typeof si=="number"&&0<si&&(_=1.5*si,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const an=a.g;if(an){const ml=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ml){var L=_.h;L.g||ml.indexOf("spdy")==-1&&ml.indexOf("quic")==-1&&ml.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ed(L,L.h),L.h=null))}if(_.D){const id=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;id&&(_.ya=id,xe(_.I,_.D,id))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var G=a;if(_.qa=Wp(_,_.J?_.ia:null,_.W),G.K){_p(_.h,G);var _e=G,nt=_.L;nt&&(_e.I=nt),_e.B&&(Xu(_e),rl(_e)),_.g=G}else Fp(_);0<m.i.length&&dl(m)}else pe[0]!="stop"&&pe[0]!="close"||ys(m,7);else m.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?ys(m,7):nd(m):pe[0]!="noop"&&m.l&&m.l.ta(pe),m.v=0)}}In(4)}catch{}}var cI=class{constructor(a,h){this.g=a,this.map=h}};function gp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function vp(a){return a.h?1:a.g?a.g.size:0}function Zu(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ed(a,h){a.g?a.g.add(h):a.h=h}function _p(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}gp.prototype.cancel=function(){if(this.i=wp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function wp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return R(a.i)}function uI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],m=a.length,_=0;_<m;_++)h.push(a[_]);return h}h=[],m=0;for(_ in a)h[m++]=a[_];return h}function dI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const _ in a)h[m++]=_;return h}}}function Ep(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=dI(a),_=uI(a),M=_.length,L=0;L<M;L++)h.call(void 0,_[L],m&&m[L],a)}var Tp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hI(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var _=a[m].indexOf("="),M=null;if(0<=_){var L=a[m].substring(0,_);M=a[m].substring(_+1)}else L=a[m];h(L,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function gs(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof gs){this.h=a.h,sl(this,a.j),this.o=a.o,this.g=a.g,il(this,a.s),this.l=a.l;var h=a.i,m=new Io;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Ip(this,m),this.m=a.m}else a&&(h=String(a).match(Tp))?(this.h=!1,sl(this,h[1]||"",!0),this.o=Eo(h[2]||""),this.g=Eo(h[3]||"",!0),il(this,h[4]),this.l=Eo(h[5]||"",!0),Ip(this,h[6]||"",!0),this.m=Eo(h[7]||"")):(this.h=!1,this.i=new Io(null,this.h))}gs.prototype.toString=function(){var a=[],h=this.j;h&&a.push(To(h,Sp,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(To(h,Sp,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(To(m,m.charAt(0)=="/"?pI:mI,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",To(m,yI)),a.join("")};function Bn(a){return new gs(a)}function sl(a,h,m){a.j=m?Eo(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function il(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Ip(a,h,m){h instanceof Io?(a.i=h,vI(a.i,a.h)):(m||(h=To(h,gI)),a.i=new Io(h,a.h))}function xe(a,h,m){a.i.set(h,m)}function ol(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Eo(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function To(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,fI),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function fI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Sp=/[#\/\?@]/g,mI=/[#\?:]/g,pI=/[#\?]/g,gI=/[#\?@]/g,yI=/#/g;function Io(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function vr(a){a.g||(a.g=new Map,a.h=0,a.i&&hI(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Io.prototype,t.add=function(a,h){vr(this),this.i=null,a=ni(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function xp(a,h){vr(a),h=ni(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Np(a,h){return vr(a),h=ni(a,h),a.g.has(h)}t.forEach=function(a,h){vr(this),this.g.forEach(function(m,_){m.forEach(function(M){a.call(h,M,_,this)},this)},this)},t.na=function(){vr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let _=0;_<h.length;_++){const M=a[_];for(let L=0;L<M.length;L++)m.push(h[_])}return m},t.V=function(a){vr(this);let h=[];if(typeof a=="string")Np(this,a)&&(h=h.concat(this.g.get(ni(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return vr(this),this.i=null,a=ni(this,a),Np(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function kp(a,h,m){xp(a,h),0<m.length&&(a.i=null,a.g.set(ni(a,h),R(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var _=h[m];const L=encodeURIComponent(String(_)),G=this.V(_);for(_=0;_<G.length;_++){var M=L;G[_]!==""&&(M+="="+encodeURIComponent(String(G[_]))),a.push(M)}}return this.i=a.join("&")};function ni(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function vI(a,h){h&&!a.j&&(vr(a),a.i=null,a.g.forEach(function(m,_){var M=_.toLowerCase();_!=M&&(xp(this,_),kp(this,M,m))},a)),a.j=h}function _I(a,h){const m=new gr;if(l.Image){const _=new Image;_.onload=N(_r,m,"TestLoadImage: loaded",!0,h,_),_.onerror=N(_r,m,"TestLoadImage: error",!1,h,_),_.onabort=N(_r,m,"TestLoadImage: abort",!1,h,_),_.ontimeout=N(_r,m,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function wI(a,h){const m=new gr,_=new AbortController,M=setTimeout(()=>{_.abort(),_r(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(L=>{clearTimeout(M),L.ok?_r(m,"TestPingServer: ok",!0,h):_r(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),_r(m,"TestPingServer: error",!1,h)})}function _r(a,h,m,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(m)}catch{}}function EI(){this.g=new us}function TI(a,h,m){const _=m||"";try{Ep(a,function(M,L){let G=M;d(M)&&(G=Zs(M)),h.push(_+L+"="+encodeURIComponent(G))})}catch(M){throw h.push(_+"type="+encodeURIComponent("_badmap")),M}}function al(a){this.l=a.Ub||null,this.j=a.eb||!1}k(al,Un),al.prototype.g=function(){return new ll(this.l,this.j)},al.prototype.i=function(a){return function(){return a}}({});function ll(a,h){$.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(ll,$),t=ll.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,xo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,So(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,xo(this)),this.g&&(this.readyState=3,xo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ap(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ap(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?So(this):xo(this),this.readyState==3&&Ap(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,So(this))},t.Qa=function(a){this.g&&(this.response=a,So(this))},t.ga=function(){this.g&&So(this)};function So(a){a.readyState=4,a.l=null,a.j=null,a.v=null,xo(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function xo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Cp(a){let h="";return O(a,function(m,_){h+=_,h+=":",h+=m,h+=`\r
`}),h}function td(a,h,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Cp(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):xe(a,h,m))}function Me(a){$.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Me,$);var II=/^https?$/i,SI=["POST","PUT"];t=Me.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():et.g(),this.v=this.o?ds(this.o):ds(et),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){Pp(this,L);return}if(a=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)m.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())m.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),M=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(SI,h,void 0))||_||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,G]of m)this.g.setRequestHeader(L,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dp(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Pp(this,L)}};function Pp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Rp(a),cl(a)}function Rp(a){a.A||(a.A=!0,H(a,"complete"),H(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,H(this,"complete"),H(this,"abort"),cl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cl(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jp(this):this.bb())},t.bb=function(){jp(this)};function jp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||$n(a)!=4||a.Z()!=2)){if(a.u&&$n(a)==4)ae(a.Ea,0,a);else if(H(a,"readystatechange"),$n(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var _;if(_=G===0){var M=String(a.D).match(Tp)[1]||null;!M&&l.self&&l.self.location&&(M=l.self.location.protocol.slice(0,-1)),_=!II.test(M?M.toLowerCase():"")}m=_}if(m)H(a,"complete"),H(a,"success");else{a.m=6;try{var L=2<$n(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Rp(a)}}finally{cl(a)}}}}function cl(a,h){if(a.g){Dp(a);const m=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||H(a,"ready");try{m.onreadystatechange=_}catch{}}}function Dp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function $n(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),vo(h)}};function bp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function xI(a){const h={};a=(a.g&&2<=$n(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(E(a[_]))continue;var m=A(a[_]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=h[M]||[];h[M]=L,L.push(m)}v(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function No(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function Op(a){this.Aa=0,this.i=[],this.j=new gr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=No("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=No("baseRetryDelayMs",5e3,a),this.cb=No("retryDelaySeedMs",1e4,a),this.Wa=No("forwardChannelMaxRetries",2,a),this.wa=No("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new gp(a&&a.concurrentRequestLimit),this.Da=new EI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Op.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,_){ze(0),this.W=a,this.H=h||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=Wp(this,null,this.W),dl(this)};function nd(a){if(Mp(a),a.G==3){var h=a.U++,m=Bn(a.I);if(xe(m,"SID",a.K),xe(m,"RID",h),xe(m,"TYPE","terminate"),ko(a,m),h=new ut(a,a.j,h),h.L=2,h.v=ol(Bn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=qp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),rl(h)}$p(a)}function ul(a){a.g&&(sd(a),a.g.cancel(),a.g=null)}function Mp(a){ul(a),a.u&&(l.clearTimeout(a.u),a.u=null),hl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function dl(a){if(!yp(a.h)&&!a.s){a.s=!0;var h=a.Ga;Ie||se(),q||(Ie(),q=!0),X.add(h,a),a.B=0}}function NI(a,h){return vp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Sn(g(a.Ga,a,h),Bp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const M=new ut(this,this.j,a);let L=this.o;if(this.S&&(L?(L=y(L),T(L,this.S)):L=this.S),this.m!==null||this.O||(M.H=L,L=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Vp(this,M,h),m=Bn(this.I),xe(m,"RID",a),xe(m,"CVER",22),this.D&&xe(m,"X-HTTP-Session-Id",this.D),ko(this,m),L&&(this.O?h="headers="+encodeURIComponent(String(Cp(L)))+"&"+h:this.m&&td(m,this.m,L)),ed(this.h,M),this.Ua&&xe(m,"TYPE","init"),this.P?(xe(m,"$req",h),xe(m,"SID","null"),M.T=!0,Yu(M,m,null)):Yu(M,m,h),this.G=2}}else this.G==3&&(a?Lp(this,a):this.i.length==0||yp(this.h)||Lp(this))};function Lp(a,h){var m;h?m=h.l:m=a.U++;const _=Bn(a.I);xe(_,"SID",a.K),xe(_,"RID",m),xe(_,"AID",a.T),ko(a,_),a.m&&a.o&&td(_,a.m,a.o),m=new ut(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Vp(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ed(a.h,m),Yu(m,_,h)}function ko(a,h){a.H&&O(a.H,function(m,_){xe(h,_,m)}),a.l&&Ep({},function(m,_){xe(h,_,m)})}function Vp(a,h,m){m=Math.min(a.i.length,m);var _=a.l?g(a.l.Na,a.l,a):null;e:{var M=a.i;let L=-1;for(;;){const G=["count="+m];L==-1?0<m?(L=M[0].g,G.push("ofs="+L)):L=0:G.push("ofs="+L);let _e=!0;for(let nt=0;nt<m;nt++){let pe=M[nt].g;const dt=M[nt].map;if(pe-=L,0>pe)L=Math.max(0,M[nt].g-100),_e=!1;else try{TI(dt,G,"req"+pe+"_")}catch{_&&_(dt)}}if(_e){_=G.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,_}function Fp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Ie||se(),q||(Ie(),q=!0),X.add(h,a),a.v=0}}function rd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Sn(g(a.Fa,a),Bp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Up(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Sn(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ze(10),ul(this),Up(this))};function sd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Up(a){a.g=new ut(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Bn(a.qa);xe(h,"RID","rpc"),xe(h,"SID",a.K),xe(h,"AID",a.T),xe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(h,"TO",a.ja),xe(h,"TYPE","xmlhttp"),ko(a,h),a.m&&a.o&&td(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=ol(Bn(h)),m.m=null,m.P=!0,fp(m,a)}t.Za=function(){this.C!=null&&(this.C=null,ul(this),rd(this),ze(19))};function hl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function zp(a,h){var m=null;if(a.g==h){hl(a),sd(a),a.g=null;var _=2}else if(Zu(a.h,h))m=h.D,_p(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var M=a.B;_=Tn(),H(_,new pr(_,m)),dl(a)}else Fp(a);else if(M=h.s,M==3||M==0&&0<h.X||!(_==1&&NI(a,h)||_==2&&rd(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),M){case 1:ys(a,5);break;case 4:ys(a,10);break;case 3:ys(a,6);break;default:ys(a,2)}}}function Bp(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function ys(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),_=a.Xa;const M=!_;_=new gs(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||sl(_,"https"),ol(_),M?_I(_.toString(),m):wI(_.toString(),m)}else ze(2);a.G=0,a.l&&a.l.sa(h),$p(a),Mp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function $p(a){if(a.G=0,a.ka=[],a.l){const h=wp(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ka,h),P(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function Wp(a,h,m){var _=m instanceof gs?Bn(m):new gs(m);if(_.g!="")h&&(_.g=h+"."+_.g),il(_,_.s);else{var M=l.location;_=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var L=new gs(null);_&&sl(L,_),h&&(L.g=h),M&&il(L,M),m&&(L.l=m),_=L}return m=a.D,h=a.ya,m&&h&&xe(_,m,h),xe(_,"VER",a.la),ko(a,_),_}function qp(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Me(new al({eb:m})):new Me(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gp(){}t=Gp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fl(){}fl.prototype.g=function(a,h){return new Ot(a,h)};function Ot(a,h){$.call(this),this.g=new Op(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!E(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ri(this)}k(Ot,$),Ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){nd(this.g)},Ot.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=Zs(a),a=m);h.i.push(new cI(h.Ya++,a)),h.G==3&&dl(h)},Ot.prototype.N=function(){this.g.l=null,delete this.j,nd(this.g),delete this.g,Ot.aa.N.call(this)};function Hp(a){zn.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}k(Hp,zn);function Kp(){fr.call(this),this.status=1}k(Kp,fr);function ri(a){this.g=a}k(ri,Gp),ri.prototype.ua=function(){H(this.g,"a")},ri.prototype.ta=function(a){H(this.g,new Hp(a))},ri.prototype.sa=function(a){H(this.g,new Kp)},ri.prototype.ra=function(){H(this.g,"b")},fl.prototype.createWebChannel=fl.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,IE=function(){return new fl},TE=function(){return Tn()},EE=En,Jh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yr.NO_ERROR=0,yr.TIMEOUT=8,yr.HTTP_ERROR=6,nc=yr,Ve.COMPLETE="complete",wE=Ve,hr.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",$.prototype.listen=$.prototype.K,$o=hr,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,_E=Me}).apply(typeof Dl<"u"?Dl:typeof self<"u"?self:typeof window<"u"?window:{});const By="@firebase/firestore",$y="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new ym("@firebase/firestore");function ai(){return Fs.logLevel}function K(t,...e){if(Fs.logLevel<=de.DEBUG){const n=e.map(Cm);Fs.debug(`Firestore (${oo}): ${t}`,...n)}}function or(t,...e){if(Fs.logLevel<=de.ERROR){const n=e.map(Cm);Fs.error(`Firestore (${oo}): ${t}`,...n)}}function $i(t,...e){if(Fs.logLevel<=de.WARN){const n=e.map(Cm);Fs.warn(`Firestore (${oo}): ${t}`,...n)}}function Cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,SE(t,r,n)}function SE(t,e,n){let r=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw or(r),new Error(r)}function ye(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||SE(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class rP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sP{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new xE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class iP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new iP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=lP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function Zh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return le(r,s);{const i=NE(),o=cP(i.encode(qy(t,n)),i.encode(qy(e,n)));return o!==0?o:le(r,s)}}n+=r>65535?2:1}return le(t.length,e.length)}function qy(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function cP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return le(t[n],e[n]);return le(t.length,e.length)}function Wi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=-62135596800,Hy=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Hy);return new Ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gy)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hy}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Gy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Ke(0,0))}static max(){return new ie(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="__name__";class kn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=kn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return le(e.length,n.length)}static compareSegments(e,n){const r=kn.isNumericId(e),s=kn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?kn.extractNumericId(e).compare(kn.extractNumericId(n)):Zh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gr.fromString(e.substring(4,e.length-2))}}class ke extends kn{construct(e,n,r){return new ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const uP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends kn{construct(e,n,r){return new it(e,n,r)}static isValidIdentifier(e){return uP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ky}static keyField(){return new it([Ky])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(ke.fromString(e))}static fromName(e){return new J(ke.fromString(e).popFirst(5))}static empty(){return new J(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new ke(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=-1;function dP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Xr(s,J.empty(),e)}function hP(t){return new Xr(t.readTime,t.key,Pa)}class Xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xr(ie.min(),J.empty(),Pa)}static max(){return new Xr(ie.max(),J.empty(),Pa)}}function fP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==mP)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function gP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Nu.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=-1;function ku(t){return t==null}function $c(t){return t===0&&1/t==-1/0}function yP(t){return typeof t=="number"&&Number.isInteger(t)&&!$c(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="";function vP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qy(e)),e=_P(t.get(n),e);return Qy(e)}function _P(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case AE:n+="";break;default:n+=i}}return n}function Qy(t){return t+AE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bl(this.root,e,this.comparator,!0)}}class bl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??st.RED,this.left=s??st.EMPTY,this.right=i??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new st(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return st.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xy(this.data.getIterator())}getIteratorFrom(e){return new Xy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class Xy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new Qe(it.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new PE("Invalid base64 string: "+i):i}}(e);return new lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const wP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(t){if(ye(!!t,39018),typeof t=="string"){let e=0;const n=wP.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="server_timestamp",jE="__type__",DE="__previous_value__",bE="__local_write_time__";function Rm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[jE])===null||n===void 0?void 0:n.stringValue)===RE}function Au(t){const e=t.mapValue.fields[DE];return Rm(e)?Au(e):e}function Ra(t){const e=Jr(t.mapValue.fields[bE].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n,r,s,i,o,l,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Wc="(default)";class ja{constructor(e,n){this.projectId=e,this.database=n||Wc}static empty(){return new ja("","")}get isDefaultDatabase(){return this.database===Wc}isEqual(e){return e instanceof ja&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="__type__",TP="__max__",Ol={mapValue:{}},ME="__vector__",qc="value";function es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rm(t)?4:SP(t)?9007199254740991:IP(t)?10:11:ne(28295,{value:t})}function Fn(t,e){if(t===e)return!0;const n=es(t);if(n!==es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ra(t).isEqual(Ra(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Jr(s.timestampValue),l=Jr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Zr(s.bytesValue).isEqual(Zr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),l=Fe(i.doubleValue);return o===l?$c(o)===$c(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Wi(t.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Yy(o)!==Yy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Fn(o[u],l[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Da(t,e){return(t.values||[]).find(n=>Fn(n,e))!==void 0}function qi(t,e){if(t===e)return 0;const n=es(t),r=es(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Fe(i.integerValue||i.doubleValue),u=Fe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Jy(t.timestampValue,e.timestampValue);case 4:return Jy(Ra(t),Ra(e));case 5:return Zh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Zr(i),u=Zr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=le(l[d],u[d]);if(f!==0)return f}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=le(Fe(i.latitude),Fe(o.latitude));return l!==0?l:le(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const p=i.fields||{},g=o.fields||{},N=(l=p[qc])===null||l===void 0?void 0:l.arrayValue,k=(u=g[qc])===null||u===void 0?void 0:u.arrayValue,R=le(((d=N==null?void 0:N.values)===null||d===void 0?void 0:d.length)||0,((f=k==null?void 0:k.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:Zy(N,k)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ol.mapValue&&o===Ol.mapValue)return 0;if(i===Ol.mapValue)return 1;if(o===Ol.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=Zh(u[p],f[p]);if(g!==0)return g;const N=qi(l[u[p]],d[f[p]]);if(N!==0)return N}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{Pe:n})}}function Jy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Jr(t),r=Jr(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function Zy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=qi(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function Gi(t){return ef(t)}function ef(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ef(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ef(n.fields[o])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function rc(t){switch(es(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Au(t);return e?16+rc(e):16;case 5:return 2*t.stringValue.length;case 6:return Zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+rc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ls(r.fields,(i,o)=>{s+=i.length+rc(o)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function ev(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tf(t){return!!t&&"integerValue"in t}function jm(t){return!!t&&"arrayValue"in t}function tv(t){return!!t&&"nullValue"in t}function nv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sc(t){return!!t&&"mapValue"in t}function IP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[OE])===null||n===void 0?void 0:n.stringValue)===ME}function sa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ls(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(n)}setAll(e){let n=it.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=sa(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());sc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];sc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ls(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Pt(sa(this.value))}}function LE(t){const e=[];return ls(t.fields,(n,r)=>{const s=new it([n]);if(sc(r)){const i=LE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new _t(e,0,ie.min(),ie.min(),ie.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,s){return new _t(e,1,n,ie.min(),r,s,0)}static newNoDocument(e,n){return new _t(e,2,n,ie.min(),ie.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,ie.min(),ie.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.position=e,this.inclusive=n}}function rv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=qi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function sv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n="asc"){this.field=e,this.dir=n}}function xP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{}class We extends VE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kP(e,n,r):n==="array-contains"?new PP(e,r):n==="in"?new RP(e,r):n==="not-in"?new jP(e,r):n==="array-contains-any"?new DP(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AP(e,r):new CP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qi(n,this.value)):n!==null&&es(this.value)===es(n)&&this.matchesComparison(qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yn extends VE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new yn(e,n)}matches(e){return FE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function FE(t){return t.op==="and"}function UE(t){return NP(t)&&FE(t)}function NP(t){for(const e of t.filters)if(e instanceof yn)return!1;return!0}function nf(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+Gi(t.value);if(UE(t))return t.filters.map(e=>nf(e)).join(",");{const e=t.filters.map(n=>nf(n)).join(",");return`${t.op}(${e})`}}function zE(t,e){return t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.field.isEqual(s.field)&&Fn(r.value,s.value)}(t,e):t instanceof yn?function(r,s){return s instanceof yn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&zE(o,s.filters[l]),!0):!1}(t,e):void ne(19439)}function BE(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${Gi(n.value)}`}(t):t instanceof yn?function(n){return n.op.toString()+" {"+n.getFilters().map(BE).join(" ,")+"}"}(t):"Filter"}class kP extends We{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class AP extends We{constructor(e,n){super(e,"in",n),this.keys=$E("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CP extends We{constructor(e,n){super(e,"not-in",n),this.keys=$E("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $E(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class PP extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jm(n)&&Da(n.arrayValue,this.value)}}class RP extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Da(this.value.arrayValue,n)}}class jP extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Da(this.value.arrayValue,n)}}class DP extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Da(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function iv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new bP(t,e,n,r,s,i,o)}function Dm(t){const e=oe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ku(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gi(r)).join(",")),e.Ie=n}return e.Ie}function bm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sv(t.startAt,e.startAt)&&sv(t.endAt,e.endAt)}function rf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function OP(t,e,n,r,s,i,o,l){return new co(t,e,n,r,s,i,o,l)}function Om(t){return new co(t)}function ov(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WE(t){return t.collectionGroup!==null}function ia(t){const e=oe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Qe(it.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new ba(i,r))}),n.has(it.keyField().canonicalString())||e.Ee.push(new ba(it.keyField(),r))}return e.Ee}function Ln(t){const e=oe(t);return e.de||(e.de=MP(e,ia(t))),e.de}function MP(t,e){if(t.limitType==="F")return iv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ba(s.field,i)});const n=t.endAt?new Gc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gc(t.startAt.position,t.startAt.inclusive):null;return iv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sf(t,e){const n=t.filters.concat([e]);return new co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function of(t,e,n){return new co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cu(t,e){return bm(Ln(t),Ln(e))&&t.limitType===e.limitType}function qE(t){return`${Dm(Ln(t))}|lt:${t.limitType}`}function li(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>BE(s)).join(", ")}]`),ku(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Gi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Gi(s)).join(",")),`Target(${r})`}(Ln(t))}; limitType=${t.limitType})`}function Pu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ia(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=rv(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,ia(r),s)||r.endAt&&!function(o,l,u){const d=rv(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,ia(r),s))}(t,e)}function LP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GE(t){return(e,n)=>{let r=!1;for(const s of ia(t)){const i=VP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function VP(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?qi(u,d):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ls(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return CE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=new Oe(J.comparator);function ar(){return FP}const HE=new Oe(J.comparator);function Wo(...t){let e=HE;for(const n of t)e=e.insert(n.key,n);return e}function KE(t){let e=HE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ns(){return oa()}function QE(){return oa()}function oa(){return new qs(t=>t.toString(),(t,e)=>t.isEqual(e))}const UP=new Oe(J.comparator),zP=new Qe(J.comparator);function he(...t){let e=zP;for(const n of t)e=e.add(n);return e}const BP=new Qe(le);function $P(){return BP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function YE(t){return{integerValue:""+t}}function WP(t,e){return yP(e)?YE(e):Mm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(){this._=void 0}}function qP(t,e,n){return t instanceof Hc?function(s,i){const o={fields:{[jE]:{stringValue:RE},[bE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rm(i)&&(i=Au(i)),i&&(o.fields[DE]=i),{mapValue:o}}(n,e):t instanceof Oa?JE(t,e):t instanceof Ma?ZE(t,e):function(s,i){const o=XE(s,i),l=av(o)+av(s.Re);return tf(o)&&tf(s.Re)?YE(l):Mm(s.serializer,l)}(t,e)}function GP(t,e,n){return t instanceof Oa?JE(t,e):t instanceof Ma?ZE(t,e):n}function XE(t,e){return t instanceof Kc?function(r){return tf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Hc extends Ru{}class Oa extends Ru{constructor(e){super(),this.elements=e}}function JE(t,e){const n=eT(e);for(const r of t.elements)n.some(s=>Fn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ma extends Ru{constructor(e){super(),this.elements=e}}function ZE(t,e){let n=eT(e);for(const r of t.elements)n=n.filter(s=>!Fn(s,r));return{arrayValue:{values:n}}}class Kc extends Ru{constructor(e,n){super(),this.serializer=e,this.Re=n}}function av(t){return Fe(t.integerValue||t.doubleValue)}function eT(t){return jm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function HP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Oa&&s instanceof Oa||r instanceof Ma&&s instanceof Ma?Wi(r.elements,s.elements,Fn):r instanceof Kc&&s instanceof Kc?Fn(r.Re,s.Re):r instanceof Hc&&s instanceof Hc}(t.transform,e.transform)}class KP{constructor(e,n){this.version=e,this.transformResults=n}}class Jt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ic(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ju{}function tT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lm(t.key,Jt.none()):new Ka(t.key,t.data,Jt.none());{const n=t.data,r=Pt.empty();let s=new Qe(it.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new cs(t.key,r,new Ut(s.toArray()),Jt.none())}}function QP(t,e,n){t instanceof Ka?function(s,i,o){const l=s.value.clone(),u=cv(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof cs?function(s,i,o){if(!ic(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=cv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(nT(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function aa(t,e,n,r){return t instanceof Ka?function(i,o,l,u){if(!ic(i.precondition,o))return l;const d=i.value.clone(),f=uv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof cs?function(i,o,l,u){if(!ic(i.precondition,o))return l;const d=uv(i.fieldTransforms,u,o),f=o.data;return f.setAll(nT(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return ic(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function YP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=XE(r.transform,s||null);i!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,i))}return n||null}function lv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wi(r,s,(i,o)=>HP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ka extends ju{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class cs extends ju{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function cv(t,e,n){const r=new Map;ye(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,GP(o,l,n[s]))}return r}function uv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,qP(i,o,e))}return r}class Lm extends ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XP extends ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&QP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=tT(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Wi(this.mutations,e.mutations,(n,r)=>lv(n,r))&&Wi(this.baseMutations,e.baseMutations,(n,r)=>lv(n,r))}}class Vm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return UP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Vm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,fe;function tR(t){switch(t){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function rT(t){if(t===void 0)return or("GRPC error has no .code"),F.UNKNOWN;switch(t){case Be.OK:return F.OK;case Be.CANCELLED:return F.CANCELLED;case Be.UNKNOWN:return F.UNKNOWN;case Be.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Be.INTERNAL:return F.INTERNAL;case Be.UNAVAILABLE:return F.UNAVAILABLE;case Be.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Be.NOT_FOUND:return F.NOT_FOUND;case Be.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Be.ABORTED:return F.ABORTED;case Be.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Be.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:t})}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=new Gr([4294967295,4294967295],0);function dv(t){const e=NE().encode(t),n=new vE;return n.update(e),new Uint8Array(n.digest())}function hv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Gr([n,r],0),new Gr([s,i],0)]}class Fm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qo(`Invalid padding: ${n}`);if(r<0)throw new qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Gr.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Gr.fromNumber(r)));return s.compare(nR)===1&&(s=new Gr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=dv(e),[r,s]=hv(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Fm(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const n=dv(e),[r,s]=hv(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Du(ie.min(),s,new Oe(le),ar(),he())}}class Qa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qa(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class sT{constructor(e,n){this.targetId=e,this.Ce=n}}class iT{constructor(e,n,r=lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class fv{constructor(){this.Fe=0,this.Me=mv(),this.xe=lt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=he(),n=he(),r=he();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new Qa(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=mv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ye(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class rR{constructor(e){this.ze=e,this.je=new Map,this.He=ar(),this.Je=Ml(),this.Ye=Ml(),this.Ze=new Oe(le)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(rf(i))if(r===0){const o=new J(i.path);this.tt(n,o,_t.newNoDocument(o,ie.min()))}else ye(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Zr(r).toUint8Array()}catch(u){if(u instanceof PE)return $i("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Fm(o,s,i)}catch(u){return $i(u instanceof qo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&rf(l.target)){const u=new J(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,_t.newNoDocument(u,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=he();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Du(e,n,this.Ze,this.He,r);return this.He=ar(),this.Je=Ml(),this.Ye=Ml(),this.Ze=new Oe(le),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new fv,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Qe(le),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Qe(le),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new fv),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Ml(){return new Oe(J.comparator)}function mv(){return new Oe(J.comparator)}const sR={asc:"ASCENDING",desc:"DESCENDING"},iR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oR={and:"AND",or:"OR"};class aR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function af(t,e){return t.useProto3Json||ku(e)?e:{value:e}}function Qc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lR(t,e){return Qc(t,e.toTimestamp())}function Vn(t){return ye(!!t,49232),ie.fromTimestamp(function(n){const r=Jr(n);return new Ke(r.seconds,r.nanos)}(t))}function Um(t,e){return lf(t,e).canonicalString()}function lf(t,e){const n=function(s){return new ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aT(t){const e=ke.fromString(t);return ye(hT(e),10190,{key:e.toString()}),e}function cf(t,e){return Um(t.databaseId,e.path)}function Ud(t,e){const n=aT(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(cT(n))}function lT(t,e){return Um(t.databaseId,e)}function cR(t){const e=aT(t);return e.length===4?ke.emptyPath():cT(e)}function uf(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cT(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pv(t,e,n){return{name:cf(t,e),fields:n.value.mapValue.fields}}function uR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ye(f===void 0||typeof f=="string",58123),lt.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),lt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?F.UNKNOWN:rT(d.code);return new Q(f,d.message||"")}(o);n=new iT(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ud(t,r.document.name),i=Vn(r.document.updateTime),o=r.document.createTime?Vn(r.document.createTime):ie.min(),l=new Pt({mapValue:{fields:r.document.fields}}),u=_t.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new oc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ud(t,r.document),i=r.readTime?Vn(r.readTime):ie.min(),o=_t.newNoDocument(s,i),l=r.removedTargetIds||[];n=new oc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ud(t,r.document),i=r.removedTargetIds||[];n=new oc([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new eR(s,i),l=r.targetId;n=new sT(l,o)}}return n}function dR(t,e){let n;if(e instanceof Ka)n={update:pv(t,e.key,e.value)};else if(e instanceof Lm)n={delete:cf(t,e.key)};else if(e instanceof cs)n={update:pv(t,e.key,e.data),updateMask:wR(e.fieldMask)};else{if(!(e instanceof XP))return ne(16599,{ft:e.type});n={verify:cf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Hc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Oa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ma)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Kc)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:lR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function hR(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Vn(s.updateTime):Vn(i);return o.isEqual(ie.min())&&(o=Vn(i)),new KP(o,s.transformResults||[])}(n,e))):[]}function fR(t,e){return{documents:[lT(t,e.path)]}}function mR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lT(t,s);const i=function(d){if(d.length!==0)return dT(yn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ci(g.field),direction:yR(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=af(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:s}}function pR(t){let e=cR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=uT(p);return g instanceof yn&&UE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(k){return new ba(ui(k.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,ku(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,N=p.values||[];return new Gc(N,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,N=p.values||[];return new Gc(N,g)}(n.endAt)),OP(e,s,o,i,l,"F",u,d)}function gR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ui(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ui(n.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ui(n.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ui(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return We.create(ui(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yn.create(n.compositeFilter.filters.map(r=>uT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function yR(t){return sR[t]}function vR(t){return iR[t]}function _R(t){return oR[t]}function ci(t){return{fieldPath:t.canonicalString()}}function ui(t){return it.fromServerFormat(t.fieldPath)}function dT(t){return t instanceof We?function(n){if(n.op==="=="){if(nv(n.value))return{unaryFilter:{field:ci(n.field),op:"IS_NAN"}};if(tv(n.value))return{unaryFilter:{field:ci(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nv(n.value))return{unaryFilter:{field:ci(n.field),op:"IS_NOT_NAN"}};if(tv(n.value))return{unaryFilter:{field:ci(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ci(n.field),op:vR(n.op),value:n.value}}}(t):t instanceof yn?function(n){const r=n.getFilters().map(s=>dT(s));return r.length===1?r[0]:{compositeFilter:{op:_R(n.op),filters:r}}}(t):ne(54877,{filter:t})}function wR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,s,i=ie.min(),o=ie.min(),l=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.wt=e}}function TR(t){const e=pR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?of(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.Cn=new SR}addToCollectionParentIndex(e,n){return this.Cn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Xr.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Xr.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class SR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Qe(ke.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qe(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fT=41943040;class At{static withCacheSize(e){return new At(e,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */At.DEFAULT_COLLECTION_PERCENTILE=10,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,At.DEFAULT=new At(fT,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),At.DISABLED=new At(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Hi(0)}static lr(){return new Hi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="LruGarbageCollector",xR=1048576;function vv([t,e],[n,r]){const s=le(t,n);return s===0?le(e,r):s}class NR{constructor(e){this.Er=e,this.buffer=new Qe(vv),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){K(yv,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lo(n)?K(yv,"Ignoring IndexedDB error during garbage collection: ",n):await ao(n)}await this.mr(3e5)})}}class AR{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(Nu.le);const r=new NR(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(gv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gv):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,l,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ai()<=de.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function CR(t,e){return new AR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.changes=new qs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&aa(r.mutation,s,Ut.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=Ns();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Wo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ns();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=ar();const o=oa(),l=function(){return oa()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof cs)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),aa(f.mutation,d,f.mutation.getFieldMask(),Ke.now())):o.set(d.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new RR(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=oa();let s=new Oe((o,l)=>o-l),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Ut.empty();f=l.applyToLocalView(d,f),r.set(u,f);const p=(s.get(l.batchId)||he()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,p=QE();f.forEach(g=>{if(!i.has(g)){const N=tT(n.get(g),r.get(g));N!==null&&p.set(g,N),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(Ns());let l=Pa,u=i;return o.next(d=>z.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?z.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,he())).next(f=>({batchId:l,changes:KE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Wo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Wo();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,u=>{const d=function(p,g){return new co(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,_t.newInvalidDocument(f)))});let l=Wo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&aa(f.mutation,d,Ut.empty(),Ke.now()),Pu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return z.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Vn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:TR(s.bundledQuery),readTime:Vn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.overlays=new Oe(J.comparator),this.Qr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ns();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=Ns(),i=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Ns(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Ns(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return z.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZP(n,r));let i=this.Qr.get(n);i===void 0&&(i=he(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.$r=new Qe(Ye.Ur),this.Kr=new Qe(Ye.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Ye(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new J(new ke([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new J(new ke([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=he();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return J.comparator(e.key,n.key)||le(e.Zr,n.Zr)}static Wr(e,n){return le(e.Zr,n.Zr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Qe(Ye.Ur)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JP(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Xr=this.Xr.add(new Ye(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?Pm:this.nr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const l=this.ei(o.Zr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(le);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{r=r.add(l.Zr)})}),z.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new J(i),0);let l=new Qe(le);return this.Xr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Zr)),!0)},o),z.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return z.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Ye(n,0),s=this.Xr.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.ii=e,this.docs=function(){return new Oe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let r=ar();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():_t.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ar();const o=n.path,l=new J(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||fP(hP(f),r)<=0||(s.has(f.key)||Pu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}si(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VR(this)}getSize(e){return z.resolve(this.size)}}class VR extends PR{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.persistence=e,this.oi=new qs(n=>Dm(n),bm),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this._i=0,this.ai=new zm,this.targetCount=0,this.ui=Hi.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),z.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Hi(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Tr(n),z.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n){this.ci={},this.overlays={},this.li=new Nu(0),this.hi=!1,this.hi=!0,this.Pi=new OR,this.referenceDelegate=e(this),this.Ti=new FR(this),this.indexManager=new IR,this.remoteDocumentCache=function(s){return new LR(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new ER(n),this.Ei=new DR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new MR(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new UR(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return z.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class UR extends pP{constructor(e){super(),this.currentSequenceNumber=e}}class Bm{constructor(e){this.persistence=e,this.Vi=new zm,this.mi=null}static fi(e){return new Bm(e)}get gi(){if(this.mi)return this.mi;throw ne(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.gi,r=>{const s=J.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,ie.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return z.or([()=>z.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Yc{constructor(e,n){this.persistence=e,this.yi=new qs(r=>vP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=CR(this,n)}static fi(e,n){return new Yc(e,n)}di(){}Ai(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return z.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?z.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ie.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),z.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rc(e.data.value)),n}Dr(e,n,r){return z.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new $m(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return kN()?8:gP(Et())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new zR;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,n,o,l.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(ai()<=de.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",li(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),z.resolve()):(ai()<=de.DEBUG&&K("QueryEngine","Query:",li(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(ai()<=de.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",li(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):z.resolve())}ws(e,n){if(ov(n))return z.resolve(null);let r=Ln(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=of(n,null,"F"),r=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=he(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.vs(n,l);return this.Cs(n,d,o,u.readTime)?this.ws(e,of(n,null,"F")):this.Fs(e,d,n,u)}))})))}bs(e,n,r,s){return ov(n)||s.isEqual(ie.min())?z.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?z.resolve(null):(ai()<=de.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),li(n)),this.Fs(e,o,n,dP(s,Pa)).next(l=>l))})}vs(e,n){let r=new Qe(GE(e));return n.forEach((s,i)=>{Pu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ai()<=de.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",li(n)),this.ys.getDocumentsMatchingQuery(e,n,Xr.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="LocalStore",$R=3e8;class WR{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Oe(le),this.Os=new qs(i=>Dm(i),bm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jR(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function qR(t,e,n,r){return new WR(t,e,n,r)}async function pT(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=he();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:l}))})})}function GR(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const p=d.batch,g=p.keys();let N=z.resolve();return g.forEach(k=>{N=N.next(()=>f.getEntry(u,k)).next(R=>{const P=d.docVersions.get(k);ye(P!==null,48541),R.version.compareTo(P)<0&&(p.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),f.addEntry(R)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=he();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function gT(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function HR(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ti.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(i,f.addedDocuments,p)));let N=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?N=N.withResumeToken(lt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):f.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(f.resumeToken,r)),s=s.insert(p,N),function(R,P,x){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=$R?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,N,f)&&l.push(n.Ti.updateTargetData(i,N))});let u=ar(),d=he();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(KR(i,o,e.documentUpdates).next(f=>{u=f.qs,d=f.Qs})),!r.isEqual(ie.min())){const f=n.Ti.getLastRemoteSnapshotVersion(i).next(p=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return z.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.xs=s,i))}function KR(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ar();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):K(Wm,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{qs:o,Qs:s}})}function QR(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Pm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YR(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function df(t,e,n){const r=oe(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!lo(o))throw o;K(Wm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function _v(t,e,n){const r=oe(t);let s=ie.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=oe(u),g=p.Os.get(f);return g!==void 0?z.resolve(p.xs.get(g)):p.Ti.getTargetData(d,f)}(r,o,Ln(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:ie.min(),n?i:he())).next(l=>(XR(r,LP(e),l),{documents:l,$s:i})))}function XR(t,e,n){let r=t.Ns.get(e)||ie.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class wv{constructor(){this.activeTargetIds=$P()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JR{constructor(){this.xo=new wv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new wv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="ConnectivityMonitor";class Tv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){K(Ev,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){K(Ev,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll=null;function hf(){return Ll===null?Ll=function(){return 268435456+Math.round(2147483648*Math.random())}():Ll++,"0x"+Ll.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="RestConnection",ej={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tj{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Wc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=hf(),l=this.jo(e,n.toUriEncodedString());K(zd,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,s,i);const{host:d}=new URL(l),f=ro(d);return this.Jo(e,l,u,r,f).then(p=>(K(zd,`Received RPC '${e}' ${o}: `,p),p),p=>{throw $i(zd,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=ej[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class rj extends tj{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=hf();return new Promise((l,u)=>{const d=new _E;d.setWithCredentials(!0),d.listenOnce(wE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case nc.NO_ERROR:const p=d.getResponseJson();K(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case nc.TIMEOUT:K(pt,`RPC '${e}' ${o} timed out`),u(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:const g=d.getStatus();if(K(pt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let N=d.getResponseJson();Array.isArray(N)&&(N=N[0]);const k=N==null?void 0:N.error;if(k&&k.status&&k.message){const R=function(x){const E=x.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(E)>=0?E:F.UNKNOWN}(k.status);u(new Q(R,k.message))}else u(new Q(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Q(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{K(pt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);K(pt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}I_(e,n,r){const s=hf(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=IE(),l=TE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");K(pt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);this.E_(p);let g=!1,N=!1;const k=new nj({Zo:P=>{N?K(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(K(pt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),K(pt,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Xo:()=>p.close()}),R=(P,x,E)=>{P.listen(x,S=>{try{E(S)}catch(D){setTimeout(()=>{throw D},0)}})};return R(p,$o.EventType.OPEN,()=>{N||(K(pt,`RPC '${e}' stream ${s} transport opened.`),k.__())}),R(p,$o.EventType.CLOSE,()=>{N||(N=!0,K(pt,`RPC '${e}' stream ${s} transport closed`),k.u_(),this.d_(p))}),R(p,$o.EventType.ERROR,P=>{N||(N=!0,$i(pt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),k.u_(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),R(p,$o.EventType.MESSAGE,P=>{var x;if(!N){const E=P.data[0];ye(!!E,16349);const S=E,D=(S==null?void 0:S.error)||((x=S[0])===null||x===void 0?void 0:x.error);if(D){K(pt,`RPC '${e}' stream ${s} received error:`,D);const V=D.status;let O=function(w){const T=Be[w];if(T!==void 0)return rT(T)}(V),v=D.message;O===void 0&&(O=F.INTERNAL,v="Unknown error status: "+V+" with message "+D.message),N=!0,k.u_(new Q(O,v)),p.close()}else K(pt,`RPC '${e}' stream ${s} received:`,E),k.c_(E)}}),R(l,EE.STAT_EVENT,P=>{P.stat===Jh.PROXY?K(pt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Jh.NOPROXY&&K(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.a_()},0),k}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){return new aR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="PersistentStream";class vT{constructor(e,n,r,s,i,o,l,u){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new yT(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return K(Iv,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(K(Iv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sj extends vT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=uR(this.serializer,e),r=function(i){if(!("targetChange"in i))return ie.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?Vn(o.readTime):ie.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=uf(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=rf(u)?{documents:fR(i,u)}:{query:mR(i,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=oT(i,o.resumeToken);const d=af(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ie.min())>0){l.readTime=Qc(i,o.snapshotVersion.toTimestamp());const d=af(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=gR(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=uf(this.serializer),n.removeTarget=e,this.Q_(n)}}class ij extends vT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=hR(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=uf(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dR(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{}class aj extends oj{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,lf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(F.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,lf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class lj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(or(n),this.ua=!1):K("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="RemoteStore";class cj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{r.enqueueAndForget(async()=>{Gs(this)&&(K(Us,"Restarting streams for network reachability change."),await async function(u){const d=oe(u);d.da.add(4),await Ya(d),d.Va.set("Unknown"),d.da.delete(4),await Ou(d)}(this))})}),this.Va=new lj(r,s)}}async function Ou(t){if(Gs(t))for(const e of t.Aa)await e(!0)}async function Ya(t){for(const e of t.Aa)await e(!1)}function _T(t,e){const n=oe(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Km(n)?Hm(n):uo(n).N_()&&Gm(n,e))}function qm(t,e){const n=oe(t),r=uo(n);n.Ea.delete(e),r.N_()&&wT(n,e),n.Ea.size===0&&(r.N_()?r.k_():Gs(n)&&n.Va.set("Unknown"))}function Gm(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uo(t).Z_(e)}function wT(t,e){t.ma.Ke(e),uo(t).X_(e)}function Hm(t){t.ma=new rR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),uo(t).start(),t.Va.ca()}function Km(t){return Gs(t)&&!uo(t).O_()&&t.Ea.size>0}function Gs(t){return oe(t).da.size===0}function ET(t){t.ma=void 0}async function uj(t){t.Va.set("Online")}async function dj(t){t.Ea.forEach((e,n)=>{Gm(t,e)})}async function hj(t,e){ET(t),Km(t)?(t.Va.Pa(e),Hm(t)):t.Va.set("Unknown")}async function fj(t,e,n){if(t.Va.set("Online"),e instanceof iT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ea.delete(l),s.ma.removeTarget(l))}(t,e)}catch(r){K(Us,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xc(t,r)}else if(e instanceof oc?t.ma.Xe(e):e instanceof sT?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ie.min()))try{const r=await gT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.ma.It(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ea.get(d);f&&i.Ea.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.Ea.get(u);if(!f)return;i.Ea.set(u,f.withResumeToken(lt.EMPTY_BYTE_STRING,f.snapshotVersion)),wT(i,u);const p=new br(f.target,u,d,f.sequenceNumber);Gm(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K(Us,"Failed to raise snapshot:",r),await Xc(t,r)}}async function Xc(t,e,n){if(!lo(e))throw e;t.da.add(1),await Ya(t),t.Va.set("Offline"),n||(n=()=>gT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(Us,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Ou(t)})}function TT(t,e){return e().catch(n=>Xc(t,n,e))}async function Mu(t){const e=oe(t),n=ts(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Pm;for(;mj(e);)try{const s=await QR(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,pj(e,s)}catch(s){await Xc(e,s)}IT(e)&&ST(e)}function mj(t){return Gs(t)&&t.Ia.length<10}function pj(t,e){t.Ia.push(e);const n=ts(t);n.N_()&&n.ea&&n.ta(e.mutations)}function IT(t){return Gs(t)&&!ts(t).O_()&&t.Ia.length>0}function ST(t){ts(t).start()}async function gj(t){ts(t).ia()}async function yj(t){const e=ts(t);for(const n of t.Ia)e.ta(n.mutations)}async function vj(t,e,n){const r=t.Ia.shift(),s=Vm.from(r,e,n);await TT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Mu(t)}async function _j(t,e){e&&ts(t).ea&&await async function(r,s){if(function(o){return tR(o)&&o!==F.ABORTED}(s.code)){const i=r.Ia.shift();ts(r).L_(),await TT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Mu(r)}}(t,e),IT(t)&&ST(t)}async function Sv(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),K(Us,"RemoteStore received new credentials");const r=Gs(n);n.da.add(3),await Ya(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Ou(n)}async function wj(t,e){const n=oe(t);e?(n.da.delete(2),await Ou(n)):e||(n.da.add(2),await Ya(n),n.Va.set("Unknown"))}function uo(t){return t.fa||(t.fa=function(n,r,s){const i=oe(n);return i.oa(),new sj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:uj.bind(null,t),n_:dj.bind(null,t),i_:hj.bind(null,t),Y_:fj.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),Km(t)?Hm(t):t.Va.set("Unknown")):(await t.fa.stop(),ET(t))})),t.fa}function ts(t){return t.ga||(t.ga=function(n,r,s){const i=oe(n);return i.oa(),new ij(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:gj.bind(null,t),i_:_j.bind(null,t),na:yj.bind(null,t),ra:vj.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Mu(t)):(await t.ga.stop(),t.Ia.length>0&&(K(Us,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Qm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ym(t,e){if(or("AsyncQueue",`${e}: ${t}`),lo(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{static emptySet(e){return new Di(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Wo(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Di)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Di;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.pa=new Oe(J.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ki{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ki(e,n,Di.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class Tj{constructor(){this.queries=Nv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=Nv(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function Nv(){return new qs(t=>qE(t),Cu)}async function xT(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new Ej,r=e.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Ym(o,`Initialization of query '${li(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&Xm(n)}async function NT(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ij(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Ma(s)&&(r=!0);o.ba=s}}r&&Xm(n)}function Sj(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Xm(t){t.Ca.forEach(e=>{e.next()})}var ff,kv;(kv=ff||(ff={})).xa="default",kv.Cache="cache";class kT{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.key=e}}class CT{constructor(e){this.key=e}}class xj{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=he(),this.mutatedKeys=he(),this.Za=GE(e),this.Xa=new Di(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new xv,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),N=Pu(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),R=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let P=!1;g&&N?g.data.isEqual(N.data)?k!==R&&(r.track({type:3,doc:N}),P=!0):this.ru(g,N)||(r.track({type:2,doc:N}),P=!0,(u&&this.Za(N,u)>0||d&&this.Za(N,d)<0)&&(l=!0)):!g&&N?(r.track({type:0,doc:N}),P=!0):g&&!N&&(r.track({type:1,doc:g}),P=!0,(u||d)&&(l=!0)),P&&(N?(o=o.add(N),i=R?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Xa:o,nu:r,Cs:l,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((f,p)=>function(N,k){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:P})}};return R(N)-R(k)}(f.type,p.type)||this.Za(f.doc,p.doc)),this.iu(r),s=s!=null&&s;const l=n&&!s?this.su():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Ja;return this.Ja=u,o.length!==0||d?{snapshot:new Ki(this.query,e.Xa,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new xv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=he(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new CT(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new AT(r))}),n}au(e){this.Ha=e.$s,this.Ya=he();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Ki.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Jm="SyncEngine";class Nj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class kj{constructor(e){this.key=e,this.cu=!1}}class Aj{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new qs(l=>qE(l),Cu),this.Pu=new Map,this.Tu=new Set,this.Iu=new Oe(J.comparator),this.Eu=new Map,this.du=new zm,this.Au={},this.Ru=new Map,this.Vu=Hi.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Cj(t,e,n=!0){const r=OT(t);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await PT(r,e,n,!0),s}async function Pj(t,e){const n=OT(t);await PT(n,e,!0,!1)}async function PT(t,e,n,r){const s=await YR(t.localStore,Ln(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Rj(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&_T(t.remoteStore,s),l}async function Rj(t,e,n,r,s){t.fu=(p,g,N)=>async function(R,P,x,E){let S=P.view.tu(x);S.Cs&&(S=await _v(R.localStore,P.query,!1).then(({documents:v})=>P.view.tu(v,S)));const D=E&&E.targetChanges.get(P.targetId),V=E&&E.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(S,R.isPrimaryClient,D,V);return Cv(R,P.targetId,O.ou),O.snapshot}(t,p,g,N);const i=await _v(t.localStore,e,!0),o=new xj(e,i.$s),l=o.tu(i.documents),u=Qa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Cv(t,n,d.ou);const f=new Nj(e,n,o);return t.hu.set(e,f),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function jj(t,e,n){const r=oe(t),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(o=>!Cu(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await df(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&qm(r.remoteStore,s.targetId),mf(r,s.targetId)}).catch(ao)):(mf(r,s.targetId),await df(r.localStore,s.targetId,!0))}async function Dj(t,e){const n=oe(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qm(n.remoteStore,r.targetId))}async function bj(t,e,n){const r=zj(t);try{const s=await function(o,l){const u=oe(o),d=Ke.now(),f=l.reduce((N,k)=>N.add(k.key),he());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",N=>{let k=ar(),R=he();return u.Bs.getEntries(N,f).next(P=>{k=P,k.forEach((x,E)=>{E.isValidDocument()||(R=R.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(N,k)).next(P=>{p=P;const x=[];for(const E of l){const S=YP(E,p.get(E.key).overlayedDocument);S!=null&&x.push(new cs(E.key,S,LE(S.value.mapValue),Jt.exists(!0)))}return u.mutationQueue.addMutationBatch(N,d,x,l)}).next(P=>{g=P;const x=P.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(N,P.batchId,x)})}).then(()=>({batchId:g.batchId,changes:KE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Au[o.currentUser.toKey()];d||(d=new Oe(le)),d=d.insert(l,u),o.Au[o.currentUser.toKey()]=d}(r,s.batchId,n),await Xa(r,s.changes),await Mu(r.remoteStore)}catch(s){const i=Ym(s,"Failed to persist write");n.reject(i)}}async function RT(t,e){const n=oe(t);try{const r=await HR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?ye(o.cu,14607):s.removedDocuments.size>0&&(ye(o.cu,42227),o.cu=!1))}),await Xa(n,r,e)}catch(r){await ao(r)}}function Av(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,o)=>{const l=o.view.Fa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=oe(o);u.onlineState=l;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.Sa)g.Fa(l)&&(d=!0)}),d&&Xm(u)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Oj(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Oe(J.comparator);o=o.insert(i,_t.newNoDocument(i,ie.min()));const l=he().add(i),u=new Du(ie.min(),new Map,new Oe(le),o,l);await RT(r,u),r.Iu=r.Iu.remove(i),r.Eu.delete(e),Zm(r)}else await df(r.localStore,e,!1).then(()=>mf(r,e,n)).catch(ao)}async function Mj(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await GR(n.localStore,e);DT(n,r,null),jT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xa(n,s)}catch(s){await ao(s)}}async function Lj(t,e,n){const r=oe(t);try{const s=await function(o,l){const u=oe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(ye(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);DT(r,e,n),jT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xa(r,s)}catch(s){await ao(s)}}function jT(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function DT(t,e,n){const r=oe(t);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function mf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||bT(t,r)})}function bT(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(qm(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Zm(t))}function Cv(t,e,n){for(const r of n)r instanceof AT?(t.du.addReference(r.key,e),Vj(t,r)):r instanceof CT?(K(Jm,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||bT(t,r.key)):ne(19791,{pu:r})}function Vj(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(K(Jm,"New document in limbo: "+n),t.Tu.add(r),Zm(t))}function Zm(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new J(ke.fromString(e)),r=t.Vu.next();t.Eu.set(r,new kj(n)),t.Iu=t.Iu.insert(n,r),_T(t.remoteStore,new br(Ln(Om(n.path)),r,"TargetPurposeLimboResolution",Nu.le))}}async function Xa(t,e,n){const r=oe(t),s=[],i=[],o=[];r.hu.isEmpty()||(r.hu.forEach((l,u)=>{o.push(r.fu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=$m.Rs(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.lu.Y_(s),await async function(u,d){const f=oe(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>z.forEach(d,g=>z.forEach(g.ds,N=>f.persistence.referenceDelegate.addReference(p,g.targetId,N)).next(()=>z.forEach(g.As,N=>f.persistence.referenceDelegate.removeReference(p,g.targetId,N)))))}catch(p){if(!lo(p))throw p;K(Wm,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const N=f.xs.get(g),k=N.snapshotVersion,R=N.withLastLimboFreeSnapshotVersion(k);f.xs=f.xs.insert(g,R)}}}(r.localStore,i))}async function Fj(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){K(Jm,"User change. New user:",e.toKey());const r=await pT(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(l=>{l.forEach(u=>{u.reject(new Q(F.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xa(n,r.ks)}}function Uj(t,e){const n=oe(t),r=n.Eu.get(e);if(r&&r.cu)return he().add(r.key);{let s=he();const i=n.Pu.get(e);if(!i)return s;for(const o of i){const l=n.hu.get(o);s=s.unionWith(l.view.eu)}return s}}function OT(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Oj.bind(null,e),e.lu.Y_=Ij.bind(null,e.eventManager),e.lu.gu=Sj.bind(null,e.eventManager),e}function zj(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Mj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lj.bind(null,e),e}class Jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return qR(this.persistence,new BR,e.initialUser,this.serializer)}Su(e){return new mT(Bm.fi,this.serializer)}bu(e){return new JR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jc.provider={build:()=>new Jc};class Bj extends Jc{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ye(this.persistence.referenceDelegate instanceof Yc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kR(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?At.withCacheSize(this.cacheSizeBytes):At.DEFAULT;return new mT(r=>Yc.fi(r,n),this.serializer)}}class pf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Av(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fj.bind(null,this.syncEngine),await wj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Tj}()}createDatastore(e){const n=bu(e.databaseInfo.databaseId),r=function(i){return new rj(i)}(e.databaseInfo);return function(i,o,l,u){return new aj(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new cj(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Av(this.syncEngine,n,0),function(){return Tv.C()?new Tv:new ZR}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const p=new Aj(s,i,o,l,u,d);return f&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);K(Us,"RemoteStore shutting down."),i.da.add(5),await Ya(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}pf.provider={build:()=>new pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="FirestoreClient";class $j{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=kE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(ns,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(ns,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ym(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $d(t,e){t.asyncQueue.verifyOperationInProgress(),K(ns,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Pv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Wj(t);K(ns,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Sv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Sv(e.remoteStore,s)),t._onlineComponents=e}async function Wj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(ns,"Using user provided OfflineComponentProvider");try{await $d(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;$i("Error using user provided cache. Falling back to memory cache: "+n),await $d(t,new Jc)}}else K(ns,"Using default OfflineComponentProvider"),await $d(t,new Bj(void 0));return t._offlineComponents}async function LT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(ns,"Using user provided OnlineComponentProvider"),await Pv(t,t._uninitializedComponentsProvider._online)):(K(ns,"Using default OnlineComponentProvider"),await Pv(t,new pf))),t._onlineComponents}function qj(t){return LT(t).then(e=>e.syncEngine)}async function VT(t){const e=await LT(t),n=e.eventManager;return n.onListen=Cj.bind(null,e.syncEngine),n.onUnlisten=jj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Pj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Dj.bind(null,e.syncEngine),n}function Gj(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new MT({next:g=>{f.xu(),o.enqueueAndForget(()=>NT(i,p));const N=g.docs.has(l);!N&&g.fromCache?d.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&g.fromCache&&u&&u.source==="server"?d.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new kT(Om(l.path),f,{includeMetadataChanges:!0,Qa:!0});return xT(i,p)}(await VT(t),t.asyncQueue,e,n,r)),r.promise}function Hj(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new MT({next:g=>{f.xu(),o.enqueueAndForget(()=>NT(i,p)),g.fromCache&&u.source==="server"?d.reject(new Q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new kT(l,f,{includeMetadataChanges:!0,Qa:!0});return xT(i,p)}(await VT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Kj(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jv(t){if(!J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dv(t){if(J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lu(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="firestore.googleapis.com",bv=!0;class Ov{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zT,this.ssl=bv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:bv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xR)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ov({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ov(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nP;switch(r.type){case"firstParty":return new oP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Rv.get(n);r&&(K("ComponentProvider","Removing Datastore"),Rv.delete(n),r.terminate())}(this),Promise.resolve()}}function Qj(t,e,n,r={}){var s;t=vn(t,Vu);const i=ro(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(N0(`https://${u}`),k0("Firestore",!0)),o.host!==zT&&o.host!==u&&$i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!Os(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=gt.MOCK_USER;else{f=vN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new gt(g)}t._authCredentials=new rP(new xE(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hs(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class Hr extends Hs{constructor(e,n,r){super(e,n,Om(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new J(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function Vt(t,e,...n){if(t=Ze(t),UT("collection","path",e),t instanceof Vu){const r=ke.fromString(e,...n);return Dv(r),new Hr(t,null,r)}{if(!(t instanceof xt||t instanceof Hr))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return Dv(r),new Hr(t.firestore,null,r)}}function It(t,e,...n){if(t=Ze(t),arguments.length===1&&(e=kE.newId()),UT("doc","path",e),t instanceof Vu){const r=ke.fromString(e,...n);return jv(r),new xt(t,null,new J(r))}{if(!(t instanceof xt||t instanceof Hr))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return jv(r),new xt(t.firestore,t instanceof Hr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="AsyncQueue";class Lv{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new yT(this,"async_queue_retry"),this.rc=()=>{const r=Bd();r&&K(Mv,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Bd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Bd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Zn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!lo(e))throw e;K(Mv,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,or("INTERNAL UNHANDLED ERROR: ",Vv(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=Qm.createAndSchedule(this,e,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&ne(47125,{cc:Vv(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Vv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ks extends Vu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Lv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lv(e),this._firestoreClient=void 0,await e}}}function Yj(t,e){const n=typeof t=="object"?t:R0(),r=typeof t=="string"?t:Wc,s=_m(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=gN("firestore");i&&Qj(s,...i)}return s}function ep(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Xj(t),t._firestoreClient}function Xj(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new EP(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,FT(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new $j(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qi(lt.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qi(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=/^__.*__$/;class Zj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ka(e,this.data,n,this.fieldTransforms)}}class BT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $T(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ic:t})}}class sp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Zc(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if($T(this.Ic)&&Jj.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class eD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bu(e)}bc(e,n,r,s=!1){return new sp({Ic:e,methodName:n,wc:r,path:it.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uu(t){const e=t._freezeSettings(),n=bu(t._databaseId);return new eD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WT(t,e,n,r,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,s);ip("Data must be an object, but it was:",o,r);const l=qT(r,o);let u,d;if(i.merge)u=new Ut(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=gf(e,p,n);if(!o.contains(g))throw new Q(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);HT(f,g)||f.push(g)}u=new Ut(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new Zj(new Pt(l),u,d)}class zu extends tp{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zu}}function tD(t,e,n,r){const s=t.bc(1,e,n);ip("Data must be an object, but it was:",s,r);const i=[],o=Pt.empty();ls(r,(u,d)=>{const f=op(e,u,n);d=Ze(d);const p=s.mc(f);if(d instanceof zu)i.push(f);else{const g=Ja(d,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new Ut(i);return new BT(o,l,s.fieldTransforms)}function nD(t,e,n,r,s,i){const o=t.bc(1,e,n),l=[gf(e,r,n)],u=[s];if(i.length%2!=0)throw new Q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(gf(e,i[g])),u.push(i[g+1]);const d=[],f=Pt.empty();for(let g=l.length-1;g>=0;--g)if(!HT(d,l[g])){const N=l[g];let k=u[g];k=Ze(k);const R=o.mc(N);if(k instanceof zu)d.push(N);else{const P=Ja(k,R);P!=null&&(d.push(N),f.set(N,P))}}const p=new Ut(d);return new BT(f,p,o.fieldTransforms)}function rD(t,e,n,r=!1){return Ja(n,t.bc(r?4:3,e))}function Ja(t,e){if(GT(t=Ze(t)))return ip("Unsupported field value:",e,t),qT(t,e);if(t instanceof tp)return function(r,s){if(!$T(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Ja(l,s.fc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:Qc(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qc(s.serializer,i)}}if(r instanceof np)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qi)return{bytesValue:oT(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Um(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof rp)return function(o,l){return{mapValue:{fields:{[OE]:{stringValue:ME},[qc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.gc("VectorValues must only contain numeric values.");return Mm(l.serializer,d)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${Lu(r)}`)}(t,e)}function qT(t,e){const n={};return CE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ls(t,(r,s)=>{const i=Ja(s,e.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function GT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof np||t instanceof Qi||t instanceof xt||t instanceof tp||t instanceof rp)}function ip(t,e,n){if(!GT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Lu(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function gf(t,e,n){if((e=Ze(e))instanceof Fu)return e._internalPath;if(typeof e=="string")return op(t,e);throw Zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const sD=new RegExp("[~\\*/\\[\\]]");function op(t,e,n){if(e.search(sD)>=0)throw Zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fu(...e.split("."))._internalPath}catch{throw Zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Q(F.INVALID_ARGUMENT,l+t+u)}function HT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iD extends KT{data(){return super.data()}}function Bu(t,e){return typeof e=="string"?op(t,e):e instanceof Fu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ap{}class QT extends ap{}function Cn(t,e,...n){let r=[];e instanceof ap&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof lp).length,l=i.filter(u=>u instanceof $u).length;if(o>1||o>0&&l>0)throw new Q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class $u extends QT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new $u(e,n,r)}_apply(e){const n=this._parse(e);return YT(e._query,n),new Hs(e.firestore,e.converter,sf(e._query,n))}_parse(e){const n=Uu(e.firestore);return function(i,o,l,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Uv(p,f);const k=[];for(const R of p)k.push(Fv(u,i,R));g={arrayValue:{values:k}}}else g=Fv(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Uv(p,f),g=rD(l,o,p,f==="in"||f==="not-in");return We.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yt(t,e,n){const r=e,s=Bu("where",t);return $u._create(s,r,n)}class lp extends ap{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new lp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)YT(o,u),o=sf(o,u)}(e._query,n),new Hs(e.firestore,e.converter,sf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cp extends QT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ba(i,o)}(e._query,this._field,this._direction);return new Hs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new co(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Pn(t,e="asc"){const n=e,r=Bu("orderBy",t);return cp._create(r,n)}function Fv(t,e,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new Q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WE(e)&&n.indexOf("/")!==-1)throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ke.fromString(n));if(!J.isDocumentKey(r))throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ev(t,new J(r))}if(n instanceof xt)return ev(t,n._key);throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lu(n)}.`)}function Uv(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YT(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aD{convertValue(e,n="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ls(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[qc].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new rp(i)}convertGeoPoint(e){return new np(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Au(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ra(e));default:return null}}convertTimestamp(e){const n=Jr(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ke.fromString(e);ye(hT(r),9688,{name:e});const s=new ja(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||or(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class JT extends KT{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Bu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ac extends JT{data(e={}){return super.data(e)}}class lD{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Go(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ac(this._firestore,this._userDataWriter,r.key,r,new Go(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new ac(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Go(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ac(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Go(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:cD(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){t=vn(t,xt);const e=vn(t.firestore,Ks);return Gj(ep(e),t._key).then(n=>uD(e,t,n))}class eI extends aD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Rn(t){t=vn(t,Hs);const e=vn(t.firestore,Ks),n=ep(e),r=new eI(e);return oD(t._query),Hj(n,t._query).then(s=>new lD(e,r,t,s))}function yf(t,e,n){t=vn(t,xt);const r=vn(t.firestore,Ks),s=XT(t.converter,e,n);return Wu(r,[WT(Uu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Jt.none())])}function bi(t,e,n,...r){t=vn(t,xt);const s=vn(t.firestore,Ks),i=Uu(s);let o;return o=typeof(e=Ze(e))=="string"||e instanceof Fu?nD(i,"updateDoc",t._key,e,n,r):tD(i,"updateDoc",t._key,e),Wu(s,[o.toMutation(t._key,Jt.exists(!0))])}function up(t){return Wu(vn(t.firestore,Ks),[new Lm(t._key,Jt.none())])}function dp(t,e){const n=vn(t.firestore,Ks),r=It(t),s=XT(t.converter,e);return Wu(n,[WT(Uu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Jt.exists(!1))]).then(()=>r)}function Wu(t,e){return function(r,s){const i=new Zn;return r.asyncQueue.enqueueAndForget(async()=>bj(await qj(r),s,i)),i.promise}(ep(t),e)}function uD(t,e,n){const r=n.docs.get(e._key),s=new eI(t);return new JT(t,s,e._key,r,new Go(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){oo=s})(so),Ms(new Yr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ks(new sP(r.getProvider("auth-internal")),new aP(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ja(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),bn(By,$y,e),bn(By,$y,"esm2017")})();var dD="firebase",hD="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn(dD,hD,"app");const fD={apiKey:"AIzaSyBn2jG-T2SesKFr0TsfeQa04wlBmDeEoG4",authDomain:"clarity-311c3.firebaseapp.com",projectId:"clarity-311c3",storageBucket:"clarity-311c3.firebasestorage.app",messagingSenderId:"459484415688",appId:"1:459484415688:web:bac719ee243bbd9821c7fd"},tI=P0(fD),we=Yj(tI),ks=yE(tI),nI=j.createContext(),tn=()=>{const t=j.useContext(nI);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},rI=({children:t})=>{const[e,n]=j.useState(null),[r,s]=j.useState(null),[i,o]=j.useState("free"),[l,u]=j.useState(!0),[d,f]=j.useState(!1);j.useEffect(()=>WA(ks,async D=>{console.log("🔥 Auth state changed:",D?"User logged in":"User logged out"),n(D),f(!!D),D?await g(D.uid):(s(null),o("free")),u(!1)}),[]);const p=(S,D)=>{if(!S||!D)return{isTrialActive:!1,daysRemaining:0};const V=D.seconds?new Date(D.seconds*1e3):new Date(D),O=new Date,v=O<V,y=Math.ceil((V-O)/(24*60*60*1e3));return{isTrialActive:v,daysRemaining:Math.max(0,y),trialEndDate:V}},g=async S=>{try{const D=await ZT(It(we,"users",S));if(D.exists()){const V=D.data(),O=p(V.trialStartDate,V.trialEndDate);console.log("🔍 Profile Data:",V),console.log("📅 Trial Status:",O),V.subscription==="trial"&&!O.isTrialActive&&(await bi(It(we,"users",S),{subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date}),V.subscription="free",V.subscriptionStatus="trial_expired"),s({...V,...O}),o(V.subscription)}}catch(D){console.error("Error fetching user profile:",D)}},N=async(S,D,V={})=>{try{const{user:O}=await sE(ks,S,D),v={email:O.email,uid:O.uid,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date,firstName:V.firstName||"",lastName:V.lastName||"",goals:{workout:V.workoutGoal||30,water:V.waterGoal||64,meditation:V.meditationGoal||15}};return await yf(It(we,"users",O.uid),v),s(v),o("trial"),{success:!0,user:O}}catch(O){throw console.error("Signup error:",O),O}},k=async(S,D)=>{try{const{user:V}=await iE(ks,S,D);return console.log("✅ Login successful, Firebase will trigger auth state change"),{success:!0,user:V}}catch(V){throw console.error("Login error:",V),V}},R=async()=>{try{return await oE(ks),n(null),s(null),o("free"),f(!1),{success:!0}}catch(S){throw console.error("Logout error:",S),S}},P=async()=>{try{if(e!=null&&e.uid)return await bi(It(we,"users",e.uid),{subscription:"premium",subscriptionStatus:"premium_paid",premiumStartDate:new Date,updatedAt:new Date}),o("premium"),s(S=>({...S,subscription:"premium",subscriptionStatus:"premium_paid"})),{success:!0}}catch(S){throw console.error("Error upgrading to premium:",S),S}},x=async()=>{try{if(e!=null&&e.uid)return await bi(It(we,"users",e.uid),{subscription:"free",subscriptionCancelledAt:new Date,updatedAt:new Date}),o("free"),s(S=>({...S,subscription:"free",subscriptionCancelledAt:new Date})),{success:!0}}catch(S){throw console.error("Error cancelling subscription:",S),S}},E={user:e,userProfile:r,userSubscription:i,isAuthenticated:d,isPremium:i==="premium"||i==="trial",isTrialActive:(r==null?void 0:r.isTrialActive)||!1,trialDaysRemaining:(r==null?void 0:r.daysRemaining)||0,loading:l,signup:N,login:k,logout:R,upgradeToPremium:P,cancelSubscription:x,fetchUserProfile:g};return c.jsx(nI.Provider,{value:E,children:t})},sI="/assets/Logo-BuPYrDrj.png";var iI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},zv=Yn.createContext&&Yn.createContext(iI),mD=["attr","size","title"];function pD(t,e){if(t==null)return{};var n=gD(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gD(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function eu(){return eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eu.apply(this,arguments)}function Bv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function tu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bv(Object(n),!0).forEach(function(r){yD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yD(t,e,n){return e=vD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vD(t){var e=_D(t,"string");return typeof e=="symbol"?e:e+""}function _D(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oI(t){return t&&t.map((e,n)=>Yn.createElement(e.tag,tu({key:n},e.attr),oI(e.child)))}function wD(t){return e=>Yn.createElement(ED,eu({attr:tu({},t.attr)},e),oI(t.child))}function ED(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=pD(t,mD),l=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Yn.createElement("svg",eu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:tu(tu({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Yn.createElement("title",null,i),t.children)};return zv!==void 0?Yn.createElement(zv.Consumer,null,n=>e(n)):e(iI)}function TD(t){return wD({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(t)}const zs={async register(t){try{const e=await sE(ks,t.email,t.password);return await yf(It(we,"users",e.user.uid),{username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,exerciseGoalMinutes:t.exerciseGoalMinutes||30,waterGoalOz:t.waterGoalOz||64,meditationGoalMinutes:t.meditationGoalMinutes||10,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date}),{user:e.user}}catch(e){throw new Error(e.message)}},async login(t,e){try{return{user:(await iE(ks,t,e)).user}}catch{throw new Error("Invalid credentials")}},async logout(){try{return await oE(ks),{message:"success"}}catch(t){throw new Error(t.message)}},async getUserProfile(t){try{const e=await ZT(It(we,"users",t));if(!e.exists())throw new Error("User not found");return{user:{id:t,...e.data()}}}catch(e){throw new Error(e.message)}},async updateUserProfile(t,e){try{const n=It(we,"users",t);return await yf(n,{...e,updatedAt:new Date},{merge:!0}),{user:{id:t,...e}}}catch(n){throw new Error("Error updating profile: "+n.message)}}};function ID(){const{user:t,logout:e}=tn(),n=wu(),[r,s]=j.useState(!1),[i,o]=j.useState(null),[l,u]=j.useState(!1),d=j.useRef();j.useEffect(()=>{const k=async()=>{if(t!=null&&t.uid)try{u(!0);const R=await zs.getUserProfile(t.uid);o(R.user)}catch(R){console.error("Error fetching user profile:",R)}finally{u(!1)}};t!=null&&t.uid&&k()},[t]);const f=k=>{k.stopPropagation(),s(!r)};j.useEffect(()=>{if(!r)return;const k=R=>{d.current&&!d.current.contains(R.target)&&s(!1)};return document.addEventListener("click",k),()=>document.removeEventListener("click",k)},[r]);const p=async k=>{k.preventDefault(),s(!1);try{await e(),n("/welcome")}catch(R){console.error("Error logging out:",R),n("/welcome")}},g=()=>{s(!1),n("/profile")};if(!t)return null;const N="profile-dropdown"+(r?"":" hidden");return c.jsxs("div",{className:"profile-button-container",children:[c.jsx("button",{onClick:f,className:"profile-button",children:c.jsx(TD,{className:"profile-icon"})}),c.jsxs("ul",{className:N,ref:d,children:[c.jsx("li",{className:"profile-info",children:c.jsx("div",{className:"user-details",children:c.jsx("span",{className:"user-name",children:i!=null&&i.firstName&&(i!=null&&i.lastName)?`${i.firstName} ${i.lastName}`:(i==null?void 0:i.username)||"User"})})}),c.jsx("li",{className:"menu-divider"}),c.jsx("li",{children:c.jsx("button",{onClick:g,className:"dropdown-button",children:"👤 Edit Profile"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>{s(!1),n("/dashboard")},className:"dropdown-button",children:"📊 Dashboard"})}),c.jsx("li",{className:"menu-divider"}),c.jsx("li",{children:c.jsx("button",{onClick:p,className:"dropdown-button logout-button",children:"🚪 Sign Out"})})]})]})}function SD(){const{userSubscription:t,isTrialActive:e,trialDaysRemaining:n,upgradeToPremium:r}=tn();if(t==="premium"||t==="free"||!e)return null;const s=n<=3,i=(14-n)/14*100,o=()=>n===1?"Last day of premium!":n<=3?`Only ${n} days left!`:`${n} days remaining`,l=()=>n===1?"Keep Premium - $4.99/mo":n<=3?"Don't Lose Premium!":"Keep Premium - $4.99/mo";return c.jsxs("div",{className:`trial-banner ${s?"urgent":""}`,children:[c.jsxs("div",{className:"trial-content",children:[c.jsxs("div",{className:"trial-info",children:[c.jsx("span",{className:"trial-icon",children:s?"⏰":"✨"}),c.jsxs("div",{className:"trial-text",children:[c.jsx("h4",{children:s?"Premium Trial Ending!":"Premium Trial Active"}),c.jsx("p",{children:o()})]})]}),c.jsx("button",{onClick:r,className:"trial-upgrade-btn",children:l()})]}),c.jsx("div",{className:"trial-progress",children:c.jsx("div",{className:"trial-progress-bar",style:{width:`${i}%`}})})]})}function xD(){return c.jsxs("div",{className:"navigation-container",children:[c.jsxs("div",{className:"top-header",children:[c.jsxs("div",{className:"logo-container",children:[c.jsx("img",{src:sI,alt:"Clarity logo",className:"logo"}),c.jsx("span",{className:"logo-text",children:"Your Mind + Wellness Tracker"})]}),c.jsx(ID,{})]}),c.jsx(SD,{}),c.jsx("main",{className:"main-content",children:c.jsx(q1,{})}),c.jsxs("nav",{className:"bottom-navigation",children:[c.jsxs(oi,{to:"/dashboard",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"📊"}),c.jsx("span",{className:"nav-label",children:"Home"})]}),c.jsxs(oi,{to:"/workout",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🏋️"}),c.jsx("span",{className:"nav-label",children:"Workout"})]}),c.jsxs(oi,{to:"/meditation",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🧘‍♀️"}),c.jsx("span",{className:"nav-label",children:"Meditate"})]}),c.jsxs(oi,{to:"/water",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"💧"}),c.jsx("span",{className:"nav-label",children:"Water"})]}),c.jsxs(oi,{to:"/games",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🎮"}),c.jsx("span",{className:"nav-label",children:"Games"})]}),c.jsxs(oi,{to:"/goals",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🎯"}),c.jsx("span",{className:"nav-label",children:"Goals"})]})]})]})}function ND(){const{user:t,loading:e}=tn(),[n,r]=j.useState(""),[s,i]=j.useState(""),[o,l]=j.useState(""),[u,d]=j.useState(""),[f,p]=j.useState(""),[g,N]=j.useState(""),[k,R]=j.useState(""),[P,x]=j.useState("30"),[E,S]=j.useState("64"),[D,V]=j.useState("10"),[O,v]=j.useState({}),[y,w]=j.useState(!1),[T,A]=j.useState(!1),[C,I]=j.useState("pulse");if(t&&!e)return c.jsx(Dc,{to:"/dashboard",replace:!0});if(e)return c.jsx("div",{children:"Loading..."});j.useEffect(()=>{const Z=[setTimeout(()=>I("open"),2500),setTimeout(()=>I("form"),4500)];return()=>Z.forEach(clearTimeout)},[]);const re=async Z=>{Z.preventDefault(),v({}),A(!0);try{await zs.login(n,s)}catch(Ie){v({credential:Ie.message})}finally{A(!1)}},qe=async Z=>{if(Z.preventDefault(),s!==k){v({confirmPassword:"Confirm Password field must be the same as the Password field"});return}v({}),A(!0);try{await zs.register({email:o,password:s,username:u,firstName:f,lastName:g,exerciseGoalMinutes:parseInt(P),waterGoalOz:parseInt(E),meditationGoalMinutes:parseInt(D)})}catch(Ie){v({general:Ie.message})}finally{A(!1)}};return c.jsxs("div",{className:"welcome-container",children:[C!=="form"&&c.jsxs("div",{className:`awakening-bg ${C}`,children:[c.jsx("span",{className:`awakening-hello ${C}`,children:"Welcome"}),c.jsx("div",{className:"awakening-eye"})]}),c.jsxs("div",{className:`welcome-card ${C==="form"?"visible":""}`,children:[c.jsxs("div",{className:"welcome-header",children:[c.jsx("img",{src:sI,alt:"Clarity logo"}),c.jsx("p",{children:"Begin your wellness today"})]}),y?c.jsxs("form",{className:"welcome-form",onSubmit:qe,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",value:o,onChange:Z=>l(Z.target.value),required:!0,placeholder:"Enter your email"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Username"}),c.jsx("input",{type:"text",value:u,onChange:Z=>d(Z.target.value),required:!0,placeholder:"Choose a username"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"First Name"}),c.jsx("input",{type:"text",value:f,onChange:Z=>p(Z.target.value),required:!0,placeholder:"Enter your first name"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Last Name"}),c.jsx("input",{type:"text",value:g,onChange:Z=>N(Z.target.value),required:!0,placeholder:"Enter your last name"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Password"}),c.jsx("input",{type:"password",value:s,onChange:Z=>i(Z.target.value),required:!0,placeholder:"Create a password"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Confirm Password"}),c.jsx("input",{type:"password",value:k,onChange:Z=>R(Z.target.value),required:!0,placeholder:"Confirm your password"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Exercise Goal (minutes)"}),c.jsx("input",{type:"number",value:P,onChange:Z=>x(Z.target.value),required:!0,placeholder:"Daily exercise goal in minutes"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Water Goal (oz)"}),c.jsx("input",{type:"number",value:E,onChange:Z=>S(Z.target.value),required:!0,placeholder:"Daily water goal in ounces"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Meditation Goal (minutes)"}),c.jsx("input",{type:"number",value:D,onChange:Z=>V(Z.target.value),required:!0,placeholder:"Daily meditation goal in minutes"})]}),O.confirmPassword&&c.jsx("p",{className:"error-message",children:O.confirmPassword}),O.general&&c.jsx("p",{className:"error-message",children:O.general}),c.jsx("button",{type:"submit",className:"primary-button",disabled:T,children:T?"Creating Account...":"Sign Up"})]}):c.jsxs("form",{className:"welcome-form",onSubmit:re,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Username or Email"}),c.jsx("input",{type:"text",value:n,onChange:Z=>r(Z.target.value),required:!0,placeholder:"Enter your username or email"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Password"}),c.jsx("input",{type:"password",value:s,onChange:Z=>i(Z.target.value),required:!0,placeholder:"Enter your password"})]}),O.credential&&c.jsx("p",{className:"error-message",children:O.credential}),c.jsx("button",{type:"submit",className:"primary-button",disabled:T,children:T?"Logging In...":"Log In"})]}),c.jsx("button",{className:"secondary-button",onClick:()=>w(!y),disabled:T,children:y?"Already have an account? Log In":"Don't have an account? Sign Up"})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var vf=function(t,e){return vf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},vf(t,e)};function kD(t,e){vf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var AD=100,CD=100,$v=50,_f=50,wf=50;function Wv(t){var e=t.className,n=t.counterClockwise,r=t.dashRatio,s=t.pathRadius,i=t.strokeWidth,o=t.style;return j.createElement("path",{className:e,style:Object.assign({},o,RD({pathRadius:s,dashRatio:r,counterClockwise:n})),d:PD({pathRadius:s,counterClockwise:n}),strokeWidth:i,fillOpacity:0})}function PD(t){var e=t.pathRadius,n=t.counterClockwise,r=e,s=n?1:0;return`
      M `+_f+","+wf+`
      m 0,-`+r+`
      a `+r+","+r+" "+s+" 1 1 0,"+2*r+`
      a `+r+","+r+" "+s+" 1 1 0,-"+2*r+`
    `}function RD(t){var e=t.counterClockwise,n=t.dashRatio,r=t.pathRadius,s=Math.PI*2*r,i=(1-n)*s;return{strokeDasharray:s+"px "+s+"px",strokeDashoffset:(e?-i:i)+"px"}}var Wd=function(t){kD(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return $v-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var n=this.props,r=n.value,s=n.minValue,i=n.maxValue,o=Math.min(Math.max(r,s),i);return(o-s)/(i-s)},e.prototype.render=function(){var n=this.props,r=n.circleRatio,s=n.className,i=n.classes,o=n.counterClockwise,l=n.styles,u=n.strokeWidth,d=n.text,f=this.getPathRadius(),p=this.getPathRatio();return j.createElement("svg",{className:i.root+" "+s,style:l.root,viewBox:"0 0 "+AD+" "+CD,"data-test-id":"CircularProgressbar"},this.props.background?j.createElement("circle",{className:i.background,style:l.background,cx:_f,cy:wf,r:$v}):null,j.createElement(Wv,{className:i.trail,counterClockwise:o,dashRatio:r,pathRadius:f,strokeWidth:u,style:l.trail}),j.createElement(Wv,{className:i.path,counterClockwise:o,dashRatio:p*r,pathRadius:f,strokeWidth:u,style:l.path}),d?j.createElement("text",{className:i.text,style:l.text,x:_f,y:wf},d):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(j.Component);function qd(t){var e=t.rotation,n=t.strokeLinecap,r=t.textColor,s=t.textSize,i=t.pathColor,o=t.pathTransition,l=t.pathTransitionDuration,u=t.trailColor,d=t.backgroundColor,f=e==null?void 0:"rotate("+e+"turn)",p=e==null?void 0:"center center";return{root:{},path:Vl({stroke:i,strokeLinecap:n,transform:f,transformOrigin:p,transition:o,transitionDuration:l==null?void 0:l+"s"}),trail:Vl({stroke:u,strokeLinecap:n,transform:f,transformOrigin:p}),text:Vl({fill:r,fontSize:s}),background:Vl({fill:d})}}function Vl(t){return Object.keys(t).forEach(function(e){t[e]==null&&delete t[e]}),t}const B={getUserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone},getCurrentLocalTime(){return new Date},getStartOfDay(t=new Date){const e=new Date(t);return e.setHours(0,0,0,0),e},getEndOfDay(t=new Date){const e=new Date(t);return e.setHours(23,59,59,999),e},formatLocalDate(t){return t.toLocaleDateString("en-CA")},formatLocalDateTime(t){return t.toLocaleString()},formatLocalTime(t){return t.toLocaleTimeString()},getLocalDateRange(t=7){const e=this.getEndOfDay(new Date),n=this.getStartOfDay(new Date);return n.setDate(n.getDate()-(t-1)),{startDate:n,endDate:e}},isToday(t){const e=new Date;return this.formatLocalDate(t)===this.formatLocalDate(e)},isSameLocalDay(t,e){return this.formatLocalDate(t)===this.formatLocalDate(e)},toLocalTimezone(t){return new Date(t)},getRelativeTime(t){const n=new Date-t,r=Math.floor(n/6e4),s=Math.floor(r/60),i=Math.floor(s/24);return r<1?"Just now":r<60?`${r} minutes ago`:s<24?`${s} hours ago`:i===1?"Yesterday":i<7?`${i} days ago`:this.formatLocalDate(t)},getCurrentWeekRange(){const t=new Date,e=t.getDay(),n=new Date(t);n.setHours(0,0,0,0),n.setDate(t.getDate()-e);const r=new Date(n);return r.setDate(n.getDate()+6),r.setHours(23,59,59,999),{startDate:n,endDate:r}}},Es={async logWorkout(t,e){try{console.log("🌍 Logging workout in timezone:",B.getUserTimezone());let n=B.getCurrentLocalTime();e.date&&(n=B.toLocalTimezone(e.date));const r={title:e.title,type:e.type||"General",durationMinutes:e.durationMinutes,date:n,notes:e.notes||"",caloriesBurned:e.caloriesBurned||0,completed:!0,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},s=await dp(Vt(we,`users/${t}/workouts`),r);return{id:s.id,success:!0,workout:{...e,id:s.id}}}catch(n){throw new Error("Error logging workout: "+n.message)}},async fetchWorkoutsByUser(t){try{const e=Cn(Vt(we,`users/${t}/workouts`),Pn("date","desc"));return{workouts:(await Rn(e)).docs.map(s=>{var i,o,l,u;return{id:s.id,...s.data(),date:(i=s.data().date)==null?void 0:i.toDate(),localDate:B.formatLocalDate((o=s.data().date)==null?void 0:o.toDate()),localDateTime:B.formatLocalDateTime((l=s.data().date)==null?void 0:l.toDate()),relativeTime:B.getRelativeTime((u=s.data().date)==null?void 0:u.toDate())}})}}catch(e){throw new Error("Error fetching workouts: "+e.message)}},async updateWorkout(t,e,n){try{const r=It(we,`users/${t}/workouts`,e),s={...n,updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()};return n.date&&(s.date=B.toLocalTimezone(n.date)),await bi(r,s),{success:!0,workout:{id:e,...n}}}catch(r){throw new Error("Error updating workout: "+r.message)}},async deleteWorkout(t,e){try{return await up(It(we,`users/${t}/workouts`,e)),{success:!0,message:"Workout deleted successfully"}}catch(n){throw new Error("Error deleting workout: "+n.message)}},async getWorkoutSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange();console.log("🌍 Weekly workout query for timezone:",B.getUserTimezone()),console.log("📅 Query range:",B.formatLocalDateTime(e),"to",B.formatLocalDateTime(n));const r=Cn(Vt(we,`users/${t}/workouts`),yt("date",">=",e),yt("date","<=",n),Pn("date","desc")),i=(await Rn(r)).docs.map(u=>{var d;return{id:u.id,...u.data(),date:(d=u.data().date)==null?void 0:d.toDate()}}),o=i.reduce((u,d)=>u+(d.durationMinutes||0),0),l=i.reduce((u,d)=>u+(d.caloriesBurned||0),0);return{totalWorkouts:i.length,totalMinutes:o,totalCalories:l,workouts:i.slice(0,5),period:"This week",userTimezone:B.getUserTimezone()}}catch(e){throw new Error("Error fetching workout summary: "+e.message)}},async getDailyWorkoutSummary(t,e=new Date){try{const{startDate:n,endDate:r}={startDate:B.getStartOfDay(e),endDate:B.getEndOfDay(e)};console.log("🌍 Daily workout query for timezone:",B.getUserTimezone()),console.log("📅 Query range:",B.formatLocalDateTime(n),"to",B.formatLocalDateTime(r));const s=Cn(Vt(we,`users/${t}/workouts`),yt("date",">=",n),yt("date","<=",r),Pn("date","desc")),o=(await Rn(s)).docs.map(f=>{var p;return{id:f.id,...f.data(),date:(p=f.data().date)==null?void 0:p.toDate()}});console.log("💪 Found workouts for today:",o.length);const l=o.reduce((f,p)=>f+(p.durationMinutes||0),0),u=o.length,d=o.reduce((f,p)=>f+(p.caloriesBurned||0),0);return{date:B.formatLocalDate(e),totalWorkouts:u,completedWorkouts:u,totalMinutes:l,caloriesBurned:d,lastWorkout:o.length>0?o[0]:null,workouts:o,hasWorkoutsToday:o.length>0,mostCommonType:o.length>0?this.getMostCommonWorkoutType(o):null,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily workout summary:",n),this.getEmptyDailySummary(e)}},getMostCommonWorkoutType(t){if(t.length===0)return null;const e={};return t.forEach(n=>{e[n.type]=(e[n.type]||0)+1}),Object.keys(e).reduce((n,r)=>e[n]>e[r]?n:r)},getEmptyDailySummary(t){return{date:B.formatLocalDate(t),totalWorkouts:0,completedWorkouts:0,totalMinutes:0,caloriesBurned:0,lastWorkout:null,workouts:[],hasWorkoutsToday:!1,mostCommonType:null,userTimezone:B.getUserTimezone()}}},Ht={async logWaterIntake(t,e){try{const n={amount:e.amount,date:B.toLocalTimezone(e.date||new Date),userId:t,createdAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},r=await dp(Vt(we,`users/${t}/waterIntake`),n);return{id:r.id,success:!0,waterIntake:{...e,id:r.id}}}catch(n){throw new Error("Error logging water intake: "+n.message)}},async fetchWaterIntakeByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const r=Cn(Vt(we,`users/${t}/waterIntake`),yt("date",">=",n),Pn("date","desc"));return{waterIntakes:(await Rn(r)).docs.map(o=>{var l;return{id:o.id,...o.data(),date:(l=o.data().date)==null?void 0:l.toDate()}})}}catch(n){throw new Error("Error fetching water intake: "+n.message)}},async updateWaterIntake(t,e,n){try{const r=It(we,`users/${t}/waterIntake`,e);return await bi(r,{...n,updatedAt:new Date}),{success:!0,waterIntake:{id:e,...n}}}catch(r){throw new Error("Error updating water intake: "+r.message)}},async deleteWaterIntake(t,e){try{return await up(It(we,`users/${t}/waterIntake`,e)),{success:!0,message:"Water intake deleted successfully"}}catch(n){throw new Error("Error deleting water intake: "+n.message)}},async getTodayWaterIntake(t){try{const e=new Date;e.setHours(0,0,0,0);const n=new Date(e);n.setDate(n.getDate()+1);const r=Cn(Vt(we,`users/${t}/waterIntake`),yt("date",">=",e),yt("date","<",n),Pn("date","desc")),i=(await Rn(r)).docs.map(l=>l.data());return{totalOz:i.reduce((l,u)=>l+(u.amount||0),0),intakeCount:i.length,intakes:i}}catch(e){throw new Error("Error fetching today's water intake: "+e.message)}},async getWaterSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),r=Cn(Vt(we,`users/${t}/waterIntake`),yt("date",">=",e),yt("date","<=",n),Pn("date","desc")),i=(await Rn(r)).docs.map(f=>f.data()),o={};i.forEach(f=>{const p=f.date.toDate().toDateString();o[p]=(o[p]||0)+f.amount});const l=i.reduce((f,p)=>f+(p.amount||0),0),u=7,d=u>0?l/u:0;return{totalOz:l,averageOz:d,dailyTotals:o,intakeCount:i.length}}catch(e){throw new Error("Error fetching water summary: "+e.message)}},async getDailyWaterIntake(t,e=new Date){try{const n=B.getStartOfDay(e),r=B.getEndOfDay(e),s=Cn(Vt(we,`users/${t}/waterIntake`),yt("date",">=",n),yt("date","<=",r),Pn("date","desc")),o=(await Rn(s)).docs.map(u=>{var d;return{id:u.id,...u.data(),date:(d=u.data().date)==null?void 0:d.toDate()}}),l=o.reduce((u,d)=>u+(d.amount||0),0);return{date:B.formatLocalDate(e),totalOz:l,totalEntries:o.length,entries:o,hasWaterToday:o.length>0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily water intake:",n),{date:B.formatLocalDate(e),totalOz:0,totalEntries:0,entries:[],hasWaterToday:!1,userTimezone:B.getUserTimezone()}}},calculateHourlyWaterIntake(t){const e={};return t.forEach(n=>{const r=n.date.getHours();e[r]=(e[r]||0)+n.amount}),e}},Ts={async logMeditation(t,e){try{const n={title:e.title||"Meditation Session",type:e.type||"mindfulness",soundscape:e.soundscape||"silence",durationMinutes:e.durationMinutes,targetDuration:e.targetDuration||e.durationMinutes,completed:e.completed||!1,deepStateAchieved:e.deepStateAchieved||!1,date:B.toLocalTimezone(e.date||new Date),notes:e.notes||"",moodBefore:e.moodBefore||"",moodAfter:e.moodAfter||"",guidedSession:e.guidedSession||!1,interruptions:e.interruptions||0,heartRateData:e.heartRateData||null,brainwaveFrequency:e.brainwaveFrequency||null,focusLevel:e.focusLevel||null,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},r=await dp(Vt(we,`users/${t}/meditations`),n);return{id:r.id,success:!0,meditation:{...n,id:r.id}}}catch(n){throw new Error("Error logging meditation: "+n.message)}},async fetchMeditationsByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const r=Cn(Vt(we,`users/${t}/meditations`),yt("date",">=",n),Pn("date","desc"));return{meditations:(await Rn(r)).docs.map(o=>{var l;return{id:o.id,...o.data(),date:(l=o.data().date)==null?void 0:l.toDate()}})}}catch(n){throw new Error("Error fetching meditations: "+n.message)}},async getMeditationAnalytics(t,e=30){try{const r=(await this.fetchMeditationsByUser(t,e)).meditations;if(r.length===0)return{totalSessions:0,deepStateSuccessRate:0,averageDuration:0,favoriteTime:"morning",favoriteSound:"silence",moodImprovement:0};const i=r.filter(d=>d.deepStateAchieved).length/r.length*100,o={},l={},u=[];return r.forEach(d=>{o[d.soundscape]=(o[d.soundscape]||0)+1;const f=d.date.getHours(),p=f<12?"morning":f<18?"afternoon":"evening";if(l[p]=(l[p]||0)+1,d.moodBefore&&d.moodAfter){const g={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6},N=g[d.moodBefore]||3,k=g[d.moodAfter]||3;u.push(k-N)}}),{totalSessions:r.length,deepStateSuccessRate:Math.round(i),averageDuration:r.reduce((d,f)=>d+f.durationMinutes,0)/r.length,favoriteTime:Object.keys(l).reduce((d,f)=>l[d]>l[f]?d:f,"morning"),favoriteSound:Object.keys(o).reduce((d,f)=>o[d]>o[f]?d:f,"silence"),moodImprovement:u.length>0?u.reduce((d,f)=>d+f,0)/u.length:0,consistency:r.length/e}}catch(n){throw new Error("Error fetching meditation analytics: "+n.message)}},async getPersonalizedRecommendations(t){try{const e=await this.getMeditationAnalytics(t),n=[];return e.deepStateSuccessRate<50&&n.push({type:"duration",message:"Try longer sessions (7-10 minutes) to achieve deeper states",action:"Increase session length"}),e.favoriteSound==="silence"&&n.push({type:"soundscape",message:'Research shows binaural beats can enhance focus. Try our "Deep Focus" soundscape.',action:"Try binaural beats"}),e.consistency<.5&&n.push({type:"consistency",message:`Your best time is ${e.favoriteTime}. Set a daily reminder for consistent practice.`,action:"Set daily reminder"}),{recommendations:n}}catch(e){throw new Error("Error generating recommendations: "+e.message)}},async updateMeditation(t,e,n){try{const r=It(we,`users/${t}/meditations`,e);return await bi(r,{...n,updatedAt:new Date}),{success:!0,meditation:{id:e,...n}}}catch(r){throw new Error("Error updating meditation: "+r.message)}},async deleteMeditation(t,e){try{return await up(It(we,`users/${t}/meditations`,e)),{success:!0,message:"Meditation deleted successfully"}}catch(n){throw new Error("Error deleting meditation: "+n.message)}},async getMeditationSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),r=Cn(Vt(we,`users/${t}/meditations`),yt("date",">=",e),yt("date","<=",n),Pn("date","desc")),i=(await Rn(r)).docs.map(d=>d.data()),o=i.reduce((d,f)=>d+(f.durationMinutes||0),0),l=i.length>0?o/i.length:0,u=i.length>0?i.filter(d=>d.deepStateAchieved).length/i.length*100:0;return{totalSessions:i.length,totalMinutes:o,averageDuration:l,deepStateSuccessRate:u,favoriteSoundscape:i.length>0?this.getMostFrequent(i,"soundscape"):"silence",favoriteTime:i.length>0?this.getMostFrequent(i,"timeOfDay"):"morning",moodImprovement:this.calculateMoodImprovement(i)}}catch(e){throw console.error("Error fetching meditation summary:",e),new Error("Error fetching meditation summary: "+e.message)}},getMostFrequent(t,e){const n={};return t.forEach(r=>{const s=e==="timeOfDay"?this.getTimeOfDay(r.date):r[e];n[s]=(n[s]||0)+1}),Object.keys(n).reduce((r,s)=>n[r]>n[s]?r:s)},getTimeOfDay(t){let e;if(t instanceof Date)e=t;else if(typeof t=="string")e=new Date(t);else if(t&&t.seconds)e=new Date(t.seconds*1e3);else return console.warn("Invalid date format:",t),"unknown";if(isNaN(e.getTime()))return console.warn("Invalid date object:",t),"unknown";const n=e.getHours();return n<6?"night":n<12?"morning":n<17?"afternoon":n<21?"evening":"night"},calculateMoodImprovement(t){const e={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6};let n=0,r=0;return t.forEach(s=>{const i=e[s.moodBefore]||3,o=e[s.moodAfter]||3;n+=o-i,r++}),r>0?n/r:0},async getDailyMeditationSummary(t,e=new Date){try{const n=B.getStartOfDay(e),r=B.getEndOfDay(e);console.log("🌍 Daily meditation query for timezone:",B.getUserTimezone());const s=Cn(Vt(we,`users/${t}/meditations`),yt("date",">=",n),yt("date","<=",r),Pn("date","desc")),o=(await Rn(s)).docs.map(P=>{var x;return{id:P.id,...P.data(),date:(x=P.data().date)==null?void 0:x.toDate()}}),l=o.reduce((P,x)=>P+(x.durationMinutes||0),0),u=o.filter(P=>P.completed).length,d=o.length>0?l/o.length:0,f=o.filter(P=>P.deepStateAchieved).length,p=o.length>0?f/o.length*100:0,g=o.length>0?o[0]:null,N=o.length>0?this.getMostFrequent(o,"soundscape"):"silence",k=o.length>0?this.getMostFrequent(o,"timeOfDay"):"morning",R=this.calculateMoodImprovement(o);return{date:B.formatLocalDate(e),totalSessions:o.length,completedSessions:u,totalMinutes:l,averageDuration:Math.round(d*10)/10,deepStateAchieved:f,deepStateSuccessRate:Math.round(p),lastSession:g,favoriteSoundscape:N,favoriteTime:k,moodImprovement:Math.round(R*100)/100,sessions:o,hasSessionsToday:o.length>0,mostRecentType:(g==null?void 0:g.type)||"mindfulness",mostRecentSoundscape:(g==null?void 0:g.soundscape)||"silence",timeOfLastSession:(g==null?void 0:g.date)||null,totalInterruptions:o.reduce((P,x)=>P+(x.interruptions||0),0),averageFocusLevel:o.length>0?o.reduce((P,x)=>P+(x.focusLevel||5),0)/o.length:0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily meditation summary:",n),{date:e.toISOString().split("T")[0],totalSessions:0,completedSessions:0,totalMinutes:0,averageDuration:0,deepStateAchieved:0,deepStateSuccessRate:0,lastSession:null,favoriteSoundscape:"silence",favoriteTime:"morning",moodImprovement:0,sessions:[],hasSessionsToday:!1,mostRecentType:"mindfulness",mostRecentSoundscape:"silence",timeOfLastSession:null,totalInterruptions:0,averageFocusLevel:0,userTimezone:B.getUserTimezone()}}}},qv=["You are capable of amazing things.","You are loved.","You are strong.","You are beautiful.","You are enough.","You are worthy.","You are important.","You are talented.","You are special.","I am capable and strong","I am loved and loving","I am healthy and happy","I am wealthy and wise","Believe in yourself and all that you are.","You are amazing.","You are stronger than you think.","You are braver than you believe.","Every day is a new opportunity.","You are worth it.","You are worthy of all the good things.","You are deserving of love and happiness.","Stay positive, work hard, make it happen.","You are enough just as you are.","You are doing great.","Your potential is limitless.","You are a work of art.","You are doing great.","You are a gift to the world.","Keep going, you are getting there.","You are a masterpiece."];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Lt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="us-central1";class bD{constructor(e,n,r,s,i=Gv,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new DD(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Gv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}const Hv="@firebase/functions",Kv="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="auth-internal",MD="app-check-internal",LD="messaging-internal";function VD(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(OD),o=n.getProvider(LD),l=n.getProvider(MD);return new bD(s,i,o,l,r)};Ms(new Yr(jD,e,"PUBLIC").setMultipleInstances(!0)),bn(Hv,Kv,t),bn(Hv,Kv,"esm2017")}VD();const FD="https://us-central1-clarity-311c3.cloudfunctions.net";async function Yi(){const t=yE().currentUser;if(!t){alert("You must be logged in to upgrade.");return}const n=await(await fetch(`${FD}/createStripeCheckoutSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t.uid})})).json();window.location.href=n.url}function Qv(){const t=Math.floor(Math.random()*qv.length);return qv[t]}function UD(){const t=wu(),{user:e,loading:n,isPremium:r}=tn(),[s,i]=j.useState(null),[o,l]=j.useState({workout:{totalMinutes:0,sessions:0,hasWorkoutsToday:!1},meditation:{totalMinutes:0,sessions:0,hasSessionsToday:!1,deepStateAchieved:0},water:{totalOz:0,entries:0,hasWaterToday:!1}}),[u,d]=j.useState(30),[f,p]=j.useState(10),[g,N]=j.useState(64),[k,R]=j.useState(Qv()),[P,x]=j.useState(!0),[E,S]=j.useState(!1);if(j.useEffect(()=>{if(!n&&!e){t("/welcome",{replace:!0});return}},[e,n,t]),j.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{x(!0);const w=B.getCurrentLocalTime();console.log("🌍 Dashboard timezone:",B.getUserTimezone()),console.log("📅 Local today:",B.formatLocalDateTime(w));const T=await zs.getUserProfile(e.uid);i(T.user),d(T.user.exerciseGoalMinutes||30),p(T.user.meditationGoalMinutes||10),N(T.user.waterGoalOz||64),console.log("📊 Fetching workout data for date:",w);const[A,C,I]=await Promise.all([Es.getDailyWorkoutSummary(e.uid,w),Ts.getDailyMeditationSummary(e.uid,w),Ht.getDailyWaterIntake(e.uid,w)]);console.log("📊 Raw workout data from Dashboard:",A),console.log("🧘 Raw meditation data:",C),console.log("💧 Raw water data:",I),l({workout:{totalMinutes:A.totalMinutes||0,sessions:A.totalWorkouts||0,hasWorkoutsToday:A.hasWorkoutsToday||A.totalMinutes>0,calories:A.caloriesBurned||0,lastWorkoutType:A.mostCommonType},meditation:{totalMinutes:C.totalMinutes||0,sessions:C.totalSessions||0,hasSessionsToday:C.hasSessionsToday||!1,deepStateAchieved:C.deepStateAchieved||0,moodImprovement:C.moodImprovement||0,lastSessionType:C.mostRecentType},water:{totalOz:I.totalOz||0,entries:I.totalEntries||I.entries||0,hasWaterToday:(I.totalOz||0)>0,averagePerEntry:I.averagePerEntry||0,isOnTrack:(I.totalOz||0)>=g*.75}})}catch(w){console.error("Error fetching daily data:",w)}finally{x(!1)}})()},[e]),j.useEffect(()=>{const y=localStorage.getItem("affirmation"),w=localStorage.getItem("affirmationDate"),T=new Date().toISOString().split("T")[0];if(y&&w===T)R(y);else{const A=Qv();R(A),localStorage.setItem("affirmation",A),localStorage.setItem("affirmationDate",T)}},[]),j.useEffect(()=>{if(console.log("Trial modal effect running",s),s&&s.subscriptionStatus==="trial_expired"&&s.subscription==="free"){const y=localStorage.getItem("dontRemindTrial"),w=localStorage.getItem("lastTrialReminded");console.log("dontRemindTrial:",y),console.log("lastReminded:",w);const T=1e3*60*60*24*7,A=Date.now();y||(!w||A-Number(w)>T)&&(S(!0),localStorage.setItem("lastTrialReminded",A),console.log("Showing trial modal!"))}},[s]),n||P)return c.jsx("div",{className:"dashboard-loading",children:"Loading..."});if(!e)return c.jsx("div",{className:"dashboard-loading",children:"Redirecting..."});if(!s)return c.jsx("div",{className:"dashboard-loading",children:"Loading user data..."});const D=Math.min(o.workout.totalMinutes/u*100,100)||0,V=Math.min(o.meditation.totalMinutes/f*100,100)||0,O=Math.min(o.water.totalOz/g*100,100)||0,v=Math.max(u-o.workout.totalMinutes,0);return s.subscriptionStatus==="trial_expired"&&s.subscription,c.jsxs("div",{className:"dashboard-page",children:[c.jsxs("div",{className:"welcome-section",children:[c.jsxs("h1",{children:["Welcome back, ",s.firstName,"!"]}),c.jsx("p",{children:"Here's your wellness progress for today"})]}),c.jsxs("div",{className:"progress-bars",children:[c.jsxs("div",{className:"progress-bar",children:[c.jsx("h2",{children:"💪 Today's Workout"}),c.jsxs("p",{className:"goal-text",children:["Daily Goal: ",u," minutes"]}),c.jsxs("p",{className:"current-text",children:[o.workout.totalMinutes," / ",u," min"]}),c.jsx(Wd,{value:D,text:`${Math.round(D)}%`,styles:qd({pathColor:`rgba(62, 152, 199, ${Math.max(D/100,.3)})`,textColor:"#3e98c7"})}),c.jsx("div",{className:"daily-stats",children:o.workout.hasWorkoutsToday?c.jsxs("span",{children:["✅ ",o.workout.sessions," workouts logged"]}):c.jsx("span",{children:"No workouts logged today"})}),c.jsx("button",{className:"track-button",onClick:()=>t("/workout"),children:"Log Workout"})]}),c.jsxs("div",{className:"progress-bar",children:[c.jsx("h2",{children:"🧘‍♀️ Today's Meditation"}),c.jsxs("p",{className:"goal-text",children:["Daily Goal: ",f," minutes"]}),c.jsxs("p",{className:"current-text",children:[o.meditation.totalMinutes," / ",f," min"]}),c.jsx(Wd,{value:V,text:`${Math.round(V)}%`,styles:qd({pathColor:`rgba(138, 43, 226, ${V/100})`,textColor:"#8a2be2"})}),c.jsxs("div",{className:"daily-stats",children:[o.meditation.hasSessionsToday?c.jsxs("span",{children:["✅ ",o.meditation.sessions," sessions completed"]}):c.jsx("span",{children:"No meditation logged today"}),o.meditation.deepStateAchieved>0&&c.jsxs("span",{className:"deep-state",children:["🌟 ",o.meditation.deepStateAchieved," deep states"]})]}),c.jsx("button",{className:"track-button",onClick:()=>t("/meditation"),children:"Start Meditation"})]}),c.jsxs("div",{className:"progress-bar",children:[c.jsx("h2",{children:"💧 Today's Hydration"}),c.jsxs("p",{className:"goal-text",children:["Daily Goal: ",g," oz"]}),c.jsxs("p",{className:"current-text",children:[o.water.totalOz," / ",g," oz"]}),c.jsx(Wd,{value:O,text:`${Math.round(O)}%`,styles:qd({pathColor:`rgba(30, 144, 255, ${O/100})`,textColor:"#1e90ff"})}),c.jsxs("div",{className:"daily-stats",children:[o.water.hasWaterToday?c.jsxs("span",{children:["✅ ",o.water.entries," water entries"]}):c.jsx("span",{children:"No water logged today"}),o.water.isOnTrack&&c.jsx("span",{className:"on-track",children:"🎯 On track for hydration!"})]}),c.jsx("button",{className:"track-button",onClick:()=>t("/water"),children:"Log Water"})]})]}),v>0&&c.jsx("div",{className:"notification-bar",children:c.jsxs("p",{children:["🔥 You are ",v," minutes away from your daily workout goal!"]})}),D>=100&&V>=100&&O>=100&&c.jsx("div",{className:"celebration-bar",children:c.jsx("p",{children:"🎉 Congratulations! You've achieved all your daily wellness goals! 🎉"})}),c.jsxs("div",{className:"affirmation-bar",children:[c.jsx("p",{children:"🌸 Daily Affirmation 🌸"}),c.jsx("h2",{children:k})]}),c.jsxs("div",{className:"quick-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:o.workout.totalMinutes}),c.jsx("span",{className:"stat-label",children:"Minutes Exercised Today"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:o.water.totalOz}),c.jsx("span",{className:"stat-label",children:"Ounces of Water Today"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:o.meditation.totalMinutes}),c.jsx("span",{className:"stat-label",children:"Minutes Meditated Today"})]})]}),c.jsxs("div",{className:"ai-analytics-coming-soon",children:[c.jsxs("h2",{children:["🤖 AI Analytics",c.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),c.jsxs("div",{className:"coming-soon-preview",children:[c.jsxs("div",{className:"preview-content",children:[c.jsxs("div",{className:"ai-features-grid",children:[c.jsxs("div",{className:"ai-feature-card",children:[c.jsx("div",{className:"feature-icon",children:"🧠"}),c.jsx("h3",{children:"Smart Insights"}),c.jsx("p",{children:"AI-powered analysis of your wellness patterns and personalized recommendations"})]}),c.jsxs("div",{className:"ai-feature-card",children:[c.jsx("div",{className:"feature-icon",children:"📈"}),c.jsx("h3",{children:"Predictive Analytics"}),c.jsx("p",{children:"Forecast your progress and identify optimal times for workouts and meditation"})]}),c.jsxs("div",{className:"ai-feature-card",children:[c.jsx("div",{className:"feature-icon",children:"🎯"}),c.jsx("h3",{children:"Goal Optimization"}),c.jsx("p",{children:"AI-suggested goal adjustments based on your lifestyle and progress patterns"})]}),c.jsxs("div",{className:"ai-feature-card",children:[c.jsx("div",{className:"feature-icon",children:"💡"}),c.jsx("h3",{children:"Habit Coaching"}),c.jsx("p",{children:"Intelligent recommendations to build sustainable wellness habits"})]})]}),c.jsxs("div",{className:"coming-soon-mockup",children:[c.jsxs("div",{className:"mockup-header",children:[c.jsx("span",{className:"mockup-title",children:"AI Wellness Coach"}),c.jsxs("div",{className:"mockup-status",children:[c.jsx("span",{className:"status-dot"}),"Analyzing your data..."]})]}),c.jsxs("div",{className:"mockup-content",children:[c.jsxs("div",{className:"ai-message",children:[c.jsx("div",{className:"ai-avatar",children:"🤖"}),c.jsx("div",{className:"message-bubble",children:`"Based on your patterns, I recommend meditating at 7 AM on weekdays for optimal results. You're 40% more consistent during morning sessions."`})]}),c.jsxs("div",{className:"insight-preview",children:[c.jsxs("div",{className:"insight-item",children:[c.jsx("span",{className:"insight-icon",children:"⚡"}),c.jsx("span",{children:"Peak energy time: 9:30 AM"})]}),c.jsxs("div",{className:"insight-item",children:[c.jsx("span",{className:"insight-icon",children:"🧘"}),c.jsx("span",{children:"Best meditation window: 7-8 AM"})]}),c.jsxs("div",{className:"insight-item",children:[c.jsx("span",{className:"insight-icon",children:"💧"}),c.jsx("span",{children:"Hydration reminder: Every 2 hours"})]})]})]})]})]}),c.jsxs("div",{className:"coming-soon-cta",children:[c.jsx("h3",{children:"Be the first to know!"}),c.jsx("p",{children:"AI Analytics will be powered by advanced machine learning to provide personalized wellness insights."}),c.jsxs("div",{className:"tech-stack",children:[c.jsx("span",{className:"tech-badge",children:"AWS SageMaker"}),c.jsx("span",{className:"tech-badge",children:"Machine Learning"}),c.jsx("span",{className:"tech-badge",children:"Predictive Analytics"})]}),c.jsxs("button",{className:"notify-button",disabled:!0,children:[c.jsx("span",{className:"button-icon",children:"🔔"}),"Notify Me When Available"]})]})]})]})," ",E&&c.jsx("div",{className:"trial-modal-overlay",children:c.jsxs("div",{className:"trial-modal",children:[c.jsx("h2",{children:"Your free trial has ended"}),c.jsx("p",{children:"Upgrade to keep enjoying premium features!"}),c.jsx("button",{className:"primary-button",onClick:Yi,children:"Upgrade with Stripe"}),c.jsxs("div",{className:"trial-modal-actions",children:[c.jsx("button",{className:"secondary-button",onClick:()=>S(!1),children:"Remind me later"}),c.jsx("button",{className:"link-button",onClick:()=>{localStorage.setItem("dontRemindTrial","true"),S(!1)},children:"Don't remind me again"})]})]})})]})}function zD(){const{user:t}=tn(),[e,n]=j.useState([]),[r,s]=j.useState({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),[i,o]=j.useState(!1),[l,u]=j.useState(null),[d,f]=j.useState(!0),[p,g]=j.useState(!1),[N,k]=j.useState(""),R=new Date().toISOString().split("T")[0];j.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const v=await Es.fetchWorkoutsByUser(t.uid);n(v.workouts||[])}catch(v){console.error("Error fetching workouts:",v),k("Failed to load workouts")}finally{f(!1)}})()},[t]);const P=O=>{const{name:v,value:y}=O.target;s(w=>({...w,[v]:y}))},x=async O=>{if(O.preventDefault(),console.log("🚀 Workout submit started"),console.log("📊 Form data:",r),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),k("Please log in to save workouts");return}if(!r.title||!r.durationMinutes||!r.date){k("Please fill in all required fields");return}try{g(!0),k("");let v;if(r.date){const T=r.date.split("-"),A=parseInt(T[0]),C=parseInt(T[1]),I=parseInt(T[2]),re=new Date;console.log("🔍 Date parsing debug:"),console.log("  Form input:",r.date),console.log("  Split parts:",T),console.log("  Parsed year:",A),console.log("  Parsed month (human readable):",C),console.log("  Parsed day:",I),console.log("  Month for Date constructor (0-indexed):",C-1),v=new Date(A,C-1,I,re.getHours(),re.getMinutes(),re.getSeconds()),console.log("📅 Created date:",v),console.log("📅 Verify - Year:",v.getFullYear()),console.log("📅 Verify - Month (0-indexed):",v.getMonth()),console.log("📅 Verify - Month (human):",v.getMonth()+1),console.log("📅 Verify - Day:",v.getDate()),console.log("📅 Final formatted:",v.toLocaleDateString())}else v=B.getCurrentLocalTime();const y={title:r.title,type:r.type,durationMinutes:parseInt(r.durationMinutes),date:v,notes:r.notes,caloriesBurned:r.caloriesBurned?parseInt(r.caloriesBurned):0};console.log("📝 Final workout data:",y),console.log("📅 Will be saved as:",B.formatLocalDateTime(y.date));let w;if(i&&l?w=await Es.updateWorkout(t.uid,l,y):w=await Es.logWorkout(t.uid,y),console.log("✅ Workout service result:",w),w.success){console.log("🎉 Workout logged successfully!");const T=await Es.fetchWorkoutsByUser(t.uid);n(T.workouts||[]),s({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),o(!1),u(null),k("")}}catch(v){console.error("💥 Workout logging error:",v),k("Failed to save workout. Please try again.")}finally{g(!1)}},E=O=>{var y,w;o(!0),u(O.id);const v=O.date instanceof Date?O.date.toISOString().split("T")[0]:new Date(O.date).toISOString().split("T")[0];s({date:v,durationMinutes:((y=O.durationMinutes)==null?void 0:y.toString())||"",title:O.title||"",type:O.type||"General",notes:O.notes||"",caloriesBurned:((w=O.caloriesBurned)==null?void 0:w.toString())||""})},S=async O=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this workout?"))try{await Es.deleteWorkout(t.uid,O),n(v=>v.filter(y=>y.id!==O))}catch(v){console.error("Error deleting workout:",v),k("Failed to delete workout")}},D=()=>{o(!1),u(null),s({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""})},V=e.filter(O=>(O.date instanceof Date?O.date.toISOString().split("T")[0]:new Date(O.date).toISOString().split("T")[0])===R);return d?c.jsx("div",{className:"workout-loading",children:"Loading workouts..."}):c.jsxs("div",{className:"workout-page",children:[c.jsxs("div",{className:"workout-card",children:[c.jsx("h1",{className:"workout-title",children:i?"Edit Workout Session":"Log Workout Session"}),N&&c.jsx("div",{className:"error-message",children:N}),c.jsxs("form",{onSubmit:x,className:"workout-form",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Date",c.jsx("input",{type:"date",name:"date",value:r.date,onChange:P,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Workout Title",c.jsx("input",{type:"text",name:"title",value:r.title,onChange:P,className:"form-input",placeholder:"e.g., Morning Run, Gym Session",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Workout Type",c.jsxs("select",{name:"type",value:r.type,onChange:P,className:"form-input",children:[c.jsx("option",{value:"General",children:"General"}),c.jsx("option",{value:"Cardio",children:"Cardio"}),c.jsx("option",{value:"Strength",children:"Strength Training"}),c.jsx("option",{value:"Yoga",children:"Yoga"}),c.jsx("option",{value:"Running",children:"Running"}),c.jsx("option",{value:"Cycling",children:"Cycling"}),c.jsx("option",{value:"Swimming",children:"Swimming"}),c.jsx("option",{value:"Walking",children:"Walking"}),c.jsx("option",{value:"HIIT",children:"HIIT"}),c.jsx("option",{value:"Other",children:"Other"})]})]})}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Duration / Length (Minutes)",c.jsx("input",{type:"number",name:"durationMinutes",value:r.durationMinutes,onChange:P,className:"form-input",min:"1",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Calories Burned (Optional)",c.jsx("input",{type:"number",name:"caloriesBurned",value:r.caloriesBurned,onChange:P,className:"form-input",min:"0",placeholder:"0"})]})})]}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Notes (Optional)",c.jsx("textarea",{name:"notes",value:r.notes,onChange:P,className:"form-input form-textarea",placeholder:"How did it feel? Any achievements?",rows:"3"})]})}),c.jsxs("div",{className:"form-buttons",children:[c.jsx("button",{type:"submit",className:"log-button",disabled:p,children:p?i?"Updating...":"Logging...":i?"Update Workout":"Log Workout"}),i&&c.jsx("button",{type:"button",className:"cancel-button",onClick:D,disabled:p,children:"Cancel"})]})]})]}),c.jsxs("div",{className:"workout-log",children:[c.jsxs("h2",{className:"log-title",children:["Today's Workouts (",V.length,")"]}),V.length===0?c.jsx("p",{className:"no-workouts",children:"No workouts logged for today. Start your fitness journey!"}):c.jsx("ul",{className:"log-list",children:V.map(O=>c.jsxs("li",{className:"log-item",children:[c.jsxs("div",{className:"workout-info",children:[c.jsx("span",{className:"workout-title-display",children:O.title}),c.jsx("span",{className:"workout-type",children:O.type}),c.jsxs("span",{className:"workout-duration",children:[O.durationMinutes," min"]}),O.caloriesBurned>0&&c.jsxs("span",{className:"workout-calories",children:[O.caloriesBurned," cal"]}),O.notes&&c.jsx("span",{className:"workout-notes",children:O.notes})]}),c.jsxs("div",{className:"workout-actions",children:[c.jsx("button",{onClick:()=>E(O),className:"edit-button",disabled:p,children:"Edit"}),c.jsx("button",{onClick:()=>S(O.id),className:"delete-button",disabled:p,children:"Delete"})]})]},O.id))})]})]})}const Tr={silence:{name:"Silence",description:"Pure silence for traditional meditation",icon:"🤫",neurological:"Promotes introspection and self-awareness",frequency:null,baseFreq:null},pink_noise_rain:{name:"Pink Noise Rain",description:"Synthetic pink noise for deep relaxation",icon:"🌧️",neurological:"Pink noise (1/f) - enhances deep sleep and memory consolidation",frequency:"pink_noise",baseFreq:200,waveType:"sawtooth"},alpha_waves:{name:"Ocean Waves",description:"Realistic ocean waves with alpha wave entrainment",icon:"🌊",neurological:"Ocean rhythms (0.1 Hz) naturally entrain alpha waves (8-12 Hz) for relaxation",frequency:"ocean_waves",waveFrequency:.1,baseFreq:60,highFreq:200,alphaCarrier:200,alphaBeat:10,waveType:"sine"},earth_frequency:{name:"Earth Resonance",description:"Schumann resonance for grounding",icon:"🌲",neurological:"Earth frequency (7.83 Hz) - natural grounding and balance",frequency:"earth_binaural",carrierFreq:136.1,waveType:"sine"},white_noise:{name:"White Noise",description:"Full spectrum noise for focus",icon:"📻",neurological:"White noise - masks distractions, improves concentration",frequency:"white_noise",baseFreq:440,waveType:"square"},gamma_focus:{name:"Gamma Focus",description:"High-frequency binaural beats for peak concentration",icon:"🎧",neurological:"Gamma waves (40 Hz) - heightened awareness and cognitive performance",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},theta_deep:{name:"Theta Deep State",description:"Deep theta waves for profound meditation",icon:"🌙",neurological:"Theta waves (6 Hz) - deep meditation, creativity, and memory consolidation",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},healing_bowls:{name:"Healing Harmonics",description:"432 Hz healing frequency with natural harmonics",icon:"🎵",neurological:'432 Hz "healing frequency" with harmonic overtones for cellular resonance',frequency:"harmonic",baseFreq:432,harmonics:[432,648,864,1296],waveType:"triangle",premium:!0}},Fl={mindfulness:{name:"Mindfulness",description:"Present-moment awareness practice",duration:[5,10,15,20],icon:"🧘‍♀️"},breathing:{name:"Breathing",description:"Focused breathwork exercises",duration:[3,5,10],icon:"💨"},body_scan:{name:"Body Scan",description:"Progressive muscle relaxation",duration:[10,15,20],icon:"🫁"},loving_kindness:{name:"Loving Kindness",description:"Compassion and heart-opening meditation",duration:[5,10,15],icon:"💖"},flow_state:{name:"Flow State",description:"Neurologically optimized for peak performance",duration:[5,7,10],icon:"🎯",premium:!0}};function aI({children:t,fallback:e,showUpgrade:n=!0,feature:r="this feature",className:s=""}){const{isPremium:i,upgradeToPremium:o}=tn();return i?t:e||c.jsx("div",{className:`premium-gate ${s}`,children:c.jsxs("div",{className:"premium-lock",children:[c.jsx("div",{className:"lock-icon",children:"🔒"}),c.jsx("h3",{children:"Premium Feature"}),c.jsxs("p",{children:["Upgrade to unlock ",r]}),n&&c.jsx("button",{onClick:Yi,className:"unlock-button",children:"Upgrade to Premium - $4.99/month"})]})})}function BD(){const{user:t,isPremium:e}=tn(),[n,r]=j.useState([]),[s,i]=j.useState({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),[o,l]=j.useState(!1),[u,d]=j.useState(null),[f,p]=j.useState(!0),[g,N]=j.useState(!1),[k,R]=j.useState(""),[P,x]=j.useState(!1),[E,S]=j.useState(0),[D,V]=j.useState(5),[O,v]=j.useState(!1),[y,w]=j.useState(!1),[T,A]=j.useState("silence"),[C,I]=j.useState(""),[re,qe]=j.useState(null),[Z,Ie]=j.useState(null),[q,X]=j.useState(null),[se,Se]=j.useState(null),ge=j.useRef(null);B.formatLocalDate(new Date),j.useEffect(()=>{const b=async()=>{if(t!=null&&t.uid)try{p(!0),console.log("🌍 Fetching meditations for timezone:",B.getUserTimezone());const $=((await Ts.fetchMeditationsByUser(t.uid)).meditations||[]).map(H=>({...H,localDate:B.formatLocalDate(H.date),localDateTime:B.formatLocalDateTime(H.date),relativeTime:B.getRelativeTime(H.date),isToday:B.isToday(H.date)}));r($),console.log("🧘 Loaded meditations with timezone data:",$.length)}catch(U){console.error("Error fetching meditations:",U),R("Failed to load meditation sessions")}finally{p(!1)}};t!=null&&t.uid&&b()},[t]),j.useEffect(()=>(P&&T!=="silence"&&nn(),()=>{if(q)try{Array.isArray(q)?q.forEach(b=>{b.stop&&b.stop()}):q.stop&&q.stop()}catch(b){console.log("Audio cleanup error:",b)}}),[P,T]),j.useEffect(()=>(P&&!O?ge.current=setInterval(()=>{S(b=>{const U=b+1;return U>=180&&!y&&(w(!0),fo()),U})},1e3):clearInterval(ge.current),()=>clearInterval(ge.current)),[P,O,y]),j.useEffect(()=>{P&&E>=D*60&&(console.log("⏰ Timer completed! Auto-stopping session..."),console.log("📊 Final session stats:"),console.log("  - Duration:",Math.floor(E/60),"minutes"),console.log("  - Target:",D,"minutes"),console.log("  - Soundscape:",T),console.log("  - Deep state achieved:",y),console.log("  - Start time:",B.formatLocalDateTime(re)),mo(),el())},[P,E,D,T,y,re]);const Ee=n.filter(b=>b.isToday||B.isToday(b.date));console.log("📋 Today's meditations:",Ee.length);const nn=()=>{try{const b=new(window.AudioContext||window.webkitAudioContext);Ie(b);const U=b.createGain();U.connect(b.destination),U.gain.value=.1,Se(U);const $=Tr[T];if(!($!=null&&$.frequency)){console.log("🔇 Silence selected");return}switch($.frequency){case"gamma":case"theta":rn(b,U,$);break;case"alpha":sn(b,U,$);break;case"ocean_waves":ho(b,U,$);break;case"earth_binaural":on(b,U,$);break;case"harmonic":Gu(b,U,$.harmonics||[$.baseFreq]);break;case"pink_noise":Qs(b,U);break;case"white_noise":Ys(b,U);break;case"single_tone":case"natural":qu(b,U,$.baseFreq,$.waveType||"sine");break;default:console.log("🔇 Unknown frequency type:",$.frequency)}}catch(b){console.error("Audio setup failed:",b)}},rn=(b,U,$)=>{const H=b.createOscillator();H.frequency.setValueAtTime($.leftEar,b.currentTime),H.type=$.waveType||"sine";const ee=b.createOscillator();ee.frequency.setValueAtTime($.rightEar,b.currentTime),ee.type=$.waveType||"sine";const ae=b.createStereoPanner();ae.pan.value=-1;const ue=b.createStereoPanner();ue.pan.value=1,H.connect(ae),ae.connect(U),ee.connect(ue),ue.connect(U),H.start(),ee.start(),X([H,ee]),console.log(`🎧 Binaural beats: ${$.leftEar}Hz (L) / ${$.rightEar}Hz (R) = ${$.binauralBeat}Hz beat`)},sn=(b,U,$)=>{const ee=$.baseFreq,ae=b.createOscillator();ae.frequency.setValueAtTime(200,b.currentTime),ae.type=$.waveType||"sine";const ue=b.createOscillator();ue.frequency.setValueAtTime(200+ee,b.currentTime),ue.type=$.waveType||"sine";const ct=b.createStereoPanner();ct.pan.value=-1;const Pe=b.createStereoPanner();Pe.pan.value=1,ae.connect(ct),ct.connect(U),ue.connect(Pe),Pe.connect(U),ae.start(),ue.start(),X([ae,ue]),console.log(`🌊 Alpha binaural: 200Hz (L) / ${200+ee}Hz (R) = ${ee}Hz beat`)},on=(b,U,$)=>{const H=$.carrierFreq||136.1,ee=7.83,ae=b.createOscillator();ae.frequency.setValueAtTime(H,b.currentTime),ae.type=$.waveType||"sine";const ue=b.createOscillator();ue.frequency.setValueAtTime(H+ee,b.currentTime),ue.type=$.waveType||"sine";const ct=b.createStereoPanner();ct.pan.value=-1;const Pe=b.createStereoPanner();Pe.pan.value=1,ae.connect(ct),ct.connect(U),ue.connect(Pe),Pe.connect(U),ae.start(),ue.start(),X([ae,ue]),console.log(`🌲 Earth binaural: ${H}Hz (L) / ${H+ee}Hz (R) = ${ee}Hz Schumann beat`)},qu=(b,U,$,H="sine")=>{const ee=b.createOscillator();ee.frequency.setValueAtTime($,b.currentTime),ee.type=H,ee.connect(U),ee.start(),X(ee),console.log(`🎵 Single tone: ${$}Hz (${H})`)},Gu=(b,U,$)=>{const H=$.map(ee=>{const ae=b.createOscillator();ae.frequency.setValueAtTime(ee,b.currentTime),ae.type="triangle";const ue=b.createGain();return ue.gain.value=.3/$.length,ae.connect(ue),ue.connect(U),ae.start(),ae});X(H),console.log(`🎼 Harmonics: ${$.join(", ")}Hz`)},Qs=(b,U)=>{const $=b.sampleRate*2,H=b.createBuffer(1,$,b.sampleRate),ee=H.getChannelData(0);for(let ue=0;ue<$;ue++){let ct=0;for(let Pe=0;Pe<5;Pe++)ct+=(Math.random()*2-1)/Math.pow(2,Pe);ee[ue]=ct*.1}const ae=b.createBufferSource();ae.buffer=H,ae.loop=!0,ae.connect(U),ae.start(),X(ae),console.log("🌧️ Pink noise generated")},Ys=(b,U)=>{const $=b.sampleRate*2,H=b.createBuffer(1,$,b.sampleRate),ee=H.getChannelData(0);for(let ue=0;ue<$;ue++)ee[ue]=(Math.random()*2-1)*.1;const ae=b.createBufferSource();ae.buffer=H,ae.loop=!0,ae.connect(U),ae.start(),X(ae),console.log("📻 White noise generated")},ho=(b,U,$)=>{const H=[],ee=b.createOscillator();ee.frequency.setValueAtTime(20,b.currentTime),ee.type="sine";const ae=b.createGain();ae.gain.value=.4;const ue=b.createOscillator();ue.frequency.setValueAtTime(396,b.currentTime),ue.type="sine";const ct=b.createGain();ct.gain.value=.05;const Pe=b.createOscillator();Pe.frequency.setValueAtTime(.15,b.currentTime),Pe.type="sine";const Js=b.createGain();Js.gain.value=.3,Pe.connect(Js),Js.connect(ae.gain),ee.connect(ae),ae.connect(U),ue.connect(ct),ct.connect(U);const yo=b.createBuffer(1,b.sampleRate*8,b.sampleRate),Zs=yo.getChannelData(0);let vo=0;for(let Ve=0;Ve<Zs.length;Ve++){const et=Math.random()*2-1;vo=(vo+et*.02)*.99;const tt=Math.sin(Ve*.001)*.3+.7;Zs[Ve]=vo*tt*.5}const us=b.createBufferSource();us.buffer=yo,us.loop=!0;const Un=b.createOscillator();Un.frequency.setValueAtTime(432,b.currentTime),Un.type="triangle";const ds=b.createGain();ds.gain.value=.08;const hr=b.createBiquadFilter();hr.type="bandpass",hr.frequency.setValueAtTime(300,b.currentTime),hr.Q.setValueAtTime(.8,b.currentTime);const wn=b.createGain();wn.gain.value=.3;const zn=b.createOscillator();zn.frequency.setValueAtTime(.13,b.currentTime),zn.type="triangle";const fr=b.createGain();fr.gain.value=.25,zn.connect(fr),fr.connect(wn.gain),fr.connect(ds.gain),us.connect(hr),hr.connect(wn),wn.connect(U),Un.connect(ds),ds.connect(U);const En=b.createBuffer(1,b.sampleRate*6,b.sampleRate),_o=En.getChannelData(0);for(let Ve=0;Ve<_o.length;Ve++){let et=0;for(let ut=0;ut<3;ut++)et+=(Math.random()*2-1)*Math.pow(.5,ut);const tt=Math.random()>.98?(Math.random()*2-1)*.3:0;_o[Ve]=(et+tt)*.15}const Tn=b.createBufferSource();Tn.buffer=En,Tn.loop=!0;const mr=b.createOscillator();mr.frequency.setValueAtTime(528,b.currentTime),mr.type="sine";const In=b.createGain();In.gain.value=.06;const hs=b.createBiquadFilter();hs.type="highpass",hs.frequency.setValueAtTime(1500,b.currentTime);const ze=b.createGain();ze.gain.value=.12;const pr=b.createOscillator();pr.frequency.setValueAtTime(.5,b.currentTime),pr.type="sine";const Sn=b.createGain();if(Sn.gain.value=.04,pr.connect(Sn),Sn.connect(ze.gain),Sn.connect(In.gain),Tn.connect(hs),hs.connect(ze),ze.connect(U),mr.connect(In),In.connect(U),$.alphaCarrier&&$.alphaBeat){const Ve=b.createOscillator();Ve.frequency.setValueAtTime($.alphaCarrier,b.currentTime),Ve.type="sine";const et=b.createOscillator();et.frequency.setValueAtTime($.alphaCarrier+$.alphaBeat,b.currentTime),et.type="sine";const tt=b.createGain();tt.gain.value=.03;const ut=b.createStereoPanner();ut.pan.value=-1;const ti=b.createStereoPanner();ti.pan.value=1,Ve.connect(ut),ut.connect(tt),et.connect(ti),ti.connect(tt),tt.connect(U),H.push(Ve,et),Ve.start(),et.start()}const gr=b.createBuffer(1,b.sampleRate*10,b.sampleRate),nl=gr.getChannelData(0);for(let Ve=0;Ve<nl.length;Ve++){let et=0;for(let tt=0;tt<4;tt++)et+=(Math.random()*2-1)/Math.pow(2,tt*.7);nl[Ve]=et*.2}const fs=b.createBufferSource();fs.buffer=gr,fs.loop=!0;const qt=b.createBiquadFilter();qt.type="bandpass",qt.frequency.setValueAtTime(150,b.currentTime),qt.Q.setValueAtTime(.4,b.currentTime);const ei=b.createGain();ei.gain.value=.15;const ms=b.createOscillator();ms.frequency.setValueAtTime(.07,b.currentTime),ms.type="sine";const yr=b.createGain();yr.gain.value=.1,ms.connect(yr),yr.connect(ei.gain),fs.connect(qt),qt.connect(ei),ei.connect(U),ee.start(),ue.start(),Pe.start(),us.start(),Un.start(),zn.start(),Tn.start(),mr.start(),pr.start(),fs.start(),ms.start(),H.push(ee,ue,Pe,us,Un,zn,Tn,mr,pr,fs,ms),X(H),console.log("🌊✨ Healing Ocean Waves: 396Hz (Liberation) + 432Hz (Earth) + 528Hz (Love) + Alpha binaural beats + Realistic ocean sounds")},fo=()=>{console.log("🌟 Deep state achieved at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Deep State Achieved! 🧘‍♀️",{body:`You've entered a deep meditative state at ${B.formatLocalTime(new Date)}. Well done!`,icon:"/meditation-icon.png"})},mo=()=>{console.log("🎉 Session completed at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Meditation Complete! 🎉",{body:`Great job! You completed your ${D}-minute meditation session.`,icon:"/meditation-icon.png"});try{const b=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAcugtTxzD2sLYPs7lkgCBl5gQEDgVs+l4G6tGEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAc=");b.volume=.3,b.play().catch(()=>{})}catch{}},po=(b,U,$)=>{const H=B.getCurrentLocalTime();console.log("🌍 Starting meditation session in timezone:",B.getUserTimezone()),console.log("🧘 Session start time:",B.formatLocalDateTime(H)),V(b),A($),S(0),x(!0),v(!1),w(!1),qe(H),"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},Za=()=>{const b=B.getCurrentLocalTime();console.log("⏸️ Session paused at:",B.formatLocalDateTime(b)),v(!O),q&&Z&&(O?Z.resume():Z.suspend())},el=async()=>{const b=B.getCurrentLocalTime();if(console.log("⏹️ Session ended at:",B.formatLocalDateTime(b)),console.log("📊 Session duration:",Math.floor(E/60),"minutes"),console.log("🎯 Target duration:",D,"minutes"),console.log("✅ Session completed?",E>=D*60),q){if(Array.isArray(q))q.forEach(U=>{try{U.stop?U.stop():U.disconnect&&U.disconnect()}catch($){console.log("Oscillator cleanup:",$)}});else try{q.stop?q.stop():q.disconnect&&q.disconnect()}catch(U){console.log("Oscillator cleanup:",U)}X(null)}if(Z){try{await Z.close()}catch(U){console.log("AudioContext cleanup:",U)}Ie(null)}if(x(!1),v(!1),E>=60){console.log("💾 Auto-logging session (duration >= 1 minute)"),console.log("🔍 Session time check:",E,"seconds"),console.log("🔍 Firebase user:",t==null?void 0:t.uid),console.log("🔍 Session start time:",re);try{await Hu(),console.log("✅ Auto-log completed successfully")}catch(U){console.error("❌ Auto-log failed:",U)}}else console.log("⚠️ Session too short, not logging (< 1 minute)");console.log("🔇 Audio stopped and session ended successfully")},Hu=async()=>{if(!(!(t!=null&&t.uid)||!re))try{console.log("📝 Auto-logging session with timezone data"),console.log("🧘 Session start time:",B.formatLocalDateTime(re)),console.log("⏰ Session duration:",Math.floor(E/60),"minutes");const b={date:re,durationMinutes:Math.floor(E/60),type:"mindfulness",soundscape:T,completed:E>=D*60,deepStateAchieved:y,moodBefore:C,targetDuration:D,sessionStartTime:re,sessionEndTime:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()};console.log("📊 Session data being saved:",b);const U=await Ts.logMeditation(t.uid,b);console.log("✅ API Response:",U);const $={...U.meditation,localDate:B.formatLocalDate(U.meditation.date),localDateTime:B.formatLocalDateTime(U.meditation.date),relativeTime:B.getRelativeTime(U.meditation.date),isToday:B.isToday(U.meditation.date)};console.log("🔄 Adding meditation to UI:",$),console.log("📅 Is today?",$.isToday),console.log("📅 Local date:",$.localDate),r(H=>{const ee=[$,...H];return console.log("📋 Updated meditations list:",ee.length,"total"),ee}),console.log("✅ Session auto-logged and added to UI successfully")}catch(b){console.error("💥 Error auto-logging session:",b),console.error("💥 Error details:",b.message)}},_n=b=>{const{name:U,value:$}=b.target;i(H=>({...H,[U]:$}))},go=async b=>{if(b.preventDefault(),!!(t!=null&&t.uid)){N(!0),R("");try{console.log("🌍 Submitting meditation in timezone:",B.getUserTimezone());const U=s.date?B.toLocalTimezone(s.date):B.getCurrentLocalTime(),$={...s,date:U,durationMinutes:parseInt(s.durationMinutes),userTimezone:B.getUserTimezone()};if(console.log("📝 Meditation submit data:",$),console.log("📅 Local meditation time:",B.formatLocalDateTime(U)),o)await Ts.updateMeditation(t.uid,u,$),r(H=>H.map(ee=>ee.id===u?{...ee,...$,localDate:B.formatLocalDate(U),localDateTime:B.formatLocalDateTime(U),relativeTime:B.getRelativeTime(U),isToday:B.isToday(U)}:ee)),l(!1),d(null),console.log("✅ Meditation updated successfully");else{const H=await Ts.logMeditation(t.uid,$),ee={...H.meditation,localDate:B.formatLocalDate(H.meditation.date),localDateTime:B.formatLocalDateTime(H.meditation.date),relativeTime:B.getRelativeTime(H.meditation.date),isToday:B.isToday(H.meditation.date)};r(ae=>[ee,...ae]),console.log("✅ Meditation logged successfully")}i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})}catch(U){console.error("Error saving meditation:",U),R(o?"Failed to update meditation":"Failed to log meditation")}finally{N(!1)}}},tl=b=>{var U;console.log("✏️ Editing meditation from:",B.formatLocalDateTime(b.date)),i({date:B.formatLocalDate(b.date),durationMinutes:((U=b.durationMinutes)==null?void 0:U.toString())||"",type:b.type||"mindfulness",soundscape:b.soundscape||"silence",moodBefore:b.moodBefore||"",moodAfter:b.moodAfter||"",notes:b.notes||""}),l(!0),d(b.id)},Ku=async b=>{if(!(t!=null&&t.uid))return;const U=n.find(H=>H.id===b),$=`Are you sure you want to delete the meditation session from ${(U==null?void 0:U.localDateTime)||"unknown time"}?`;if(window.confirm($))try{await Ts.deleteMeditation(t.uid,b),r(H=>H.filter(ee=>ee.id!==b)),console.log("🗑️ Meditation deleted successfully")}catch(H){console.error("Error deleting meditation:",H),R("Failed to delete meditation")}},Xs=b=>{const U=Math.floor(b/60),$=b%60;return`${U}:${$.toString().padStart(2,"0")}`};return f?c.jsxs("div",{className:"meditation-loading",children:[c.jsx("p",{children:"Loading meditations..."}),c.jsxs("small",{children:["Timezone: ",B.getUserTimezone()]})]}):c.jsxs("div",{className:"meditation-page",children:[P&&c.jsxs("div",{className:"session-interface",children:[c.jsxs("div",{className:"session-header",children:[c.jsx("h2",{children:"🧘‍♀️ Meditation Session"}),c.jsxs("div",{className:"session-info",children:[c.jsxs("div",{className:"session-soundscape",children:[Tr[T].icon," ",Tr[T].name]}),c.jsxs("div",{className:"session-time-info",children:["Started: ",re?B.formatLocalTime(re):"Now",c.jsx("br",{}),c.jsx("small",{children:B.getUserTimezone()})]})]})]}),c.jsxs("div",{className:"session-timer",children:[c.jsxs("div",{className:"time-display",children:[c.jsx("span",{className:"current-time",children:Xs(E)}),c.jsxs("span",{className:"target-time",children:["/ ",Xs(D*60)]})]}),c.jsx("div",{className:"progress-ring",children:c.jsx("div",{className:"progress-fill",style:{background:`conic-gradient(#4CAF50 ${E/(D*60)*360}deg, #eee 0deg)`}})})]}),c.jsxs("div",{className:"session-status",children:[y&&c.jsxs("div",{className:"deep-state-indicator",children:["✨ Deep State Achieved at ",B.formatLocalTime(new Date)," ✨"]}),c.jsx("div",{className:"neurological-info",children:c.jsx("p",{children:Tr[T].neurological})})]}),c.jsxs("div",{className:"session-controls",children:[c.jsxs("button",{onClick:Za,className:"pause-btn",children:[O?"▶️":"⏸️"," ",O?"Resume":"Pause"]}),c.jsx("button",{onClick:el,className:"stop-btn",children:"⏹️ End Session"})]})]}),!P&&c.jsxs("div",{className:"quick-start",children:[c.jsx("h1",{className:"meditation-title",children:"🧘‍♀️ Meditation Studio"}),c.jsxs("p",{className:"subtitle",children:["Neurologically optimized for deep meditation states",c.jsx("br",{})]}),c.jsx("div",{className:"quick-start-grid",children:Object.entries(Fl).map(([b,U])=>c.jsxs("div",{className:`meditation-type ${U.premium?"premium":""}`,children:[c.jsxs("div",{className:"type-header",children:[c.jsx("span",{className:"type-icon",children:U.icon}),c.jsx("h3",{children:U.name}),U.premium&&!e&&c.jsx("span",{className:"premium-badge",children:"PRO"})]}),c.jsx("p",{className:"type-description",children:U.description}),c.jsx("div",{className:"duration-options",children:U.duration.map($=>c.jsxs("button",{onClick:()=>{C||I(prompt("How are you feeling right now? (😊😔😴😤😌🤔🎉😰)")||"😐"),po($,b,T)},className:"duration-btn",disabled:U.premium&&!e,children:[$,"min"]},$))})]},b))}),c.jsxs("div",{className:"soundscape-section",children:[c.jsx("h3",{children:"🎵 Choose Your Soundscape"}),c.jsx("div",{className:"soundscape-grid",children:Object.entries(Tr).map(([b,U])=>c.jsxs("div",{className:`soundscape-option ${U.premium?"premium":""} ${T===b?"selected":""} ${U.premium&&!e?"locked":""}`,onClick:()=>{!U.premium||e?A(b):alert("This soundscape requires Clarity Premium. Upgrade to access premium features!")},children:[c.jsxs("div",{className:"soundscape-header",children:[c.jsx("span",{className:"soundscape-icon",children:U.icon}),U.premium&&!e&&c.jsx("span",{className:"premium-badge",children:"PRO"})]}),c.jsx("h4",{children:U.name}),c.jsx("p",{className:"soundscape-description",children:U.description}),c.jsx("small",{className:"neurological-note",children:U.neurological}),U.premium&&!e&&c.jsx("div",{className:"premium-overlay",children:c.jsx("span",{className:"lock-icon",children:"🔒"})})]},b))})]})]}),!P&&c.jsxs("div",{className:"meditation-card",children:[c.jsx("h2",{className:"form-title",children:o?"Edit Meditation Session":"Manually Log Session"}),k&&c.jsx("div",{className:"error-message",children:k}),c.jsxs("form",{onSubmit:go,className:"meditation-form",children:[c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Date (",B.getUserTimezone(),")",c.jsx("input",{type:"date",name:"date",value:s.date,onChange:_n,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Duration (Minutes)",c.jsx("input",{type:"number",name:"durationMinutes",value:s.durationMinutes,onChange:_n,className:"form-input",min:"1",required:!0})]})})]}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Meditation Type",c.jsx("select",{name:"type",value:s.type,onChange:_n,className:"form-input",children:Object.entries(Fl).map(([b,U])=>c.jsx("option",{value:b,children:U.name},b))})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Soundscape Used",c.jsx("select",{name:"soundscape",value:s.soundscape,onChange:_n,className:"form-input",children:Object.entries(Tr).map(([b,U])=>c.jsx("option",{value:b,children:U.name},b))})]})})]}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Mood Before",c.jsxs("select",{name:"moodBefore",value:s.moodBefore,onChange:_n,className:"form-input",children:[c.jsx("option",{value:"",children:"Select mood..."}),c.jsx("option",{value:"😊",children:"😊 Happy"}),c.jsx("option",{value:"😔",children:"😔 Sad"}),c.jsx("option",{value:"😴",children:"😴 Tired"}),c.jsx("option",{value:"😤",children:"😤 Frustrated"}),c.jsx("option",{value:"😌",children:"😌 Peaceful"}),c.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),c.jsx("option",{value:"🎉",children:"🎉 Excited"}),c.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Mood After",c.jsxs("select",{name:"moodAfter",value:s.moodAfter,onChange:_n,className:"form-input",children:[c.jsx("option",{value:"",children:"Select mood..."}),c.jsx("option",{value:"😊",children:"😊 Happy"}),c.jsx("option",{value:"😔",children:"😔 Sad"}),c.jsx("option",{value:"😴",children:"😴 Tired"}),c.jsx("option",{value:"😤",children:"😤 Frustrated"}),c.jsx("option",{value:"😌",children:"😌 Peaceful"}),c.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),c.jsx("option",{value:"🎉",children:"🎉 Excited"}),c.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})})]}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Notes (Optional)",c.jsx("textarea",{name:"notes",value:s.notes,onChange:_n,className:"form-input form-textarea",placeholder:"How did the session feel? Any insights?",rows:"3"})]})}),c.jsxs("div",{className:"form-buttons",children:[c.jsx("button",{type:"submit",className:"log-button",disabled:g,children:g?o?"Updating...":"Logging...":o?"Update Session":"Log Session"}),o&&c.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{l(!1),d(null),i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})},disabled:g,children:"Cancel"})]})]})]}),!P&&c.jsxs("div",{className:"meditation-log",children:[c.jsxs("h2",{className:"log-title",children:["Today's Sessions (",Ee.length,")",c.jsx("br",{}),c.jsxs("small",{children:[B.formatLocalDate(new Date)," - ",B.getUserTimezone()]})]}),Ee.length===0?c.jsxs("p",{className:"no-sessions",children:["No meditation sessions today. Start your mindfulness journey!",c.jsx("br",{}),c.jsxs("small",{children:["Local time: ",B.formatLocalDateTime(new Date)]})]}):c.jsx("ul",{className:"log-list",children:Ee.map(b=>{var U,$,H,ee;return c.jsxs("li",{className:"log-item",children:[c.jsxs("div",{className:"meditation-info",children:[c.jsxs("div",{className:"meditation-header",children:[c.jsxs("span",{className:"meditation-type",children:[(U=Fl[b.type])==null?void 0:U.icon," ",(($=Fl[b.type])==null?void 0:$.name)||b.type]}),c.jsxs("span",{className:"meditation-time",children:[b.localDateTime,c.jsxs("small",{children:[" (",b.relativeTime,")"]})]})]}),c.jsxs("div",{className:"meditation-details",children:[c.jsxs("span",{className:"meditation-duration",children:[b.durationMinutes," min"]}),c.jsxs("span",{className:"meditation-soundscape",children:[(H=Tr[b.soundscape])==null?void 0:H.icon," ",(ee=Tr[b.soundscape])==null?void 0:ee.name]}),b.deepStateAchieved&&c.jsx("span",{className:"deep-state-badge",children:"✨ Deep State"}),b.moodBefore&&b.moodAfter&&c.jsxs("span",{className:"mood-change",children:[b.moodBefore," → ",b.moodAfter]})]}),b.notes&&c.jsx("div",{className:"meditation-notes",children:b.notes})]}),c.jsxs("div",{className:"meditation-actions",children:[c.jsx("button",{onClick:()=>tl(b),className:"edit-button",disabled:g,children:"Edit"}),c.jsx("button",{onClick:()=>Ku(b.id),className:"delete-button",disabled:g,children:"Delete"})]})]},b.id)})})]}),!P&&c.jsxs("div",{className:"recommended-videos",children:[c.jsx("h2",{className:"recommended-title",children:"🎥 Guided Meditation Videos"}),c.jsxs("p",{className:"timezone-note",children:["Perfect for any time of day in ",B.getUserTimezone()]}),c.jsxs("div",{className:"video-tiles",children:[c.jsxs("a",{href:"https://www.youtube.com/watch?v=VpHz8Mb13_Y",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[c.jsx("div",{className:"video-thumbnail",children:"🌸"}),c.jsx("p",{className:"video-title",children:"Relaxation and Positivity"})]}),c.jsxs("a",{href:"https://www.youtube.com/watch?v=CqnWMPuyT0g",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[c.jsx("div",{className:"video-thumbnail",children:"💖"}),c.jsx("p",{className:"video-title",children:"Self Love"})]}),c.jsxs("a",{href:"https://www.youtube.com/watch?v=056qll-07ak",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[c.jsx("div",{className:"video-thumbnail",children:"🧠"}),c.jsx("p",{className:"video-title",children:"Stop Thinking"})]})]})]}),c.jsx(aI,{feature:"exclusive meditation experiences",children:c.jsxs("div",{className:"premium-meditation-features",children:[c.jsx("h3",{children:"🧘‍♀️ Premium Meditation Experience"}),c.jsx("p",{children:"Unlock advanced features designed by neuroscientists:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"🎵 Premium binaural soundscapes"}),c.jsx("li",{children:"📊 Advanced session analytics"}),c.jsx("li",{children:"🧠 Personalized meditation recommendations"}),c.jsx("li",{children:"⏰ Smart session reminders based on your timezone"}),c.jsx("li",{children:"📈 Mood tracking and insights"})]}),c.jsx("button",{className:"primary-button",onClick:Yi,style:{marginTop:"1rem"},children:"Upgrade with Stripe"})]})})]})}function $D(){const{user:t}=tn(),[e,n]=j.useState([]),[r,s]=j.useState({date:"",amount:"",type:"water",notes:""}),[i,o]=j.useState(!1),[l,u]=j.useState(null),[d,f]=j.useState(!0),[p,g]=j.useState(!1),[N,k]=j.useState(""),[R,P]=j.useState(0),[x,E]=j.useState(64),S=new Date().toISOString().split("T")[0];j.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const I=await Ht.fetchWaterIntakeByUser(t.uid);n(I.waterIntakes||[]);const re=await Ht.getTodayWaterIntake(t.uid);P(re.totalOz||0),E(64)}catch(I){console.error("Error fetching water data:",I),k("Failed to load water intake data")}finally{f(!1)}})()},[t]);const D=C=>{const{name:I,value:re}=C.target;s(qe=>({...qe,[I]:re}))},V=async C=>{if(C.preventDefault(),console.log("💧 Water submit started"),console.log("📊 Form data:",r),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),k("Please log in to save water intake");return}if(!r.amount||!r.date){k("Please fill in all required fields");return}try{g(!0),k("");let I;if(r.date){const Z=r.date.split("-"),Ie=parseInt(Z[0]),q=parseInt(Z[1]),X=parseInt(Z[2]),se=new Date;console.log("🔍 Water date parsing debug:"),console.log("  Form input:",r.date),console.log("  Split parts:",Z),console.log("  Parsed year:",Ie),console.log("  Parsed month (human readable):",q),console.log("  Parsed day:",X),console.log("  Month for Date constructor (0-indexed):",q-1),I=new Date(Ie,q-1,X,se.getHours(),se.getMinutes(),se.getSeconds()),console.log("📅 Created water date:",I),console.log("📅 Verify - Year:",I.getFullYear()),console.log("📅 Verify - Month (0-indexed):",I.getMonth()),console.log("📅 Verify - Month (human):",I.getMonth()+1),console.log("📅 Verify - Day:",I.getDate()),console.log("📅 Final formatted:",I.toLocaleDateString())}else I=new Date;const re={date:I,amount:parseFloat(r.amount),type:r.type,notes:r.notes};if(console.log("💧 Final water data:",re),console.log("📅 Will be saved as:",re.date.toLocaleDateString()),i)await Ht.updateWaterIntake(t.uid,l,re),n(Z=>Z.map(Ie=>Ie.id===l?{...Ie,...re}:Ie)),o(!1),u(null);else{const Z=await Ht.logWaterIntake(t.uid,re);n(Ie=>[Z.waterIntake,...Ie])}const qe=await Ht.getTodayWaterIntake(t.uid);P(qe.totalOz||0),s({date:"",amount:"",type:"water",notes:""}),console.log("✅ Water intake logged successfully!")}catch(I){console.error("💥 Water logging error:",I),k(i?"Failed to update water intake":"Failed to log water intake")}finally{g(!1)}},O=C=>{var re;o(!0),u(C.id);const I=C.date instanceof Date?C.date.toISOString().split("T")[0]:new Date(C.date).toISOString().split("T")[0];s({date:I,amount:((re=C.amount)==null?void 0:re.toString())||"",type:C.type||"water",notes:C.notes||""})},v=async C=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this water intake?"))try{await Ht.deleteWaterIntake(t.uid,C),n(re=>re.filter(qe=>qe.id!==C));const I=await Ht.getTodayWaterIntake(t.uid);P(I.totalOz||0)}catch(I){console.error("Error deleting water intake:",I),k("Failed to delete water intake")}},y=()=>{o(!1),u(null),s({date:"",amount:"",type:"water",notes:""})},w=async C=>{if(t!=null&&t.uid)try{g(!0);const I=new Date,re=new Date(I.getFullYear(),I.getMonth(),I.getDate(),I.getHours(),I.getMinutes(),I.getSeconds());console.log("💧 Quick add date:",re),console.log("📅 Quick add formatted:",re.toLocaleDateString()),await Ht.logWaterIntake(t.uid,{date:re,amount:C,type:"water",notes:""});const qe=await Ht.fetchWaterIntakeByUser(t.uid);n(qe.waterIntakes||[]);const Z=await Ht.getTodayWaterIntake(t.uid);P(Z.totalOz||0),console.log("✅ Quick add water successful!")}catch(I){console.error("💥 Error quick adding water:",I),k("Failed to log water intake")}finally{g(!1)}},T=e.filter(C=>{const I=C.date instanceof Date?C.date.toISOString().split("T")[0]:new Date(C.date).toISOString().split("T")[0];return console.log("🔍 Comparing dates:",{waterDate:I,today:S,match:I===S}),I===S}),A=Math.min(R/x*100,100);return d?c.jsx("div",{className:"water-loading",children:"Loading water data..."}):c.jsxs("div",{className:"water-page",children:[c.jsxs("div",{className:"water-progress",children:[c.jsx("h2",{children:"Daily Hydration Progress"}),c.jsx("div",{className:"progress-info",children:c.jsx("div",{className:"water-progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${A}%`}})})}),R>=x&&c.jsx("div",{className:"goal-achieved",children:"🎉 Daily goal achieved! Great job! 🎉"})]}),c.jsxs("div",{className:"quick-add-section",children:[c.jsx("h3",{children:"Quick Add"}),c.jsxs("div",{className:"quick-add-buttons",children:[c.jsxs("button",{onClick:()=>w(8),className:"quick-add-btn",disabled:p,children:["8 oz",c.jsx("br",{}),c.jsx("small",{children:"Glass"})]}),c.jsxs("button",{onClick:()=>w(16),className:"quick-add-btn",disabled:p,children:["16 oz",c.jsx("br",{}),c.jsx("small",{children:"Bottle"})]}),c.jsxs("button",{onClick:()=>w(20),className:"quick-add-btn",disabled:p,children:["20 oz",c.jsx("br",{}),c.jsx("small",{children:"Large Bottle"})]}),c.jsxs("button",{onClick:()=>w(32),className:"quick-add-btn",disabled:p,children:["32 oz",c.jsx("br",{}),c.jsx("small",{children:"Large Cup"})]})]})]}),c.jsxs("div",{className:"water-card",children:[c.jsx("h1",{className:"water-title",children:i?"Edit Water Intake":"Log Water Intake"}),N&&c.jsx("div",{className:"error-message",children:N}),c.jsxs("form",{onSubmit:V,className:"water-form",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Date",c.jsx("input",{type:"date",name:"date",value:r.date,onChange:D,className:"form-input",required:!0})]})}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Amount (oz)",c.jsx("input",{type:"number",name:"amount",value:r.amount,onChange:D,className:"form-input",min:"0.1",step:"0.1",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Drink Type",c.jsxs("select",{name:"type",value:r.type,onChange:D,className:"form-input",children:[c.jsx("option",{value:"water",children:"Water"}),c.jsx("option",{value:"tea",children:"Tea"}),c.jsx("option",{value:"coffee",children:"Coffee"}),c.jsx("option",{value:"juice",children:"Juice"}),c.jsx("option",{value:"sports_drink",children:"Sports Drink"}),c.jsx("option",{value:"other",children:"Other"})]})]})})]}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Notes (Optional)",c.jsx("input",{type:"text",name:"notes",value:r.notes,onChange:D,className:"form-input",placeholder:"e.g., with lemon, iced, etc."})]})}),c.jsxs("div",{className:"form-buttons",children:[c.jsx("button",{type:"submit",className:"log-button",disabled:p,children:p?i?"Updating...":"Logging...":i?"Update Intake":"Log Water"}),i&&c.jsx("button",{type:"button",className:"cancel-button",onClick:y,disabled:p,children:"Cancel"})]})]})]}),c.jsxs("div",{className:"water-log",children:[c.jsxs("h2",{className:"log-title",children:["Today's Water Intake (",T.length," entries)"]}),T.length===0?c.jsx("p",{className:"no-intake",children:"No water logged for today. Stay hydrated! 💧"}):c.jsx("ul",{className:"log-list",children:T.map(C=>c.jsxs("li",{className:"log-item",children:[c.jsxs("div",{className:"water-info",children:[c.jsxs("span",{className:"water-amount",children:[C.amount," oz"]}),c.jsx("span",{className:"water-type",children:C.type}),C.notes&&c.jsx("span",{className:"water-notes",children:C.notes})]}),c.jsxs("div",{className:"water-actions",children:[c.jsx("button",{onClick:()=>O(C),className:"edit-button",disabled:p,children:"Edit"}),c.jsx("button",{onClick:()=>v(C.id),className:"delete-button",disabled:p,children:"Delete"})]})]},C.id))})]})]})}function WD(){const{user:t,isPremium:e}=tn(),[n,r]=j.useState({workout:{current:0,goal:210},water:{current:0,goal:448},meditation:{current:0,goal:105}}),[s,i]=j.useState([]),[o,l]=j.useState(0),[u,d]=j.useState(!0),[f,p]=j.useState(30),[g,N]=j.useState(64),[k,R]=j.useState(15),P=()=>{const y=new Date().getDay();return y===0?0:7-y};j.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{d(!0),console.log("🌍 Goals timezone:",B.getUserTimezone());const[y,w,T]=await Promise.all([Es.getWorkoutSummary(t.uid,7),Ht.getWaterSummary(t.uid,7),Ts.getMeditationSummary(t.uid,7)]);console.log("📊 Weekly data fetched:",{workoutData:y,waterData:w,meditationData:T}),r({workout:{current:y.totalMinutes||0,goal:210},water:{current:w.totalOz||0,goal:448},meditation:{current:T.totalMinutes||0,goal:105}}),setTimeout(()=>x(),100)}catch(y){console.error("Error fetching weekly data:",y)}finally{d(!1)}})()},[t]);const x=()=>{const v=[];Object.entries(n).forEach(([y,w])=>{const T=w.current/w.goal*100;T>=125?v.push({type:y,level:"diamond",percentage:T}):T>=100?v.push({type:y,level:"gold",percentage:T}):T>=75?v.push({type:y,level:"silver",percentage:T}):T>=50&&v.push({type:y,level:"bronze",percentage:T})}),i(v)},E=v=>{switch(v){case"diamond":return"💎";case"gold":return"🥇";case"silver":return"🥈";case"bronze":return"🥉";default:return"⭐"}},S=v=>v>=100?"var(--sage-500)":v>=75?"var(--mint)":v>=50?"#FFD700":"var(--sage-300)",D=v=>v>=100,V=async()=>{if(t!=null&&t.uid)try{d(!0);const v=f*7,y=g*7,w=k*7,T=await zs.updateUserProfile(t.uid,{exerciseGoalMinutes:f,meditationGoalMinutes:k,waterGoalOz:g});r(A=>({...A,workout:{...A.workout,goal:v},water:{...A.water,goal:y},meditation:{...A.meditation,goal:w}})),setTimeout(()=>x(),100),console.log("✅ Goals updated successfully")}catch(v){console.error("❌ Error updating goals:",v)}finally{d(!1)}};if(u)return c.jsx("div",{className:"goals-loading",children:"Loading weekly goals..."});const O=P();return c.jsxs("div",{className:"goals-page",children:[c.jsxs("div",{className:"weekly-header",children:[c.jsx("h1",{className:"goals-title",children:"Weekly Goals"}),c.jsx("p",{className:"goals-subtitle",children:"Track your progress and earn rewards"}),c.jsxs("div",{className:"week-info",children:[c.jsx("span",{className:"week-label",children:"Current Week"}),c.jsx("span",{className:"days-remaining",children:O===0?"Last day!":`${O} days remaining`})]})]}),c.jsx("div",{className:"weekly-progress",children:Object.entries(n).map(([v,y])=>{const w=Math.min(y.current/y.goal*100,100),T=D(w),A=2*Math.PI*45,C=A,I=A-w/100*A;return c.jsxs("div",{className:`weekly-ring ${T?"completed":""}`,children:[c.jsxs("div",{className:"ring-container",children:[c.jsxs("svg",{className:"progress-ring",width:"120",height:"120",children:[c.jsx("circle",{className:"ring-background",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:"var(--sage-100)",strokeWidth:"8"}),c.jsx("circle",{className:"ring-progress",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:S(w),strokeWidth:"8",strokeLinecap:"round",strokeDasharray:C,strokeDashoffset:I,transform:"rotate(-90 60 60)"})]}),c.jsxs("div",{className:"ring-content",children:[c.jsx("span",{className:"ring-value",children:y.current}),c.jsxs("span",{className:"ring-goal",children:["/ ",y.goal]}),c.jsx("span",{className:"ring-label",children:v})]})]}),c.jsxs("div",{className:"ring-percentage",children:[Math.round(w),"%"]})]},v)})}),c.jsxs("div",{className:"achievement-gallery",children:[c.jsx("h2",{className:"section-title",children:"This Week's Achievements"}),s.length===0?c.jsxs("div",{className:"no-achievements",children:[c.jsx("span",{className:"no-achievement-icon",children:"🎯"}),c.jsx("p",{children:"Keep going! Your first achievement is waiting."})]}):c.jsx("div",{className:"achievements-grid",children:s.map((v,y)=>c.jsxs("div",{className:`achievement-card ${v.level}`,children:[c.jsx("div",{className:"achievement-icon",children:E(v.level)}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:v.level.toUpperCase()}),c.jsx("p",{children:v.type.toUpperCase()}),c.jsxs("span",{className:"achievement-percentage",children:[Math.round(v.percentage),"%"]})]}),!e&&v.level==="diamond"&&c.jsx("div",{className:"premium-overlay",children:c.jsx("span",{className:"premium-badge",children:"PRO"})})]},y))})]}),c.jsxs("div",{className:"streak-section",children:[c.jsx("h2",{className:"section-title",children:"Weekly Streak"}),c.jsxs("div",{className:"streak-card",children:[c.jsx("div",{className:"streak-icon",children:"🔥"}),c.jsxs("div",{className:"streak-info",children:[c.jsx("span",{className:"streak-number",children:o}),c.jsx("span",{className:"streak-label",children:"Week Streak"})]}),c.jsxs("div",{className:"streak-next",children:[c.jsx("span",{children:"Next reward at 4 weeks"}),!e&&c.jsx("span",{className:"premium-hint",children:"PRO"})]})]})]}),c.jsxs("div",{className:"reward-marketplace",children:[c.jsx("h2",{className:"section-title",children:"Reward Marketplace"}),e?c.jsxs("div",{className:"rewards-grid",children:[c.jsxs("div",{className:"reward-item",children:[c.jsx("div",{className:"reward-icon",children:"🎵"}),c.jsxs("div",{className:"reward-info",children:[c.jsx("h4",{children:"Premium Soundscape"}),c.jsx("p",{children:"Unlock for 1 week"}),c.jsx("span",{className:"reward-cost",children:"50 points"})]})]}),c.jsxs("div",{className:"reward-item",children:[c.jsx("div",{className:"reward-icon",children:"📱"}),c.jsxs("div",{className:"reward-info",children:[c.jsx("h4",{children:"Custom Badge"}),c.jsx("p",{children:"Design your own"}),c.jsx("span",{className:"reward-cost",children:"100 points"})]})]})]}):c.jsxs("div",{className:"premium-cta-card",children:[c.jsxs("div",{className:"cta-header",children:[c.jsx("h3",{children:"Unlock Premium Rewards"}),c.jsx("span",{className:"cta-price",children:"$4.99/month"})]}),c.jsxs("div",{className:"premium-features",children:[c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"💎"}),c.jsx("span",{children:"Exclusive Diamond badges"})]}),c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"🎯"}),c.jsx("span",{children:"Custom goal setting"})]}),c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"📊"}),c.jsx("span",{children:"Advanced analytics"})]}),c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"🏆"}),c.jsx("span",{children:"Challenge competitions"})]})]}),c.jsx("button",{className:"upgrade-button",onClick:Yi,children:"Upgrade with Stripe"})]})]}),c.jsxs("div",{className:"weekly-challenges",children:[c.jsx("h2",{className:"section-title",children:"Weekly Challenges"}),c.jsxs("div",{className:"challenge-card",children:[c.jsxs("div",{className:"challenge-header",children:[c.jsx("h3",{children:"Mindful Monday"}),c.jsx("span",{className:"challenge-reward",children:"+50 points"})]}),c.jsx("p",{className:"challenge-description",children:"Complete 3 meditation sessions this week"}),c.jsxs("div",{className:"challenge-progress",children:[c.jsx("div",{className:"challenge-bar",children:c.jsx("div",{className:"challenge-fill",style:{width:"33%"}})}),c.jsx("span",{className:"challenge-status",children:"1/3 completed"})]}),!e&&c.jsx("div",{className:"challenge-premium",children:c.jsx("span",{children:"Join Premium for exclusive challenges"})})]})]}),c.jsxs("div",{className:"custom-goals-section",children:[c.jsx("h2",{className:"section-title",children:"Goal Customization"}),c.jsxs("div",{className:"custom-goals-form",children:[c.jsxs("div",{className:"goal-slider",children:[c.jsxs("label",{children:["Daily Workout Goal: ",f," minutes"]}),c.jsx("input",{type:"range",min:"15",max:"120",value:f,onChange:v=>p(parseInt(v.target.value)),className:"goal-range"}),c.jsxs("span",{children:["Weekly Goal: ",f*7," minutes"]})]}),c.jsxs("div",{className:"goal-slider",children:[c.jsxs("label",{children:["Daily Water Goal: ",g," oz"]}),c.jsx("input",{type:"range",min:"32",max:"128",value:g,onChange:v=>N(parseInt(v.target.value)),className:"goal-range"}),c.jsxs("span",{children:["Weekly Goal: ",g*7," oz"]})]}),c.jsxs("div",{className:"goal-slider",children:[c.jsxs("label",{children:["Daily Meditation Goal: ",k," minutes"]}),c.jsx("input",{type:"range",min:"5",max:"60",value:k,onChange:v=>R(parseInt(v.target.value)),className:"goal-range"}),c.jsxs("span",{children:["Weekly Goal: ",k*7," minutes"]})]}),c.jsx("button",{className:"save-goals-btn",onClick:V,disabled:u,children:u?"Saving...":"Save Custom Goals"})]})]}),c.jsxs("div",{className:"premium-challenges",children:[c.jsx("h2",{className:"section-title",children:"Exclusive Challenges"}),c.jsx(aI,{feature:"premium challenges",className:"feature-tease",children:c.jsxs("div",{className:"challenge-preview",children:[c.jsxs("div",{className:"challenge-card premium",children:[c.jsxs("div",{className:"challenge-header",children:[c.jsx("h3",{children:"💎 Diamond Week Challenge"}),c.jsx("span",{className:"challenge-reward",children:"+200 points"})]}),c.jsx("p",{children:"Complete 125% of all goals for 7 consecutive days"}),c.jsx("div",{className:"challenge-participants",children:c.jsx("span",{children:"🏆 1,247 participants this week"})})]}),c.jsxs("div",{className:"challenge-card premium",children:[c.jsxs("div",{className:"challenge-header",children:[c.jsx("h3",{children:"🎯 Perfect Balance"}),c.jsx("span",{className:"challenge-reward",children:"+150 points"})]}),c.jsx("p",{children:"Hit exactly 100% on all three goals in one day"}),c.jsx("div",{className:"challenge-participants",children:c.jsx("span",{children:"🎉 892 members completed"})})]})]})})]})]})}function qD(){const{user:t,loading:e,isPremium:n,userSubscription:r,trialDaysRemaining:s,upgradeToPremium:i,cancelSubscription:o}=tn(),[l,u]=j.useState(null),[d,f]=j.useState({username:"",email:"",firstName:"",lastName:"",exerciseGoalMinutes:"",waterGoalOz:"",meditationGoalMinutes:""}),[p,g]=j.useState(!0),[N,k]=j.useState(!1),[R,P]=j.useState(""),[x,E]=j.useState("");j.useEffect(()=>{const O=async()=>{if(t!=null&&t.uid)try{g(!0);const v=await zs.getUserProfile(t.uid);u(v.user)}catch(v){console.error("Error fetching profile:",v),E("Failed to load profile data")}finally{g(!1)}};t!=null&&t.uid&&O()},[t]),j.useEffect(()=>{l&&f({username:l.username||"",email:l.email||"",firstName:l.firstName||"",lastName:l.lastName||"",exerciseGoalMinutes:l.exerciseGoalMinutes||"",waterGoalOz:l.waterGoalOz||"",meditationGoalMinutes:l.meditationGoalMinutes||""})},[l]);const S=O=>{const{name:v,value:y}=O.target;f(w=>({...w,[v]:y}))},D=async O=>{if(O.preventDefault(),!!(t!=null&&t.uid)){k(!0),E(""),P("");try{console.log("Submitting profile update:",d);const v={...d,exerciseGoalMinutes:parseInt(d.exerciseGoalMinutes)||30,waterGoalOz:parseInt(d.waterGoalOz)||64,meditationGoalMinutes:parseInt(d.meditationGoalMinutes)||10};await zs.updateUserProfile(t.uid,v),u({...l,...v}),P("Profile updated successfully!"),setTimeout(()=>P(""),3e3)}catch(v){console.error("Error updating profile:",v),E("Failed to update profile. Please try again.")}finally{k(!1)}}},V=()=>{l&&f({username:l.username||"",email:l.email||"",firstName:l.firstName||"",lastName:l.lastName||"",exerciseGoalMinutes:l.exerciseGoalMinutes||"",waterGoalOz:l.waterGoalOz||"",meditationGoalMinutes:l.meditationGoalMinutes||""}),E(""),P("")};return e||p?c.jsx("div",{className:"profile-loading",children:"Loading profile..."}):t?c.jsx("div",{className:"profile-page",children:c.jsxs("div",{className:"profile-card",children:[c.jsxs("div",{className:"profile-header",children:[c.jsx("h1",{className:"profile-title",children:"Personal Information"}),c.jsx("p",{className:"profile-subtitle",children:"Update your profile and wellness goals"})]}),R&&c.jsx("div",{className:"success-message",children:R}),x&&c.jsx("div",{className:"error-message",children:x}),l&&c.jsxs("form",{onSubmit:D,className:"profile-form",children:[c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"section-title",children:"Account Information"}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Username",c.jsx("input",{type:"text",name:"username",value:d.username,onChange:S,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Email",c.jsx("input",{type:"email",name:"email",value:d.email,onChange:S,className:"form-input",required:!0})]})})]}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["First Name",c.jsx("input",{type:"text",name:"firstName",value:d.firstName,onChange:S,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Last Name",c.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:S,className:"form-input",required:!0})]})})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"section-title",children:"Daily Wellness Goals"}),c.jsx("p",{className:"section-description",children:"Set your daily targets to track your progress effectively"}),c.jsxs("div",{className:"goals-grid",children:[c.jsx("div",{className:"form-group goal-group",children:c.jsxs("label",{className:"form-label",children:[c.jsx("span",{className:"goal-icon",children:"🏋️"}),"Exercise Goal (Minutes)",c.jsx("input",{type:"number",name:"exerciseGoalMinutes",value:d.exerciseGoalMinutes,onChange:S,className:"form-input",min:"1",max:"300",required:!0}),c.jsx("small",{className:"input-help",children:"Recommended: 30-60 minutes"})]})}),c.jsx("div",{className:"form-group goal-group",children:c.jsxs("label",{className:"form-label",children:[c.jsx("span",{className:"goal-icon",children:"💧"}),"Water Goal (Oz)",c.jsx("input",{type:"number",name:"waterGoalOz",value:d.waterGoalOz,onChange:S,className:"form-input",min:"1",max:"200",required:!0}),c.jsx("small",{className:"input-help",children:"Recommended: 64-100 oz"})]})}),c.jsx("div",{className:"form-group goal-group",children:c.jsxs("label",{className:"form-label",children:[c.jsx("span",{className:"goal-icon",children:"🧘"}),"Meditation Goal (Minutes)",c.jsx("input",{type:"number",name:"meditationGoalMinutes",value:d.meditationGoalMinutes,onChange:S,className:"form-input",min:"1",max:"120",required:!0}),c.jsx("small",{className:"input-help",children:"Recommended: 5-20 minutes"})]})})]})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",className:"reset-button",onClick:V,disabled:N,children:"Reset Changes"}),c.jsx("button",{type:"submit",className:"save-button",disabled:N,children:N?"Saving...":"Save Profile"})]})]}),c.jsxs("div",{className:"profile-stats",children:[c.jsx("h3",{className:"section-title",children:"Account Summary"}),c.jsxs("div",{className:"stats-grid",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Member Since"}),c.jsx("span",{className:"stat-value",children:l!=null&&l.createdAt?new Date(l.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Profile Updated"}),c.jsx("span",{className:"stat-value",children:l!=null&&l.updatedAt?new Date(l.updatedAt.seconds*1e3).toLocaleDateString():"N/A"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Goals Set"}),c.jsxs("span",{className:"stat-value",children:[[d.exerciseGoalMinutes,d.waterGoalOz,d.meditationGoalMinutes].filter(O=>O&&O>0).length," / 3"]})]})]})]}),c.jsxs("div",{className:"subscription-section",children:[c.jsx("h2",{children:"Your Plan"}),r==="trial"&&c.jsx("div",{className:"trial-status",children:c.jsxs("div",{className:"status-card trial",children:[c.jsx("h3",{children:"Premium Trial"}),c.jsx("p",{children:"You're experiencing the full premium experience!"}),c.jsxs("div",{className:"trial-countdown",children:[c.jsx("span",{className:"days-remaining",children:s}),c.jsx("span",{className:"days-label",children:"days remaining"})]}),c.jsxs("div",{className:"trial-benefits",children:[c.jsx("p",{children:"Currently enjoying:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"✓ Custom goal setting"}),c.jsx("li",{children:"✓ Diamond achievements"}),c.jsx("li",{children:"✓ Premium soundscapes"}),c.jsx("li",{children:"✓ Advanced analytics"})]})]}),c.jsx("button",{onClick:Yi,className:"keep-premium-btn",children:"Keep Premium Access - $4.99/month"})]})}),r==="premium"&&c.jsx("div",{className:"premium-status",children:c.jsxs("div",{className:"status-card premium",children:[c.jsx("h3",{children:"💎 Premium Member"}),c.jsx("p",{children:"You have access to all premium features!"}),c.jsxs("div",{className:"premium-benefits",children:[c.jsx("h4",{children:"Your Premium Benefits:"}),c.jsxs("div",{className:"benefits-list",children:[c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Custom goal setting"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Exclusive Diamond badges"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Premium soundscapes"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Advanced analytics"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Challenge competitions"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Priority support"})]})]})]}),c.jsx("button",{onClick:o,className:"cancel-btn",children:"Cancel Subscription"})]})}),r==="free"&&c.jsx("div",{className:"free-status",children:c.jsxs("div",{className:"status-card free",children:[c.jsx("h3",{children:"🆓 Free Plan"}),c.jsx("p",{children:"Upgrade to unlock premium features and enhance your wellness journey"}),c.jsxs("div",{className:"premium-benefits",children:[c.jsx("h4",{children:"Unlock with Premium:"}),c.jsxs("div",{className:"benefits-list",children:[c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"🎯"}),c.jsx("span",{children:"Custom goal setting"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"💎"}),c.jsx("span",{children:"Exclusive Diamond badges"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"🎵"}),c.jsx("span",{children:"Premium soundscapes"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"📊"}),c.jsx("span",{children:"Advanced analytics"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"🏆"}),c.jsx("span",{children:"Challenge competitions"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"⚡"}),c.jsx("span",{children:"Priority support"})]})]})]}),c.jsx("button",{onClick:Yi,className:"upgrade-btn",children:"Upgrade to Premium - $4.99/month"})]})})]})]})}):c.jsx("div",{className:"profile-error",children:"Please log in to view your profile."})}function GD({children:t}){const{isAuthenticated:e,loading:n}=tn();return console.log("🔐 ProtectedRoute - loading:",n,"isAuthenticated:",e),n?c.jsx("div",{className:"loading",children:"Loading..."}):e?(console.log("✅ Authenticated, rendering protected content"),t):(console.log("🚫 Not authenticated, redirecting to welcome"),c.jsx(Dc,{to:"/welcome",replace:!0}))}const Yv={worry_worm:{name:"Worry Worm",icon:"🐛",color:"#8B4513",size:"small",technique:"breathing",description:"Those nagging worries that won't go away",tamedMessage:"Worry Worm is now peaceful! 🌱"},panic_bear:{name:"Panic Bear",icon:"🐻",color:"#DC143C",size:"large",technique:"progressive_relaxation",description:"Big scary feelings that make your heart race",tamedMessage:"Panic Bear is now your gentle guardian! 🧸"},overthink_octopus:{name:"Overthink Octopus",icon:"🐙",color:"#4B0082",size:"medium",technique:"mindfulness",description:"Eight arms of spiraling thoughts",tamedMessage:"Overthink Octopus is now zen and focused! 🧘‍♀️"},doom_dragon:{name:"Doom Dragon",icon:"🐉",color:"#8B0000",size:"boss",technique:"combo",description:"The big bad of catastrophic thinking",tamedMessage:"Doom Dragon is now your wise protector! ✨"}},Mo={breathing:{name:"Deep Breathing",icon:"💨",instructions:["Breathe in for 4","Hold for 4","Breathe out for 6","Repeat"],duration:16e3,color:"#4CAF50"},progressive_relaxation:{name:"Progressive Relaxation",icon:"🧘‍♀️",instructions:["Tense your shoulders","Hold for 3 seconds","Release and relax","Feel the tension melt away"],duration:12e3,color:"#2196F3"},mindfulness:{name:"Mindfulness Anchor",icon:"⚓",instructions:["Notice 3 things you can see","Notice 2 things you can hear","Notice 1 thing you can feel","You are present"],duration:15e3,color:"#FF9800"}};function HD({user:t,onUpdateStats:e}){var V,O,v;const[n,r]=j.useState("menu"),[s,i]=j.useState(null),[o,l]=j.useState([]),[u,d]=j.useState({level:1,experience:0,calmness:100,monstersDefeated:0,sanctuaryPoints:0}),[f,p]=j.useState(0),[g,N]=j.useState(0),[k,R]=j.useState(!1),P=j.useRef(null),x=()=>{const y=Object.keys(Yv),w=y[Math.floor(Math.random()*y.length)],T={...Yv[w],id:w};i(T),r("encounter");const A=T.size==="boss"?30:T.size==="large"?20:10;d(C=>({...C,calmness:Math.max(0,C.calmness-A)}))},E=()=>{const y=Mo[s.technique]||Mo.breathing;r("technique"),p(0),N(0),S(y)},S=y=>{const w=y.duration/y.instructions.length;let T=0;const A=setInterval(()=>{N(T),p((T+1)/y.instructions.length*100),T===y.instructions.length-1?(clearInterval(A),setTimeout(()=>{D()},w)):T++},w);P.current=A},D=()=>{const y=s.size==="boss"?100:s.size==="large"?50:25,w=s.size==="boss"?20:10;l(T=>[...T,s]),d(T=>({...T,experience:T.experience+y,calmness:Math.min(100,T.calmness+30),monstersDefeated:T.monstersDefeated+1,sanctuaryPoints:T.sanctuaryPoints+w,level:Math.floor((T.experience+y)/100)+1})),r("victory"),e&&e({anxietyGameScore:u.monstersDefeated+1,mindfulnessPoints:w})};return j.useEffect(()=>{if(n==="technique"&&(s==null?void 0:s.technique)==="breathing"){const y=setInterval(()=>{R(w=>!w)},2e3);return()=>clearInterval(y)}},[n,s]),j.useEffect(()=>()=>{P.current&&clearInterval(P.current)},[]),c.jsxs("div",{className:"monster-tamer-game",children:[n==="menu"&&c.jsxs("div",{className:"game-menu",children:[c.jsxs("div",{className:"game-header",children:[c.jsx("h2",{children:"👾 Anxiety Monster Tamer"}),c.jsx("p",{children:"Use mindfulness to tame your anxiety monsters!"})]}),c.jsxs("div",{className:"player-stats",children:[c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"⭐"}),c.jsxs("span",{children:["Level ",u.level]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"🧘‍♀️"}),c.jsxs("span",{children:["Calmness: ",u.calmness,"%"]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"👾"}),c.jsxs("span",{children:["Tamed: ",u.monstersDefeated]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"🏠"}),c.jsxs("span",{children:["Sanctuary: ",u.sanctuaryPoints]})]})]}),c.jsx("button",{className:"encounter-btn",onClick:x,disabled:u.calmness<10,children:u.calmness<10?"Rest First 😴":"Encounter Monster 👾"}),c.jsxs("div",{className:"tamed-collection",children:[c.jsx("h3",{children:"Your Tamed Monsters:"}),c.jsx("div",{className:"tamed-grid",children:o.length===0?c.jsx("p",{className:"no-tamed",children:"No monsters tamed yet. Start your journey!"}):o.map((y,w)=>c.jsxs("div",{className:"tamed-monster",children:[c.jsx("span",{className:"monster-icon",children:y.icon}),c.jsx("span",{className:"monster-name",children:y.name})]},w))})]})]}),n==="encounter"&&s&&c.jsxs("div",{className:"monster-encounter",children:[c.jsxs("div",{className:"encounter-scene",children:[c.jsxs("div",{className:`monster ${s.size} ${s.id}`,children:[c.jsx("div",{className:"monster-icon",children:s.icon}),c.jsx("div",{className:"monster-shake"})]}),c.jsxs("div",{className:"encounter-text",children:[c.jsxs("h3",{children:["A wild ",s.name," appears!"]}),c.jsx("p",{children:s.description}),c.jsx("p",{className:"calmness-drop",children:"Your calmness dropped! 😰"})]})]}),c.jsxs("div",{className:"taming-options",children:[c.jsxs("button",{className:"tame-btn",onClick:E,children:[c.jsx("span",{className:"technique-icon",children:((V=Mo[s.technique])==null?void 0:V.icon)||"💨"}),"Use ",((O=Mo[s.technique])==null?void 0:O.name)||"Deep Breathing"]}),c.jsx("button",{className:"run-btn",onClick:()=>r("menu"),children:"Run Away 🏃‍♀️"})]})]}),n==="technique"&&s&&c.jsxs("div",{className:"taming-technique",children:[c.jsxs("div",{className:"technique-header",children:[c.jsxs("h3",{children:["Taming ",s.name]}),c.jsx("div",{className:"anxiety-progress",children:c.jsx("div",{className:"progress-fill",style:{width:`${f}%`}})})]}),c.jsx("div",{className:`technique-visual ${k?"breathing":""}`,children:c.jsxs("div",{className:"monster-calming",children:[c.jsx("span",{className:"monster-icon",children:s.icon}),c.jsx("div",{className:"calming-aura"})]})}),c.jsx("div",{className:"technique-instructions",children:(v=Mo[s.technique])==null?void 0:v.instructions.map((y,w)=>c.jsx("div",{className:`instruction ${w===g?"active":w<g?"completed":""}`,children:y},w))})]}),n==="victory"&&s&&c.jsxs("div",{className:"victory-screen",children:[c.jsx("div",{className:"victory-animation",children:c.jsxs("div",{className:"tamed-monster",children:[c.jsx("span",{className:"monster-icon happy",children:s.icon}),c.jsx("div",{className:"sparkles",children:"✨✨✨"})]})}),c.jsxs("div",{className:"victory-text",children:[c.jsx("h3",{children:"🎉 Monster Tamed!"}),c.jsx("p",{children:s.tamedMessage}),c.jsxs("div",{className:"rewards",children:[c.jsx("div",{className:"reward",children:"+30 Calmness 🧘‍♀️"}),c.jsxs("div",{className:"reward",children:["+",s.size==="boss"?100:s.size==="large"?50:25," Experience ⭐"]}),c.jsxs("div",{className:"reward",children:["+",s.size==="boss"?20:10," Sanctuary Points 🏠"]})]})]}),c.jsxs("div",{className:"victory-actions",children:[c.jsx("button",{className:"continue-btn",onClick:()=>r("menu"),children:"Continue Journey ➡️"}),c.jsx("button",{className:"sanctuary-btn",onClick:()=>r("sanctuary"),children:"Visit Sanctuary 🏛️"})]})]}),n==="sanctuary"&&c.jsxs("div",{className:"sanctuary-view",children:[c.jsxs("div",{className:"sanctuary-header",children:[c.jsx("h2",{children:"🏛️ Your Peaceful Sanctuary"}),c.jsx("p",{children:"A safe space built from your mindfulness journey"}),c.jsx("button",{className:"back-to-menu-btn",onClick:()=>r("menu"),children:"← Back to Adventure"})]}),c.jsxs("div",{className:"sanctuary-stats",children:[c.jsxs("div",{className:"sanctuary-stat",children:[c.jsx("div",{className:"stat-icon",children:"🏠"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:u.sanctuaryPoints}),c.jsx("span",{className:"stat-label",children:"Sanctuary Points"})]})]}),c.jsxs("div",{className:"sanctuary-stat",children:[c.jsx("div",{className:"stat-icon",children:"👾"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:o.length}),c.jsx("span",{className:"stat-label",children:"Peaceful Companions"})]})]}),c.jsxs("div",{className:"sanctuary-stat",children:[c.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"stat-info",children:[c.jsxs("span",{className:"stat-number",children:[u.calmness,"%"]}),c.jsx("span",{className:"stat-label",children:"Current Calmness"})]})]})]}),c.jsxs("div",{className:"sanctuary-garden",children:[c.jsx("h3",{children:"🌸 Mindfulness Garden"}),c.jsxs("div",{className:"garden-grid",children:[o.length===0?c.jsxs("div",{className:"empty-garden",children:[c.jsx("div",{className:"empty-garden-icon",children:"🌱"}),c.jsx("p",{children:"Your garden awaits your first peaceful companion..."}),c.jsx("small",{children:"Tame monsters to populate your sanctuary!"})]}):o.map((y,w)=>c.jsx("div",{className:"garden-companion",children:c.jsxs("div",{className:"companion-spot",children:[c.jsx("span",{className:"companion-icon",children:y.icon}),c.jsx("div",{className:"companion-aura"}),c.jsx("div",{className:"companion-name",children:y.name}),c.jsx("div",{className:"companion-effect",children:"Radiating peace ✨"})]})},w)),Array.from({length:Math.max(0,6-o.length)}).map((y,w)=>c.jsx("div",{className:"garden-companion empty",children:c.jsxs("div",{className:"companion-spot",children:[c.jsx("span",{className:"empty-spot",children:"?"}),c.jsx("div",{className:"spot-label",children:"Awaiting Friend"})]})},`empty-${w}`))]})]}),c.jsxs("div",{className:"sanctuary-upgrades",children:[c.jsx("h3",{children:"🏗️ Sanctuary Upgrades"}),c.jsxs("div",{className:"upgrades-grid",children:[c.jsxs("div",{className:`upgrade-card ${u.sanctuaryPoints>=50?"available":"locked"}`,children:[c.jsx("div",{className:"upgrade-icon",children:"🌈"}),c.jsxs("div",{className:"upgrade-info",children:[c.jsx("h4",{children:"Rainbow Bridge"}),c.jsx("p",{children:"Connects different areas of your sanctuary"}),c.jsx("span",{className:"upgrade-cost",children:"50 Points"})]}),u.sanctuaryPoints>=50?c.jsx("button",{className:"upgrade-btn",children:"Build"}):c.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),c.jsxs("div",{className:`upgrade-card ${u.sanctuaryPoints>=100?"available":"locked"}`,children:[c.jsx("div",{className:"upgrade-icon",children:"⛲"}),c.jsxs("div",{className:"upgrade-info",children:[c.jsx("h4",{children:"Meditation Fountain"}),c.jsx("p",{children:"Restores calmness over time"}),c.jsx("span",{className:"upgrade-cost",children:"100 Points"})]}),u.sanctuaryPoints>=100?c.jsx("button",{className:"upgrade-btn",children:"Build"}):c.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),c.jsxs("div",{className:`upgrade-card ${u.sanctuaryPoints>=200?"available":"locked"}`,children:[c.jsx("div",{className:"upgrade-icon",children:"🏰"}),c.jsxs("div",{className:"upgrade-info",children:[c.jsx("h4",{children:"Wisdom Tower"}),c.jsx("p",{children:"Unlock advanced meditation techniques"}),c.jsx("span",{className:"upgrade-cost",children:"200 Points"})]}),u.sanctuaryPoints>=200?c.jsx("button",{className:"upgrade-btn",children:"Build"}):c.jsx("div",{className:"upgrade-locked",children:"🔒"})]})]})]}),c.jsxs("div",{className:"daily-affirmations",children:[c.jsx("h3",{children:"💭 Daily Affirmation"}),c.jsxs("div",{className:"affirmation-card",children:[c.jsx("div",{className:"affirmation-text",children:'"I am creating a sanctuary of peace within myself, one mindful moment at a time."'}),c.jsx("div",{className:"affirmation-author",children:"- Your Inner Wisdom"})]})]}),c.jsxs("div",{className:"sanctuary-actions",children:[c.jsx("button",{className:"meditation-btn",onClick:()=>{d(y=>({...y,calmness:Math.min(100,y.calmness+10)}))},children:"🧘‍♀️ Meditate in Sanctuary (+10 Calmness)"}),c.jsx("button",{className:"encounter-btn",onClick:()=>{r("menu"),setTimeout(()=>{x()},500)},children:"👾 Ready for Another Adventure"})]})]})]})}function KD(){const{user:t}=tn(),[e,n]=j.useState({anxietyGameScore:0,mindfulnessPoints:0,totalGamesPlayed:0,currentStreak:0}),r=s=>{n(i=>({...i,anxietyGameScore:s.anxietyGameScore||i.anxietyGameScore,mindfulnessPoints:i.mindfulnessPoints+(s.mindfulnessPoints||0),totalGamesPlayed:i.totalGamesPlayed+1})),console.log("🎮 Game stats updated:",s)};return c.jsxs("div",{className:"games-page",children:[c.jsxs("div",{className:"games-header",children:[c.jsx("h1",{className:"games-title",children:"Mental Wellness Games"}),c.jsx("p",{className:"games-subtitle",children:"Play games to improve your mental health"})]}),c.jsxs("div",{className:"game-stats-section",children:[c.jsx("h2",{className:"section-title",children:"Your Gaming Stats"}),c.jsxs("div",{className:"game-stats-grid",children:[c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"👾"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.anxietyGameScore}),c.jsx("span",{className:"stat-label",children:"Monsters Tamed"})]})]}),c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.mindfulnessPoints}),c.jsx("span",{className:"stat-label",children:"Mindfulness Points"})]})]}),c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"🎮"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.totalGamesPlayed}),c.jsx("span",{className:"stat-label",children:"Games Played"})]})]}),c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"🔥"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.currentStreak}),c.jsx("span",{className:"stat-label",children:"Day Streak"})]})]})]})]}),c.jsxs("div",{className:"available-games",children:[c.jsx("h2",{className:"section-title",children:"Available Games"}),c.jsxs("div",{className:"game-section",children:[c.jsxs("div",{className:"game-header",children:[c.jsx("h3",{className:"game-title",children:"🎮 Anxiety Monster Tamer"}),c.jsx("span",{className:"game-status",children:"Active"})]}),c.jsx("p",{className:"game-description",children:"Face your anxiety monsters and tame them through mindful interaction. Each monster represents different anxiety triggers. Practice coping strategies while earning points!"}),c.jsx("div",{className:"game-container",children:c.jsx(HD,{user:t,onUpdateStats:r})})]}),c.jsxs("div",{className:"coming-soon-games",children:[c.jsx("h3",{className:"section-title",children:"More Games Coming Soon"}),c.jsxs("div",{className:"game-preview-grid",children:[c.jsxs("div",{className:"game-preview-card",children:[c.jsx("div",{className:"game-preview-icon",children:"🌱"}),c.jsx("h4",{children:"Mindful Garden"}),c.jsx("p",{children:"Grow a virtual garden through daily meditation practice"}),c.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),c.jsxs("div",{className:"game-preview-card",children:[c.jsx("div",{className:"game-preview-icon",children:"🌊"}),c.jsx("h4",{children:"Calm Waters"}),c.jsx("p",{children:"Navigate peaceful waters while practicing breathing exercises"}),c.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),c.jsxs("div",{className:"game-preview-card",children:[c.jsx("div",{className:"game-preview-icon",children:"🎯"}),c.jsx("h4",{children:"Focus Quest"}),c.jsx("p",{children:"Complete challenges that improve concentration and focus"}),c.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]})]})]})]}),c.jsxs("div",{className:"daily-challenges",children:[c.jsx("h2",{className:"section-title",children:"Daily Gaming Challenges"}),c.jsxs("div",{className:"challenge-card",children:[c.jsx("div",{className:"challenge-icon",children:"👾"}),c.jsxs("div",{className:"challenge-content",children:[c.jsx("h3",{children:"Monster Tamer Challenge"}),c.jsx("p",{children:"Tame 3 anxiety monsters today"}),c.jsx("div",{className:"challenge-progress",children:c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${Math.min(e.anxietyGameScore/3*100,100)}%`}})})})]}),c.jsx("div",{className:"challenge-reward",children:c.jsx("span",{children:"+50 points"})})]}),c.jsxs("div",{className:"challenge-card",children:[c.jsx("div",{className:"challenge-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"challenge-content",children:[c.jsx("h3",{children:"Mindfulness Master"}),c.jsx("p",{children:"Earn 100 mindfulness points"}),c.jsx("div",{className:"challenge-progress",children:c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${Math.min(e.mindfulnessPoints/100*100,100)}%`}})})})]}),c.jsx("div",{className:"challenge-reward",children:c.jsx("span",{children:"+75 points"})})]})]}),c.jsxs("div",{className:"game-achievements",children:[c.jsx("h2",{className:"section-title",children:"Gaming Achievements"}),c.jsxs("div",{className:"achievements-grid",children:[e.anxietyGameScore>=1&&c.jsxs("div",{className:"achievement-card bronze",children:[c.jsx("div",{className:"achievement-icon",children:"🥉"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"FIRST VICTORY"}),c.jsx("p",{children:"Tamed your first monster"})]})]}),e.anxietyGameScore>=5&&c.jsxs("div",{className:"achievement-card silver",children:[c.jsx("div",{className:"achievement-icon",children:"🥈"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"MONSTER HUNTER"}),c.jsx("p",{children:"Tamed 5 monsters"})]})]}),e.anxietyGameScore>=10&&c.jsxs("div",{className:"achievement-card gold",children:[c.jsx("div",{className:"achievement-icon",children:"🥇"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"ANXIETY MASTER"}),c.jsx("p",{children:"Tamed 10 monsters"})]})]}),e.mindfulnessPoints>=100&&c.jsxs("div",{className:"achievement-card gold",children:[c.jsx("div",{className:"achievement-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"MINDFUL GURU"}),c.jsx("p",{children:"Earned 100+ mindfulness points"})]})]})]})]})]})}function QD(){return c.jsx(rI,{children:c.jsx(tN,{children:c.jsxs(H1,{children:[c.jsx(Gt,{path:"/welcome",element:c.jsx(ND,{})}),c.jsxs(Gt,{path:"/",element:c.jsx(GD,{children:c.jsx(xD,{})}),children:[c.jsx(Gt,{index:!0,element:c.jsx(Dc,{to:"/dashboard",replace:!0})}),c.jsx(Gt,{path:"dashboard",element:c.jsx(UD,{})}),c.jsx(Gt,{path:"workout",element:c.jsx(zD,{})}),c.jsx(Gt,{path:"meditation",element:c.jsx(BD,{})}),c.jsx(Gt,{path:"water",element:c.jsx($D,{})}),c.jsx(Gt,{path:"goals",element:c.jsx(WD,{})}),c.jsx(Gt,{path:"profile",element:c.jsx(qD,{})}),c.jsx(Gt,{path:"games",element:c.jsx(KD,{})})]}),c.jsx(Gt,{path:"*",element:c.jsx(Dc,{to:"/welcome",replace:!0})})]})})})}Gd.createRoot(document.getElementById("root")).render(c.jsx(Yn.StrictMode,{children:c.jsx(rI,{children:c.jsx(QD,{})})}));
