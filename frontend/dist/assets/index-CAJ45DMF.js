function DS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o_={exports:{}},hu={},a_={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $a=Symbol.for("react.element"),bS=Symbol.for("react.portal"),OS=Symbol.for("react.fragment"),MS=Symbol.for("react.strict_mode"),LS=Symbol.for("react.profiler"),VS=Symbol.for("react.provider"),FS=Symbol.for("react.context"),US=Symbol.for("react.forward_ref"),zS=Symbol.for("react.suspense"),BS=Symbol.for("react.memo"),$S=Symbol.for("react.lazy"),sg=Symbol.iterator;function WS(t){return t===null||typeof t!="object"?null:(t=sg&&t[sg]||t["@@iterator"],typeof t=="function"?t:null)}var l_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c_=Object.assign,u_={};function so(t,e,n){this.props=t,this.context=e,this.refs=u_,this.updater=n||l_}so.prototype.isReactComponent={};so.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};so.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d_(){}d_.prototype=so.prototype;function Rf(t,e,n){this.props=t,this.context=e,this.refs=u_,this.updater=n||l_}var Df=Rf.prototype=new d_;Df.constructor=Rf;c_(Df,so.prototype);Df.isPureReactComponent=!0;var ig=Array.isArray,h_=Object.prototype.hasOwnProperty,jf={current:null},f_={key:!0,ref:!0,__self:!0,__source:!0};function m_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)h_.call(e,r)&&!f_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:$a,type:t,key:i,ref:o,props:s,_owner:jf.current}}function qS(t,e){return{$$typeof:$a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bf(t){return typeof t=="object"&&t!==null&&t.$$typeof===$a}function GS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var og=/\/+/g;function md(t,e){return typeof t=="object"&&t!==null&&t.key!=null?GS(""+t.key):e.toString(36)}function Yl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $a:case bS:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+md(o,0):r,ig(s)?(n="",t!=null&&(n=t.replace(og,"$&/")+"/"),Yl(s,e,n,"",function(d){return d})):s!=null&&(bf(s)&&(s=qS(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(og,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ig(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+md(i,l);o+=Yl(i,e,n,u,s)}else if(u=WS(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+md(i,l++),o+=Yl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Il(t,e,n){if(t==null)return t;var r=[],s=0;return Yl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function HS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},Xl={transition:null},KS={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:Xl,ReactCurrentOwner:jf};function p_(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Il,forEach:function(t,e,n){Il(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Il(t,function(){e++}),e},toArray:function(t){return Il(t,function(e){return e})||[]},only:function(t){if(!bf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=so;ce.Fragment=OS;ce.Profiler=LS;ce.PureComponent=Rf;ce.StrictMode=MS;ce.Suspense=zS;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KS;ce.act=p_;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=c_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=jf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)h_.call(e,u)&&!f_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:$a,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:FS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VS,_context:t},t.Consumer=t};ce.createElement=m_;ce.createFactory=function(t){var e=m_.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:US,render:t}};ce.isValidElement=bf;ce.lazy=function(t){return{$$typeof:$S,_payload:{_status:-1,_result:t},_init:HS}};ce.memo=function(t,e){return{$$typeof:BS,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Xl.transition;Xl.transition={};try{t()}finally{Xl.transition=e}};ce.unstable_act=p_;ce.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ce.useContext=function(t){return Nt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ce.useId=function(){return Nt.current.useId()};ce.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};ce.useRef=function(t){return Nt.current.useRef(t)};ce.useState=function(t){return Nt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Nt.current.useTransition()};ce.version="18.3.1";a_.exports=ce;var P=a_.exports;const Zn=jS(P),QS=DS({__proto__:null,default:Zn},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS=P,XS=Symbol.for("react.element"),JS=Symbol.for("react.fragment"),ZS=Object.prototype.hasOwnProperty,eI=YS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tI={key:!0,ref:!0,__self:!0,__source:!0};function g_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ZS.call(e,r)&&!tI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:XS,type:t,key:i,ref:o,props:s,_owner:eI.current}}hu.Fragment=JS;hu.jsx=g_;hu.jsxs=g_;o_.exports=hu;var c=o_.exports,th={},y_={exports:{}},Gt={},v_={exports:{}},__={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Y){var ae=W.length;W.push(Y);e:for(;0<ae;){var Se=ae-1>>>1,ye=W[Se];if(0<s(ye,Y))W[Se]=Y,W[ae]=ye,ae=Se;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Y=W[0],ae=W.pop();if(ae!==Y){W[0]=ae;e:for(var Se=0,ye=W.length,Ie=ye>>>1;Se<Ie;){var Mt=2*(Se+1)-1,an=W[Mt],ln=Mt+1,Lt=W[ln];if(0>s(an,ae))ln<ye&&0>s(Lt,an)?(W[Se]=Lt,W[ln]=ae,Se=ln):(W[Se]=an,W[Mt]=ae,Se=Mt);else if(ln<ye&&0>s(Lt,ae))W[Se]=Lt,W[ln]=ae,Se=ln;else break e}}return Y}function s(W,Y){var ae=W.sortIndex-Y.sortIndex;return ae!==0?ae:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,g=3,N=!1,A=!1,j=!1,R=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(W){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=W)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function b(W){if(j=!1,k(W),!A)if(n(u)!==null)A=!0,Z(V);else{var Y=n(d);Y!==null&&ze(b,Y.startTime-W)}}function V(W,Y){A=!1,j&&(j=!1,x(y),y=-1),N=!0;var ae=g;try{for(k(Y),m=n(u);m!==null&&(!(m.expirationTime>Y)||W&&!I());){var Se=m.callback;if(typeof Se=="function"){m.callback=null,g=m.priorityLevel;var ye=Se(m.expirationTime<=Y);Y=t.unstable_now(),typeof ye=="function"?m.callback=ye:m===n(u)&&r(u),k(Y)}else r(u);m=n(u)}if(m!==null)var Ie=!0;else{var Mt=n(d);Mt!==null&&ze(b,Mt.startTime-Y),Ie=!1}return Ie}finally{m=null,g=ae,N=!1}}var O=!1,w=null,y=-1,v=5,E=-1;function I(){return!(t.unstable_now()-E<v)}function C(){if(w!==null){var W=t.unstable_now();E=W;var Y=!0;try{Y=w(!0,W)}finally{Y?S():(O=!1,w=null)}}else O=!1}var S;if(typeof T=="function")S=function(){T(C)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,pe=ne.port2;ne.port1.onmessage=C,S=function(){pe.postMessage(null)}}else S=function(){R(C,0)};function Z(W){w=W,O||(O=!0,S())}function ze(W,Y){y=R(function(){W(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){A||N||(A=!0,Z(V))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var ae=g;g=Y;try{return W()}finally{g=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ae=g;g=W;try{return Y()}finally{g=ae}},t.unstable_scheduleCallback=function(W,Y,ae){var Se=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Se+ae:Se):ae=Se,W){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=ae+ye,W={id:f++,callback:Y,priorityLevel:W,startTime:ae,expirationTime:ye,sortIndex:-1},ae>Se?(W.sortIndex=ae,e(d,W),n(u)===null&&W===n(d)&&(j?(x(y),y=-1):j=!0,ze(b,ae-Se))):(W.sortIndex=ye,e(u,W),A||N||(A=!0,Z(V))),W},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(W){var Y=g;return function(){var ae=g;g=Y;try{return W.apply(this,arguments)}finally{g=ae}}}})(__);v_.exports=__;var nI=v_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rI=P,qt=nI;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w_=new Set,fa={};function Ys(t,e){$i(t,e),$i(t+"Capture",e)}function $i(t,e){for(fa[t]=e,t=0;t<e.length;t++)w_.add(e[t])}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nh=Object.prototype.hasOwnProperty,sI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ag={},lg={};function iI(t){return nh.call(lg,t)?!0:nh.call(ag,t)?!1:sI.test(t)?lg[t]=!0:(ag[t]=!0,!1)}function oI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aI(t,e,n,r){if(e===null||typeof e>"u"||oI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var Of=/[\-:]([a-z])/g;function Mf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Of,Mf);ut[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Of,Mf);ut[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Of,Mf);ut[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lf(t,e,n,r){var s=ut.hasOwnProperty(e)?ut[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aI(e,n,s,r)&&(n=null),r||s===null?iI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dr=rI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xl=Symbol.for("react.element"),wi=Symbol.for("react.portal"),Ei=Symbol.for("react.fragment"),Vf=Symbol.for("react.strict_mode"),rh=Symbol.for("react.profiler"),E_=Symbol.for("react.provider"),T_=Symbol.for("react.context"),Ff=Symbol.for("react.forward_ref"),sh=Symbol.for("react.suspense"),ih=Symbol.for("react.suspense_list"),Uf=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),S_=Symbol.for("react.offscreen"),cg=Symbol.iterator;function jo(t){return t===null||typeof t!="object"?null:(t=cg&&t[cg]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,pd;function Bo(t){if(pd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pd=e&&e[1]||""}return`
`+pd+t}var gd=!1;function yd(t,e){if(!t||gd)return"";gd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{gd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bo(t):""}function lI(t){switch(t.tag){case 5:return Bo(t.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return t=yd(t.type,!1),t;case 11:return t=yd(t.type.render,!1),t;case 1:return t=yd(t.type,!0),t;default:return""}}function oh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ei:return"Fragment";case wi:return"Portal";case rh:return"Profiler";case Vf:return"StrictMode";case sh:return"Suspense";case ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case T_:return(t.displayName||"Context")+".Consumer";case E_:return(t._context.displayName||"Context")+".Provider";case Ff:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uf:return e=t.displayName||null,e!==null?e:oh(t.type)||"Memo";case Rr:e=t._payload,t=t._init;try{return oh(t(e))}catch{}}return null}function cI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oh(e);case 8:return e===Vf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uI(t){var e=I_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kl(t){t._valueTracker||(t._valueTracker=uI(t))}function x_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ah(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ug(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=rs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k_(t,e){e=e.checked,e!=null&&Lf(t,"checked",e,!1)}function lh(t,e){k_(t,e);var n=rs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ch(t,e.type,n):e.hasOwnProperty("defaultValue")&&ch(t,e.type,rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ch(t,e,n){(e!=="number"||vc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $o=Array.isArray;function ji(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+rs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function uh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if($o(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rs(n)}}function N_(t,e){var n=rs(e.value),r=rs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function fg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nl,C_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nl=Nl||document.createElement("div"),Nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dI=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(t){dI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jo[e]=Jo[t]})});function P_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jo.hasOwnProperty(t)&&Jo[t]?(""+e).trim():e+"px"}function R_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=P_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var hI=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hh(t,e){if(e){if(hI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function fh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mh=null;function zf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ph=null,bi=null,Oi=null;function mg(t){if(t=Ga(t)){if(typeof ph!="function")throw Error($(280));var e=t.stateNode;e&&(e=yu(e),ph(t.stateNode,t.type,e))}}function D_(t){bi?Oi?Oi.push(t):Oi=[t]:bi=t}function j_(){if(bi){var t=bi,e=Oi;if(Oi=bi=null,mg(t),e)for(t=0;t<e.length;t++)mg(e[t])}}function b_(t,e){return t(e)}function O_(){}var vd=!1;function M_(t,e,n){if(vd)return t(e,n);vd=!0;try{return b_(t,e,n)}finally{vd=!1,(bi!==null||Oi!==null)&&(O_(),j_())}}function pa(t,e){var n=t.stateNode;if(n===null)return null;var r=yu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var gh=!1;if(rr)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){gh=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{gh=!1}function fI(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Zo=!1,_c=null,wc=!1,yh=null,mI={onError:function(t){Zo=!0,_c=t}};function pI(t,e,n,r,s,i,o,l,u){Zo=!1,_c=null,fI.apply(mI,arguments)}function gI(t,e,n,r,s,i,o,l,u){if(pI.apply(this,arguments),Zo){if(Zo){var d=_c;Zo=!1,_c=null}else throw Error($(198));wc||(wc=!0,yh=d)}}function Xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function L_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pg(t){if(Xs(t)!==t)throw Error($(188))}function yI(t){var e=t.alternate;if(!e){if(e=Xs(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return pg(s),t;if(i===r)return pg(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function V_(t){return t=yI(t),t!==null?F_(t):null}function F_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=F_(t);if(e!==null)return e;t=t.sibling}return null}var U_=qt.unstable_scheduleCallback,gg=qt.unstable_cancelCallback,vI=qt.unstable_shouldYield,_I=qt.unstable_requestPaint,Ue=qt.unstable_now,wI=qt.unstable_getCurrentPriorityLevel,Bf=qt.unstable_ImmediatePriority,z_=qt.unstable_UserBlockingPriority,Ec=qt.unstable_NormalPriority,EI=qt.unstable_LowPriority,B_=qt.unstable_IdlePriority,fu=null,bn=null;function TI(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(fu,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:xI,SI=Math.log,II=Math.LN2;function xI(t){return t>>>=0,t===0?32:31-(SI(t)/II|0)|0}var Al=64,Cl=4194304;function Wo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Wo(l):(i&=o,i!==0&&(r=Wo(i)))}else o=n&~s,o!==0?r=Wo(o):i!==0&&(r=Wo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),s=1<<n,r|=t[n],e&=~s;return r}function kI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=kI(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function vh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $_(){var t=Al;return Al<<=1,!(Al&4194240)&&(Al=64),t}function _d(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function AI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $f(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function W_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var q_,Wf,G_,H_,K_,_h=!1,Pl=[],$r=null,Wr=null,qr=null,ga=new Map,ya=new Map,jr=[],CI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yg(t,e){switch(t){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":ga.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ya.delete(e.pointerId)}}function Oo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ga(e),e!==null&&Wf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function PI(t,e,n,r,s){switch(e){case"focusin":return $r=Oo($r,t,e,n,r,s),!0;case"dragenter":return Wr=Oo(Wr,t,e,n,r,s),!0;case"mouseover":return qr=Oo(qr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ga.set(i,Oo(ga.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ya.set(i,Oo(ya.get(i)||null,t,e,n,r,s)),!0}return!1}function Q_(t){var e=Ds(t.target);if(e!==null){var n=Xs(e);if(n!==null){if(e=n.tag,e===13){if(e=L_(n),e!==null){t.blockedOn=e,K_(t.priority,function(){G_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mh=r,n.target.dispatchEvent(r),mh=null}else return e=Ga(n),e!==null&&Wf(e),t.blockedOn=n,!1;e.shift()}return!0}function vg(t,e,n){Jl(t)&&n.delete(e)}function RI(){_h=!1,$r!==null&&Jl($r)&&($r=null),Wr!==null&&Jl(Wr)&&(Wr=null),qr!==null&&Jl(qr)&&(qr=null),ga.forEach(vg),ya.forEach(vg)}function Mo(t,e){t.blockedOn===e&&(t.blockedOn=null,_h||(_h=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,RI)))}function va(t){function e(s){return Mo(s,t)}if(0<Pl.length){Mo(Pl[0],t);for(var n=1;n<Pl.length;n++){var r=Pl[n];r.blockedOn===t&&(r.blockedOn=null)}}for($r!==null&&Mo($r,t),Wr!==null&&Mo(Wr,t),qr!==null&&Mo(qr,t),ga.forEach(e),ya.forEach(e),n=0;n<jr.length;n++)r=jr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jr.length&&(n=jr[0],n.blockedOn===null);)Q_(n),n.blockedOn===null&&jr.shift()}var Mi=dr.ReactCurrentBatchConfig,Sc=!0;function DI(t,e,n,r){var s=we,i=Mi.transition;Mi.transition=null;try{we=1,qf(t,e,n,r)}finally{we=s,Mi.transition=i}}function jI(t,e,n,r){var s=we,i=Mi.transition;Mi.transition=null;try{we=4,qf(t,e,n,r)}finally{we=s,Mi.transition=i}}function qf(t,e,n,r){if(Sc){var s=wh(t,e,n,r);if(s===null)Cd(t,e,r,Ic,n),yg(t,r);else if(PI(s,t,e,n,r))r.stopPropagation();else if(yg(t,r),e&4&&-1<CI.indexOf(t)){for(;s!==null;){var i=Ga(s);if(i!==null&&q_(i),i=wh(t,e,n,r),i===null&&Cd(t,e,r,Ic,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Cd(t,e,r,null,n)}}var Ic=null;function wh(t,e,n,r){if(Ic=null,t=zf(r),t=Ds(t),t!==null)if(e=Xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=L_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ic=t,null}function Y_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wI()){case Bf:return 1;case z_:return 4;case Ec:case EI:return 16;case B_:return 536870912;default:return 16}default:return 16}}var Fr=null,Gf=null,Zl=null;function X_(){if(Zl)return Zl;var t,e=Gf,n=e.length,r,s="value"in Fr?Fr.value:Fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Zl=s.slice(t,1<r?1-r:void 0)}function ec(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function _g(){return!1}function Ht(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Rl:_g,this.isPropagationStopped=_g,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),e}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hf=Ht(io),qa=be({},io,{view:0,detail:0}),bI=Ht(qa),wd,Ed,Lo,mu=be({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lo&&(Lo&&t.type==="mousemove"?(wd=t.screenX-Lo.screenX,Ed=t.screenY-Lo.screenY):Ed=wd=0,Lo=t),wd)},movementY:function(t){return"movementY"in t?t.movementY:Ed}}),wg=Ht(mu),OI=be({},mu,{dataTransfer:0}),MI=Ht(OI),LI=be({},qa,{relatedTarget:0}),Td=Ht(LI),VI=be({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),FI=Ht(VI),UI=be({},io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zI=Ht(UI),BI=be({},io,{data:0}),Eg=Ht(BI),$I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qI[t])?!!e[t]:!1}function Kf(){return GI}var HI=be({},qa,{key:function(t){if(t.key){var e=$I[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ec(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kf,charCode:function(t){return t.type==="keypress"?ec(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ec(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KI=Ht(HI),QI=be({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tg=Ht(QI),YI=be({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kf}),XI=Ht(YI),JI=be({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZI=Ht(JI),ex=be({},mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tx=Ht(ex),nx=[9,13,27,32],Qf=rr&&"CompositionEvent"in window,ea=null;rr&&"documentMode"in document&&(ea=document.documentMode);var rx=rr&&"TextEvent"in window&&!ea,J_=rr&&(!Qf||ea&&8<ea&&11>=ea),Sg=" ",Ig=!1;function Z_(t,e){switch(t){case"keyup":return nx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ew(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ti=!1;function sx(t,e){switch(t){case"compositionend":return ew(e);case"keypress":return e.which!==32?null:(Ig=!0,Sg);case"textInput":return t=e.data,t===Sg&&Ig?null:t;default:return null}}function ix(t,e){if(Ti)return t==="compositionend"||!Qf&&Z_(t,e)?(t=X_(),Zl=Gf=Fr=null,Ti=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return J_&&e.locale!=="ko"?null:e.data;default:return null}}var ox={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ox[t.type]:e==="textarea"}function tw(t,e,n,r){D_(r),e=xc(e,"onChange"),0<e.length&&(n=new Hf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ta=null,_a=null;function ax(t){hw(t,0)}function pu(t){var e=xi(t);if(x_(e))return t}function lx(t,e){if(t==="change")return e}var nw=!1;if(rr){var Sd;if(rr){var Id="oninput"in document;if(!Id){var kg=document.createElement("div");kg.setAttribute("oninput","return;"),Id=typeof kg.oninput=="function"}Sd=Id}else Sd=!1;nw=Sd&&(!document.documentMode||9<document.documentMode)}function Ng(){ta&&(ta.detachEvent("onpropertychange",rw),_a=ta=null)}function rw(t){if(t.propertyName==="value"&&pu(_a)){var e=[];tw(e,_a,t,zf(t)),M_(ax,e)}}function cx(t,e,n){t==="focusin"?(Ng(),ta=e,_a=n,ta.attachEvent("onpropertychange",rw)):t==="focusout"&&Ng()}function ux(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pu(_a)}function dx(t,e){if(t==="click")return pu(e)}function hx(t,e){if(t==="input"||t==="change")return pu(e)}function fx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:fx;function wa(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!nh.call(e,s)||!vn(t[s],e[s]))return!1}return!0}function Ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cg(t,e){var n=Ag(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ag(n)}}function sw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iw(){for(var t=window,e=vc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vc(t.document)}return e}function Yf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mx(t){var e=iw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sw(n.ownerDocument.documentElement,n)){if(r!==null&&Yf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Cg(n,i);var o=Cg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var px=rr&&"documentMode"in document&&11>=document.documentMode,Si=null,Eh=null,na=null,Th=!1;function Pg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Th||Si==null||Si!==vc(r)||(r=Si,"selectionStart"in r&&Yf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),na&&wa(na,r)||(na=r,r=xc(Eh,"onSelect"),0<r.length&&(e=new Hf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Si)))}function Dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ii={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},xd={},ow={};rr&&(ow=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function gu(t){if(xd[t])return xd[t];if(!Ii[t])return t;var e=Ii[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ow)return xd[t]=e[n];return t}var aw=gu("animationend"),lw=gu("animationiteration"),cw=gu("animationstart"),uw=gu("transitionend"),dw=new Map,Rg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(t,e){dw.set(t,e),Ys(e,[t])}for(var kd=0;kd<Rg.length;kd++){var Nd=Rg[kd],gx=Nd.toLowerCase(),yx=Nd[0].toUpperCase()+Nd.slice(1);hs(gx,"on"+yx)}hs(aw,"onAnimationEnd");hs(lw,"onAnimationIteration");hs(cw,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(uw,"onTransitionEnd");$i("onMouseEnter",["mouseout","mouseover"]);$i("onMouseLeave",["mouseout","mouseover"]);$i("onPointerEnter",["pointerout","pointerover"]);$i("onPointerLeave",["pointerout","pointerover"]);Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vx=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function Dg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gI(r,e,void 0,t),t.currentTarget=null}function hw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Dg(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Dg(s,l,d),i=u}}}if(wc)throw t=yh,wc=!1,yh=null,t}function ke(t,e){var n=e[Nh];n===void 0&&(n=e[Nh]=new Set);var r=t+"__bubble";n.has(r)||(fw(e,t,2,!1),n.add(r))}function Ad(t,e,n){var r=0;e&&(r|=4),fw(n,t,r,e)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Ea(t){if(!t[jl]){t[jl]=!0,w_.forEach(function(n){n!=="selectionchange"&&(vx.has(n)||Ad(n,!1,t),Ad(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jl]||(e[jl]=!0,Ad("selectionchange",!1,e))}}function fw(t,e,n,r){switch(Y_(e)){case 1:var s=DI;break;case 4:s=jI;break;default:s=qf}n=s.bind(null,e,n,t),s=void 0,!gh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Cd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ds(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}M_(function(){var d=i,f=zf(n),m=[];e:{var g=dw.get(t);if(g!==void 0){var N=Hf,A=t;switch(t){case"keypress":if(ec(n)===0)break e;case"keydown":case"keyup":N=KI;break;case"focusin":A="focus",N=Td;break;case"focusout":A="blur",N=Td;break;case"beforeblur":case"afterblur":N=Td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=MI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=XI;break;case aw:case lw:case cw:N=FI;break;case uw:N=ZI;break;case"scroll":N=bI;break;case"wheel":N=tx;break;case"copy":case"cut":case"paste":N=zI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Tg}var j=(e&4)!==0,R=!j&&t==="scroll",x=j?g!==null?g+"Capture":null:g;j=[];for(var T=d,k;T!==null;){k=T;var b=k.stateNode;if(k.tag===5&&b!==null&&(k=b,x!==null&&(b=pa(T,x),b!=null&&j.push(Ta(T,b,k)))),R)break;T=T.return}0<j.length&&(g=new N(g,A,null,n,f),m.push({event:g,listeners:j}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",g&&n!==mh&&(A=n.relatedTarget||n.fromElement)&&(Ds(A)||A[sr]))break e;if((N||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,N?(A=n.relatedTarget||n.toElement,N=d,A=A?Ds(A):null,A!==null&&(R=Xs(A),A!==R||A.tag!==5&&A.tag!==6)&&(A=null)):(N=null,A=d),N!==A)){if(j=wg,b="onMouseLeave",x="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(j=Tg,b="onPointerLeave",x="onPointerEnter",T="pointer"),R=N==null?g:xi(N),k=A==null?g:xi(A),g=new j(b,T+"leave",N,n,f),g.target=R,g.relatedTarget=k,b=null,Ds(f)===d&&(j=new j(x,T+"enter",A,n,f),j.target=k,j.relatedTarget=R,b=j),R=b,N&&A)t:{for(j=N,x=A,T=0,k=j;k;k=mi(k))T++;for(k=0,b=x;b;b=mi(b))k++;for(;0<T-k;)j=mi(j),T--;for(;0<k-T;)x=mi(x),k--;for(;T--;){if(j===x||x!==null&&j===x.alternate)break t;j=mi(j),x=mi(x)}j=null}else j=null;N!==null&&jg(m,g,N,j,!1),A!==null&&R!==null&&jg(m,R,A,j,!0)}}e:{if(g=d?xi(d):window,N=g.nodeName&&g.nodeName.toLowerCase(),N==="select"||N==="input"&&g.type==="file")var V=lx;else if(xg(g))if(nw)V=hx;else{V=ux;var O=cx}else(N=g.nodeName)&&N.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=dx);if(V&&(V=V(t,d))){tw(m,V,n,f);break e}O&&O(t,g,d),t==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&ch(g,"number",g.value)}switch(O=d?xi(d):window,t){case"focusin":(xg(O)||O.contentEditable==="true")&&(Si=O,Eh=d,na=null);break;case"focusout":na=Eh=Si=null;break;case"mousedown":Th=!0;break;case"contextmenu":case"mouseup":case"dragend":Th=!1,Pg(m,n,f);break;case"selectionchange":if(px)break;case"keydown":case"keyup":Pg(m,n,f)}var w;if(Qf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ti?Z_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(J_&&n.locale!=="ko"&&(Ti||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ti&&(w=X_()):(Fr=f,Gf="value"in Fr?Fr.value:Fr.textContent,Ti=!0)),O=xc(d,y),0<O.length&&(y=new Eg(y,t,null,n,f),m.push({event:y,listeners:O}),w?y.data=w:(w=ew(n),w!==null&&(y.data=w)))),(w=rx?sx(t,n):ix(t,n))&&(d=xc(d,"onBeforeInput"),0<d.length&&(f=new Eg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=w))}hw(m,e)})}function Ta(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=pa(t,n),i!=null&&r.unshift(Ta(t,i,s)),i=pa(t,e),i!=null&&r.push(Ta(t,i,s))),t=t.return}return r}function mi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=pa(n,i),u!=null&&o.unshift(Ta(n,u,l))):s||(u=pa(n,i),u!=null&&o.push(Ta(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _x=/\r\n?/g,wx=/\u0000|\uFFFD/g;function bg(t){return(typeof t=="string"?t:""+t).replace(_x,`
`).replace(wx,"")}function bl(t,e,n){if(e=bg(e),bg(t)!==e&&n)throw Error($(425))}function kc(){}var Sh=null,Ih=null;function xh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kh=typeof setTimeout=="function"?setTimeout:void 0,Ex=typeof clearTimeout=="function"?clearTimeout:void 0,Og=typeof Promise=="function"?Promise:void 0,Tx=typeof queueMicrotask=="function"?queueMicrotask:typeof Og<"u"?function(t){return Og.resolve(null).then(t).catch(Sx)}:kh;function Sx(t){setTimeout(function(){throw t})}function Pd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),va(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);va(e)}function Gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oo=Math.random().toString(36).slice(2),Pn="__reactFiber$"+oo,Sa="__reactProps$"+oo,sr="__reactContainer$"+oo,Nh="__reactEvents$"+oo,Ix="__reactListeners$"+oo,xx="__reactHandles$"+oo;function Ds(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sr]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mg(t);t!==null;){if(n=t[Pn])return n;t=Mg(t)}return e}t=n,n=t.parentNode}return null}function Ga(t){return t=t[Pn]||t[sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function yu(t){return t[Sa]||null}var Ah=[],ki=-1;function fs(t){return{current:t}}function Ae(t){0>ki||(t.current=Ah[ki],Ah[ki]=null,ki--)}function Te(t,e){ki++,Ah[ki]=t.current,t.current=e}var ss={},Et=fs(ss),jt=fs(!1),Fs=ss;function Wi(t,e){var n=t.type.contextTypes;if(!n)return ss;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function Nc(){Ae(jt),Ae(Et)}function Lg(t,e,n){if(Et.current!==ss)throw Error($(168));Te(Et,e),Te(jt,n)}function mw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,cI(t)||"Unknown",s));return be({},n,r)}function Ac(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ss,Fs=Et.current,Te(Et,t),Te(jt,jt.current),!0}function Vg(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=mw(t,e,Fs),r.__reactInternalMemoizedMergedChildContext=t,Ae(jt),Ae(Et),Te(Et,t)):Ae(jt),Te(jt,n)}var Kn=null,vu=!1,Rd=!1;function pw(t){Kn===null?Kn=[t]:Kn.push(t)}function kx(t){vu=!0,pw(t)}function ms(){if(!Rd&&Kn!==null){Rd=!0;var t=0,e=we;try{var n=Kn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kn=null,vu=!1}catch(s){throw Kn!==null&&(Kn=Kn.slice(t+1)),U_(Bf,ms),s}finally{we=e,Rd=!1}}return null}var Ni=[],Ai=0,Cc=null,Pc=0,Jt=[],Zt=0,Us=null,Qn=1,Yn="";function Ns(t,e){Ni[Ai++]=Pc,Ni[Ai++]=Cc,Cc=t,Pc=e}function gw(t,e,n){Jt[Zt++]=Qn,Jt[Zt++]=Yn,Jt[Zt++]=Us,Us=t;var r=Qn;t=Yn;var s=32-gn(r)-1;r&=~(1<<s),n+=1;var i=32-gn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Qn=1<<32-gn(e)+s|n<<s|r,Yn=i+t}else Qn=1<<i|n<<s|r,Yn=t}function Xf(t){t.return!==null&&(Ns(t,1),gw(t,1,0))}function Jf(t){for(;t===Cc;)Cc=Ni[--Ai],Ni[Ai]=null,Pc=Ni[--Ai],Ni[Ai]=null;for(;t===Us;)Us=Jt[--Zt],Jt[Zt]=null,Yn=Jt[--Zt],Jt[Zt]=null,Qn=Jt[--Zt],Jt[Zt]=null}var Wt=null,Bt=null,Ce=!1,mn=null;function yw(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=Gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Us!==null?{id:Qn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,Bt=null,!0):!1;default:return!1}}function Ch(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ph(t){if(Ce){var e=Bt;if(e){var n=e;if(!Fg(t,e)){if(Ch(t))throw Error($(418));e=Gr(n.nextSibling);var r=Wt;e&&Fg(t,e)?yw(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Wt=t)}}else{if(Ch(t))throw Error($(418));t.flags=t.flags&-4097|2,Ce=!1,Wt=t}}}function Ug(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function Ol(t){if(t!==Wt)return!1;if(!Ce)return Ug(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xh(t.type,t.memoizedProps)),e&&(e=Bt)){if(Ch(t))throw vw(),Error($(418));for(;e;)yw(t,e),e=Gr(e.nextSibling)}if(Ug(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bt=Gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=Wt?Gr(t.stateNode.nextSibling):null;return!0}function vw(){for(var t=Bt;t;)t=Gr(t.nextSibling)}function qi(){Bt=Wt=null,Ce=!1}function Zf(t){mn===null?mn=[t]:mn.push(t)}var Nx=dr.ReactCurrentBatchConfig;function Vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Ml(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zg(t){var e=t._init;return e(t._payload)}function _w(t){function e(x,T){if(t){var k=x.deletions;k===null?(x.deletions=[T],x.flags|=16):k.push(T)}}function n(x,T){if(!t)return null;for(;T!==null;)e(x,T),T=T.sibling;return null}function r(x,T){for(x=new Map;T!==null;)T.key!==null?x.set(T.key,T):x.set(T.index,T),T=T.sibling;return x}function s(x,T){return x=Yr(x,T),x.index=0,x.sibling=null,x}function i(x,T,k){return x.index=k,t?(k=x.alternate,k!==null?(k=k.index,k<T?(x.flags|=2,T):k):(x.flags|=2,T)):(x.flags|=1048576,T)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,T,k,b){return T===null||T.tag!==6?(T=Vd(k,x.mode,b),T.return=x,T):(T=s(T,k),T.return=x,T)}function u(x,T,k,b){var V=k.type;return V===Ei?f(x,T,k.props.children,b,k.key):T!==null&&(T.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Rr&&zg(V)===T.type)?(b=s(T,k.props),b.ref=Vo(x,T,k),b.return=x,b):(b=ac(k.type,k.key,k.props,null,x.mode,b),b.ref=Vo(x,T,k),b.return=x,b)}function d(x,T,k,b){return T===null||T.tag!==4||T.stateNode.containerInfo!==k.containerInfo||T.stateNode.implementation!==k.implementation?(T=Fd(k,x.mode,b),T.return=x,T):(T=s(T,k.children||[]),T.return=x,T)}function f(x,T,k,b,V){return T===null||T.tag!==7?(T=Vs(k,x.mode,b,V),T.return=x,T):(T=s(T,k),T.return=x,T)}function m(x,T,k){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Vd(""+T,x.mode,k),T.return=x,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case xl:return k=ac(T.type,T.key,T.props,null,x.mode,k),k.ref=Vo(x,null,T),k.return=x,k;case wi:return T=Fd(T,x.mode,k),T.return=x,T;case Rr:var b=T._init;return m(x,b(T._payload),k)}if($o(T)||jo(T))return T=Vs(T,x.mode,k,null),T.return=x,T;Ml(x,T)}return null}function g(x,T,k,b){var V=T!==null?T.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return V!==null?null:l(x,T,""+k,b);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case xl:return k.key===V?u(x,T,k,b):null;case wi:return k.key===V?d(x,T,k,b):null;case Rr:return V=k._init,g(x,T,V(k._payload),b)}if($o(k)||jo(k))return V!==null?null:f(x,T,k,b,null);Ml(x,k)}return null}function N(x,T,k,b,V){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(k)||null,l(T,x,""+b,V);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case xl:return x=x.get(b.key===null?k:b.key)||null,u(T,x,b,V);case wi:return x=x.get(b.key===null?k:b.key)||null,d(T,x,b,V);case Rr:var O=b._init;return N(x,T,k,O(b._payload),V)}if($o(b)||jo(b))return x=x.get(k)||null,f(T,x,b,V,null);Ml(T,b)}return null}function A(x,T,k,b){for(var V=null,O=null,w=T,y=T=0,v=null;w!==null&&y<k.length;y++){w.index>y?(v=w,w=null):v=w.sibling;var E=g(x,w,k[y],b);if(E===null){w===null&&(w=v);break}t&&w&&E.alternate===null&&e(x,w),T=i(E,T,y),O===null?V=E:O.sibling=E,O=E,w=v}if(y===k.length)return n(x,w),Ce&&Ns(x,y),V;if(w===null){for(;y<k.length;y++)w=m(x,k[y],b),w!==null&&(T=i(w,T,y),O===null?V=w:O.sibling=w,O=w);return Ce&&Ns(x,y),V}for(w=r(x,w);y<k.length;y++)v=N(w,x,y,k[y],b),v!==null&&(t&&v.alternate!==null&&w.delete(v.key===null?y:v.key),T=i(v,T,y),O===null?V=v:O.sibling=v,O=v);return t&&w.forEach(function(I){return e(x,I)}),Ce&&Ns(x,y),V}function j(x,T,k,b){var V=jo(k);if(typeof V!="function")throw Error($(150));if(k=V.call(k),k==null)throw Error($(151));for(var O=V=null,w=T,y=T=0,v=null,E=k.next();w!==null&&!E.done;y++,E=k.next()){w.index>y?(v=w,w=null):v=w.sibling;var I=g(x,w,E.value,b);if(I===null){w===null&&(w=v);break}t&&w&&I.alternate===null&&e(x,w),T=i(I,T,y),O===null?V=I:O.sibling=I,O=I,w=v}if(E.done)return n(x,w),Ce&&Ns(x,y),V;if(w===null){for(;!E.done;y++,E=k.next())E=m(x,E.value,b),E!==null&&(T=i(E,T,y),O===null?V=E:O.sibling=E,O=E);return Ce&&Ns(x,y),V}for(w=r(x,w);!E.done;y++,E=k.next())E=N(w,x,y,E.value,b),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?y:E.key),T=i(E,T,y),O===null?V=E:O.sibling=E,O=E);return t&&w.forEach(function(C){return e(x,C)}),Ce&&Ns(x,y),V}function R(x,T,k,b){if(typeof k=="object"&&k!==null&&k.type===Ei&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case xl:e:{for(var V=k.key,O=T;O!==null;){if(O.key===V){if(V=k.type,V===Ei){if(O.tag===7){n(x,O.sibling),T=s(O,k.props.children),T.return=x,x=T;break e}}else if(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Rr&&zg(V)===O.type){n(x,O.sibling),T=s(O,k.props),T.ref=Vo(x,O,k),T.return=x,x=T;break e}n(x,O);break}else e(x,O);O=O.sibling}k.type===Ei?(T=Vs(k.props.children,x.mode,b,k.key),T.return=x,x=T):(b=ac(k.type,k.key,k.props,null,x.mode,b),b.ref=Vo(x,T,k),b.return=x,x=b)}return o(x);case wi:e:{for(O=k.key;T!==null;){if(T.key===O)if(T.tag===4&&T.stateNode.containerInfo===k.containerInfo&&T.stateNode.implementation===k.implementation){n(x,T.sibling),T=s(T,k.children||[]),T.return=x,x=T;break e}else{n(x,T);break}else e(x,T);T=T.sibling}T=Fd(k,x.mode,b),T.return=x,x=T}return o(x);case Rr:return O=k._init,R(x,T,O(k._payload),b)}if($o(k))return A(x,T,k,b);if(jo(k))return j(x,T,k,b);Ml(x,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,T!==null&&T.tag===6?(n(x,T.sibling),T=s(T,k),T.return=x,x=T):(n(x,T),T=Vd(k,x.mode,b),T.return=x,x=T),o(x)):n(x,T)}return R}var Gi=_w(!0),ww=_w(!1),Rc=fs(null),Dc=null,Ci=null,em=null;function tm(){em=Ci=Dc=null}function nm(t){var e=Rc.current;Ae(Rc),t._currentValue=e}function Rh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Li(t,e){Dc=t,em=Ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function rn(t){var e=t._currentValue;if(em!==t)if(t={context:t,memoizedValue:e,next:null},Ci===null){if(Dc===null)throw Error($(308));Ci=t,Dc.dependencies={lanes:0,firstContext:t}}else Ci=Ci.next=t;return e}var js=null;function rm(t){js===null?js=[t]:js.push(t)}function Ew(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,rm(e)):(n.next=s.next,s.next=n),e.interleaved=n,ir(t,r)}function ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dr=!1;function sm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ir(t,n)}return s=r.interleaved,s===null?(e.next=e,rm(r)):(e.next=s.next,s.next=e),r.interleaved=e,ir(t,n)}function tc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$f(t,n)}}function Bg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jc(t,e,n,r){var s=t.updateQueue;Dr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,N=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:N,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,j=l;switch(g=e,N=n,j.tag){case 1:if(A=j.payload,typeof A=="function"){m=A.call(N,m,g);break e}m=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=j.payload,g=typeof A=="function"?A.call(N,m,g):A,g==null)break e;m=be({},m,g);break e;case 2:Dr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else N={eventTime:N,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=N,u=m):f=f.next=N,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Bs|=o,t.lanes=o,t.memoizedState=m}}function $g(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Ha={},On=fs(Ha),Ia=fs(Ha),xa=fs(Ha);function bs(t){if(t===Ha)throw Error($(174));return t}function im(t,e){switch(Te(xa,e),Te(Ia,t),Te(On,Ha),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dh(e,t)}Ae(On),Te(On,e)}function Hi(){Ae(On),Ae(Ia),Ae(xa)}function Sw(t){bs(xa.current);var e=bs(On.current),n=dh(e,t.type);e!==n&&(Te(Ia,t),Te(On,n))}function om(t){Ia.current===t&&(Ae(On),Ae(Ia))}var Re=fs(0);function bc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dd=[];function am(){for(var t=0;t<Dd.length;t++)Dd[t]._workInProgressVersionPrimary=null;Dd.length=0}var nc=dr.ReactCurrentDispatcher,jd=dr.ReactCurrentBatchConfig,zs=0,De=null,Ke=null,Ze=null,Oc=!1,ra=!1,ka=0,Ax=0;function mt(){throw Error($(321))}function lm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function cm(t,e,n,r,s,i){if(zs=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nc.current=t===null||t.memoizedState===null?Dx:jx,t=n(r,s),ra){i=0;do{if(ra=!1,ka=0,25<=i)throw Error($(301));i+=1,Ze=Ke=null,e.updateQueue=null,nc.current=bx,t=n(r,s)}while(ra)}if(nc.current=Mc,e=Ke!==null&&Ke.next!==null,zs=0,Ze=Ke=De=null,Oc=!1,e)throw Error($(300));return t}function um(){var t=ka!==0;return ka=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?De.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function sn(){if(Ke===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Ze===null?De.memoizedState:Ze.next;if(e!==null)Ze=e,Ke=t;else{if(t===null)throw Error($(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?De.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function Na(t,e){return typeof e=="function"?e(t):e}function bd(t){var e=sn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((zs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,De.lanes|=f,Bs|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,vn(r,e.memoizedState)||(Dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,Bs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Od(t){var e=sn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vn(i,e.memoizedState)||(Dt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Iw(){}function xw(t,e){var n=De,r=sn(),s=e(),i=!vn(r.memoizedState,s);if(i&&(r.memoizedState=s,Dt=!0),r=r.queue,dm(Aw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Aa(9,Nw.bind(null,n,r,s,e),void 0,null),tt===null)throw Error($(349));zs&30||kw(n,e,s)}return s}function kw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Nw(t,e,n,r){e.value=n,e.getSnapshot=r,Cw(e)&&Pw(t)}function Aw(t,e,n){return n(function(){Cw(e)&&Pw(t)})}function Cw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function Pw(t){var e=ir(t,1);e!==null&&yn(e,t,1,-1)}function Wg(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},e.queue=t,t=t.dispatch=Rx.bind(null,De,t),[e.memoizedState,t]}function Aa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Rw(){return sn().memoizedState}function rc(t,e,n,r){var s=An();De.flags|=t,s.memoizedState=Aa(1|e,n,void 0,r===void 0?null:r)}function _u(t,e,n,r){var s=sn();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&lm(r,o.deps)){s.memoizedState=Aa(e,n,i,r);return}}De.flags|=t,s.memoizedState=Aa(1|e,n,i,r)}function qg(t,e){return rc(8390656,8,t,e)}function dm(t,e){return _u(2048,8,t,e)}function Dw(t,e){return _u(4,2,t,e)}function jw(t,e){return _u(4,4,t,e)}function bw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ow(t,e,n){return n=n!=null?n.concat([t]):null,_u(4,4,bw.bind(null,e,t),n)}function hm(){}function Mw(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lw(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vw(t,e,n){return zs&21?(vn(n,e)||(n=$_(),De.lanes|=n,Bs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function Cx(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=jd.transition;jd.transition={};try{t(!1),e()}finally{we=n,jd.transition=r}}function Fw(){return sn().memoizedState}function Px(t,e,n){var r=Qr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uw(t))zw(e,n);else if(n=Ew(t,e,n,r),n!==null){var s=xt();yn(n,t,r,s),Bw(n,e,r)}}function Rx(t,e,n){var r=Qr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uw(t))zw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,vn(l,o)){var u=e.interleaved;u===null?(s.next=s,rm(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Ew(t,e,s,r),n!==null&&(s=xt(),yn(n,t,r,s),Bw(n,e,r))}}function Uw(t){var e=t.alternate;return t===De||e!==null&&e===De}function zw(t,e){ra=Oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$f(t,n)}}var Mc={readContext:rn,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},Dx={readContext:rn,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:rn,useEffect:qg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rc(4194308,4,bw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rc(4194308,4,t,e)},useInsertionEffect:function(t,e){return rc(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=An();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Px.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:Wg,useDebugValue:hm,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=Wg(!1),e=t[0];return t=Cx.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=An();if(Ce){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),tt===null)throw Error($(349));zs&30||kw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,qg(Aw.bind(null,r,i,t),[t]),r.flags|=2048,Aa(9,Nw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=An(),e=tt.identifierPrefix;if(Ce){var n=Yn,r=Qn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ka++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ax++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jx={readContext:rn,useCallback:Mw,useContext:rn,useEffect:dm,useImperativeHandle:Ow,useInsertionEffect:Dw,useLayoutEffect:jw,useMemo:Lw,useReducer:bd,useRef:Rw,useState:function(){return bd(Na)},useDebugValue:hm,useDeferredValue:function(t){var e=sn();return Vw(e,Ke.memoizedState,t)},useTransition:function(){var t=bd(Na)[0],e=sn().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:xw,useId:Fw,unstable_isNewReconciler:!1},bx={readContext:rn,useCallback:Mw,useContext:rn,useEffect:dm,useImperativeHandle:Ow,useInsertionEffect:Dw,useLayoutEffect:jw,useMemo:Lw,useReducer:Od,useRef:Rw,useState:function(){return Od(Na)},useDebugValue:hm,useDeferredValue:function(t){var e=sn();return Ke===null?e.memoizedState=t:Vw(e,Ke.memoizedState,t)},useTransition:function(){var t=Od(Na)[0],e=sn().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:xw,useId:Fw,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Dh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wu={isMounted:function(t){return(t=t._reactInternals)?Xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Qr(t),i=er(r,s);i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(yn(e,t,s,r),tc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Qr(t),i=er(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(yn(e,t,s,r),tc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=Qr(t),s=er(n,r);s.tag=2,e!=null&&(s.callback=e),e=Hr(t,s,r),e!==null&&(yn(e,t,r,n),tc(e,t,r))}};function Gg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!wa(n,r)||!wa(s,i):!0}function $w(t,e,n){var r=!1,s=ss,i=e.contextType;return typeof i=="object"&&i!==null?i=rn(i):(s=bt(e)?Fs:Et.current,r=e.contextTypes,i=(r=r!=null)?Wi(t,s):ss),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Hg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wu.enqueueReplaceState(e,e.state,null)}function jh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},sm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rn(i):(i=bt(e)?Fs:Et.current,s.context=Wi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Dh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wu.enqueueReplaceState(s,s.state,null),jc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ki(t,e){try{var n="",r=e;do n+=lI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Md(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ox=typeof WeakMap=="function"?WeakMap:Map;function Ww(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vc||(Vc=!0,Wh=r),bh(t,e)},n}function qw(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bh(t,e),typeof r!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Kg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ox;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Qx.bind(null,t,e,n),e.then(t,t))}function Qg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var Mx=dr.ReactCurrentOwner,Dt=!1;function It(t,e,n,r){e.child=t===null?ww(e,null,n,r):Gi(e,t.child,n,r)}function Xg(t,e,n,r,s){n=n.render;var i=e.ref;return Li(e,s),r=cm(t,e,n,r,i,s),n=um(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,or(t,e,s)):(Ce&&n&&Xf(e),e.flags|=1,It(t,e,r,s),e.child)}function Jg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!wm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Gw(t,e,i,r,s)):(t=ac(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:wa,n(o,r)&&t.ref===e.ref)return or(t,e,s)}return e.flags|=1,t=Yr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Gw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(wa(i,r)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,or(t,e,s)}return Oh(t,e,n,r,s)}function Hw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ri,Ft),Ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Ri,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Ri,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Ri,Ft),Ft|=r;return It(t,e,s,n),e.child}function Kw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Oh(t,e,n,r,s){var i=bt(n)?Fs:Et.current;return i=Wi(e,i),Li(e,s),n=cm(t,e,n,r,i,s),r=um(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,or(t,e,s)):(Ce&&r&&Xf(e),e.flags|=1,It(t,e,n,s),e.child)}function Zg(t,e,n,r,s){if(bt(n)){var i=!0;Ac(e)}else i=!1;if(Li(e,s),e.stateNode===null)sc(t,e),$w(e,n,r),jh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=rn(d):(d=bt(n)?Fs:Et.current,d=Wi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Hg(e,o,r,d),Dr=!1;var g=e.memoizedState;o.state=g,jc(e,r,o,s),u=e.memoizedState,l!==r||g!==u||jt.current||Dr?(typeof f=="function"&&(Dh(e,n,f,r),u=e.memoizedState),(l=Dr||Gg(e,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Tw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:hn(e.type,l),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rn(u):(u=bt(n)?Fs:Et.current,u=Wi(e,u));var N=n.getDerivedStateFromProps;(f=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Hg(e,o,r,u),Dr=!1,g=e.memoizedState,o.state=g,jc(e,r,o,s);var A=e.memoizedState;l!==m||g!==A||jt.current||Dr?(typeof N=="function"&&(Dh(e,n,N,r),A=e.memoizedState),(d=Dr||Gg(e,n,d,r,g,A,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Mh(t,e,n,r,i,s)}function Mh(t,e,n,r,s,i){Kw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Vg(e,n,!1),or(t,e,i);r=e.stateNode,Mx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Gi(e,t.child,null,i),e.child=Gi(e,null,l,i)):It(t,e,l,i),e.memoizedState=r.state,s&&Vg(e,n,!0),e.child}function Qw(t){var e=t.stateNode;e.pendingContext?Lg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lg(t,e.context,!1),im(t,e.containerInfo)}function ey(t,e,n,r,s){return qi(),Zf(s),e.flags|=256,It(t,e,n,r),e.child}var Lh={dehydrated:null,treeContext:null,retryLane:0};function Vh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yw(t,e,n){var r=e.pendingProps,s=Re.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Re,s&1),t===null)return Ph(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Su(o,r,0,null),t=Vs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vh(n),e.memoizedState=Lh,t):fm(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Lx(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Yr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Yr(l,i):(i=Vs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Vh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Lh,r}return i=t.child,t=i.sibling,r=Yr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fm(t,e){return e=Su({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ll(t,e,n,r){return r!==null&&Zf(r),Gi(e,t.child,null,n),t=fm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Md(Error($(422))),Ll(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Su({mode:"visible",children:r.children},s,0,null),i=Vs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Gi(e,t.child,null,o),e.child.memoizedState=Vh(o),e.memoizedState=Lh,i);if(!(e.mode&1))return Ll(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=Md(i,r,void 0),Ll(t,e,o,r)}if(l=(o&t.childLanes)!==0,Dt||l){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ir(t,s),yn(r,t,s,-1))}return _m(),r=Md(Error($(421))),Ll(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Yx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Bt=Gr(s.nextSibling),Wt=e,Ce=!0,mn=null,t!==null&&(Jt[Zt++]=Qn,Jt[Zt++]=Yn,Jt[Zt++]=Us,Qn=t.id,Yn=t.overflow,Us=e),e=fm(e,r.children),e.flags|=4096,e)}function ty(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rh(t.return,e,n)}function Ld(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Xw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(It(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ty(t,n,e);else if(t.tag===19)ty(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&bc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ld(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&bc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ld(e,!0,n,null,i);break;case"together":Ld(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Vx(t,e,n){switch(e.tag){case 3:Qw(e),qi();break;case 5:Sw(e);break;case 1:bt(e.type)&&Ac(e);break;case 4:im(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Rc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?Yw(t,e,n):(Te(Re,Re.current&1),t=or(t,e,n),t!==null?t.sibling:null);Te(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Xw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,Hw(t,e,n)}return or(t,e,n)}var Jw,Fh,Zw,e0;Jw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fh=function(){};Zw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,bs(On.current);var i=null;switch(n){case"input":s=ah(t,s),r=ah(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=uh(t,s),r=uh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=kc)}hh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ke("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};e0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fx(t,e,n){var r=e.pendingProps;switch(Jf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return bt(e.type)&&Nc(),pt(e),null;case 3:return r=e.stateNode,Hi(),Ae(jt),Ae(Et),am(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(Hh(mn),mn=null))),Fh(t,e),pt(e),null;case 5:om(e);var s=bs(xa.current);if(n=e.type,t!==null&&e.stateNode!=null)Zw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return pt(e),null}if(t=bs(On.current),Ol(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Pn]=e,r[Sa]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<qo.length;s++)ke(qo[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":ug(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":hg(r,i),ke("invalid",r)}hh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,l,t),s=["children",""+l]):fa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":kl(r),dg(r,i,!0);break;case"textarea":kl(r),fg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=kc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pn]=e,t[Sa]=r,Jw(t,e,!1,!1),e.stateNode=t;e:{switch(o=fh(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<qo.length;s++)ke(qo[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":ug(t,r),s=ah(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),ke("invalid",t);break;case"textarea":hg(t,r),s=uh(t,r),ke("invalid",t);break;default:s=r}hh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?R_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&C_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ma(t,u):typeof u=="number"&&ma(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ke("scroll",t):u!=null&&Lf(t,i,u,o))}switch(n){case"input":kl(t),dg(t,r,!1);break;case"textarea":kl(t),fg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+rs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ji(t,!!r.multiple,i,!1):r.defaultValue!=null&&ji(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=kc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)e0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=bs(xa.current),bs(On.current),Ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pn]=e,(i=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=e,e.stateNode=r}return pt(e),null;case 13:if(Ae(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Bt!==null&&e.mode&1&&!(e.flags&128))vw(),qi(),e.flags|=98560,i=!1;else if(i=Ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Pn]=e}else qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),i=!1}else mn!==null&&(Hh(mn),mn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Qe===0&&(Qe=3):_m())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return Hi(),Fh(t,e),t===null&&Ea(e.stateNode.containerInfo),pt(e),null;case 10:return nm(e.type._context),pt(e),null;case 17:return bt(e.type)&&Nc(),pt(e),null;case 19:if(Ae(Re),i=e.memoizedState,i===null)return pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Fo(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bc(t),o!==null){for(e.flags|=128,Fo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>Qi&&(e.flags|=128,r=!0,Fo(i,!1),e.lanes=4194304)}else{if(!r)if(t=bc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return pt(e),null}else 2*Ue()-i.renderingStartTime>Qi&&n!==1073741824&&(e.flags|=128,r=!0,Fo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=Re.current,Te(Re,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return vm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Ux(t,e){switch(Jf(e),e.tag){case 1:return bt(e.type)&&Nc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hi(),Ae(jt),Ae(Et),am(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return om(e),null;case 13:if(Ae(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Re),null;case 4:return Hi(),null;case 10:return nm(e.type._context),null;case 22:case 23:return vm(),null;case 24:return null;default:return null}}var Vl=!1,_t=!1,zx=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Pi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Uh(t,e,n){try{n()}catch(r){Le(t,e,r)}}var ny=!1;function Bx(t,e){if(Sh=Sc,t=iw(),Yf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var N;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(N=m.firstChild)!==null;)g=m,m=N;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(N=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=N}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ih={focusedElem:t,selectionRange:n},Sc=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var j=A.memoizedProps,R=A.memoizedState,x=e.stateNode,T=x.getSnapshotBeforeUpdate(e.elementType===e.type?j:hn(e.type,j),R);x.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(b){Le(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return A=ny,ny=!1,A}function sa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Uh(e,n,i)}s=s.next}while(s!==r)}}function Eu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function t0(t){var e=t.alternate;e!==null&&(t.alternate=null,t0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[Sa],delete e[Nh],delete e[Ix],delete e[xx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function n0(t){return t.tag===5||t.tag===3||t.tag===4}function ry(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||n0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=kc));else if(r!==4&&(t=t.child,t!==null))for(Bh(t,e,n),t=t.sibling;t!==null;)Bh(t,e,n),t=t.sibling}function $h(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($h(t,e,n),t=t.sibling;t!==null;)$h(t,e,n),t=t.sibling}var ot=null,fn=!1;function Ar(t,e,n){for(n=n.child;n!==null;)r0(t,e,n),n=n.sibling}function r0(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(fu,n)}catch{}switch(n.tag){case 5:_t||Pi(n,e);case 6:var r=ot,s=fn;ot=null,Ar(t,e,n),ot=r,fn=s,ot!==null&&(fn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(fn?(t=ot,n=n.stateNode,t.nodeType===8?Pd(t.parentNode,n):t.nodeType===1&&Pd(t,n),va(t)):Pd(ot,n.stateNode));break;case 4:r=ot,s=fn,ot=n.stateNode.containerInfo,fn=!0,Ar(t,e,n),ot=r,fn=s;break;case 0:case 11:case 14:case 15:if(!_t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Uh(n,e,o),s=s.next}while(s!==r)}Ar(t,e,n);break;case 1:if(!_t&&(Pi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,e,l)}Ar(t,e,n);break;case 21:Ar(t,e,n);break;case 22:n.mode&1?(_t=(r=_t)||n.memoizedState!==null,Ar(t,e,n),_t=r):Ar(t,e,n);break;default:Ar(t,e,n)}}function sy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zx),e.forEach(function(r){var s=Xx.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,fn=!1;break e;case 3:ot=l.stateNode.containerInfo,fn=!0;break e;case 4:ot=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(ot===null)throw Error($(160));r0(i,o,s),ot=null,fn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Le(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)s0(e,t),e=e.sibling}function s0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),Nn(t),r&4){try{sa(3,t,t.return),Eu(3,t)}catch(j){Le(t,t.return,j)}try{sa(5,t,t.return)}catch(j){Le(t,t.return,j)}}break;case 1:dn(e,t),Nn(t),r&512&&n!==null&&Pi(n,n.return);break;case 5:if(dn(e,t),Nn(t),r&512&&n!==null&&Pi(n,n.return),t.flags&32){var s=t.stateNode;try{ma(s,"")}catch(j){Le(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&k_(s,i),fh(l,o);var d=fh(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?R_(s,m):f==="dangerouslySetInnerHTML"?C_(s,m):f==="children"?ma(s,m):Lf(s,f,m,d)}switch(l){case"input":lh(s,i);break;case"textarea":N_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var N=i.value;N!=null?ji(s,!!i.multiple,N,!1):g!==!!i.multiple&&(i.defaultValue!=null?ji(s,!!i.multiple,i.defaultValue,!0):ji(s,!!i.multiple,i.multiple?[]:"",!1))}s[Sa]=i}catch(j){Le(t,t.return,j)}}break;case 6:if(dn(e,t),Nn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){Le(t,t.return,j)}}break;case 3:if(dn(e,t),Nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{va(e.containerInfo)}catch(j){Le(t,t.return,j)}break;case 4:dn(e,t),Nn(t);break;case 13:dn(e,t),Nn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(gm=Ue())),r&4&&sy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(_t=(d=_t)||f,dn(e,t),_t=d):dn(e,t),Nn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(m=Q=f;Q!==null;){switch(g=Q,N=g.child,g.tag){case 0:case 11:case 14:case 15:sa(4,g,g.return);break;case 1:Pi(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(j){Le(r,n,j)}}break;case 5:Pi(g,g.return);break;case 22:if(g.memoizedState!==null){oy(m);continue}}N!==null?(N.return=g,Q=N):oy(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=P_("display",o))}catch(j){Le(t,t.return,j)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(j){Le(t,t.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:dn(e,t),Nn(t),r&4&&sy(t);break;case 21:break;default:dn(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(n0(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ma(s,""),r.flags&=-33);var i=ry(t);$h(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ry(t);Bh(t,l,o);break;default:throw Error($(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $x(t,e,n){Q=t,i0(t)}function i0(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Vl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||_t;l=Vl;var d=_t;if(Vl=o,(_t=u)&&!d)for(Q=s;Q!==null;)o=Q,u=o.child,o.tag===22&&o.memoizedState!==null?ay(s):u!==null?(u.return=o,Q=u):ay(s);for(;i!==null;)Q=i,i0(i),i=i.sibling;Q=s,Vl=l,_t=d}iy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):iy(t)}}function iy(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_t||Eu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_t)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$g(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$g(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&va(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}_t||e.flags&512&&zh(e)}catch(g){Le(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function oy(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function ay(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Eu(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{zh(e)}catch(u){Le(e,i,u)}break;case 5:var o=e.return;try{zh(e)}catch(u){Le(e,o,u)}}}catch(u){Le(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var Wx=Math.ceil,Lc=dr.ReactCurrentDispatcher,mm=dr.ReactCurrentOwner,tn=dr.ReactCurrentBatchConfig,me=0,tt=null,We=null,ct=0,Ft=0,Ri=fs(0),Qe=0,Ca=null,Bs=0,Tu=0,pm=0,ia=null,Pt=null,gm=0,Qi=1/0,Hn=null,Vc=!1,Wh=null,Kr=null,Fl=!1,Ur=null,Fc=0,oa=0,qh=null,ic=-1,oc=0;function xt(){return me&6?Ue():ic!==-1?ic:ic=Ue()}function Qr(t){return t.mode&1?me&2&&ct!==0?ct&-ct:Nx.transition!==null?(oc===0&&(oc=$_()),oc):(t=we,t!==0||(t=window.event,t=t===void 0?16:Y_(t.type)),t):1}function yn(t,e,n,r){if(50<oa)throw oa=0,qh=null,Error($(185));Wa(t,n,r),(!(me&2)||t!==tt)&&(t===tt&&(!(me&2)&&(Tu|=n),Qe===4&&br(t,ct)),Ot(t,r),n===1&&me===0&&!(e.mode&1)&&(Qi=Ue()+500,vu&&ms()))}function Ot(t,e){var n=t.callbackNode;NI(t,e);var r=Tc(t,t===tt?ct:0);if(r===0)n!==null&&gg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gg(n),e===1)t.tag===0?kx(ly.bind(null,t)):pw(ly.bind(null,t)),Tx(function(){!(me&6)&&ms()}),n=null;else{switch(W_(r)){case 1:n=Bf;break;case 4:n=z_;break;case 16:n=Ec;break;case 536870912:n=B_;break;default:n=Ec}n=f0(n,o0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function o0(t,e){if(ic=-1,oc=0,me&6)throw Error($(327));var n=t.callbackNode;if(Vi()&&t.callbackNode!==n)return null;var r=Tc(t,t===tt?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Uc(t,r);else{e=r;var s=me;me|=2;var i=l0();(tt!==t||ct!==e)&&(Hn=null,Qi=Ue()+500,Ls(t,e));do try{Hx();break}catch(l){a0(t,l)}while(!0);tm(),Lc.current=i,me=s,We!==null?e=0:(tt=null,ct=0,e=Qe)}if(e!==0){if(e===2&&(s=vh(t),s!==0&&(r=s,e=Gh(t,s))),e===1)throw n=Ca,Ls(t,0),br(t,r),Ot(t,Ue()),n;if(e===6)br(t,r);else{if(s=t.current.alternate,!(r&30)&&!qx(s)&&(e=Uc(t,r),e===2&&(i=vh(t),i!==0&&(r=i,e=Gh(t,i))),e===1))throw n=Ca,Ls(t,0),br(t,r),Ot(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:As(t,Pt,Hn);break;case 3:if(br(t,r),(r&130023424)===r&&(e=gm+500-Ue(),10<e)){if(Tc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kh(As.bind(null,t,Pt,Hn),e);break}As(t,Pt,Hn);break;case 4:if(br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Wx(r/1960))-r,10<r){t.timeoutHandle=kh(As.bind(null,t,Pt,Hn),r);break}As(t,Pt,Hn);break;case 5:As(t,Pt,Hn);break;default:throw Error($(329))}}}return Ot(t,Ue()),t.callbackNode===n?o0.bind(null,t):null}function Gh(t,e){var n=ia;return t.current.memoizedState.isDehydrated&&(Ls(t,e).flags|=256),t=Uc(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&Hh(e)),t}function Hh(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function qx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~pm,e&=~Tu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function ly(t){if(me&6)throw Error($(327));Vi();var e=Tc(t,0);if(!(e&1))return Ot(t,Ue()),null;var n=Uc(t,e);if(t.tag!==0&&n===2){var r=vh(t);r!==0&&(e=r,n=Gh(t,r))}if(n===1)throw n=Ca,Ls(t,0),br(t,e),Ot(t,Ue()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,As(t,Pt,Hn),Ot(t,Ue()),null}function ym(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(Qi=Ue()+500,vu&&ms())}}function $s(t){Ur!==null&&Ur.tag===0&&!(me&6)&&Vi();var e=me;me|=1;var n=tn.transition,r=we;try{if(tn.transition=null,we=1,t)return t()}finally{we=r,tn.transition=n,me=e,!(me&6)&&ms()}}function vm(){Ft=Ri.current,Ae(Ri)}function Ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ex(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Jf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nc();break;case 3:Hi(),Ae(jt),Ae(Et),am();break;case 5:om(r);break;case 4:Hi();break;case 13:Ae(Re);break;case 19:Ae(Re);break;case 10:nm(r.type._context);break;case 22:case 23:vm()}n=n.return}if(tt=t,We=t=Yr(t.current,null),ct=Ft=e,Qe=0,Ca=null,pm=Tu=Bs=0,Pt=ia=null,js!==null){for(e=0;e<js.length;e++)if(n=js[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}js=null}return t}function a0(t,e){do{var n=We;try{if(tm(),nc.current=Mc,Oc){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Oc=!1}if(zs=0,Ze=Ke=De=null,ra=!1,ka=0,mm.current=null,n===null||n.return===null){Qe=1,Ca=e,We=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=ct,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var N=Qg(o);if(N!==null){N.flags&=-257,Yg(N,o,l,i,e),N.mode&1&&Kg(i,d,e),e=N,u=d;var A=e.updateQueue;if(A===null){var j=new Set;j.add(u),e.updateQueue=j}else A.add(u);break e}else{if(!(e&1)){Kg(i,d,e),_m();break e}u=Error($(426))}}else if(Ce&&l.mode&1){var R=Qg(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Yg(R,o,l,i,e),Zf(Ki(u,l));break e}}i=u=Ki(u,l),Qe!==4&&(Qe=2),ia===null?ia=[i]:ia.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=Ww(i,u,e);Bg(i,x);break e;case 1:l=u;var T=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Kr===null||!Kr.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=qw(i,l,e);Bg(i,b);break e}}i=i.return}while(i!==null)}u0(n)}catch(V){e=V,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function l0(){var t=Lc.current;return Lc.current=Mc,t===null?Mc:t}function _m(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),tt===null||!(Bs&268435455)&&!(Tu&268435455)||br(tt,ct)}function Uc(t,e){var n=me;me|=2;var r=l0();(tt!==t||ct!==e)&&(Hn=null,Ls(t,e));do try{Gx();break}catch(s){a0(t,s)}while(!0);if(tm(),me=n,Lc.current=r,We!==null)throw Error($(261));return tt=null,ct=0,Qe}function Gx(){for(;We!==null;)c0(We)}function Hx(){for(;We!==null&&!vI();)c0(We)}function c0(t){var e=h0(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?u0(t):We=e,mm.current=null}function u0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ux(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,We=null;return}}else if(n=Fx(n,e,Ft),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Qe===0&&(Qe=5)}function As(t,e,n){var r=we,s=tn.transition;try{tn.transition=null,we=1,Kx(t,e,n,r)}finally{tn.transition=s,we=r}return null}function Kx(t,e,n,r){do Vi();while(Ur!==null);if(me&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(AI(t,i),t===tt&&(We=tt=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,f0(Ec,function(){return Vi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tn.transition,tn.transition=null;var o=we;we=1;var l=me;me|=4,mm.current=null,Bx(t,n),s0(n,t),mx(Ih),Sc=!!Sh,Ih=Sh=null,t.current=n,$x(n),_I(),me=l,we=o,tn.transition=i}else t.current=n;if(Fl&&(Fl=!1,Ur=t,Fc=s),i=t.pendingLanes,i===0&&(Kr=null),TI(n.stateNode),Ot(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vc)throw Vc=!1,t=Wh,Wh=null,t;return Fc&1&&t.tag!==0&&Vi(),i=t.pendingLanes,i&1?t===qh?oa++:(oa=0,qh=t):oa=0,ms(),null}function Vi(){if(Ur!==null){var t=W_(Fc),e=tn.transition,n=we;try{if(tn.transition=null,we=16>t?16:t,Ur===null)var r=!1;else{if(t=Ur,Ur=null,Fc=0,me&6)throw Error($(331));var s=me;for(me|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Q=d;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:sa(8,f,i)}var m=f.child;if(m!==null)m.return=f,Q=m;else for(;Q!==null;){f=Q;var g=f.sibling,N=f.return;if(t0(f),f===d){Q=null;break}if(g!==null){g.return=N,Q=g;break}Q=N}}}var A=i.alternate;if(A!==null){var j=A.child;if(j!==null){A.child=null;do{var R=j.sibling;j.sibling=null,j=R}while(j!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sa(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Q=x;break e}Q=i.return}}var T=t.current;for(Q=T;Q!==null;){o=Q;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,Q=k;else e:for(o=T;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Eu(9,l)}}catch(V){Le(l,l.return,V)}if(l===o){Q=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,Q=b;break e}Q=l.return}}if(me=s,ms(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(fu,t)}catch{}r=!0}return r}finally{we=n,tn.transition=e}}return!1}function cy(t,e,n){e=Ki(n,e),e=Ww(t,e,1),t=Hr(t,e,1),e=xt(),t!==null&&(Wa(t,1,e),Ot(t,e))}function Le(t,e,n){if(t.tag===3)cy(t,t,n);else for(;e!==null;){if(e.tag===3){cy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kr===null||!Kr.has(r))){t=Ki(n,t),t=qw(e,t,1),e=Hr(e,t,1),t=xt(),e!==null&&(Wa(e,1,t),Ot(e,t));break}}e=e.return}}function Qx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(ct&n)===n&&(Qe===4||Qe===3&&(ct&130023424)===ct&&500>Ue()-gm?Ls(t,0):pm|=n),Ot(t,e)}function d0(t,e){e===0&&(t.mode&1?(e=Cl,Cl<<=1,!(Cl&130023424)&&(Cl=4194304)):e=1);var n=xt();t=ir(t,e),t!==null&&(Wa(t,e,n),Ot(t,n))}function Yx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),d0(t,n)}function Xx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),d0(t,n)}var h0;h0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,Vx(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Ce&&e.flags&1048576&&gw(e,Pc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sc(t,e),t=e.pendingProps;var s=Wi(e,Et.current);Li(e,n),s=cm(null,e,r,t,s,n);var i=um();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(i=!0,Ac(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sm(e),s.updater=wu,e.stateNode=s,s._reactInternals=e,jh(e,r,t,n),e=Mh(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&Xf(e),It(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Zx(r),t=hn(r,t),s){case 0:e=Oh(null,e,r,t,n);break e;case 1:e=Zg(null,e,r,t,n);break e;case 11:e=Xg(null,e,r,t,n);break e;case 14:e=Jg(null,e,r,hn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Oh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Zg(t,e,r,s,n);case 3:e:{if(Qw(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Tw(t,e),jc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ki(Error($(423)),e),e=ey(t,e,r,n,s);break e}else if(r!==s){s=Ki(Error($(424)),e),e=ey(t,e,r,n,s);break e}else for(Bt=Gr(e.stateNode.containerInfo.firstChild),Wt=e,Ce=!0,mn=null,n=ww(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qi(),r===s){e=or(t,e,n);break e}It(t,e,r,n)}e=e.child}return e;case 5:return Sw(e),t===null&&Ph(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,xh(r,s)?o=null:i!==null&&xh(r,i)&&(e.flags|=32),Kw(t,e),It(t,e,o,n),e.child;case 6:return t===null&&Ph(e),null;case 13:return Yw(t,e,n);case 4:return im(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Gi(e,null,r,n):It(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Xg(t,e,r,s,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Rc,r._currentValue),r._currentValue=o,i!==null)if(vn(i.value,o)){if(i.children===s.children&&!jt.current){e=or(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=er(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Rh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Rh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}It(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Li(e,n),s=rn(s),r=r(s),e.flags|=1,It(t,e,r,n),e.child;case 14:return r=e.type,s=hn(r,e.pendingProps),s=hn(r.type,s),Jg(t,e,r,s,n);case 15:return Gw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),sc(t,e),e.tag=1,bt(r)?(t=!0,Ac(e)):t=!1,Li(e,n),$w(e,r,s),jh(e,r,s,n),Mh(null,e,r,!0,t,n);case 19:return Xw(t,e,n);case 22:return Hw(t,e,n)}throw Error($(156,e.tag))};function f0(t,e){return U_(t,e)}function Jx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new Jx(t,e,n,r)}function wm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zx(t){if(typeof t=="function")return wm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ff)return 11;if(t===Uf)return 14}return 2}function Yr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ac(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")wm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ei:return Vs(n.children,s,i,e);case Vf:o=8,s|=8;break;case rh:return t=en(12,n,e,s|2),t.elementType=rh,t.lanes=i,t;case sh:return t=en(13,n,e,s),t.elementType=sh,t.lanes=i,t;case ih:return t=en(19,n,e,s),t.elementType=ih,t.lanes=i,t;case S_:return Su(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E_:o=10;break e;case T_:o=9;break e;case Ff:o=11;break e;case Uf:o=14;break e;case Rr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=en(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Vs(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function Su(t,e,n,r){return t=en(22,t,r,e),t.elementType=S_,t.lanes=n,t.stateNode={isHidden:!1},t}function Vd(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function Fd(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function e1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_d(0),this.expirationTimes=_d(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_d(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Em(t,e,n,r,s,i,o,l,u){return t=new e1(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=en(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sm(i),t}function t1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function m0(t){if(!t)return ss;t=t._reactInternals;e:{if(Xs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(bt(n))return mw(t,n,e)}return e}function p0(t,e,n,r,s,i,o,l,u){return t=Em(n,r,!0,t,s,i,o,l,u),t.context=m0(null),n=t.current,r=xt(),s=Qr(n),i=er(r,s),i.callback=e??null,Hr(n,i,s),t.current.lanes=s,Wa(t,s,r),Ot(t,r),t}function Iu(t,e,n,r){var s=e.current,i=xt(),o=Qr(s);return n=m0(n),e.context===null?e.context=n:e.pendingContext=n,e=er(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(s,e,o),t!==null&&(yn(t,s,o,i),tc(t,s,o)),o}function zc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tm(t,e){uy(t,e),(t=t.alternate)&&uy(t,e)}function n1(){return null}var g0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sm(t){this._internalRoot=t}xu.prototype.render=Sm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Iu(t,e,null,null)};xu.prototype.unmount=Sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$s(function(){Iu(null,t,null,null)}),e[sr]=null}};function xu(t){this._internalRoot=t}xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=H_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jr.length&&e!==0&&e<jr[n].priority;n++);jr.splice(n,0,t),n===0&&Q_(t)}};function Im(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ku(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dy(){}function r1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=zc(o);i.call(d)}}var o=p0(e,r,t,0,null,!1,!1,"",dy);return t._reactRootContainer=o,t[sr]=o.current,Ea(t.nodeType===8?t.parentNode:t),$s(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=zc(u);l.call(d)}}var u=Em(t,0,!1,null,null,!1,!1,"",dy);return t._reactRootContainer=u,t[sr]=u.current,Ea(t.nodeType===8?t.parentNode:t),$s(function(){Iu(e,u,n,r)}),u}function Nu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=zc(o);l.call(u)}}Iu(e,o,t,s)}else o=r1(n,e,t,s,r);return zc(o)}q_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wo(e.pendingLanes);n!==0&&($f(e,n|1),Ot(e,Ue()),!(me&6)&&(Qi=Ue()+500,ms()))}break;case 13:$s(function(){var r=ir(t,1);if(r!==null){var s=xt();yn(r,t,1,s)}}),Tm(t,1)}};Wf=function(t){if(t.tag===13){var e=ir(t,134217728);if(e!==null){var n=xt();yn(e,t,134217728,n)}Tm(t,134217728)}};G_=function(t){if(t.tag===13){var e=Qr(t),n=ir(t,e);if(n!==null){var r=xt();yn(n,t,e,r)}Tm(t,e)}};H_=function(){return we};K_=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};ph=function(t,e,n){switch(e){case"input":if(lh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yu(r);if(!s)throw Error($(90));x_(r),lh(r,s)}}}break;case"textarea":N_(t,n);break;case"select":e=n.value,e!=null&&ji(t,!!n.multiple,e,!1)}};b_=ym;O_=$s;var s1={usingClientEntryPoint:!1,Events:[Ga,xi,yu,D_,j_,ym]},Uo={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i1={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V_(t),t===null?null:t.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||n1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{fu=Ul.inject(i1),bn=Ul}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s1;Gt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Im(e))throw Error($(200));return t1(t,e,null,n)};Gt.createRoot=function(t,e){if(!Im(t))throw Error($(299));var n=!1,r="",s=g0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Em(t,1,!1,null,null,n,!1,r,s),t[sr]=e.current,Ea(t.nodeType===8?t.parentNode:t),new Sm(e)};Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=V_(e),t=t===null?null:t.stateNode,t};Gt.flushSync=function(t){return $s(t)};Gt.hydrate=function(t,e,n){if(!ku(e))throw Error($(200));return Nu(null,t,e,!0,n)};Gt.hydrateRoot=function(t,e,n){if(!Im(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=g0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=p0(e,null,t,1,n??null,s,!1,i,o),t[sr]=e.current,Ea(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new xu(e)};Gt.render=function(t,e,n){if(!ku(e))throw Error($(200));return Nu(null,t,e,!1,n)};Gt.unmountComponentAtNode=function(t){if(!ku(t))throw Error($(40));return t._reactRootContainer?($s(function(){Nu(null,null,t,!1,function(){t._reactRootContainer=null,t[sr]=null})}),!0):!1};Gt.unstable_batchedUpdates=ym;Gt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ku(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Nu(t,e,n,!1,r)};Gt.version="18.3.1-next-f1338f8080-20240426";function y0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y0)}catch(t){console.error(t)}}y0(),y_.exports=Gt;var o1=y_.exports,hy=o1;th.createRoot=hy.createRoot,th.hydrateRoot=hy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pa(){return Pa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pa.apply(this,arguments)}var zr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zr||(zr={}));const fy="popstate";function a1(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Kh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Bc(s)}return c1(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function v0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function l1(){return Math.random().toString(36).substr(2,8)}function my(t,e){return{usr:t.state,key:t.key,idx:e}}function Kh(t,e,n,r){return n===void 0&&(n=null),Pa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ao(e):e,{state:n,key:e&&e.key||r||l1()})}function Bc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function c1(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=zr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Pa({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=zr.Pop;let R=f(),x=R==null?null:R-d;d=R,u&&u({action:l,location:j.location,delta:x})}function g(R,x){l=zr.Push;let T=Kh(j.location,R,x);d=f()+1;let k=my(T,d),b=j.createHref(T);try{o.pushState(k,"",b)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(b)}i&&u&&u({action:l,location:j.location,delta:1})}function N(R,x){l=zr.Replace;let T=Kh(j.location,R,x);d=f();let k=my(T,d),b=j.createHref(T);o.replaceState(k,"",b),i&&u&&u({action:l,location:j.location,delta:0})}function A(R){let x=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof R=="string"?R:Bc(R);return T=T.replace(/ $/,"%20"),je(x,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,x)}let j={get action(){return l},get location(){return t(s,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(fy,m),u=R,()=>{s.removeEventListener(fy,m),u=null}},createHref(R){return e(s,R)},createURL:A,encodeLocation(R){let x=A(R);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:N,go(R){return o.go(R)}};return j}var py;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(py||(py={}));function u1(t,e,n){return n===void 0&&(n="/"),d1(t,e,n)}function d1(t,e,n,r){let s=typeof e=="string"?ao(e):e,i=Yi(s.pathname||"/",n);if(i==null)return null;let o=_0(t);h1(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=S1(i);l=E1(o[u],d)}return l}function _0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(je(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Xr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),_0(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:_1(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of w0(i.path))s(i,o,u)}),e}function w0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=w0(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function h1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:w1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const f1=/^:[\w-]+$/,m1=3,p1=2,g1=1,y1=10,v1=-2,gy=t=>t==="*";function _1(t,e){let n=t.split("/"),r=n.length;return n.some(gy)&&(r+=v1),e&&(r+=p1),n.filter(s=>!gy(s)).reduce((s,i)=>s+(f1.test(i)?m1:i===""?g1:y1),r)}function w1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function E1(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Qh({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Xr([i,m.pathname]),pathnameBase:N1(Xr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Xr([i,m.pathnameBase]))}return o}function Qh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=T1(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:N}=f;if(g==="*"){let j=l[m]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const A=l[m];return N&&!A?d[g]=void 0:d[g]=(A||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function T1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),v0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function S1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return v0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Yi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function I1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ao(t):t;return{pathname:n?n.startsWith("/")?n:x1(n,e):e,search:A1(r),hash:C1(s)}}function x1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ud(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function k1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xm(t,e){let n=k1(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function km(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ao(t):(s=Pa({},t),je(!s.pathname||!s.pathname.includes("?"),Ud("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),Ud("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),Ud("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=I1(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Xr=t=>t.join("/").replace(/\/\/+/g,"/"),N1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),A1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,C1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function P1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const E0=["post","put","patch","delete"];new Set(E0);const R1=["get",...E0];new Set(R1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ra.apply(this,arguments)}const Au=P.createContext(null),T0=P.createContext(null),hr=P.createContext(null),Cu=P.createContext(null),fr=P.createContext({outlet:null,matches:[],isDataRoute:!1}),S0=P.createContext(null);function D1(t,e){let{relative:n}=e===void 0?{}:e;lo()||je(!1);let{basename:r,navigator:s}=P.useContext(hr),{hash:i,pathname:o,search:l}=Ru(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Xr([r,o])),s.createHref({pathname:u,search:l,hash:i})}function lo(){return P.useContext(Cu)!=null}function co(){return lo()||je(!1),P.useContext(Cu).location}function I0(t){P.useContext(hr).static||P.useLayoutEffect(t)}function Pu(){let{isDataRoute:t}=P.useContext(fr);return t?H1():j1()}function j1(){lo()||je(!1);let t=P.useContext(Au),{basename:e,future:n,navigator:r}=P.useContext(hr),{matches:s}=P.useContext(fr),{pathname:i}=co(),o=JSON.stringify(xm(s,n.v7_relativeSplatPath)),l=P.useRef(!1);return I0(()=>{l.current=!0}),P.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=km(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Xr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,i,t])}const b1=P.createContext(null);function O1(t){let e=P.useContext(fr).outlet;return e&&P.createElement(b1.Provider,{value:t},e)}function Ru(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=P.useContext(hr),{matches:s}=P.useContext(fr),{pathname:i}=co(),o=JSON.stringify(xm(s,r.v7_relativeSplatPath));return P.useMemo(()=>km(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function M1(t,e){return L1(t,e)}function L1(t,e,n,r){lo()||je(!1);let{navigator:s}=P.useContext(hr),{matches:i}=P.useContext(fr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=co(),f;if(e){var m;let R=typeof e=="string"?ao(e):e;u==="/"||(m=R.pathname)!=null&&m.startsWith(u)||je(!1),f=R}else f=d;let g=f.pathname||"/",N=g;if(u!=="/"){let R=u.replace(/^\//,"").split("/");N="/"+g.replace(/^\//,"").split("/").slice(R.length).join("/")}let A=u1(t,{pathname:N}),j=B1(A&&A.map(R=>Object.assign({},R,{params:Object.assign({},l,R.params),pathname:Xr([u,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:Xr([u,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),i,n,r);return e&&j?P.createElement(Cu.Provider,{value:{location:Ra({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:zr.Pop}},j):j}function V1(){let t=G1(),e=P1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,null)}const F1=P.createElement(V1,null);class U1 extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(fr.Provider,{value:this.props.routeContext},P.createElement(S0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function z1(t){let{routeContext:e,match:n,children:r}=t,s=P.useContext(Au);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(fr.Provider,{value:e},r)}function B1(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||je(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:N}=n,A=m.route.loader&&g[m.route.id]===void 0&&(!N||N[m.route.id]===void 0);if(m.route.lazy||A){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let N,A=!1,j=null,R=null;n&&(N=l&&m.route.id?l[m.route.id]:void 0,j=m.route.errorElement||F1,u&&(d<0&&g===0?(K1("route-fallback"),A=!0,R=null):d===g&&(A=!0,R=m.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),T=()=>{let k;return N?k=j:A?k=R:m.route.Component?k=P.createElement(m.route.Component,null):m.route.element?k=m.route.element:k=f,P.createElement(z1,{match:m,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:k})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?P.createElement(U1,{location:n.location,revalidation:n.revalidation,component:j,error:N,children:T(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):T()},null)}var x0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(x0||{}),k0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(k0||{});function $1(t){let e=P.useContext(Au);return e||je(!1),e}function W1(t){let e=P.useContext(T0);return e||je(!1),e}function q1(t){let e=P.useContext(fr);return e||je(!1),e}function N0(t){let e=q1(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function G1(){var t;let e=P.useContext(S0),n=W1(),r=N0();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function H1(){let{router:t}=$1(x0.UseNavigateStable),e=N0(k0.UseNavigateStable),n=P.useRef(!1);return I0(()=>{n.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ra({fromRouteId:e},i)))},[t,e])}const yy={};function K1(t,e,n){yy[t]||(yy[t]=!0)}function Q1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function $c(t){let{to:e,replace:n,state:r,relative:s}=t;lo()||je(!1);let{future:i,static:o}=P.useContext(hr),{matches:l}=P.useContext(fr),{pathname:u}=co(),d=Pu(),f=km(e,xm(l,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return P.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Y1(t){return O1(t.context)}function Yt(t){je(!1)}function X1(t){let{basename:e="/",children:n=null,location:r,navigationType:s=zr.Pop,navigator:i,static:o=!1,future:l}=t;lo()&&je(!1);let u=e.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:u,navigator:i,static:o,future:Ra({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=ao(r));let{pathname:f="/",search:m="",hash:g="",state:N=null,key:A="default"}=r,j=P.useMemo(()=>{let R=Yi(f,u);return R==null?null:{location:{pathname:R,search:m,hash:g,state:N,key:A},navigationType:s}},[u,f,m,g,N,A,s]);return j==null?null:P.createElement(hr.Provider,{value:d},P.createElement(Cu.Provider,{children:n,value:j}))}function J1(t){let{children:e,location:n}=t;return M1(Yh(e),n)}new Promise(()=>{});function Yh(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,Yh(r.props.children,i));return}r.type!==Yt&&je(!1),!r.props.index||!r.props.children||je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Yh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wc(){return Wc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wc.apply(this,arguments)}function A0(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Z1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ek(t,e){return t.button===0&&(!e||e==="_self")&&!Z1(t)}const tk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nk=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],rk="6";try{window.__reactRouterVersion=rk}catch{}const sk=P.createContext({isTransitioning:!1}),ik="startTransition",vy=QS[ik];function ok(t){let{basename:e,children:n,future:r,window:s}=t,i=P.useRef();i.current==null&&(i.current=a1({window:s,v5Compat:!0}));let o=i.current,[l,u]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=P.useCallback(m=>{d&&vy?vy(()=>u(m)):u(m)},[u,d]);return P.useLayoutEffect(()=>o.listen(f),[o,f]),P.useEffect(()=>Q1(r),[r]),P.createElement(X1,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const ak=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ck=P.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=A0(e,tk),{basename:N}=P.useContext(hr),A,j=!1;if(typeof d=="string"&&lk.test(d)&&(A=d,ak))try{let k=new URL(window.location.href),b=d.startsWith("//")?new URL(k.protocol+d):new URL(d),V=Yi(b.pathname,N);b.origin===k.origin&&V!=null?d=V+b.search+b.hash:j=!0}catch{}let R=D1(d,{relative:s}),x=dk(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:m});function T(k){r&&r(k),k.defaultPrevented||x(k)}return P.createElement("a",Wc({},g,{href:A||R,onClick:j||i?r:T,ref:n,target:u}))}),pi=P.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:u,viewTransition:d,children:f}=e,m=A0(e,nk),g=Ru(u,{relative:m.relative}),N=co(),A=P.useContext(T0),{navigator:j,basename:R}=P.useContext(hr),x=A!=null&&hk(g)&&d===!0,T=j.encodeLocation?j.encodeLocation(g).pathname:g.pathname,k=N.pathname,b=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;s||(k=k.toLowerCase(),b=b?b.toLowerCase():null,T=T.toLowerCase()),b&&R&&(b=Yi(b,R)||b);const V=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let O=k===T||!o&&k.startsWith(T)&&k.charAt(V)==="/",w=b!=null&&(b===T||!o&&b.startsWith(T)&&b.charAt(T.length)==="/"),y={isActive:O,isPending:w,isTransitioning:x},v=O?r:void 0,E;typeof i=="function"?E=i(y):E=[i,O?"active":null,w?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let I=typeof l=="function"?l(y):l;return P.createElement(ck,Wc({},m,{"aria-current":v,className:E,ref:n,style:I,to:u,viewTransition:d}),typeof f=="function"?f(y):f)});var Xh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Xh||(Xh={}));var _y;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_y||(_y={}));function uk(t){let e=P.useContext(Au);return e||je(!1),e}function dk(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=Pu(),d=co(),f=Ru(t,{relative:o});return P.useCallback(m=>{if(ek(m,n)){m.preventDefault();let g=r!==void 0?r:Bc(d)===Bc(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,u,f,r,s,n,t,i,o,l])}function hk(t,e){e===void 0&&(e={});let n=P.useContext(sk);n==null&&je(!1);let{basename:r}=uk(Xh.useViewTransitionState),s=Ru(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Yi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Yi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Qh(s.pathname,o)!=null||Qh(s.pathname,i)!=null}const fk=()=>{};var wy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},P0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,N=d&63;u||(N=64,o||(g=64)),r.push(n[f],n[m],n[g],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(C0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new pk;const g=i<<2|l>>4;if(r.push(g),d!==64){const N=l<<4&240|d>>2;if(r.push(N),m!==64){const A=d<<6&192|m;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gk=function(t){const e=C0(t);return P0.encodeByteArray(e,!0)},qc=function(t){return gk(t).replace(/\./g,"")},R0=function(t){try{return P0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=()=>yk().__FIREBASE_DEFAULTS__,_k=()=>{if(typeof process>"u"||typeof wy>"u")return;const t=wy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&R0(t[1]);return e&&JSON.parse(e)},Du=()=>{try{return fk()||vk()||_k()||wk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},D0=t=>{var e,n;return(n=(e=Du())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},j0=t=>{const e=D0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},b0=()=>{var t;return(t=Du())===null||t===void 0?void 0:t.config},O0=t=>{var e;return(e=Du())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t){return t.endsWith(".cloudworkstations.dev")}async function Nm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qc(JSON.stringify(n)),qc(JSON.stringify(o)),""].join(".")}const aa={};function Sk(){const t={prod:[],emulator:[]};for(const e of Object.keys(aa))aa[e]?t.emulator.push(e):t.prod.push(e);return t}function Ik(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ey=!1;function Am(t,e){if(typeof window>"u"||typeof document>"u"||!Js(window.location.host)||aa[t]===e||aa[t]||Ey)return;aa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=Sk().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,N){g.setAttribute("width","24"),g.setAttribute("id",N),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Ey=!0,o()},g}function f(g,N){g.setAttribute("id",N),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=Ik(r),N=n("text"),A=document.getElementById(N)||document.createElement("span"),j=n("learnmore"),R=document.getElementById(j)||document.createElement("a"),x=n("preprendIcon"),T=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const k=g.element;l(k),f(R,j);const b=d();u(T,x),k.append(T,A,R,b),document.body.appendChild(k)}i?(A.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function kk(){var t;const e=(t=Du())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ak(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ck(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Pk(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Rk(){return!kk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dk(){try{return typeof indexedDB=="object"}catch{return!1}}function jk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="FirebaseError";class mr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bk,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ka.prototype.create)}}class Ka{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Ok(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new mr(s,l,r)}}function Ok(t,e){return t.replace(Mk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Mk=/\{\$([^}]+)}/g;function Lk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ws(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ty(i)&&Ty(o)){if(!Ws(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ty(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Go(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ho(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Vk(t,e){const n=new Fk(t,e);return n.subscribe.bind(n)}class Fk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Uk(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=zd),s.error===void 0&&(s.error=zd),s.complete===void 0&&(s.complete=zd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Uk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class is{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ek;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($k(e))try{this.getOrInitializeService({instanceIdentifier:Cs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cs){return this.instances.has(e)}getOptions(e=Cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cs){return this.component?this.component.multipleInstances?e:Cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bk(t){return t===Cs?void 0:t}function $k(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const qk={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},Gk=de.INFO,Hk={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},Kk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Hk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cm{constructor(e){this.name=e,this._logLevel=Gk,this._logHandler=Kk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const Qk=(t,e)=>e.some(n=>t instanceof n);let Sy,Iy;function Yk(){return Sy||(Sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xk(){return Iy||(Iy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M0=new WeakMap,Jh=new WeakMap,L0=new WeakMap,Bd=new WeakMap,Pm=new WeakMap;function Jk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Jr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&M0.set(n,t)}).catch(()=>{}),Pm.set(e,t),e}function Zk(t){if(Jh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Jh.set(t,e)}let Zh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||L0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eN(t){Zh=t(Zh)}function tN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($d(this),e,...n);return L0.set(r,e.sort?e.sort():[e]),Jr(r)}:Xk().includes(t)?function(...e){return t.apply($d(this),e),Jr(M0.get(this))}:function(...e){return Jr(t.apply($d(this),e))}}function nN(t){return typeof t=="function"?tN(t):(t instanceof IDBTransaction&&Zk(t),Qk(t,Yk())?new Proxy(t,Zh):t)}function Jr(t){if(t instanceof IDBRequest)return Jk(t);if(Bd.has(t))return Bd.get(t);const e=nN(t);return e!==t&&(Bd.set(t,e),Pm.set(e,t)),e}const $d=t=>Pm.get(t);function rN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Jr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Jr(o.result),u.oldVersion,u.newVersion,Jr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const sN=["get","getKey","getAll","getAllKeys","count"],iN=["put","add","delete","clear"],Wd=new Map;function xy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wd.get(e))return Wd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=iN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||sN.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Wd.set(e,i),i}eN(t=>({...t,get:(e,n,r)=>xy(e,n)||t.get(e,n,r),has:(e,n)=>!!xy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function aN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ef="@firebase/app",ky="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new Cm("@firebase/app"),lN="@firebase/app-compat",cN="@firebase/analytics-compat",uN="@firebase/analytics",dN="@firebase/app-check-compat",hN="@firebase/app-check",fN="@firebase/auth",mN="@firebase/auth-compat",pN="@firebase/database",gN="@firebase/data-connect",yN="@firebase/database-compat",vN="@firebase/functions",_N="@firebase/functions-compat",wN="@firebase/installations",EN="@firebase/installations-compat",TN="@firebase/messaging",SN="@firebase/messaging-compat",IN="@firebase/performance",xN="@firebase/performance-compat",kN="@firebase/remote-config",NN="@firebase/remote-config-compat",AN="@firebase/storage",CN="@firebase/storage-compat",PN="@firebase/firestore",RN="@firebase/ai",DN="@firebase/firestore-compat",jN="firebase",bN="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="[DEFAULT]",ON={[ef]:"fire-core",[lN]:"fire-core-compat",[uN]:"fire-analytics",[cN]:"fire-analytics-compat",[hN]:"fire-app-check",[dN]:"fire-app-check-compat",[fN]:"fire-auth",[mN]:"fire-auth-compat",[pN]:"fire-rtdb",[gN]:"fire-data-connect",[yN]:"fire-rtdb-compat",[vN]:"fire-fn",[_N]:"fire-fn-compat",[wN]:"fire-iid",[EN]:"fire-iid-compat",[TN]:"fire-fcm",[SN]:"fire-fcm-compat",[IN]:"fire-perf",[xN]:"fire-perf-compat",[kN]:"fire-rc",[NN]:"fire-rc-compat",[AN]:"fire-gcs",[CN]:"fire-gcs-compat",[PN]:"fire-fst",[DN]:"fire-fst-compat",[RN]:"fire-vertex","fire-js":"fire-js",[jN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Map,MN=new Map,nf=new Map;function Ny(t,e){try{t.container.addComponent(e)}catch(n){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qs(t){const e=t.name;if(nf.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;nf.set(e,t);for(const n of Gc.values())Ny(n,t);for(const n of MN.values())Ny(n,t);return!0}function ju(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ut(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new Ka("app","Firebase",LN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=bN;function V0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:tf,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Zr.create("bad-app-name",{appName:String(s)});if(n||(n=b0()),!n)throw Zr.create("no-options");const i=Gc.get(s);if(i){if(Ws(n,i.options)&&Ws(r,i.config))return i;throw Zr.create("duplicate-app",{appName:s})}const o=new Wk(s);for(const u of nf.values())o.addComponent(u);const l=new VN(n,r,o);return Gc.set(s,l),l}function Rm(t=tf){const e=Gc.get(t);if(!e&&t===tf&&b0())return V0();if(!e)throw Zr.create("no-app",{appName:t});return e}function Mn(t,e,n){var r;let s=(r=ON[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(l.join(" "));return}qs(new is(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="firebase-heartbeat-database",UN=1,Da="firebase-heartbeat-store";let qd=null;function F0(){return qd||(qd=rN(FN,UN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Da)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),qd}async function zN(t){try{const n=(await F0()).transaction(Da),r=await n.objectStore(Da).get(U0(t));return await n.done,r}catch(e){if(e instanceof mr)ar.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ar.warn(n.message)}}}async function Ay(t,e){try{const r=(await F0()).transaction(Da,"readwrite");await r.objectStore(Da).put(e,U0(t)),await r.done}catch(n){if(n instanceof mr)ar.warn(n.message);else{const r=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ar.warn(r.message)}}}function U0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=1024,$N=30;class WN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Cy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>$N){const o=HN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ar.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Cy(),{heartbeatsToSend:r,unsentEntries:s}=qN(this._heartbeatsCache.heartbeats),i=qc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ar.warn(n),""}}}function Cy(){return new Date().toISOString().substring(0,10)}function qN(t,e=BN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Py(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Py(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dk()?jk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ay(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ay(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Py(t){return qc(JSON.stringify({version:2,heartbeats:t})).length}function HN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){qs(new is("platform-logger",e=>new oN(e),"PRIVATE")),qs(new is("heartbeat",e=>new WN(e),"PRIVATE")),Mn(ef,ky,t),Mn(ef,ky,"esm2017"),Mn("fire-js","")}KN("");function Dm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function z0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QN=z0,B0=new Ka("auth","Firebase",z0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Cm("@firebase/auth");function YN(t,...e){Hc.logLevel<=de.WARN&&Hc.warn(`Auth (${uo}): ${t}`,...e)}function lc(t,...e){Hc.logLevel<=de.ERROR&&Hc.error(`Auth (${uo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,...e){throw jm(t,...e)}function Ln(t,...e){return jm(t,...e)}function $0(t,e,n){const r=Object.assign(Object.assign({},QN()),{[e]:n});return new Ka("auth","Firebase",r).create(e,{appName:t.name})}function tr(t){return $0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return B0.create(t,...e)}function ee(t,e,...n){if(!t)throw jm(e,...n)}function Xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lc(e),new Error(e)}function lr(t,e){t||Xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XN(){return Ry()==="http:"||Ry()==="https:"}function Ry(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XN()||Ak()||"connection"in navigator)?navigator.onLine:!0}function ZN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.shortDelay=e,this.longDelay=n,lr(n>e,"Short delay should be less than long delay!"),this.isMobile=xk()||Ck()}get(){return JN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t,e){lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nA=new Ya(3e4,6e4);function ps(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gs(t,e,n,r,s={}){return q0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Qa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return Nk()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Js(t.emulatorConfig.host)&&(d.credentials="include"),W0.fetch()(await G0(t,t.config.apiHost,n,l),d)})}async function q0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},eA),e);try{const s=new sA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw zl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw zl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw zl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw zl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw $0(t,f,d);_n(t,f)}}catch(s){if(s instanceof mr)throw s;_n(t,"network-request-failed",{message:String(s)})}}async function Xa(t,e,n,r,s={}){const i=await gs(t,e,n,r,s);return"mfaPendingCredential"in i&&_n(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function G0(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?bm(t.config,s):`${t.config.apiScheme}://${s}`;return tA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function rA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ln(this.auth,"network-request-failed")),nA.get())})}}function zl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ln(t,e,r);return s.customData._tokenResponse=n,s}function Dy(t){return t!==void 0&&t.enterprise!==void 0}class iA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oA(t,e){return gs(t,"GET","/v2/recaptchaConfig",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(t,e){return gs(t,"POST","/v1/accounts:delete",e)}async function Kc(t,e){return gs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lA(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),s=Om(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:la(Gd(s.auth_time)),issuedAtTime:la(Gd(s.iat)),expirationTime:la(Gd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Gd(t){return Number(t)*1e3}function Om(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lc("JWT malformed, contained fewer than 3 sections"),null;try{const s=R0(n);return s?JSON.parse(s):(lc("Failed to decode base64 JWT payload"),null)}catch(s){return lc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function jy(t){const e=Om(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof mr&&cA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=la(this.lastLoginAt),this.creationTime=la(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ja(t,Kc(n,{idToken:r}));ee(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?H0(i.providerUserInfo):[],l=hA(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new sf(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function dA(t){const e=Ge(t);await Qc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function H0(t){return t.map(e=>{var{providerId:n}=e,r=Dm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t,e){const n=await q0(t,{},async()=>{const r=Qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await G0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Js(t.emulatorConfig.host)&&(u.credentials="include"),W0.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mA(t,e){return gs(t,"POST","/v2/accounts:revokeToken",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=jy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Fi;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fi,this.toJSON())}_performRefresh(){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Dm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new sf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ja(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lA(this,e)}reload(){return dA(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ut(this.auth.app))return Promise.reject(tr(this.auth));const e=await this.getIdToken();return await ja(this,aA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,N=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,j=(l=n.tenantId)!==null&&l!==void 0?l:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,T=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:k,emailVerified:b,isAnonymous:V,providerData:O,stsTokenManager:w}=n;ee(k&&w,e,"internal-error");const y=Fi.fromJSON(this.name,w);ee(typeof k=="string",e,"internal-error"),Cr(m,e.name),Cr(g,e.name),ee(typeof b=="boolean",e,"internal-error"),ee(typeof V=="boolean",e,"internal-error"),Cr(N,e.name),Cr(A,e.name),Cr(j,e.name),Cr(R,e.name),Cr(x,e.name),Cr(T,e.name);const v=new pn({uid:k,auth:e,email:g,emailVerified:b,displayName:m,isAnonymous:V,photoURL:A,phoneNumber:N,tenantId:j,stsTokenManager:y,createdAt:x,lastLoginAt:T});return O&&Array.isArray(O)&&(v.providerData=O.map(E=>Object.assign({},E))),R&&(v._redirectEventId=R),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new Fi;s.updateFromServerResponse(n);const i=new pn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Qc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?H0(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Fi;l.updateFromIdToken(r);const u=new pn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new sf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=new Map;function Jn(t){lr(t instanceof Function,"Expected a class definition");let e=by.get(t);return e?(lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,by.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}K0.type="NONE";const Oy=K0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ui{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=cc(this.userKey,s.apiKey,i),this.fullPersistenceKey=cc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kc(this.auth,{idToken:e}).catch(()=>{});return n?pn._fromGetAccountInfoResponse(this.auth,n,e):null}return pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ui(Jn(Oy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Jn(Oy);const o=cc(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await Kc(e,{idToken:f}).catch(()=>{});if(!g)break;m=await pn._fromGetAccountInfoResponse(e,g,f)}else m=pn._fromJSON(e,f);d!==i&&(l=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ui(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ui(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(J0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Q0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eE(e))return"Blackberry";if(tE(e))return"Webos";if(Y0(e))return"Safari";if((e.includes("chrome/")||X0(e))&&!e.includes("edge/"))return"Chrome";if(Z0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Q0(t=Tt()){return/firefox\//i.test(t)}function Y0(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function X0(t=Tt()){return/crios\//i.test(t)}function J0(t=Tt()){return/iemobile/i.test(t)}function Z0(t=Tt()){return/android/i.test(t)}function eE(t=Tt()){return/blackberry/i.test(t)}function tE(t=Tt()){return/webos/i.test(t)}function Mm(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pA(t=Tt()){var e;return Mm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gA(){return Pk()&&document.documentMode===10}function nE(t=Tt()){return Mm(t)||Z0(t)||tE(t)||eE(t)||/windows phone/i.test(t)||J0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t,e=[]){let n;switch(t){case"Browser":n=My(Tt());break;case"Worker":n=`${My(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(t,e={}){return gs(t,"GET","/v2/passwordPolicy",ps(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=6;class wA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_A,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ly(this),this.idTokenSubscription=new Ly(this),this.beforeStateQueue=new yA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=B0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ui.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kc(this,{idToken:e}),r=await pn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ut(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ut(this.app))return Promise.reject(tr(this));const n=e?Ge(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ut(this.app)?Promise.reject(tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ut(this.app)?Promise.reject(tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vA(this),n=new wA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ka("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await mA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Ui.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&YN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Zs(t){return Ge(t)}class Ly{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vk(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TA(t){bu=t}function sE(t){return bu.loadJS(t)}function SA(){return bu.recaptchaEnterpriseScript}function IA(){return bu.gapiScript}function xA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class kA{constructor(){this.enterprise=new NA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class NA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const AA="recaptcha-enterprise",iE="NO_RECAPTCHA";class CA{constructor(e){this.type=AA,this.auth=Zs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{oA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new iA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;Dy(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(iE)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Dy(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=SA();u.length!==0&&(u+=l),sE(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Vy(t,e,n,r=!1,s=!1){const i=new CA(t);let o;if(s)o=iE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function of(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Vy(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Vy(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t,e){const n=ju(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ws(i,e??{}))return s;_n(s,"already-initialized")}return n.initialize({options:e})}function RA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DA(t,e,n){const r=Zs(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=oE(e),{host:o,port:l}=jA(e),u=l===null?"":`:${l}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(Ws(d,r.config.emulator)&&Ws(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Js(o)?(Nm(`${i}//${o}${u}`),Am("Auth",!0)):bA()}function oE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jA(t){const e=oE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Fy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Fy(o)}}}function Fy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}}async function OA(t,e){return gs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(t,e){return Xa(t,"POST","/v1/accounts:signInWithPassword",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",ps(t,e))}async function VA(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends Lm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ba(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ba(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return of(e,n,"signInWithPassword",MA);case"emailLink":return LA(e,{email:this._email,oobCode:this._password});default:_n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return of(e,r,"signUpPassword",OA);case"emailLink":return VA(e,{idToken:n,email:this._email,oobCode:this._password});default:_n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zi(t,e){return Xa(t,"POST","/v1/accounts:signInWithIdp",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="http://localhost";class Gs extends Lm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Dm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Gs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return zi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zi(e,n)}buildRequest(){const e={requestUri:FA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zA(t){const e=Go(Ho(t)).link,n=e?Go(Ho(e)).deep_link_id:null,r=Go(Ho(t)).deep_link_id;return(r?Go(Ho(r)).link:null)||r||n||e||t}class Vm{constructor(e){var n,r,s,i,o,l;const u=Go(Ho(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=UA((s=u.mode)!==null&&s!==void 0?s:null);ee(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=zA(e);try{return new Vm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.providerId=ho.PROVIDER_ID}static credential(e,n){return ba._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Vm.parseLink(n);return ee(r,"argument-error"),ba._fromEmailAndCode(e,r.code,r.tenantId)}}ho.PROVIDER_ID="password";ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends aE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Ja{constructor(){super("facebook.com")}static credential(e){return Gs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.FACEBOOK_SIGN_IN_METHOD="facebook.com";Or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gs._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mr.credential(n,r)}catch{return null}}}Mr.GOOGLE_SIGN_IN_METHOD="google.com";Mr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Ja{constructor(){super("github.com")}static credential(e){return Gs._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Ja{constructor(){super("twitter.com")}static credential(e,n){return Gs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vr.credential(n,r)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(t,e){return Xa(t,"POST","/v1/accounts:signUp",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await pn._fromIdTokenResponse(e,r,s),o=Uy(r);return new Hs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Uy(r);return new Hs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Uy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends mr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Yc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Yc(e,n,r,s)}}function lE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Yc._fromErrorAndOperation(t,i,e,r):i})}async function $A(t,e,n=!1){const r=await ja(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t,e,n=!1){const{auth:r}=t;if(Ut(r.app))return Promise.reject(tr(r));const s="reauthenticate";try{const i=await ja(t,lE(r,s,e,t),n);ee(i.idToken,r,"internal-error");const o=Om(i.idToken);ee(o,r,"internal-error");const{sub:l}=o;return ee(t.uid===l,r,"user-mismatch"),Hs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cE(t,e,n=!1){if(Ut(t.app))return Promise.reject(tr(t));const r="signIn",s=await lE(t,r,e),i=await Hs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function qA(t,e){return cE(Zs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uE(t){const e=Zs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dE(t,e,n){if(Ut(t.app))return Promise.reject(tr(t));const r=Zs(t),o=await of(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&uE(t),u}),l=await Hs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function hE(t,e,n){return Ut(t.app)?Promise.reject(tr(t)):qA(Ge(t),ho.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&uE(t),r})}function GA(t,e,n,r){return Ge(t).onIdTokenChanged(e,n,r)}function HA(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}function KA(t,e,n,r){return Ge(t).onAuthStateChanged(e,n,r)}function fE(t){return Ge(t).signOut()}const Xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xc,"1"),this.storage.removeItem(Xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=1e3,YA=10;class pE extends mE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);gA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,YA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},QA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pE.type="LOCAL";const XA=pE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE extends mE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gE.type="SESSION";const yE=gE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ou(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await JA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ou.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=Fm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return window}function eC(t){Vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function tC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rC(){return vE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="firebaseLocalStorageDb",sC=1,Jc="firebaseLocalStorage",wE="fbase_key";class Za{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mu(t,e){return t.transaction([Jc],e?"readwrite":"readonly").objectStore(Jc)}function iC(){const t=indexedDB.deleteDatabase(_E);return new Za(t).toPromise()}function af(){const t=indexedDB.open(_E,sC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jc,{keyPath:wE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jc)?e(r):(r.close(),await iC(),e(await af()))})})}async function zy(t,e,n){const r=Mu(t,!0).put({[wE]:e,value:n});return new Za(r).toPromise()}async function oC(t,e){const n=Mu(t,!1).get(e),r=await new Za(n).toPromise();return r===void 0?null:r.value}function By(t,e){const n=Mu(t,!0).delete(e);return new Za(n).toPromise()}const aC=800,lC=3;class EE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await af(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>lC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ou._getInstance(rC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tC(),!this.activeServiceWorker)return;this.sender=new ZA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await af();return await zy(e,Xc,"1"),await By(e,Xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>zy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>oC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>By(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Mu(s,!1).getAll();return new Za(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EE.type="LOCAL";const cC=EE;new Ya(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e){return e?Jn(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends Lm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dC(t){return cE(t.auth,new Um(t),t.bypassAuthState)}function hC(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),WA(n,new Um(t),t.bypassAuthState)}async function fC(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),$A(n,new Um(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dC;case"linkViaPopup":case"linkViaRedirect":return fC;case"reauthViaPopup":case"reauthViaRedirect":return hC;default:_n(this.auth,"internal-error")}}resolve(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Ya(2e3,1e4);class Di extends TE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Di.currentPopupAction&&Di.currentPopupAction.cancel(),Di.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){lr(this.filter.length===1,"Popup operations only handle one event");const e=Fm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Di.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mC.get())};e()}}Di.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="pendingRedirect",uc=new Map;class gC extends TE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=uc.get(this.auth._key());if(!e){try{const r=await yC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uc.set(this.auth._key(),e)}return this.bypassAuthState||uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yC(t,e){const n=wC(e),r=_C(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function vC(t,e){uc.set(t._key(),e)}function _C(t){return Jn(t._redirectPersistence)}function wC(t){return cc(pC,t.config.apiKey,t.name)}async function EC(t,e,n=!1){if(Ut(t.app))return Promise.reject(tr(t));const r=Zs(t),s=uC(r,e),o=await new gC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=10*60*1e3;class SC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!SE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ln(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TC&&this.cachedEventUids.clear(),this.cachedEventUids.has($y(e))}saveEventToCache(e){this.cachedEventUids.add($y(e)),this.lastProcessedEventTime=Date.now()}}function $y(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(t,e={}){return gs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NC=/^https?/;async function AC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xC(t);for(const n of e)try{if(CC(n))return}catch{}_n(t,"unauthorized-domain")}function CC(t){const e=rf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!NC.test(n))return!1;if(kC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new Ya(3e4,6e4);function Wy(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RC(t){return new Promise((e,n)=>{var r,s,i;function o(){Wy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wy(),n(Ln(t,"network-request-failed"))},timeout:PC.get()})}if(!((s=(r=Vn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Vn().gapi)===null||i===void 0)&&i.load)o();else{const l=xA("iframefcb");return Vn()[l]=()=>{gapi.load?o():n(Ln(t,"network-request-failed"))},sE(`${IA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw dc=null,e})}let dc=null;function DC(t){return dc=dc||RC(t),dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new Ya(5e3,15e3),bC="__/auth/iframe",OC="emulator/auth/iframe",MC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VC(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bm(e,OC):`https://${t.config.authDomain}/${bC}`,r={apiKey:e.apiKey,appName:t.name,v:uo},s=LC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Qa(r).slice(1)}`}async function FC(t){const e=await DC(t),n=Vn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:VC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ln(t,"network-request-failed"),l=Vn().setTimeout(()=>{i(o)},jC.get());function u(){Vn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zC=500,BC=600,$C="_blank",WC="http://localhost";class qy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qC(t,e,n,r=zC,s=BC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},UC),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Tt().toLowerCase();n&&(l=X0(d)?$C:n),Q0(d)&&(e=e||WC,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[N,A])=>`${g}${N}=${A},`,"");if(pA(d)&&l!=="_self")return GC(e||"",l),new qy(null);const m=window.open(e||"",l,f);ee(m,t,"popup-blocked");try{m.focus()}catch{}return new qy(m)}function GC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="__/auth/handler",KC="emulator/auth/handler",QC=encodeURIComponent("fac");async function Gy(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:uo,eventId:s};if(e instanceof aE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Lk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Ja){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${QC}=${encodeURIComponent(u)}`:"";return`${YC(t)}?${Qa(l).slice(1)}${d}`}function YC({config:t}){return t.emulator?bm(t,KC):`https://${t.authDomain}/${HC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="webStorageSupport";class XC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yE,this._completeRedirectFn=EC,this._overrideRedirectResult=vC}async _openPopup(e,n,r,s){var i;lr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Gy(e,n,r,rf(),s);return qC(e,o,Fm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Gy(e,n,r,rf(),s);return eC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(lr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await FC(e),r=new SC(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hd,{type:Hd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Hd];o!==void 0&&n(!!o),_n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nE()||Y0()||Mm()}}const JC=XC;var Hy="@firebase/auth",Ky="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tP(t){qs(new is("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rE(t)},d=new EA(r,s,i,u);return RA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qs(new is("auth-internal",e=>{const n=Zs(e.getProvider("auth").getImmediate());return(r=>new ZC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(Hy,Ky,eP(t)),Mn(Hy,Ky,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=5*60,rP=O0("authIdTokenMaxAge")||nP;let Qy=null;const sP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rP)return;const s=n==null?void 0:n.token;Qy!==s&&(Qy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function IE(t=Rm()){const e=ju(t,"auth");if(e.isInitialized())return e.getImmediate();const n=PA(t,{popupRedirectResolver:JC,persistence:[cC,XA,yE]}),r=O0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=sP(i.toString());HA(n,o,()=>o(n.currentUser)),GA(n,l=>o(l))}}const s=D0("auth");return s&&DA(n,`http://${s}`),n}function iP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ln("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",iP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tP("Browser");var Yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,xE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function v(){}v.prototype=y.prototype,w.D=y.prototype,w.prototype=new v,w.prototype.constructor=w,w.C=function(E,I,C){for(var S=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)S[ne-2]=arguments[ne];return y.prototype[I].apply(E,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,y,v){v||(v=0);var E=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)E[I]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(I=0;16>I;++I)E[I]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=w.g[0],v=w.g[1],I=w.g[2];var C=w.g[3],S=y+(C^v&(I^C))+E[0]+3614090360&4294967295;y=v+(S<<7&4294967295|S>>>25),S=C+(I^y&(v^I))+E[1]+3905402710&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(v^C&(y^v))+E[2]+606105819&4294967295,I=C+(S<<17&4294967295|S>>>15),S=v+(y^I&(C^y))+E[3]+3250441966&4294967295,v=I+(S<<22&4294967295|S>>>10),S=y+(C^v&(I^C))+E[4]+4118548399&4294967295,y=v+(S<<7&4294967295|S>>>25),S=C+(I^y&(v^I))+E[5]+1200080426&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(v^C&(y^v))+E[6]+2821735955&4294967295,I=C+(S<<17&4294967295|S>>>15),S=v+(y^I&(C^y))+E[7]+4249261313&4294967295,v=I+(S<<22&4294967295|S>>>10),S=y+(C^v&(I^C))+E[8]+1770035416&4294967295,y=v+(S<<7&4294967295|S>>>25),S=C+(I^y&(v^I))+E[9]+2336552879&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(v^C&(y^v))+E[10]+4294925233&4294967295,I=C+(S<<17&4294967295|S>>>15),S=v+(y^I&(C^y))+E[11]+2304563134&4294967295,v=I+(S<<22&4294967295|S>>>10),S=y+(C^v&(I^C))+E[12]+1804603682&4294967295,y=v+(S<<7&4294967295|S>>>25),S=C+(I^y&(v^I))+E[13]+4254626195&4294967295,C=y+(S<<12&4294967295|S>>>20),S=I+(v^C&(y^v))+E[14]+2792965006&4294967295,I=C+(S<<17&4294967295|S>>>15),S=v+(y^I&(C^y))+E[15]+1236535329&4294967295,v=I+(S<<22&4294967295|S>>>10),S=y+(I^C&(v^I))+E[1]+4129170786&4294967295,y=v+(S<<5&4294967295|S>>>27),S=C+(v^I&(y^v))+E[6]+3225465664&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^v&(C^y))+E[11]+643717713&4294967295,I=C+(S<<14&4294967295|S>>>18),S=v+(C^y&(I^C))+E[0]+3921069994&4294967295,v=I+(S<<20&4294967295|S>>>12),S=y+(I^C&(v^I))+E[5]+3593408605&4294967295,y=v+(S<<5&4294967295|S>>>27),S=C+(v^I&(y^v))+E[10]+38016083&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^v&(C^y))+E[15]+3634488961&4294967295,I=C+(S<<14&4294967295|S>>>18),S=v+(C^y&(I^C))+E[4]+3889429448&4294967295,v=I+(S<<20&4294967295|S>>>12),S=y+(I^C&(v^I))+E[9]+568446438&4294967295,y=v+(S<<5&4294967295|S>>>27),S=C+(v^I&(y^v))+E[14]+3275163606&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^v&(C^y))+E[3]+4107603335&4294967295,I=C+(S<<14&4294967295|S>>>18),S=v+(C^y&(I^C))+E[8]+1163531501&4294967295,v=I+(S<<20&4294967295|S>>>12),S=y+(I^C&(v^I))+E[13]+2850285829&4294967295,y=v+(S<<5&4294967295|S>>>27),S=C+(v^I&(y^v))+E[2]+4243563512&4294967295,C=y+(S<<9&4294967295|S>>>23),S=I+(y^v&(C^y))+E[7]+1735328473&4294967295,I=C+(S<<14&4294967295|S>>>18),S=v+(C^y&(I^C))+E[12]+2368359562&4294967295,v=I+(S<<20&4294967295|S>>>12),S=y+(v^I^C)+E[5]+4294588738&4294967295,y=v+(S<<4&4294967295|S>>>28),S=C+(y^v^I)+E[8]+2272392833&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^v)+E[11]+1839030562&4294967295,I=C+(S<<16&4294967295|S>>>16),S=v+(I^C^y)+E[14]+4259657740&4294967295,v=I+(S<<23&4294967295|S>>>9),S=y+(v^I^C)+E[1]+2763975236&4294967295,y=v+(S<<4&4294967295|S>>>28),S=C+(y^v^I)+E[4]+1272893353&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^v)+E[7]+4139469664&4294967295,I=C+(S<<16&4294967295|S>>>16),S=v+(I^C^y)+E[10]+3200236656&4294967295,v=I+(S<<23&4294967295|S>>>9),S=y+(v^I^C)+E[13]+681279174&4294967295,y=v+(S<<4&4294967295|S>>>28),S=C+(y^v^I)+E[0]+3936430074&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^v)+E[3]+3572445317&4294967295,I=C+(S<<16&4294967295|S>>>16),S=v+(I^C^y)+E[6]+76029189&4294967295,v=I+(S<<23&4294967295|S>>>9),S=y+(v^I^C)+E[9]+3654602809&4294967295,y=v+(S<<4&4294967295|S>>>28),S=C+(y^v^I)+E[12]+3873151461&4294967295,C=y+(S<<11&4294967295|S>>>21),S=I+(C^y^v)+E[15]+530742520&4294967295,I=C+(S<<16&4294967295|S>>>16),S=v+(I^C^y)+E[2]+3299628645&4294967295,v=I+(S<<23&4294967295|S>>>9),S=y+(I^(v|~C))+E[0]+4096336452&4294967295,y=v+(S<<6&4294967295|S>>>26),S=C+(v^(y|~I))+E[7]+1126891415&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~v))+E[14]+2878612391&4294967295,I=C+(S<<15&4294967295|S>>>17),S=v+(C^(I|~y))+E[5]+4237533241&4294967295,v=I+(S<<21&4294967295|S>>>11),S=y+(I^(v|~C))+E[12]+1700485571&4294967295,y=v+(S<<6&4294967295|S>>>26),S=C+(v^(y|~I))+E[3]+2399980690&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~v))+E[10]+4293915773&4294967295,I=C+(S<<15&4294967295|S>>>17),S=v+(C^(I|~y))+E[1]+2240044497&4294967295,v=I+(S<<21&4294967295|S>>>11),S=y+(I^(v|~C))+E[8]+1873313359&4294967295,y=v+(S<<6&4294967295|S>>>26),S=C+(v^(y|~I))+E[15]+4264355552&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~v))+E[6]+2734768916&4294967295,I=C+(S<<15&4294967295|S>>>17),S=v+(C^(I|~y))+E[13]+1309151649&4294967295,v=I+(S<<21&4294967295|S>>>11),S=y+(I^(v|~C))+E[4]+4149444226&4294967295,y=v+(S<<6&4294967295|S>>>26),S=C+(v^(y|~I))+E[11]+3174756917&4294967295,C=y+(S<<10&4294967295|S>>>22),S=I+(y^(C|~v))+E[2]+718787259&4294967295,I=C+(S<<15&4294967295|S>>>17),S=v+(C^(I|~y))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(I+(S<<21&4294967295|S>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var v=y-this.blockSize,E=this.B,I=this.h,C=0;C<y;){if(I==0)for(;C<=v;)s(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<y;)if(E[I++]=w.charCodeAt(C++),I==this.blockSize){s(this,E),I=0;break}}else for(;C<y;)if(E[I++]=w[C++],I==this.blockSize){s(this,E),I=0;break}}this.h=I,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var v=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=v&255,v/=256;for(this.u(w),w=Array(16),y=v=0;4>y;++y)for(var E=0;32>E;E+=8)w[v++]=this.g[y]>>>E&255;return w};function i(w,y){var v=l;return Object.prototype.hasOwnProperty.call(v,w)?v[w]:v[w]=y(w)}function o(w,y){this.h=y;for(var v=[],E=!0,I=w.length-1;0<=I;I--){var C=w[I]|0;E&&C==y||(v[I]=C,E=!1)}this.g=v}var l={};function u(w){return-128<=w&&128>w?i(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return R(d(-w));for(var y=[],v=1,E=0;w>=v;E++)y[E]=w/v|0,v*=4294967296;return new o(y,0)}function f(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return R(f(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(y,8)),E=m,I=0;I<w.length;I+=8){var C=Math.min(8,w.length-I),S=parseInt(w.substring(I,I+C),y);8>C?(C=d(Math.pow(y,C)),E=E.j(C).add(d(S))):(E=E.j(v),E=E.add(d(S)))}return E}var m=u(0),g=u(1),N=u(16777216);t=o.prototype,t.m=function(){if(j(this))return-R(this).m();for(var w=0,y=1,v=0;v<this.g.length;v++){var E=this.i(v);w+=(0<=E?E:4294967296+E)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A(this))return"0";if(j(this))return"-"+R(this).toString(w);for(var y=d(Math.pow(w,6)),v=this,E="";;){var I=b(v,y).g;v=x(v,I.j(y));var C=((0<v.g.length?v.g[0]:v.h)>>>0).toString(w);if(v=I,A(v))return C+E;for(;6>C.length;)C="0"+C;E=C+E}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function A(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function j(w){return w.h==-1}t.l=function(w){return w=x(this,w),j(w)?-1:A(w)?0:1};function R(w){for(var y=w.g.length,v=[],E=0;E<y;E++)v[E]=~w.g[E];return new o(v,~w.h).add(g)}t.abs=function(){return j(this)?R(this):this},t.add=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],E=0,I=0;I<=y;I++){var C=E+(this.i(I)&65535)+(w.i(I)&65535),S=(C>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);E=S>>>16,C&=65535,S&=65535,v[I]=S<<16|C}return new o(v,v[v.length-1]&-2147483648?-1:0)};function x(w,y){return w.add(R(y))}t.j=function(w){if(A(this)||A(w))return m;if(j(this))return j(w)?R(this).j(R(w)):R(R(this).j(w));if(j(w))return R(this.j(R(w)));if(0>this.l(N)&&0>w.l(N))return d(this.m()*w.m());for(var y=this.g.length+w.g.length,v=[],E=0;E<2*y;E++)v[E]=0;for(E=0;E<this.g.length;E++)for(var I=0;I<w.g.length;I++){var C=this.i(E)>>>16,S=this.i(E)&65535,ne=w.i(I)>>>16,pe=w.i(I)&65535;v[2*E+2*I]+=S*pe,T(v,2*E+2*I),v[2*E+2*I+1]+=C*pe,T(v,2*E+2*I+1),v[2*E+2*I+1]+=S*ne,T(v,2*E+2*I+1),v[2*E+2*I+2]+=C*ne,T(v,2*E+2*I+2)}for(E=0;E<y;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=y;E<2*y;E++)v[E]=0;return new o(v,0)};function T(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function k(w,y){this.g=w,this.h=y}function b(w,y){if(A(y))throw Error("division by zero");if(A(w))return new k(m,m);if(j(w))return y=b(R(w),y),new k(R(y.g),R(y.h));if(j(y))return y=b(w,R(y)),new k(R(y.g),y.h);if(30<w.g.length){if(j(w)||j(y))throw Error("slowDivide_ only works with positive integers.");for(var v=g,E=y;0>=E.l(w);)v=V(v),E=V(E);var I=O(v,1),C=O(E,1);for(E=O(E,2),v=O(v,2);!A(E);){var S=C.add(E);0>=S.l(w)&&(I=I.add(v),C=S),E=O(E,1),v=O(v,1)}return y=x(w,I.j(y)),new k(I,y)}for(I=m;0<=w.l(y);){for(v=Math.max(1,Math.floor(w.m()/y.m())),E=Math.ceil(Math.log(v)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),C=d(v),S=C.j(y);j(S)||0<S.l(w);)v-=E,C=d(v),S=C.j(y);A(C)&&(C=g),I=I.add(C),w=x(w,S)}return new k(I,w)}t.A=function(w){return b(this,w).h},t.and=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)&w.i(E);return new o(v,this.h&w.h)},t.or=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)|w.i(E);return new o(v,this.h|w.h)},t.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)^w.i(E);return new o(v,this.h^w.h)};function V(w){for(var y=w.g.length+1,v=[],E=0;E<y;E++)v[E]=w.i(E)<<1|w.i(E-1)>>>31;return new o(v,w.h)}function O(w,y){var v=y>>5;y%=32;for(var E=w.g.length-v,I=[],C=0;C<E;C++)I[C]=0<y?w.i(C+v)>>>y|w.i(C+v+1)<<32-y:w.i(C+v);return new o(I,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,es=o}).apply(typeof Yy<"u"?Yy:typeof self<"u"?self:typeof window<"u"?window:{});var Bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kE,Ko,NE,hc,lf,AE,CE,PE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bl=="object"&&Bl];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var M=a[_];if(!(M in p))break e;p=p[M]}a=a[a.length-1],_=p[a],h=h(_),h!=_&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,_=!1,M={next:function(){if(!_&&p<a.length){var L=p++;return{value:h(L,a[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,_),a.apply(h,M)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function N(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function A(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(_,M,L){for(var G=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)G[Ee-2]=arguments[Ee];return h.prototype[M].apply(_,G)}}function j(a){const h=a.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=a[_];return p}return[]}function R(a,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(u(_)){const M=a.length||0,L=_.length||0;a.length=M+L;for(let G=0;G<L;G++)a[M+G]=_[G]}else a.push(_)}}class x{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function T(a){return/^[\s\xa0]*$/.test(a)}function k(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var V=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function O(a,h,p){for(const _ in a)h.call(p,a[_],_,a)}function w(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function y(a){const h={};for(const p in a)h[p]=a[p];return h}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,h){let p,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(p in _)a[p]=_[p];for(let L=0;L<v.length;L++)p=v[L],Object.prototype.hasOwnProperty.call(_,p)&&(a[p]=_[p])}}function I(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function C(a){l.setTimeout(()=>{throw a},0)}function S(){var a=Y;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class ne{constructor(){this.h=this.g=null}add(h,p){const _=pe.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var pe=new x(()=>new Z,a=>a.reset());class Z{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,W=!1,Y=new ne,ae=()=>{const a=l.Promise.resolve(void 0);ze=()=>{a.then(Se)}};var Se=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(p){C(p)}var h=pe;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}W=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Mt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function an(a,h){if(Ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(V){e:{try{b(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ln[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&an.aa.h.call(this)}}A(an,Ie);var ln={2:"touch",3:"pen",4:"mouse"};an.prototype.h=function(){an.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Lt="closure_listenable_"+(1e6*Math.random()|0),pr=0;function si(a,h,p,_,M){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=M,this.key=++pr,this.da=this.fa=!1}function ii(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function _s(a){this.src=a,this.g={},this.h=0}_s.prototype.add=function(a,h,p,_,M){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var G=_o(a,h,_,M);return-1<G?(h=a[G],p||(h.fa=!1)):(h=new si(h,this.src,L,!!_,M),h.fa=p,a.push(h)),h};function vo(a,h){var p=h.type;if(p in a.g){var _=a.g[p],M=Array.prototype.indexOf.call(_,h,void 0),L;(L=0<=M)&&Array.prototype.splice.call(_,M,1),L&&(ii(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function _o(a,h,p,_){for(var M=0;M<a.length;++M){var L=a[M];if(!L.da&&L.listener==h&&L.capture==!!p&&L.ha==_)return M}return-1}var wo="closure_lm_"+(1e6*Math.random()|0),Eo={};function ol(a,h,p,_,M){if(Array.isArray(h)){for(var L=0;L<h.length;L++)ol(a,h[L],p,_,M);return null}return p=cl(p),a&&a[Lt]?a.K(h,p,d(_)?!!_.capture:!1,M):nd(a,h,p,!1,_,M)}function nd(a,h,p,_,M,L){if(!h)throw Error("Invalid event type");var G=d(M)?!!M.capture:!!M,Ee=So(a);if(Ee||(a[wo]=Ee=new _s(a)),p=Ee.add(h,p,_,G,L),p.proxy)return p;if(_=rd(),p.proxy=_,_.src=a,_.listener=p,a.addEventListener)Mt||(M=G),M===void 0&&(M=!1),a.addEventListener(h.toString(),_,M);else if(a.attachEvent)a.attachEvent(ll(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function rd(){function a(p){return h.call(a.src,a.listener,p)}const h=sd;return a}function al(a,h,p,_,M){if(Array.isArray(h))for(var L=0;L<h.length;L++)al(a,h[L],p,_,M);else _=d(_)?!!_.capture:!!_,p=cl(p),a&&a[Lt]?(a=a.i,h=String(h).toString(),h in a.g&&(L=a.g[h],p=_o(L,p,_,M),-1<p&&(ii(L[p]),Array.prototype.splice.call(L,p,1),L.length==0&&(delete a.g[h],a.h--)))):a&&(a=So(a))&&(h=a.g[h.toString()],a=-1,h&&(a=_o(h,p,_,M)),(p=-1<a?h[a]:null)&&To(p))}function To(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Lt])vo(h.i,a);else{var p=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(p,_,a.capture):h.detachEvent?h.detachEvent(ll(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=So(h))?(vo(p,a),p.h==0&&(p.src=null,h[wo]=null)):ii(a)}}}function ll(a){return a in Eo?Eo[a]:Eo[a]="on"+a}function sd(a,h){if(a.da)a=!0;else{h=new an(h,this);var p=a.listener,_=a.ha||a.src;a.fa&&To(a),a=p.call(_,h)}return a}function So(a){return a=a[wo],a instanceof _s?a:null}var Io="__closure_events_fn_"+(1e9*Math.random()>>>0);function cl(a){return typeof a=="function"?a:(a[Io]||(a[Io]=function(h){return a.handleEvent(h)}),a[Io])}function He(){ye.call(this),this.i=new _s(this),this.M=this,this.F=null}A(He,ye),He.prototype[Lt]=!0,He.prototype.removeEventListener=function(a,h,p,_){al(this,a,h,p,_)};function nt(a,h){var p,_=a.F;if(_)for(p=[];_;_=_.F)p.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new Ie(h,a);else if(h instanceof Ie)h.target=h.target||a;else{var M=h;h=new Ie(_,a),E(h,M)}if(M=!0,p)for(var L=p.length-1;0<=L;L--){var G=h.g=p[L];M=Kt(G,_,!0,h)&&M}if(G=h.g=a,M=Kt(G,_,!0,h)&&M,M=Kt(G,_,!1,h)&&M,p)for(L=0;L<p.length;L++)G=h.g=p[L],M=Kt(G,_,!1,h)&&M}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],_=0;_<p.length;_++)ii(p[_]);delete a.g[h],a.h--}}this.F=null},He.prototype.K=function(a,h,p,_){return this.i.add(String(a),h,!1,p,_)},He.prototype.L=function(a,h,p,_){return this.i.add(String(a),h,!0,p,_)};function Kt(a,h,p,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,L=0;L<h.length;++L){var G=h[L];if(G&&!G.da&&G.capture==p){var Ee=G.listener,it=G.ha||G.src;G.fa&&vo(a.i,G),M=Ee.call(it,_)!==!1&&M}}return M&&!_.defaultPrevented}function ul(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function dl(a){a.g=ul(()=>{a.g=null,a.i&&(a.i=!1,dl(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class id extends ye{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:dl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(a){ye.call(this),this.h=a,this.g={}}A(gr,ye);var D=[];function F(a){O(a.g,function(h,p){this.g.hasOwnProperty(p)&&To(h)},a),a.g={}}gr.prototype.N=function(){gr.aa.N.call(this),F(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var q=l.JSON.stringify,X=l.JSON.parse,re=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function se(){}se.prototype.h=null;function ue(a){return a.h||(a.h=a.i())}function rt(){}var Pe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ws(){Ie.call(this,"d")}A(ws,Ie);function oi(){Ie.call(this,"c")}A(oi,Ie);var Tn={},ai=null;function Sn(){return ai=ai||new He}Tn.La="serverreachability";function yr(a){Ie.call(this,Tn.La,a)}A(yr,Ie);function In(a){const h=Sn();nt(h,new yr(h))}Tn.STAT_EVENT="statevent";function vr(a,h){Ie.call(this,Tn.STAT_EVENT,a),this.stat=h}A(vr,Ie);function Be(a){const h=Sn();nt(h,new vr(h,a))}Tn.Ma="timingevent";function _r(a,h){Ie.call(this,Tn.Ma,a),this.size=h}A(_r,Ie);function xn(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function wr(){this.g=!0}wr.prototype.xa=function(){this.g=!1};function hl(a,h,p,_,M,L){a.info(function(){if(a.g)if(L)for(var G="",Ee=L.split("&"),it=0;it<Ee.length;it++){var ge=Ee[it].split("=");if(1<ge.length){var ht=ge[0];ge=ge[1];var ft=ht.split("_");G=2<=ft.length&&ft[1]=="type"?G+(ht+"="+ge+"&"):G+(ht+"=redacted&")}}else G=null;else G=L;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+h+`
`+p+`
`+G})}function Es(a,h,p,_,M,L,G){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+h+`
`+p+`
`+L+" "+G})}function Qt(a,h,p,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+ci(a,p)+(_?" "+_:"")})}function li(a,h){a.info(function(){return"TIMEOUT: "+h})}wr.prototype.info=function(){};function ci(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var _=p[a];if(!(2>_.length)){var M=_[1];if(Array.isArray(M)&&!(1>M.length)){var L=M[0];if(L!="noop"&&L!="stop"&&L!="close")for(var G=1;G<M.length;G++)M[G]=""}}}}return q(p)}catch{return h}}var $n={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Er={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tr;function Ts(){}A(Ts,se),Ts.prototype.g=function(){return new XMLHttpRequest},Ts.prototype.i=function(){return{}},Tr=new Ts;function cn(a,h,p,_){this.j=a,this.i=h,this.l=p,this.R=_||1,this.U=new gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sr}function Sr(){this.i=null,this.g="",this.h=!1}var Ir={},xr={};function Wn(a,h,p){a.L=1,a.v=pl(qn(h)),a.m=p,a.P=!0,ui(a,null)}function ui(a,h){a.F=Date.now(),st(a),a.A=qn(a.v);var p=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),Mp(p.i,"t",_),a.C=0,p=a.j.J,a.h=new Sr,a.g=eg(a.j,p?h:null,!a.m),0<a.O&&(a.M=new id(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,_=a.ca;var M="readystatechange";Array.isArray(M)||(M&&(D[0]=M.toString()),M=D);for(var L=0;L<M.length;L++){var G=ol(p,M[L],_||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),In(),hl(a.i,a.u,a.A,a.l,a.R,a.m)}cn.prototype.ca=function(a){a=a.target;const h=this.M;h&&Gn(a)==3?h.j():this.Y(a)},cn.prototype.Y=function(a){try{if(a==this.g)e:{const ft=Gn(this.g);var h=this.g.Ba();const fi=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||$p(this.g)))){this.J||ft!=4||h==7||(h==8||0>=fi?In(3):In(2)),Ss(this);var p=this.g.Z();this.X=p;t:if(Ve(this)){var _=$p(this.g);a="";var M=_.length,L=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),xo(this);var G="";break t}this.h.i=new l.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(L&&h==M-1)});_.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=p==200,Es(this.i,this.u,this.A,this.l,this.R,ft,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,it=this.g;if((Ee=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Ee)){var ge=Ee;break t}}ge=null}if(p=ge)Qt(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,od(this,p);else{this.o=!1,this.s=3,Be(12),Is(this),xo(this);break e}}if(this.P){p=!0;let un;for(;!this.J&&this.C<G.length;)if(un=St(this,G),un==xr){ft==4&&(this.s=4,Be(14),p=!1),Qt(this.i,this.l,null,"[Incomplete Response]");break}else if(un==Ir){this.s=4,Be(15),Qt(this.i,this.l,G,"[Invalid Chunk]"),p=!1;break}else Qt(this.i,this.l,un,null),od(this,un);if(Ve(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||G.length!=0||this.h.h||(this.s=1,Be(16),p=!1),this.o=this.o&&p,!p)Qt(this.i,this.l,G,"[Invalid Chunked Response]"),Is(this),xo(this);else if(0<G.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),hd(ht),ht.M=!0,Be(11))}}else Qt(this.i,this.l,G,null),od(this,G);ft==4&&Is(this),this.o&&!this.J&&(ft==4?Yp(this.j,this):(this.o=!1,st(this)))}else PS(this.g),p==400&&0<G.indexOf("Unknown SID")?(this.s=3,Be(12)):(this.s=0,Be(13)),Is(this),xo(this)}}}catch{}finally{}};function Ve(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function St(a,h){var p=a.C,_=h.indexOf(`
`,p);return _==-1?xr:(p=Number(h.substring(p,_)),isNaN(p)?Ir:(_+=1,_+p>h.length?xr:(h=h.slice(_,_+p),a.C=_+p,h)))}cn.prototype.cancel=function(){this.J=!0,Is(this)};function st(a){a.S=Date.now()+a.I,kn(a,a.I)}function kn(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=xn(g(a.ba,a),h)}function Ss(a){a.B&&(l.clearTimeout(a.B),a.B=null)}cn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(li(this.i,this.A),this.L!=2&&(In(),Be(17)),Is(this),this.s=2,xo(this)):kn(this,this.S-a)};function xo(a){a.j.G==0||a.J||Yp(a.j,a)}function Is(a){Ss(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,F(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function od(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||ad(p.h,a))){if(!a.K&&ad(p.h,a)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)El(p),_l(p);else break e;dd(p),Be(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=xn(g(p.Za,p),6e3));if(1>=Np(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ks(p,11)}else if((a.K||p.g==a)&&El(p),!T(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let ge=M[h];if(p.T=ge[0],ge=ge[1],p.G==2)if(ge[0]=="c"){p.K=ge[1],p.ia=ge[2];const ht=ge[3];ht!=null&&(p.la=ht,p.j.info("VER="+p.la));const ft=ge[4];ft!=null&&(p.Aa=ft,p.j.info("SVER="+p.Aa));const fi=ge[5];fi!=null&&typeof fi=="number"&&0<fi&&(_=1.5*fi,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const un=a.g;if(un){const Sl=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var L=_.h;L.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ld(L,L.h),L.h=null))}if(_.D){const fd=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;fd&&(_.ya=fd,xe(_.I,_.D,fd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var G=a;if(_.qa=Zp(_,_.J?_.ia:null,_.W),G.K){Ap(_.h,G);var Ee=G,it=_.L;it&&(Ee.I=it),Ee.B&&(Ss(Ee),st(Ee)),_.g=G}else Kp(_);0<p.i.length&&wl(p)}else ge[0]!="stop"&&ge[0]!="close"||ks(p,7);else p.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ks(p,7):ud(p):ge[0]!="noop"&&p.l&&p.l.ta(ge),p.v=0)}}In(4)}catch{}}var mS=class{constructor(a,h){this.g=a,this.map=h}};function xp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Np(a){return a.h?1:a.g?a.g.size:0}function ad(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ld(a,h){a.g?a.g.add(h):a.h=h}function Ap(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}xp.prototype.cancel=function(){if(this.i=Cp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Cp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return j(a.i)}function pS(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],p=a.length,_=0;_<p;_++)h.push(a[_]);return h}h=[],p=0;for(_ in a)h[p++]=a[_];return h}function gS(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const _ in a)h[p++]=_;return h}}}function Pp(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=gS(a),_=pS(a),M=_.length,L=0;L<M;L++)h.call(void 0,_[L],p&&p[L],a)}var Rp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yS(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var _=a[p].indexOf("="),M=null;if(0<=_){var L=a[p].substring(0,_);M=a[p].substring(_+1)}else L=a[p];h(L,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function xs(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof xs){this.h=a.h,fl(this,a.j),this.o=a.o,this.g=a.g,ml(this,a.s),this.l=a.l;var h=a.i,p=new Ao;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Dp(this,p),this.m=a.m}else a&&(h=String(a).match(Rp))?(this.h=!1,fl(this,h[1]||"",!0),this.o=ko(h[2]||""),this.g=ko(h[3]||"",!0),ml(this,h[4]),this.l=ko(h[5]||"",!0),Dp(this,h[6]||"",!0),this.m=ko(h[7]||"")):(this.h=!1,this.i=new Ao(null,this.h))}xs.prototype.toString=function(){var a=[],h=this.j;h&&a.push(No(h,jp,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(No(h,jp,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(No(p,p.charAt(0)=="/"?wS:_S,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",No(p,TS)),a.join("")};function qn(a){return new xs(a)}function fl(a,h,p){a.j=p?ko(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ml(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Dp(a,h,p){h instanceof Ao?(a.i=h,SS(a.i,a.h)):(p||(h=No(h,ES)),a.i=new Ao(h,a.h))}function xe(a,h,p){a.i.set(h,p)}function pl(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ko(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function No(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,vS),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function vS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var jp=/[#\/\?@]/g,_S=/[#\?:]/g,wS=/[#\?]/g,ES=/[#\?@]/g,TS=/#/g;function Ao(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function kr(a){a.g||(a.g=new Map,a.h=0,a.i&&yS(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ao.prototype,t.add=function(a,h){kr(this),this.i=null,a=di(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function bp(a,h){kr(a),h=di(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Op(a,h){return kr(a),h=di(a,h),a.g.has(h)}t.forEach=function(a,h){kr(this),this.g.forEach(function(p,_){p.forEach(function(M){a.call(h,M,_,this)},this)},this)},t.na=function(){kr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const M=a[_];for(let L=0;L<M.length;L++)p.push(h[_])}return p},t.V=function(a){kr(this);let h=[];if(typeof a=="string")Op(this,a)&&(h=h.concat(this.g.get(di(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return kr(this),this.i=null,a=di(this,a),Op(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Mp(a,h,p){bp(a,h),0<p.length&&(a.i=null,a.g.set(di(a,h),j(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const L=encodeURIComponent(String(_)),G=this.V(_);for(_=0;_<G.length;_++){var M=L;G[_]!==""&&(M+="="+encodeURIComponent(String(G[_]))),a.push(M)}}return this.i=a.join("&")};function di(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function SS(a,h){h&&!a.j&&(kr(a),a.i=null,a.g.forEach(function(p,_){var M=_.toLowerCase();_!=M&&(bp(this,_),Mp(this,M,p))},a)),a.j=h}function IS(a,h){const p=new wr;if(l.Image){const _=new Image;_.onload=N(Nr,p,"TestLoadImage: loaded",!0,h,_),_.onerror=N(Nr,p,"TestLoadImage: error",!1,h,_),_.onabort=N(Nr,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=N(Nr,p,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function xS(a,h){const p=new wr,_=new AbortController,M=setTimeout(()=>{_.abort(),Nr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(L=>{clearTimeout(M),L.ok?Nr(p,"TestPingServer: ok",!0,h):Nr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),Nr(p,"TestPingServer: error",!1,h)})}function Nr(a,h,p,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(p)}catch{}}function kS(){this.g=new re}function NS(a,h,p){const _=p||"";try{Pp(a,function(M,L){let G=M;d(M)&&(G=q(M)),h.push(_+L+"="+encodeURIComponent(G))})}catch(M){throw h.push(_+"type="+encodeURIComponent("_badmap")),M}}function gl(a){this.l=a.Ub||null,this.j=a.eb||!1}A(gl,se),gl.prototype.g=function(){return new yl(this.l,this.j)},gl.prototype.i=function(a){return function(){return a}}({});function yl(a,h){He.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(yl,He),t=yl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Po(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Po(this)),this.g&&(this.readyState=3,Po(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Co(this):Po(this),this.readyState==3&&Lp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Co(this))},t.Qa=function(a){this.g&&(this.response=a,Co(this))},t.ga=function(){this.g&&Co(this)};function Co(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Po(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Po(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Vp(a){let h="";return O(a,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function cd(a,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Vp(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):xe(a,h,p))}function Me(a){He.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Me,He);var AS=/^https?$/i,CS=["POST","PUT"];t=Me.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tr.g(),this.v=this.o?ue(this.o):ue(Tr),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){Fp(this,L);return}if(a=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)p.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())p.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),M=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(CS,h,void 0))||_||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,G]of p)this.g.setRequestHeader(L,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bp(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Fp(this,L)}};function Fp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Up(a),vl(a)}function Up(a){a.A||(a.A=!0,nt(a,"complete"),nt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,nt(this,"complete"),nt(this,"abort"),vl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vl(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?zp(this):this.bb())},t.bb=function(){zp(this)};function zp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Gn(a)!=4||a.Z()!=2)){if(a.u&&Gn(a)==4)ul(a.Ea,0,a);else if(nt(a,"readystatechange"),Gn(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=G===0){var M=String(a.D).match(Rp)[1]||null;!M&&l.self&&l.self.location&&(M=l.self.location.protocol.slice(0,-1)),_=!AS.test(M?M.toLowerCase():"")}p=_}if(p)nt(a,"complete"),nt(a,"success");else{a.m=6;try{var L=2<Gn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Up(a)}}finally{vl(a)}}}}function vl(a,h){if(a.g){Bp(a);const p=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||nt(a,"ready");try{p.onreadystatechange=_}catch{}}}function Bp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Gn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),X(h)}};function $p(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function PS(a){const h={};a=(a.g&&2<=Gn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(T(a[_]))continue;var p=I(a[_]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=h[M]||[];h[M]=L,L.push(p)}w(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ro(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Wp(a){this.Aa=0,this.i=[],this.j=new wr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ro("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ro("baseRetryDelayMs",5e3,a),this.cb=Ro("retryDelaySeedMs",1e4,a),this.Wa=Ro("forwardChannelMaxRetries",2,a),this.wa=Ro("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new xp(a&&a.concurrentRequestLimit),this.Da=new kS,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wp.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,_){Be(0),this.W=a,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=Zp(this,null,this.W),wl(this)};function ud(a){if(qp(a),a.G==3){var h=a.U++,p=qn(a.I);if(xe(p,"SID",a.K),xe(p,"RID",h),xe(p,"TYPE","terminate"),Do(a,p),h=new cn(a,a.j,h),h.L=2,h.v=pl(qn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=eg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),st(h)}Jp(a)}function _l(a){a.g&&(hd(a),a.g.cancel(),a.g=null)}function qp(a){_l(a),a.u&&(l.clearTimeout(a.u),a.u=null),El(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function wl(a){if(!kp(a.h)&&!a.s){a.s=!0;var h=a.Ga;ze||ae(),W||(ze(),W=!0),Y.add(h,a),a.B=0}}function RS(a,h){return Np(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=xn(g(a.Ga,a,h),Xp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const M=new cn(this,this.j,a);let L=this.o;if(this.S&&(L?(L=y(L),E(L,this.S)):L=this.S),this.m!==null||this.O||(M.H=L,L=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Hp(this,M,h),p=qn(this.I),xe(p,"RID",a),xe(p,"CVER",22),this.D&&xe(p,"X-HTTP-Session-Id",this.D),Do(this,p),L&&(this.O?h="headers="+encodeURIComponent(String(Vp(L)))+"&"+h:this.m&&cd(p,this.m,L)),ld(this.h,M),this.Ua&&xe(p,"TYPE","init"),this.P?(xe(p,"$req",h),xe(p,"SID","null"),M.T=!0,Wn(M,p,null)):Wn(M,p,h),this.G=2}}else this.G==3&&(a?Gp(this,a):this.i.length==0||kp(this.h)||Gp(this))};function Gp(a,h){var p;h?p=h.l:p=a.U++;const _=qn(a.I);xe(_,"SID",a.K),xe(_,"RID",p),xe(_,"AID",a.T),Do(a,_),a.m&&a.o&&cd(_,a.m,a.o),p=new cn(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Hp(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ld(a.h,p),Wn(p,_,h)}function Do(a,h){a.H&&O(a.H,function(p,_){xe(h,_,p)}),a.l&&Pp({},function(p,_){xe(h,_,p)})}function Hp(a,h,p){p=Math.min(a.i.length,p);var _=a.l?g(a.l.Na,a.l,a):null;e:{var M=a.i;let L=-1;for(;;){const G=["count="+p];L==-1?0<p?(L=M[0].g,G.push("ofs="+L)):L=0:G.push("ofs="+L);let Ee=!0;for(let it=0;it<p;it++){let ge=M[it].g;const ht=M[it].map;if(ge-=L,0>ge)L=Math.max(0,M[it].g-100),Ee=!1;else try{NS(ht,G,"req"+ge+"_")}catch{_&&_(ht)}}if(Ee){_=G.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,_}function Kp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;ze||ae(),W||(ze(),W=!0),Y.add(h,a),a.v=0}}function dd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=xn(g(a.Fa,a),Xp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Qp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=xn(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Be(10),_l(this),Qp(this))};function hd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Qp(a){a.g=new cn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=qn(a.qa);xe(h,"RID","rpc"),xe(h,"SID",a.K),xe(h,"AID",a.T),xe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(h,"TO",a.ja),xe(h,"TYPE","xmlhttp"),Do(a,h),a.m&&a.o&&cd(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=pl(qn(h)),p.m=null,p.P=!0,ui(p,a)}t.Za=function(){this.C!=null&&(this.C=null,_l(this),dd(this),Be(19))};function El(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Yp(a,h){var p=null;if(a.g==h){El(a),hd(a),a.g=null;var _=2}else if(ad(a.h,h))p=h.D,Ap(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=a.B;_=Sn(),nt(_,new _r(_,p)),wl(a)}else Kp(a);else if(M=h.s,M==3||M==0&&0<h.X||!(_==1&&RS(a,h)||_==2&&dd(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),M){case 1:ks(a,5);break;case 4:ks(a,10);break;case 3:ks(a,6);break;default:ks(a,2)}}}function Xp(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function ks(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),_=a.Xa;const M=!_;_=new xs(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||fl(_,"https"),pl(_),M?IS(_.toString(),p):xS(_.toString(),p)}else Be(2);a.G=0,a.l&&a.l.sa(h),Jp(a),qp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))};function Jp(a){if(a.G=0,a.ka=[],a.l){const h=Cp(a.h);(h.length!=0||a.i.length!=0)&&(R(a.ka,h),R(a.ka,a.i),a.h.i.length=0,j(a.i),a.i.length=0),a.l.ra()}}function Zp(a,h,p){var _=p instanceof xs?qn(p):new xs(p);if(_.g!="")h&&(_.g=h+"."+_.g),ml(_,_.s);else{var M=l.location;_=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var L=new xs(null);_&&fl(L,_),h&&(L.g=h),M&&ml(L,M),p&&(L.l=p),_=L}return p=a.D,h=a.ya,p&&h&&xe(_,p,h),xe(_,"VER",a.la),Do(a,_),_}function eg(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Me(new gl({eb:p})):new Me(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tg(){}t=tg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(a,h){return new Vt(a,h)};function Vt(a,h){He.call(this),this.g=new Wp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!T(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!T(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new hi(this)}A(Vt,He),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){ud(this.g)},Vt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=q(a),a=p);h.i.push(new mS(h.Ya++,a)),h.G==3&&wl(h)},Vt.prototype.N=function(){this.g.l=null,delete this.j,ud(this.g),delete this.g,Vt.aa.N.call(this)};function ng(a){ws.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}A(ng,ws);function rg(){oi.call(this),this.status=1}A(rg,oi);function hi(a){this.g=a}A(hi,tg),hi.prototype.ua=function(){nt(this.g,"a")},hi.prototype.ta=function(a){nt(this.g,new ng(a))},hi.prototype.sa=function(a){nt(this.g,new rg)},hi.prototype.ra=function(){nt(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,PE=function(){return new Tl},CE=function(){return Sn()},AE=Tn,lf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,hc=$n,Er.COMPLETE="complete",NE=Er,rt.EventType=Pe,Pe.OPEN="a",Pe.CLOSE="b",Pe.ERROR="c",Pe.MESSAGE="d",He.prototype.listen=He.prototype.K,Ko=rt,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,kE=Me}).apply(typeof Bl<"u"?Bl:typeof self<"u"?self:typeof window<"u"?window:{});const Xy="@firebase/firestore",Jy="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Cm("@firebase/firestore");function gi(){return Ks.logLevel}function H(t,...e){if(Ks.logLevel<=de.DEBUG){const n=e.map(zm);Ks.debug(`Firestore (${fo}): ${t}`,...n)}}function cr(t,...e){if(Ks.logLevel<=de.ERROR){const n=e.map(zm);Ks.error(`Firestore (${fo}): ${t}`,...n)}}function Xi(t,...e){if(Ks.logLevel<=de.WARN){const n=e.map(zm);Ks.warn(`Firestore (${fo}): ${t}`,...n)}}function zm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,RE(t,r,n)}function RE(t,e,n){let r=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw cr(r),new Error(r)}function _e(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||RE(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends mr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class aP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lP{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new nr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new nr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new nr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new DE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new yt(e)}}class cP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new cP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ut(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=hP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function cf(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return le(r,s);{const i=jE(),o=fP(i.encode(ev(t,n)),i.encode(ev(e,n)));return o!==0?o:le(r,s)}}n+=r>65535?2:1}return le(t.length,e.length)}function ev(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function fP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return le(t[n],e[n]);return le(t.length,e.length)}function Ji(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=-62135596800,nv=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*nv);return new Ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tv)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nv}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-tv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Ye(0,0))}static max(){return new ie(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="__name__";class Cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Cn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return le(e.length,n.length)}static compareSegments(e,n){const r=Cn.isNumericId(e),s=Cn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Cn.extractNumericId(e).compare(Cn.extractNumericId(n)):cf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return es.fromString(e.substring(4,e.length-2))}}class Ne extends Cn{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const mP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Cn{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return mP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rv}static keyField(){return new lt([rv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ne.fromString(e))}static fromName(e){return new J(Ne.fromString(e).popFirst(5))}static empty(){return new J(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=-1;function pP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new os(s,J.empty(),e)}function gP(t){return new os(t.readTime,t.key,Oa)}class os{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new os(ie.min(),J.empty(),Oa)}static max(){return new os(ie.max(),J.empty(),Oa)}}function yP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _P{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==vP)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function wP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function po(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Lu.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=-1;function Vu(t){return t==null}function Zc(t){return t===0&&1/t==-1/0}function EP(t){return typeof t=="number"&&Number.isInteger(t)&&!Zc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="";function TP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sv(e)),e=SP(t.get(n),e);return sv(e)}function SP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case OE:n+="";break;default:n+=i}}return n}function sv(t){return t+OE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ys(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ME(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $l(this.root,e,this.comparator,!1)}getReverseIterator(){return new $l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $l(this.root,e,this.comparator,!0)}}class $l{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ov(this.data.getIterator())}getIteratorFrom(e){return new ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new $t([])}unionWith(e){let n=new Xe(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ji(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new LE("Invalid base64 string: "+i):i}}(e);return new dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const IP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=IP.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ls(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="server_timestamp",FE="__type__",UE="__previous_value__",zE="__local_write_time__";function $m(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[FE])===null||n===void 0?void 0:n.stringValue)===VE}function Fu(t){const e=t.mapValue.fields[UE];return $m(e)?Fu(e):e}function Ma(t){const e=as(t.mapValue.fields[zE].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,n,r,s,i,o,l,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const eu="(default)";class La{constructor(e,n){this.projectId=e,this.database=n||eu}static empty(){return new La("","")}get isDefaultDatabase(){return this.database===eu}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="__type__",kP="__max__",Wl={mapValue:{}},$E="__vector__",tu="value";function cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$m(t)?4:AP(t)?9007199254740991:NP(t)?10:11:te(28295,{value:t})}function Bn(t,e){if(t===e)return!0;const n=cs(t);if(n!==cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ma(t).isEqual(Ma(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=as(s.timestampValue),l=as(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ls(s.bytesValue).isEqual(ls(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),l=Fe(i.doubleValue);return o===l?Zc(o)===Zc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ji(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(iv(o)!==iv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Bn(o[u],l[u])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Va(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function Zi(t,e){if(t===e)return 0;const n=cs(t),r=cs(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Fe(i.integerValue||i.doubleValue),u=Fe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return av(t.timestampValue,e.timestampValue);case 4:return av(Ma(t),Ma(e));case 5:return cf(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ls(i),u=ls(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=le(l[d],u[d]);if(f!==0)return f}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=le(Fe(i.latitude),Fe(o.latitude));return l!==0?l:le(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return lv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const m=i.fields||{},g=o.fields||{},N=(l=m[tu])===null||l===void 0?void 0:l.arrayValue,A=(u=g[tu])===null||u===void 0?void 0:u.arrayValue,j=le(((d=N==null?void 0:N.values)===null||d===void 0?void 0:d.length)||0,((f=A==null?void 0:A.values)===null||f===void 0?void 0:f.length)||0);return j!==0?j:lv(N,A)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Wl.mapValue&&o===Wl.mapValue)return 0;if(i===Wl.mapValue)return 1;if(o===Wl.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=cf(u[m],f[m]);if(g!==0)return g;const N=Zi(l[u[m]],d[f[m]]);if(N!==0)return N}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw te(23264,{Pe:n})}}function av(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=as(t),r=as(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function lv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Zi(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function eo(t){return uf(t)}function uf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=as(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=uf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${uf(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function fc(t){switch(cs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fu(t);return e?16+fc(e):16;case 5:return 2*t.stringValue.length;case 6:return ls(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+fc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ys(r.fields,(i,o)=>{s+=i.length+fc(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function cv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function df(t){return!!t&&"integerValue"in t}function Wm(t){return!!t&&"arrayValue"in t}function uv(t){return!!t&&"nullValue"in t}function dv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mc(t){return!!t&&"mapValue"in t}function NP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[BE])===null||n===void 0?void 0:n.stringValue)===$E}function ca(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ys(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ca(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ca(t.arrayValue.values[n]);return e}return Object.assign({},t)}function AP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!mc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ca(n)}setAll(e){let n=lt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ca(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());mc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];mc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ys(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Rt(ca(this.value))}}function WE(t){const e=[];return ys(t.fields,(n,r)=>{const s=new lt([n]);if(mc(r)){const i=WE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wt(e,0,ie.min(),ie.min(),ie.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,s){return new wt(e,1,n,ie.min(),r,s,0)}static newNoDocument(e,n){return new wt(e,2,n,ie.min(),ie.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,ie.min(),ie.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.position=e,this.inclusive=n}}function hv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Zi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function fv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n="asc"){this.field=e,this.dir=n}}function CP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{}class qe extends qE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RP(e,n,r):n==="array-contains"?new bP(e,r):n==="in"?new OP(e,r):n==="not-in"?new MP(e,r):n==="array-contains-any"?new LP(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DP(e,r):new jP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zi(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.matchesComparison(Zi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends qE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new wn(e,n)}matches(e){return GE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function GE(t){return t.op==="and"}function HE(t){return PP(t)&&GE(t)}function PP(t){for(const e of t.filters)if(e instanceof wn)return!1;return!0}function hf(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+eo(t.value);if(HE(t))return t.filters.map(e=>hf(e)).join(",");{const e=t.filters.map(n=>hf(n)).join(",");return`${t.op}(${e})`}}function KE(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&Bn(r.value,s.value)}(t,e):t instanceof wn?function(r,s){return s instanceof wn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&KE(o,s.filters[l]),!0):!1}(t,e):void te(19439)}function QE(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`}(t):t instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(QE).join(" ,")+"}"}(t):"Filter"}class RP extends qe{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class DP extends qe{constructor(e,n){super(e,"in",n),this.keys=YE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jP extends qe{constructor(e,n){super(e,"not-in",n),this.keys=YE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class bP extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wm(n)&&Va(n.arrayValue,this.value)}}class OP extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Va(this.value.arrayValue,n)}}class MP extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Va(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Va(this.value.arrayValue,n)}}class LP extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Va(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function mv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new VP(t,e,n,r,s,i,o)}function qm(t){const e=oe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>eo(r)).join(",")),e.Ie=n}return e.Ie}function Gm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fv(t.startAt,e.startAt)&&fv(t.endAt,e.endAt)}function ff(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function FP(t,e,n,r,s,i,o,l){return new go(t,e,n,r,s,i,o,l)}function Hm(t){return new go(t)}function pv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function XE(t){return t.collectionGroup!==null}function ua(t){const e=oe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Xe(lt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Fa(i,r))}),n.has(lt.keyField().canonicalString())||e.Ee.push(new Fa(lt.keyField(),r))}return e.Ee}function Fn(t){const e=oe(t);return e.de||(e.de=UP(e,ua(t))),e.de}function UP(t,e){if(t.limitType==="F")return mv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Fa(s.field,i)});const n=t.endAt?new nu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nu(t.startAt.position,t.startAt.inclusive):null;return mv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mf(t,e){const n=t.filters.concat([e]);return new go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pf(t,e,n){return new go(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uu(t,e){return Gm(Fn(t),Fn(e))&&t.limitType===e.limitType}function JE(t){return`${qm(Fn(t))}|lt:${t.limitType}`}function yi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>QE(s)).join(", ")}]`),Vu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>eo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>eo(s)).join(",")),`Target(${r})`}(Fn(t))}; limitType=${t.limitType})`}function zu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ua(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=hv(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,ua(r),s)||r.endAt&&!function(o,l,u){const d=hv(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,ua(r),s))}(t,e)}function zP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZE(t){return(e,n)=>{let r=!1;for(const s of ua(t)){const i=BP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function BP(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Zi(u,d):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ys(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return ME(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=new Oe(J.comparator);function ur(){return $P}const eT=new Oe(J.comparator);function Qo(...t){let e=eT;for(const n of t)e=e.insert(n.key,n);return e}function tT(t){let e=eT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Os(){return da()}function nT(){return da()}function da(){return new ei(t=>t.toString(),(t,e)=>t.isEqual(e))}const WP=new Oe(J.comparator),qP=new Xe(J.comparator);function he(...t){let e=qP;for(const n of t)e=e.add(n);return e}const GP=new Xe(le);function HP(){return GP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zc(e)?"-0":e}}function rT(t){return{integerValue:""+t}}function KP(t,e){return EP(e)?rT(e):Km(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(){this._=void 0}}function QP(t,e,n){return t instanceof ru?function(s,i){const o={fields:{[FE]:{stringValue:VE},[zE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&$m(i)&&(i=Fu(i)),i&&(o.fields[UE]=i),{mapValue:o}}(n,e):t instanceof Ua?iT(t,e):t instanceof za?oT(t,e):function(s,i){const o=sT(s,i),l=gv(o)+gv(s.Re);return df(o)&&df(s.Re)?rT(l):Km(s.serializer,l)}(t,e)}function YP(t,e,n){return t instanceof Ua?iT(t,e):t instanceof za?oT(t,e):n}function sT(t,e){return t instanceof su?function(r){return df(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ru extends Bu{}class Ua extends Bu{constructor(e){super(),this.elements=e}}function iT(t,e){const n=aT(e);for(const r of t.elements)n.some(s=>Bn(s,r))||n.push(r);return{arrayValue:{values:n}}}class za extends Bu{constructor(e){super(),this.elements=e}}function oT(t,e){let n=aT(e);for(const r of t.elements)n=n.filter(s=>!Bn(s,r));return{arrayValue:{values:n}}}class su extends Bu{constructor(e,n){super(),this.serializer=e,this.Re=n}}function gv(t){return Fe(t.integerValue||t.doubleValue)}function aT(t){return Wm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function XP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ua&&s instanceof Ua||r instanceof za&&s instanceof za?Ji(r.elements,s.elements,Bn):r instanceof su&&s instanceof su?Bn(r.Re,s.Re):r instanceof ru&&s instanceof ru}(t.transform,e.transform)}class JP{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $u{}function lT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qm(t.key,nn.none()):new el(t.key,t.data,nn.none());{const n=t.data,r=Rt.empty();let s=new Xe(lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new vs(t.key,r,new $t(s.toArray()),nn.none())}}function ZP(t,e,n){t instanceof el?function(s,i,o){const l=s.value.clone(),u=vv(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof vs?function(s,i,o){if(!pc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=vv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(cT(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ha(t,e,n,r){return t instanceof el?function(i,o,l,u){if(!pc(i.precondition,o))return l;const d=i.value.clone(),f=_v(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof vs?function(i,o,l,u){if(!pc(i.precondition,o))return l;const d=_v(i.fieldTransforms,u,o),f=o.data;return f.setAll(cT(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return pc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function eR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=sT(r.transform,s||null);i!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,i))}return n||null}function yv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ji(r,s,(i,o)=>XP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class el extends $u{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class vs extends $u{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function cT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function vv(t,e,n){const r=new Map;_e(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,YP(o,l,n[s]))}return r}function _v(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,QP(i,o,e))}return r}class Qm extends $u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tR extends $u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ZP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ha(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ha(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=lT(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Ji(this.mutations,e.mutations,(n,r)=>yv(n,r))&&Ji(this.baseMutations,e.baseMutations,(n,r)=>yv(n,r))}}class Ym{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return WP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ym(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,fe;function iR(t){switch(t){case U.OK:return te(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function uT(t){if(t===void 0)return cr("GRPC error has no .code"),U.UNKNOWN;switch(t){case $e.OK:return U.OK;case $e.CANCELLED:return U.CANCELLED;case $e.UNKNOWN:return U.UNKNOWN;case $e.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case $e.INTERNAL:return U.INTERNAL;case $e.UNAVAILABLE:return U.UNAVAILABLE;case $e.UNAUTHENTICATED:return U.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case $e.NOT_FOUND:return U.NOT_FOUND;case $e.ALREADY_EXISTS:return U.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return U.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case $e.ABORTED:return U.ABORTED;case $e.OUT_OF_RANGE:return U.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return U.UNIMPLEMENTED;case $e.DATA_LOSS:return U.DATA_LOSS;default:return te(39323,{code:t})}}(fe=$e||($e={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new es([4294967295,4294967295],0);function wv(t){const e=jE().encode(t),n=new xE;return n.update(e),new Uint8Array(n.digest())}function Ev(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new es([n,r],0),new es([s,i],0)]}class Xm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yo(`Invalid padding: ${n}`);if(r<0)throw new Yo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=es.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(es.fromNumber(r)));return s.compare(oR)===1&&(s=new es([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=wv(e),[r,s]=Ev(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xm(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const n=wv(e),[r,s]=Ev(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,tl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wu(ie.min(),s,new Oe(le),ur(),he())}}class tl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tl(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class dT{constructor(e,n){this.targetId=e,this.Ce=n}}class hT{constructor(e,n,r=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Tv{constructor(){this.Fe=0,this.Me=Sv(),this.xe=dt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=he(),n=he(),r=he();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new tl(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=Sv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,_e(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class aR{constructor(e){this.ze=e,this.je=new Map,this.He=ur(),this.Je=ql(),this.Ye=ql(),this.Ze=new Oe(le)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(ff(i))if(r===0){const o=new J(i.path);this.tt(n,o,wt.newNoDocument(o,ie.min()))}else _e(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ls(r).toUint8Array()}catch(u){if(u instanceof LE)return Xi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Xm(o,s,i)}catch(u){return Xi(u instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&ff(l.target)){const u=new J(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,wt.newNoDocument(u,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=he();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Wu(e,n,this.Ze,this.He,r);return this.He=ur(),this.Je=ql(),this.Ye=ql(),this.Ze=new Oe(le),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Tv,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Xe(le),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Xe(le),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Tv),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function ql(){return new Oe(J.comparator)}function Sv(){return new Oe(J.comparator)}const lR={asc:"ASCENDING",desc:"DESCENDING"},cR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uR={and:"AND",or:"OR"};class dR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gf(t,e){return t.useProto3Json||Vu(e)?e:{value:e}}function iu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hR(t,e){return iu(t,e.toTimestamp())}function Un(t){return _e(!!t,49232),ie.fromTimestamp(function(n){const r=as(n);return new Ye(r.seconds,r.nanos)}(t))}function Jm(t,e){return yf(t,e).canonicalString()}function yf(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mT(t){const e=Ne.fromString(t);return _e(_T(e),10190,{key:e.toString()}),e}function vf(t,e){return Jm(t.databaseId,e.path)}function Kd(t,e){const n=mT(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(gT(n))}function pT(t,e){return Jm(t.databaseId,e)}function fR(t){const e=mT(t);return e.length===4?Ne.emptyPath():gT(e)}function _f(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gT(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Iv(t,e,n){return{name:vf(t,e),fields:n.value.mapValue.fields}}function mR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(_e(f===void 0||typeof f=="string",58123),dt.fromBase64String(f||"")):(_e(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),dt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?U.UNKNOWN:uT(d.code);return new K(f,d.message||"")}(o);n=new hT(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Kd(t,r.document.name),i=Un(r.document.updateTime),o=r.document.createTime?Un(r.document.createTime):ie.min(),l=new Rt({mapValue:{fields:r.document.fields}}),u=wt.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new gc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Kd(t,r.document),i=r.readTime?Un(r.readTime):ie.min(),o=wt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new gc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Kd(t,r.document),i=r.removedTargetIds||[];n=new gc([],i,s,null)}else{if(!("filter"in e))return te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new sR(s,i),l=r.targetId;n=new dT(l,o)}}return n}function pR(t,e){let n;if(e instanceof el)n={update:Iv(t,e.key,e.value)};else if(e instanceof Qm)n={delete:vf(t,e.key)};else if(e instanceof vs)n={update:Iv(t,e.key,e.data),updateMask:IR(e.fieldMask)};else{if(!(e instanceof tR))return te(16599,{ft:e.type});n={verify:vf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof ru)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof za)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof su)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:hR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function gR(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Un(s.updateTime):Un(i);return o.isEqual(ie.min())&&(o=Un(i)),new JP(o,s.transformResults||[])}(n,e))):[]}function yR(t,e){return{documents:[pT(t,e.path)]}}function vR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pT(t,s);const i=function(d){if(d.length!==0)return vT(wn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:vi(g.field),direction:ER(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=gf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:s}}function _R(t){let e=fR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=yT(m);return g instanceof wn&&HE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(A){return new Fa(_i(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Vu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,N=m.values||[];return new nu(N,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,N=m.values||[];return new nu(N,g)}(n.endAt)),FP(e,s,o,i,l,"F",u,d)}function wR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_i(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_i(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_i(n.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_i(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return qe.create(_i(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(r=>yT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function ER(t){return lR[t]}function TR(t){return cR[t]}function SR(t){return uR[t]}function vi(t){return{fieldPath:t.canonicalString()}}function _i(t){return lt.fromServerFormat(t.fieldPath)}function vT(t){return t instanceof qe?function(n){if(n.op==="=="){if(dv(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NAN"}};if(uv(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dv(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NOT_NAN"}};if(uv(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vi(n.field),op:TR(n.op),value:n.value}}}(t):t instanceof wn?function(n){const r=n.getFilters().map(s=>vT(s));return r.length===1?r[0]:{compositeFilter:{op:SR(n.op),filters:r}}}(t):te(54877,{filter:t})}function IR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _T(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,r,s,i=ie.min(),o=ie.min(),l=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.wt=e}}function kR(t){const e=_R({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.Cn=new AR}addToCollectionParentIndex(e,n){return this.Cn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(os.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(os.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class AR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xe(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wT=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(wT,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new to(0)}static lr(){return new to(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="LruGarbageCollector",CR=1048576;function Nv([t,e],[n,r]){const s=le(t,n);return s===0?le(e,r):s}class PR{constructor(e){this.Er=e,this.buffer=new Xe(Nv),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Nv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){H(kv,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){po(n)?H(kv,"Ignoring IndexedDB error during garbage collection: ",n):await mo(n)}await this.mr(3e5)})}}class DR{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(Lu.le);const r=new PR(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(xv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xv):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,l,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),gi()<=de.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function jR(t,e){return new DR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.changes=new ei(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ha(r.mutation,s,$t.empty(),Ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=Os();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Qo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=ur();const o=da(),l=function(){return da()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof vs)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ha(f.mutation,d,f.mutation.getFieldMask(),Ye.now())):o.set(d.key,$t.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return l.set(d,new OR(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=da();let s=new Oe((o,l)=>o-l),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||$t.empty();f=l.applyToLocalView(d,f),r.set(u,f);const m=(s.get(l.batchId)||he()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,m=nT();f.forEach(g=>{if(!i.has(g)){const N=lT(n.get(g),r.get(g));N!==null&&m.set(g,N),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):XE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(Os());let l=Oa,u=i;return o.next(d=>z.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?z.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,he())).next(f=>({batchId:l,changes:tT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Qo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Qo();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,u=>{const d=function(m,g){return new go(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,wt.newInvalidDocument(f)))});let l=Qo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&ha(f.mutation,d,$t.empty(),Ye.now()),zu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return z.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Un(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:kR(s.bundledQuery),readTime:Un(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.overlays=new Oe(J.comparator),this.Qr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Os();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=Os(),i=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Os(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Os(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return z.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rR(n,r));let i=this.Qr.get(n);i===void 0&&(i=he(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.$r=new Xe(Je.Ur),this.Kr=new Xe(Je.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Je(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Je(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new J(new Ne([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new J(new Ne([])),r=new Je(n,e),s=new Je(n,e+1);let i=he();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return J.comparator(e.key,n.key)||le(e.Zr,n.Zr)}static Wr(e,n){return le(e.Zr,n.Zr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Xe(Je.Ur)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nR(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Xr=this.Xr.add(new Je(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?Bm:this.nr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const l=this.ei(o.Zr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(le);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{r=r.add(l.Zr)})}),z.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Je(new J(i),0);let l=new Xe(le);return this.Xr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Zr)),!0)},o),z.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return z.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Je(n,0),s=this.Xr.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.ii=e,this.docs=function(){return new Oe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wt.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ur();const o=n.path,l=new J(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||yP(gP(f),r)<=0||(s.has(f.key)||zu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}si(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new BR(this)}getSize(e){return z.resolve(this.size)}}class BR extends bR{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.persistence=e,this.oi=new ei(n=>qm(n),Gm),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this._i=0,this.ai=new Zm,this.targetCount=0,this.ui=to.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),z.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new to(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Tr(n),z.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n){this.ci={},this.overlays={},this.li=new Lu(0),this.hi=!1,this.hi=!0,this.Pi=new FR,this.referenceDelegate=e(this),this.Ti=new $R(this),this.indexManager=new NR,this.remoteDocumentCache=function(s){return new zR(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new xR(n),this.Ei=new LR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new UR(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new WR(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return z.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class WR extends _P{constructor(e){super(),this.currentSequenceNumber=e}}class ep{constructor(e){this.persistence=e,this.Vi=new Zm,this.mi=null}static fi(e){return new ep(e)}get gi(){if(this.mi)return this.mi;throw te(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.gi,r=>{const s=J.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,ie.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return z.or([()=>z.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class ou{constructor(e,n){this.persistence=e,this.yi=new ei(r=>TP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=jR(this,n)}static fi(e,n){return new ou(e,n)}di(){}Ai(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return z.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?z.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ie.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),z.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fc(e.data.value)),n}Dr(e,n,r){return z.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new tp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Rk()?8:wP(Tt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new qR;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,n,o,l.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(gi()<=de.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",yi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),z.resolve()):(gi()<=de.DEBUG&&H("QueryEngine","Query:",yi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(gi()<=de.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",yi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):z.resolve())}ws(e,n){if(pv(n))return z.resolve(null);let r=Fn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=pf(n,null,"F"),r=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=he(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.vs(n,l);return this.Cs(n,d,o,u.readTime)?this.ws(e,pf(n,null,"F")):this.Fs(e,d,n,u)}))})))}bs(e,n,r,s){return pv(n)||s.isEqual(ie.min())?z.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?z.resolve(null):(gi()<=de.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yi(n)),this.Fs(e,o,n,pP(s,Oa)).next(l=>l))})}vs(e,n){let r=new Xe(ZE(e));return n.forEach((s,i)=>{zu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return gi()<=de.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",yi(n)),this.ys.getDocumentsMatchingQuery(e,n,os.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="LocalStore",HR=3e8;class KR{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Oe(le),this.Os=new ei(i=>qm(i),Gm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MR(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function QR(t,e,n,r){return new KR(t,e,n,r)}async function TT(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=he();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:l}))})})}function YR(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const m=d.batch,g=m.keys();let N=z.resolve();return g.forEach(A=>{N=N.next(()=>f.getEntry(u,A)).next(j=>{const R=d.docVersions.get(A);_e(R!==null,48541),j.version.compareTo(R)<0&&(m.applyToRemoteDocument(j,d),j.isValidDocument()&&(j.setReadTime(d.commitVersion),f.addEntry(j)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=he();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ST(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function XR(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ti.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,f.addedDocuments,m)));let N=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?N=N.withResumeToken(dt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):f.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(f.resumeToken,r)),s=s.insert(m,N),function(j,R,x){return j.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=HR?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,N,f)&&l.push(n.Ti.updateTargetData(i,N))});let u=ur(),d=he();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(JR(i,o,e.documentUpdates).next(f=>{u=f.qs,d=f.Qs})),!r.isEqual(ie.min())){const f=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return z.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.xs=s,i))}function JR(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ur();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H(np,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{qs:o,Qs:s}})}function ZR(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Bm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eD(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new Br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function wf(t,e,n){const r=oe(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!po(o))throw o;H(np,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function Av(t,e,n){const r=oe(t);let s=ie.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=oe(u),g=m.Os.get(f);return g!==void 0?z.resolve(m.xs.get(g)):m.Ti.getTargetData(d,f)}(r,o,Fn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:ie.min(),n?i:he())).next(l=>(tD(r,zP(e),l),{documents:l,$s:i})))}function tD(t,e,n){let r=t.Ns.get(e)||ie.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class Cv{constructor(){this.activeTargetIds=HP()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nD{constructor(){this.xo=new Cv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Cv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="ConnectivityMonitor";class Rv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){H(Pv,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){H(Pv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl=null;function Ef(){return Gl===null?Gl=function(){return 268435456+Math.round(2147483648*Math.random())}():Gl++,"0x"+Gl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="RestConnection",sD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iD{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===eu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=Ef(),l=this.jo(e,n.toUriEncodedString());H(Qd,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,s,i);const{host:d}=new URL(l),f=Js(d);return this.Jo(e,l,u,r,f).then(m=>(H(Qd,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Xi(Qd,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=sD[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class aD extends iD{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Ef();return new Promise((l,u)=>{const d=new kE;d.setWithCredentials(!0),d.listenOnce(NE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case hc.NO_ERROR:const m=d.getResponseJson();H(gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case hc.TIMEOUT:H(gt,`RPC '${e}' ${o} timed out`),u(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:const g=d.getStatus();if(H(gt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let N=d.getResponseJson();Array.isArray(N)&&(N=N[0]);const A=N==null?void 0:N.error;if(A&&A.status&&A.message){const j=function(x){const T=x.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(T)>=0?T:U.UNKNOWN}(A.status);u(new K(j,A.message))}else u(new K(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new K(U.UNAVAILABLE,"Connection failed."));break;default:te(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{H(gt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);H(gt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}I_(e,n,r){const s=Ef(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=PE(),l=CE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");H(gt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.E_(m);let g=!1,N=!1;const A=new oD({Zo:R=>{N?H(gt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(H(gt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),H(gt,`RPC '${e}' stream ${s} sending:`,R),m.send(R))},Xo:()=>m.close()}),j=(R,x,T)=>{R.listen(x,k=>{try{T(k)}catch(b){setTimeout(()=>{throw b},0)}})};return j(m,Ko.EventType.OPEN,()=>{N||(H(gt,`RPC '${e}' stream ${s} transport opened.`),A.__())}),j(m,Ko.EventType.CLOSE,()=>{N||(N=!0,H(gt,`RPC '${e}' stream ${s} transport closed`),A.u_(),this.d_(m))}),j(m,Ko.EventType.ERROR,R=>{N||(N=!0,Xi(gt,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),A.u_(new K(U.UNAVAILABLE,"The operation could not be completed")))}),j(m,Ko.EventType.MESSAGE,R=>{var x;if(!N){const T=R.data[0];_e(!!T,16349);const k=T,b=(k==null?void 0:k.error)||((x=k[0])===null||x===void 0?void 0:x.error);if(b){H(gt,`RPC '${e}' stream ${s} received error:`,b);const V=b.status;let O=function(v){const E=$e[v];if(E!==void 0)return uT(E)}(V),w=b.message;O===void 0&&(O=U.INTERNAL,w="Unknown error status: "+V+" with message "+b.message),N=!0,A.u_(new K(O,w)),m.close()}else H(gt,`RPC '${e}' stream ${s} received:`,T),A.c_(T)}}),j(l,AE.STAT_EVENT,R=>{R.stat===lf.PROXY?H(gt,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===lf.NOPROXY&&H(gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.a_()},0),A}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){return new dR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="PersistentStream";class xT{constructor(e,n,r,s,i,o,l,u){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new IT(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new K(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return H(Dv,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(H(Dv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lD extends xT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=mR(this.serializer,e),r=function(i){if(!("targetChange"in i))return ie.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?Un(o.readTime):ie.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=_f(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=ff(u)?{documents:yR(i,u)}:{query:vR(i,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=fT(i,o.resumeToken);const d=gf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ie.min())>0){l.readTime=iu(i,o.snapshotVersion.toTimestamp());const d=gf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=wR(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=_f(this.serializer),n.removeTarget=e,this.Q_(n)}}class cD extends xT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=gR(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=_f(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pR(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{}class dD extends uD{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,yf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(U.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,yf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(U.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class hD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(cr(n),this.ua=!1):H("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="RemoteStore";class fD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{r.enqueueAndForget(async()=>{ti(this)&&(H(Qs,"Restarting streams for network reachability change."),await async function(u){const d=oe(u);d.da.add(4),await nl(d),d.Va.set("Unknown"),d.da.delete(4),await Gu(d)}(this))})}),this.Va=new hD(r,s)}}async function Gu(t){if(ti(t))for(const e of t.Aa)await e(!0)}async function nl(t){for(const e of t.Aa)await e(!1)}function kT(t,e){const n=oe(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),op(n)?ip(n):yo(n).N_()&&sp(n,e))}function rp(t,e){const n=oe(t),r=yo(n);n.Ea.delete(e),r.N_()&&NT(n,e),n.Ea.size===0&&(r.N_()?r.k_():ti(n)&&n.Va.set("Unknown"))}function sp(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(t).Z_(e)}function NT(t,e){t.ma.Ke(e),yo(t).X_(e)}function ip(t){t.ma=new aR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),yo(t).start(),t.Va.ca()}function op(t){return ti(t)&&!yo(t).O_()&&t.Ea.size>0}function ti(t){return oe(t).da.size===0}function AT(t){t.ma=void 0}async function mD(t){t.Va.set("Online")}async function pD(t){t.Ea.forEach((e,n)=>{sp(t,e)})}async function gD(t,e){AT(t),op(t)?(t.Va.Pa(e),ip(t)):t.Va.set("Unknown")}async function yD(t,e,n){if(t.Va.set("Online"),e instanceof hT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ea.delete(l),s.ma.removeTarget(l))}(t,e)}catch(r){H(Qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await au(t,r)}else if(e instanceof gc?t.ma.Xe(e):e instanceof dT?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ie.min()))try{const r=await ST(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.ma.It(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ea.get(d);f&&i.Ea.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.Ea.get(u);if(!f)return;i.Ea.set(u,f.withResumeToken(dt.EMPTY_BYTE_STRING,f.snapshotVersion)),NT(i,u);const m=new Br(f.target,u,d,f.sequenceNumber);sp(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(Qs,"Failed to raise snapshot:",r),await au(t,r)}}async function au(t,e,n){if(!po(e))throw e;t.da.add(1),await nl(t),t.Va.set("Offline"),n||(n=()=>ST(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Qs,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Gu(t)})}function CT(t,e){return e().catch(n=>au(t,n,e))}async function Hu(t){const e=oe(t),n=us(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Bm;for(;vD(e);)try{const s=await ZR(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,_D(e,s)}catch(s){await au(e,s)}PT(e)&&RT(e)}function vD(t){return ti(t)&&t.Ia.length<10}function _D(t,e){t.Ia.push(e);const n=us(t);n.N_()&&n.ea&&n.ta(e.mutations)}function PT(t){return ti(t)&&!us(t).O_()&&t.Ia.length>0}function RT(t){us(t).start()}async function wD(t){us(t).ia()}async function ED(t){const e=us(t);for(const n of t.Ia)e.ta(n.mutations)}async function TD(t,e,n){const r=t.Ia.shift(),s=Ym.from(r,e,n);await CT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Hu(t)}async function SD(t,e){e&&us(t).ea&&await async function(r,s){if(function(o){return iR(o)&&o!==U.ABORTED}(s.code)){const i=r.Ia.shift();us(r).L_(),await CT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Hu(r)}}(t,e),PT(t)&&RT(t)}async function jv(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),H(Qs,"RemoteStore received new credentials");const r=ti(n);n.da.add(3),await nl(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Gu(n)}async function ID(t,e){const n=oe(t);e?(n.da.delete(2),await Gu(n)):e||(n.da.add(2),await nl(n),n.Va.set("Unknown"))}function yo(t){return t.fa||(t.fa=function(n,r,s){const i=oe(n);return i.oa(),new lD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:mD.bind(null,t),n_:pD.bind(null,t),i_:gD.bind(null,t),Y_:yD.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),op(t)?ip(t):t.Va.set("Unknown")):(await t.fa.stop(),AT(t))})),t.fa}function us(t){return t.ga||(t.ga=function(n,r,s){const i=oe(n);return i.oa(),new cD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:wD.bind(null,t),i_:SD.bind(null,t),na:ED.bind(null,t),ra:TD.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Hu(t)):(await t.ga.stop(),t.Ia.length>0&&(H(Qs,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new ap(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lp(t,e){if(cr("AsyncQueue",`${e}: ${t}`),po(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{static emptySet(e){return new Bi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Qo(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.pa=new Oe(J.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):te(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class no{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new no(e,n,Bi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class kD{constructor(){this.queries=Ov(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=Ov(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function Ov(){return new ei(t=>JE(t),Uu)}async function DT(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new xD,r=e.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=lp(o,`Initialization of query '${yi(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&cp(n)}async function jT(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ND(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Ma(s)&&(r=!0);o.ba=s}}r&&cp(n)}function AD(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function cp(t){t.Ca.forEach(e=>{e.next()})}var Tf,Mv;(Mv=Tf||(Tf={})).xa="default",Mv.Cache="cache";class bT{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new no(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=no.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Tf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.key=e}}class MT{constructor(e){this.key=e}}class CD{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=he(),this.mutatedKeys=he(),this.Za=ZE(e),this.Xa=new Bi(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new bv,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),N=zu(this.query,m)?m:null,A=!!g&&this.mutatedKeys.has(g.key),j=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let R=!1;g&&N?g.data.isEqual(N.data)?A!==j&&(r.track({type:3,doc:N}),R=!0):this.ru(g,N)||(r.track({type:2,doc:N}),R=!0,(u&&this.Za(N,u)>0||d&&this.Za(N,d)<0)&&(l=!0)):!g&&N?(r.track({type:0,doc:N}),R=!0):g&&!N&&(r.track({type:1,doc:g}),R=!0,(u||d)&&(l=!0)),R&&(N?(o=o.add(N),i=j?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Xa:o,nu:r,Cs:l,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((f,m)=>function(N,A){const j=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Vt:R})}};return j(N)-j(A)}(f.type,m.type)||this.Za(f.doc,m.doc)),this.iu(r),s=s!=null&&s;const l=n&&!s?this.su():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Ja;return this.Ja=u,o.length!==0||d?{snapshot:new no(this.query,e.Xa,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new bv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=he(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new MT(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new OT(r))}),n}au(e){this.Ha=e.$s,this.Ya=he();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return no.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const up="SyncEngine";class PD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class RD{constructor(e){this.key=e,this.cu=!1}}class DD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new ei(l=>JE(l),Uu),this.Pu=new Map,this.Tu=new Set,this.Iu=new Oe(J.comparator),this.Eu=new Map,this.du=new Zm,this.Au={},this.Ru=new Map,this.Vu=to.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function jD(t,e,n=!0){const r=BT(t);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await LT(r,e,n,!0),s}async function bD(t,e){const n=BT(t);await LT(n,e,!0,!1)}async function LT(t,e,n,r){const s=await eD(t.localStore,Fn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await OD(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&kT(t.remoteStore,s),l}async function OD(t,e,n,r,s){t.fu=(m,g,N)=>async function(j,R,x,T){let k=R.view.tu(x);k.Cs&&(k=await Av(j.localStore,R.query,!1).then(({documents:w})=>R.view.tu(w,k)));const b=T&&T.targetChanges.get(R.targetId),V=T&&T.targetMismatches.get(R.targetId)!=null,O=R.view.applyChanges(k,j.isPrimaryClient,b,V);return Vv(j,R.targetId,O.ou),O.snapshot}(t,m,g,N);const i=await Av(t.localStore,e,!0),o=new CD(e,i.$s),l=o.tu(i.documents),u=tl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Vv(t,n,d.ou);const f=new PD(e,n,o);return t.hu.set(e,f),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function MD(t,e,n){const r=oe(t),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(o=>!Uu(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await wf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&rp(r.remoteStore,s.targetId),Sf(r,s.targetId)}).catch(mo)):(Sf(r,s.targetId),await wf(r.localStore,s.targetId,!0))}async function LD(t,e){const n=oe(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rp(n.remoteStore,r.targetId))}async function VD(t,e,n){const r=qD(t);try{const s=await function(o,l){const u=oe(o),d=Ye.now(),f=l.reduce((N,A)=>N.add(A.key),he());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",N=>{let A=ur(),j=he();return u.Bs.getEntries(N,f).next(R=>{A=R,A.forEach((x,T)=>{T.isValidDocument()||(j=j.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(N,A)).next(R=>{m=R;const x=[];for(const T of l){const k=eR(T,m.get(T.key).overlayedDocument);k!=null&&x.push(new vs(T.key,k,WE(k.value.mapValue),nn.exists(!0)))}return u.mutationQueue.addMutationBatch(N,d,x,l)}).next(R=>{g=R;const x=R.applyToLocalDocumentSet(m,j);return u.documentOverlayCache.saveOverlays(N,R.batchId,x)})}).then(()=>({batchId:g.batchId,changes:tT(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Au[o.currentUser.toKey()];d||(d=new Oe(le)),d=d.insert(l,u),o.Au[o.currentUser.toKey()]=d}(r,s.batchId,n),await rl(r,s.changes),await Hu(r.remoteStore)}catch(s){const i=lp(s,"Failed to persist write");n.reject(i)}}async function VT(t,e){const n=oe(t);try{const r=await XR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?_e(o.cu,14607):s.removedDocuments.size>0&&(_e(o.cu,42227),o.cu=!1))}),await rl(n,r,e)}catch(r){await mo(r)}}function Lv(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,o)=>{const l=o.view.Fa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=oe(o);u.onlineState=l;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.Fa(l)&&(d=!0)}),d&&cp(u)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FD(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Oe(J.comparator);o=o.insert(i,wt.newNoDocument(i,ie.min()));const l=he().add(i),u=new Wu(ie.min(),new Map,new Oe(le),o,l);await VT(r,u),r.Iu=r.Iu.remove(i),r.Eu.delete(e),dp(r)}else await wf(r.localStore,e,!1).then(()=>Sf(r,e,n)).catch(mo)}async function UD(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await YR(n.localStore,e);UT(n,r,null),FT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rl(n,s)}catch(s){await mo(s)}}async function zD(t,e,n){const r=oe(t);try{const s=await function(o,l){const u=oe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(_e(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);UT(r,e,n),FT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rl(r,s)}catch(s){await mo(s)}}function FT(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function UT(t,e,n){const r=oe(t);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function Sf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||zT(t,r)})}function zT(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(rp(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),dp(t))}function Vv(t,e,n){for(const r of n)r instanceof OT?(t.du.addReference(r.key,e),BD(t,r)):r instanceof MT?(H(up,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||zT(t,r.key)):te(19791,{pu:r})}function BD(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(H(up,"New document in limbo: "+n),t.Tu.add(r),dp(t))}function dp(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new J(Ne.fromString(e)),r=t.Vu.next();t.Eu.set(r,new RD(n)),t.Iu=t.Iu.insert(n,r),kT(t.remoteStore,new Br(Fn(Hm(n.path)),r,"TargetPurposeLimboResolution",Lu.le))}}async function rl(t,e,n){const r=oe(t),s=[],i=[],o=[];r.hu.isEmpty()||(r.hu.forEach((l,u)=>{o.push(r.fu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=tp.Rs(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.lu.Y_(s),await async function(u,d){const f=oe(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(d,g=>z.forEach(g.ds,N=>f.persistence.referenceDelegate.addReference(m,g.targetId,N)).next(()=>z.forEach(g.As,N=>f.persistence.referenceDelegate.removeReference(m,g.targetId,N)))))}catch(m){if(!po(m))throw m;H(np,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const N=f.xs.get(g),A=N.snapshotVersion,j=N.withLastLimboFreeSnapshotVersion(A);f.xs=f.xs.insert(g,j)}}}(r.localStore,i))}async function $D(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){H(up,"User change. New user:",e.toKey());const r=await TT(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(l=>{l.forEach(u=>{u.reject(new K(U.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rl(n,r.ks)}}function WD(t,e){const n=oe(t),r=n.Eu.get(e);if(r&&r.cu)return he().add(r.key);{let s=he();const i=n.Pu.get(e);if(!i)return s;for(const o of i){const l=n.hu.get(o);s=s.unionWith(l.view.eu)}return s}}function BT(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FD.bind(null,e),e.lu.Y_=ND.bind(null,e.eventManager),e.lu.gu=AD.bind(null,e.eventManager),e}function qD(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zD.bind(null,e),e}class lu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return QR(this.persistence,new GR,e.initialUser,this.serializer)}Su(e){return new ET(ep.fi,this.serializer)}bu(e){return new nD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lu.provider={build:()=>new lu};class GD extends lu{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){_e(this.persistence.referenceDelegate instanceof ou,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RR(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new ET(r=>ou.fi(r,n),this.serializer)}}class If{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$D.bind(null,this.syncEngine),await ID(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kD}()}createDatastore(e){const n=qu(e.databaseInfo.databaseId),r=function(i){return new aD(i)}(e.databaseInfo);return function(i,o,l,u){return new dD(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new fD(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Lv(this.syncEngine,n,0),function(){return Rv.C()?new Rv:new rD}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const m=new DD(s,i,o,l,u,d);return f&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);H(Qs,"RemoteStore shutting down."),i.da.add(5),await nl(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}If.provider={build:()=>new If};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class HD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=bE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(ds,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(ds,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=lp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xd(t,e){t.asyncQueue.verifyOperationInProgress(),H(ds,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await TT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Fv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KD(t);H(ds,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>jv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>jv(e.remoteStore,s)),t._onlineComponents=e}async function KD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(ds,"Using user provided OfflineComponentProvider");try{await Xd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Xi("Error using user provided cache. Falling back to memory cache: "+n),await Xd(t,new lu)}}else H(ds,"Using default OfflineComponentProvider"),await Xd(t,new GD(void 0));return t._offlineComponents}async function WT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(ds,"Using user provided OnlineComponentProvider"),await Fv(t,t._uninitializedComponentsProvider._online)):(H(ds,"Using default OnlineComponentProvider"),await Fv(t,new If))),t._onlineComponents}function QD(t){return WT(t).then(e=>e.syncEngine)}async function qT(t){const e=await WT(t),n=e.eventManager;return n.onListen=jD.bind(null,e.syncEngine),n.onUnlisten=MD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LD.bind(null,e.syncEngine),n}function YD(t,e,n={}){const r=new nr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new $T({next:g=>{f.xu(),o.enqueueAndForget(()=>jT(i,m));const N=g.docs.has(l);!N&&g.fromCache?d.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&g.fromCache&&u&&u.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new bT(Hm(l.path),f,{includeMetadataChanges:!0,Qa:!0});return DT(i,m)}(await qT(t),t.asyncQueue,e,n,r)),r.promise}function XD(t,e,n={}){const r=new nr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new $T({next:g=>{f.xu(),o.enqueueAndForget(()=>jT(i,m)),g.fromCache&&u.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new bT(l,f,{includeMetadataChanges:!0,Qa:!0});return DT(i,m)}(await qT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JD(t,e,n,r){if(e===!0&&r===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zv(t){if(!J.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Bv(t){if(J.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ku(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function En(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ku(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="firestore.googleapis.com",$v=!0;class Wv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KT,this.ssl=$v}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:$v;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CR)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oP;switch(r.type){case"firstParty":return new uP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Uv.get(n);r&&(H("ComponentProvider","Removing Datastore"),Uv.delete(n),r.terminate())}(this),Promise.resolve()}}function ZD(t,e,n,r={}){var s;t=En(t,Qu);const i=Js(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(Nm(`https://${u}`),Am("Firestore",!0)),o.host!==KT&&o.host!==u&&Xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!Ws(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=yt.MOCK_USER;else{f=Tk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new yt(g)}t._authCredentials=new aP(new DE(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}}class ts extends ni{constructor(e,n,r){super(e,n,Hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new J(e))}withConverter(e){return new ts(this.firestore,e,this._path)}}function zt(t,e,...n){if(t=Ge(t),HT("collection","path",e),t instanceof Qu){const r=Ne.fromString(e,...n);return Bv(r),new ts(t,null,r)}{if(!(t instanceof kt||t instanceof ts))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Bv(r),new ts(t.firestore,null,r)}}function et(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=bE.newId()),HT("doc","path",e),t instanceof Qu){const r=Ne.fromString(e,...n);return zv(r),new kt(t,null,new J(r))}{if(!(t instanceof kt||t instanceof ts))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return zv(r),new kt(t.firestore,t instanceof ts?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="AsyncQueue";class Gv{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new IT(this,"async_queue_retry"),this.rc=()=>{const r=Yd();r&&H(qv,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Yd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new nr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!po(e))throw e;H(qv,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,cr("INTERNAL UNHANDLED ERROR: ",Hv(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=ap.createAndSchedule(this,e,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&te(47125,{cc:Hv(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Hv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ri extends Qu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Gv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gv(e),this._firestoreClient=void 0,await e}}}function ej(t,e){const n=typeof t=="object"?t:Rm(),r=typeof t=="string"?t:eu,s=ju(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=j0("firestore");i&&ZD(s,...i)}return s}function hp(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tj(t),t._firestoreClient}function tj(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new xP(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,GT(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new HD(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ro(dt.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ro(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=/^__.*__$/;class rj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new el(e,this.data,n,this.fieldTransforms)}}class QT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function YT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ic:t})}}class gp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new gp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return cu(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(YT(this.Ic)&&nj.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class sj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qu(e)}bc(e,n,r,s=!1){return new gp({Ic:e,methodName:n,wc:r,path:lt.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xu(t){const e=t._freezeSettings(),n=qu(t._databaseId);return new sj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XT(t,e,n,r,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,s);yp("Data must be an object, but it was:",o,r);const l=JT(r,o);let u,d;if(i.merge)u=new $t(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=xf(e,m,n);if(!o.contains(g))throw new K(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);eS(f,g)||f.push(g)}u=new $t(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new rj(new Rt(l),u,d)}class Ju extends fp{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ju}}function ij(t,e,n,r){const s=t.bc(1,e,n);yp("Data must be an object, but it was:",s,r);const i=[],o=Rt.empty();ys(r,(u,d)=>{const f=vp(e,u,n);d=Ge(d);const m=s.mc(f);if(d instanceof Ju)i.push(f);else{const g=sl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const l=new $t(i);return new QT(o,l,s.fieldTransforms)}function oj(t,e,n,r,s,i){const o=t.bc(1,e,n),l=[xf(e,r,n)],u=[s];if(i.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(xf(e,i[g])),u.push(i[g+1]);const d=[],f=Rt.empty();for(let g=l.length-1;g>=0;--g)if(!eS(d,l[g])){const N=l[g];let A=u[g];A=Ge(A);const j=o.mc(N);if(A instanceof Ju)d.push(N);else{const R=sl(A,j);R!=null&&(d.push(N),f.set(N,R))}}const m=new $t(d);return new QT(f,m,o.fieldTransforms)}function aj(t,e,n,r=!1){return sl(n,t.bc(r?4:3,e))}function sl(t,e){if(ZT(t=Ge(t)))return yp("Unsupported field value:",e,t),JT(t,e);if(t instanceof fp)return function(r,s){if(!YT(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=sl(l,s.fc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ye.fromDate(r);return{timestampValue:iu(s.serializer,i)}}if(r instanceof Ye){const i=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:iu(s.serializer,i)}}if(r instanceof mp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ro)return{bytesValue:fT(s.serializer,r._byteString)};if(r instanceof kt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Jm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof pp)return function(o,l){return{mapValue:{fields:{[BE]:{stringValue:$E},[tu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.gc("VectorValues must only contain numeric values.");return Km(l.serializer,d)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${Ku(r)}`)}(t,e)}function JT(t,e){const n={};return ME(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ys(t,(r,s)=>{const i=sl(s,e.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ZT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof mp||t instanceof ro||t instanceof kt||t instanceof fp||t instanceof pp)}function yp(t,e,n){if(!ZT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ku(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function xf(t,e,n){if((e=Ge(e))instanceof Yu)return e._internalPath;if(typeof e=="string")return vp(t,e);throw cu("Field path arguments must be of type string or ",t,!1,void 0,n)}const lj=new RegExp("[~\\*/\\[\\]]");function vp(t,e,n){if(e.search(lj)>=0)throw cu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yu(...e.split("."))._internalPath}catch{throw cu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new K(U.INVALID_ARGUMENT,l+t+u)}function eS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cj extends tS{data(){return super.data()}}function Zu(t,e){return typeof e=="string"?vp(t,e):e instanceof Yu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _p{}class nS extends _p{}function Rn(t,e,...n){let r=[];e instanceof _p&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof wp).length,l=i.filter(u=>u instanceof ed).length;if(o>1||o>0&&l>0)throw new K(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ed extends nS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ed(e,n,r)}_apply(e){const n=this._parse(e);return rS(e._query,n),new ni(e.firestore,e.converter,mf(e._query,n))}_parse(e){const n=Xu(e.firestore);return function(i,o,l,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Qv(m,f);const A=[];for(const j of m)A.push(Kv(u,i,j));g={arrayValue:{values:A}}}else g=Kv(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Qv(m,f),g=aj(l,o,m,f==="in"||f==="not-in");return qe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vt(t,e,n){const r=e,s=Zu("where",t);return ed._create(s,r,n)}class wp extends _p{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)rS(o,u),o=mf(o,u)}(e._query,n),new ni(e.firestore,e.converter,mf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ep extends nS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ep(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fa(i,o)}(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new go(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Dn(t,e="asc"){const n=e,r=Zu("orderBy",t);return Ep._create(r,n)}function Kv(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new K(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XE(e)&&n.indexOf("/")!==-1)throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!J.isDocumentKey(r))throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cv(t,new J(r))}if(n instanceof kt)return cv(t,n._key);throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ku(n)}.`)}function Qv(t,e){if(!Array.isArray(t)||t.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rS(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dj{convertValue(e,n="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ys(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[tu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new pp(i)}convertGeoPoint(e){return new mp(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ma(e));default:return null}}convertTimestamp(e){const n=as(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);_e(_T(r),9688,{name:e});const s=new La(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||cr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iS extends tS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Zu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yc extends iS{data(e={}){return super.data(e)}}class hj{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yc(this._firestore,this._userDataWriter,r.key,r,new Xo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new yc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new yc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:fj(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t){t=En(t,kt);const e=En(t.firestore,ri);return YD(hp(e),t._key).then(n=>mj(e,t,n))}class oS extends dj{constructor(e){super(),this.firestore=e}convertBytes(e){return new ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function jn(t){t=En(t,ni);const e=En(t.firestore,ri),n=hp(e),r=new oS(e);return uj(t._query),XD(n,t._query).then(s=>new hj(e,r,t,s))}function kf(t,e,n){t=En(t,kt);const r=En(t.firestore,ri),s=sS(t.converter,e,n);return td(r,[XT(Xu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,nn.none())])}function ns(t,e,n,...r){t=En(t,kt);const s=En(t.firestore,ri),i=Xu(s);let o;return o=typeof(e=Ge(e))=="string"||e instanceof Yu?oj(i,"updateDoc",t._key,e,n,r):ij(i,"updateDoc",t._key,e),td(s,[o.toMutation(t._key,nn.exists(!0))])}function Tp(t){return td(En(t.firestore,ri),[new Qm(t._key,nn.none())])}function Sp(t,e){const n=En(t.firestore,ri),r=et(t),s=sS(t.converter,e);return td(n,[XT(Xu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function td(t,e){return function(r,s){const i=new nr;return r.asyncQueue.enqueueAndForget(async()=>VD(await QD(r),s,i)),i.promise}(hp(t),e)}function mj(t,e,n){const r=n.docs.get(e._key),s=new oS(t);return new iS(t,s,e._key,r,new Xo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){fo=s})(uo),qs(new is("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ri(new lP(r.getProvider("auth-internal")),new dP(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Mn(Xy,Jy,e),Mn(Xy,Jy,"esm2017")})();var pj="firebase",gj="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(pj,gj,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ut(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="us-central1";class vj{constructor(e,n,r,s,i=Nf,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new yj(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Nf}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function _j(t,e,n){const r=Js(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Nm(t.emulatorOrigin),Am("Functions",!0))}const Yv="@firebase/functions",Xv="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="auth-internal",Ej="app-check-internal",Tj="messaging-internal";function Sj(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(wj),o=n.getProvider(Tj),l=n.getProvider(Ej);return new vj(s,i,o,l,r)};qs(new is(aS,e,"PUBLIC").setMultipleInstances(!0)),Mn(Yv,Xv,t),Mn(Yv,Xv,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t=Rm(),e=Nf){const r=ju(Ge(t),aS).getImmediate({identifier:e}),s=j0("functions");return s&&xj(r,...s),r}function xj(t,e,n){_j(Ge(t),e,n)}Sj();const kj={apiKey:"AIzaSyBn2jG-T2SesKFr0TsfeQa04wlBmDeEoG4",authDomain:"clarity-311c3.firebaseapp.com",projectId:"clarity-311c3",storageBucket:"clarity-311c3.firebasestorage.app",messagingSenderId:"459484415688",appId:"1:459484415688:web:bac719ee243bbd9821c7fd"},Ip=V0(kj),Ms=IE(Ip),ve=ej(Ip);Ij(Ip,"us-central1");const lS=P.createContext(),on=()=>{const t=P.useContext(lS);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},cS=({children:t})=>{const[e,n]=P.useState(null),[r,s]=P.useState(null),[i,o]=P.useState("free"),[l,u]=P.useState(!0),[d,f]=P.useState(!1),m=P.useRef(!0),g=(b,V)=>{if(!b||!V)return{isTrialActive:!1,daysRemaining:0};const O=V.seconds?new Date(V.seconds*1e3):new Date(V),w=new Date,y=w<O,v=Math.ceil((O-w)/(24*60*60*1e3));return{isTrialActive:y,daysRemaining:Math.max(0,v),trialEndDate:O}},N=async b=>{try{const V=await il(et(ve,"users",b));if(V.exists()){const O=V.data(),w=g(O.trialStartDate,O.trialEndDate);if(console.log("🔍 Profile Data:",O),console.log("📅 Trial Status:",w),!m.current)return;if(O.subscription==="trial"&&!w.isTrialActive){const y={...O,subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date};await ns(et(ve,"users",b),{subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date}),m.current&&(s({...y,...w}),o("free"))}else m.current&&(s({...O,...w}),o(O.subscription))}}catch(V){console.error("Error fetching user profile:",V),m.current&&u(!1)}};P.useEffect(()=>KA(Ms,async V=>{console.log("🔥 Auth state changed:",V?"User logged in":"User logged out");try{if(!m.current)return;n(V),f(!!V),V?await N(V.uid):m.current&&(s(null),o("free"))}catch(O){console.error("Error in auth state change:",O)}finally{m.current&&u(!1)}}),[]),P.useEffect(()=>()=>{m.current=!1},[]);const A=async(b,V,O={})=>{try{const{user:w}=await dE(Ms,b,V),y={email:w.email,uid:w.uid,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date,firstName:O.firstName||"",lastName:O.lastName||"",exerciseGoalMinutes:O.exerciseGoalMinutes||30,waterGoalOz:O.waterGoalOz||64,meditationGoalMinutes:O.meditationGoalMinutes||10};if(await kf(et(ve,"users",w.uid),y),m.current){const v=g(y.trialStartDate,y.trialEndDate);s({...y,...v}),o("trial")}return{success:!0,user:w}}catch(w){throw console.error("Signup error:",w),w}},j=async(b,V)=>{try{const{user:O}=await hE(Ms,b,V);return console.log("✅ Login successful, Firebase will trigger auth state change"),{success:!0,user:O}}catch(O){throw console.error("Login error:",O),O}},R=async()=>{try{return await fE(Ms),m.current&&(n(null),s(null),o("free"),f(!1)),{success:!0}}catch(b){throw console.error("Logout error:",b),b}},x=async()=>{try{if(e!=null&&e.uid){const b={subscription:"premium",subscriptionStatus:"premium_paid",premiumStartDate:new Date,updatedAt:new Date};return await ns(et(ve,"users",e.uid),b),m.current&&(o("premium"),s(V=>({...V,...b}))),{success:!0}}}catch(b){throw console.error("Error upgrading to premium:",b),b}},T=async()=>{try{if(e!=null&&e.uid){const b={subscription:"free",subscriptionCancelledAt:new Date,updatedAt:new Date};return await ns(et(ve,"users",e.uid),b),m.current&&(o("free"),s(V=>({...V,...b}))),{success:!0}}}catch(b){throw console.error("Error cancelling subscription:",b),b}},k={user:e,userProfile:r,userSubscription:i,isAuthenticated:d,isPremium:i==="premium"||i==="trial",isTrialActive:(r==null?void 0:r.isTrialActive)||!1,trialDaysRemaining:(r==null?void 0:r.daysRemaining)||0,loading:l,signup:A,login:j,logout:R,upgradeToPremium:x,cancelSubscription:T,fetchUserProfile:N,authKey:(e==null?void 0:e.uid)||"no-user"};return c.jsx(lS.Provider,{value:k,children:t})},uS="/assets/Logo-BuPYrDrj.png";var dS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Jv=Zn.createContext&&Zn.createContext(dS),Nj=["attr","size","title"];function Aj(t,e){if(t==null)return{};var n=Cj(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cj(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uu(){return uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uu.apply(this,arguments)}function Zv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function du(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zv(Object(n),!0).forEach(function(r){Pj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pj(t,e,n){return e=Rj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rj(t){var e=Dj(t,"string");return typeof e=="symbol"?e:e+""}function Dj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hS(t){return t&&t.map((e,n)=>Zn.createElement(e.tag,du({key:n},e.attr),hS(e.child)))}function jj(t){return e=>Zn.createElement(bj,uu({attr:du({},t.attr)},e),hS(t.child))}function bj(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=Aj(t,Nj),l=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Zn.createElement("svg",uu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:du(du({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Zn.createElement("title",null,i),t.children)};return Jv!==void 0?Zn.createElement(Jv.Consumer,null,n=>e(n)):e(dS)}function Oj(t){return jj({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(t)}async function Mj(t,e){try{const n=et(ve,"users",t),r=await il(n);let s=0;return r.exists()&&typeof r.data().points=="number"&&(s=r.data().points),await ns(n,{points:s+e,updatedAt:new Date}),{success:!0,newPoints:s+e}}catch(n){return console.error("Error adding points:",n),{success:!1,error:n}}}async function Lj(t,e){try{const n=et(ve,"users",t),r=await il(n);let s=0;return r.exists()&&typeof r.data().points=="number"&&(s=r.data().points),s<e?{success:!1,error:"Not enough points"}:(await ns(n,{points:s-e,updatedAt:new Date}),{success:!0,newPoints:s-e})}catch(n){return console.error("Error deducting points:",n),{success:!1,error:n}}}async function Vj(t){try{const e=et(ve,"users",t),n=await il(e);return n.exists()&&typeof n.data().points=="number"?n.data().points:0}catch(e){return console.error("Error getting points:",e),0}}const zn={async register(t){try{const e=await dE(Ms,t.email,t.password);return await kf(et(ve,"users",e.user.uid),{username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,exerciseGoalMinutes:t.exerciseGoalMinutes||30,waterGoalOz:t.waterGoalOz||64,meditationGoalMinutes:t.meditationGoalMinutes||10,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date}),{user:e.user}}catch(e){throw new Error(e.message)}},async login(t,e){try{return{user:(await hE(Ms,t,e)).user}}catch{throw new Error("Invalid credentials")}},async logout(){try{return await fE(Ms),{message:"success"}}catch(t){throw new Error(t.message)}},async getUserProfile(t){try{const e=await il(et(ve,"users",t));if(!e.exists())throw new Error("User not found");return{user:{id:t,...e.data()}}}catch(e){throw new Error(e.message)}},async updateUserProfile(t,e){try{const n=et(ve,"users",t);return await kf(n,{...e,updatedAt:new Date},{merge:!0}),{user:{id:t,...e}}}catch(n){throw new Error("Error updating profile: "+n.message)}},addPoints:Mj,deductPoints:Lj,getPoints:Vj};function Fj(){const{user:t,logout:e}=on(),n=Pu(),[r,s]=P.useState(!1),[i,o]=P.useState(null),[l,u]=P.useState(!1),d=P.useRef();P.useEffect(()=>{const A=async()=>{if(t!=null&&t.uid)try{u(!0);const j=await zn.getUserProfile(t.uid);o(j.user)}catch(j){console.error("Error fetching user profile:",j)}finally{u(!1)}};t!=null&&t.uid&&A()},[t]);const f=A=>{A.stopPropagation(),s(!r)};P.useEffect(()=>{if(!r)return;const A=j=>{d.current&&!d.current.contains(j.target)&&s(!1)};return document.addEventListener("click",A),()=>document.removeEventListener("click",A)},[r]);const m=async A=>{A.preventDefault(),s(!1);try{await e(),n("/welcome")}catch(j){console.error("Error logging out:",j),n("/welcome")}},g=()=>{s(!1),n("/profile")};if(!t)return null;const N="profile-dropdown"+(r?"":" hidden");return c.jsxs("div",{className:"profile-button-container",children:[c.jsx("button",{onClick:f,className:"profile-button",children:c.jsx(Oj,{className:"profile-icon"})}),c.jsxs("ul",{className:N,ref:d,children:[c.jsx("li",{className:"profile-info",children:c.jsx("div",{className:"user-details",children:c.jsx("span",{className:"user-name",children:i!=null&&i.firstName&&(i!=null&&i.lastName)?`${i.firstName} ${i.lastName}`:(i==null?void 0:i.username)||"User"})})}),c.jsx("li",{className:"menu-divider"}),c.jsx("li",{children:c.jsx("button",{onClick:g,className:"dropdown-button",children:"👤 Edit Profile"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>{s(!1),n("/dashboard")},className:"dropdown-button",children:"📊 Dashboard"})}),c.jsx("li",{className:"menu-divider"}),c.jsx("li",{children:c.jsx("button",{onClick:m,className:"dropdown-button logout-button",children:"🚪 Sign Out"})})]})]})}function Uj(){const{userSubscription:t,isTrialActive:e,trialDaysRemaining:n,upgradeToPremium:r}=on();if(t==="premium"||t==="free"||!e)return null;const s=n<=3,i=(14-n)/14*100,o=()=>n===1?"Last day of premium!":n<=3?`Only ${n} days left!`:`${n} days remaining`,l=()=>n===1?"Keep Premium - $4.99/mo":n<=3?"Don't Lose Premium!":"Keep Premium - $4.99/mo";return c.jsxs("div",{className:`trial-banner ${s?"urgent":""}`,children:[c.jsxs("div",{className:"trial-content",children:[c.jsxs("div",{className:"trial-info",children:[c.jsx("span",{className:"trial-icon",children:s?"⏰":"✨"}),c.jsxs("div",{className:"trial-text",children:[c.jsx("h4",{children:s?"Premium Trial Ending!":"Premium Trial Active"}),c.jsx("p",{children:o()})]})]}),c.jsx("button",{onClick:r,className:"trial-upgrade-btn",children:l()})]}),c.jsx("div",{className:"trial-progress",children:c.jsx("div",{className:"trial-progress-bar",style:{width:`${i}%`}})})]})}function zj(){return c.jsxs("div",{className:"navigation-container",children:[c.jsxs("div",{className:"top-header",children:[c.jsxs("div",{className:"logo-container",children:[c.jsx("img",{src:uS,alt:"Clarity logo",className:"logo"}),c.jsx("span",{className:"logo-text",children:"Your Mind + Wellness Tracker"})]}),c.jsx(Fj,{})]}),c.jsx(Uj,{}),c.jsx("main",{className:"main-content",children:c.jsx(Y1,{})}),c.jsxs("nav",{className:"bottom-navigation",children:[c.jsxs(pi,{to:"/dashboard",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"📊"}),c.jsx("span",{className:"nav-label",children:"Home"})]}),c.jsxs(pi,{to:"/workout",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🏋️"}),c.jsx("span",{className:"nav-label",children:"Workout"})]}),c.jsxs(pi,{to:"/meditation",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🧘‍♀️"}),c.jsx("span",{className:"nav-label",children:"Meditate"})]}),c.jsxs(pi,{to:"/water",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"💧"}),c.jsx("span",{className:"nav-label",children:"Water"})]}),c.jsxs(pi,{to:"/games",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🎮"}),c.jsx("span",{className:"nav-label",children:"Games"})]}),c.jsxs(pi,{to:"/goals",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[c.jsx("span",{className:"nav-icon",children:"🎯"}),c.jsx("span",{className:"nav-label",children:"Goals"})]})]})]})}function Bj(){const{user:t,loading:e}=on(),[n,r]=P.useState(""),[s,i]=P.useState(""),[o,l]=P.useState(""),[u,d]=P.useState(""),[f,m]=P.useState(""),[g,N]=P.useState(""),[A,j]=P.useState(""),[R,x]=P.useState("30"),[T,k]=P.useState("64"),[b,V]=P.useState("10"),[O,w]=P.useState({}),[y,v]=P.useState(!1),[E,I]=P.useState(!1),[C,S]=P.useState("pulse");if(P.useEffect(()=>{const Z=[setTimeout(()=>S("open"),2500),setTimeout(()=>S("form"),4500)];return()=>Z.forEach(clearTimeout)},[]),e)return c.jsx("div",{children:"Loading..."});if(t)return c.jsx($c,{to:"/dashboard",replace:!0});const ne=async Z=>{Z.preventDefault(),w({}),I(!0);try{await zn.login(n,s)}catch(ze){w({credential:ze.message})}finally{I(!1)}},pe=async Z=>{if(Z.preventDefault(),s!==A){w({confirmPassword:"Confirm Password field must be the same as the Password field"});return}w({}),I(!0);try{await zn.register({email:o,password:s,username:u,firstName:f,lastName:g,exerciseGoalMinutes:parseInt(R),waterGoalOz:parseInt(T),meditationGoalMinutes:parseInt(b)})}catch(ze){w({general:ze.message})}finally{I(!1)}};return c.jsxs("div",{className:"welcome-container",children:[C!=="form"&&c.jsx("div",{className:`awakening-bg ${C}`,children:c.jsx("div",{className:"awakening-eye"})}),c.jsxs("div",{className:`welcome-card ${C==="form"?"visible":""}`,children:[c.jsxs("div",{className:"welcome-header",children:[c.jsx("img",{src:uS,alt:"Clarity logo"}),c.jsx("p",{children:"Begin your wellness today"})]}),y?c.jsxs("form",{className:"welcome-form",onSubmit:pe,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",value:o,onChange:Z=>l(Z.target.value),required:!0,placeholder:"Enter your email"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Username"}),c.jsx("input",{type:"text",value:u,onChange:Z=>d(Z.target.value),required:!0,placeholder:"Choose a username"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"First Name"}),c.jsx("input",{type:"text",value:f,onChange:Z=>m(Z.target.value),required:!0,placeholder:"Enter your first name"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Last Name"}),c.jsx("input",{type:"text",value:g,onChange:Z=>N(Z.target.value),required:!0,placeholder:"Enter your last name"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Password"}),c.jsx("input",{type:"password",value:s,onChange:Z=>i(Z.target.value),required:!0,placeholder:"Create a password"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Confirm Password"}),c.jsx("input",{type:"password",value:A,onChange:Z=>j(Z.target.value),required:!0,placeholder:"Confirm your password"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Exercise Goal (minutes)"}),c.jsx("input",{type:"number",value:R,onChange:Z=>x(Z.target.value),required:!0,placeholder:"Daily exercise goal in minutes"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Water Goal (oz)"}),c.jsx("input",{type:"number",value:T,onChange:Z=>k(Z.target.value),required:!0,placeholder:"Daily water goal in ounces"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Meditation Goal (minutes)"}),c.jsx("input",{type:"number",value:b,onChange:Z=>V(Z.target.value),required:!0,placeholder:"Daily meditation goal in minutes"})]}),O.confirmPassword&&c.jsx("p",{className:"error-message",children:O.confirmPassword}),O.general&&c.jsx("p",{className:"error-message",children:O.general}),c.jsx("button",{type:"submit",className:"primary-button",disabled:E,children:E?"Creating Account...":"Sign Up"})]}):c.jsxs("form",{className:"welcome-form",onSubmit:ne,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Username or Email"}),c.jsx("input",{type:"text",value:n,onChange:Z=>r(Z.target.value),required:!0,placeholder:"Enter your username or email"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Password"}),c.jsx("input",{type:"password",value:s,onChange:Z=>i(Z.target.value),required:!0,placeholder:"Enter your password"})]}),O.credential&&c.jsx("p",{className:"error-message",children:O.credential}),c.jsx("button",{type:"submit",className:"primary-button",disabled:E,children:E?"Logging In...":"Log In"})]}),c.jsx("button",{className:"secondary-button",onClick:()=>v(!y),disabled:E,children:y?"Already have an account? Log In":"Don't have an account? Sign Up"})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Af=function(t,e){return Af=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Af(t,e)};function $j(t,e){Af(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Wj=100,qj=100,e_=50,Cf=50,Pf=50;function t_(t){var e=t.className,n=t.counterClockwise,r=t.dashRatio,s=t.pathRadius,i=t.strokeWidth,o=t.style;return P.createElement("path",{className:e,style:Object.assign({},o,Hj({pathRadius:s,dashRatio:r,counterClockwise:n})),d:Gj({pathRadius:s,counterClockwise:n}),strokeWidth:i,fillOpacity:0})}function Gj(t){var e=t.pathRadius,n=t.counterClockwise,r=e,s=n?1:0;return`
      M `+Cf+","+Pf+`
      m 0,-`+r+`
      a `+r+","+r+" "+s+" 1 1 0,"+2*r+`
      a `+r+","+r+" "+s+" 1 1 0,-"+2*r+`
    `}function Hj(t){var e=t.counterClockwise,n=t.dashRatio,r=t.pathRadius,s=Math.PI*2*r,i=(1-n)*s;return{strokeDasharray:s+"px "+s+"px",strokeDashoffset:(e?-i:i)+"px"}}var Jd=function(t){$j(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return e_-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var n=this.props,r=n.value,s=n.minValue,i=n.maxValue,o=Math.min(Math.max(r,s),i);return(o-s)/(i-s)},e.prototype.render=function(){var n=this.props,r=n.circleRatio,s=n.className,i=n.classes,o=n.counterClockwise,l=n.styles,u=n.strokeWidth,d=n.text,f=this.getPathRadius(),m=this.getPathRatio();return P.createElement("svg",{className:i.root+" "+s,style:l.root,viewBox:"0 0 "+Wj+" "+qj,"data-test-id":"CircularProgressbar"},this.props.background?P.createElement("circle",{className:i.background,style:l.background,cx:Cf,cy:Pf,r:e_}):null,P.createElement(t_,{className:i.trail,counterClockwise:o,dashRatio:r,pathRadius:f,strokeWidth:u,style:l.trail}),P.createElement(t_,{className:i.path,counterClockwise:o,dashRatio:m*r,pathRadius:f,strokeWidth:u,style:l.path}),d?P.createElement("text",{className:i.text,style:l.text,x:Cf,y:Pf},d):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(P.Component);function Zd(t){var e=t.rotation,n=t.strokeLinecap,r=t.textColor,s=t.textSize,i=t.pathColor,o=t.pathTransition,l=t.pathTransitionDuration,u=t.trailColor,d=t.backgroundColor,f=e==null?void 0:"rotate("+e+"turn)",m=e==null?void 0:"center center";return{root:{},path:Hl({stroke:i,strokeLinecap:n,transform:f,transformOrigin:m,transition:o,transitionDuration:l==null?void 0:l+"s"}),trail:Hl({stroke:u,strokeLinecap:n,transform:f,transformOrigin:m}),text:Hl({fill:r,fontSize:s}),background:Hl({fill:d})}}function Hl(t){return Object.keys(t).forEach(function(e){t[e]==null&&delete t[e]}),t}const B={getUserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone},getCurrentLocalTime(){return new Date},getStartOfDay(t=new Date){const e=new Date(t);return e.setHours(0,0,0,0),e},getEndOfDay(t=new Date){const e=new Date(t);return e.setHours(23,59,59,999),e},formatLocalDate(t){return t.toLocaleDateString("en-CA")},formatLocalDateTime(t){return t.toLocaleString()},formatLocalTime(t){return t.toLocaleTimeString()},getLocalDateRange(t=7){const e=this.getEndOfDay(new Date),n=this.getStartOfDay(new Date);return n.setDate(n.getDate()-(t-1)),{startDate:n,endDate:e}},isToday(t){const e=new Date;return this.formatLocalDate(t)===this.formatLocalDate(e)},isSameLocalDay(t,e){return this.formatLocalDate(t)===this.formatLocalDate(e)},toLocalTimezone(t){return new Date(t)},getRelativeTime(t){const n=new Date-t,r=Math.floor(n/6e4),s=Math.floor(r/60),i=Math.floor(s/24);return r<1?"Just now":r<60?`${r} minutes ago`:s<24?`${s} hours ago`:i===1?"Yesterday":i<7?`${i} days ago`:this.formatLocalDate(t)},getCurrentWeekRange(){const t=new Date,e=t.getDay(),n=new Date(t);n.setHours(0,0,0,0),n.setDate(t.getDate()-e);const r=new Date(n);return r.setDate(n.getDate()+6),r.setHours(23,59,59,999),{startDate:n,endDate:r}}},Ps={async logWorkout(t,e){try{console.log("🌍 Logging workout in timezone:",B.getUserTimezone());let n=B.getCurrentLocalTime();e.date&&(n=B.toLocalTimezone(e.date));const r={title:e.title,type:e.type||"General",durationMinutes:e.durationMinutes,date:n,notes:e.notes||"",caloriesBurned:e.caloriesBurned||0,completed:!0,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},s=await Sp(zt(ve,`users/${t}/workouts`),r);return{id:s.id,success:!0,workout:{...e,id:s.id}}}catch(n){throw new Error("Error logging workout: "+n.message)}},async fetchWorkoutsByUser(t){try{const e=Rn(zt(ve,`users/${t}/workouts`),Dn("date","desc"));return{workouts:(await jn(e)).docs.map(s=>{var i,o,l,u;return{id:s.id,...s.data(),date:(i=s.data().date)==null?void 0:i.toDate(),localDate:B.formatLocalDate((o=s.data().date)==null?void 0:o.toDate()),localDateTime:B.formatLocalDateTime((l=s.data().date)==null?void 0:l.toDate()),relativeTime:B.getRelativeTime((u=s.data().date)==null?void 0:u.toDate())}})}}catch(e){throw new Error("Error fetching workouts: "+e.message)}},async updateWorkout(t,e,n){try{const r=et(ve,`users/${t}/workouts`,e),s={...n,updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()};return n.date&&(s.date=B.toLocalTimezone(n.date)),await ns(r,s),{success:!0,workout:{id:e,...n}}}catch(r){throw new Error("Error updating workout: "+r.message)}},async deleteWorkout(t,e){try{return await Tp(et(ve,`users/${t}/workouts`,e)),{success:!0,message:"Workout deleted successfully"}}catch(n){throw new Error("Error deleting workout: "+n.message)}},async getWorkoutSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange();console.log("🌍 Weekly workout query for timezone:",B.getUserTimezone()),console.log("📅 Query range:",B.formatLocalDateTime(e),"to",B.formatLocalDateTime(n));const r=Rn(zt(ve,`users/${t}/workouts`),vt("date",">=",e),vt("date","<=",n),Dn("date","desc")),i=(await jn(r)).docs.map(u=>{var d;return{id:u.id,...u.data(),date:(d=u.data().date)==null?void 0:d.toDate()}}),o=i.reduce((u,d)=>u+(d.durationMinutes||0),0),l=i.reduce((u,d)=>u+(d.caloriesBurned||0),0);return{totalWorkouts:i.length,totalMinutes:o,totalCalories:l,workouts:i.slice(0,5),period:"This week",userTimezone:B.getUserTimezone()}}catch(e){throw new Error("Error fetching workout summary: "+e.message)}},async getDailyWorkoutSummary(t,e=new Date){try{const{startDate:n,endDate:r}={startDate:B.getStartOfDay(e),endDate:B.getEndOfDay(e)};console.log("🌍 Daily workout query for timezone:",B.getUserTimezone()),console.log("📅 Query range:",B.formatLocalDateTime(n),"to",B.formatLocalDateTime(r));const s=Rn(zt(ve,`users/${t}/workouts`),vt("date",">=",n),vt("date","<=",r),Dn("date","desc")),o=(await jn(s)).docs.map(f=>{var m;return{id:f.id,...f.data(),date:(m=f.data().date)==null?void 0:m.toDate()}});console.log("💪 Found workouts for today:",o.length);const l=o.reduce((f,m)=>f+(m.durationMinutes||0),0),u=o.length,d=o.reduce((f,m)=>f+(m.caloriesBurned||0),0);return{date:B.formatLocalDate(e),totalWorkouts:u,completedWorkouts:u,totalMinutes:l,caloriesBurned:d,lastWorkout:o.length>0?o[0]:null,workouts:o,hasWorkoutsToday:o.length>0,mostCommonType:o.length>0?this.getMostCommonWorkoutType(o):null,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily workout summary:",n),this.getEmptyDailySummary(e)}},getMostCommonWorkoutType(t){if(t.length===0)return null;const e={};return t.forEach(n=>{e[n.type]=(e[n.type]||0)+1}),Object.keys(e).reduce((n,r)=>e[n]>e[r]?n:r)},getEmptyDailySummary(t){return{date:B.formatLocalDate(t),totalWorkouts:0,completedWorkouts:0,totalMinutes:0,caloriesBurned:0,lastWorkout:null,workouts:[],hasWorkoutsToday:!1,mostCommonType:null,userTimezone:B.getUserTimezone()}}},Xt={async logWaterIntake(t,e){try{const n={amount:e.amount,date:B.toLocalTimezone(e.date||new Date),userId:t,createdAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},r=await Sp(zt(ve,`users/${t}/waterIntake`),n);return{id:r.id,success:!0,waterIntake:{...e,id:r.id}}}catch(n){throw new Error("Error logging water intake: "+n.message)}},async fetchWaterIntakeByUser(t,e=30){try{const n=B.getStartOfDay(new Date);n.setDate(n.getDate()-e),console.log("💧 fetchWaterIntakeByUser - Start date:",n.toLocaleDateString());const r=Rn(zt(ve,`users/${t}/waterIntake`),vt("date",">=",n),Dn("date","desc")),i=(await jn(r)).docs.map(o=>{var u;const l=o.data();return{id:o.id,...l,date:(u=l.date)!=null&&u.toDate?l.date.toDate():l.date}});return console.log("💧 fetchWaterIntakeByUser - Found intakes:",i.length),{waterIntakes:i}}catch(n){throw console.error("💧 fetchWaterIntakeByUser error:",n),new Error("Error fetching water intake: "+n.message)}},async updateWaterIntake(t,e,n){try{const r=et(ve,`users/${t}/waterIntake`,e);return await ns(r,{...n,updatedAt:new Date}),{success:!0,waterIntake:{id:e,...n}}}catch(r){throw new Error("Error updating water intake: "+r.message)}},async deleteWaterIntake(t,e){try{return await Tp(et(ve,`users/${t}/waterIntake`,e)),{success:!0,message:"Water intake deleted successfully"}}catch(n){throw new Error("Error deleting water intake: "+n.message)}},async getTodayWaterIntake(t){try{const e=B.getStartOfDay(new Date),n=B.getEndOfDay(new Date);n.setMilliseconds(n.getMilliseconds()+1),console.log("💧 getTodayWaterIntake - Date range:",{today:e.toLocaleDateString(),tomorrow:n.toLocaleDateString(),todayISO:e.toISOString(),tomorrowISO:n.toISOString()});const r=Rn(zt(ve,`users/${t}/waterIntake`),vt("date",">=",e),vt("date","<",n),Dn("date","desc")),i=(await jn(r)).docs.map(l=>{var d;const u=l.data();return{...u,date:(d=u.date)!=null&&d.toDate?u.date.toDate():u.date}});return console.log("💧 getTodayWaterIntake - Found intakes:",i.length),i.forEach(l=>{var u;console.log("  -",l.amount,"oz on",(u=l.date)==null?void 0:u.toLocaleDateString())}),{totalOz:i.reduce((l,u)=>l+(u.amount||0),0),intakeCount:i.length,intakes:i}}catch(e){throw console.error("💧 getTodayWaterIntake error:",e),new Error("Error fetching today's water intake: "+e.message)}},async getWaterSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),r=Rn(zt(ve,`users/${t}/waterIntake`),vt("date",">=",e),vt("date","<=",n),Dn("date","desc")),i=(await jn(r)).docs.map(f=>f.data()),o={};i.forEach(f=>{const m=f.date.toDate().toDateString();o[m]=(o[m]||0)+f.amount});const l=i.reduce((f,m)=>f+(m.amount||0),0),u=7,d=u>0?l/u:0;return{totalOz:l,averageOz:d,dailyTotals:o,intakeCount:i.length}}catch(e){throw new Error("Error fetching water summary: "+e.message)}},async getDailyWaterIntake(t,e=new Date){try{const n=B.getStartOfDay(e),r=B.getEndOfDay(e),s=Rn(zt(ve,`users/${t}/waterIntake`),vt("date",">=",n),vt("date","<=",r),Dn("date","desc")),o=(await jn(s)).docs.map(u=>{var d;return{id:u.id,...u.data(),date:(d=u.data().date)==null?void 0:d.toDate()}}),l=o.reduce((u,d)=>u+(d.amount||0),0);return{date:B.formatLocalDate(e),totalOz:l,totalEntries:o.length,entries:o,hasWaterToday:o.length>0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily water intake:",n),{date:B.formatLocalDate(e),totalOz:0,totalEntries:0,entries:[],hasWaterToday:!1,userTimezone:B.getUserTimezone()}}},calculateHourlyWaterIntake(t){const e={};return t.forEach(n=>{const r=n.date.getHours();e[r]=(e[r]||0)+n.amount}),e}},Rs={async logMeditation(t,e){try{const n={title:e.title||"Meditation Session",type:e.type||"mindfulness",soundscape:e.soundscape||"silence",durationMinutes:e.durationMinutes,targetDuration:e.targetDuration||e.durationMinutes,completed:e.completed||!1,deepStateAchieved:e.deepStateAchieved||!1,date:B.toLocalTimezone(e.date||new Date),notes:e.notes||"",moodBefore:e.moodBefore||"",moodAfter:e.moodAfter||"",guidedSession:e.guidedSession||!1,interruptions:e.interruptions||0,heartRateData:e.heartRateData||null,brainwaveFrequency:e.brainwaveFrequency||null,focusLevel:e.focusLevel||null,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},r=await Sp(zt(ve,`users/${t}/meditations`),n);return{id:r.id,success:!0,meditation:{...n,id:r.id}}}catch(n){throw new Error("Error logging meditation: "+n.message)}},async fetchMeditationsByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const r=Rn(zt(ve,`users/${t}/meditations`),vt("date",">=",n),Dn("date","desc"));return{meditations:(await jn(r)).docs.map(o=>{var l;return{id:o.id,...o.data(),date:(l=o.data().date)==null?void 0:l.toDate()}})}}catch(n){throw new Error("Error fetching meditations: "+n.message)}},async getMeditationAnalytics(t,e=30){try{const r=(await this.fetchMeditationsByUser(t,e)).meditations;if(r.length===0)return{totalSessions:0,deepStateSuccessRate:0,averageDuration:0,favoriteTime:"morning",favoriteSound:"silence",moodImprovement:0};const i=r.filter(d=>d.deepStateAchieved).length/r.length*100,o={},l={},u=[];return r.forEach(d=>{o[d.soundscape]=(o[d.soundscape]||0)+1;const f=d.date.getHours(),m=f<12?"morning":f<18?"afternoon":"evening";if(l[m]=(l[m]||0)+1,d.moodBefore&&d.moodAfter){const g={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6},N=g[d.moodBefore]||3,A=g[d.moodAfter]||3;u.push(A-N)}}),{totalSessions:r.length,deepStateSuccessRate:Math.round(i),averageDuration:r.reduce((d,f)=>d+f.durationMinutes,0)/r.length,favoriteTime:Object.keys(l).reduce((d,f)=>l[d]>l[f]?d:f,"morning"),favoriteSound:Object.keys(o).reduce((d,f)=>o[d]>o[f]?d:f,"silence"),moodImprovement:u.length>0?u.reduce((d,f)=>d+f,0)/u.length:0,consistency:r.length/e}}catch(n){throw new Error("Error fetching meditation analytics: "+n.message)}},async getPersonalizedRecommendations(t){try{const e=await this.getMeditationAnalytics(t),n=[];return e.deepStateSuccessRate<50&&n.push({type:"duration",message:"Try longer sessions (7-10 minutes) to achieve deeper states",action:"Increase session length"}),e.favoriteSound==="silence"&&n.push({type:"soundscape",message:'Research shows binaural beats can enhance focus. Try our "Deep Focus" soundscape.',action:"Try binaural beats"}),e.consistency<.5&&n.push({type:"consistency",message:`Your best time is ${e.favoriteTime}. Set a daily reminder for consistent practice.`,action:"Set daily reminder"}),{recommendations:n}}catch(e){throw new Error("Error generating recommendations: "+e.message)}},async updateMeditation(t,e,n){try{const r=et(ve,`users/${t}/meditations`,e);return await ns(r,{...n,updatedAt:new Date}),{success:!0,meditation:{id:e,...n}}}catch(r){throw new Error("Error updating meditation: "+r.message)}},async deleteMeditation(t,e){try{return await Tp(et(ve,`users/${t}/meditations`,e)),{success:!0,message:"Meditation deleted successfully"}}catch(n){throw new Error("Error deleting meditation: "+n.message)}},async getMeditationSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),r=Rn(zt(ve,`users/${t}/meditations`),vt("date",">=",e),vt("date","<=",n),Dn("date","desc")),i=(await jn(r)).docs.map(d=>d.data()),o=i.reduce((d,f)=>d+(f.durationMinutes||0),0),l=i.length>0?o/i.length:0,u=i.length>0?i.filter(d=>d.deepStateAchieved).length/i.length*100:0;return{totalSessions:i.length,totalMinutes:o,averageDuration:l,deepStateSuccessRate:u,favoriteSoundscape:i.length>0?this.getMostFrequent(i,"soundscape"):"silence",favoriteTime:i.length>0?this.getMostFrequent(i,"timeOfDay"):"morning",moodImprovement:this.calculateMoodImprovement(i)}}catch(e){throw console.error("Error fetching meditation summary:",e),new Error("Error fetching meditation summary: "+e.message)}},getMostFrequent(t,e){const n={};return t.forEach(r=>{const s=e==="timeOfDay"?this.getTimeOfDay(r.date):r[e];n[s]=(n[s]||0)+1}),Object.keys(n).reduce((r,s)=>n[r]>n[s]?r:s)},getTimeOfDay(t){let e;if(t instanceof Date)e=t;else if(typeof t=="string")e=new Date(t);else if(t&&t.seconds)e=new Date(t.seconds*1e3);else return console.warn("Invalid date format:",t),"unknown";if(isNaN(e.getTime()))return console.warn("Invalid date object:",t),"unknown";const n=e.getHours();return n<6?"night":n<12?"morning":n<17?"afternoon":n<21?"evening":"night"},calculateMoodImprovement(t){const e={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6};let n=0,r=0;return t.forEach(s=>{const i=e[s.moodBefore]||3,o=e[s.moodAfter]||3;n+=o-i,r++}),r>0?n/r:0},async getDailyMeditationSummary(t,e=new Date){try{const n=B.getStartOfDay(e),r=B.getEndOfDay(e);console.log("🌍 Daily meditation query for timezone:",B.getUserTimezone());const s=Rn(zt(ve,`users/${t}/meditations`),vt("date",">=",n),vt("date","<=",r),Dn("date","desc")),o=(await jn(s)).docs.map(R=>{var x;return{id:R.id,...R.data(),date:(x=R.data().date)==null?void 0:x.toDate()}}),l=o.reduce((R,x)=>R+(x.durationMinutes||0),0),u=o.filter(R=>R.completed).length,d=o.length>0?l/o.length:0,f=o.filter(R=>R.deepStateAchieved).length,m=o.length>0?f/o.length*100:0,g=o.length>0?o[0]:null,N=o.length>0?this.getMostFrequent(o,"soundscape"):"silence",A=o.length>0?this.getMostFrequent(o,"timeOfDay"):"morning",j=this.calculateMoodImprovement(o);return{date:B.formatLocalDate(e),totalSessions:o.length,completedSessions:u,totalMinutes:l,averageDuration:Math.round(d*10)/10,deepStateAchieved:f,deepStateSuccessRate:Math.round(m),lastSession:g,favoriteSoundscape:N,favoriteTime:A,moodImprovement:Math.round(j*100)/100,sessions:o,hasSessionsToday:o.length>0,mostRecentType:(g==null?void 0:g.type)||"mindfulness",mostRecentSoundscape:(g==null?void 0:g.soundscape)||"silence",timeOfLastSession:(g==null?void 0:g.date)||null,totalInterruptions:o.reduce((R,x)=>R+(x.interruptions||0),0),averageFocusLevel:o.length>0?o.reduce((R,x)=>R+(x.focusLevel||5),0)/o.length:0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily meditation summary:",n),{date:e.toISOString().split("T")[0],totalSessions:0,completedSessions:0,totalMinutes:0,averageDuration:0,deepStateAchieved:0,deepStateSuccessRate:0,lastSession:null,favoriteSoundscape:"silence",favoriteTime:"morning",moodImprovement:0,sessions:[],hasSessionsToday:!1,mostRecentType:"mindfulness",mostRecentSoundscape:"silence",timeOfLastSession:null,totalInterruptions:0,averageFocusLevel:0,userTimezone:B.getUserTimezone()}}}},n_=["You are capable of amazing things.","You are loved.","You are strong.","You are beautiful.","You are enough.","You are worthy.","You are important.","You are talented.","You are special.","I am capable and strong","I am loved and loving","I am healthy and happy","I am wealthy and wise","Believe in yourself and all that you are.","You are amazing.","You are stronger than you think.","You are braver than you believe.","Every day is a new opportunity.","You are worth it.","You are worthy of all the good things.","You are deserving of love and happiness.","Stay positive, work hard, make it happen.","You are enough just as you are.","You are doing great.","Your potential is limitless.","You are a work of art.","You are doing great.","You are a gift to the world.","Keep going, you are getting there.","You are a masterpiece."],r_="https://createstripecheckoutsession-z5fchdkthq-uc.a.run.app";async function Ba(){const t=IE().currentUser;if(!t){alert("You must be logged in to upgrade.");return}try{console.log("🔧 Starting Stripe upgrade with direct HTTP call"),console.log("👤 User ID:",t.uid),console.log("🌐 Function URL:",r_);const e=await fetch(r_,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t.uid})});if(console.log("📡 Response status:",e.status),console.log("📡 Response headers:",e.headers),!e.ok){const s=await e.text();throw console.error("❌ HTTP error response:",s),new Error(`HTTP error! status: ${e.status}, body: ${s}`)}const n=await e.json();console.log("✅ Function call successful:",n);const{url:r}=n;console.log("🔗 Redirecting to Stripe checkout:",r),window.location.href=r}catch(e){console.error("❌ Error creating Stripe checkout session:",e),console.error("❌ Error details:",e.message),alert("Error creating checkout session. Please try again.")}}function s_(){const t=Math.floor(Math.random()*n_.length);return n_[t]}function Kj(){const t=Pu(),{user:e,loading:n,isPremium:r}=on(),[s,i]=P.useState(null),[o,l]=P.useState({workout:{totalMinutes:0,sessions:0,hasWorkoutsToday:!1},meditation:{totalMinutes:0,sessions:0,hasSessionsToday:!1,deepStateAchieved:0},water:{totalOz:0,entries:0,hasWaterToday:!1}}),[u,d]=P.useState(30),[f,m]=P.useState(10),[g,N]=P.useState(64),[A,j]=P.useState(s_()),[R,x]=P.useState(!0),[T,k]=P.useState(!1),[b,V]=P.useState(0);if(P.useEffect(()=>{if(!n&&!e){t("/welcome",{replace:!0});return}},[e,n,t]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{x(!0);const I=B.getCurrentLocalTime();console.log("🌍 Dashboard timezone:",B.getUserTimezone()),console.log("📅 Local today:",B.formatLocalDateTime(I));const C=await zn.getUserProfile(e.uid);i(C.user),d(C.user.exerciseGoalMinutes||30),m(C.user.meditationGoalMinutes||10),N(C.user.waterGoalOz||64),console.log("📊 Fetching workout data for date:",I);const[S,ne,pe]=await Promise.all([Ps.getDailyWorkoutSummary(e.uid,I),Rs.getDailyMeditationSummary(e.uid,I),Xt.getDailyWaterIntake(e.uid,I)]);console.log("📊 Raw workout data from Dashboard:",S),console.log("🧘 Raw meditation data:",ne),console.log("💧 Raw water data:",pe),l({workout:{totalMinutes:S.totalMinutes||0,sessions:S.totalWorkouts||0,hasWorkoutsToday:S.hasWorkoutsToday||S.totalMinutes>0,calories:S.caloriesBurned||0,lastWorkoutType:S.mostCommonType},meditation:{totalMinutes:ne.totalMinutes||0,sessions:ne.totalSessions||0,hasSessionsToday:ne.hasSessionsToday||!1,deepStateAchieved:ne.deepStateAchieved||0,moodImprovement:ne.moodImprovement||0,lastSessionType:ne.mostRecentType},water:{totalOz:pe.totalOz||0,entries:pe.totalEntries||pe.entries||0,hasWaterToday:(pe.totalOz||0)>0,averagePerEntry:pe.averagePerEntry||0,isOnTrack:(pe.totalOz||0)>=(C.user.waterGoalOz||64)*.75}})}catch(I){console.error("Error fetching daily data:",I)}finally{x(!1)}})()},[e]),P.useEffect(()=>{const E=localStorage.getItem("affirmation"),I=localStorage.getItem("affirmationDate"),C=new Date().toISOString().split("T")[0];if(E&&I===C)j(E);else{const S=s_();j(S),localStorage.setItem("affirmation",S),localStorage.setItem("affirmationDate",C)}},[]),P.useEffect(()=>{if(console.log("Trial modal effect running",s),s&&s.subscriptionStatus==="trial_expired"&&s.subscription==="free"){const E=localStorage.getItem("dontRemindTrial"),I=localStorage.getItem("lastTrialReminded");console.log("dontRemindTrial:",E),console.log("lastReminded:",I);const C=1e3*60*60*24*7,S=Date.now();E||(!I||S-Number(I)>C)&&(k(!0),localStorage.setItem("lastTrialReminded",S),console.log("Showing trial modal!"))}},[s]),P.useEffect(()=>{(async()=>{if(e!=null&&e.uid){const I=await zn.getPoints(e.uid);V(I)}})()},[e]),n||R)return c.jsx("div",{className:"dashboard-loading",children:"Loading..."});if(!e)return c.jsx("div",{className:"dashboard-loading",children:"Redirecting..."});if(!s)return c.jsx("div",{className:"dashboard-loading",children:"Loading user data..."});if(!s.firstName||!s.exerciseGoalMinutes||!s.waterGoalOz||!s.meditationGoalMinutes)return c.jsx("div",{className:"dashboard-loading",children:"Loading user profile..."});const O=Math.min(o.workout.totalMinutes/u*100,100)||0,w=Math.min(o.meditation.totalMinutes/f*100,100)||0,y=Math.min(o.water.totalOz/g*100,100)||0,v=Math.max(u-o.workout.totalMinutes,0);return s.subscriptionStatus==="trial_expired"&&s.subscription,c.jsxs("div",{className:"dashboard-page",children:[c.jsxs("div",{className:"points-balance",children:[c.jsx("span",{role:"img","aria-label":"points",children:"⭐"})," ",b," Points"]}),c.jsxs("div",{className:"welcome-section",children:[c.jsxs("h1",{children:["Welcome back, ",s.firstName,"!"]}),c.jsx("p",{children:"Here's your wellness progress for today"})]}),c.jsxs("div",{className:"progress-bars",children:[c.jsxs("div",{className:"progress-bar",children:[c.jsx("h2",{children:"💪 Today's Workout"}),c.jsxs("p",{className:"goal-text",children:["Daily Goal: ",u," minutes"]}),c.jsxs("p",{className:"current-text",children:[o.workout.totalMinutes," / ",u," min"]}),c.jsx(Jd,{value:O,text:`${Math.round(O)}%`,styles:Zd({pathColor:`rgba(62, 152, 199, ${Math.max(O/100,.3)})`,textColor:"#3e98c7"})}),c.jsx("div",{className:"daily-stats",children:o.workout.hasWorkoutsToday?c.jsxs("span",{children:["✅ ",o.workout.sessions," workouts logged"]}):c.jsx("span",{children:"No workouts logged today"})}),c.jsx("button",{className:"track-button",onClick:()=>t("/workout"),children:"Log Workout"})]}),c.jsxs("div",{className:"progress-bar",children:[c.jsx("h2",{children:"🧘‍♀️ Today's Meditation"}),c.jsxs("p",{className:"goal-text",children:["Daily Goal: ",f," minutes"]}),c.jsxs("p",{className:"current-text",children:[o.meditation.totalMinutes," / ",f," min"]}),c.jsx(Jd,{value:w,text:`${Math.round(w)}%`,styles:Zd({pathColor:`rgba(138, 43, 226, ${Math.max(w/100,.3)})`,textColor:"#8a2be2"})}),c.jsxs("div",{className:"daily-stats",children:[o.meditation.hasSessionsToday?c.jsxs("span",{children:["✅ ",o.meditation.sessions," sessions completed"]}):c.jsx("span",{children:"No meditation logged today"}),o.meditation.deepStateAchieved>0&&c.jsxs("span",{className:"deep-state",children:["🌟 ",o.meditation.deepStateAchieved," deep states"]})]}),c.jsx("button",{className:"track-button",onClick:()=>t("/meditation"),children:"Start Meditation"})]}),c.jsxs("div",{className:"progress-bar",children:[c.jsx("h2",{children:"💧 Today's Hydration"}),c.jsxs("p",{className:"goal-text",children:["Daily Goal: ",g," oz"]}),c.jsxs("p",{className:"current-text",children:[o.water.totalOz," / ",g," oz"]}),c.jsx(Jd,{value:y,text:`${Math.round(y)}%`,styles:Zd({pathColor:`rgba(30, 144, 255, ${Math.max(y/100,.3)})`,textColor:"#1e90ff"})}),c.jsxs("div",{className:"daily-stats",children:[o.water.hasWaterToday?c.jsxs("span",{children:["✅ ",o.water.entries," water entries"]}):c.jsx("span",{children:"No water logged today"}),o.water.isOnTrack&&c.jsx("span",{className:"on-track",children:"🎯 On track for hydration!"})]}),c.jsx("button",{className:"track-button",onClick:()=>t("/water"),children:"Log Water"})]})]}),v>0&&c.jsx("div",{className:"notification-bar",children:c.jsxs("p",{children:["🔥 You are ",v," minutes away from your daily workout goal!"]})}),O>=100&&w>=100&&y>=100&&c.jsx("div",{className:"celebration-bar",children:c.jsx("p",{children:"🎉 Congratulations! You've achieved all your daily wellness goals! 🎉"})}),c.jsxs("div",{className:"affirmation-bar",children:[c.jsx("p",{children:"🌸 Daily Affirmation 🌸"}),c.jsx("h2",{children:A})]}),c.jsxs("div",{className:"quick-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:o.workout.totalMinutes}),c.jsx("span",{className:"stat-label",children:"Minutes Exercised Today"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:o.water.totalOz}),c.jsx("span",{className:"stat-label",children:"Ounces of Water Today"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:o.meditation.totalMinutes}),c.jsx("span",{className:"stat-label",children:"Minutes Meditated Today"})]})]}),T&&c.jsx("div",{className:"trial-modal-overlay",children:c.jsxs("div",{className:"trial-modal",children:[c.jsx("h2",{children:"Your free trial has ended"}),c.jsx("p",{children:"Upgrade to keep enjoying premium features!"}),c.jsx("button",{className:"primary-button",onClick:Ba,children:"Upgrade with Stripe"}),c.jsxs("div",{className:"trial-modal-actions",children:[c.jsx("button",{className:"secondary-button",onClick:()=>k(!1),children:"Remind me later"}),c.jsx("button",{className:"link-button",onClick:()=>{localStorage.setItem("dontRemindTrial","true"),k(!1)},children:"Don't remind me again"})]})]})})]})}function Qj(){const{user:t}=on(),[e,n]=P.useState([]),[r,s]=P.useState({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),[i,o]=P.useState(!1),[l,u]=P.useState(null),[d,f]=P.useState(!0),[m,g]=P.useState(!1),[N,A]=P.useState(""),j=new Date().toISOString().split("T")[0];P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const w=await Ps.fetchWorkoutsByUser(t.uid);n(w.workouts||[])}catch(w){console.error("Error fetching workouts:",w),A("Failed to load workouts")}finally{f(!1)}})()},[t]);const R=O=>{const{name:w,value:y}=O.target;s(v=>({...v,[w]:y}))},x=async O=>{if(O.preventDefault(),console.log("🚀 Workout submit started"),console.log("📊 Form data:",r),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),A("Please log in to save workouts");return}if(!r.title||!r.durationMinutes||!r.date){A("Please fill in all required fields");return}try{g(!0),A("");let w;if(r.date){const E=r.date.split("-"),I=parseInt(E[0]),C=parseInt(E[1]),S=parseInt(E[2]),ne=new Date;console.log("🔍 Date parsing debug:"),console.log("  Form input:",r.date),console.log("  Split parts:",E),console.log("  Parsed year:",I),console.log("  Parsed month (human readable):",C),console.log("  Parsed day:",S),console.log("  Month for Date constructor (0-indexed):",C-1),w=new Date(I,C-1,S,ne.getHours(),ne.getMinutes(),ne.getSeconds()),console.log("📅 Created date:",w),console.log("📅 Verify - Year:",w.getFullYear()),console.log("📅 Verify - Month (0-indexed):",w.getMonth()),console.log("📅 Verify - Month (human):",w.getMonth()+1),console.log("📅 Verify - Day:",w.getDate()),console.log("📅 Final formatted:",w.toLocaleDateString())}else w=B.getCurrentLocalTime();const y={title:r.title,type:r.type,durationMinutes:parseInt(r.durationMinutes),date:w,notes:r.notes,caloriesBurned:r.caloriesBurned?parseInt(r.caloriesBurned):0};console.log("📝 Final workout data:",y),console.log("📅 Will be saved as:",B.formatLocalDateTime(y.date));let v;if(i&&l?v=await Ps.updateWorkout(t.uid,l,y):v=await Ps.logWorkout(t.uid,y),console.log("✅ Workout service result:",v),v.success){console.log("🎉 Workout logged successfully!");const E=await Ps.fetchWorkoutsByUser(t.uid);n(E.workouts||[]),s({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),o(!1),u(null),A("")}}catch(w){console.error("💥 Workout logging error:",w),A("Failed to save workout. Please try again.")}finally{g(!1)}},T=O=>{var y,v;o(!0),u(O.id);const w=O.date instanceof Date?O.date.toISOString().split("T")[0]:new Date(O.date).toISOString().split("T")[0];s({date:w,durationMinutes:((y=O.durationMinutes)==null?void 0:y.toString())||"",title:O.title||"",type:O.type||"General",notes:O.notes||"",caloriesBurned:((v=O.caloriesBurned)==null?void 0:v.toString())||""})},k=async O=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this workout?"))try{await Ps.deleteWorkout(t.uid,O),n(w=>w.filter(y=>y.id!==O))}catch(w){console.error("Error deleting workout:",w),A("Failed to delete workout")}},b=()=>{o(!1),u(null),s({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""})},V=e.filter(O=>(O.date instanceof Date?O.date.toISOString().split("T")[0]:new Date(O.date).toISOString().split("T")[0])===j);return d?c.jsx("div",{className:"workout-loading",children:"Loading workouts..."}):c.jsxs("div",{className:"workout-page",children:[c.jsxs("div",{className:"workout-card",children:[c.jsx("h1",{className:"workout-title",children:i?"Edit Workout Session":"Log Workout Session"}),N&&c.jsx("div",{className:"error-message",children:N}),c.jsxs("form",{onSubmit:x,className:"workout-form",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Date",c.jsx("input",{type:"date",name:"date",value:r.date,onChange:R,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Workout Title",c.jsx("input",{type:"text",name:"title",value:r.title,onChange:R,className:"form-input",placeholder:"e.g., Morning Run, Gym Session",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Workout Type",c.jsxs("select",{name:"type",value:r.type,onChange:R,className:"form-input",children:[c.jsx("option",{value:"General",children:"General"}),c.jsx("option",{value:"Cardio",children:"Cardio"}),c.jsx("option",{value:"Strength",children:"Strength Training"}),c.jsx("option",{value:"Yoga",children:"Yoga"}),c.jsx("option",{value:"Running",children:"Running"}),c.jsx("option",{value:"Cycling",children:"Cycling"}),c.jsx("option",{value:"Swimming",children:"Swimming"}),c.jsx("option",{value:"Walking",children:"Walking"}),c.jsx("option",{value:"HIIT",children:"HIIT"}),c.jsx("option",{value:"Other",children:"Other"})]})]})}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Duration / Length (Minutes)",c.jsx("input",{type:"number",name:"durationMinutes",value:r.durationMinutes,onChange:R,className:"form-input",min:"1",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Calories Burned (Optional)",c.jsx("input",{type:"number",name:"caloriesBurned",value:r.caloriesBurned,onChange:R,className:"form-input",min:"0",placeholder:"0"})]})})]}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Notes (Optional)",c.jsx("textarea",{name:"notes",value:r.notes,onChange:R,className:"form-input form-textarea",placeholder:"How did it feel? Any achievements?",rows:"3"})]})}),c.jsxs("div",{className:"form-buttons",children:[c.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Workout":"Log Workout"}),i&&c.jsx("button",{type:"button",className:"cancel-button",onClick:b,disabled:m,children:"Cancel"})]})]})]}),c.jsxs("div",{className:"workout-log",children:[c.jsxs("h2",{className:"log-title",children:["Today's Workouts (",V.length,")"]}),V.length===0?c.jsx("p",{className:"no-workouts",children:"No workouts logged for today. Start your fitness journey!"}):c.jsx("ul",{className:"log-list",children:V.map(O=>c.jsxs("li",{className:"log-item",children:[c.jsxs("div",{className:"workout-info",children:[c.jsx("span",{className:"workout-title-display",children:O.title}),c.jsx("span",{className:"workout-type",children:O.type}),c.jsxs("span",{className:"workout-duration",children:[O.durationMinutes," min"]}),O.caloriesBurned>0&&c.jsxs("span",{className:"workout-calories",children:[O.caloriesBurned," cal"]}),O.notes&&c.jsx("span",{className:"workout-notes",children:O.notes})]}),c.jsxs("div",{className:"workout-actions",children:[c.jsx("button",{onClick:()=>T(O),className:"edit-button",disabled:m,children:"Edit"}),c.jsx("button",{onClick:()=>k(O.id),className:"delete-button",disabled:m,children:"Delete"})]})]},O.id))})]})]})}const Pr={silence:{name:"Silence",description:"Pure silence for traditional meditation",icon:"🤫",neurological:"Promotes introspection and self-awareness",frequency:null,baseFreq:null},pink_noise_rain:{name:"Pink Noise Rain",description:"Synthetic pink noise for deep relaxation",icon:"🌧️",neurological:"Pink noise (1/f) - enhances deep sleep and memory consolidation",frequency:"pink_noise",baseFreq:200,waveType:"sawtooth"},alpha_waves:{name:"Ocean Waves",description:"Realistic ocean waves with alpha wave entrainment",icon:"🌊",neurological:"Ocean rhythms (0.1 Hz) naturally entrain alpha waves (8-12 Hz) for relaxation",frequency:"ocean_waves",waveFrequency:.1,baseFreq:60,highFreq:200,alphaCarrier:200,alphaBeat:10,waveType:"sine"},earth_frequency:{name:"Earth Resonance",description:"Schumann resonance for grounding",icon:"🌲",neurological:"Earth frequency (7.83 Hz) - natural grounding and balance",frequency:"earth_binaural",carrierFreq:136.1,waveType:"sine"},white_noise:{name:"White Noise",description:"Full spectrum noise for focus",icon:"📻",neurological:"White noise - masks distractions, improves concentration",frequency:"white_noise",baseFreq:440,waveType:"square"},gamma_focus:{name:"Gamma Focus",description:"High-frequency binaural beats for peak concentration",icon:"🎧",neurological:"Gamma waves (40 Hz) - heightened awareness and cognitive performance",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},theta_deep:{name:"Theta Deep State",description:"Deep theta waves for profound meditation",icon:"🌙",neurological:"Theta waves (6 Hz) - deep meditation, creativity, and memory consolidation",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},healing_bowls:{name:"Healing Harmonics",description:"432 Hz healing frequency with natural harmonics",icon:"🎵",neurological:'432 Hz "healing frequency" with harmonic overtones for cellular resonance',frequency:"harmonic",baseFreq:432,harmonics:[432,648,864,1296],waveType:"triangle",premium:!0},delta_deep_sleep:{name:"Delta Deep Sleep",description:"0.5-4 Hz for deep sleep and regeneration",icon:"😴",neurological:"Delta waves (0.5-4 Hz) - deep sleep, physical healing, and immune system boost",frequency:"delta",baseFreq:2,binauralBeat:2,leftEar:200,rightEar:202,waveType:"sine",premium:!0},theta_creativity:{name:"Theta Creativity",description:"4-8 Hz for creativity and insight",icon:"🎨",neurological:"Theta waves (4-8 Hz) - enhanced creativity, insight, and problem-solving",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},alpha_relaxation:{name:"Alpha Relaxation",description:"8-12 Hz for relaxation and stress reduction",icon:"😌",neurological:"Alpha waves (8-12 Hz) - relaxation, stress reduction, and improved learning",frequency:"alpha",baseFreq:10,binauralBeat:10,leftEar:200,rightEar:210,waveType:"sine",premium:!0},beta_focus:{name:"Beta Focus",description:"13-30 Hz for focus and alertness",icon:"🎯",neurological:"Beta waves (13-30 Hz) - focused attention, alertness, and cognitive performance",frequency:"beta",baseFreq:20,binauralBeat:20,leftEar:200,rightEar:220,waveType:"sine",premium:!0},gamma_insight:{name:"Gamma Insight",description:"30-100 Hz for insight and peak performance",icon:"💡",neurological:"Gamma waves (30-100 Hz) - insight, peak performance, and heightened awareness",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},anxiety_relief_528:{name:"Anxiety Relief (528 Hz)",description:"528 Hz frequency for anxiety and stress relief",icon:"🧘",neurological:'528 Hz "Love frequency" - reduces anxiety, promotes healing, and DNA repair',frequency:"single_tone",baseFreq:528,waveType:"sine",premium:!0},depression_lift_639:{name:"Depression Lift (639 Hz)",description:"639 Hz frequency for emotional balance",icon:"🌈",neurological:'639 Hz "Connection frequency" - improves relationships, emotional balance, and communication',frequency:"single_tone",baseFreq:639,waveType:"sine",premium:!0},confidence_boost_741:{name:"Confidence Boost (741 Hz)",description:"741 Hz frequency for self-expression and confidence",icon:"💪",neurological:'741 Hz "Expression frequency" - enhances self-expression, confidence, and creativity',frequency:"single_tone",baseFreq:741,waveType:"sine",premium:!0},intuition_852:{name:"Intuition (852 Hz)",description:"852 Hz frequency for intuition and spiritual awareness",icon:"🔮",neurological:'852 Hz "Intuition frequency" - enhances intuition, spiritual awareness, and inner wisdom',frequency:"single_tone",baseFreq:852,waveType:"sine",premium:!0},solfeggio_396:{name:"Liberation (396 Hz)",description:"396 Hz Solfeggio frequency for fear and guilt release",icon:"🕊️",neurological:'396 Hz "Liberation frequency" - releases fear, guilt, and negative emotions',frequency:"single_tone",baseFreq:396,waveType:"sine",premium:!0},solfeggio_417:{name:"Transformation (417 Hz)",description:"417 Hz Solfeggio frequency for change and transformation",icon:"🦋",neurological:'417 Hz "Transformation frequency" - facilitates change, transformation, and new beginnings',frequency:"single_tone",baseFreq:417,waveType:"sine",premium:!0},solfeggio_963:{name:"Awakening (963 Hz)",description:"963 Hz Solfeggio frequency for spiritual awakening",icon:"✨",neurological:'963 Hz "Awakening frequency" - spiritual awakening, connection to higher consciousness',frequency:"single_tone",baseFreq:963,waveType:"sine",premium:!0}},Kl={mindfulness:{name:"Mindfulness",description:"Present-moment awareness practice",duration:[5,10,15,20],icon:"🧘‍♀️"},breathing:{name:"Breathing",description:"Focused breathwork exercises",duration:[3,5,10],icon:"💨"},body_scan:{name:"Body Scan",description:"Progressive muscle relaxation",duration:[10,15,20],icon:"🫁"},loving_kindness:{name:"Loving Kindness",description:"Compassion and heart-opening meditation",duration:[5,10,15],icon:"💖"},flow_state:{name:"Flow State",description:"Neurologically optimized for peak performance",duration:[5,7,10],icon:"🎯",premium:!0}};function fS({children:t,fallback:e,showUpgrade:n=!0,feature:r="this feature",className:s=""}){const{isPremium:i,upgradeToPremium:o}=on();return i?t:e||c.jsx("div",{className:`premium-gate ${s}`,children:c.jsxs("div",{className:"premium-lock",children:[c.jsx("div",{className:"lock-icon",children:"🔒"}),c.jsx("h3",{children:"Premium Feature"}),c.jsxs("p",{children:["Upgrade to unlock ",r]}),n&&c.jsx("button",{onClick:Ba,className:"unlock-button",children:"Upgrade to Premium - $4.99/month"})]})})}function Yj(){const{user:t,isPremium:e}=on(),[n,r]=P.useState([]),[s,i]=P.useState({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),[o,l]=P.useState(!1),[u,d]=P.useState(null),[f,m]=P.useState(!0),[g,N]=P.useState(!1),[A,j]=P.useState(""),[R,x]=P.useState(!1),[T,k]=P.useState(0),[b,V]=P.useState(5),[O,w]=P.useState(!1),[y,v]=P.useState(!1),[E,I]=P.useState("silence");P.useEffect(()=>{console.log("🔍 currentSoundscape changed to:",E)},[E]);const[C,S]=P.useState(""),[ne,pe]=P.useState(null),[Z,ze]=P.useState(null),[W,Y]=P.useState(null),[ae,Se]=P.useState(null),[ye,Ie]=P.useState(null),[Mt,an]=P.useState(!1),[ln,Lt]=P.useState(!1),pr=P.useRef(null);B.formatLocalDate(new Date),P.useEffect(()=>{(()=>{const F="wakeLock"in navigator;an(F),console.log("🔒 Wake Lock API supported:",F)})()},[]),P.useEffect(()=>{const D=async()=>{if(t!=null&&t.uid)try{m(!0),console.log("🌍 Fetching meditations for timezone:",B.getUserTimezone());const q=((await Rs.fetchMeditationsByUser(t.uid)).meditations||[]).map(X=>({...X,localDate:B.formatLocalDate(X.date),localDateTime:B.formatLocalDateTime(X.date),relativeTime:B.getRelativeTime(X.date),isToday:B.isToday(X.date)}));r(q),console.log("🧘 Loaded meditations with timezone data:",q.length)}catch(F){console.error("Error fetching meditations:",F),j("Failed to load meditation sessions")}finally{m(!1)}};t!=null&&t.uid&&D()},[t]),P.useEffect(()=>(console.log("🎵 Audio effect triggered - isSessionActive:",R,"currentSoundscape:",E),R&&E!=="silence"&&(console.log("🔊 Setting up audio for soundscape:",E),_o()),()=>{if(W)try{Array.isArray(W)?W.forEach(D=>{D.stop&&D.stop()}):W.stop&&W.stop()}catch(D){console.log("Audio cleanup error:",D)}}),[R,E]),P.useEffect(()=>(R&&!O?pr.current=setInterval(()=>{k(D=>{const F=D+1;return F>=180&&!y&&(v(!0),sd()),F})},1e3):clearInterval(pr.current),()=>clearInterval(pr.current)),[R,O,y]),P.useEffect(()=>{R&&T>=b*60&&(console.log("⏰ Timer completed! Auto-stopping session..."),console.log("📊 Final session stats:"),console.log("  - Duration:",Math.floor(T/60),"minutes"),console.log("  - Target:",b,"minutes"),console.log("  - Soundscape:",E),console.log("  - Deep state achieved:",y),console.log("  - Start time:",B.formatLocalDateTime(ne)),So(),He())},[R,T,b,E,y,ne]);const si=n.filter(D=>D.isToday||B.isToday(D.date));console.log("📋 Today's meditations:",si.length),P.useEffect(()=>()=>{_s(),pr.current&&clearInterval(pr.current)},[]);const ii=async()=>{try{if(!Mt)return console.log("🔒 Wake Lock API not supported, using fallback methods"),!1;const D=await navigator.wakeLock.request("screen");return Ie(D),Lt(!0),console.log("🔒 Wake lock activated"),D.addEventListener("release",()=>{console.log("🔒 Wake lock was released"),Lt(!1),Ie(null)}),!0}catch(D){return console.error("🔒 Failed to request wake lock:",D),!1}},_s=()=>{try{ye&&(ye.release(),Ie(null),Lt(!1),console.log("🔒 Wake lock released"))}catch(D){console.error("🔒 Error releasing wake lock:",D)}},vo=()=>!Mt&&(console.log("🔒 Using fallback keep-awake methods"),Z&&Z.state==="suspended"&&Z.resume(),"vibrate"in navigator)?setInterval(()=>{navigator.vibrate(1)},3e4):null,_o=()=>{try{const D=new(window.AudioContext||window.webkitAudioContext);ze(D);const F=D.createGain();F.connect(D.destination),F.gain.value=.1,Se(F);const q=Pr[E];if(!(q!=null&&q.frequency)){console.log("🔇 Silence selected");return}switch(q.frequency){case"gamma":case"theta":wo(D,F,q);break;case"alpha":Eo(D,F,q);break;case"ocean_waves":ll(D,F,q);break;case"earth_binaural":ol(D,F,q);break;case"harmonic":rd(D,F,q.harmonics||[q.baseFreq]);break;case"pink_noise":al(D,F);break;case"white_noise":To(D,F);break;case"single_tone":case"natural":nd(D,F,q.baseFreq,q.waveType||"sine");break;default:console.log("🔇 Unknown frequency type:",q.frequency)}}catch(D){console.error("Audio setup failed:",D)}},wo=(D,F,q)=>{const X=D.createOscillator();X.frequency.setValueAtTime(q.leftEar,D.currentTime),X.type=q.waveType||"sine";const re=D.createOscillator();re.frequency.setValueAtTime(q.rightEar,D.currentTime),re.type=q.waveType||"sine";const se=D.createStereoPanner();se.pan.value=-1;const ue=D.createStereoPanner();ue.pan.value=1,X.connect(se),se.connect(F),re.connect(ue),ue.connect(F),X.start(),re.start(),Y([X,re]),console.log(`🎧 Binaural beats: ${q.leftEar}Hz (L) / ${q.rightEar}Hz (R) = ${q.binauralBeat}Hz beat`)},Eo=(D,F,q)=>{const re=q.baseFreq,se=D.createOscillator();se.frequency.setValueAtTime(200,D.currentTime),se.type=q.waveType||"sine";const ue=D.createOscillator();ue.frequency.setValueAtTime(200+re,D.currentTime),ue.type=q.waveType||"sine";const rt=D.createStereoPanner();rt.pan.value=-1;const Pe=D.createStereoPanner();Pe.pan.value=1,se.connect(rt),rt.connect(F),ue.connect(Pe),Pe.connect(F),se.start(),ue.start(),Y([se,ue]),console.log(`🌊 Alpha binaural: 200Hz (L) / ${200+re}Hz (R) = ${re}Hz beat`)},ol=(D,F,q)=>{const X=q.carrierFreq||136.1,re=7.83,se=D.createOscillator();se.frequency.setValueAtTime(X,D.currentTime),se.type=q.waveType||"sine";const ue=D.createOscillator();ue.frequency.setValueAtTime(X+re,D.currentTime),ue.type=q.waveType||"sine";const rt=D.createStereoPanner();rt.pan.value=-1;const Pe=D.createStereoPanner();Pe.pan.value=1,se.connect(rt),rt.connect(F),ue.connect(Pe),Pe.connect(F),se.start(),ue.start(),Y([se,ue]),console.log(`🌲 Earth binaural: ${X}Hz (L) / ${X+re}Hz (R) = ${re}Hz Schumann beat`)},nd=(D,F,q,X="sine")=>{const re=D.createOscillator();re.frequency.setValueAtTime(q,D.currentTime),re.type=X,re.connect(F),re.start(),Y(re),console.log(`🎵 Single tone: ${q}Hz (${X})`)},rd=(D,F,q)=>{const X=q.map(re=>{const se=D.createOscillator();se.frequency.setValueAtTime(re,D.currentTime),se.type="triangle";const ue=D.createGain();return ue.gain.value=.3/q.length,se.connect(ue),ue.connect(F),se.start(),se});Y(X),console.log(`🎼 Harmonics: ${q.join(", ")}Hz`)},al=(D,F)=>{const q=D.sampleRate*2,X=D.createBuffer(1,q,D.sampleRate),re=X.getChannelData(0);for(let ue=0;ue<q;ue++){let rt=0;for(let Pe=0;Pe<5;Pe++)rt+=(Math.random()*2-1)/Math.pow(2,Pe);re[ue]=rt*.1}const se=D.createBufferSource();se.buffer=X,se.loop=!0,se.connect(F),se.start(),Y(se),console.log("🌧️ Pink noise generated")},To=(D,F)=>{const q=D.sampleRate*2,X=D.createBuffer(1,q,D.sampleRate),re=X.getChannelData(0);for(let ue=0;ue<q;ue++)re[ue]=(Math.random()*2-1)*.1;const se=D.createBufferSource();se.buffer=X,se.loop=!0,se.connect(F),se.start(),Y(se),console.log("📻 White noise generated")},ll=(D,F,q)=>{const X=[],re=D.createOscillator();re.frequency.setValueAtTime(20,D.currentTime),re.type="sine";const se=D.createGain();se.gain.value=.4;const ue=D.createOscillator();ue.frequency.setValueAtTime(396,D.currentTime),ue.type="sine";const rt=D.createGain();rt.gain.value=.05;const Pe=D.createOscillator();Pe.frequency.setValueAtTime(.15,D.currentTime),Pe.type="sine";const ws=D.createGain();ws.gain.value=.3,Pe.connect(ws),ws.connect(se.gain),re.connect(se),se.connect(F),ue.connect(rt),rt.connect(F);const oi=D.createBuffer(1,D.sampleRate*8,D.sampleRate),Tn=oi.getChannelData(0);let ai=0;for(let Ve=0;Ve<Tn.length;Ve++){const St=Math.random()*2-1;ai=(ai+St*.02)*.99;const st=Math.sin(Ve*.001)*.3+.7;Tn[Ve]=ai*st*.5}const Sn=D.createBufferSource();Sn.buffer=oi,Sn.loop=!0;const yr=D.createOscillator();yr.frequency.setValueAtTime(432,D.currentTime),yr.type="triangle";const In=D.createGain();In.gain.value=.08;const vr=D.createBiquadFilter();vr.type="bandpass",vr.frequency.setValueAtTime(300,D.currentTime),vr.Q.setValueAtTime(.8,D.currentTime);const Be=D.createGain();Be.gain.value=.3;const _r=D.createOscillator();_r.frequency.setValueAtTime(.13,D.currentTime),_r.type="triangle";const xn=D.createGain();xn.gain.value=.25,_r.connect(xn),xn.connect(Be.gain),xn.connect(In.gain),Sn.connect(vr),vr.connect(Be),Be.connect(F),yr.connect(In),In.connect(F);const wr=D.createBuffer(1,D.sampleRate*6,D.sampleRate),hl=wr.getChannelData(0);for(let Ve=0;Ve<hl.length;Ve++){let St=0;for(let kn=0;kn<3;kn++)St+=(Math.random()*2-1)*Math.pow(.5,kn);const st=Math.random()>.98?(Math.random()*2-1)*.3:0;hl[Ve]=(St+st)*.15}const Es=D.createBufferSource();Es.buffer=wr,Es.loop=!0;const Qt=D.createOscillator();Qt.frequency.setValueAtTime(528,D.currentTime),Qt.type="sine";const li=D.createGain();li.gain.value=.06;const ci=D.createBiquadFilter();ci.type="highpass",ci.frequency.setValueAtTime(1500,D.currentTime);const $n=D.createGain();$n.gain.value=.12;const Er=D.createOscillator();Er.frequency.setValueAtTime(.5,D.currentTime),Er.type="sine";const Tr=D.createGain();if(Tr.gain.value=.04,Er.connect(Tr),Tr.connect($n.gain),Tr.connect(li.gain),Es.connect(ci),ci.connect($n),$n.connect(F),Qt.connect(li),li.connect(F),q.alphaCarrier&&q.alphaBeat){const Ve=D.createOscillator();Ve.frequency.setValueAtTime(q.alphaCarrier,D.currentTime),Ve.type="sine";const St=D.createOscillator();St.frequency.setValueAtTime(q.alphaCarrier+q.alphaBeat,D.currentTime),St.type="sine";const st=D.createGain();st.gain.value=.03;const kn=D.createStereoPanner();kn.pan.value=-1;const Ss=D.createStereoPanner();Ss.pan.value=1,Ve.connect(kn),kn.connect(st),St.connect(Ss),Ss.connect(st),st.connect(F),X.push(Ve,St),Ve.start(),St.start()}const Ts=D.createBuffer(1,D.sampleRate*10,D.sampleRate),cn=Ts.getChannelData(0);for(let Ve=0;Ve<cn.length;Ve++){let St=0;for(let st=0;st<4;st++)St+=(Math.random()*2-1)/Math.pow(2,st*.7);cn[Ve]=St*.2}const Sr=D.createBufferSource();Sr.buffer=Ts,Sr.loop=!0;const Ir=D.createBiquadFilter();Ir.type="bandpass",Ir.frequency.setValueAtTime(150,D.currentTime),Ir.Q.setValueAtTime(.4,D.currentTime);const xr=D.createGain();xr.gain.value=.15;const Wn=D.createOscillator();Wn.frequency.setValueAtTime(.07,D.currentTime),Wn.type="sine";const ui=D.createGain();ui.gain.value=.1,Wn.connect(ui),ui.connect(xr.gain),Sr.connect(Ir),Ir.connect(xr),xr.connect(F),re.start(),ue.start(),Pe.start(),Sn.start(),yr.start(),_r.start(),Es.start(),Qt.start(),Er.start(),Sr.start(),Wn.start(),X.push(re,ue,Pe,Sn,yr,_r,Es,Qt,Er,Sr,Wn),Y(X),console.log("🌊✨ Healing Ocean Waves: 396Hz (Liberation) + 432Hz (Earth) + 528Hz (Love) + Alpha binaural beats + Realistic ocean sounds")},sd=()=>{console.log("🌟 Deep state achieved at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Deep State Achieved! 🧘‍♀️",{body:`You've entered a deep meditative state at ${B.formatLocalTime(new Date)}. Well done!`,icon:"/meditation-icon.png"})},So=()=>{console.log("🎉 Session completed at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Meditation Complete! 🎉",{body:`Great job! You completed your ${b}-minute meditation session.`,icon:"/meditation-icon.png"});try{const D=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAcugtTxzD2sLYPs7lkgCBl5gQEDgVs+l4G6tGEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAc=");D.volume=.3,D.play().catch(()=>{})}catch{}},Io=async(D,F,q)=>{const X=B.getCurrentLocalTime();if(console.log("🌍 Starting meditation session in timezone:",B.getUserTimezone()),console.log("🧘 Session start time:",B.formatLocalDateTime(X)),console.log("🎵 Selected soundscape:",q),V(D),k(0),x(!0),w(!1),v(!1),pe(X),!await ii()){console.log("🔒 Wake lock failed, using fallback methods");const se=vo();se&&(pr.current=se)}"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},cl=()=>{const D=B.getCurrentLocalTime();console.log("⏸️ Session paused at:",B.formatLocalDateTime(D)),w(!O),W&&Z&&(O?Z.resume():Z.suspend())},He=async()=>{const D=B.getCurrentLocalTime();if(console.log("⏹️ Session ended at:",B.formatLocalDateTime(D)),console.log("📊 Session duration:",Math.floor(T/60),"minutes"),console.log("🎯 Target duration:",b,"minutes"),console.log("✅ Session completed?",T>=b*60),_s(),W){if(Array.isArray(W))W.forEach(F=>{try{F.stop?F.stop():F.disconnect&&F.disconnect()}catch(q){console.log("Oscillator cleanup:",q)}});else try{W.stop?W.stop():W.disconnect&&W.disconnect()}catch(F){console.log("Oscillator cleanup:",F)}Y(null)}if(Z){try{await Z.close()}catch(F){console.log("AudioContext cleanup:",F)}ze(null)}if(x(!1),w(!1),T>=60){console.log("💾 Auto-logging session (duration >= 1 minute)"),console.log("🔍 Session time check:",T,"seconds"),console.log("🔍 Firebase user:",t==null?void 0:t.uid),console.log("🔍 Session start time:",ne);try{await nt(),console.log("✅ Auto-log completed successfully")}catch(F){console.error("❌ Auto-log failed:",F)}}else console.log("⚠️ Session too short, not logging (< 1 minute)");console.log("🔇 Audio stopped and session ended successfully")},nt=async()=>{if(!(!(t!=null&&t.uid)||!ne))try{console.log("📝 Auto-logging session with timezone data"),console.log("🧘 Session start time:",B.formatLocalDateTime(ne)),console.log("⏰ Session duration:",Math.floor(T/60),"minutes");const D={date:ne,durationMinutes:Math.floor(T/60),type:"mindfulness",soundscape:E,completed:T>=b*60,deepStateAchieved:y,moodBefore:C,targetDuration:b,sessionStartTime:ne,sessionEndTime:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()};console.log("📊 Session data being saved:",D);const F=await Rs.logMeditation(t.uid,D);console.log("✅ API Response:",F);const q={...F.meditation,localDate:B.formatLocalDate(F.meditation.date),localDateTime:B.formatLocalDateTime(F.meditation.date),relativeTime:B.getRelativeTime(F.meditation.date),isToday:B.isToday(F.meditation.date)};console.log("🔄 Adding meditation to UI:",q),console.log("📅 Is today?",q.isToday),console.log("📅 Local date:",q.localDate),r(X=>{const re=[q,...X];return console.log("📋 Updated meditations list:",re.length,"total"),re}),console.log("✅ Session auto-logged and added to UI successfully")}catch(D){console.error("💥 Error auto-logging session:",D),console.error("💥 Error details:",D.message)}},Kt=D=>{const{name:F,value:q}=D.target;i(X=>({...X,[F]:q}))},ul=async D=>{if(D.preventDefault(),!!(t!=null&&t.uid)){N(!0),j("");try{console.log("🌍 Submitting meditation in timezone:",B.getUserTimezone());const F=s.date?B.toLocalTimezone(s.date):B.getCurrentLocalTime(),q={...s,date:F,durationMinutes:parseInt(s.durationMinutes),userTimezone:B.getUserTimezone()};if(console.log("📝 Meditation submit data:",q),console.log("📅 Local meditation time:",B.formatLocalDateTime(F)),o)await Rs.updateMeditation(t.uid,u,q),r(X=>X.map(re=>re.id===u?{...re,...q,localDate:B.formatLocalDate(F),localDateTime:B.formatLocalDateTime(F),relativeTime:B.getRelativeTime(F),isToday:B.isToday(F)}:re)),l(!1),d(null),console.log("✅ Meditation updated successfully");else{const X=await Rs.logMeditation(t.uid,q),re={...X.meditation,localDate:B.formatLocalDate(X.meditation.date),localDateTime:B.formatLocalDateTime(X.meditation.date),relativeTime:B.getRelativeTime(X.meditation.date),isToday:B.isToday(X.meditation.date)};r(se=>[re,...se]),console.log("✅ Meditation logged successfully")}i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})}catch(F){console.error("Error saving meditation:",F),j(o?"Failed to update meditation":"Failed to log meditation")}finally{N(!1)}}},dl=D=>{var F;console.log("✏️ Editing meditation from:",B.formatLocalDateTime(D.date)),i({date:B.formatLocalDate(D.date),durationMinutes:((F=D.durationMinutes)==null?void 0:F.toString())||"",type:D.type||"mindfulness",soundscape:D.soundscape||"silence",moodBefore:D.moodBefore||"",moodAfter:D.moodAfter||"",notes:D.notes||""}),l(!0),d(D.id)},id=async D=>{if(!(t!=null&&t.uid))return;const F=n.find(X=>X.id===D),q=`Are you sure you want to delete the meditation session from ${(F==null?void 0:F.localDateTime)||"unknown time"}?`;if(window.confirm(q))try{await Rs.deleteMeditation(t.uid,D),r(X=>X.filter(re=>re.id!==D)),console.log("🗑️ Meditation deleted successfully")}catch(X){console.error("Error deleting meditation:",X),j("Failed to delete meditation")}},gr=D=>{const F=Math.floor(D/60),q=D%60;return`${F}:${q.toString().padStart(2,"0")}`};return f?c.jsxs("div",{className:"meditation-loading",children:[c.jsx("p",{children:"Loading meditations..."}),c.jsxs("small",{children:["Timezone: ",B.getUserTimezone()]})]}):c.jsxs("div",{className:"meditation-page",children:[R&&c.jsxs("div",{className:"session-interface",children:[c.jsxs("div",{className:"session-header",children:[c.jsx("h2",{children:"🧘‍♀️ Meditation Session"}),c.jsxs("div",{className:"session-info",children:[c.jsxs("div",{className:"session-soundscape",children:[Pr[E].icon," ",Pr[E].name]}),c.jsxs("div",{className:"session-time-info",children:["Started: ",ne?B.formatLocalTime(ne):"Now",c.jsx("br",{}),c.jsx("small",{children:B.getUserTimezone()})]}),c.jsx("div",{className:"wake-lock-status",children:ln?c.jsx("span",{className:"wake-lock-active",title:"Screen will stay awake during meditation",children:"🔒 Screen Awake"}):Mt?c.jsx("span",{className:"wake-lock-inactive",title:"Screen may sleep during meditation",children:"⚠️ Screen May Sleep"}):c.jsx("span",{className:"wake-lock-unsupported",title:"Wake lock not supported on this device",children:"📱 Using Fallback"})})]})]}),c.jsxs("div",{className:"session-timer",children:[c.jsxs("div",{className:"time-display",children:[c.jsx("span",{className:"current-time",children:gr(T)}),c.jsxs("span",{className:"target-time",children:["/ ",gr(b*60)]})]}),c.jsx("div",{className:"progress-ring",children:c.jsx("div",{className:"meditation-progress-fill",style:{background:`conic-gradient(#4CAF50 ${T/(b*60)*360}deg, #eee 0deg)`}})})]}),c.jsxs("div",{className:"session-status",children:[y&&c.jsxs("div",{className:"deep-state-indicator",children:["✨ Deep State Achieved at ",B.formatLocalTime(new Date)," ✨"]}),c.jsx("div",{className:"neurological-info",children:c.jsx("p",{children:Pr[E].neurological})})]}),c.jsxs("div",{className:"session-controls",children:[c.jsxs("button",{onClick:cl,className:"pause-btn",children:[O?"▶️":"⏸️"," ",O?"Resume":"Pause"]}),c.jsx("button",{onClick:He,className:"stop-btn",children:"⏹️ End Session"})]})]}),!R&&c.jsxs("div",{className:"quick-start",children:[c.jsx("h1",{className:"meditation-title",children:"🧘‍♀️ Meditation Studio"}),c.jsxs("p",{className:"subtitle",children:["Neurologically optimized for deep meditation states",c.jsx("br",{})]}),c.jsxs("div",{className:"soundscape-section",children:[c.jsx("h3",{children:"🎵 Step 1: Choose Your Soundscape"}),c.jsx("div",{className:"soundscape-instructions",children:c.jsx("p",{children:"Select a soundscape below (or choose silence for quiet meditation). Click again to deselect."})}),c.jsx("div",{className:"soundscape-grid",children:Object.entries(Pr).map(([D,F])=>c.jsxs("div",{className:`soundscape-option ${F.premium?"premium":""} ${E===D?"selected":""} ${F.premium&&!e?"locked":""}`,children:[c.jsxs("div",{className:"soundscape-header",children:[c.jsx("span",{className:"soundscape-icon",children:F.icon}),F.premium&&!e&&c.jsx("span",{className:"premium-badge",children:"PRO"})]}),c.jsxs("div",{className:"soundscape-content",onClick:q=>{q.stopPropagation(),q.preventDefault(),console.log("🎵 Soundscape clicked:",D,"current selection:",E),!F.premium||e?E===D?(console.log("🔇 Deselecting soundscape to silence"),I("silence")):(console.log("🔊 Selecting soundscape:",D),I(D)):alert("This soundscape requires Clarity Premium. Upgrade to access premium features!")},children:[c.jsx("h4",{children:F.name}),c.jsx("p",{className:"soundscape-description",children:F.description}),c.jsx("small",{className:"neurological-note",children:F.neurological})]}),F.premium&&!e&&c.jsx("div",{className:"premium-overlay",children:c.jsx("span",{className:"lock-icon",children:"🔒"})})]},D))})]}),c.jsxs("div",{className:"quick-start-grid",children:[c.jsx("h3",{children:"⏰ Step 2: Choose Your Session"}),Object.entries(Kl).map(([D,F])=>c.jsxs("div",{className:`meditation-type ${F.premium?"premium":""}`,children:[c.jsxs("div",{className:"type-header",children:[c.jsx("span",{className:"type-icon",children:F.icon}),c.jsx("h3",{children:F.name}),F.premium&&!e&&c.jsx("span",{className:"premium-badge",children:"PRO"})]}),c.jsx("p",{className:"type-description",children:F.description}),c.jsx("div",{className:"duration-options",children:F.duration.map(q=>c.jsxs("button",{onClick:()=>{C||S(prompt("How are you feeling right now? (😊😔😴😤😌🤔🎉😰)")||"😐"),Io(q,D,E)},className:"duration-btn",disabled:F.premium&&!e,children:[q,"min"]},q))})]},D))]})]}),!R&&c.jsxs("div",{className:"meditation-card",children:[c.jsx("h2",{className:"form-title",children:o?"Edit Meditation Session":"Manually Log Session"}),A&&c.jsx("div",{className:"error-message",children:A}),c.jsxs("form",{onSubmit:ul,className:"meditation-form",children:[c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Date (",B.getUserTimezone(),")",c.jsx("input",{type:"date",name:"date",value:s.date,onChange:Kt,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Duration (Minutes)",c.jsx("input",{type:"number",name:"durationMinutes",value:s.durationMinutes,onChange:Kt,className:"form-input",min:"1",required:!0})]})})]}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Meditation Type",c.jsx("select",{name:"type",value:s.type,onChange:Kt,className:"form-input",children:Object.entries(Kl).map(([D,F])=>c.jsx("option",{value:D,children:F.name},D))})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Soundscape Used",c.jsx("select",{name:"soundscape",value:s.soundscape,onChange:Kt,className:"form-input",children:Object.entries(Pr).map(([D,F])=>c.jsx("option",{value:D,children:F.name},D))})]})})]}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Mood Before",c.jsxs("select",{name:"moodBefore",value:s.moodBefore,onChange:Kt,className:"form-input",children:[c.jsx("option",{value:"",children:"Select mood..."}),c.jsx("option",{value:"😊",children:"😊 Happy"}),c.jsx("option",{value:"😔",children:"😔 Sad"}),c.jsx("option",{value:"😴",children:"😴 Tired"}),c.jsx("option",{value:"😤",children:"😤 Frustrated"}),c.jsx("option",{value:"😌",children:"😌 Peaceful"}),c.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),c.jsx("option",{value:"🎉",children:"🎉 Excited"}),c.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Mood After",c.jsxs("select",{name:"moodAfter",value:s.moodAfter,onChange:Kt,className:"form-input",children:[c.jsx("option",{value:"",children:"Select mood..."}),c.jsx("option",{value:"😊",children:"😊 Happy"}),c.jsx("option",{value:"😔",children:"😔 Sad"}),c.jsx("option",{value:"😴",children:"😴 Tired"}),c.jsx("option",{value:"😤",children:"😤 Frustrated"}),c.jsx("option",{value:"😌",children:"😌 Peaceful"}),c.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),c.jsx("option",{value:"🎉",children:"🎉 Excited"}),c.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})})]}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Notes (Optional)",c.jsx("textarea",{name:"notes",value:s.notes,onChange:Kt,className:"form-input form-textarea",placeholder:"How did the session feel? Any insights?",rows:"3"})]})}),c.jsxs("div",{className:"form-buttons",children:[c.jsx("button",{type:"submit",className:"log-button",disabled:g,children:g?o?"Updating...":"Logging...":o?"Update Session":"Log Session"}),o&&c.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{l(!1),d(null),i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})},disabled:g,children:"Cancel"})]})]})]}),!R&&c.jsxs("div",{className:"meditation-log",children:[c.jsxs("h2",{className:"log-title",children:["Today's Sessions (",si.length,")",c.jsx("br",{}),c.jsxs("small",{children:[B.formatLocalDate(new Date)," - ",B.getUserTimezone()]})]}),si.length===0?c.jsxs("p",{className:"no-sessions",children:["No meditation sessions today. Start your mindfulness journey!",c.jsx("br",{}),c.jsxs("small",{children:["Local time: ",B.formatLocalDateTime(new Date)]})]}):c.jsx("ul",{className:"log-list",children:si.map(D=>{var F,q,X,re;return c.jsxs("li",{className:"log-item",children:[c.jsxs("div",{className:"meditation-info",children:[c.jsxs("div",{className:"meditation-header",children:[c.jsxs("span",{className:"meditation-type",children:[(F=Kl[D.type])==null?void 0:F.icon," ",((q=Kl[D.type])==null?void 0:q.name)||D.type]}),c.jsxs("span",{className:"meditation-time",children:[D.localDateTime,c.jsxs("small",{children:[" (",D.relativeTime,")"]})]})]}),c.jsxs("div",{className:"meditation-details",children:[c.jsxs("span",{className:"meditation-duration",children:[D.durationMinutes," min"]}),c.jsxs("span",{className:"meditation-soundscape",children:[(X=Pr[D.soundscape])==null?void 0:X.icon," ",(re=Pr[D.soundscape])==null?void 0:re.name]}),D.deepStateAchieved&&c.jsx("span",{className:"deep-state-badge",children:"✨ Deep State"}),D.moodBefore&&D.moodAfter&&c.jsxs("span",{className:"mood-change",children:[D.moodBefore," → ",D.moodAfter]})]}),D.notes&&c.jsx("div",{className:"meditation-notes",children:D.notes})]}),c.jsxs("div",{className:"meditation-actions",children:[c.jsx("button",{onClick:()=>dl(D),className:"edit-button",disabled:g,children:"Edit"}),c.jsx("button",{onClick:()=>id(D.id),className:"delete-button",disabled:g,children:"Delete"})]})]},D.id)})})]}),!R&&c.jsxs("div",{className:"recommended-videos",children:[c.jsx("h2",{className:"recommended-title",children:"🎥 Guided Meditation Videos"}),c.jsxs("p",{className:"timezone-note",children:["Perfect for any time of day in ",B.getUserTimezone()]}),c.jsxs("div",{className:"video-tiles",children:[c.jsxs("a",{href:"https://www.youtube.com/watch?v=VpHz8Mb13_Y",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[c.jsx("div",{className:"video-thumbnail",children:"🌸"}),c.jsx("p",{className:"video-title",children:"Relaxation and Positivity"})]}),c.jsxs("a",{href:"https://www.youtube.com/watch?v=CqnWMPuyT0g",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[c.jsx("div",{className:"video-thumbnail",children:"💖"}),c.jsx("p",{className:"video-title",children:"Self Love"})]}),c.jsxs("a",{href:"https://www.youtube.com/watch?v=056qll-07ak",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[c.jsx("div",{className:"video-thumbnail",children:"🧠"}),c.jsx("p",{className:"video-title",children:"Stop Thinking"})]})]})]}),c.jsx(fS,{feature:"exclusive meditation experiences",children:c.jsxs("div",{className:"premium-meditation-features",children:[c.jsx("h3",{children:"🧘‍♀️ Premium Meditation Experience"}),c.jsx("p",{children:"Unlock advanced features designed by neuroscientists:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"🎵 Premium binaural soundscapes"}),c.jsx("li",{children:"📊 Advanced session analytics"}),c.jsx("li",{children:"🧠 Personalized meditation recommendations"}),c.jsx("li",{children:"⏰ Smart session reminders based on your timezone"}),c.jsx("li",{children:"📈 Mood tracking and insights"})]})]})})]})}function Xj(){const{user:t}=on(),[e,n]=P.useState([]),[r,s]=P.useState({date:"",amount:"",type:"water",notes:""}),[i,o]=P.useState(!1),[l,u]=P.useState(null),[d,f]=P.useState(!0),[m,g]=P.useState(!1),[N,A]=P.useState(""),[j,R]=P.useState(0),[x,T]=P.useState(64);new Date().toISOString().split("T")[0],P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const C=await Xt.fetchWaterIntakeByUser(t.uid);n(C.waterIntakes||[]);const S=await Xt.getTodayWaterIntake(t.uid);R(S.totalOz||0),T(64)}catch(C){console.error("Error fetching water data:",C),A("Failed to load water intake data")}finally{f(!1)}})()},[t]);const k=I=>{const{name:C,value:S}=I.target;s(ne=>({...ne,[C]:S}))},b=async I=>{if(I.preventDefault(),console.log("💧 Water submit started"),console.log("📊 Form data:",r),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),A("Please log in to save water intake");return}if(!r.amount||!r.date){A("Please fill in all required fields");return}try{g(!0),A("");let C;if(r.date){const pe=r.date.split("-"),Z=parseInt(pe[0]),ze=parseInt(pe[1]),W=parseInt(pe[2]),Y=new Date;console.log("🔍 Water date parsing debug:"),console.log("  Form input:",r.date),console.log("  Split parts:",pe),console.log("  Parsed year:",Z),console.log("  Parsed month (human readable):",ze),console.log("  Parsed day:",W),console.log("  Month for Date constructor (0-indexed):",ze-1),C=new Date(Z,ze-1,W,Y.getHours(),Y.getMinutes(),Y.getSeconds()),console.log("📅 Created water date:",C),console.log("📅 Verify - Year:",C.getFullYear()),console.log("📅 Verify - Month (0-indexed):",C.getMonth()),console.log("📅 Verify - Month (human):",C.getMonth()+1),console.log("📅 Verify - Day:",C.getDate()),console.log("📅 Final formatted:",C.toLocaleDateString())}else C=new Date;const S={date:C,amount:parseFloat(r.amount),type:r.type,notes:r.notes};if(console.log("💧 Final water data:",S),console.log("📅 Will be saved as:",S.date.toLocaleDateString()),i)await Xt.updateWaterIntake(t.uid,l,S),n(pe=>pe.map(Z=>Z.id===l?{...Z,...S}:Z)),o(!1),u(null);else{const pe=await Xt.logWaterIntake(t.uid,S);n(Z=>[pe.waterIntake,...Z])}const ne=await Xt.getTodayWaterIntake(t.uid);R(ne.totalOz||0),s({date:"",amount:"",type:"water",notes:""}),console.log("✅ Water intake logged successfully!")}catch(C){console.error("💥 Water logging error:",C),A(i?"Failed to update water intake":"Failed to log water intake")}finally{g(!1)}},V=I=>{var S;o(!0),u(I.id);const C=I.date instanceof Date?I.date.toISOString().split("T")[0]:new Date(I.date).toISOString().split("T")[0];s({date:C,amount:((S=I.amount)==null?void 0:S.toString())||"",type:I.type||"water",notes:I.notes||""})},O=async I=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this water intake?"))try{await Xt.deleteWaterIntake(t.uid,I),n(S=>S.filter(ne=>ne.id!==I));const C=await Xt.getTodayWaterIntake(t.uid);R(C.totalOz||0)}catch(C){console.error("Error deleting water intake:",C),A("Failed to delete water intake")}},w=()=>{o(!1),u(null),s({date:"",amount:"",type:"water",notes:""})},y=async I=>{if(t!=null&&t.uid)try{g(!0);const C=new Date,S=new Date(C.getFullYear(),C.getMonth(),C.getDate(),C.getHours(),C.getMinutes(),C.getSeconds());console.log("💧 Quick add date:",S),console.log("📅 Quick add formatted:",S.toLocaleDateString()),await Xt.logWaterIntake(t.uid,{date:S,amount:I,type:"water",notes:""});const ne=await Xt.fetchWaterIntakeByUser(t.uid);n(ne.waterIntakes||[]);const pe=await Xt.getTodayWaterIntake(t.uid);R(pe.totalOz||0),console.log("✅ Quick add water successful!")}catch(C){console.error("💥 Error quick adding water:",C),A("Failed to log water intake")}finally{g(!1)}},v=e.filter(I=>{const C=I.date instanceof Date?I.date:new Date(I.date),S=B.isToday(C);return console.log("🔍 Comparing dates:",{waterDate:C.toLocaleDateString(),today:new Date().toLocaleDateString(),isToday:S,waterDateObj:C,waterDateType:typeof I.date}),S}),E=Math.min(j/x*100,100);return d?c.jsx("div",{className:"water-loading",children:"Loading water data..."}):c.jsxs("div",{className:"water-page",children:[c.jsxs("div",{className:"water-progress",children:[c.jsx("h2",{children:"Daily Hydration Progress"}),c.jsx("div",{className:"progress-info",children:c.jsx("div",{className:"water-progress-bar",children:c.jsx("div",{className:"water-progress-fill",style:{width:`${E}%`}})})}),j>=x&&c.jsx("div",{className:"goal-achieved",children:"🎉 Daily goal achieved! Great job! 🎉"})]}),c.jsxs("div",{className:"quick-add-section",children:[c.jsx("h3",{children:"Quick Add"}),c.jsxs("div",{className:"quick-add-buttons",children:[c.jsxs("button",{onClick:()=>y(8),className:"quick-add-btn",disabled:m,children:["8 oz",c.jsx("br",{}),c.jsx("small",{children:"Glass"})]}),c.jsxs("button",{onClick:()=>y(16),className:"quick-add-btn",disabled:m,children:["16 oz",c.jsx("br",{}),c.jsx("small",{children:"Bottle"})]}),c.jsxs("button",{onClick:()=>y(20),className:"quick-add-btn",disabled:m,children:["20 oz",c.jsx("br",{}),c.jsx("small",{children:"Large Bottle"})]}),c.jsxs("button",{onClick:()=>y(32),className:"quick-add-btn",disabled:m,children:["32 oz",c.jsx("br",{}),c.jsx("small",{children:"Large Cup"})]})]})]}),c.jsxs("div",{className:"water-card",children:[c.jsx("h1",{className:"water-title",children:i?"Edit Water Intake":"Log Water Intake"}),N&&c.jsx("div",{className:"error-message",children:N}),c.jsxs("form",{onSubmit:b,className:"water-form",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Date",c.jsx("input",{type:"date",name:"date",value:r.date,onChange:k,className:"form-input",required:!0})]})}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Amount (oz)",c.jsx("input",{type:"number",name:"amount",value:r.amount,onChange:k,className:"form-input",min:"0.1",step:"0.1",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Drink Type",c.jsxs("select",{name:"type",value:r.type,onChange:k,className:"form-input",children:[c.jsx("option",{value:"water",children:"Water"}),c.jsx("option",{value:"tea",children:"Tea"}),c.jsx("option",{value:"coffee",children:"Coffee"}),c.jsx("option",{value:"juice",children:"Juice"}),c.jsx("option",{value:"sports_drink",children:"Sports Drink"}),c.jsx("option",{value:"other",children:"Other"})]})]})})]}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Notes (Optional)",c.jsx("input",{type:"text",name:"notes",value:r.notes,onChange:k,className:"form-input",placeholder:"e.g., with lemon, iced, etc."})]})}),c.jsxs("div",{className:"form-buttons",children:[c.jsx("button",{type:"submit",className:"log-button",disabled:m,children:m?i?"Updating...":"Logging...":i?"Update Intake":"Log Water"}),i&&c.jsx("button",{type:"button",className:"cancel-button",onClick:w,disabled:m,children:"Cancel"})]})]})]}),c.jsxs("div",{className:"water-log",children:[c.jsxs("h2",{className:"log-title",children:["Today's Water Intake (",v.length," entries)"]}),v.length===0?c.jsx("p",{className:"no-intake",children:"No water logged for today. Stay hydrated! 💧"}):c.jsx("ul",{className:"log-list",children:v.map(I=>c.jsxs("li",{className:"log-item",children:[c.jsxs("div",{className:"water-info",children:[c.jsxs("span",{className:"water-amount",children:[I.amount," oz"]}),c.jsx("span",{className:"water-type",children:I.type}),I.notes&&c.jsx("span",{className:"water-notes",children:I.notes})]}),c.jsxs("div",{className:"water-actions",children:[c.jsx("button",{onClick:()=>V(I),className:"edit-button",disabled:m,children:"Edit"}),c.jsx("button",{onClick:()=>O(I.id),className:"delete-button",disabled:m,children:"Delete"})]})]},I.id))})]})]})}function Jj(){const{user:t,isPremium:e}=on(),[n,r]=P.useState({workout:{current:0,goal:210},water:{current:0,goal:448},meditation:{current:0,goal:105}}),[s,i]=P.useState([]),[o,l]=P.useState(0),[u,d]=P.useState(!0),[f,m]=P.useState(30),[g,N]=P.useState(64),[A,j]=P.useState(15),[R,x]=P.useState(0),T=()=>{const E=new Date().getDay();return E===0?0:7-E};P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{d(!0);const I=(await zn.getUserProfile(t.uid)).user;m(I.exerciseGoalMinutes||30),N(I.waterGoalOz||64),j(I.meditationGoalMinutes||15);const[C,S,ne]=await Promise.all([Ps.getWorkoutSummary(t.uid,7),Xt.getWaterSummary(t.uid,7),Rs.getMeditationSummary(t.uid,7)]);r({workout:{current:C.totalMinutes||0,goal:(I.exerciseGoalMinutes||30)*7},water:{current:S.totalOz||0,goal:(I.waterGoalOz||64)*7},meditation:{current:ne.totalMinutes||0,goal:(I.meditationGoalMinutes||15)*7}}),setTimeout(()=>k(),100)}catch(E){console.error("Error fetching weekly data:",E)}finally{d(!1)}})()},[t]),P.useEffect(()=>{(async()=>{if(t!=null&&t.uid){const E=await zn.getPoints(t.uid);x(E)}})()},[t]);const k=()=>{const v=[];Object.entries(n).forEach(([E,I])=>{const C=I.current/I.goal*100;C>=125?v.push({type:E,level:"diamond",percentage:C}):C>=100?v.push({type:E,level:"gold",percentage:C}):C>=75?v.push({type:E,level:"silver",percentage:C}):C>=50&&v.push({type:E,level:"bronze",percentage:C})}),i(v)},b=v=>{switch(v){case"diamond":return"💎";case"gold":return"🥇";case"silver":return"🥈";case"bronze":return"🥉";default:return"⭐"}},V=v=>v>=100?"var(--sage-500)":v>=75?"var(--mint)":v>=50?"#FFD700":"var(--sage-300)",O=v=>v>=100,w=async()=>{if(t!=null&&t.uid)try{d(!0);const v=f*7,E=g*7,I=A*7,C=await zn.updateUserProfile(t.uid,{exerciseGoalMinutes:f,meditationGoalMinutes:A,waterGoalOz:g});r(S=>({...S,workout:{...S.workout,goal:v},water:{...S.water,goal:E},meditation:{...S.meditation,goal:I}})),setTimeout(()=>k(),100),console.log("✅ Goals updated successfully")}catch(v){console.error("❌ Error updating goals:",v)}finally{d(!1)}};if(u)return c.jsx("div",{className:"goals-loading",children:"Loading weekly goals..."});const y=T();return c.jsxs("div",{className:"goals-page",children:[c.jsxs("div",{className:"points-balance",children:[c.jsx("span",{role:"img","aria-label":"points",children:"⭐"})," ",R," Points"]}),c.jsxs("div",{className:"weekly-header",children:[c.jsx("h1",{className:"goals-title",children:"Weekly Goals"}),c.jsx("p",{className:"goals-subtitle",children:"Track your progress and earn rewards"}),c.jsxs("div",{className:"week-info",children:[c.jsx("span",{className:"week-label",children:"Current Week"}),c.jsx("span",{className:"days-remaining",children:y===0?"Last day!":`${y} days remaining`})]})]}),c.jsx("div",{className:"weekly-progress",children:Object.entries(n).map(([v,E])=>{const I=Math.min(E.current/E.goal*100,100),C=O(I),S=2*Math.PI*45,ne=S,pe=S-I/100*S;return c.jsxs("div",{className:`weekly-ring ${C?"completed":""}`,children:[c.jsxs("div",{className:"ring-container",children:[c.jsxs("svg",{className:"progress-ring",width:"120",height:"120",children:[c.jsx("circle",{className:"ring-background",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:"var(--sage-100)",strokeWidth:"8"}),c.jsx("circle",{className:"ring-progress",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:V(I),strokeWidth:"8",strokeLinecap:"round",strokeDasharray:ne,strokeDashoffset:pe,transform:"rotate(-90 60 60)"})]}),c.jsxs("div",{className:"ring-content",children:[c.jsx("span",{className:"ring-value",children:E.current}),c.jsxs("span",{className:"ring-goal",children:["/ ",E.goal]}),c.jsx("span",{className:"ring-label",children:v})]})]}),c.jsxs("div",{className:"ring-percentage",children:[Math.round(I),"%"]})]},v)})}),c.jsxs("div",{className:"achievement-gallery",children:[c.jsx("h2",{className:"section-title",children:"This Week's Achievements"}),s.length===0?c.jsxs("div",{className:"no-achievements",children:[c.jsx("span",{className:"no-achievement-icon",children:"🎯"}),c.jsx("p",{children:"Keep going! Your first achievement is waiting."})]}):c.jsx("div",{className:"achievements-grid",children:s.map((v,E)=>c.jsxs("div",{className:`achievement-card ${v.level}`,children:[c.jsx("div",{className:"achievement-icon",children:b(v.level)}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:v.level.toUpperCase()}),c.jsx("p",{children:v.type.toUpperCase()}),c.jsxs("span",{className:"achievement-percentage",children:[Math.round(v.percentage),"%"]})]}),!e&&v.level==="diamond"&&c.jsx("div",{className:"premium-overlay",children:c.jsx("span",{className:"premium-badge",children:"PRO"})})]},E))})]}),c.jsxs("div",{className:"streak-section",children:[c.jsx("h2",{className:"section-title",children:"Weekly Streak"}),c.jsxs("div",{className:"streak-card",children:[c.jsx("div",{className:"streak-icon",children:"🔥"}),c.jsxs("div",{className:"streak-info",children:[c.jsx("span",{className:"streak-number",children:o}),c.jsx("span",{className:"streak-label",children:"Week Streak"})]}),c.jsxs("div",{className:"streak-next",children:[c.jsx("span",{children:"Next reward at 4 weeks"}),!e&&c.jsx("span",{className:"premium-hint",children:"PRO"})]})]})]}),c.jsxs("div",{className:"reward-marketplace",children:[c.jsx("h2",{className:"section-title",children:"Reward Marketplace"}),e?c.jsxs("div",{className:"rewards-grid",children:[c.jsxs("div",{className:"reward-item",children:[c.jsx("div",{className:"reward-icon",children:"🎵"}),c.jsxs("div",{className:"reward-info",children:[c.jsx("h4",{children:"Premium Soundscape"}),c.jsx("p",{children:"Unlock for 1 week"}),c.jsx("span",{className:"reward-cost",children:"50 points"})]})]}),c.jsxs("div",{className:"reward-item",children:[c.jsx("div",{className:"reward-icon",children:"📱"}),c.jsxs("div",{className:"reward-info",children:[c.jsx("h4",{children:"Custom Badge"}),c.jsx("p",{children:"Design your own"}),c.jsx("span",{className:"reward-cost",children:"100 points"})]})]})]}):c.jsxs("div",{className:"premium-cta-card",children:[c.jsxs("div",{className:"cta-header",children:[c.jsx("h3",{children:"Unlock Premium Rewards"}),c.jsx("span",{className:"cta-price",children:"$4.99/month"})]}),c.jsxs("div",{className:"premium-features",children:[c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"💎"}),c.jsx("span",{children:"Exclusive Diamond badges"})]}),c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"🎯"}),c.jsx("span",{children:"Custom goal setting"})]}),c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"📊"}),c.jsx("span",{children:"Advanced analytics"})]}),c.jsxs("div",{className:"feature-item",children:[c.jsx("span",{className:"feature-icon",children:"🏆"}),c.jsx("span",{children:"Challenge competitions"})]})]}),c.jsx("button",{className:"upgrade-button",onClick:Ba,children:"Upgrade with Stripe"})]})]}),c.jsxs("div",{className:"weekly-challenges",children:[c.jsx("h2",{className:"section-title",children:"Weekly Challenges"}),c.jsxs("div",{className:"challenge-card",children:[c.jsxs("div",{className:"challenge-header",children:[c.jsx("h3",{children:"Mindful Monday"}),c.jsx("span",{className:"challenge-reward",children:"+50 points"})]}),c.jsx("p",{className:"challenge-description",children:"Complete 3 meditation sessions this week"}),c.jsxs("div",{className:"challenge-progress",children:[c.jsx("div",{className:"challenge-bar",children:c.jsx("div",{className:"challenge-fill",style:{width:"33%"}})}),c.jsx("span",{className:"challenge-status",children:"1/3 completed"})]}),!e&&c.jsx("div",{className:"challenge-premium",children:c.jsx("span",{children:"Join Premium for exclusive challenges"})})]})]}),c.jsxs("div",{className:"custom-goals-section",children:[c.jsx("h2",{className:"section-title",children:"Goal Customization"}),c.jsxs("div",{className:"custom-goals-form",children:[c.jsxs("div",{className:"goal-slider",children:[c.jsxs("label",{children:["Daily Workout Goal: ",f," minutes"]}),c.jsx("input",{type:"range",min:"15",max:"120",value:f,onChange:v=>m(parseInt(v.target.value)),className:"goal-range"}),c.jsxs("span",{children:["Weekly Goal: ",f*7," minutes"]})]}),c.jsxs("div",{className:"goal-slider",children:[c.jsxs("label",{children:["Daily Water Goal: ",g," oz"]}),c.jsx("input",{type:"range",min:"32",max:"128",value:g,onChange:v=>N(parseInt(v.target.value)),className:"goal-range"}),c.jsxs("span",{children:["Weekly Goal: ",g*7," oz"]})]}),c.jsxs("div",{className:"goal-slider",children:[c.jsxs("label",{children:["Daily Meditation Goal: ",A," minutes"]}),c.jsx("input",{type:"range",min:"5",max:"60",value:A,onChange:v=>j(parseInt(v.target.value)),className:"goal-range"}),c.jsxs("span",{children:["Weekly Goal: ",A*7," minutes"]})]}),c.jsx("button",{className:"save-goals-btn",onClick:w,disabled:u,children:u?"Saving...":"Save Custom Goals"})]})]}),c.jsxs("div",{className:"premium-challenges",children:[c.jsx("h2",{className:"section-title",children:"Exclusive Challenges"}),c.jsx(fS,{feature:"premium challenges",className:"feature-tease",children:c.jsxs("div",{className:"challenge-preview",children:[c.jsxs("div",{className:"challenge-card premium",children:[c.jsx("div",{className:"challenge-icon",children:"💎"}),c.jsxs("div",{className:"challenge-content",children:[c.jsxs("div",{className:"challenge-header",children:[c.jsx("h3",{children:"Diamond Week Challenge"}),c.jsx("span",{className:"challenge-reward",children:"+200 points"})]}),c.jsx("p",{children:"Complete 125% of all goals for 7 consecutive days"}),c.jsx("div",{className:"challenge-participants",children:c.jsx("span",{children:"🏆 1,247 participants this week"})})]})]}),c.jsxs("div",{className:"challenge-card premium",children:[c.jsx("div",{className:"challenge-icon",children:"🎯"}),c.jsxs("div",{className:"challenge-content",children:[c.jsxs("div",{className:"challenge-header",children:[c.jsx("h3",{children:"Perfect Balance"}),c.jsx("span",{className:"challenge-reward",children:"+150 points"})]}),c.jsx("p",{children:"Hit exactly 100% on all three goals in one day"}),c.jsx("div",{className:"challenge-participants",children:c.jsx("span",{children:"🎉 892 members completed"})})]})]})]})})]})]})}function Zj(){const{user:t,loading:e,isPremium:n,userSubscription:r,trialDaysRemaining:s,upgradeToPremium:i,cancelSubscription:o}=on(),[l,u]=P.useState(null),[d,f]=P.useState({username:"",email:"",firstName:"",lastName:"",exerciseGoalMinutes:"",waterGoalOz:"",meditationGoalMinutes:""}),[m,g]=P.useState(!0),[N,A]=P.useState(!1),[j,R]=P.useState(""),[x,T]=P.useState("");P.useEffect(()=>{const O=async()=>{if(t!=null&&t.uid)try{g(!0);const w=await zn.getUserProfile(t.uid);u(w.user)}catch(w){console.error("Error fetching profile:",w),T("Failed to load profile data")}finally{g(!1)}};t!=null&&t.uid&&O()},[t]),P.useEffect(()=>{l&&f({username:l.username||"",email:l.email||"",firstName:l.firstName||"",lastName:l.lastName||"",exerciseGoalMinutes:l.exerciseGoalMinutes||"",waterGoalOz:l.waterGoalOz||"",meditationGoalMinutes:l.meditationGoalMinutes||""})},[l]);const k=O=>{const{name:w,value:y}=O.target;f(v=>({...v,[w]:y}))},b=async O=>{if(O.preventDefault(),!!(t!=null&&t.uid)){A(!0),T(""),R("");try{console.log("Submitting profile update:",d);const w={...d,exerciseGoalMinutes:parseInt(d.exerciseGoalMinutes)||30,waterGoalOz:parseInt(d.waterGoalOz)||64,meditationGoalMinutes:parseInt(d.meditationGoalMinutes)||10};await zn.updateUserProfile(t.uid,w),u({...l,...w}),R("Profile updated successfully!"),setTimeout(()=>R(""),3e3)}catch(w){console.error("Error updating profile:",w),T("Failed to update profile. Please try again.")}finally{A(!1)}}},V=()=>{l&&f({username:l.username||"",email:l.email||"",firstName:l.firstName||"",lastName:l.lastName||"",exerciseGoalMinutes:l.exerciseGoalMinutes||"",waterGoalOz:l.waterGoalOz||"",meditationGoalMinutes:l.meditationGoalMinutes||""}),T(""),R("")};return e||m?c.jsx("div",{className:"profile-loading",children:"Loading profile..."}):t?c.jsx("div",{className:"profile-page",children:c.jsxs("div",{className:"profile-card",children:[c.jsxs("div",{className:"profile-header",children:[c.jsx("h1",{className:"profile-title",children:"Personal Information"}),c.jsx("p",{className:"profile-subtitle",children:"Update your profile and wellness goals"})]}),j&&c.jsx("div",{className:"success-message",children:j}),x&&c.jsx("div",{className:"error-message",children:x}),l&&c.jsxs("form",{onSubmit:b,className:"profile-form",children:[c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"section-title",children:"Account Information"}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Username",c.jsx("input",{type:"text",name:"username",value:d.username,onChange:k,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Email",c.jsx("input",{type:"email",name:"email",value:d.email,onChange:k,className:"form-input",required:!0})]})})]}),c.jsxs("div",{className:"form-row",children:[c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["First Name",c.jsx("input",{type:"text",name:"firstName",value:d.firstName,onChange:k,className:"form-input",required:!0})]})}),c.jsx("div",{className:"form-group",children:c.jsxs("label",{className:"form-label",children:["Last Name",c.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:k,className:"form-input",required:!0})]})})]})]}),c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{className:"section-title",children:"Daily Wellness Goals"}),c.jsx("p",{className:"section-description",children:"Set your daily targets to track your progress effectively"}),c.jsxs("div",{className:"goals-grid",children:[c.jsx("div",{className:"form-group goal-group",children:c.jsxs("label",{className:"form-label",children:[c.jsx("span",{className:"goal-icon",children:"🏋️"}),"Exercise Goal (Minutes)",c.jsx("input",{type:"number",name:"exerciseGoalMinutes",value:d.exerciseGoalMinutes,onChange:k,className:"form-input",min:"1",max:"300",required:!0}),c.jsx("small",{className:"input-help",children:"Recommended: 30-60 minutes"})]})}),c.jsx("div",{className:"form-group goal-group",children:c.jsxs("label",{className:"form-label",children:[c.jsx("span",{className:"goal-icon",children:"💧"}),"Water Goal (Oz)",c.jsx("input",{type:"number",name:"waterGoalOz",value:d.waterGoalOz,onChange:k,className:"form-input",min:"1",max:"200",required:!0}),c.jsx("small",{className:"input-help",children:"Recommended: 64-100 oz"})]})}),c.jsx("div",{className:"form-group goal-group",children:c.jsxs("label",{className:"form-label",children:[c.jsx("span",{className:"goal-icon",children:"🧘"}),"Meditation Goal (Minutes)",c.jsx("input",{type:"number",name:"meditationGoalMinutes",value:d.meditationGoalMinutes,onChange:k,className:"form-input",min:"1",max:"120",required:!0}),c.jsx("small",{className:"input-help",children:"Recommended: 5-20 minutes"})]})})]})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",className:"reset-button",onClick:V,disabled:N,children:"Reset Changes"}),c.jsx("button",{type:"submit",className:"save-button",disabled:N,children:N?"Saving...":"Save Profile"})]})]}),c.jsxs("div",{className:"profile-stats",children:[c.jsx("h3",{className:"section-title",children:"Account Summary"}),c.jsxs("div",{className:"stats-grid",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Member Since"}),c.jsx("span",{className:"stat-value",children:l!=null&&l.createdAt?new Date(l.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Profile Updated"}),c.jsx("span",{className:"stat-value",children:l!=null&&l.updatedAt?new Date(l.updatedAt.seconds*1e3).toLocaleDateString():"N/A"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Goals Set"}),c.jsxs("span",{className:"stat-value",children:[[d.exerciseGoalMinutes,d.waterGoalOz,d.meditationGoalMinutes].filter(O=>O&&O>0).length," / 3"]})]})]})]}),c.jsxs("div",{className:"subscription-section",children:[c.jsx("h2",{children:"Your Plan"}),r==="trial"&&c.jsx("div",{className:"trial-status",children:c.jsxs("div",{className:"status-card trial",children:[c.jsx("h3",{children:"Premium Trial"}),c.jsx("p",{children:"You're experiencing the full premium experience!"}),c.jsxs("div",{className:"trial-countdown",children:[c.jsx("span",{className:"days-remaining",children:s}),c.jsx("span",{className:"days-label",children:"days remaining"})]}),c.jsxs("div",{className:"trial-benefits",children:[c.jsx("p",{children:"Currently enjoying:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"✓ Custom goal setting"}),c.jsx("li",{children:"✓ Diamond achievements"}),c.jsx("li",{children:"✓ Premium soundscapes"}),c.jsx("li",{children:"✓ Advanced analytics"})]})]}),c.jsx("button",{onClick:Ba,className:"keep-premium-btn",children:"Keep Premium Access - $4.99/month"})]})}),r==="premium"&&c.jsx("div",{className:"premium-status",children:c.jsxs("div",{className:"status-card premium",children:[c.jsx("h3",{children:"💎 Premium Member"}),c.jsx("p",{children:"You have access to all premium features!"}),c.jsxs("div",{className:"premium-benefits",children:[c.jsx("h4",{children:"Your Premium Benefits:"}),c.jsxs("div",{className:"benefits-list",children:[c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Custom goal setting"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Exclusive Diamond badges"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Premium soundscapes"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Advanced analytics"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Challenge competitions"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"✓"}),c.jsx("span",{children:"Priority support"})]})]})]}),c.jsx("button",{onClick:o,className:"cancel-btn",children:"Cancel Subscription"})]})}),r==="free"&&c.jsx("div",{className:"free-status",children:c.jsxs("div",{className:"status-card free",children:[c.jsx("h3",{children:"🆓 Free Plan"}),c.jsx("p",{children:"Upgrade to unlock premium features and enhance your wellness journey"}),c.jsxs("div",{className:"premium-benefits",children:[c.jsx("h4",{children:"Unlock with Premium:"}),c.jsxs("div",{className:"benefits-list",children:[c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"🎯"}),c.jsx("span",{children:"Custom goal setting"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"💎"}),c.jsx("span",{children:"Exclusive Diamond badges"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"🎵"}),c.jsx("span",{children:"Premium soundscapes"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"📊"}),c.jsx("span",{children:"Advanced analytics"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"🏆"}),c.jsx("span",{children:"Challenge competitions"})]}),c.jsxs("div",{className:"benefit-item",children:[c.jsx("span",{className:"benefit-icon",children:"⚡"}),c.jsx("span",{children:"Priority support"})]})]})]}),c.jsx("button",{onClick:Ba,className:"upgrade-btn",children:"Upgrade to Premium - $4.99/month"})]})})]})]})}):c.jsx("div",{className:"profile-error",children:"Please log in to view your profile."})}function eb({children:t}){const{user:e,loading:n}=on();return console.log("🔐 ProtectedRoute - loading:",n,"user:",!!e),n?c.jsx("div",{className:"loading",children:"Loading..."}):e?(console.log("✅ Authenticated, rendering protected content"),t):(console.log("🚫 Not authenticated, redirecting to welcome"),c.jsx($c,{to:"/welcome",replace:!0}))}const tb="modulepreload",nb=function(t){return"/"+t},i_={},rb=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=nb(u),u in i_)return;i_[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":tb,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,N)=>{m.addEventListener("load",g),m.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function sb(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let l,u;const d=async(m=!0)=>{await u};async function f(){if("serviceWorker"in navigator){if(l=await rb(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/sw.js",{scope:"/",type:"classic"})).catch(m=>{o==null||o(m)}),!l)return;l.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),l.addEventListener("installed",m=>{m.isUpdate||r==null||r()}),l.register({immediate:e}).then(m=>{i?i("/sw.js",m):s==null||s(m)}).catch(m=>{o==null||o(m)})}}return u=f(),d}const ib=()=>{const[t,e]=P.useState(!1),[n,r]=P.useState(!1);P.useEffect(()=>{sb({onNeedRefresh(){e(!0)},onOfflineReady(){r(!0)},onRegistered(o){console.log("SW registered: ",o)},onRegisterError(o){console.log("SW registration error",o)}})},[]);const s=()=>{r(!1),e(!1)},i=()=>{updateSW(),s()};return!t&&!n?null:c.jsxs("div",{className:"pwa-update-banner",children:[c.jsxs("div",{className:"pwa-update-content",children:[n&&c.jsxs("div",{className:"pwa-message",children:[c.jsx("span",{children:"App ready to work offline"}),c.jsx("button",{onClick:s,className:"pwa-close-btn",children:"Close"})]}),t&&c.jsxs("div",{className:"pwa-message",children:[c.jsx("span",{children:"New content available, click on reload button to update"}),c.jsx("button",{onClick:i,className:"pwa-update-btn",children:"Reload"}),c.jsx("button",{onClick:s,className:"pwa-close-btn",children:"Close"})]})]}),c.jsx("style",{jsx:!0,children:`
        .pwa-update-banner {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: #6c5ce7;
          color: white;
          padding: 1rem;
          z-index: 9999;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .pwa-update-content {
          max-width: 600px;
          margin: 0 auto;
        }
        
        .pwa-message {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: 1rem;
        }
        
        .pwa-update-btn, .pwa-close-btn {
          background: rgba(255, 255, 255, 0.2);
          border: 1px solid rgba(255, 255, 255, 0.3);
          color: white;
          padding: 0.5rem 1rem;
          border-radius: 6px;
          cursor: pointer;
          font-size: 0.875rem;
          transition: background-color 0.2s;
        }
        
        .pwa-update-btn:hover, .pwa-close-btn:hover {
          background: rgba(255, 255, 255, 0.3);
        }
        
        @media (max-width: 768px) {
          .pwa-message {
            flex-direction: column;
            gap: 0.5rem;
          }
          
          .pwa-update-btn, .pwa-close-btn {
            width: 100%;
          }
        }
      `})]})},ob=()=>{const[t,e]=P.useState(!1),[n,r]=P.useState(null),[s,i]=P.useState("unknown"),[o,l]=P.useState(!1);P.useEffect(()=>{const g=window.matchMedia("(display-mode: standalone)").matches,N=localStorage.getItem("clarity-pwa-dismissed")==="true";if(g||N)return;const A=/iPad|iPhone|iPod/.test(navigator.userAgent),j=/Android/.test(navigator.userAgent);i(A?"ios":j?"android":"desktop");const R=T=>{T.preventDefault(),o||(r(T),e(!0),l(!0))},x=()=>{e(!1),r(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",R),window.addEventListener("appinstalled",x),A&&!o){const T=setTimeout(()=>{o||(e(!0),l(!0))},3e3);return()=>clearTimeout(T)}return()=>{window.removeEventListener("beforeinstallprompt",R),window.removeEventListener("appinstalled",x)}},[o]);const u=async()=>{if(n){n.prompt();const{outcome:g}=await n.userChoice;g==="accepted"&&(e(!1),r(null),localStorage.setItem("clarity-pwa-installed","true"))}},d=()=>{e(!1),localStorage.setItem("clarity-pwa-dismissed","true")};if(!t)return null;const m=(()=>{switch(s){case"ios":return{title:"Add Clarity to Home Screen",steps:["Tap the Share button (📤) at the bottom",'Scroll down and tap "Add to Home Screen"','Tap "Add" to install'],icon:"📱"};case"android":return{title:"Install Clarity App",steps:['Tap "Install" below to add to home screen','Or use the menu (⋮) → "Add to Home Screen"'],icon:"🤖"};case"desktop":return{title:"Install Clarity App",steps:["Click the install icon (📥) in your browser address bar",'Or use the menu → "Install Clarity"'],icon:"💻"};default:return{title:"Install Clarity",steps:["Look for an install option in your browser menu","Or add this page to your bookmarks"],icon:"📱"}}})();return c.jsxs("div",{className:"install-prompt-overlay",children:[c.jsxs("div",{className:"install-prompt",children:[c.jsx("button",{className:"install-close",onClick:d,children:"✕"}),c.jsxs("div",{className:"install-content",children:[c.jsx("div",{className:"install-icon",children:m.icon}),c.jsx("h3",{children:m.title}),c.jsx("div",{className:"install-steps",children:m.steps.map((g,N)=>c.jsxs("div",{className:"install-step",children:[c.jsx("span",{className:"step-number",children:N+1}),c.jsx("span",{className:"step-text",children:g})]},N))}),s==="android"&&n&&c.jsx("button",{className:"install-button",onClick:u,children:"Install Clarity"}),c.jsx("div",{className:"install-benefits",children:c.jsx("p",{children:"✨ Works offline • 🚀 Faster loading • 📱 App-like experience"})})]})]}),c.jsx("style",{jsx:!0,children:`
        .install-prompt-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          padding: 20px;
        }

        .install-prompt {
          background: white;
          border-radius: 16px;
          padding: 24px;
          max-width: 400px;
          width: 100%;
          position: relative;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .install-close {
          position: absolute;
          top: 12px;
          right: 12px;
          background: none;
          border: none;
          font-size: 20px;
          cursor: pointer;
          color: #666;
          padding: 4px;
        }

        .install-content {
          text-align: center;
        }

        .install-icon {
          font-size: 48px;
          margin-bottom: 16px;
        }

        .install-content h3 {
          color: #6b8069;
          margin-bottom: 20px;
          font-size: 20px;
        }

        .install-steps {
          text-align: left;
          margin-bottom: 20px;
        }

        .install-step {
          display: flex;
          align-items: center;
          margin-bottom: 12px;
          padding: 8px 0;
        }

        .step-number {
          background: #6b8069;
          color: white;
          width: 24px;
          height: 24px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 12px;
          font-weight: bold;
          margin-right: 12px;
          flex-shrink: 0;
        }

        .step-text {
          color: #333;
          font-size: 14px;
          line-height: 1.4;
        }

        .install-button {
          background: #6b8069;
          color: white;
          border: none;
          border-radius: 12px;
          padding: 12px 24px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          width: 100%;
          margin-bottom: 16px;
          transition: background-color 0.2s;
        }

        .install-button:hover {
          background: #556b54;
        }

        .install-benefits {
          background: #f6f7f6;
          border-radius: 8px;
          padding: 12px;
        }

        .install-benefits p {
          color: #6b8069;
          font-size: 12px;
          margin: 0;
        }

        @media (max-width: 480px) {
          .install-prompt {
            margin: 20px;
            padding: 20px;
          }
        }
      `})]})},ab=()=>{const[t,e]=P.useState(!1),[n,r]=P.useState(null),[s,i]=P.useState(!1),[o,l]=P.useState(!1);P.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const d=localStorage.getItem("clarity-pwa-dismissed")==="true",f=localStorage.getItem("clarity-pwa-installed")==="true";if(d||f)return;const m=A=>{A.preventDefault(),o||(r(A),e(!0),l(!0))},g=()=>{i(!0),e(!1),r(null),localStorage.setItem("clarity-pwa-installed","true")};if(window.addEventListener("beforeinstallprompt",m),window.addEventListener("appinstalled",g),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!s&&!o){const A=setTimeout(()=>{o||(e(!0),l(!0))},5e3);return()=>clearTimeout(A)}return()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",g)}},[s,o]);const u=async()=>{if(n){n.prompt();const{outcome:d}=await n.userChoice;d==="accepted"&&(i(!0),e(!1),r(null),localStorage.setItem("clarity-pwa-installed","true"))}else alert('To install: Use your browser menu → "Add to Home Screen" or "Install App"')};return!t||s?null:c.jsxs("div",{className:"floating-install-button",onClick:u,children:[c.jsx("div",{className:"install-icon",children:"📱"}),c.jsx("span",{className:"install-text",children:"Install"}),c.jsx("style",{jsx:!0,children:`
        .floating-install-button {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background: #6b8069;
          color: white;
          border-radius: 50px;
          padding: 12px 20px;
          display: flex;
          align-items: center;
          gap: 8px;
          cursor: pointer;
          box-shadow: 0 4px 12px rgba(107, 128, 105, 0.3);
          z-index: 1000;
          transition: all 0.2s ease;
          font-weight: 600;
          font-size: 14px;
        }

        .floating-install-button:hover {
          background: #556b54;
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(107, 128, 105, 0.4);
        }

        .floating-install-button:active {
          transform: translateY(0);
        }

        .install-icon {
          font-size: 18px;
        }

        .install-text {
          white-space: nowrap;
        }

        @media (max-width: 480px) {
          .floating-install-button {
            bottom: 16px;
            right: 16px;
            padding: 10px 16px;
            font-size: 13px;
          }
        }
      `})]})},eh={worry_worm:{name:"Worry Worm",icon:"🐛",color:"#8B4513",size:"small",technique:"breathing",description:"Those nagging worries that won't go away",tamedMessage:"Worry Worm is now peaceful! 🌱"},panic_bear:{name:"Panic Bear",icon:"🐻",color:"#DC143C",size:"large",technique:"progressive_relaxation",description:"Big scary feelings that make your heart race",tamedMessage:"Panic Bear is now your gentle guardian! 🧸"},overthink_octopus:{name:"Overthink Octopus",icon:"🐙",color:"#4B0082",size:"medium",technique:"mindfulness",description:"Eight arms of spiraling thoughts",tamedMessage:"Overthink Octopus is now zen and focused! 🧘‍♀️"},doom_dragon:{name:"Doom Dragon",icon:"🐉",color:"#8B0000",size:"boss",technique:"breathing",description:"The big bad of catastrophic thinking",tamedMessage:"Doom Dragon is now your wise protector! ✨"}},zo={breathing:{name:"Deep Breathing",icon:"💨",instructions:["Breathe in for 4","Hold for 4","Breathe out for 6","Repeat"],duration:16e3,color:"#4CAF50"},progressive_relaxation:{name:"Progressive Relaxation",icon:"🧘‍♀️",instructions:["Tense your shoulders","Hold for 3 seconds","Release and relax","Feel the tension melt away"],duration:12e3,color:"#2196F3"},mindfulness:{name:"Mindfulness Anchor",icon:"⚓",instructions:["Notice 3 things you can see","Notice 2 things you can hear","Notice 1 thing you can feel","You are present"],duration:15e3,color:"#FF9800"}},Ql={TAMED_MONSTERS:"anxiety_game_tamed_monsters",PLAYER_STATS:"anxiety_game_player_stats"};function lb({user:t,onUpdateStats:e}){var V,O,w;const[n,r]=P.useState("menu"),[s,i]=P.useState(null),[o,l]=P.useState([]),[u,d]=P.useState({level:1,experience:0,calmness:100,monstersDefeated:0,sanctuaryPoints:0}),[f,m]=P.useState(0),[g,N]=P.useState(0),[A,j]=P.useState(!1),R=P.useRef(null);P.useEffect(()=>{try{const y=localStorage.getItem(Ql.TAMED_MONSTERS);if(y){const I=JSON.parse(y).map(C=>({...eh[C],id:C}));l(I)}const v=localStorage.getItem(Ql.PLAYER_STATS);if(v){const E=JSON.parse(v);d(E)}}catch(y){console.error("Error loading game data from localStorage:",y)}},[]);const x=()=>{const y=Object.keys(eh),v=y[Math.floor(Math.random()*y.length)],E={...eh[v],id:v};i(E),r("encounter");const I=E.size==="boss"?30:E.size==="large"?20:10;d(C=>({...C,calmness:Math.max(0,C.calmness-I)}))},T=()=>{const y=zo[s.technique]||zo.breathing;r("technique"),m(0),N(0),k(y)},k=y=>{const v=y.duration/y.instructions.length;let E=0;const I=setInterval(()=>{N(E),m((E+1)/y.instructions.length*100),E===y.instructions.length-1?(clearInterval(I),setTimeout(()=>{b()},v)):E++},v);R.current=I},b=()=>{const y=s.size==="boss"?100:s.size==="large"?50:25,v=s.size==="boss"?20:10;l(E=>[...E,s]),d(E=>({...E,experience:E.experience+y,calmness:Math.min(100,E.calmness+30),monstersDefeated:E.monstersDefeated+1,sanctuaryPoints:E.sanctuaryPoints+v,level:Math.floor((E.experience+y)/100)+1})),r("victory"),e&&e({anxietyGameScore:u.monstersDefeated+1,mindfulnessPoints:v})};return P.useEffect(()=>{if(n==="technique"&&(s==null?void 0:s.technique)==="breathing"){const y=setInterval(()=>{j(v=>!v)},2e3);return()=>clearInterval(y)}},[n,s]),P.useEffect(()=>()=>{R.current&&clearInterval(R.current)},[]),P.useEffect(()=>{try{const y=o.map(v=>v.id);localStorage.setItem(Ql.TAMED_MONSTERS,JSON.stringify(y))}catch(y){console.error("Error saving tamed monsters to localStorage:",y)}},[o]),P.useEffect(()=>{try{localStorage.setItem(Ql.PLAYER_STATS,JSON.stringify(u))}catch(y){console.error("Error saving player stats to localStorage:",y)}},[u]),c.jsxs("div",{className:"monster-tamer-game",children:[n==="menu"&&c.jsxs("div",{className:"game-menu",children:[c.jsxs("div",{className:"game-header",children:[c.jsx("h2",{children:"👾 Anxiety Monster Tamer"}),c.jsx("p",{children:"Use mindfulness to tame your anxiety monsters!"})]}),c.jsxs("div",{className:"player-stats",children:[c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"⭐"}),c.jsxs("span",{children:["Level ",u.level]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"🧘‍♀️"}),c.jsxs("span",{children:["Calmness: ",u.calmness,"%"]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"👾"}),c.jsxs("span",{children:["Tamed: ",u.monstersDefeated]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-icon",children:"🏠"}),c.jsxs("span",{children:["Sanctuary: ",u.sanctuaryPoints]})]})]}),c.jsx("button",{className:"encounter-btn",onClick:x,disabled:u.calmness<10,children:u.calmness<10?"Rest First 😴":"Encounter Monster 👾"}),u.calmness<10&&c.jsx("button",{className:"rest-btn",onClick:()=>d(y=>({...y,calmness:Math.min(100,y.calmness+50)})),style:{background:"linear-gradient(135deg, #FF9800 0%, #FF5722 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"20px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"12px"},children:"Rest & Recover 🧘‍♀️ (+50 Calmness)"}),c.jsxs("div",{className:"tamed-collection",children:[c.jsx("h3",{children:"Your Tamed Monsters:"}),c.jsx("div",{className:"tamed-grid",children:o.length===0?c.jsx("p",{className:"no-tamed",children:"No monsters tamed yet. Start your journey!"}):o.map((y,v)=>c.jsxs("div",{className:"tamed-monster",children:[c.jsx("span",{className:"monster-icon",children:y.icon}),c.jsx("span",{className:"monster-name",children:y.name})]},v))})]})]}),n==="encounter"&&s&&c.jsxs("div",{className:"monster-encounter",children:[c.jsxs("div",{className:"encounter-scene",children:[c.jsxs("div",{className:`monster ${s.size} ${s.id}`,children:[c.jsx("div",{className:"monster-icon",children:s.icon}),c.jsx("div",{className:"monster-shake"})]}),c.jsxs("div",{className:"encounter-text",children:[c.jsxs("h3",{children:["A wild ",s.name," appears!"]}),c.jsx("p",{children:s.description}),c.jsx("p",{className:"calmness-drop",children:"Your calmness dropped! 😰"})]})]}),c.jsxs("div",{className:"taming-options",children:[c.jsxs("button",{className:"tame-btn",onClick:T,children:[c.jsx("span",{className:"technique-icon",children:((V=zo[s.technique])==null?void 0:V.icon)||"💨"}),"Use ",((O=zo[s.technique])==null?void 0:O.name)||"Deep Breathing"]}),c.jsx("button",{className:"run-btn",onClick:()=>r("menu"),children:"Run Away 🏃‍♀️"})]})]}),n==="technique"&&s&&c.jsxs("div",{className:"taming-technique",children:[c.jsxs("div",{className:"technique-header",children:[c.jsxs("h3",{children:["Taming ",s.name]}),c.jsx("div",{className:"anxiety-progress",children:c.jsx("div",{className:"anxiety-progress-fill",style:{width:`${f}%`}})})]}),c.jsx("div",{className:`technique-visual ${A?"breathing":""}`,children:c.jsxs("div",{className:"monster-calming",children:[c.jsx("span",{className:"monster-icon",children:s.icon}),c.jsx("div",{className:"calming-aura"})]})}),c.jsx("div",{className:"technique-instructions",children:(w=zo[s.technique])==null?void 0:w.instructions.map((y,v)=>c.jsx("div",{className:`instruction ${v===g?"active":v<g?"completed":""}`,children:y},v))})]}),n==="victory"&&s&&c.jsxs("div",{className:"victory-screen",children:[c.jsx("div",{className:"victory-animation",children:c.jsxs("div",{className:"tamed-monster",children:[c.jsx("span",{className:"monster-icon happy",children:s.icon}),c.jsx("div",{className:"sparkles",children:"✨✨✨"})]})}),c.jsxs("div",{className:"victory-text",children:[c.jsx("h3",{children:"🎉 Monster Tamed!"}),c.jsx("p",{children:s.tamedMessage}),c.jsxs("div",{className:"rewards",children:[c.jsx("div",{className:"reward",children:"+30 Calmness 🧘‍♀️"}),c.jsxs("div",{className:"reward",children:["+",s.size==="boss"?100:s.size==="large"?50:25," Experience ⭐"]}),c.jsxs("div",{className:"reward",children:["+",s.size==="boss"?20:10," Sanctuary Points 🏠"]})]})]}),c.jsxs("div",{className:"victory-actions",children:[c.jsx("button",{className:"continue-btn",onClick:()=>r("menu"),children:"Continue Journey ➡️"}),c.jsx("button",{className:"sanctuary-btn",onClick:()=>r("sanctuary"),children:"Visit Sanctuary 🏛️"})]})]}),n==="sanctuary"&&c.jsxs("div",{className:"sanctuary-view",children:[c.jsxs("div",{className:"sanctuary-header",children:[c.jsx("h2",{children:"🏛️ Your Peaceful Sanctuary"}),c.jsx("p",{children:"A safe space built from your mindfulness journey"}),c.jsx("button",{className:"back-to-menu-btn",onClick:()=>r("menu"),children:"← Back to Adventure"})]}),c.jsxs("div",{className:"sanctuary-stats",children:[c.jsxs("div",{className:"sanctuary-stat",children:[c.jsx("div",{className:"stat-icon",children:"🏠"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:u.sanctuaryPoints}),c.jsx("span",{className:"stat-label",children:"Sanctuary Points"})]})]}),c.jsxs("div",{className:"sanctuary-stat",children:[c.jsx("div",{className:"stat-icon",children:"👾"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:o.length}),c.jsx("span",{className:"stat-label",children:"Peaceful Companions"})]})]}),c.jsxs("div",{className:"sanctuary-stat",children:[c.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"stat-info",children:[c.jsxs("span",{className:"stat-number",children:[u.calmness,"%"]}),c.jsx("span",{className:"stat-label",children:"Current Calmness"})]})]})]}),c.jsxs("div",{className:"sanctuary-garden",children:[c.jsx("h3",{children:"🌸 Mindfulness Garden"}),c.jsxs("div",{className:"garden-grid",children:[o.length===0?c.jsxs("div",{className:"empty-garden",children:[c.jsx("div",{className:"empty-garden-icon",children:"🌱"}),c.jsx("p",{children:"Your garden awaits your first peaceful companion..."}),c.jsx("small",{children:"Tame monsters to populate your sanctuary!"})]}):o.map((y,v)=>c.jsx("div",{className:"garden-companion",children:c.jsxs("div",{className:"companion-spot",children:[c.jsx("span",{className:"companion-icon",children:y.icon}),c.jsx("div",{className:"companion-aura"}),c.jsx("div",{className:"companion-name",children:y.name}),c.jsx("div",{className:"companion-effect",children:"Radiating peace ✨"})]})},v)),Array.from({length:Math.max(0,6-o.length)}).map((y,v)=>c.jsx("div",{className:"garden-companion empty",children:c.jsxs("div",{className:"companion-spot",children:[c.jsx("span",{className:"empty-spot",children:"?"}),c.jsx("div",{className:"spot-label",children:"Awaiting Friend"})]})},`empty-${v}`))]})]}),c.jsxs("div",{className:"sanctuary-upgrades",children:[c.jsx("h3",{children:"🏗️ Sanctuary Upgrades"}),c.jsxs("div",{className:"upgrades-grid",children:[c.jsxs("div",{className:`upgrade-card ${u.sanctuaryPoints>=50?"available":"locked"}`,children:[c.jsx("div",{className:"upgrade-icon",children:"🌈"}),c.jsxs("div",{className:"upgrade-info",children:[c.jsx("h4",{children:"Rainbow Bridge"}),c.jsx("p",{children:"Connects different areas of your sanctuary"}),c.jsx("span",{className:"upgrade-cost",children:"50 Points"})]}),u.sanctuaryPoints>=50?c.jsx("button",{className:"upgrade-btn",children:"Build"}):c.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),c.jsxs("div",{className:`upgrade-card ${u.sanctuaryPoints>=100?"available":"locked"}`,children:[c.jsx("div",{className:"upgrade-icon",children:"⛲"}),c.jsxs("div",{className:"upgrade-info",children:[c.jsx("h4",{children:"Meditation Fountain"}),c.jsx("p",{children:"Restores calmness over time"}),c.jsx("span",{className:"upgrade-cost",children:"100 Points"})]}),u.sanctuaryPoints>=100?c.jsx("button",{className:"upgrade-btn",children:"Build"}):c.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),c.jsxs("div",{className:`upgrade-card ${u.sanctuaryPoints>=200?"available":"locked"}`,children:[c.jsx("div",{className:"upgrade-icon",children:"🏰"}),c.jsxs("div",{className:"upgrade-info",children:[c.jsx("h4",{children:"Wisdom Tower"}),c.jsx("p",{children:"Unlock advanced meditation techniques"}),c.jsx("span",{className:"upgrade-cost",children:"200 Points"})]}),u.sanctuaryPoints>=200?c.jsx("button",{className:"upgrade-btn",children:"Build"}):c.jsx("div",{className:"upgrade-locked",children:"🔒"})]})]})]}),c.jsxs("div",{className:"daily-affirmations",children:[c.jsx("h3",{children:"💭 Daily Affirmation"}),c.jsxs("div",{className:"affirmation-card",children:[c.jsx("div",{className:"affirmation-text",children:'"I am creating a sanctuary of peace within myself, one mindful moment at a time."'}),c.jsx("div",{className:"affirmation-author",children:"- Your Inner Wisdom"})]})]}),c.jsxs("div",{className:"sanctuary-actions",children:[c.jsx("button",{className:"meditation-btn",onClick:()=>{d(y=>({...y,calmness:Math.min(100,y.calmness+10)}))},children:"🧘‍♀️ Meditate in Sanctuary (+10 Calmness)"}),c.jsx("button",{className:"encounter-btn",onClick:()=>{r("menu"),setTimeout(()=>{x()},500)},children:"👾 Ready for Another Adventure"})]})]})]})}function cb(){const{user:t}=on(),[e,n]=P.useState({anxietyGameScore:0,mindfulnessPoints:0,totalGamesPlayed:0,currentStreak:0});P.useEffect(()=>{try{const i=localStorage.getItem("clarity_game_stats");if(i){const l=JSON.parse(i);n(l),console.log("🎮 Loaded saved game stats:",l)}const o=localStorage.getItem("anxiety_game_tamed_monsters");if(o){const u=JSON.parse(o).length;n(d=>{const f={...d,anxietyGameScore:Math.max(d.anxietyGameScore,u)};return localStorage.setItem("clarity_game_stats",JSON.stringify(f)),console.log("🎮 Synced monster count:",u),f})}}catch(i){console.error("Error loading game stats:",i)}},[]);const r=i=>{console.log("🎮 handleUpdateStats called with:",i),n(o=>{const l={...o,anxietyGameScore:i.anxietyGameScore||o.anxietyGameScore,mindfulnessPoints:o.mindfulnessPoints+(i.mindfulnessPoints||0),totalGamesPlayed:o.totalGamesPlayed+1};try{localStorage.setItem("clarity_game_stats",JSON.stringify(l)),console.log("🎮 Saved game stats to localStorage:",l)}catch(u){console.error("Error saving game stats:",u)}return l}),console.log("🎮 Game stats updated:",i)},s=()=>{try{const i=localStorage.getItem("anxiety_game_tamed_monsters"),o=localStorage.getItem("anxiety_game_player_stats");if(console.log("🎮 Debug - Tamed monsters:",i),console.log("🎮 Debug - Player stats:",o),i){const u=JSON.parse(i).length;n(d=>({...d,anxietyGameScore:u})),console.log("🎮 Debug - Updated anxietyGameScore to:",u)}}catch(i){console.error("Error refreshing stats:",i)}};return c.jsxs("div",{className:"games-page",children:[c.jsxs("div",{className:"games-header",children:[c.jsx("h1",{className:"games-title",children:"Mental Wellness Games"}),c.jsx("p",{className:"games-subtitle",children:"Play games to improve your mental health"})]}),c.jsxs("div",{className:"game-stats-section",children:[c.jsxs("div",{className:"stats-header",children:[c.jsx("h2",{className:"section-title",children:"Your Gaming Stats"}),c.jsx("button",{onClick:s,className:"refresh-stats-btn",title:"Refresh stats from game data",children:"🔄 Refresh"})]}),c.jsxs("div",{className:"game-stats-grid",children:[c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"👾"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.anxietyGameScore}),c.jsx("span",{className:"stat-label",children:"Monsters Tamed"})]})]}),c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.mindfulnessPoints}),c.jsx("span",{className:"stat-label",children:"Mindfulness Points"})]})]}),c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"🎮"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.totalGamesPlayed}),c.jsx("span",{className:"stat-label",children:"Games Played"})]})]}),c.jsxs("div",{className:"game-stat-card",children:[c.jsx("div",{className:"stat-icon",children:"🔥"}),c.jsxs("div",{className:"stat-info",children:[c.jsx("span",{className:"stat-number",children:e.currentStreak}),c.jsx("span",{className:"stat-label",children:"Day Streak"})]})]})]})]}),c.jsxs("div",{className:"available-games",children:[c.jsx("h2",{className:"section-title",children:"Available Games"}),c.jsxs("div",{className:"game-section",children:[c.jsxs("div",{className:"game-header",children:[c.jsx("h3",{className:"game-title",children:"🎮 Anxiety Monster Tamer"}),c.jsx("span",{className:"game-status",children:"Active"})]}),c.jsx("p",{className:"game-description",children:"Face your anxiety monsters and tame them through mindful interaction. Each monster represents different anxiety triggers. Practice coping strategies while earning points!"}),c.jsx("div",{className:"game-container",children:c.jsx(lb,{user:t,onUpdateStats:r})})]}),c.jsxs("div",{className:"daily-challenges",children:[c.jsx("h2",{className:"section-title",children:"Daily Gaming Challenges"}),c.jsxs("div",{className:"challenge-card",children:[c.jsx("div",{className:"challenge-icon",children:"👾"}),c.jsxs("div",{className:"challenge-content",children:[c.jsx("h3",{children:"Monster Tamer Challenge"}),c.jsx("p",{children:"Tame 3 anxiety monsters today"}),c.jsx("div",{className:"challenge-progress",children:c.jsx("div",{className:"daily-challenge-bar",children:c.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.anxietyGameScore/3*100,100)}%`}})})})]}),c.jsx("div",{className:"challenge-reward",children:c.jsx("span",{children:"+50 points"})})]}),c.jsxs("div",{className:"challenge-card",children:[c.jsx("div",{className:"challenge-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"challenge-content",children:[c.jsx("h3",{children:"Mindfulness Master"}),c.jsx("p",{children:"Earn 100 mindfulness points"}),c.jsx("div",{className:"challenge-progress",children:c.jsx("div",{className:"daily-challenge-bar",children:c.jsx("div",{className:"daily-challenge-fill",style:{width:`${Math.min(e.mindfulnessPoints/100*100,100)}%`}})})})]}),c.jsx("div",{className:"challenge-reward",children:c.jsx("span",{children:"+75 points"})})]})]}),c.jsxs("div",{className:"game-achievements",children:[c.jsx("h2",{className:"section-title",children:"Gaming Achievements"}),c.jsxs("div",{className:"achievements-grid",children:[e.anxietyGameScore>=1&&c.jsxs("div",{className:"achievement-card bronze",children:[c.jsx("div",{className:"achievement-icon",children:"🥉"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"FIRST VICTORY"}),c.jsx("p",{children:"Tamed your first monster"})]})]}),e.anxietyGameScore>=5&&c.jsxs("div",{className:"achievement-card silver",children:[c.jsx("div",{className:"achievement-icon",children:"🥈"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"MONSTER HUNTER"}),c.jsx("p",{children:"Tamed 5 monsters"})]})]}),e.anxietyGameScore>=10&&c.jsxs("div",{className:"achievement-card gold",children:[c.jsx("div",{className:"achievement-icon",children:"🥇"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"ANXIETY MASTER"}),c.jsx("p",{children:"Tamed 10 monsters"})]})]}),e.mindfulnessPoints>=100&&c.jsxs("div",{className:"achievement-card gold",children:[c.jsx("div",{className:"achievement-icon",children:"🧘‍♀️"}),c.jsxs("div",{className:"achievement-info",children:[c.jsx("h4",{children:"MINDFUL GURU"}),c.jsx("p",{children:"Earned 100+ mindfulness points"})]})]})]})]}),c.jsxs("div",{className:"coming-soon-games",children:[c.jsx("h3",{className:"section-title",children:"More Games Coming Soon"}),c.jsxs("div",{className:"game-preview-grid",children:[c.jsxs("div",{className:"game-preview-card",children:[c.jsx("div",{className:"game-preview-icon",children:"🌱"}),c.jsx("h4",{children:"Mindful Garden"}),c.jsx("p",{children:"Grow a virtual garden through daily meditation practice"}),c.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),c.jsxs("div",{className:"game-preview-card",children:[c.jsx("div",{className:"game-preview-icon",children:"🌊"}),c.jsx("h4",{children:"Calm Waters"}),c.jsx("p",{children:"Navigate peaceful waters while practicing breathing exercises"}),c.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),c.jsxs("div",{className:"game-preview-card",children:[c.jsx("div",{className:"game-preview-icon",children:"🎯"}),c.jsx("h4",{children:"Focus Quest"}),c.jsx("p",{children:"Complete challenges that improve concentration and focus"}),c.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]})]})]})]})]})}function ub(){return c.jsx(cS,{children:c.jsxs(ok,{children:[c.jsxs(J1,{children:[c.jsx(Yt,{path:"/welcome",element:c.jsx(Bj,{})}),c.jsxs(Yt,{path:"/",element:c.jsx(eb,{children:c.jsx(zj,{})}),children:[c.jsx(Yt,{index:!0,element:c.jsx($c,{to:"/dashboard",replace:!0})}),c.jsx(Yt,{path:"dashboard",element:c.jsx(Kj,{})}),c.jsx(Yt,{path:"workout",element:c.jsx(Qj,{})}),c.jsx(Yt,{path:"meditation",element:c.jsx(Yj,{})}),c.jsx(Yt,{path:"water",element:c.jsx(Xj,{})}),c.jsx(Yt,{path:"goals",element:c.jsx(Jj,{})}),c.jsx(Yt,{path:"profile",element:c.jsx(Zj,{})}),c.jsx(Yt,{path:"games",element:c.jsx(cb,{})})]}),c.jsx(Yt,{path:"*",element:c.jsx($c,{to:"/welcome",replace:!0})})]}),c.jsx(ib,{}),c.jsx(ob,{}),c.jsx(ab,{})]})})}th.createRoot(document.getElementById("root")).render(c.jsx(Zn.StrictMode,{children:c.jsx(cS,{children:c.jsx(ub,{})})}));
