function MI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function LI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var a_={exports:{}},oc={},l_={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fa=Symbol.for("react.element"),VI=Symbol.for("react.portal"),FI=Symbol.for("react.fragment"),UI=Symbol.for("react.strict_mode"),zI=Symbol.for("react.profiler"),BI=Symbol.for("react.provider"),$I=Symbol.for("react.context"),WI=Symbol.for("react.forward_ref"),qI=Symbol.for("react.suspense"),GI=Symbol.for("react.memo"),HI=Symbol.for("react.lazy"),ig=Symbol.iterator;function KI(t){return t===null||typeof t!="object"?null:(t=ig&&t[ig]||t["@@iterator"],typeof t=="function"?t:null)}var u_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c_=Object.assign,d_={};function eo(t,e,n){this.props=t,this.context=e,this.refs=d_,this.updater=n||u_}eo.prototype.isReactComponent={};eo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function h_(){}h_.prototype=eo.prototype;function Af(t,e,n){this.props=t,this.context=e,this.refs=d_,this.updater=n||u_}var kf=Af.prototype=new h_;kf.constructor=Af;c_(kf,eo.prototype);kf.isPureReactComponent=!0;var og=Array.isArray,f_=Object.prototype.hasOwnProperty,Cf={current:null},m_={key:!0,ref:!0,__self:!0,__source:!0};function p_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)f_.call(e,r)&&!m_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Fa,type:t,key:i,ref:o,props:s,_owner:Cf.current}}function QI(t,e){return{$$typeof:Fa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fa}function YI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ag=/\/+/g;function dd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YI(""+t.key):e.toString(36)}function Bl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fa:case VI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+dd(o,0):r,og(s)?(n="",t!=null&&(n=t.replace(ag,"$&/")+"/"),Bl(s,e,n,"",function(d){return d})):s!=null&&(Pf(s)&&(s=QI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ag,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",og(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+dd(i,l);o+=Bl(i,e,n,c,s)}else if(c=KI(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+dd(i,l++),o+=Bl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yl(t,e,n){if(t==null)return t;var r=[],s=0;return Bl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function XI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},$l={transition:null},JI={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:$l,ReactCurrentOwner:Cf};function g_(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:yl,forEach:function(t,e,n){yl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yl(t,function(){e++}),e},toArray:function(t){return yl(t,function(e){return e})||[]},only:function(t){if(!Pf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=eo;ue.Fragment=FI;ue.Profiler=zI;ue.PureComponent=Af;ue.StrictMode=UI;ue.Suspense=qI;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JI;ue.act=g_;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=c_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Cf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)f_.call(e,c)&&!m_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Fa,type:t.type,key:s,ref:i,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:$I,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BI,_context:t},t.Consumer=t};ue.createElement=p_;ue.createFactory=function(t){var e=p_.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:WI,render:t}};ue.isValidElement=Pf;ue.lazy=function(t){return{$$typeof:HI,_payload:{_status:-1,_result:t},_init:XI}};ue.memo=function(t,e){return{$$typeof:GI,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=$l.transition;$l.transition={};try{t()}finally{$l.transition=e}};ue.unstable_act=g_;ue.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ue.useContext=function(t){return Nt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ue.useId=function(){return Nt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};ue.useRef=function(t){return Nt.current.useRef(t)};ue.useState=function(t){return Nt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Nt.current.useTransition()};ue.version="18.3.1";l_.exports=ue;var j=l_.exports;const Jn=LI(j),ZI=MI({__proto__:null,default:Jn},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS=j,tS=Symbol.for("react.element"),nS=Symbol.for("react.fragment"),rS=Object.prototype.hasOwnProperty,sS=eS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iS={key:!0,ref:!0,__self:!0,__source:!0};function y_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rS.call(e,r)&&!iS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:tS,type:t,key:i,ref:o,props:s,_owner:sS.current}}oc.Fragment=nS;oc.jsx=y_;oc.jsxs=y_;a_.exports=oc;var u=a_.exports,Xd={},v_={exports:{}},Wt={},__={exports:{}},w_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,X){var se=q.length;q.push(X);e:for(;0<se;){var Se=se-1>>>1,ge=q[Se];if(0<s(ge,X))q[Se]=X,q[se]=ge,se=Se;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var X=q[0],se=q.pop();if(se!==X){q[0]=se;e:for(var Se=0,ge=q.length,Ee=ge>>>1;Se<Ee;){var rn=2*(Se+1)-1,sn=q[rn],on=rn+1,an=q[on];if(0>s(sn,se))on<ge&&0>s(an,sn)?(q[Se]=an,q[on]=se,Se=on):(q[Se]=sn,q[rn]=se,Se=rn);else if(on<ge&&0>s(an,se))q[Se]=an,q[on]=se,Se=on;else break e}}return X}function s(q,X){var se=q.sortIndex-X.sortIndex;return se!==0?se:q.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,p=null,g=3,N=!1,A=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(q){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=q)r(d),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(d)}}function D(q){if(R=!1,x(q),!A)if(n(c)!==null)A=!0,Z(V);else{var X=n(d);X!==null&&Ie(D,X.startTime-q)}}function V(q,X){A=!1,R&&(R=!1,S(y),y=-1),N=!0;var se=g;try{for(x(X),p=n(c);p!==null&&(!(p.expirationTime>X)||q&&!k());){var Se=p.callback;if(typeof Se=="function"){p.callback=null,g=p.priorityLevel;var ge=Se(p.expirationTime<=X);X=t.unstable_now(),typeof ge=="function"?p.callback=ge:p===n(c)&&r(c),x(X)}else r(c);p=n(c)}if(p!==null)var Ee=!0;else{var rn=n(d);rn!==null&&Ie(D,rn.startTime-X),Ee=!1}return Ee}finally{p=null,g=se,N=!1}}var O=!1,v=null,y=-1,w=5,T=-1;function k(){return!(t.unstable_now()-T<w)}function C(){if(v!==null){var q=t.unstable_now();T=q;var X=!0;try{X=v(!0,q)}finally{X?I():(O=!1,v=null)}}else O=!1}var I;if(typeof E=="function")I=function(){E(C)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,Ge=re.port2;re.port1.onmessage=C,I=function(){Ge.postMessage(null)}}else I=function(){P(C,0)};function Z(q){v=q,O||(O=!0,I())}function Ie(q,X){y=P(function(){q(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){A||N||(A=!0,Z(V))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var se=g;g=X;try{return q()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=g;g=q;try{return X()}finally{g=se}},t.unstable_scheduleCallback=function(q,X,se){var Se=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Se+se:Se):se=Se,q){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=se+ge,q={id:f++,callback:X,priorityLevel:q,startTime:se,expirationTime:ge,sortIndex:-1},se>Se?(q.sortIndex=se,e(d,q),n(c)===null&&q===n(d)&&(R?(S(y),y=-1):R=!0,Ie(D,se-Se))):(q.sortIndex=ge,e(c,q),A||N||(A=!0,Z(V))),q},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(q){var X=g;return function(){var se=g;g=X;try{return q.apply(this,arguments)}finally{g=se}}}})(w_);__.exports=w_;var oS=__.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS=j,$t=oS;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E_=new Set,ca={};function $s(t,e){Li(t,e),Li(t+"Capture",e)}function Li(t,e){for(ca[t]=e,t=0;t<e.length;t++)E_.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jd=Object.prototype.hasOwnProperty,lS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lg={},ug={};function uS(t){return Jd.call(ug,t)?!0:Jd.call(lg,t)?!1:lS.test(t)?ug[t]=!0:(lg[t]=!0,!1)}function cS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dS(t,e,n,r){if(e===null||typeof e>"u"||cS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rf=/[\-:]([a-z])/g;function Df(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rf,Df);at[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rf,Df);at[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rf,Df);at[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function jf(t,e,n,r){var s=at.hasOwnProperty(e)?at[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dS(e,n,s,r)&&(n=null),r||s===null?uS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cr=aS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vl=Symbol.for("react.element"),fi=Symbol.for("react.portal"),mi=Symbol.for("react.fragment"),bf=Symbol.for("react.strict_mode"),Zd=Symbol.for("react.profiler"),T_=Symbol.for("react.provider"),I_=Symbol.for("react.context"),Of=Symbol.for("react.forward_ref"),eh=Symbol.for("react.suspense"),th=Symbol.for("react.suspense_list"),Mf=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),S_=Symbol.for("react.offscreen"),cg=Symbol.iterator;function Po(t){return t===null||typeof t!="object"?null:(t=cg&&t[cg]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,hd;function Fo(t){if(hd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hd=e&&e[1]||""}return`
`+hd+t}var fd=!1;function md(t,e){if(!t||fd)return"";fd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{fd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fo(t):""}function hS(t){switch(t.tag){case 5:return Fo(t.type);case 16:return Fo("Lazy");case 13:return Fo("Suspense");case 19:return Fo("SuspenseList");case 0:case 2:case 15:return t=md(t.type,!1),t;case 11:return t=md(t.type.render,!1),t;case 1:return t=md(t.type,!0),t;default:return""}}function nh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mi:return"Fragment";case fi:return"Portal";case Zd:return"Profiler";case bf:return"StrictMode";case eh:return"Suspense";case th:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case I_:return(t.displayName||"Context")+".Consumer";case T_:return(t._context.displayName||"Context")+".Provider";case Of:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mf:return e=t.displayName||null,e!==null?e:nh(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return nh(t(e))}catch{}}return null}function fS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nh(e);case 8:return e===bf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function x_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mS(t){var e=x_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _l(t){t._valueTracker||(t._valueTracker=mS(t))}function N_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=x_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function cu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rh(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function A_(t,e){e=e.checked,e!=null&&jf(t,"checked",e,!1)}function sh(t,e){A_(t,e);var n=Qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ih(t,e.type,n):e.hasOwnProperty("defaultValue")&&ih(t,e.type,Qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ih(t,e,n){(e!=="number"||cu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Uo=Array.isArray;function Ni(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function oh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Uo(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qr(n)}}function k_(t,e){var n=Qr(e.value),r=Qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function mg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function C_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ah(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?C_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wl,P_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wl=wl||document.createElement("div"),wl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pS=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(t){pS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qo[e]=Qo[t]})});function R_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qo.hasOwnProperty(t)&&Qo[t]?(""+e).trim():e+"px"}function D_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=R_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var gS=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lh(t,e){if(e){if(gS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function uh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ch=null;function Lf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dh=null,Ai=null,ki=null;function pg(t){if(t=Ba(t)){if(typeof dh!="function")throw Error(W(280));var e=t.stateNode;e&&(e=dc(e),dh(t.stateNode,t.type,e))}}function j_(t){Ai?ki?ki.push(t):ki=[t]:Ai=t}function b_(){if(Ai){var t=Ai,e=ki;if(ki=Ai=null,pg(t),e)for(t=0;t<e.length;t++)pg(e[t])}}function O_(t,e){return t(e)}function M_(){}var pd=!1;function L_(t,e,n){if(pd)return t(e,n);pd=!0;try{return O_(t,e,n)}finally{pd=!1,(Ai!==null||ki!==null)&&(M_(),b_())}}function ha(t,e){var n=t.stateNode;if(n===null)return null;var r=dc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var hh=!1;if(nr)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){hh=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{hh=!1}function yS(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Yo=!1,du=null,hu=!1,fh=null,vS={onError:function(t){Yo=!0,du=t}};function _S(t,e,n,r,s,i,o,l,c){Yo=!1,du=null,yS.apply(vS,arguments)}function wS(t,e,n,r,s,i,o,l,c){if(_S.apply(this,arguments),Yo){if(Yo){var d=du;Yo=!1,du=null}else throw Error(W(198));hu||(hu=!0,fh=d)}}function Ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function V_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gg(t){if(Ws(t)!==t)throw Error(W(188))}function ES(t){var e=t.alternate;if(!e){if(e=Ws(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gg(s),t;if(i===r)return gg(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function F_(t){return t=ES(t),t!==null?U_(t):null}function U_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=U_(t);if(e!==null)return e;t=t.sibling}return null}var z_=$t.unstable_scheduleCallback,yg=$t.unstable_cancelCallback,TS=$t.unstable_shouldYield,IS=$t.unstable_requestPaint,Ue=$t.unstable_now,SS=$t.unstable_getCurrentPriorityLevel,Vf=$t.unstable_ImmediatePriority,B_=$t.unstable_UserBlockingPriority,fu=$t.unstable_NormalPriority,xS=$t.unstable_LowPriority,$_=$t.unstable_IdlePriority,ac=null,jn=null;function NS(t){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(ac,t,void 0,(t.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:CS,AS=Math.log,kS=Math.LN2;function CS(t){return t>>>=0,t===0?32:31-(AS(t)/kS|0)|0}var El=64,Tl=4194304;function zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=zo(l):(i&=o,i!==0&&(r=zo(i)))}else o=n&~s,o!==0?r=zo(o):i!==0&&(r=zo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mn(e),s=1<<n,r|=t[n],e&=~s;return r}function PS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-mn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=PS(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function mh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function W_(){var t=El;return El<<=1,!(El&4194240)&&(El=64),t}function gd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ua(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mn(e),t[e]=n}function DS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-mn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ff(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function q_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var G_,Uf,H_,K_,Q_,ph=!1,Il=[],Mr=null,Lr=null,Vr=null,fa=new Map,ma=new Map,Nr=[],jS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vg(t,e){switch(t){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(e.pointerId)}}function Do(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ba(e),e!==null&&Uf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function bS(t,e,n,r,s){switch(e){case"focusin":return Mr=Do(Mr,t,e,n,r,s),!0;case"dragenter":return Lr=Do(Lr,t,e,n,r,s),!0;case"mouseover":return Vr=Do(Vr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fa.set(i,Do(fa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ma.set(i,Do(ma.get(i)||null,t,e,n,r,s)),!0}return!1}function Y_(t){var e=Ss(t.target);if(e!==null){var n=Ws(e);if(n!==null){if(e=n.tag,e===13){if(e=V_(n),e!==null){t.blockedOn=e,Q_(t.priority,function(){H_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ch=r,n.target.dispatchEvent(r),ch=null}else return e=Ba(n),e!==null&&Uf(e),t.blockedOn=n,!1;e.shift()}return!0}function _g(t,e,n){Wl(t)&&n.delete(e)}function OS(){ph=!1,Mr!==null&&Wl(Mr)&&(Mr=null),Lr!==null&&Wl(Lr)&&(Lr=null),Vr!==null&&Wl(Vr)&&(Vr=null),fa.forEach(_g),ma.forEach(_g)}function jo(t,e){t.blockedOn===e&&(t.blockedOn=null,ph||(ph=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,OS)))}function pa(t){function e(s){return jo(s,t)}if(0<Il.length){jo(Il[0],t);for(var n=1;n<Il.length;n++){var r=Il[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Mr!==null&&jo(Mr,t),Lr!==null&&jo(Lr,t),Vr!==null&&jo(Vr,t),fa.forEach(e),ma.forEach(e),n=0;n<Nr.length;n++)r=Nr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nr.length&&(n=Nr[0],n.blockedOn===null);)Y_(n),n.blockedOn===null&&Nr.shift()}var Ci=cr.ReactCurrentBatchConfig,pu=!0;function MS(t,e,n,r){var s=ve,i=Ci.transition;Ci.transition=null;try{ve=1,zf(t,e,n,r)}finally{ve=s,Ci.transition=i}}function LS(t,e,n,r){var s=ve,i=Ci.transition;Ci.transition=null;try{ve=4,zf(t,e,n,r)}finally{ve=s,Ci.transition=i}}function zf(t,e,n,r){if(pu){var s=gh(t,e,n,r);if(s===null)Nd(t,e,r,gu,n),vg(t,r);else if(bS(s,t,e,n,r))r.stopPropagation();else if(vg(t,r),e&4&&-1<jS.indexOf(t)){for(;s!==null;){var i=Ba(s);if(i!==null&&G_(i),i=gh(t,e,n,r),i===null&&Nd(t,e,r,gu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Nd(t,e,r,null,n)}}var gu=null;function gh(t,e,n,r){if(gu=null,t=Lf(r),t=Ss(t),t!==null)if(e=Ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=V_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gu=t,null}function X_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SS()){case Vf:return 1;case B_:return 4;case fu:case xS:return 16;case $_:return 536870912;default:return 16}default:return 16}}var Dr=null,Bf=null,ql=null;function J_(){if(ql)return ql;var t,e=Bf,n=e.length,r,s="value"in Dr?Dr.value:Dr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ql=s.slice(t,1<r?1-r:void 0)}function Gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sl(){return!0}function wg(){return!1}function qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sl:wg,this.isPropagationStopped=wg,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),e}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$f=qt(to),za=be({},to,{view:0,detail:0}),VS=qt(za),yd,vd,bo,lc=be({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bo&&(bo&&t.type==="mousemove"?(yd=t.screenX-bo.screenX,vd=t.screenY-bo.screenY):vd=yd=0,bo=t),yd)},movementY:function(t){return"movementY"in t?t.movementY:vd}}),Eg=qt(lc),FS=be({},lc,{dataTransfer:0}),US=qt(FS),zS=be({},za,{relatedTarget:0}),_d=qt(zS),BS=be({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),$S=qt(BS),WS=be({},to,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qS=qt(WS),GS=be({},to,{data:0}),Tg=qt(GS),HS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QS[t])?!!e[t]:!1}function Wf(){return YS}var XS=be({},za,{key:function(t){if(t.key){var e=HS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wf,charCode:function(t){return t.type==="keypress"?Gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JS=qt(XS),ZS=be({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ig=qt(ZS),ex=be({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wf}),tx=qt(ex),nx=be({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),rx=qt(nx),sx=be({},lc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ix=qt(sx),ox=[9,13,27,32],qf=nr&&"CompositionEvent"in window,Xo=null;nr&&"documentMode"in document&&(Xo=document.documentMode);var ax=nr&&"TextEvent"in window&&!Xo,Z_=nr&&(!qf||Xo&&8<Xo&&11>=Xo),Sg=" ",xg=!1;function ew(t,e){switch(t){case"keyup":return ox.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pi=!1;function lx(t,e){switch(t){case"compositionend":return tw(e);case"keypress":return e.which!==32?null:(xg=!0,Sg);case"textInput":return t=e.data,t===Sg&&xg?null:t;default:return null}}function ux(t,e){if(pi)return t==="compositionend"||!qf&&ew(t,e)?(t=J_(),ql=Bf=Dr=null,pi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Z_&&e.locale!=="ko"?null:e.data;default:return null}}var cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ng(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cx[t.type]:e==="textarea"}function nw(t,e,n,r){j_(r),e=yu(e,"onChange"),0<e.length&&(n=new $f("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jo=null,ga=null;function dx(t){fw(t,0)}function uc(t){var e=vi(t);if(N_(e))return t}function hx(t,e){if(t==="change")return e}var rw=!1;if(nr){var wd;if(nr){var Ed="oninput"in document;if(!Ed){var Ag=document.createElement("div");Ag.setAttribute("oninput","return;"),Ed=typeof Ag.oninput=="function"}wd=Ed}else wd=!1;rw=wd&&(!document.documentMode||9<document.documentMode)}function kg(){Jo&&(Jo.detachEvent("onpropertychange",sw),ga=Jo=null)}function sw(t){if(t.propertyName==="value"&&uc(ga)){var e=[];nw(e,ga,t,Lf(t)),L_(dx,e)}}function fx(t,e,n){t==="focusin"?(kg(),Jo=e,ga=n,Jo.attachEvent("onpropertychange",sw)):t==="focusout"&&kg()}function mx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uc(ga)}function px(t,e){if(t==="click")return uc(e)}function gx(t,e){if(t==="input"||t==="change")return uc(e)}function yx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:yx;function ya(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jd.call(e,s)||!gn(t[s],e[s]))return!1}return!0}function Cg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pg(t,e){var n=Cg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cg(n)}}function iw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ow(){for(var t=window,e=cu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cu(t.document)}return e}function Gf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vx(t){var e=ow(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iw(n.ownerDocument.documentElement,n)){if(r!==null&&Gf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Pg(n,i);var o=Pg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _x=nr&&"documentMode"in document&&11>=document.documentMode,gi=null,yh=null,Zo=null,vh=!1;function Rg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vh||gi==null||gi!==cu(r)||(r=gi,"selectionStart"in r&&Gf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&ya(Zo,r)||(Zo=r,r=yu(yh,"onSelect"),0<r.length&&(e=new $f("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gi)))}function xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yi={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionend:xl("Transition","TransitionEnd")},Td={},aw={};nr&&(aw=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function cc(t){if(Td[t])return Td[t];if(!yi[t])return t;var e=yi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aw)return Td[t]=e[n];return t}var lw=cc("animationend"),uw=cc("animationiteration"),cw=cc("animationstart"),dw=cc("transitionend"),hw=new Map,Dg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(t,e){hw.set(t,e),$s(e,[t])}for(var Id=0;Id<Dg.length;Id++){var Sd=Dg[Id],wx=Sd.toLowerCase(),Ex=Sd[0].toUpperCase()+Sd.slice(1);ss(wx,"on"+Ex)}ss(lw,"onAnimationEnd");ss(uw,"onAnimationIteration");ss(cw,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss(dw,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function jg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wS(r,e,void 0,t),t.currentTarget=null}function fw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;jg(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;jg(s,l,d),i=c}}}if(hu)throw t=fh,hu=!1,fh=null,t}function Ne(t,e){var n=e[Ih];n===void 0&&(n=e[Ih]=new Set);var r=t+"__bubble";n.has(r)||(mw(e,t,2,!1),n.add(r))}function xd(t,e,n){var r=0;e&&(r|=4),mw(n,t,r,e)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function va(t){if(!t[Nl]){t[Nl]=!0,E_.forEach(function(n){n!=="selectionchange"&&(Tx.has(n)||xd(n,!1,t),xd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nl]||(e[Nl]=!0,xd("selectionchange",!1,e))}}function mw(t,e,n,r){switch(X_(e)){case 1:var s=MS;break;case 4:s=LS;break;default:s=zf}n=s.bind(null,e,n,t),s=void 0,!hh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Nd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ss(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}L_(function(){var d=i,f=Lf(n),p=[];e:{var g=hw.get(t);if(g!==void 0){var N=$f,A=t;switch(t){case"keypress":if(Gl(n)===0)break e;case"keydown":case"keyup":N=JS;break;case"focusin":A="focus",N=_d;break;case"focusout":A="blur",N=_d;break;case"beforeblur":case"afterblur":N=_d;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=US;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=tx;break;case lw:case uw:case cw:N=$S;break;case dw:N=rx;break;case"scroll":N=VS;break;case"wheel":N=ix;break;case"copy":case"cut":case"paste":N=qS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Ig}var R=(e&4)!==0,P=!R&&t==="scroll",S=R?g!==null?g+"Capture":null:g;R=[];for(var E=d,x;E!==null;){x=E;var D=x.stateNode;if(x.tag===5&&D!==null&&(x=D,S!==null&&(D=ha(E,S),D!=null&&R.push(_a(E,D,x)))),P)break;E=E.return}0<R.length&&(g=new N(g,A,null,n,f),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",g&&n!==ch&&(A=n.relatedTarget||n.fromElement)&&(Ss(A)||A[rr]))break e;if((N||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,N?(A=n.relatedTarget||n.toElement,N=d,A=A?Ss(A):null,A!==null&&(P=Ws(A),A!==P||A.tag!==5&&A.tag!==6)&&(A=null)):(N=null,A=d),N!==A)){if(R=Eg,D="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(R=Ig,D="onPointerLeave",S="onPointerEnter",E="pointer"),P=N==null?g:vi(N),x=A==null?g:vi(A),g=new R(D,E+"leave",N,n,f),g.target=P,g.relatedTarget=x,D=null,Ss(f)===d&&(R=new R(S,E+"enter",A,n,f),R.target=x,R.relatedTarget=P,D=R),P=D,N&&A)t:{for(R=N,S=A,E=0,x=R;x;x=ai(x))E++;for(x=0,D=S;D;D=ai(D))x++;for(;0<E-x;)R=ai(R),E--;for(;0<x-E;)S=ai(S),x--;for(;E--;){if(R===S||S!==null&&R===S.alternate)break t;R=ai(R),S=ai(S)}R=null}else R=null;N!==null&&bg(p,g,N,R,!1),A!==null&&P!==null&&bg(p,P,A,R,!0)}}e:{if(g=d?vi(d):window,N=g.nodeName&&g.nodeName.toLowerCase(),N==="select"||N==="input"&&g.type==="file")var V=hx;else if(Ng(g))if(rw)V=gx;else{V=mx;var O=fx}else(N=g.nodeName)&&N.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=px);if(V&&(V=V(t,d))){nw(p,V,n,f);break e}O&&O(t,g,d),t==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&ih(g,"number",g.value)}switch(O=d?vi(d):window,t){case"focusin":(Ng(O)||O.contentEditable==="true")&&(gi=O,yh=d,Zo=null);break;case"focusout":Zo=yh=gi=null;break;case"mousedown":vh=!0;break;case"contextmenu":case"mouseup":case"dragend":vh=!1,Rg(p,n,f);break;case"selectionchange":if(_x)break;case"keydown":case"keyup":Rg(p,n,f)}var v;if(qf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else pi?ew(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Z_&&n.locale!=="ko"&&(pi||y!=="onCompositionStart"?y==="onCompositionEnd"&&pi&&(v=J_()):(Dr=f,Bf="value"in Dr?Dr.value:Dr.textContent,pi=!0)),O=yu(d,y),0<O.length&&(y=new Tg(y,t,null,n,f),p.push({event:y,listeners:O}),v?y.data=v:(v=tw(n),v!==null&&(y.data=v)))),(v=ax?lx(t,n):ux(t,n))&&(d=yu(d,"onBeforeInput"),0<d.length&&(f=new Tg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=v))}fw(p,e)})}function _a(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ha(t,n),i!=null&&r.unshift(_a(t,i,s)),i=ha(t,e),i!=null&&r.push(_a(t,i,s))),t=t.return}return r}function ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=ha(n,i),c!=null&&o.unshift(_a(n,c,l))):s||(c=ha(n,i),c!=null&&o.push(_a(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ix=/\r\n?/g,Sx=/\u0000|\uFFFD/g;function Og(t){return(typeof t=="string"?t:""+t).replace(Ix,`
`).replace(Sx,"")}function Al(t,e,n){if(e=Og(e),Og(t)!==e&&n)throw Error(W(425))}function vu(){}var _h=null,wh=null;function Eh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Th=typeof setTimeout=="function"?setTimeout:void 0,xx=typeof clearTimeout=="function"?clearTimeout:void 0,Mg=typeof Promise=="function"?Promise:void 0,Nx=typeof queueMicrotask=="function"?queueMicrotask:typeof Mg<"u"?function(t){return Mg.resolve(null).then(t).catch(Ax)}:Th;function Ax(t){setTimeout(function(){throw t})}function Ad(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),pa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);pa(e)}function Fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var no=Math.random().toString(36).slice(2),Cn="__reactFiber$"+no,wa="__reactProps$"+no,rr="__reactContainer$"+no,Ih="__reactEvents$"+no,kx="__reactListeners$"+no,Cx="__reactHandles$"+no;function Ss(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lg(t);t!==null;){if(n=t[Cn])return n;t=Lg(t)}return e}t=n,n=t.parentNode}return null}function Ba(t){return t=t[Cn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function dc(t){return t[wa]||null}var Sh=[],_i=-1;function is(t){return{current:t}}function ke(t){0>_i||(t.current=Sh[_i],Sh[_i]=null,_i--)}function Te(t,e){_i++,Sh[_i]=t.current,t.current=e}var Yr={},wt=is(Yr),jt=is(!1),Rs=Yr;function Vi(t,e){var n=t.type.contextTypes;if(!n)return Yr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function _u(){ke(jt),ke(wt)}function Vg(t,e,n){if(wt.current!==Yr)throw Error(W(168));Te(wt,e),Te(jt,n)}function pw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,fS(t)||"Unknown",s));return be({},n,r)}function wu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yr,Rs=wt.current,Te(wt,t),Te(jt,jt.current),!0}function Fg(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=pw(t,e,Rs),r.__reactInternalMemoizedMergedChildContext=t,ke(jt),ke(wt),Te(wt,t)):ke(jt),Te(jt,n)}var Hn=null,hc=!1,kd=!1;function gw(t){Hn===null?Hn=[t]:Hn.push(t)}function Px(t){hc=!0,gw(t)}function os(){if(!kd&&Hn!==null){kd=!0;var t=0,e=ve;try{var n=Hn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hn=null,hc=!1}catch(s){throw Hn!==null&&(Hn=Hn.slice(t+1)),z_(Vf,os),s}finally{ve=e,kd=!1}}return null}var wi=[],Ei=0,Eu=null,Tu=0,Qt=[],Yt=0,Ds=null,Kn=1,Qn="";function _s(t,e){wi[Ei++]=Tu,wi[Ei++]=Eu,Eu=t,Tu=e}function yw(t,e,n){Qt[Yt++]=Kn,Qt[Yt++]=Qn,Qt[Yt++]=Ds,Ds=t;var r=Kn;t=Qn;var s=32-mn(r)-1;r&=~(1<<s),n+=1;var i=32-mn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Kn=1<<32-mn(e)+s|n<<s|r,Qn=i+t}else Kn=1<<i|n<<s|r,Qn=t}function Hf(t){t.return!==null&&(_s(t,1),yw(t,1,0))}function Kf(t){for(;t===Eu;)Eu=wi[--Ei],wi[Ei]=null,Tu=wi[--Ei],wi[Ei]=null;for(;t===Ds;)Ds=Qt[--Yt],Qt[Yt]=null,Qn=Qt[--Yt],Qt[Yt]=null,Kn=Qt[--Yt],Qt[Yt]=null}var Bt=null,Ut=null,Ce=!1,hn=null;function vw(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ug(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bt=t,Ut=Fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bt=t,Ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ds!==null?{id:Kn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bt=t,Ut=null,!0):!1;default:return!1}}function xh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nh(t){if(Ce){var e=Ut;if(e){var n=e;if(!Ug(t,e)){if(xh(t))throw Error(W(418));e=Fr(n.nextSibling);var r=Bt;e&&Ug(t,e)?vw(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Bt=t)}}else{if(xh(t))throw Error(W(418));t.flags=t.flags&-4097|2,Ce=!1,Bt=t}}}function zg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bt=t}function kl(t){if(t!==Bt)return!1;if(!Ce)return zg(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Eh(t.type,t.memoizedProps)),e&&(e=Ut)){if(xh(t))throw _w(),Error(W(418));for(;e;)vw(t,e),e=Fr(e.nextSibling)}if(zg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ut=Fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ut=null}}else Ut=Bt?Fr(t.stateNode.nextSibling):null;return!0}function _w(){for(var t=Ut;t;)t=Fr(t.nextSibling)}function Fi(){Ut=Bt=null,Ce=!1}function Qf(t){hn===null?hn=[t]:hn.push(t)}var Rx=cr.ReactCurrentBatchConfig;function Oo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Cl(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bg(t){var e=t._init;return e(t._payload)}function ww(t){function e(S,E){if(t){var x=S.deletions;x===null?(S.deletions=[E],S.flags|=16):x.push(E)}}function n(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function r(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function s(S,E){return S=$r(S,E),S.index=0,S.sibling=null,S}function i(S,E,x){return S.index=x,t?(x=S.alternate,x!==null?(x=x.index,x<E?(S.flags|=2,E):x):(S.flags|=2,E)):(S.flags|=1048576,E)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,E,x,D){return E===null||E.tag!==6?(E=Od(x,S.mode,D),E.return=S,E):(E=s(E,x),E.return=S,E)}function c(S,E,x,D){var V=x.type;return V===mi?f(S,E,x.props.children,D,x.key):E!==null&&(E.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Sr&&Bg(V)===E.type)?(D=s(E,x.props),D.ref=Oo(S,E,x),D.return=S,D):(D=Zl(x.type,x.key,x.props,null,S.mode,D),D.ref=Oo(S,E,x),D.return=S,D)}function d(S,E,x,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==x.containerInfo||E.stateNode.implementation!==x.implementation?(E=Md(x,S.mode,D),E.return=S,E):(E=s(E,x.children||[]),E.return=S,E)}function f(S,E,x,D,V){return E===null||E.tag!==7?(E=Ps(x,S.mode,D,V),E.return=S,E):(E=s(E,x),E.return=S,E)}function p(S,E,x){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Od(""+E,S.mode,x),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case vl:return x=Zl(E.type,E.key,E.props,null,S.mode,x),x.ref=Oo(S,null,E),x.return=S,x;case fi:return E=Md(E,S.mode,x),E.return=S,E;case Sr:var D=E._init;return p(S,D(E._payload),x)}if(Uo(E)||Po(E))return E=Ps(E,S.mode,x,null),E.return=S,E;Cl(S,E)}return null}function g(S,E,x,D){var V=E!==null?E.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return V!==null?null:l(S,E,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case vl:return x.key===V?c(S,E,x,D):null;case fi:return x.key===V?d(S,E,x,D):null;case Sr:return V=x._init,g(S,E,V(x._payload),D)}if(Uo(x)||Po(x))return V!==null?null:f(S,E,x,D,null);Cl(S,x)}return null}function N(S,E,x,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return S=S.get(x)||null,l(E,S,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case vl:return S=S.get(D.key===null?x:D.key)||null,c(E,S,D,V);case fi:return S=S.get(D.key===null?x:D.key)||null,d(E,S,D,V);case Sr:var O=D._init;return N(S,E,x,O(D._payload),V)}if(Uo(D)||Po(D))return S=S.get(x)||null,f(E,S,D,V,null);Cl(E,D)}return null}function A(S,E,x,D){for(var V=null,O=null,v=E,y=E=0,w=null;v!==null&&y<x.length;y++){v.index>y?(w=v,v=null):w=v.sibling;var T=g(S,v,x[y],D);if(T===null){v===null&&(v=w);break}t&&v&&T.alternate===null&&e(S,v),E=i(T,E,y),O===null?V=T:O.sibling=T,O=T,v=w}if(y===x.length)return n(S,v),Ce&&_s(S,y),V;if(v===null){for(;y<x.length;y++)v=p(S,x[y],D),v!==null&&(E=i(v,E,y),O===null?V=v:O.sibling=v,O=v);return Ce&&_s(S,y),V}for(v=r(S,v);y<x.length;y++)w=N(v,S,y,x[y],D),w!==null&&(t&&w.alternate!==null&&v.delete(w.key===null?y:w.key),E=i(w,E,y),O===null?V=w:O.sibling=w,O=w);return t&&v.forEach(function(k){return e(S,k)}),Ce&&_s(S,y),V}function R(S,E,x,D){var V=Po(x);if(typeof V!="function")throw Error(W(150));if(x=V.call(x),x==null)throw Error(W(151));for(var O=V=null,v=E,y=E=0,w=null,T=x.next();v!==null&&!T.done;y++,T=x.next()){v.index>y?(w=v,v=null):w=v.sibling;var k=g(S,v,T.value,D);if(k===null){v===null&&(v=w);break}t&&v&&k.alternate===null&&e(S,v),E=i(k,E,y),O===null?V=k:O.sibling=k,O=k,v=w}if(T.done)return n(S,v),Ce&&_s(S,y),V;if(v===null){for(;!T.done;y++,T=x.next())T=p(S,T.value,D),T!==null&&(E=i(T,E,y),O===null?V=T:O.sibling=T,O=T);return Ce&&_s(S,y),V}for(v=r(S,v);!T.done;y++,T=x.next())T=N(v,S,y,T.value,D),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?y:T.key),E=i(T,E,y),O===null?V=T:O.sibling=T,O=T);return t&&v.forEach(function(C){return e(S,C)}),Ce&&_s(S,y),V}function P(S,E,x,D){if(typeof x=="object"&&x!==null&&x.type===mi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case vl:e:{for(var V=x.key,O=E;O!==null;){if(O.key===V){if(V=x.type,V===mi){if(O.tag===7){n(S,O.sibling),E=s(O,x.props.children),E.return=S,S=E;break e}}else if(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Sr&&Bg(V)===O.type){n(S,O.sibling),E=s(O,x.props),E.ref=Oo(S,O,x),E.return=S,S=E;break e}n(S,O);break}else e(S,O);O=O.sibling}x.type===mi?(E=Ps(x.props.children,S.mode,D,x.key),E.return=S,S=E):(D=Zl(x.type,x.key,x.props,null,S.mode,D),D.ref=Oo(S,E,x),D.return=S,S=D)}return o(S);case fi:e:{for(O=x.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===x.containerInfo&&E.stateNode.implementation===x.implementation){n(S,E.sibling),E=s(E,x.children||[]),E.return=S,S=E;break e}else{n(S,E);break}else e(S,E);E=E.sibling}E=Md(x,S.mode,D),E.return=S,S=E}return o(S);case Sr:return O=x._init,P(S,E,O(x._payload),D)}if(Uo(x))return A(S,E,x,D);if(Po(x))return R(S,E,x,D);Cl(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,E!==null&&E.tag===6?(n(S,E.sibling),E=s(E,x),E.return=S,S=E):(n(S,E),E=Od(x,S.mode,D),E.return=S,S=E),o(S)):n(S,E)}return P}var Ui=ww(!0),Ew=ww(!1),Iu=is(null),Su=null,Ti=null,Yf=null;function Xf(){Yf=Ti=Su=null}function Jf(t){var e=Iu.current;ke(Iu),t._currentValue=e}function Ah(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pi(t,e){Su=t,Yf=Ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(Yf!==t)if(t={context:t,memoizedValue:e,next:null},Ti===null){if(Su===null)throw Error(W(308));Ti=t,Su.dependencies={lanes:0,firstContext:t}}else Ti=Ti.next=t;return e}var xs=null;function Zf(t){xs===null?xs=[t]:xs.push(t)}function Tw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Zf(e)):(n.next=s.next,s.next=n),e.interleaved=n,sr(t,r)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xr=!1;function em(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,sr(t,n)}return s=r.interleaved,s===null?(e.next=e,Zf(r)):(e.next=s.next,s.next=e),r.interleaved=e,sr(t,n)}function Hl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ff(t,n)}}function $g(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xu(t,e,n,r){var s=t.updateQueue;xr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,f=d=c=null,l=i;do{var g=l.lane,N=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:N,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,R=l;switch(g=e,N=n,R.tag){case 1:if(A=R.payload,typeof A=="function"){p=A.call(N,p,g);break e}p=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=R.payload,g=typeof A=="function"?A.call(N,p,g):A,g==null)break e;p=be({},p,g);break e;case 2:xr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else N={eventTime:N,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=N,c=p):f=f.next=N,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);bs|=o,t.lanes=o,t.memoizedState=p}}function Wg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var $a={},bn=is($a),Ea=is($a),Ta=is($a);function Ns(t){if(t===$a)throw Error(W(174));return t}function tm(t,e){switch(Te(Ta,e),Te(Ea,t),Te(bn,$a),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ah(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ah(e,t)}ke(bn),Te(bn,e)}function zi(){ke(bn),ke(Ea),ke(Ta)}function Sw(t){Ns(Ta.current);var e=Ns(bn.current),n=ah(e,t.type);e!==n&&(Te(Ea,t),Te(bn,n))}function nm(t){Ea.current===t&&(ke(bn),ke(Ea))}var Re=is(0);function Nu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cd=[];function rm(){for(var t=0;t<Cd.length;t++)Cd[t]._workInProgressVersionPrimary=null;Cd.length=0}var Kl=cr.ReactCurrentDispatcher,Pd=cr.ReactCurrentBatchConfig,js=0,De=null,He=null,Je=null,Au=!1,ea=!1,Ia=0,Dx=0;function ft(){throw Error(W(321))}function sm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gn(t[n],e[n]))return!1;return!0}function im(t,e,n,r,s,i){if(js=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kl.current=t===null||t.memoizedState===null?Mx:Lx,t=n(r,s),ea){i=0;do{if(ea=!1,Ia=0,25<=i)throw Error(W(301));i+=1,Je=He=null,e.updateQueue=null,Kl.current=Vx,t=n(r,s)}while(ea)}if(Kl.current=ku,e=He!==null&&He.next!==null,js=0,Je=He=De=null,Au=!1,e)throw Error(W(300));return t}function om(){var t=Ia!==0;return Ia=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?De.memoizedState=Je=t:Je=Je.next=t,Je}function tn(){if(He===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Je===null?De.memoizedState:Je.next;if(e!==null)Je=e,He=t;else{if(t===null)throw Error(W(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Je===null?De.memoizedState=Je=t:Je=Je.next=t}return Je}function Sa(t,e){return typeof e=="function"?e(t):e}function Rd(t){var e=tn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((js&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,De.lanes|=f,bs|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,gn(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,bs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dd(t){var e=tn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);gn(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function xw(){}function Nw(t,e){var n=De,r=tn(),s=e(),i=!gn(r.memoizedState,s);if(i&&(r.memoizedState=s,Rt=!0),r=r.queue,am(Cw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,xa(9,kw.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(W(349));js&30||Aw(n,e,s)}return s}function Aw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kw(t,e,n,r){e.value=n,e.getSnapshot=r,Pw(e)&&Rw(t)}function Cw(t,e,n){return n(function(){Pw(e)&&Rw(t)})}function Pw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gn(t,n)}catch{return!0}}function Rw(t){var e=sr(t,1);e!==null&&pn(e,t,1,-1)}function qg(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:t},e.queue=t,t=t.dispatch=Ox.bind(null,De,t),[e.memoizedState,t]}function xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dw(){return tn().memoizedState}function Ql(t,e,n,r){var s=An();De.flags|=t,s.memoizedState=xa(1|e,n,void 0,r===void 0?null:r)}function fc(t,e,n,r){var s=tn();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&sm(r,o.deps)){s.memoizedState=xa(e,n,i,r);return}}De.flags|=t,s.memoizedState=xa(1|e,n,i,r)}function Gg(t,e){return Ql(8390656,8,t,e)}function am(t,e){return fc(2048,8,t,e)}function jw(t,e){return fc(4,2,t,e)}function bw(t,e){return fc(4,4,t,e)}function Ow(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Mw(t,e,n){return n=n!=null?n.concat([t]):null,fc(4,4,Ow.bind(null,e,t),n)}function lm(){}function Lw(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vw(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Fw(t,e,n){return js&21?(gn(n,e)||(n=W_(),De.lanes|=n,bs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function jx(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Pd.transition;Pd.transition={};try{t(!1),e()}finally{ve=n,Pd.transition=r}}function Uw(){return tn().memoizedState}function bx(t,e,n){var r=Br(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zw(t))Bw(e,n);else if(n=Tw(t,e,n,r),n!==null){var s=St();pn(n,t,r,s),$w(n,e,r)}}function Ox(t,e,n){var r=Br(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zw(t))Bw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,gn(l,o)){var c=e.interleaved;c===null?(s.next=s,Zf(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Tw(t,e,s,r),n!==null&&(s=St(),pn(n,t,r,s),$w(n,e,r))}}function zw(t){var e=t.alternate;return t===De||e!==null&&e===De}function Bw(t,e){ea=Au=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $w(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ff(t,n)}}var ku={readContext:en,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},Mx={readContext:en,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:Gg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ql(4194308,4,Ow.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ql(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ql(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=An();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bx.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:qg,useDebugValue:lm,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=qg(!1),e=t[0];return t=jx.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=An();if(Ce){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Ze===null)throw Error(W(349));js&30||Aw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Gg(Cw.bind(null,r,i,t),[t]),r.flags|=2048,xa(9,kw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=An(),e=Ze.identifierPrefix;if(Ce){var n=Qn,r=Kn;n=(r&~(1<<32-mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ia++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Dx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Lx={readContext:en,useCallback:Lw,useContext:en,useEffect:am,useImperativeHandle:Mw,useInsertionEffect:jw,useLayoutEffect:bw,useMemo:Vw,useReducer:Rd,useRef:Dw,useState:function(){return Rd(Sa)},useDebugValue:lm,useDeferredValue:function(t){var e=tn();return Fw(e,He.memoizedState,t)},useTransition:function(){var t=Rd(Sa)[0],e=tn().memoizedState;return[t,e]},useMutableSource:xw,useSyncExternalStore:Nw,useId:Uw,unstable_isNewReconciler:!1},Vx={readContext:en,useCallback:Lw,useContext:en,useEffect:am,useImperativeHandle:Mw,useInsertionEffect:jw,useLayoutEffect:bw,useMemo:Vw,useReducer:Dd,useRef:Dw,useState:function(){return Dd(Sa)},useDebugValue:lm,useDeferredValue:function(t){var e=tn();return He===null?e.memoizedState=t:Fw(e,He.memoizedState,t)},useTransition:function(){var t=Dd(Sa)[0],e=tn().memoizedState;return[t,e]},useMutableSource:xw,useSyncExternalStore:Nw,useId:Uw,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mc={isMounted:function(t){return(t=t._reactInternals)?Ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=St(),s=Br(t),i=Zn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ur(t,i,s),e!==null&&(pn(e,t,s,r),Hl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=St(),s=Br(t),i=Zn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ur(t,i,s),e!==null&&(pn(e,t,s,r),Hl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),r=Br(t),s=Zn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ur(t,s,r),e!==null&&(pn(e,t,r,n),Hl(e,t,r))}};function Hg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ya(n,r)||!ya(s,i):!0}function Ww(t,e,n){var r=!1,s=Yr,i=e.contextType;return typeof i=="object"&&i!==null?i=en(i):(s=bt(e)?Rs:wt.current,r=e.contextTypes,i=(r=r!=null)?Vi(t,s):Yr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Kg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mc.enqueueReplaceState(e,e.state,null)}function Ch(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},em(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=en(i):(i=bt(e)?Rs:wt.current,s.context=Vi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(kh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&mc.enqueueReplaceState(s,s.state,null),xu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Bi(t,e){try{var n="",r=e;do n+=hS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function jd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ph(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Fx=typeof WeakMap=="function"?WeakMap:Map;function qw(t,e,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pu||(Pu=!0,Uh=r),Ph(t,e)},n}function Gw(t,e,n){n=Zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ph(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ph(t,e),typeof r!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Qg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Fx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Zx.bind(null,t,e,n),e.then(t,t))}function Yg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zn(-1,1),e.tag=2,Ur(n,e,1))),n.lanes|=1),t)}var Ux=cr.ReactCurrentOwner,Rt=!1;function Tt(t,e,n,r){e.child=t===null?Ew(e,null,n,r):Ui(e,t.child,n,r)}function Jg(t,e,n,r,s){n=n.render;var i=e.ref;return Pi(e,s),r=im(t,e,n,r,i,s),n=om(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(Ce&&n&&Hf(e),e.flags|=1,Tt(t,e,r,s),e.child)}function Zg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Hw(t,e,i,r,s)):(t=Zl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ya,n(o,r)&&t.ref===e.ref)return ir(t,e,s)}return e.flags|=1,t=$r(i,r),t.ref=e.ref,t.return=e,e.child=t}function Hw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ya(i,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,ir(t,e,s)}return Rh(t,e,n,r,s)}function Kw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Si,Lt),Lt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Si,Lt),Lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Si,Lt),Lt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Si,Lt),Lt|=r;return Tt(t,e,s,n),e.child}function Qw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rh(t,e,n,r,s){var i=bt(n)?Rs:wt.current;return i=Vi(e,i),Pi(e,s),n=im(t,e,n,r,i,s),r=om(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(Ce&&r&&Hf(e),e.flags|=1,Tt(t,e,n,s),e.child)}function ey(t,e,n,r,s){if(bt(n)){var i=!0;wu(e)}else i=!1;if(Pi(e,s),e.stateNode===null)Yl(t,e),Ww(e,n,r),Ch(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=en(d):(d=bt(n)?Rs:wt.current,d=Vi(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Kg(e,o,r,d),xr=!1;var g=e.memoizedState;o.state=g,xu(e,r,o,s),c=e.memoizedState,l!==r||g!==c||jt.current||xr?(typeof f=="function"&&(kh(e,n,f,r),c=e.memoizedState),(l=xr||Hg(e,n,l,r,g,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Iw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:cn(e.type,l),o.props=d,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=en(c):(c=bt(n)?Rs:wt.current,c=Vi(e,c));var N=n.getDerivedStateFromProps;(f=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==c)&&Kg(e,o,r,c),xr=!1,g=e.memoizedState,o.state=g,xu(e,r,o,s);var A=e.memoizedState;l!==p||g!==A||jt.current||xr?(typeof N=="function"&&(kh(e,n,N,r),A=e.memoizedState),(d=xr||Hg(e,n,d,r,g,A,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Dh(t,e,n,r,i,s)}function Dh(t,e,n,r,s,i){Qw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Fg(e,n,!1),ir(t,e,i);r=e.stateNode,Ux.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ui(e,t.child,null,i),e.child=Ui(e,null,l,i)):Tt(t,e,l,i),e.memoizedState=r.state,s&&Fg(e,n,!0),e.child}function Yw(t){var e=t.stateNode;e.pendingContext?Vg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Vg(t,e.context,!1),tm(t,e.containerInfo)}function ty(t,e,n,r,s){return Fi(),Qf(s),e.flags|=256,Tt(t,e,n,r),e.child}var jh={dehydrated:null,treeContext:null,retryLane:0};function bh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xw(t,e,n){var r=e.pendingProps,s=Re.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Re,s&1),t===null)return Nh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yc(o,r,0,null),t=Ps(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=bh(n),e.memoizedState=jh,t):um(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return zx(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=$r(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=$r(l,i):(i=Ps(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?bh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=jh,r}return i=t.child,t=i.sibling,r=$r(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function um(t,e){return e=yc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pl(t,e,n,r){return r!==null&&Qf(r),Ui(e,t.child,null,n),t=um(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=jd(Error(W(422))),Pl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=yc({mode:"visible",children:r.children},s,0,null),i=Ps(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ui(e,t.child,null,o),e.child.memoizedState=bh(o),e.memoizedState=jh,i);if(!(e.mode&1))return Pl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(W(419)),r=jd(i,r,void 0),Pl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Rt||l){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,sr(t,s),pn(r,t,s,-1))}return pm(),r=jd(Error(W(421))),Pl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=e1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ut=Fr(s.nextSibling),Bt=e,Ce=!0,hn=null,t!==null&&(Qt[Yt++]=Kn,Qt[Yt++]=Qn,Qt[Yt++]=Ds,Kn=t.id,Qn=t.overflow,Ds=e),e=um(e,r.children),e.flags|=4096,e)}function ny(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ah(t.return,e,n)}function bd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Jw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Tt(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ny(t,n,e);else if(t.tag===19)ny(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Nu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),bd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Nu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}bd(e,!0,n,null,i);break;case"together":bd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=$r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Bx(t,e,n){switch(e.tag){case 3:Yw(e),Fi();break;case 5:Sw(e);break;case 1:bt(e.type)&&wu(e);break;case 4:tm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Iu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?Xw(t,e,n):(Te(Re,Re.current&1),t=ir(t,e,n),t!==null?t.sibling:null);Te(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Jw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,Kw(t,e,n)}return ir(t,e,n)}var Zw,Oh,e0,t0;Zw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Oh=function(){};e0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ns(bn.current);var i=null;switch(n){case"input":s=rh(t,s),r=rh(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=oh(t,s),r=oh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=vu)}lh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ca.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ca.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ne("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};t0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $x(t,e,n){var r=e.pendingProps;switch(Kf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return bt(e.type)&&_u(),mt(e),null;case 3:return r=e.stateNode,zi(),ke(jt),ke(wt),rm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(kl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&($h(hn),hn=null))),Oh(t,e),mt(e),null;case 5:nm(e);var s=Ns(Ta.current);if(n=e.type,t!==null&&e.stateNode!=null)e0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return mt(e),null}if(t=Ns(bn.current),kl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Cn]=e,r[wa]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<Bo.length;s++)Ne(Bo[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":dg(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":fg(r,i),Ne("invalid",r)}lh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Al(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Al(r.textContent,l,t),s=["children",""+l]):ca.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":_l(r),hg(r,i,!0);break;case"textarea":_l(r),mg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=vu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=C_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cn]=e,t[wa]=r,Zw(t,e,!1,!1),e.stateNode=t;e:{switch(o=uh(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<Bo.length;s++)Ne(Bo[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":dg(t,r),s=rh(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":fg(t,r),s=oh(t,r),Ne("invalid",t);break;default:s=r}lh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?D_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&P_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&da(t,c):typeof c=="number"&&da(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ca.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ne("scroll",t):c!=null&&jf(t,i,c,o))}switch(n){case"input":_l(t),hg(t,r,!1);break;case"textarea":_l(t),mg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ni(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ni(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=vu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)t0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Ns(Ta.current),Ns(bn.current),kl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(i=r.nodeValue!==n)&&(t=Bt,t!==null))switch(t.tag){case 3:Al(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Al(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return mt(e),null;case 13:if(ke(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Ut!==null&&e.mode&1&&!(e.flags&128))_w(),Fi(),e.flags|=98560,i=!1;else if(i=kl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[Cn]=e}else Fi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),i=!1}else hn!==null&&($h(hn),hn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Ke===0&&(Ke=3):pm())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return zi(),Oh(t,e),t===null&&va(e.stateNode.containerInfo),mt(e),null;case 10:return Jf(e.type._context),mt(e),null;case 17:return bt(e.type)&&_u(),mt(e),null;case 19:if(ke(Re),i=e.memoizedState,i===null)return mt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Mo(i,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nu(t),o!==null){for(e.flags|=128,Mo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>$i&&(e.flags|=128,r=!0,Mo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Nu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return mt(e),null}else 2*Ue()-i.renderingStartTime>$i&&n!==1073741824&&(e.flags|=128,r=!0,Mo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=Re.current,Te(Re,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return mm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function Wx(t,e){switch(Kf(e),e.tag){case 1:return bt(e.type)&&_u(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zi(),ke(jt),ke(wt),rm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nm(e),null;case 13:if(ke(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Fi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Re),null;case 4:return zi(),null;case 10:return Jf(e.type._context),null;case 22:case 23:return mm(),null;case 24:return null;default:return null}}var Rl=!1,vt=!1,qx=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ii(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Mh(t,e,n){try{n()}catch(r){Le(t,e,r)}}var ry=!1;function Gx(t,e){if(_h=pu,t=ow(),Gf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var N;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(N=p.firstChild)!==null;)g=p,p=N;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(c=o),(N=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=N}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wh={focusedElem:t,selectionRange:n},pu=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var R=A.memoizedProps,P=A.memoizedState,S=e.stateNode,E=S.getSnapshotBeforeUpdate(e.elementType===e.type?R:cn(e.type,R),P);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(D){Le(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return A=ry,ry=!1,A}function ta(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Mh(e,n,i)}s=s.next}while(s!==r)}}function pc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function n0(t){var e=t.alternate;e!==null&&(t.alternate=null,n0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[wa],delete e[Ih],delete e[kx],delete e[Cx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function r0(t){return t.tag===5||t.tag===3||t.tag===4}function sy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||r0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vu));else if(r!==4&&(t=t.child,t!==null))for(Vh(t,e,n),t=t.sibling;t!==null;)Vh(t,e,n),t=t.sibling}function Fh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Fh(t,e,n),t=t.sibling;t!==null;)Fh(t,e,n),t=t.sibling}var rt=null,dn=!1;function Er(t,e,n){for(n=n.child;n!==null;)s0(t,e,n),n=n.sibling}function s0(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(ac,n)}catch{}switch(n.tag){case 5:vt||Ii(n,e);case 6:var r=rt,s=dn;rt=null,Er(t,e,n),rt=r,dn=s,rt!==null&&(dn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(dn?(t=rt,n=n.stateNode,t.nodeType===8?Ad(t.parentNode,n):t.nodeType===1&&Ad(t,n),pa(t)):Ad(rt,n.stateNode));break;case 4:r=rt,s=dn,rt=n.stateNode.containerInfo,dn=!0,Er(t,e,n),rt=r,dn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Mh(n,e,o),s=s.next}while(s!==r)}Er(t,e,n);break;case 1:if(!vt&&(Ii(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,e,l)}Er(t,e,n);break;case 21:Er(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Er(t,e,n),vt=r):Er(t,e,n);break;default:Er(t,e,n)}}function iy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new qx),e.forEach(function(r){var s=t1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:rt=l.stateNode,dn=!1;break e;case 3:rt=l.stateNode.containerInfo,dn=!0;break e;case 4:rt=l.stateNode.containerInfo,dn=!0;break e}l=l.return}if(rt===null)throw Error(W(160));s0(i,o,s),rt=null,dn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Le(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)i0(e,t),e=e.sibling}function i0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(un(e,t),Nn(t),r&4){try{ta(3,t,t.return),pc(3,t)}catch(R){Le(t,t.return,R)}try{ta(5,t,t.return)}catch(R){Le(t,t.return,R)}}break;case 1:un(e,t),Nn(t),r&512&&n!==null&&Ii(n,n.return);break;case 5:if(un(e,t),Nn(t),r&512&&n!==null&&Ii(n,n.return),t.flags&32){var s=t.stateNode;try{da(s,"")}catch(R){Le(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&A_(s,i),uh(l,o);var d=uh(l,i);for(o=0;o<c.length;o+=2){var f=c[o],p=c[o+1];f==="style"?D_(s,p):f==="dangerouslySetInnerHTML"?P_(s,p):f==="children"?da(s,p):jf(s,f,p,d)}switch(l){case"input":sh(s,i);break;case"textarea":k_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var N=i.value;N!=null?Ni(s,!!i.multiple,N,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ni(s,!!i.multiple,i.defaultValue,!0):Ni(s,!!i.multiple,i.multiple?[]:"",!1))}s[wa]=i}catch(R){Le(t,t.return,R)}}break;case 6:if(un(e,t),Nn(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Le(t,t.return,R)}}break;case 3:if(un(e,t),Nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pa(e.containerInfo)}catch(R){Le(t,t.return,R)}break;case 4:un(e,t),Nn(t);break;case 13:un(e,t),Nn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hm=Ue())),r&4&&iy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(d=vt)||f,un(e,t),vt=d):un(e,t),Nn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Y=t,f=t.child;f!==null;){for(p=Y=f;Y!==null;){switch(g=Y,N=g.child,g.tag){case 0:case 11:case 14:case 15:ta(4,g,g.return);break;case 1:Ii(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(R){Le(r,n,R)}}break;case 5:Ii(g,g.return);break;case 22:if(g.memoizedState!==null){ay(p);continue}}N!==null?(N.return=g,Y=N):ay(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=R_("display",o))}catch(R){Le(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){Le(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:un(e,t),Nn(t),r&4&&iy(t);break;case 21:break;default:un(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(r0(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(da(s,""),r.flags&=-33);var i=sy(t);Fh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=sy(t);Vh(t,l,o);break;default:throw Error(W(161))}}catch(c){Le(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Hx(t,e,n){Y=t,o0(t)}function o0(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Rl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||vt;l=Rl;var d=vt;if(Rl=o,(vt=c)&&!d)for(Y=s;Y!==null;)o=Y,c=o.child,o.tag===22&&o.memoizedState!==null?ly(s):c!==null?(c.return=o,Y=c):ly(s);for(;i!==null;)Y=i,o0(i),i=i.sibling;Y=s,Rl=l,vt=d}oy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):oy(t)}}function oy(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||pc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:cn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&pa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}vt||e.flags&512&&Lh(e)}catch(g){Le(e,e.return,g)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function ay(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function ly(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pc(4,e)}catch(c){Le(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Le(e,s,c)}}var i=e.return;try{Lh(e)}catch(c){Le(e,i,c)}break;case 5:var o=e.return;try{Lh(e)}catch(c){Le(e,o,c)}}}catch(c){Le(e,e.return,c)}if(e===t){Y=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Y=l;break}Y=e.return}}var Kx=Math.ceil,Cu=cr.ReactCurrentDispatcher,cm=cr.ReactCurrentOwner,Jt=cr.ReactCurrentBatchConfig,me=0,Ze=null,We=null,ot=0,Lt=0,Si=is(0),Ke=0,Na=null,bs=0,gc=0,dm=0,na=null,Ct=null,hm=0,$i=1/0,Gn=null,Pu=!1,Uh=null,zr=null,Dl=!1,jr=null,Ru=0,ra=0,zh=null,Xl=-1,Jl=0;function St(){return me&6?Ue():Xl!==-1?Xl:Xl=Ue()}function Br(t){return t.mode&1?me&2&&ot!==0?ot&-ot:Rx.transition!==null?(Jl===0&&(Jl=W_()),Jl):(t=ve,t!==0||(t=window.event,t=t===void 0?16:X_(t.type)),t):1}function pn(t,e,n,r){if(50<ra)throw ra=0,zh=null,Error(W(185));Ua(t,n,r),(!(me&2)||t!==Ze)&&(t===Ze&&(!(me&2)&&(gc|=n),Ke===4&&Ar(t,ot)),Ot(t,r),n===1&&me===0&&!(e.mode&1)&&($i=Ue()+500,hc&&os()))}function Ot(t,e){var n=t.callbackNode;RS(t,e);var r=mu(t,t===Ze?ot:0);if(r===0)n!==null&&yg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yg(n),e===1)t.tag===0?Px(uy.bind(null,t)):gw(uy.bind(null,t)),Nx(function(){!(me&6)&&os()}),n=null;else{switch(q_(r)){case 1:n=Vf;break;case 4:n=B_;break;case 16:n=fu;break;case 536870912:n=$_;break;default:n=fu}n=m0(n,a0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function a0(t,e){if(Xl=-1,Jl=0,me&6)throw Error(W(327));var n=t.callbackNode;if(Ri()&&t.callbackNode!==n)return null;var r=mu(t,t===Ze?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Du(t,r);else{e=r;var s=me;me|=2;var i=u0();(Ze!==t||ot!==e)&&(Gn=null,$i=Ue()+500,Cs(t,e));do try{Xx();break}catch(l){l0(t,l)}while(!0);Xf(),Cu.current=i,me=s,We!==null?e=0:(Ze=null,ot=0,e=Ke)}if(e!==0){if(e===2&&(s=mh(t),s!==0&&(r=s,e=Bh(t,s))),e===1)throw n=Na,Cs(t,0),Ar(t,r),Ot(t,Ue()),n;if(e===6)Ar(t,r);else{if(s=t.current.alternate,!(r&30)&&!Qx(s)&&(e=Du(t,r),e===2&&(i=mh(t),i!==0&&(r=i,e=Bh(t,i))),e===1))throw n=Na,Cs(t,0),Ar(t,r),Ot(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:ws(t,Ct,Gn);break;case 3:if(Ar(t,r),(r&130023424)===r&&(e=hm+500-Ue(),10<e)){if(mu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){St(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Th(ws.bind(null,t,Ct,Gn),e);break}ws(t,Ct,Gn);break;case 4:if(Ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-mn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kx(r/1960))-r,10<r){t.timeoutHandle=Th(ws.bind(null,t,Ct,Gn),r);break}ws(t,Ct,Gn);break;case 5:ws(t,Ct,Gn);break;default:throw Error(W(329))}}}return Ot(t,Ue()),t.callbackNode===n?a0.bind(null,t):null}function Bh(t,e){var n=na;return t.current.memoizedState.isDehydrated&&(Cs(t,e).flags|=256),t=Du(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&$h(e)),t}function $h(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function Qx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~dm,e&=~gc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mn(e),r=1<<n;t[n]=-1,e&=~r}}function uy(t){if(me&6)throw Error(W(327));Ri();var e=mu(t,0);if(!(e&1))return Ot(t,Ue()),null;var n=Du(t,e);if(t.tag!==0&&n===2){var r=mh(t);r!==0&&(e=r,n=Bh(t,r))}if(n===1)throw n=Na,Cs(t,0),Ar(t,e),Ot(t,Ue()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ws(t,Ct,Gn),Ot(t,Ue()),null}function fm(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&($i=Ue()+500,hc&&os())}}function Os(t){jr!==null&&jr.tag===0&&!(me&6)&&Ri();var e=me;me|=1;var n=Jt.transition,r=ve;try{if(Jt.transition=null,ve=1,t)return t()}finally{ve=r,Jt.transition=n,me=e,!(me&6)&&os()}}function mm(){Lt=Si.current,ke(Si)}function Cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xx(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Kf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_u();break;case 3:zi(),ke(jt),ke(wt),rm();break;case 5:nm(r);break;case 4:zi();break;case 13:ke(Re);break;case 19:ke(Re);break;case 10:Jf(r.type._context);break;case 22:case 23:mm()}n=n.return}if(Ze=t,We=t=$r(t.current,null),ot=Lt=e,Ke=0,Na=null,dm=gc=bs=0,Ct=na=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xs=null}return t}function l0(t,e){do{var n=We;try{if(Xf(),Kl.current=ku,Au){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Au=!1}if(js=0,Je=He=De=null,ea=!1,Ia=0,cm.current=null,n===null||n.return===null){Ke=1,Na=e,We=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=ot,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var N=Yg(o);if(N!==null){N.flags&=-257,Xg(N,o,l,i,e),N.mode&1&&Qg(i,d,e),e=N,c=d;var A=e.updateQueue;if(A===null){var R=new Set;R.add(c),e.updateQueue=R}else A.add(c);break e}else{if(!(e&1)){Qg(i,d,e),pm();break e}c=Error(W(426))}}else if(Ce&&l.mode&1){var P=Yg(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Xg(P,o,l,i,e),Qf(Bi(c,l));break e}}i=c=Bi(c,l),Ke!==4&&(Ke=2),na===null?na=[i]:na.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=qw(i,c,e);$g(i,S);break e;case 1:l=c;var E=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(zr===null||!zr.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Gw(i,l,e);$g(i,D);break e}}i=i.return}while(i!==null)}d0(n)}catch(V){e=V,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function u0(){var t=Cu.current;return Cu.current=ku,t===null?ku:t}function pm(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ze===null||!(bs&268435455)&&!(gc&268435455)||Ar(Ze,ot)}function Du(t,e){var n=me;me|=2;var r=u0();(Ze!==t||ot!==e)&&(Gn=null,Cs(t,e));do try{Yx();break}catch(s){l0(t,s)}while(!0);if(Xf(),me=n,Cu.current=r,We!==null)throw Error(W(261));return Ze=null,ot=0,Ke}function Yx(){for(;We!==null;)c0(We)}function Xx(){for(;We!==null&&!TS();)c0(We)}function c0(t){var e=f0(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,e===null?d0(t):We=e,cm.current=null}function d0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Wx(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,We=null;return}}else if(n=$x(n,e,Lt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ke===0&&(Ke=5)}function ws(t,e,n){var r=ve,s=Jt.transition;try{Jt.transition=null,ve=1,Jx(t,e,n,r)}finally{Jt.transition=s,ve=r}return null}function Jx(t,e,n,r){do Ri();while(jr!==null);if(me&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(DS(t,i),t===Ze&&(We=Ze=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,m0(fu,function(){return Ri(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jt.transition,Jt.transition=null;var o=ve;ve=1;var l=me;me|=4,cm.current=null,Gx(t,n),i0(n,t),vx(wh),pu=!!_h,wh=_h=null,t.current=n,Hx(n),IS(),me=l,ve=o,Jt.transition=i}else t.current=n;if(Dl&&(Dl=!1,jr=t,Ru=s),i=t.pendingLanes,i===0&&(zr=null),NS(n.stateNode),Ot(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Pu)throw Pu=!1,t=Uh,Uh=null,t;return Ru&1&&t.tag!==0&&Ri(),i=t.pendingLanes,i&1?t===zh?ra++:(ra=0,zh=t):ra=0,os(),null}function Ri(){if(jr!==null){var t=q_(Ru),e=Jt.transition,n=ve;try{if(Jt.transition=null,ve=16>t?16:t,jr===null)var r=!1;else{if(t=jr,jr=null,Ru=0,me&6)throw Error(W(331));var s=me;for(me|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Y=d;Y!==null;){var f=Y;switch(f.tag){case 0:case 11:case 15:ta(8,f,i)}var p=f.child;if(p!==null)p.return=f,Y=p;else for(;Y!==null;){f=Y;var g=f.sibling,N=f.return;if(n0(f),f===d){Y=null;break}if(g!==null){g.return=N,Y=g;break}Y=N}}}var A=i.alternate;if(A!==null){var R=A.child;if(R!==null){A.child=null;do{var P=R.sibling;R.sibling=null,R=P}while(R!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ta(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,Y=S;break e}Y=i.return}}var E=t.current;for(Y=E;Y!==null;){o=Y;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Y=x;else e:for(o=E;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:pc(9,l)}}catch(V){Le(l,l.return,V)}if(l===o){Y=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,Y=D;break e}Y=l.return}}if(me=s,os(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(ac,t)}catch{}r=!0}return r}finally{ve=n,Jt.transition=e}}return!1}function cy(t,e,n){e=Bi(n,e),e=qw(t,e,1),t=Ur(t,e,1),e=St(),t!==null&&(Ua(t,1,e),Ot(t,e))}function Le(t,e,n){if(t.tag===3)cy(t,t,n);else for(;e!==null;){if(e.tag===3){cy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zr===null||!zr.has(r))){t=Bi(n,t),t=Gw(e,t,1),e=Ur(e,t,1),t=St(),e!==null&&(Ua(e,1,t),Ot(e,t));break}}e=e.return}}function Zx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(ot&n)===n&&(Ke===4||Ke===3&&(ot&130023424)===ot&&500>Ue()-hm?Cs(t,0):dm|=n),Ot(t,e)}function h0(t,e){e===0&&(t.mode&1?(e=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):e=1);var n=St();t=sr(t,e),t!==null&&(Ua(t,e,n),Ot(t,n))}function e1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),h0(t,n)}function t1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),h0(t,n)}var f0;f0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,Bx(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Ce&&e.flags&1048576&&yw(e,Tu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yl(t,e),t=e.pendingProps;var s=Vi(e,wt.current);Pi(e,n),s=im(null,e,r,t,s,n);var i=om();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(i=!0,wu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,em(e),s.updater=mc,e.stateNode=s,s._reactInternals=e,Ch(e,r,t,n),e=Dh(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&Hf(e),Tt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=r1(r),t=cn(r,t),s){case 0:e=Rh(null,e,r,t,n);break e;case 1:e=ey(null,e,r,t,n);break e;case 11:e=Jg(null,e,r,t,n);break e;case 14:e=Zg(null,e,r,cn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Rh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),ey(t,e,r,s,n);case 3:e:{if(Yw(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Iw(t,e),xu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Bi(Error(W(423)),e),e=ty(t,e,r,n,s);break e}else if(r!==s){s=Bi(Error(W(424)),e),e=ty(t,e,r,n,s);break e}else for(Ut=Fr(e.stateNode.containerInfo.firstChild),Bt=e,Ce=!0,hn=null,n=Ew(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fi(),r===s){e=ir(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return Sw(e),t===null&&Nh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Eh(r,s)?o=null:i!==null&&Eh(r,i)&&(e.flags|=32),Qw(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&Nh(e),null;case 13:return Xw(t,e,n);case 4:return tm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ui(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Jg(t,e,r,s,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Iu,r._currentValue),r._currentValue=o,i!==null)if(gn(i.value,o)){if(i.children===s.children&&!jt.current){e=ir(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Zn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ah(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ah(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Pi(e,n),s=en(s),r=r(s),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,s=cn(r,e.pendingProps),s=cn(r.type,s),Zg(t,e,r,s,n);case 15:return Hw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Yl(t,e),e.tag=1,bt(r)?(t=!0,wu(e)):t=!1,Pi(e,n),Ww(e,r,s),Ch(e,r,s,n),Dh(null,e,r,!0,t,n);case 19:return Jw(t,e,n);case 22:return Kw(t,e,n)}throw Error(W(156,e.tag))};function m0(t,e){return z_(t,e)}function n1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,r){return new n1(t,e,n,r)}function gm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r1(t){if(typeof t=="function")return gm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Of)return 11;if(t===Mf)return 14}return 2}function $r(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")gm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mi:return Ps(n.children,s,i,e);case bf:o=8,s|=8;break;case Zd:return t=Xt(12,n,e,s|2),t.elementType=Zd,t.lanes=i,t;case eh:return t=Xt(13,n,e,s),t.elementType=eh,t.lanes=i,t;case th:return t=Xt(19,n,e,s),t.elementType=th,t.lanes=i,t;case S_:return yc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T_:o=10;break e;case I_:o=9;break e;case Of:o=11;break e;case Mf:o=14;break e;case Sr:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Xt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ps(t,e,n,r){return t=Xt(7,t,r,e),t.lanes=n,t}function yc(t,e,n,r){return t=Xt(22,t,r,e),t.elementType=S_,t.lanes=n,t.stateNode={isHidden:!1},t}function Od(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function Md(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function s1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gd(0),this.expirationTimes=gd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ym(t,e,n,r,s,i,o,l,c){return t=new s1(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Xt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},em(i),t}function i1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function p0(t){if(!t)return Yr;t=t._reactInternals;e:{if(Ws(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(bt(n))return pw(t,n,e)}return e}function g0(t,e,n,r,s,i,o,l,c){return t=ym(n,r,!0,t,s,i,o,l,c),t.context=p0(null),n=t.current,r=St(),s=Br(n),i=Zn(r,s),i.callback=e??null,Ur(n,i,s),t.current.lanes=s,Ua(t,s,r),Ot(t,r),t}function vc(t,e,n,r){var s=e.current,i=St(),o=Br(s);return n=p0(n),e.context===null?e.context=n:e.pendingContext=n,e=Zn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ur(s,e,o),t!==null&&(pn(t,s,o,i),Hl(t,s,o)),o}function ju(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vm(t,e){dy(t,e),(t=t.alternate)&&dy(t,e)}function o1(){return null}var y0=typeof reportError=="function"?reportError:function(t){console.error(t)};function _m(t){this._internalRoot=t}_c.prototype.render=_m.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));vc(t,e,null,null)};_c.prototype.unmount=_m.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Os(function(){vc(null,t,null,null)}),e[rr]=null}};function _c(t){this._internalRoot=t}_c.prototype.unstable_scheduleHydration=function(t){if(t){var e=K_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nr.length&&e!==0&&e<Nr[n].priority;n++);Nr.splice(n,0,t),n===0&&Y_(t)}};function wm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hy(){}function a1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ju(o);i.call(d)}}var o=g0(e,r,t,0,null,!1,!1,"",hy);return t._reactRootContainer=o,t[rr]=o.current,va(t.nodeType===8?t.parentNode:t),Os(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=ju(c);l.call(d)}}var c=ym(t,0,!1,null,null,!1,!1,"",hy);return t._reactRootContainer=c,t[rr]=c.current,va(t.nodeType===8?t.parentNode:t),Os(function(){vc(e,c,n,r)}),c}function Ec(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=ju(o);l.call(c)}}vc(e,o,t,s)}else o=a1(n,e,t,s,r);return ju(o)}G_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zo(e.pendingLanes);n!==0&&(Ff(e,n|1),Ot(e,Ue()),!(me&6)&&($i=Ue()+500,os()))}break;case 13:Os(function(){var r=sr(t,1);if(r!==null){var s=St();pn(r,t,1,s)}}),vm(t,1)}};Uf=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=St();pn(e,t,134217728,n)}vm(t,134217728)}};H_=function(t){if(t.tag===13){var e=Br(t),n=sr(t,e);if(n!==null){var r=St();pn(n,t,e,r)}vm(t,e)}};K_=function(){return ve};Q_=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};dh=function(t,e,n){switch(e){case"input":if(sh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=dc(r);if(!s)throw Error(W(90));N_(r),sh(r,s)}}}break;case"textarea":k_(t,n);break;case"select":e=n.value,e!=null&&Ni(t,!!n.multiple,e,!1)}};O_=fm;M_=Os;var l1={usingClientEntryPoint:!1,Events:[Ba,vi,dc,j_,b_,fm]},Lo={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u1={bundleType:Lo.bundleType,version:Lo.version,rendererPackageName:Lo.rendererPackageName,rendererConfig:Lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=F_(t),t===null?null:t.stateNode},findFiberByHostInstance:Lo.findFiberByHostInstance||o1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{ac=jl.inject(u1),jn=jl}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l1;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wm(e))throw Error(W(200));return i1(t,e,null,n)};Wt.createRoot=function(t,e){if(!wm(t))throw Error(W(299));var n=!1,r="",s=y0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ym(t,1,!1,null,null,n,!1,r,s),t[rr]=e.current,va(t.nodeType===8?t.parentNode:t),new _m(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=F_(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return Os(t)};Wt.hydrate=function(t,e,n){if(!wc(e))throw Error(W(200));return Ec(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!wm(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=y0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=g0(e,null,t,1,n??null,s,!1,i,o),t[rr]=e.current,va(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new _c(e)};Wt.render=function(t,e,n){if(!wc(e))throw Error(W(200));return Ec(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!wc(t))throw Error(W(40));return t._reactRootContainer?(Os(function(){Ec(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Wt.unstable_batchedUpdates=fm;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wc(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Ec(t,e,n,!1,r)};Wt.version="18.3.1-next-f1338f8080-20240426";function v0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v0)}catch(t){console.error(t)}}v0(),v_.exports=Wt;var c1=v_.exports,fy=c1;Xd.createRoot=fy.createRoot,Xd.hydrateRoot=fy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Aa(){return Aa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Aa.apply(this,arguments)}var br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(br||(br={}));const my="popstate";function d1(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Wh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:bu(s)}return f1(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function h1(){return Math.random().toString(36).substr(2,8)}function py(t,e){return{usr:t.state,key:t.key,idx:e}}function Wh(t,e,n,r){return n===void 0&&(n=null),Aa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ro(e):e,{state:n,key:e&&e.key||r||h1()})}function bu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ro(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function f1(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=br.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(Aa({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=br.Pop;let P=f(),S=P==null?null:P-d;d=P,c&&c({action:l,location:R.location,delta:S})}function g(P,S){l=br.Push;let E=Wh(R.location,P,S);d=f()+1;let x=py(E,d),D=R.createHref(E);try{o.pushState(x,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(D)}i&&c&&c({action:l,location:R.location,delta:1})}function N(P,S){l=br.Replace;let E=Wh(R.location,P,S);d=f();let x=py(E,d),D=R.createHref(E);o.replaceState(x,"",D),i&&c&&c({action:l,location:R.location,delta:0})}function A(P){let S=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof P=="string"?P:bu(P);return E=E.replace(/ $/,"%20"),je(S,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,S)}let R={get action(){return l},get location(){return t(s,o)},listen(P){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(my,p),c=P,()=>{s.removeEventListener(my,p),c=null}},createHref(P){return e(s,P)},createURL:A,encodeLocation(P){let S=A(P);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:N,go(P){return o.go(P)}};return R}var gy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(gy||(gy={}));function m1(t,e,n){return n===void 0&&(n="/"),p1(t,e,n)}function p1(t,e,n,r){let s=typeof e=="string"?ro(e):e,i=Wi(s.pathname||"/",n);if(i==null)return null;let o=w0(t);g1(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=A1(i);l=x1(o[c],d)}return l}function w0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(je(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Wr([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),w0(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:I1(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of E0(i.path))s(i,o,c)}),e}function E0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=E0(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function g1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:S1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const y1=/^:[\w-]+$/,v1=3,_1=2,w1=1,E1=10,T1=-2,yy=t=>t==="*";function I1(t,e){let n=t.split("/"),r=n.length;return n.some(yy)&&(r+=T1),e&&(r+=_1),n.filter(s=>!yy(s)).reduce((s,i)=>s+(y1.test(i)?v1:i===""?w1:E1),r)}function S1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function x1(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=qh({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Wr([i,p.pathname]),pathnameBase:R1(Wr([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Wr([i,p.pathnameBase]))}return o}function qh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=N1(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:N}=f;if(g==="*"){let R=l[p]||"";o=i.slice(0,i.length-R.length).replace(/(.)\/+$/,"$1")}const A=l[p];return N&&!A?d[g]=void 0:d[g]=(A||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function N1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function A1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Wi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function k1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ro(t):t;return{pathname:n?n.startsWith("/")?n:C1(n,e):e,search:D1(r),hash:j1(s)}}function C1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ld(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function P1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Em(t,e){let n=P1(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Tm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ro(t):(s=Aa({},t),je(!s.pathname||!s.pathname.includes("?"),Ld("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),Ld("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),Ld("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=k1(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Wr=t=>t.join("/").replace(/\/\/+/g,"/"),R1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),D1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,j1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function b1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const T0=["post","put","patch","delete"];new Set(T0);const O1=["get",...T0];new Set(O1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ka.apply(this,arguments)}const Tc=j.createContext(null),I0=j.createContext(null),dr=j.createContext(null),Ic=j.createContext(null),hr=j.createContext({outlet:null,matches:[],isDataRoute:!1}),S0=j.createContext(null);function M1(t,e){let{relative:n}=e===void 0?{}:e;so()||je(!1);let{basename:r,navigator:s}=j.useContext(dr),{hash:i,pathname:o,search:l}=xc(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Wr([r,o])),s.createHref({pathname:c,search:l,hash:i})}function so(){return j.useContext(Ic)!=null}function io(){return so()||je(!1),j.useContext(Ic).location}function x0(t){j.useContext(dr).static||j.useLayoutEffect(t)}function Sc(){let{isDataRoute:t}=j.useContext(hr);return t?X1():L1()}function L1(){so()||je(!1);let t=j.useContext(Tc),{basename:e,future:n,navigator:r}=j.useContext(dr),{matches:s}=j.useContext(hr),{pathname:i}=io(),o=JSON.stringify(Em(s,n.v7_relativeSplatPath)),l=j.useRef(!1);return x0(()=>{l.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=Tm(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Wr([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}const V1=j.createContext(null);function F1(t){let e=j.useContext(hr).outlet;return e&&j.createElement(V1.Provider,{value:t},e)}function xc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(dr),{matches:s}=j.useContext(hr),{pathname:i}=io(),o=JSON.stringify(Em(s,r.v7_relativeSplatPath));return j.useMemo(()=>Tm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function U1(t,e){return z1(t,e)}function z1(t,e,n,r){so()||je(!1);let{navigator:s}=j.useContext(dr),{matches:i}=j.useContext(hr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=io(),f;if(e){var p;let P=typeof e=="string"?ro(e):e;c==="/"||(p=P.pathname)!=null&&p.startsWith(c)||je(!1),f=P}else f=d;let g=f.pathname||"/",N=g;if(c!=="/"){let P=c.replace(/^\//,"").split("/");N="/"+g.replace(/^\//,"").split("/").slice(P.length).join("/")}let A=m1(t,{pathname:N}),R=G1(A&&A.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:Wr([c,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?c:Wr([c,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),i,n,r);return e&&R?j.createElement(Ic.Provider,{value:{location:ka({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:br.Pop}},R):R}function B1(){let t=Y1(),e=b1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const $1=j.createElement(B1,null);class W1 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(hr.Provider,{value:this.props.routeContext},j.createElement(S0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function q1(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(Tc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(hr.Provider,{value:e},r)}function G1(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||je(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:N}=n,A=p.route.loader&&g[p.route.id]===void 0&&(!N||N[p.route.id]===void 0);if(p.route.lazy||A){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let N,A=!1,R=null,P=null;n&&(N=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||$1,c&&(d<0&&g===0?(J1("route-fallback"),A=!0,P=null):d===g&&(A=!0,P=p.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,g+1)),E=()=>{let x;return N?x=R:A?x=P:p.route.Component?x=j.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=f,j.createElement(q1,{match:p,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:x})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?j.createElement(W1,{location:n.location,revalidation:n.revalidation,component:R,error:N,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}var N0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(N0||{}),A0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(A0||{});function H1(t){let e=j.useContext(Tc);return e||je(!1),e}function K1(t){let e=j.useContext(I0);return e||je(!1),e}function Q1(t){let e=j.useContext(hr);return e||je(!1),e}function k0(t){let e=Q1(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function Y1(){var t;let e=j.useContext(S0),n=K1(),r=k0();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function X1(){let{router:t}=H1(N0.UseNavigateStable),e=k0(A0.UseNavigateStable),n=j.useRef(!1);return x0(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ka({fromRouteId:e},i)))},[t,e])}const vy={};function J1(t,e,n){vy[t]||(vy[t]=!0)}function Z1(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ou(t){let{to:e,replace:n,state:r,relative:s}=t;so()||je(!1);let{future:i,static:o}=j.useContext(dr),{matches:l}=j.useContext(hr),{pathname:c}=io(),d=Sc(),f=Tm(e,Em(l,i.v7_relativeSplatPath),c,s==="path"),p=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function eN(t){return F1(t.context)}function Ht(t){je(!1)}function tN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=br.Pop,navigator:i,static:o=!1,future:l}=t;so()&&je(!1);let c=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:i,static:o,future:ka({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=ro(r));let{pathname:f="/",search:p="",hash:g="",state:N=null,key:A="default"}=r,R=j.useMemo(()=>{let P=Wi(f,c);return P==null?null:{location:{pathname:P,search:p,hash:g,state:N,key:A},navigationType:s}},[c,f,p,g,N,A,s]);return R==null?null:j.createElement(dr.Provider,{value:d},j.createElement(Ic.Provider,{children:n,value:R}))}function nN(t){let{children:e,location:n}=t;return U1(Gh(e),n)}new Promise(()=>{});function Gh(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,Gh(r.props.children,i));return}r.type!==Ht&&je(!1),!r.props.index||!r.props.children||je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Gh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mu.apply(this,arguments)}function C0(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function rN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sN(t,e){return t.button===0&&(!e||e==="_self")&&!rN(t)}const iN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],aN="6";try{window.__reactRouterVersion=aN}catch{}const lN=j.createContext({isTransitioning:!1}),uN="startTransition",_y=ZI[uN];function cN(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=d1({window:s,v5Compat:!0}));let o=i.current,[l,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=j.useCallback(p=>{d&&_y?_y(()=>c(p)):c(p)},[c,d]);return j.useLayoutEffect(()=>o.listen(f),[o,f]),j.useEffect(()=>Z1(r),[r]),j.createElement(tN,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const dN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fN=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:p}=e,g=C0(e,iN),{basename:N}=j.useContext(dr),A,R=!1;if(typeof d=="string"&&hN.test(d)&&(A=d,dN))try{let x=new URL(window.location.href),D=d.startsWith("//")?new URL(x.protocol+d):new URL(d),V=Wi(D.pathname,N);D.origin===x.origin&&V!=null?d=V+D.search+D.hash:R=!0}catch{}let P=M1(d,{relative:s}),S=pN(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:p});function E(x){r&&r(x),x.defaultPrevented||S(x)}return j.createElement("a",Mu({},g,{href:A||P,onClick:R||i?r:E,ref:n,target:c}))}),li=j.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:f}=e,p=C0(e,oN),g=xc(c,{relative:p.relative}),N=io(),A=j.useContext(I0),{navigator:R,basename:P}=j.useContext(dr),S=A!=null&&gN(g)&&d===!0,E=R.encodeLocation?R.encodeLocation(g).pathname:g.pathname,x=N.pathname,D=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;s||(x=x.toLowerCase(),D=D?D.toLowerCase():null,E=E.toLowerCase()),D&&P&&(D=Wi(D,P)||D);const V=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let O=x===E||!o&&x.startsWith(E)&&x.charAt(V)==="/",v=D!=null&&(D===E||!o&&D.startsWith(E)&&D.charAt(E.length)==="/"),y={isActive:O,isPending:v,isTransitioning:S},w=O?r:void 0,T;typeof i=="function"?T=i(y):T=[i,O?"active":null,v?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(y):l;return j.createElement(fN,Mu({},p,{"aria-current":w,className:T,ref:n,style:k,to:c,viewTransition:d}),typeof f=="function"?f(y):f)});var Hh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Hh||(Hh={}));var wy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wy||(wy={}));function mN(t){let e=j.useContext(Tc);return e||je(!1),e}function pN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Sc(),d=io(),f=xc(t,{relative:o});return j.useCallback(p=>{if(sN(p,n)){p.preventDefault();let g=r!==void 0?r:bu(d)===bu(f);c(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,r,s,n,t,i,o,l])}function gN(t,e){e===void 0&&(e={});let n=j.useContext(lN);n==null&&je(!1);let{basename:r}=mN(Hh.useViewTransitionState),s=xc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Wi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Wi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return qh(s.pathname,o)!=null||qh(s.pathname,i)!=null}const yN=()=>{};var Ey={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},R0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,N=d&63;c||(N=64,o||(g=64)),r.push(n[f],n[p],n[g],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(P0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new _N;const g=i<<2|l>>4;if(r.push(g),d!==64){const N=l<<4&240|d>>2;if(r.push(N),p!==64){const A=d<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _N extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wN=function(t){const e=P0(t);return R0.encodeByteArray(e,!0)},Lu=function(t){return wN(t).replace(/\./g,"")},D0=function(t){try{return R0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=()=>EN().__FIREBASE_DEFAULTS__,IN=()=>{if(typeof process>"u"||typeof Ey>"u")return;const t=Ey.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&D0(t[1]);return e&&JSON.parse(e)},Nc=()=>{try{return yN()||TN()||IN()||SN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},j0=t=>{var e,n;return(n=(e=Nc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},b0=t=>{const e=j0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},O0=()=>{var t;return(t=Nc())===null||t===void 0?void 0:t.config},M0=t=>{var e;return(e=Nc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t){return t.endsWith(".cloudworkstations.dev")}async function Im(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lu(JSON.stringify(n)),Lu(JSON.stringify(o)),""].join(".")}const sa={};function AN(){const t={prod:[],emulator:[]};for(const e of Object.keys(sa))sa[e]?t.emulator.push(e):t.prod.push(e);return t}function kN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ty=!1;function Sm(t,e){if(typeof window>"u"||typeof document>"u"||!qs(window.location.host)||sa[t]===e||sa[t]||Ty)return;sa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=AN().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,N){g.setAttribute("width","24"),g.setAttribute("id",N),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Ty=!0,o()},g}function f(g,N){g.setAttribute("id",N),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=kN(r),N=n("text"),A=document.getElementById(N)||document.createElement("span"),R=n("learnmore"),P=document.getElementById(R)||document.createElement("a"),S=n("preprendIcon"),E=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const x=g.element;l(x),f(P,R);const D=d();c(E,S),x.append(E,A,P,D),document.body.appendChild(x)}i?(A.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function PN(){var t;const e=(t=Nc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bN(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ON(){return!PN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MN(){try{return typeof indexedDB=="object"}catch{return!1}}function LN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="FirebaseError";class zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=VN,Object.setPrototypeOf(this,zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wa.prototype.create)}}class Wa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?FN(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new zn(s,l,r)}}function FN(t,e){return t.replace(UN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const UN=/\{\$([^}]+)}/g;function zN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ms(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Iy(i)&&Iy(o)){if(!Ms(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Iy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $o(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Wo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function BN(t,e){const n=new $N(t,e);return n.subscribe.bind(n)}class $N{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Vd),s.error===void 0&&(s.error=Vd),s.complete===void 0&&(s.complete=Vd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return t&&t._delegate?t._delegate:t}class Xr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HN(e))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Es){return this.instances.has(e)}getOptions(e=Es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Es){return this.component?this.component.multipleInstances?e:Es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GN(t){return t===Es?void 0:t}function HN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const QN={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},YN=de.INFO,XN={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},JN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=XN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xm{constructor(e){this.name=e,this._logLevel=YN,this._logHandler=JN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const ZN=(t,e)=>e.some(n=>t instanceof n);let Sy,xy;function eA(){return Sy||(Sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tA(){return xy||(xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L0=new WeakMap,Kh=new WeakMap,V0=new WeakMap,Fd=new WeakMap,Nm=new WeakMap;function nA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(qr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&L0.set(n,t)}).catch(()=>{}),Nm.set(e,t),e}function rA(t){if(Kh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Kh.set(t,e)}let Qh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||V0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sA(t){Qh=t(Qh)}function iA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ud(this),e,...n);return V0.set(r,e.sort?e.sort():[e]),qr(r)}:tA().includes(t)?function(...e){return t.apply(Ud(this),e),qr(L0.get(this))}:function(...e){return qr(t.apply(Ud(this),e))}}function oA(t){return typeof t=="function"?iA(t):(t instanceof IDBTransaction&&rA(t),ZN(t,eA())?new Proxy(t,Qh):t)}function qr(t){if(t instanceof IDBRequest)return nA(t);if(Fd.has(t))return Fd.get(t);const e=oA(t);return e!==t&&(Fd.set(t,e),Nm.set(e,t)),e}const Ud=t=>Nm.get(t);function aA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=qr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(qr(o.result),c.oldVersion,c.newVersion,qr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const lA=["get","getKey","getAll","getAllKeys","count"],uA=["put","add","delete","clear"],zd=new Map;function Ny(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zd.get(e))return zd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=uA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||lA.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return zd.set(e,i),i}sA(t=>({...t,get:(e,n,r)=>Ny(e,n)||t.get(e,n,r),has:(e,n)=>!!Ny(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yh="@firebase/app",Ay="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new xm("@firebase/app"),hA="@firebase/app-compat",fA="@firebase/analytics-compat",mA="@firebase/analytics",pA="@firebase/app-check-compat",gA="@firebase/app-check",yA="@firebase/auth",vA="@firebase/auth-compat",_A="@firebase/database",wA="@firebase/data-connect",EA="@firebase/database-compat",TA="@firebase/functions",IA="@firebase/functions-compat",SA="@firebase/installations",xA="@firebase/installations-compat",NA="@firebase/messaging",AA="@firebase/messaging-compat",kA="@firebase/performance",CA="@firebase/performance-compat",PA="@firebase/remote-config",RA="@firebase/remote-config-compat",DA="@firebase/storage",jA="@firebase/storage-compat",bA="@firebase/firestore",OA="@firebase/ai",MA="@firebase/firestore-compat",LA="firebase",VA="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="[DEFAULT]",FA={[Yh]:"fire-core",[hA]:"fire-core-compat",[mA]:"fire-analytics",[fA]:"fire-analytics-compat",[gA]:"fire-app-check",[pA]:"fire-app-check-compat",[yA]:"fire-auth",[vA]:"fire-auth-compat",[_A]:"fire-rtdb",[wA]:"fire-data-connect",[EA]:"fire-rtdb-compat",[TA]:"fire-fn",[IA]:"fire-fn-compat",[SA]:"fire-iid",[xA]:"fire-iid-compat",[NA]:"fire-fcm",[AA]:"fire-fcm-compat",[kA]:"fire-perf",[CA]:"fire-perf-compat",[PA]:"fire-rc",[RA]:"fire-rc-compat",[DA]:"fire-gcs",[jA]:"fire-gcs-compat",[bA]:"fire-fst",[MA]:"fire-fst-compat",[OA]:"fire-vertex","fire-js":"fire-js",[LA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=new Map,UA=new Map,Jh=new Map;function ky(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ls(t){const e=t.name;if(Jh.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;Jh.set(e,t);for(const n of Vu.values())ky(n,t);for(const n of UA.values())ky(n,t);return!0}function Ac(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gr=new Wa("app","Firebase",zA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=VA;function F0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xh,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Gr.create("bad-app-name",{appName:String(s)});if(n||(n=O0()),!n)throw Gr.create("no-options");const i=Vu.get(s);if(i){if(Ms(n,i.options)&&Ms(r,i.config))return i;throw Gr.create("duplicate-app",{appName:s})}const o=new KN(s);for(const c of Jh.values())o.addComponent(c);const l=new BA(n,r,o);return Vu.set(s,l),l}function Am(t=Xh){const e=Vu.get(t);if(!e&&t===Xh&&O0())return F0();if(!e)throw Gr.create("no-app",{appName:t});return e}function On(t,e,n){var r;let s=(r=FA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(l.join(" "));return}Ls(new Xr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="firebase-heartbeat-database",WA=1,Ca="firebase-heartbeat-store";let Bd=null;function U0(){return Bd||(Bd=aA($A,WA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ca)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gr.create("idb-open",{originalErrorMessage:t.message})})),Bd}async function qA(t){try{const n=(await U0()).transaction(Ca),r=await n.objectStore(Ca).get(z0(t));return await n.done,r}catch(e){if(e instanceof zn)or.warn(e.message);else{const n=Gr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function Cy(t,e){try{const r=(await U0()).transaction(Ca,"readwrite");await r.objectStore(Ca).put(e,z0(t)),await r.done}catch(n){if(n instanceof zn)or.warn(n.message);else{const r=Gr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function z0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=1024,HA=30;class KA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Py();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>HA){const o=XA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Py(),{heartbeatsToSend:r,unsentEntries:s}=QA(this._heartbeatsCache.heartbeats),i=Lu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return or.warn(n),""}}}function Py(){return new Date().toISOString().substring(0,10)}function QA(t,e=GA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ry(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ry(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class YA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MN()?LN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ry(t){return Lu(JSON.stringify({version:2,heartbeats:t})).length}function XA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){Ls(new Xr("platform-logger",e=>new cA(e),"PRIVATE")),Ls(new Xr("heartbeat",e=>new KA(e),"PRIVATE")),On(Yh,Ay,t),On(Yh,Ay,"esm2017"),On("fire-js","")}JA("");function km(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function B0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZA=B0,$0=new Wa("auth","Firebase",B0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new xm("@firebase/auth");function ek(t,...e){Fu.logLevel<=de.WARN&&Fu.warn(`Auth (${oo}): ${t}`,...e)}function eu(t,...e){Fu.logLevel<=de.ERROR&&Fu.error(`Auth (${oo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,...e){throw Cm(t,...e)}function Mn(t,...e){return Cm(t,...e)}function W0(t,e,n){const r=Object.assign(Object.assign({},ZA()),{[e]:n});return new Wa("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return W0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $0.create(t,...e)}function te(t,e,...n){if(!t)throw Cm(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw eu(e),new Error(e)}function ar(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tk(){return Dy()==="http:"||Dy()==="https:"}function Dy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tk()||DN()||"connection"in navigator)?navigator.onLine:!0}function rk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=CN()||jN()}get(){return nk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ok=new Ga(3e4,6e4);function as(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ls(t,e,n,r,s={}){return G0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=qa(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return RN()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&qs(t.emulatorConfig.host)&&(d.credentials="include"),q0.fetch()(await H0(t,t.config.apiHost,n,l),d)})}async function G0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sk),e);try{const s=new lk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw bl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw bl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw bl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw bl(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw W0(t,f,d);yn(t,f)}}catch(s){if(s instanceof zn)throw s;yn(t,"network-request-failed",{message:String(s)})}}async function Ha(t,e,n,r,s={}){const i=await ls(t,e,n,r,s);return"mfaPendingCredential"in i&&yn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function H0(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Pm(t.config,s):`${t.config.apiScheme}://${s}`;return ik.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function ak(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Mn(this.auth,"network-request-failed")),ok.get())})}}function bl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Mn(t,e,r);return s.customData._tokenResponse=n,s}function jy(t){return t!==void 0&&t.enterprise!==void 0}class uk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ak(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ck(t,e){return ls(t,"GET","/v2/recaptchaConfig",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e){return ls(t,"POST","/v1/accounts:delete",e)}async function Uu(t,e){return ls(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hk(t,e=!1){const n=ze(t),r=await n.getIdToken(e),s=Rm(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ia($d(s.auth_time)),issuedAtTime:ia($d(s.iat)),expirationTime:ia($d(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $d(t){return Number(t)*1e3}function Rm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return eu("JWT malformed, contained fewer than 3 sections"),null;try{const s=D0(n);return s?JSON.parse(s):(eu("Failed to decode base64 JWT payload"),null)}catch(s){return eu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function by(t){const e=Rm(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zn&&fk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ia(this.lastLoginAt),this.creationTime=ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Pa(t,Uu(n,{idToken:r}));te(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?K0(i.providerUserInfo):[],l=gk(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=c?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new ef(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function pk(t){const e=ze(t);await zu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function K0(t){return t.map(e=>{var{providerId:n}=e,r=km(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e){const n=await G0(t,{},async()=>{const r=qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await H0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&qs(t.emulatorConfig.host)&&(c.credentials="include"),q0.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vk(t,e){return ls(t,"POST","/v2/accounts:revokeToken",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):by(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=by(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await yk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Di;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Di,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=km(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ef(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Pa(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hk(this,e)}reload(){return pk(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vt(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await Pa(this,dk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,N=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(l=n.tenantId)!==null&&l!==void 0?l:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(d=n.createdAt)!==null&&d!==void 0?d:void 0,E=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:x,emailVerified:D,isAnonymous:V,providerData:O,stsTokenManager:v}=n;te(x&&v,e,"internal-error");const y=Di.fromJSON(this.name,v);te(typeof x=="string",e,"internal-error"),Tr(p,e.name),Tr(g,e.name),te(typeof D=="boolean",e,"internal-error"),te(typeof V=="boolean",e,"internal-error"),Tr(N,e.name),Tr(A,e.name),Tr(R,e.name),Tr(P,e.name),Tr(S,e.name),Tr(E,e.name);const w=new fn({uid:x,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:V,photoURL:A,phoneNumber:N,tenantId:R,stsTokenManager:y,createdAt:S,lastLoginAt:E});return O&&Array.isArray(O)&&(w.providerData=O.map(T=>Object.assign({},T))),P&&(w._redirectEventId=P),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Di;s.updateFromServerResponse(n);const i=new fn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await zu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?K0(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Di;l.updateFromIdToken(r);const c=new fn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ef(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=new Map;function Xn(t){ar(t instanceof Function,"Expected a class definition");let e=Oy.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Oy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Q0.type="NONE";const My=Q0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t,e,n){return`firebase:${t}:${e}:${n}`}class ji{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=tu(this.userKey,s.apiKey,i),this.fullPersistenceKey=tu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Uu(this.auth,{idToken:e}).catch(()=>{});return n?fn._fromGetAccountInfoResponse(this.auth,n,e):null}return fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ji(Xn(My),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Xn(My);const o=tu(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let p;if(typeof f=="string"){const g=await Uu(e,{idToken:f}).catch(()=>{});if(!g)break;p=await fn._fromGetAccountInfoResponse(e,g,f)}else p=fn._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ji(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ji(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Z0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Y0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tE(e))return"Blackberry";if(nE(e))return"Webos";if(X0(e))return"Safari";if((e.includes("chrome/")||J0(e))&&!e.includes("edge/"))return"Chrome";if(eE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Y0(t=Et()){return/firefox\//i.test(t)}function X0(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function J0(t=Et()){return/crios\//i.test(t)}function Z0(t=Et()){return/iemobile/i.test(t)}function eE(t=Et()){return/android/i.test(t)}function tE(t=Et()){return/blackberry/i.test(t)}function nE(t=Et()){return/webos/i.test(t)}function Dm(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _k(t=Et()){var e;return Dm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wk(){return bN()&&document.documentMode===10}function rE(t=Et()){return Dm(t)||eE(t)||nE(t)||tE(t)||/windows phone/i.test(t)||Z0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t,e=[]){let n;switch(t){case"Browser":n=Ly(Et());break;case"Worker":n=`${Ly(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(t,e={}){return ls(t,"GET","/v2/passwordPolicy",as(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=6;class Sk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Ik,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vy(this),this.idTokenSubscription=new Vy(this),this.beforeStateQueue=new Ek(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ji.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Uu(this,{idToken:e}),r=await fn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Vt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vt(this.app))return Promise.reject(er(this));const n=e?ze(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vt(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vt(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Tk(this),n=new Sk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await ji.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Vt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ek(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Gs(t){return ze(t)}class Vy{constructor(e){this.auth=e,this.observer=null,this.addObserver=BN(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nk(t){kc=t}function iE(t){return kc.loadJS(t)}function Ak(){return kc.recaptchaEnterpriseScript}function kk(){return kc.gapiScript}function Ck(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Pk{constructor(){this.enterprise=new Rk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Rk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Dk="recaptcha-enterprise",oE="NO_RECAPTCHA";class jk{constructor(e){this.type=Dk,this.auth=Gs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{ck(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new uk(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;jy(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(oE)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Pk().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&jy(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Ak();c.length!==0&&(c+=l),iE(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Fy(t,e,n,r=!1,s=!1){const i=new jk(t);let o;if(s)o=oE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function tf(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Fy(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Fy(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t,e){const n=Ac(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ms(i,e??{}))return s;yn(s,"already-initialized")}return n.initialize({options:e})}function Ok(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Mk(t,e,n){const r=Gs(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=aE(e),{host:o,port:l}=Lk(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(Ms(d,r.config.emulator)&&Ms(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,qs(o)?(Im(`${i}//${o}${c}`),Sm("Auth",!0)):Vk()}function aE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Lk(t){const e=aE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Uy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Uy(o)}}}function Uy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Vk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function Fk(t,e){return ls(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e){return Ha(t,"POST","/v1/accounts:signInWithPassword",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t,e){return Ha(t,"POST","/v1/accounts:signInWithEmailLink",as(t,e))}async function Bk(t,e){return Ha(t,"POST","/v1/accounts:signInWithEmailLink",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends jm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ra(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ra(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,n,"signInWithPassword",Uk);case"emailLink":return zk(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,r,"signUpPassword",Fk);case"emailLink":return Bk(e,{idToken:n,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bi(t,e){return Ha(t,"POST","/v1/accounts:signInWithIdp",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="http://localhost";class Vs extends jm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=km(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Vs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return bi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bi(e,n)}buildRequest(){const e={requestUri:$k,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qk(t){const e=$o(Wo(t)).link,n=e?$o(Wo(e)).deep_link_id:null,r=$o(Wo(t)).deep_link_id;return(r?$o(Wo(r)).link:null)||r||n||e||t}class bm{constructor(e){var n,r,s,i,o,l;const c=$o(Wo(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,p=Wk((s=c.mode)!==null&&s!==void 0?s:null);te(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=qk(e);try{return new bm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.providerId=ao.PROVIDER_ID}static credential(e,n){return Ra._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bm.parseLink(n);return te(r,"argument-error"),Ra._fromEmailAndCode(e,r.code,r.tenantId)}}ao.PROVIDER_ID="password";ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends lE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Ka{constructor(){super("facebook.com")}static credential(e){return Vs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vs._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.GOOGLE_SIGN_IN_METHOD="google.com";Cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Ka{constructor(){super("github.com")}static credential(e){return Vs._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Ka{constructor(){super("twitter.com")}static credential(e,n){return Vs._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Rr.credential(n,r)}catch{return null}}}Rr.TWITTER_SIGN_IN_METHOD="twitter.com";Rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(t,e){return Ha(t,"POST","/v1/accounts:signUp",as(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await fn._fromIdTokenResponse(e,r,s),o=zy(r);return new Fs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=zy(r);return new Fs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function zy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends zn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Bu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Bu(e,n,r,s)}}function uE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Bu._fromErrorAndOperation(t,i,e,r):i})}async function Hk(t,e,n=!1){const r=await Pa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(t,e,n=!1){const{auth:r}=t;if(Vt(r.app))return Promise.reject(er(r));const s="reauthenticate";try{const i=await Pa(t,uE(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=Rm(i.idToken);te(o,r,"internal-error");const{sub:l}=o;return te(t.uid===l,r,"user-mismatch"),Fs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&yn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cE(t,e,n=!1){if(Vt(t.app))return Promise.reject(er(t));const r="signIn",s=await uE(t,r,e),i=await Fs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Qk(t,e){return cE(Gs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dE(t){const e=Gs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hE(t,e,n){if(Vt(t.app))return Promise.reject(er(t));const r=Gs(t),o=await tf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gk).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&dE(t),c}),l=await Fs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function fE(t,e,n){return Vt(t.app)?Promise.reject(er(t)):Qk(ze(t),ao.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dE(t),r})}function Yk(t,e,n,r){return ze(t).onIdTokenChanged(e,n,r)}function Xk(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function Jk(t,e,n,r){return ze(t).onAuthStateChanged(e,n,r)}function mE(t){return ze(t).signOut()}const $u="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($u,"1"),this.storage.removeItem($u),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=1e3,eC=10;class gE extends pE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);wk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Zk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gE.type="LOCAL";const tC=gE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE extends pE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yE.type="SESSION";const vE=yE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Cc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await nC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Om("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function sC(t){Ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function iC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aC(){return _E()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="firebaseLocalStorageDb",lC=1,Wu="firebaseLocalStorage",EE="fbase_key";class Qa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pc(t,e){return t.transaction([Wu],e?"readwrite":"readonly").objectStore(Wu)}function uC(){const t=indexedDB.deleteDatabase(wE);return new Qa(t).toPromise()}function nf(){const t=indexedDB.open(wE,lC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wu,{keyPath:EE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wu)?e(r):(r.close(),await uC(),e(await nf()))})})}async function By(t,e,n){const r=Pc(t,!0).put({[EE]:e,value:n});return new Qa(r).toPromise()}async function cC(t,e){const n=Pc(t,!1).get(e),r=await new Qa(n).toPromise();return r===void 0?null:r.value}function $y(t,e){const n=Pc(t,!0).delete(e);return new Qa(n).toPromise()}const dC=800,hC=3;class TE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cc._getInstance(aC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await iC(),!this.activeServiceWorker)return;this.sender=new rC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nf();return await By(e,$u,"1"),await $y(e,$u),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>By(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>cC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$y(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Pc(s,!1).getAll();return new Qa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TE.type="LOCAL";const fC=TE;new Ga(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e){return e?Xn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends jm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pC(t){return cE(t.auth,new Mm(t),t.bypassAuthState)}function gC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),Kk(n,new Mm(t),t.bypassAuthState)}async function yC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),Hk(n,new Mm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pC;case"linkViaPopup":case"linkViaRedirect":return yC;case"reauthViaPopup":case"reauthViaRedirect":return gC;default:yn(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new Ga(2e3,1e4);class xi extends IE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,xi.currentPopupAction&&xi.currentPopupAction.cancel(),xi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=Om();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vC.get())};e()}}xi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="pendingRedirect",nu=new Map;class wC extends IE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=nu.get(this.auth._key());if(!e){try{const r=await EC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nu.set(this.auth._key(),e)}return this.bypassAuthState||nu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EC(t,e){const n=SC(e),r=IC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function TC(t,e){nu.set(t._key(),e)}function IC(t){return Xn(t._redirectPersistence)}function SC(t){return tu(_C,t.config.apiKey,t.name)}async function xC(t,e,n=!1){if(Vt(t.app))return Promise.reject(er(t));const r=Gs(t),s=mC(r,e),o=await new wC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=10*60*1e3;class AC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!SE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Mn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wy(e))}saveEventToCache(e){this.cachedEventUids.add(Wy(e)),this.lastProcessedEventTime=Date.now()}}function Wy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(t,e={}){return ls(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RC=/^https?/;async function DC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CC(t);for(const n of e)try{if(jC(n))return}catch{}yn(t,"unauthorized-domain")}function jC(t){const e=Zh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!RC.test(n))return!1;if(PC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new Ga(3e4,6e4);function qy(){const t=Ln().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OC(t){return new Promise((e,n)=>{var r,s,i;function o(){qy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qy(),n(Mn(t,"network-request-failed"))},timeout:bC.get()})}if(!((s=(r=Ln().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ln().gapi)===null||i===void 0)&&i.load)o();else{const l=Ck("iframefcb");return Ln()[l]=()=>{gapi.load?o():n(Mn(t,"network-request-failed"))},iE(`${kk()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw ru=null,e})}let ru=null;function MC(t){return ru=ru||OC(t),ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Ga(5e3,15e3),VC="__/auth/iframe",FC="emulator/auth/iframe",UC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BC(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pm(e,FC):`https://${t.config.authDomain}/${VC}`,r={apiKey:e.apiKey,appName:t.name,v:oo},s=zC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${qa(r).slice(1)}`}async function $C(t){const e=await MC(t),n=Ln().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:BC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Mn(t,"network-request-failed"),l=Ln().setTimeout(()=>{i(o)},LC.get());function c(){Ln().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qC=500,GC=600,HC="_blank",KC="http://localhost";class Gy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QC(t,e,n,r=qC,s=GC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},WC),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Et().toLowerCase();n&&(l=J0(d)?HC:n),Y0(d)&&(e=e||KC,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[N,A])=>`${g}${N}=${A},`,"");if(_k(d)&&l!=="_self")return YC(e||"",l),new Gy(null);const p=window.open(e||"",l,f);te(p,t,"popup-blocked");try{p.focus()}catch{}return new Gy(p)}function YC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="__/auth/handler",JC="emulator/auth/handler",ZC=encodeURIComponent("fac");async function Hy(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oo,eventId:s};if(e instanceof lE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Ka){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${ZC}=${encodeURIComponent(c)}`:"";return`${eP(t)}?${qa(l).slice(1)}${d}`}function eP({config:t}){return t.emulator?Pm(t,JC):`https://${t.authDomain}/${XC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="webStorageSupport";class tP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vE,this._completeRedirectFn=xC,this._overrideRedirectResult=TC}async _openPopup(e,n,r,s){var i;ar((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Hy(e,n,r,Zh(),s);return QC(e,o,Om())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Hy(e,n,r,Zh(),s);return sC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $C(e),r=new AC(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wd,{type:Wd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Wd];o!==void 0&&n(!!o),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rE()||X0()||Dm()}}const nP=tP;var Ky="@firebase/auth",Qy="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iP(t){Ls(new Xr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sE(t)},d=new xk(r,s,i,c);return Ok(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ls(new Xr("auth-internal",e=>{const n=Gs(e.getProvider("auth").getImmediate());return(r=>new rP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(Ky,Qy,sP(t)),On(Ky,Qy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=5*60,aP=M0("authIdTokenMaxAge")||oP;let Yy=null;const lP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>aP)return;const s=n==null?void 0:n.token;Yy!==s&&(Yy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xE(t=Am()){const e=Ac(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bk(t,{popupRedirectResolver:nP,persistence:[fC,tC,vE]}),r=M0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=lP(i.toString());Xk(n,o,()=>o(n.currentUser)),Yk(n,l=>o(l))}}const s=j0("auth");return s&&Mk(n,`http://${s}`),n}function uP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Nk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Mn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",uP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iP("Browser");var Xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,NE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function w(){}w.prototype=y.prototype,v.D=y.prototype,v.prototype=new w,v.prototype.constructor=v,v.C=function(T,k,C){for(var I=Array(arguments.length-2),re=2;re<arguments.length;re++)I[re-2]=arguments[re];return y.prototype[k].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,w){w||(w=0);var T=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)T[k]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(k=0;16>k;++k)T[k]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=v.g[0],w=v.g[1],k=v.g[2];var C=v.g[3],I=y+(C^w&(k^C))+T[0]+3614090360&4294967295;y=w+(I<<7&4294967295|I>>>25),I=C+(k^y&(w^k))+T[1]+3905402710&4294967295,C=y+(I<<12&4294967295|I>>>20),I=k+(w^C&(y^w))+T[2]+606105819&4294967295,k=C+(I<<17&4294967295|I>>>15),I=w+(y^k&(C^y))+T[3]+3250441966&4294967295,w=k+(I<<22&4294967295|I>>>10),I=y+(C^w&(k^C))+T[4]+4118548399&4294967295,y=w+(I<<7&4294967295|I>>>25),I=C+(k^y&(w^k))+T[5]+1200080426&4294967295,C=y+(I<<12&4294967295|I>>>20),I=k+(w^C&(y^w))+T[6]+2821735955&4294967295,k=C+(I<<17&4294967295|I>>>15),I=w+(y^k&(C^y))+T[7]+4249261313&4294967295,w=k+(I<<22&4294967295|I>>>10),I=y+(C^w&(k^C))+T[8]+1770035416&4294967295,y=w+(I<<7&4294967295|I>>>25),I=C+(k^y&(w^k))+T[9]+2336552879&4294967295,C=y+(I<<12&4294967295|I>>>20),I=k+(w^C&(y^w))+T[10]+4294925233&4294967295,k=C+(I<<17&4294967295|I>>>15),I=w+(y^k&(C^y))+T[11]+2304563134&4294967295,w=k+(I<<22&4294967295|I>>>10),I=y+(C^w&(k^C))+T[12]+1804603682&4294967295,y=w+(I<<7&4294967295|I>>>25),I=C+(k^y&(w^k))+T[13]+4254626195&4294967295,C=y+(I<<12&4294967295|I>>>20),I=k+(w^C&(y^w))+T[14]+2792965006&4294967295,k=C+(I<<17&4294967295|I>>>15),I=w+(y^k&(C^y))+T[15]+1236535329&4294967295,w=k+(I<<22&4294967295|I>>>10),I=y+(k^C&(w^k))+T[1]+4129170786&4294967295,y=w+(I<<5&4294967295|I>>>27),I=C+(w^k&(y^w))+T[6]+3225465664&4294967295,C=y+(I<<9&4294967295|I>>>23),I=k+(y^w&(C^y))+T[11]+643717713&4294967295,k=C+(I<<14&4294967295|I>>>18),I=w+(C^y&(k^C))+T[0]+3921069994&4294967295,w=k+(I<<20&4294967295|I>>>12),I=y+(k^C&(w^k))+T[5]+3593408605&4294967295,y=w+(I<<5&4294967295|I>>>27),I=C+(w^k&(y^w))+T[10]+38016083&4294967295,C=y+(I<<9&4294967295|I>>>23),I=k+(y^w&(C^y))+T[15]+3634488961&4294967295,k=C+(I<<14&4294967295|I>>>18),I=w+(C^y&(k^C))+T[4]+3889429448&4294967295,w=k+(I<<20&4294967295|I>>>12),I=y+(k^C&(w^k))+T[9]+568446438&4294967295,y=w+(I<<5&4294967295|I>>>27),I=C+(w^k&(y^w))+T[14]+3275163606&4294967295,C=y+(I<<9&4294967295|I>>>23),I=k+(y^w&(C^y))+T[3]+4107603335&4294967295,k=C+(I<<14&4294967295|I>>>18),I=w+(C^y&(k^C))+T[8]+1163531501&4294967295,w=k+(I<<20&4294967295|I>>>12),I=y+(k^C&(w^k))+T[13]+2850285829&4294967295,y=w+(I<<5&4294967295|I>>>27),I=C+(w^k&(y^w))+T[2]+4243563512&4294967295,C=y+(I<<9&4294967295|I>>>23),I=k+(y^w&(C^y))+T[7]+1735328473&4294967295,k=C+(I<<14&4294967295|I>>>18),I=w+(C^y&(k^C))+T[12]+2368359562&4294967295,w=k+(I<<20&4294967295|I>>>12),I=y+(w^k^C)+T[5]+4294588738&4294967295,y=w+(I<<4&4294967295|I>>>28),I=C+(y^w^k)+T[8]+2272392833&4294967295,C=y+(I<<11&4294967295|I>>>21),I=k+(C^y^w)+T[11]+1839030562&4294967295,k=C+(I<<16&4294967295|I>>>16),I=w+(k^C^y)+T[14]+4259657740&4294967295,w=k+(I<<23&4294967295|I>>>9),I=y+(w^k^C)+T[1]+2763975236&4294967295,y=w+(I<<4&4294967295|I>>>28),I=C+(y^w^k)+T[4]+1272893353&4294967295,C=y+(I<<11&4294967295|I>>>21),I=k+(C^y^w)+T[7]+4139469664&4294967295,k=C+(I<<16&4294967295|I>>>16),I=w+(k^C^y)+T[10]+3200236656&4294967295,w=k+(I<<23&4294967295|I>>>9),I=y+(w^k^C)+T[13]+681279174&4294967295,y=w+(I<<4&4294967295|I>>>28),I=C+(y^w^k)+T[0]+3936430074&4294967295,C=y+(I<<11&4294967295|I>>>21),I=k+(C^y^w)+T[3]+3572445317&4294967295,k=C+(I<<16&4294967295|I>>>16),I=w+(k^C^y)+T[6]+76029189&4294967295,w=k+(I<<23&4294967295|I>>>9),I=y+(w^k^C)+T[9]+3654602809&4294967295,y=w+(I<<4&4294967295|I>>>28),I=C+(y^w^k)+T[12]+3873151461&4294967295,C=y+(I<<11&4294967295|I>>>21),I=k+(C^y^w)+T[15]+530742520&4294967295,k=C+(I<<16&4294967295|I>>>16),I=w+(k^C^y)+T[2]+3299628645&4294967295,w=k+(I<<23&4294967295|I>>>9),I=y+(k^(w|~C))+T[0]+4096336452&4294967295,y=w+(I<<6&4294967295|I>>>26),I=C+(w^(y|~k))+T[7]+1126891415&4294967295,C=y+(I<<10&4294967295|I>>>22),I=k+(y^(C|~w))+T[14]+2878612391&4294967295,k=C+(I<<15&4294967295|I>>>17),I=w+(C^(k|~y))+T[5]+4237533241&4294967295,w=k+(I<<21&4294967295|I>>>11),I=y+(k^(w|~C))+T[12]+1700485571&4294967295,y=w+(I<<6&4294967295|I>>>26),I=C+(w^(y|~k))+T[3]+2399980690&4294967295,C=y+(I<<10&4294967295|I>>>22),I=k+(y^(C|~w))+T[10]+4293915773&4294967295,k=C+(I<<15&4294967295|I>>>17),I=w+(C^(k|~y))+T[1]+2240044497&4294967295,w=k+(I<<21&4294967295|I>>>11),I=y+(k^(w|~C))+T[8]+1873313359&4294967295,y=w+(I<<6&4294967295|I>>>26),I=C+(w^(y|~k))+T[15]+4264355552&4294967295,C=y+(I<<10&4294967295|I>>>22),I=k+(y^(C|~w))+T[6]+2734768916&4294967295,k=C+(I<<15&4294967295|I>>>17),I=w+(C^(k|~y))+T[13]+1309151649&4294967295,w=k+(I<<21&4294967295|I>>>11),I=y+(k^(w|~C))+T[4]+4149444226&4294967295,y=w+(I<<6&4294967295|I>>>26),I=C+(w^(y|~k))+T[11]+3174756917&4294967295,C=y+(I<<10&4294967295|I>>>22),I=k+(y^(C|~w))+T[2]+718787259&4294967295,k=C+(I<<15&4294967295|I>>>17),I=w+(C^(k|~y))+T[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,v.g[2]=v.g[2]+k&4294967295,v.g[3]=v.g[3]+C&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var w=y-this.blockSize,T=this.B,k=this.h,C=0;C<y;){if(k==0)for(;C<=w;)s(this,v,C),C+=this.blockSize;if(typeof v=="string"){for(;C<y;)if(T[k++]=v.charCodeAt(C++),k==this.blockSize){s(this,T),k=0;break}}else for(;C<y;)if(T[k++]=v[C++],k==this.blockSize){s(this,T),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var w=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=w&255,w/=256;for(this.u(v),v=Array(16),y=w=0;4>y;++y)for(var T=0;32>T;T+=8)v[w++]=this.g[y]>>>T&255;return v};function i(v,y){var w=l;return Object.prototype.hasOwnProperty.call(w,v)?w[v]:w[v]=y(v)}function o(v,y){this.h=y;for(var w=[],T=!0,k=v.length-1;0<=k;k--){var C=v[k]|0;T&&C==y||(w[k]=C,T=!1)}this.g=w}var l={};function c(v){return-128<=v&&128>v?i(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return p;if(0>v)return P(d(-v));for(var y=[],w=1,T=0;v>=w;T++)y[T]=v/w|0,w*=4294967296;return new o(y,0)}function f(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return P(f(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(y,8)),T=p,k=0;k<v.length;k+=8){var C=Math.min(8,v.length-k),I=parseInt(v.substring(k,k+C),y);8>C?(C=d(Math.pow(y,C)),T=T.j(C).add(d(I))):(T=T.j(w),T=T.add(d(I)))}return T}var p=c(0),g=c(1),N=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();for(var v=0,y=1,w=0;w<this.g.length;w++){var T=this.i(w);v+=(0<=T?T:4294967296+T)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(A(this))return"0";if(R(this))return"-"+P(this).toString(v);for(var y=d(Math.pow(v,6)),w=this,T="";;){var k=D(w,y).g;w=S(w,k.j(y));var C=((0<w.g.length?w.g[0]:w.h)>>>0).toString(v);if(w=k,A(w))return C+T;for(;6>C.length;)C="0"+C;T=C+T}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function A(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function R(v){return v.h==-1}t.l=function(v){return v=S(this,v),R(v)?-1:A(v)?0:1};function P(v){for(var y=v.g.length,w=[],T=0;T<y;T++)w[T]=~v.g[T];return new o(w,~v.h).add(g)}t.abs=function(){return R(this)?P(this):this},t.add=function(v){for(var y=Math.max(this.g.length,v.g.length),w=[],T=0,k=0;k<=y;k++){var C=T+(this.i(k)&65535)+(v.i(k)&65535),I=(C>>>16)+(this.i(k)>>>16)+(v.i(k)>>>16);T=I>>>16,C&=65535,I&=65535,w[k]=I<<16|C}return new o(w,w[w.length-1]&-2147483648?-1:0)};function S(v,y){return v.add(P(y))}t.j=function(v){if(A(this)||A(v))return p;if(R(this))return R(v)?P(this).j(P(v)):P(P(this).j(v));if(R(v))return P(this.j(P(v)));if(0>this.l(N)&&0>v.l(N))return d(this.m()*v.m());for(var y=this.g.length+v.g.length,w=[],T=0;T<2*y;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var k=0;k<v.g.length;k++){var C=this.i(T)>>>16,I=this.i(T)&65535,re=v.i(k)>>>16,Ge=v.i(k)&65535;w[2*T+2*k]+=I*Ge,E(w,2*T+2*k),w[2*T+2*k+1]+=C*Ge,E(w,2*T+2*k+1),w[2*T+2*k+1]+=I*re,E(w,2*T+2*k+1),w[2*T+2*k+2]+=C*re,E(w,2*T+2*k+2)}for(T=0;T<y;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=y;T<2*y;T++)w[T]=0;return new o(w,0)};function E(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function x(v,y){this.g=v,this.h=y}function D(v,y){if(A(y))throw Error("division by zero");if(A(v))return new x(p,p);if(R(v))return y=D(P(v),y),new x(P(y.g),P(y.h));if(R(y))return y=D(v,P(y)),new x(P(y.g),y.h);if(30<v.g.length){if(R(v)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var w=g,T=y;0>=T.l(v);)w=V(w),T=V(T);var k=O(w,1),C=O(T,1);for(T=O(T,2),w=O(w,2);!A(T);){var I=C.add(T);0>=I.l(v)&&(k=k.add(w),C=I),T=O(T,1),w=O(w,1)}return y=S(v,k.j(y)),new x(k,y)}for(k=p;0<=v.l(y);){for(w=Math.max(1,Math.floor(v.m()/y.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),C=d(w),I=C.j(y);R(I)||0<I.l(v);)w-=T,C=d(w),I=C.j(y);A(C)&&(C=g),k=k.add(C),v=S(v,I)}return new x(k,v)}t.A=function(v){return D(this,v).h},t.and=function(v){for(var y=Math.max(this.g.length,v.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)&v.i(T);return new o(w,this.h&v.h)},t.or=function(v){for(var y=Math.max(this.g.length,v.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)|v.i(T);return new o(w,this.h|v.h)},t.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),w=[],T=0;T<y;T++)w[T]=this.i(T)^v.i(T);return new o(w,this.h^v.h)};function V(v){for(var y=v.g.length+1,w=[],T=0;T<y;T++)w[T]=v.i(T)<<1|v.i(T-1)>>>31;return new o(w,v.h)}function O(v,y){var w=y>>5;y%=32;for(var T=v.g.length-w,k=[],C=0;C<T;C++)k[C]=0<y?v.i(C+w)>>>y|v.i(C+w+1)<<32-y:v.i(C+w);return new o(k,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,NE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Hr=o}).apply(typeof Xy<"u"?Xy:typeof self<"u"?self:typeof window<"u"?window:{});var Ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AE,qo,kE,su,rf,CE,PE,RE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ol=="object"&&Ol];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var M=a[_];if(!(M in m))break e;m=m[M]}a=a[a.length-1],_=m[a],h=h(_),h!=_&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,_=!1,M={next:function(){if(!_&&m<a.length){var L=m++;return{value:h(L,a[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,_),a.apply(h,M)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function N(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function A(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(_,M,L){for(var G=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)G[_e-2]=arguments[_e];return h.prototype[M].apply(_,G)}}function R(a){const h=a.length;if(0<h){const m=Array(h);for(let _=0;_<h;_++)m[_]=a[_];return m}return[]}function P(a,h){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(c(_)){const M=a.length||0,L=_.length||0;a.length=M+L;for(let G=0;G<L;G++)a[M+G]=_[G]}else a.push(_)}}class S{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var V=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function O(a,h,m){for(const _ in a)h.call(m,a[_],_,a)}function v(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function y(a){const h={};for(const m in a)h[m]=a[m];return h}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,h){let m,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(m in _)a[m]=_[m];for(let L=0;L<w.length;L++)m=w[L],Object.prototype.hasOwnProperty.call(_,m)&&(a[m]=_[m])}}function k(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function C(a){l.setTimeout(()=>{throw a},0)}function I(){var a=X;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class re{constructor(){this.h=this.g=null}add(h,m){const _=Ge.get();_.set(h,m),this.h?this.h.next=_:this.g=_,this.h=_}}var Ge=new S(()=>new Z,a=>a.reset());class Z{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,q=!1,X=new re,se=()=>{const a=l.Promise.resolve(void 0);Ie=()=>{a.then(Se)}};var Se=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(m){C(m)}var h=Ge;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}q=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var rn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function sn(a,h){if(Ee.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(V){e:{try{D(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:on[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&sn.aa.h.call(this)}}A(sn,Ee);var on={2:"touch",3:"pen",4:"mouse"};sn.prototype.h=function(){sn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var an="closure_listenable_"+(1e6*Math.random()|0),Yc=0;function Xc(a,h,m,_,M){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!_,this.ha=M,this.key=++Yc,this.da=this.fa=!1}function Xs(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Js(a){this.src=a,this.g={},this.h=0}Js.prototype.add=function(a,h,m,_,M){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var G=po(a,h,_,M);return-1<G?(h=a[G],m||(h.fa=!1)):(h=new Xc(h,this.src,L,!!_,M),h.fa=m,a.push(h)),h};function mo(a,h){var m=h.type;if(m in a.g){var _=a.g[m],M=Array.prototype.indexOf.call(_,h,void 0),L;(L=0<=M)&&Array.prototype.splice.call(_,M,1),L&&(Xs(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function po(a,h,m,_){for(var M=0;M<a.length;++M){var L=a[M];if(!L.da&&L.listener==h&&L.capture==!!m&&L.ha==_)return M}return-1}var go="closure_lm_"+(1e6*Math.random()|0),yo={};function tl(a,h,m,_,M){if(Array.isArray(h)){for(var L=0;L<h.length;L++)tl(a,h[L],m,_,M);return null}return m=U(m),a&&a[an]?a.K(h,m,d(_)?!!_.capture:!1,M):nl(a,h,m,!1,_,M)}function nl(a,h,m,_,M,L){if(!h)throw Error("Invalid event type");var G=d(M)?!!M.capture:!!M,_e=Zs(a);if(_e||(a[go]=_e=new Js(a)),m=_e.add(h,m,_,G,L),m.proxy)return m;if(_=Jc(),m.proxy=_,_.src=a,_.listener=m,a.addEventListener)rn||(M=G),M===void 0&&(M=!1),a.addEventListener(h.toString(),_,M);else if(a.attachEvent)a.attachEvent(rl(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Jc(){function a(m){return h.call(a.src,a.listener,m)}const h=Zc;return a}function wn(a,h,m,_,M){if(Array.isArray(h))for(var L=0;L<h.length;L++)wn(a,h[L],m,_,M);else _=d(_)?!!_.capture:!!_,m=U(m),a&&a[an]?(a=a.i,h=String(h).toString(),h in a.g&&(L=a.g[h],m=po(L,m,_,M),-1<m&&(Xs(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete a.g[h],a.h--)))):a&&(a=Zs(a))&&(h=a.g[h.toString()],a=-1,h&&(a=po(h,m,_,M)),(m=-1<a?h[a]:null)&&vo(m))}function vo(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[an])mo(h.i,a);else{var m=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(m,_,a.capture):h.detachEvent?h.detachEvent(rl(m),_):h.addListener&&h.removeListener&&h.removeListener(_),(m=Zs(h))?(mo(m,a),m.h==0&&(m.src=null,h[go]=null)):Xs(a)}}}function rl(a){return a in yo?yo[a]:yo[a]="on"+a}function Zc(a,h){if(a.da)a=!0;else{h=new sn(h,this);var m=a.listener,_=a.ha||a.src;a.fa&&vo(a),a=m.call(_,h)}return a}function Zs(a){return a=a[go],a instanceof Js?a:null}var b="__closure_events_fn_"+(1e9*Math.random()>>>0);function U(a){return typeof a=="function"?a:(a[b]||(a[b]=function(h){return a.handleEvent(h)}),a[b])}function $(){ge.call(this),this.i=new Js(this),this.M=this,this.F=null}A($,ge),$.prototype[an]=!0,$.prototype.removeEventListener=function(a,h,m,_){wn(this,a,h,m,_)};function H(a,h){var m,_=a.F;if(_)for(m=[];_;_=_.F)m.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new Ee(h,a);else if(h instanceof Ee)h.target=h.target||a;else{var M=h;h=new Ee(_,a),T(h,M)}if(M=!0,m)for(var L=m.length-1;0<=L;L--){var G=h.g=m[L];M=ee(G,_,!0,h)&&M}if(G=h.g=a,M=ee(G,_,!0,h)&&M,M=ee(G,_,!1,h)&&M,m)for(L=0;L<m.length;L++)G=h.g=m[L],M=ee(G,_,!1,h)&&M}$.prototype.N=function(){if($.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],_=0;_<m.length;_++)Xs(m[_]);delete a.g[h],a.h--}}this.F=null},$.prototype.K=function(a,h,m,_){return this.i.add(String(a),h,!1,m,_)},$.prototype.L=function(a,h,m,_){return this.i.add(String(a),h,!0,m,_)};function ee(a,h,m,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,L=0;L<h.length;++L){var G=h[L];if(G&&!G.da&&G.capture==m){var _e=G.listener,nt=G.ha||G.src;G.fa&&mo(a.i,G),M=_e.call(nt,_)!==!1&&M}}return M&&!_.defaultPrevented}function ae(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function ce(a){a.g=ae(()=>{a.g=null,a.i&&(a.i=!1,ce(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ut extends ge{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ce(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(a){ge.call(this),this.h=a,this.g={}}A(Pe,ge);var ei=[];function _o(a){O(a.g,function(h,m){this.g.hasOwnProperty(m)&&vo(h)},a),a.g={}}Pe.prototype.N=function(){Pe.aa.N.call(this),_o(this)},Pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ti=l.JSON.stringify,wo=l.JSON.parse,ds=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Bn(){}Bn.prototype.h=null;function hs(a){return a.h||(a.h=a.i())}function fr(){}var En={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $n(){Ee.call(this,"d")}A($n,Ee);function mr(){Ee.call(this,"c")}A(mr,Ee);var Tn={},Eo=null;function In(){return Eo=Eo||new $}Tn.La="serverreachability";function pr(a){Ee.call(this,Tn.La,a)}A(pr,Ee);function Sn(a){const h=In();H(h,new pr(h))}Tn.STAT_EVENT="statevent";function fs(a,h){Ee.call(this,Tn.STAT_EVENT,a),this.stat=h}A(fs,Ee);function Be(a){const h=In();H(h,new fs(h,a))}Tn.Ma="timingevent";function gr(a,h){Ee.call(this,Tn.Ma,a),this.size=h}A(gr,Ee);function xn(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function yr(){this.g=!0}yr.prototype.xa=function(){this.g=!1};function sl(a,h,m,_,M,L){a.info(function(){if(a.g)if(L)for(var G="",_e=L.split("&"),nt=0;nt<_e.length;nt++){var pe=_e[nt].split("=");if(1<pe.length){var dt=pe[0];pe=pe[1];var ht=dt.split("_");G=2<=ht.length&&ht[1]=="type"?G+(dt+"="+pe+"&"):G+(dt+"=redacted&")}}else G=null;else G=L;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+h+`
`+m+`
`+G})}function ms(a,h,m,_,M,L,G){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+h+`
`+m+`
`+L+" "+G})}function Gt(a,h,m,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+ps(a,m)+(_?" "+_:"")})}function ni(a,h){a.info(function(){return"TIMEOUT: "+h})}yr.prototype.info=function(){};function ps(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var _=m[a];if(!(2>_.length)){var M=_[1];if(Array.isArray(M)&&!(1>M.length)){var L=M[0];if(L!="noop"&&L!="stop"&&L!="close")for(var G=1;G<M.length;G++)M[G]=""}}}}return ti(m)}catch{return h}}var vr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ve={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},et;function tt(){}A(tt,Bn),tt.prototype.g=function(){return new XMLHttpRequest},tt.prototype.i=function(){return{}},et=new tt;function ct(a,h,m,_){this.j=a,this.i=h,this.l=m,this.R=_||1,this.U=new Pe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}var Tp={},ed={};function td(a,h,m){a.L=1,a.v=ll(Wn(h)),a.m=m,a.P=!0,Ip(a,null)}function Ip(a,h){a.F=Date.now(),il(a),a.A=Wn(a.v);var m=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),Lp(m.i,"t",_),a.C=0,m=a.j.J,a.h=new ri,a.g=tg(a.j,m?h:null,!a.m),0<a.O&&(a.M=new ut(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,_=a.ca;var M="readystatechange";Array.isArray(M)||(M&&(ei[0]=M.toString()),M=ei);for(var L=0;L<M.length;L++){var G=tl(m,M[L],_||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Sn(),sl(a.i,a.u,a.A,a.l,a.R,a.m)}ct.prototype.ca=function(a){a=a.target;const h=this.M;h&&qn(a)==3?h.j():this.Y(a)},ct.prototype.Y=function(a){try{if(a==this.g)e:{const ht=qn(this.g);var h=this.g.Ba();const oi=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||Wp(this.g)))){this.J||ht!=4||h==7||(h==8||0>=oi?Sn(3):Sn(2)),nd(this);var m=this.g.Z();this.X=m;t:if(Sp(this)){var _=Wp(this.g);a="";var M=_.length,L=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gs(this),To(this);var G="";break t}this.h.i=new l.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(L&&h==M-1)});_.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,ms(this.i,this.u,this.A,this.l,this.R,ht,m),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,nt=this.g;if((_e=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(_e)){var pe=_e;break t}}pe=null}if(m=pe)Gt(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rd(this,m);else{this.o=!1,this.s=3,Be(12),gs(this),To(this);break e}}if(this.P){m=!0;let ln;for(;!this.J&&this.C<G.length;)if(ln=yI(this,G),ln==ed){ht==4&&(this.s=4,Be(14),m=!1),Gt(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Tp){this.s=4,Be(15),Gt(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else Gt(this.i,this.l,ln,null),rd(this,ln);if(Sp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||G.length!=0||this.h.h||(this.s=1,Be(16),m=!1),this.o=this.o&&m,!m)Gt(this.i,this.l,G,"[Invalid Chunked Response]"),gs(this),To(this);else if(0<G.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),ud(dt),dt.M=!0,Be(11))}}else Gt(this.i,this.l,G,null),rd(this,G);ht==4&&gs(this),this.o&&!this.J&&(ht==4?Xp(this.j,this):(this.o=!1,il(this)))}else bI(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,Be(12)):(this.s=0,Be(13)),gs(this),To(this)}}}catch{}finally{}};function Sp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function yI(a,h){var m=a.C,_=h.indexOf(`
`,m);return _==-1?ed:(m=Number(h.substring(m,_)),isNaN(m)?Tp:(_+=1,_+m>h.length?ed:(h=h.slice(_,_+m),a.C=_+m,h)))}ct.prototype.cancel=function(){this.J=!0,gs(this)};function il(a){a.S=Date.now()+a.I,xp(a,a.I)}function xp(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=xn(g(a.ba,a),h)}function nd(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ct.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ni(this.i,this.A),this.L!=2&&(Sn(),Be(17)),gs(this),this.s=2,To(this)):xp(this,this.S-a)};function To(a){a.j.G==0||a.J||Xp(a.j,a)}function gs(a){nd(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,_o(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function rd(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||sd(m.h,a))){if(!a.K&&sd(m.h,a)&&m.G==3){try{var _=m.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)ml(m),hl(m);else break e;ld(m),Be(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=xn(g(m.Za,m),6e3));if(1>=kp(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else vs(m,11)}else if((a.K||m.g==a)&&ml(m),!E(h))for(M=m.Da.g.parse(h),h=0;h<M.length;h++){let pe=M[h];if(m.T=pe[0],pe=pe[1],m.G==2)if(pe[0]=="c"){m.K=pe[1],m.ia=pe[2];const dt=pe[3];dt!=null&&(m.la=dt,m.j.info("VER="+m.la));const ht=pe[4];ht!=null&&(m.Aa=ht,m.j.info("SVER="+m.Aa));const oi=pe[5];oi!=null&&typeof oi=="number"&&0<oi&&(_=1.5*oi,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const ln=a.g;if(ln){const gl=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gl){var L=_.h;L.g||gl.indexOf("spdy")==-1&&gl.indexOf("quic")==-1&&gl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(id(L,L.h),L.h=null))}if(_.D){const cd=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;cd&&(_.ya=cd,xe(_.I,_.D,cd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var G=a;if(_.qa=eg(_,_.J?_.ia:null,_.W),G.K){Cp(_.h,G);var _e=G,nt=_.L;nt&&(_e.I=nt),_e.B&&(nd(_e),il(_e)),_.g=G}else Qp(_);0<m.i.length&&fl(m)}else pe[0]!="stop"&&pe[0]!="close"||vs(m,7);else m.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?vs(m,7):ad(m):pe[0]!="noop"&&m.l&&m.l.ta(pe),m.v=0)}}Sn(4)}catch{}}var vI=class{constructor(a,h){this.g=a,this.map=h}};function Np(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ap(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function kp(a){return a.h?1:a.g?a.g.size:0}function sd(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function id(a,h){a.g?a.g.add(h):a.h=h}function Cp(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Np.prototype.cancel=function(){if(this.i=Pp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Pp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return R(a.i)}function _I(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],m=a.length,_=0;_<m;_++)h.push(a[_]);return h}h=[],m=0;for(_ in a)h[m++]=a[_];return h}function wI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const _ in a)h[m++]=_;return h}}}function Rp(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=wI(a),_=_I(a),M=_.length,L=0;L<M;L++)h.call(void 0,_[L],m&&m[L],a)}var Dp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EI(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var _=a[m].indexOf("="),M=null;if(0<=_){var L=a[m].substring(0,_);M=a[m].substring(_+1)}else L=a[m];h(L,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function ys(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ys){this.h=a.h,ol(this,a.j),this.o=a.o,this.g=a.g,al(this,a.s),this.l=a.l;var h=a.i,m=new xo;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),jp(this,m),this.m=a.m}else a&&(h=String(a).match(Dp))?(this.h=!1,ol(this,h[1]||"",!0),this.o=Io(h[2]||""),this.g=Io(h[3]||"",!0),al(this,h[4]),this.l=Io(h[5]||"",!0),jp(this,h[6]||"",!0),this.m=Io(h[7]||"")):(this.h=!1,this.i=new xo(null,this.h))}ys.prototype.toString=function(){var a=[],h=this.j;h&&a.push(So(h,bp,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(So(h,bp,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(So(m,m.charAt(0)=="/"?SI:II,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",So(m,NI)),a.join("")};function Wn(a){return new ys(a)}function ol(a,h,m){a.j=m?Io(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function al(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function jp(a,h,m){h instanceof xo?(a.i=h,AI(a.i,a.h)):(m||(h=So(h,xI)),a.i=new xo(h,a.h))}function xe(a,h,m){a.i.set(h,m)}function ll(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Io(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function So(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,TI),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function TI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var bp=/[#\/\?@]/g,II=/[#\?:]/g,SI=/[#\?]/g,xI=/[#\?@]/g,NI=/#/g;function xo(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function _r(a){a.g||(a.g=new Map,a.h=0,a.i&&EI(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=xo.prototype,t.add=function(a,h){_r(this),this.i=null,a=si(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function Op(a,h){_r(a),h=si(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Mp(a,h){return _r(a),h=si(a,h),a.g.has(h)}t.forEach=function(a,h){_r(this),this.g.forEach(function(m,_){m.forEach(function(M){a.call(h,M,_,this)},this)},this)},t.na=function(){_r(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let _=0;_<h.length;_++){const M=a[_];for(let L=0;L<M.length;L++)m.push(h[_])}return m},t.V=function(a){_r(this);let h=[];if(typeof a=="string")Mp(this,a)&&(h=h.concat(this.g.get(si(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return _r(this),this.i=null,a=si(this,a),Mp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Lp(a,h,m){Op(a,h),0<m.length&&(a.i=null,a.g.set(si(a,h),R(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var _=h[m];const L=encodeURIComponent(String(_)),G=this.V(_);for(_=0;_<G.length;_++){var M=L;G[_]!==""&&(M+="="+encodeURIComponent(String(G[_]))),a.push(M)}}return this.i=a.join("&")};function si(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function AI(a,h){h&&!a.j&&(_r(a),a.i=null,a.g.forEach(function(m,_){var M=_.toLowerCase();_!=M&&(Op(this,_),Lp(this,M,m))},a)),a.j=h}function kI(a,h){const m=new yr;if(l.Image){const _=new Image;_.onload=N(wr,m,"TestLoadImage: loaded",!0,h,_),_.onerror=N(wr,m,"TestLoadImage: error",!1,h,_),_.onabort=N(wr,m,"TestLoadImage: abort",!1,h,_),_.ontimeout=N(wr,m,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function CI(a,h){const m=new yr,_=new AbortController,M=setTimeout(()=>{_.abort(),wr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(L=>{clearTimeout(M),L.ok?wr(m,"TestPingServer: ok",!0,h):wr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),wr(m,"TestPingServer: error",!1,h)})}function wr(a,h,m,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(m)}catch{}}function PI(){this.g=new ds}function RI(a,h,m){const _=m||"";try{Rp(a,function(M,L){let G=M;d(M)&&(G=ti(M)),h.push(_+L+"="+encodeURIComponent(G))})}catch(M){throw h.push(_+"type="+encodeURIComponent("_badmap")),M}}function ul(a){this.l=a.Ub||null,this.j=a.eb||!1}A(ul,Bn),ul.prototype.g=function(){return new cl(this.l,this.j)},ul.prototype.i=function(a){return function(){return a}}({});function cl(a,h){$.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(cl,$),t=cl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Ao(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,No(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?No(this):Ao(this),this.readyState==3&&Vp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,No(this))},t.Qa=function(a){this.g&&(this.response=a,No(this))},t.ga=function(){this.g&&No(this)};function No(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ao(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function Ao(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Fp(a){let h="";return O(a,function(m,_){h+=_,h+=":",h+=m,h+=`\r
`}),h}function od(a,h,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Fp(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):xe(a,h,m))}function Me(a){$.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Me,$);var DI=/^https?$/i,jI=["POST","PUT"];t=Me.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():et.g(),this.v=this.o?hs(this.o):hs(et),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){Up(this,L);return}if(a=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)m.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())m.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),M=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(jI,h,void 0))||_||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,G]of m)this.g.setRequestHeader(L,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$p(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Up(this,L)}};function Up(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,zp(a),dl(a)}function zp(a){a.A||(a.A=!0,H(a,"complete"),H(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,H(this,"complete"),H(this,"abort"),dl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dl(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Bp(this):this.bb())},t.bb=function(){Bp(this)};function Bp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||qn(a)!=4||a.Z()!=2)){if(a.u&&qn(a)==4)ae(a.Ea,0,a);else if(H(a,"readystatechange"),qn(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var _;if(_=G===0){var M=String(a.D).match(Dp)[1]||null;!M&&l.self&&l.self.location&&(M=l.self.location.protocol.slice(0,-1)),_=!DI.test(M?M.toLowerCase():"")}m=_}if(m)H(a,"complete"),H(a,"success");else{a.m=6;try{var L=2<qn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",zp(a)}}finally{dl(a)}}}}function dl(a,h){if(a.g){$p(a);const m=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||H(a,"ready");try{m.onreadystatechange=_}catch{}}}function $p(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function qn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),wo(h)}};function Wp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function bI(a){const h={};a=(a.g&&2<=qn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(E(a[_]))continue;var m=k(a[_]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=h[M]||[];h[M]=L,L.push(m)}v(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ko(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function qp(a){this.Aa=0,this.i=[],this.j=new yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ko("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ko("baseRetryDelayMs",5e3,a),this.cb=ko("retryDelaySeedMs",1e4,a),this.Wa=ko("forwardChannelMaxRetries",2,a),this.wa=ko("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Np(a&&a.concurrentRequestLimit),this.Da=new PI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=qp.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,_){Be(0),this.W=a,this.H=h||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=eg(this,null,this.W),fl(this)};function ad(a){if(Gp(a),a.G==3){var h=a.U++,m=Wn(a.I);if(xe(m,"SID",a.K),xe(m,"RID",h),xe(m,"TYPE","terminate"),Co(a,m),h=new ct(a,a.j,h),h.L=2,h.v=ll(Wn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=tg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),il(h)}Zp(a)}function hl(a){a.g&&(ud(a),a.g.cancel(),a.g=null)}function Gp(a){hl(a),a.u&&(l.clearTimeout(a.u),a.u=null),ml(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function fl(a){if(!Ap(a.h)&&!a.s){a.s=!0;var h=a.Ga;Ie||se(),q||(Ie(),q=!0),X.add(h,a),a.B=0}}function OI(a,h){return kp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=xn(g(a.Ga,a,h),Jp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const M=new ct(this,this.j,a);let L=this.o;if(this.S&&(L?(L=y(L),T(L,this.S)):L=this.S),this.m!==null||this.O||(M.H=L,L=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Kp(this,M,h),m=Wn(this.I),xe(m,"RID",a),xe(m,"CVER",22),this.D&&xe(m,"X-HTTP-Session-Id",this.D),Co(this,m),L&&(this.O?h="headers="+encodeURIComponent(String(Fp(L)))+"&"+h:this.m&&od(m,this.m,L)),id(this.h,M),this.Ua&&xe(m,"TYPE","init"),this.P?(xe(m,"$req",h),xe(m,"SID","null"),M.T=!0,td(M,m,null)):td(M,m,h),this.G=2}}else this.G==3&&(a?Hp(this,a):this.i.length==0||Ap(this.h)||Hp(this))};function Hp(a,h){var m;h?m=h.l:m=a.U++;const _=Wn(a.I);xe(_,"SID",a.K),xe(_,"RID",m),xe(_,"AID",a.T),Co(a,_),a.m&&a.o&&od(_,a.m,a.o),m=new ct(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Kp(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),id(a.h,m),td(m,_,h)}function Co(a,h){a.H&&O(a.H,function(m,_){xe(h,_,m)}),a.l&&Rp({},function(m,_){xe(h,_,m)})}function Kp(a,h,m){m=Math.min(a.i.length,m);var _=a.l?g(a.l.Na,a.l,a):null;e:{var M=a.i;let L=-1;for(;;){const G=["count="+m];L==-1?0<m?(L=M[0].g,G.push("ofs="+L)):L=0:G.push("ofs="+L);let _e=!0;for(let nt=0;nt<m;nt++){let pe=M[nt].g;const dt=M[nt].map;if(pe-=L,0>pe)L=Math.max(0,M[nt].g-100),_e=!1;else try{RI(dt,G,"req"+pe+"_")}catch{_&&_(dt)}}if(_e){_=G.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,_}function Qp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Ie||se(),q||(Ie(),q=!0),X.add(h,a),a.v=0}}function ld(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=xn(g(a.Fa,a),Jp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Yp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=xn(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Be(10),hl(this),Yp(this))};function ud(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Yp(a){a.g=new ct(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Wn(a.qa);xe(h,"RID","rpc"),xe(h,"SID",a.K),xe(h,"AID",a.T),xe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(h,"TO",a.ja),xe(h,"TYPE","xmlhttp"),Co(a,h),a.m&&a.o&&od(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=ll(Wn(h)),m.m=null,m.P=!0,Ip(m,a)}t.Za=function(){this.C!=null&&(this.C=null,hl(this),ld(this),Be(19))};function ml(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Xp(a,h){var m=null;if(a.g==h){ml(a),ud(a),a.g=null;var _=2}else if(sd(a.h,h))m=h.D,Cp(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var M=a.B;_=In(),H(_,new gr(_,m)),fl(a)}else Qp(a);else if(M=h.s,M==3||M==0&&0<h.X||!(_==1&&OI(a,h)||_==2&&ld(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),M){case 1:vs(a,5);break;case 4:vs(a,10);break;case 3:vs(a,6);break;default:vs(a,2)}}}function Jp(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function vs(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),_=a.Xa;const M=!_;_=new ys(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ol(_,"https"),ll(_),M?kI(_.toString(),m):CI(_.toString(),m)}else Be(2);a.G=0,a.l&&a.l.sa(h),Zp(a),Gp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))};function Zp(a){if(a.G=0,a.ka=[],a.l){const h=Pp(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ka,h),P(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function eg(a,h,m){var _=m instanceof ys?Wn(m):new ys(m);if(_.g!="")h&&(_.g=h+"."+_.g),al(_,_.s);else{var M=l.location;_=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var L=new ys(null);_&&ol(L,_),h&&(L.g=h),M&&al(L,M),m&&(L.l=m),_=L}return m=a.D,h=a.ya,m&&h&&xe(_,m,h),xe(_,"VER",a.la),Co(a,_),_}function tg(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Me(new ul({eb:m})):new Me(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ng(){}t=ng.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pl(){}pl.prototype.g=function(a,h){return new Mt(a,h)};function Mt(a,h){$.call(this),this.g=new qp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!E(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ii(this)}A(Mt,$),Mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){ad(this.g)},Mt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=ti(a),a=m);h.i.push(new vI(h.Ya++,a)),h.G==3&&fl(h)},Mt.prototype.N=function(){this.g.l=null,delete this.j,ad(this.g),delete this.g,Mt.aa.N.call(this)};function rg(a){$n.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}A(rg,$n);function sg(){mr.call(this),this.status=1}A(sg,mr);function ii(a){this.g=a}A(ii,ng),ii.prototype.ua=function(){H(this.g,"a")},ii.prototype.ta=function(a){H(this.g,new rg(a))},ii.prototype.sa=function(a){H(this.g,new sg)},ii.prototype.ra=function(){H(this.g,"b")},pl.prototype.createWebChannel=pl.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,RE=function(){return new pl},PE=function(){return In()},CE=Tn,rf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vr.NO_ERROR=0,vr.TIMEOUT=8,vr.HTTP_ERROR=6,su=vr,Ve.COMPLETE="complete",kE=Ve,fr.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",$.prototype.listen=$.prototype.K,qo=fr,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,AE=Me}).apply(typeof Ol<"u"?Ol:typeof self<"u"?self:typeof window<"u"?window:{});const Jy="@firebase/firestore",Zy="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new xm("@firebase/firestore");function ui(){return Us.logLevel}function K(t,...e){if(Us.logLevel<=de.DEBUG){const n=e.map(Lm);Us.debug(`Firestore (${lo}): ${t}`,...n)}}function lr(t,...e){if(Us.logLevel<=de.ERROR){const n=e.map(Lm);Us.error(`Firestore (${lo}): ${t}`,...n)}}function qi(t,...e){if(Us.logLevel<=de.WARN){const n=e.map(Lm);Us.warn(`Firestore (${lo}): ${t}`,...n)}}function Lm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,DE(t,r,n)}function DE(t,e,n){let r=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw lr(r),new Error(r)}function ye(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||DE(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class dP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hP{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new jE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class fP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new fP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ev{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ev(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ev(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=gP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function sf(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return le(r,s);{const i=bE(),o=yP(i.encode(tv(t,n)),i.encode(tv(e,n)));return o!==0?o:le(r,s)}}n+=r>65535?2:1}return le(t.length,e.length)}function tv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function yP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return le(t[n],e[n]);return le(t.length,e.length)}function Gi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=-62135596800,rv=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rv);return new Qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nv)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rv}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-nv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Qe(0,0))}static max(){return new ie(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="__name__";class kn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=kn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return le(e.length,n.length)}static compareSegments(e,n){const r=kn.isNumericId(e),s=kn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?kn.extractNumericId(e).compare(kn.extractNumericId(n)):sf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class Ae extends kn{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const vP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends kn{construct(e,n,r){return new it(e,n,r)}static isValidIdentifier(e){return vP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sv}static keyField(){return new it([sv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ae.fromString(e))}static fromName(e){return new J(Ae.fromString(e).popFirst(5))}static empty(){return new J(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=-1;function _P(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new Jr(s,J.empty(),e)}function wP(t){return new Jr(t.readTime,t.key,Da)}class Jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jr(ie.min(),J.empty(),Da)}static max(){return new Jr(ie.max(),J.empty(),Da)}}function EP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==TP)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function SP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function co(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Rc.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=-1;function Dc(t){return t==null}function qu(t){return t===0&&1/t==-1/0}function xP(t){return typeof t=="number"&&Number.isInteger(t)&&!qu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="";function NP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=iv(e)),e=AP(t.get(n),e);return iv(e)}function AP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ME:n+="";break;default:n+=i}}return n}function iv(t){return t+ME+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function us(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ml(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ml(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ml(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ml(this.root,e,this.comparator,!0)}}class Ml{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??st.RED,this.left=s??st.EMPTY,this.right=i??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new st(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return st.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new av(this.data.getIterator())}getIteratorFrom(e){return new av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new zt([])}unionWith(e){let n=new Ye(it.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new VE("Invalid base64 string: "+i):i}}(e);return new lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const kP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(t){if(ye(!!t,39018),typeof t=="string"){let e=0;const n=kP.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function es(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="server_timestamp",UE="__type__",zE="__previous_value__",BE="__local_write_time__";function Fm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[UE])===null||n===void 0?void 0:n.stringValue)===FE}function jc(t){const e=t.mapValue.fields[zE];return Fm(e)?jc(e):e}function ja(t){const e=Zr(t.mapValue.fields[BE].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n,r,s,i,o,l,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Gu="(default)";class ba{constructor(e,n){this.projectId=e,this.database=n||Gu}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===Gu}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="__type__",PP="__max__",Ll={mapValue:{}},WE="__vector__",Hu="value";function ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fm(t)?4:DP(t)?9007199254740991:RP(t)?10:11:ne(28295,{value:t})}function Un(t,e){if(t===e)return!0;const n=ts(t);if(n!==ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ja(t).isEqual(ja(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Zr(s.timestampValue),l=Zr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return es(s.bytesValue).isEqual(es(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),l=Fe(i.doubleValue);return o===l?qu(o)===qu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Gi(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(ov(o)!==ov(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Un(o[c],l[c])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Oa(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function Hi(t,e){if(t===e)return 0;const n=ts(t),r=ts(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Fe(i.integerValue||i.doubleValue),c=Fe(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return lv(t.timestampValue,e.timestampValue);case 4:return lv(ja(t),ja(e));case 5:return sf(t.stringValue,e.stringValue);case 6:return function(i,o){const l=es(i),c=es(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=le(l[d],c[d]);if(f!==0)return f}return le(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=le(Fe(i.latitude),Fe(o.latitude));return l!==0?l:le(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return uv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,f;const p=i.fields||{},g=o.fields||{},N=(l=p[Hu])===null||l===void 0?void 0:l.arrayValue,A=(c=g[Hu])===null||c===void 0?void 0:c.arrayValue,R=le(((d=N==null?void 0:N.values)===null||d===void 0?void 0:d.length)||0,((f=A==null?void 0:A.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:uv(N,A)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ll.mapValue&&o===Ll.mapValue)return 0;if(i===Ll.mapValue)return 1;if(o===Ll.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=sf(c[p],f[p]);if(g!==0)return g;const N=Hi(l[c[p]],d[f[p]]);if(N!==0)return N}return le(c.length,f.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{Pe:n})}}function lv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Zr(t),r=Zr(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function uv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Hi(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function Ki(t){return of(t)}function of(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=of(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${of(n.fields[o])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function iu(t){switch(ts(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jc(t);return e?16+iu(e):16;case 5:return 2*t.stringValue.length;case 6:return es(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+iu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return us(r.fields,(i,o)=>{s+=i.length+iu(o)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function cv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function af(t){return!!t&&"integerValue"in t}function Um(t){return!!t&&"arrayValue"in t}function dv(t){return!!t&&"nullValue"in t}function hv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ou(t){return!!t&&"mapValue"in t}function RP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[$E])===null||n===void 0?void 0:n.stringValue)===WE}function oa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return us(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=oa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===PP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ou(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oa(n)}setAll(e){let n=it.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=oa(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ou(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ou(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){us(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Pt(oa(this.value))}}function qE(t){const e=[];return us(t.fields,(n,r)=>{const s=new it([n]);if(ou(r)){const i=qE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new _t(e,0,ie.min(),ie.min(),ie.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,s){return new _t(e,1,n,ie.min(),r,s,0)}static newNoDocument(e,n){return new _t(e,2,n,ie.min(),ie.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,ie.min(),ie.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.position=e,this.inclusive=n}}function fv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Hi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function mv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n="asc"){this.field=e,this.dir=n}}function jP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{}class qe extends GE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new OP(e,n,r):n==="array-contains"?new VP(e,r):n==="in"?new FP(e,r):n==="not-in"?new UP(e,r):n==="array-contains-any"?new zP(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new MP(e,r):new LP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hi(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(Hi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vn extends GE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new vn(e,n)}matches(e){return HE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function HE(t){return t.op==="and"}function KE(t){return bP(t)&&HE(t)}function bP(t){for(const e of t.filters)if(e instanceof vn)return!1;return!0}function lf(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Ki(t.value);if(KE(t))return t.filters.map(e=>lf(e)).join(",");{const e=t.filters.map(n=>lf(n)).join(",");return`${t.op}(${e})`}}function QE(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&Un(r.value,s.value)}(t,e):t instanceof vn?function(r,s){return s instanceof vn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&QE(o,s.filters[l]),!0):!1}(t,e):void ne(19439)}function YE(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ki(n.value)}`}(t):t instanceof vn?function(n){return n.op.toString()+" {"+n.getFilters().map(YE).join(" ,")+"}"}(t):"Filter"}class OP extends qe{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class MP extends qe{constructor(e,n){super(e,"in",n),this.keys=XE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class LP extends qe{constructor(e,n){super(e,"not-in",n),this.keys=XE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class VP extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Um(n)&&Oa(n.arrayValue,this.value)}}class FP extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oa(this.value.arrayValue,n)}}class UP extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oa(this.value.arrayValue,n)}}class zP extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Um(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function pv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new BP(t,e,n,r,s,i,o)}function zm(t){const e=oe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Dc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ki(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ki(r)).join(",")),e.Ie=n}return e.Ie}function Bm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mv(t.startAt,e.startAt)&&mv(t.endAt,e.endAt)}function uf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function $P(t,e,n,r,s,i,o,l){return new ho(t,e,n,r,s,i,o,l)}function $m(t){return new ho(t)}function gv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function JE(t){return t.collectionGroup!==null}function aa(t){const e=oe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ye(it.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Ma(i,r))}),n.has(it.keyField().canonicalString())||e.Ee.push(new Ma(it.keyField(),r))}return e.Ee}function Vn(t){const e=oe(t);return e.de||(e.de=WP(e,aa(t))),e.de}function WP(t,e){if(t.limitType==="F")return pv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ma(s.field,i)});const n=t.endAt?new Ku(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ku(t.startAt.position,t.startAt.inclusive):null;return pv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cf(t,e){const n=t.filters.concat([e]);return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function df(t,e,n){return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bc(t,e){return Bm(Vn(t),Vn(e))&&t.limitType===e.limitType}function ZE(t){return`${zm(Vn(t))}|lt:${t.limitType}`}function ci(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>YE(s)).join(", ")}]`),Dc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ki(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ki(s)).join(",")),`Target(${r})`}(Vn(t))}; limitType=${t.limitType})`}function Oc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of aa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=fv(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,aa(r),s)||r.endAt&&!function(o,l,c){const d=fv(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,aa(r),s))}(t,e)}function qP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eT(t){return(e,n)=>{let r=!1;for(const s of aa(t)){const i=GP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function GP(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Hi(c,d):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return LE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=new Oe(J.comparator);function ur(){return HP}const tT=new Oe(J.comparator);function Go(...t){let e=tT;for(const n of t)e=e.insert(n.key,n);return e}function nT(t){let e=tT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function As(){return la()}function rT(){return la()}function la(){return new Hs(t=>t.toString(),(t,e)=>t.isEqual(e))}const KP=new Oe(J.comparator),QP=new Ye(J.comparator);function he(...t){let e=QP;for(const n of t)e=e.add(n);return e}const YP=new Ye(le);function XP(){return YP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(e)?"-0":e}}function sT(t){return{integerValue:""+t}}function JP(t,e){return xP(e)?sT(e):Wm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this._=void 0}}function ZP(t,e,n){return t instanceof Qu?function(s,i){const o={fields:{[UE]:{stringValue:FE},[BE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Fm(i)&&(i=jc(i)),i&&(o.fields[zE]=i),{mapValue:o}}(n,e):t instanceof La?oT(t,e):t instanceof Va?aT(t,e):function(s,i){const o=iT(s,i),l=yv(o)+yv(s.Re);return af(o)&&af(s.Re)?sT(l):Wm(s.serializer,l)}(t,e)}function eR(t,e,n){return t instanceof La?oT(t,e):t instanceof Va?aT(t,e):n}function iT(t,e){return t instanceof Yu?function(r){return af(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Qu extends Mc{}class La extends Mc{constructor(e){super(),this.elements=e}}function oT(t,e){const n=lT(e);for(const r of t.elements)n.some(s=>Un(s,r))||n.push(r);return{arrayValue:{values:n}}}class Va extends Mc{constructor(e){super(),this.elements=e}}function aT(t,e){let n=lT(e);for(const r of t.elements)n=n.filter(s=>!Un(s,r));return{arrayValue:{values:n}}}class Yu extends Mc{constructor(e,n){super(),this.serializer=e,this.Re=n}}function yv(t){return Fe(t.integerValue||t.doubleValue)}function lT(t){return Um(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function tR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof La&&s instanceof La||r instanceof Va&&s instanceof Va?Gi(r.elements,s.elements,Un):r instanceof Yu&&s instanceof Yu?Un(r.Re,s.Re):r instanceof Qu&&s instanceof Qu}(t.transform,e.transform)}class nR{constructor(e,n){this.version=e,this.transformResults=n}}class Zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function au(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Lc{}function uT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qm(t.key,Zt.none()):new Ya(t.key,t.data,Zt.none());{const n=t.data,r=Pt.empty();let s=new Ye(it.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new cs(t.key,r,new zt(s.toArray()),Zt.none())}}function rR(t,e,n){t instanceof Ya?function(s,i,o){const l=s.value.clone(),c=_v(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof cs?function(s,i,o){if(!au(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=_v(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(cT(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ua(t,e,n,r){return t instanceof Ya?function(i,o,l,c){if(!au(i.precondition,o))return l;const d=i.value.clone(),f=wv(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof cs?function(i,o,l,c){if(!au(i.precondition,o))return l;const d=wv(i.fieldTransforms,c,o),f=o.data;return f.setAll(cT(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return au(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function sR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=iT(r.transform,s||null);i!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,i))}return n||null}function vv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Gi(r,s,(i,o)=>tR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ya extends Lc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class cs extends Lc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function cT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _v(t,e,n){const r=new Map;ye(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,eR(o,l,n[s]))}return r}function wv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,ZP(i,o,e))}return r}class qm extends Lc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iR extends Lc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&rR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ua(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ua(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=uT(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,(n,r)=>vv(n,r))&&Gi(this.baseMutations,e.baseMutations,(n,r)=>vv(n,r))}}class Gm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return KP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Gm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,fe;function uR(t){switch(t){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function dT(t){if(t===void 0)return lr("GRPC error has no .code"),F.UNKNOWN;switch(t){case $e.OK:return F.OK;case $e.CANCELLED:return F.CANCELLED;case $e.UNKNOWN:return F.UNKNOWN;case $e.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case $e.INTERNAL:return F.INTERNAL;case $e.UNAVAILABLE:return F.UNAVAILABLE;case $e.UNAUTHENTICATED:return F.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case $e.NOT_FOUND:return F.NOT_FOUND;case $e.ALREADY_EXISTS:return F.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return F.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case $e.ABORTED:return F.ABORTED;case $e.OUT_OF_RANGE:return F.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return F.UNIMPLEMENTED;case $e.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:t})}}(fe=$e||($e={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new Hr([4294967295,4294967295],0);function Ev(t){const e=bE().encode(t),n=new NE;return n.update(e),new Uint8Array(n.digest())}function Tv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hr([n,r],0),new Hr([s,i],0)]}class Hm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ho(`Invalid padding: ${n}`);if(r<0)throw new Ho(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ho(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ho(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Hr.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Hr.fromNumber(r)));return s.compare(cR)===1&&(s=new Hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Ev(e),[r,s]=Tv(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Hm(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const n=Ev(e),[r,s]=Tv(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ho extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vc(ie.min(),s,new Oe(le),ur(),he())}}class Xa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xa(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class hT{constructor(e,n){this.targetId=e,this.Ce=n}}class fT{constructor(e,n,r=lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Iv{constructor(){this.Fe=0,this.Me=Sv(),this.xe=lt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=he(),n=he(),r=he();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new Xa(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=Sv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ye(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class dR{constructor(e){this.ze=e,this.je=new Map,this.He=ur(),this.Je=Vl(),this.Ye=Vl(),this.Ze=new Oe(le)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(uf(i))if(r===0){const o=new J(i.path);this.tt(n,o,_t.newNoDocument(o,ie.min()))}else ye(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const l=this.ct(e),c=l?this.lt(l,e,o):1;if(c!==0){this.st(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=es(r).toUint8Array()}catch(c){if(c instanceof VE)return qi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Hm(o,s,i)}catch(c){return qi(c instanceof Ho?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&uf(l.target)){const c=new J(l.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,_t.newNoDocument(c,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=he();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this._t(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Vc(e,n,this.Ze,this.He,r);return this.He=ur(),this.Je=Vl(),this.Ye=Vl(),this.Ze=new Oe(le),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Iv,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ye(le),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ye(le),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Iv),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Vl(){return new Oe(J.comparator)}function Sv(){return new Oe(J.comparator)}const hR={asc:"ASCENDING",desc:"DESCENDING"},fR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mR={and:"AND",or:"OR"};class pR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hf(t,e){return t.useProto3Json||Dc(e)?e:{value:e}}function Xu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gR(t,e){return Xu(t,e.toTimestamp())}function Fn(t){return ye(!!t,49232),ie.fromTimestamp(function(n){const r=Zr(n);return new Qe(r.seconds,r.nanos)}(t))}function Km(t,e){return ff(t,e).canonicalString()}function ff(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pT(t){const e=Ae.fromString(t);return ye(wT(e),10190,{key:e.toString()}),e}function mf(t,e){return Km(t.databaseId,e.path)}function qd(t,e){const n=pT(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(yT(n))}function gT(t,e){return Km(t.databaseId,e)}function yR(t){const e=pT(t);return e.length===4?Ae.emptyPath():yT(e)}function pf(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yT(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xv(t,e,n){return{name:mf(t,e),fields:n.value.mapValue.fields}}function vR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ye(f===void 0||typeof f=="string",58123),lt.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),lt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?F.UNKNOWN:dT(d.code);return new Q(f,d.message||"")}(o);n=new fT(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qd(t,r.document.name),i=Fn(r.document.updateTime),o=r.document.createTime?Fn(r.document.createTime):ie.min(),l=new Pt({mapValue:{fields:r.document.fields}}),c=_t.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new lu(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qd(t,r.document),i=r.readTime?Fn(r.readTime):ie.min(),o=_t.newNoDocument(s,i),l=r.removedTargetIds||[];n=new lu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qd(t,r.document),i=r.removedTargetIds||[];n=new lu([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new lR(s,i),l=r.targetId;n=new hT(l,o)}}return n}function _R(t,e){let n;if(e instanceof Ya)n={update:xv(t,e.key,e.value)};else if(e instanceof qm)n={delete:mf(t,e.key)};else if(e instanceof cs)n={update:xv(t,e.key,e.data),updateMask:kR(e.fieldMask)};else{if(!(e instanceof iR))return ne(16599,{ft:e.type});n={verify:mf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Qu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof La)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Va)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Yu)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:gR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function wR(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Fn(s.updateTime):Fn(i);return o.isEqual(ie.min())&&(o=Fn(i)),new nR(o,s.transformResults||[])}(n,e))):[]}function ER(t,e){return{documents:[gT(t,e.path)]}}function TR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gT(t,s);const i=function(d){if(d.length!==0)return _T(vn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:di(g.field),direction:xR(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=hf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:s}}function IR(t){let e=yR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=vT(p);return g instanceof vn&&KE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(A){return new Ma(hi(A.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Dc(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,N=p.values||[];return new Ku(N,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,N=p.values||[];return new Ku(N,g)}(n.endAt)),$P(e,s,o,i,l,"F",c,d)}function SR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hi(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=hi(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=hi(n.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hi(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return qe.create(hi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vn.create(n.compositeFilter.filters.map(r=>vT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function xR(t){return hR[t]}function NR(t){return fR[t]}function AR(t){return mR[t]}function di(t){return{fieldPath:t.canonicalString()}}function hi(t){return it.fromServerFormat(t.fieldPath)}function _T(t){return t instanceof qe?function(n){if(n.op==="=="){if(hv(n.value))return{unaryFilter:{field:di(n.field),op:"IS_NAN"}};if(dv(n.value))return{unaryFilter:{field:di(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hv(n.value))return{unaryFilter:{field:di(n.field),op:"IS_NOT_NAN"}};if(dv(n.value))return{unaryFilter:{field:di(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:di(n.field),op:NR(n.op),value:n.value}}}(t):t instanceof vn?function(n){const r=n.getFilters().map(s=>_T(s));return r.length===1?r[0]:{compositeFilter:{op:AR(n.op),filters:r}}}(t):ne(54877,{filter:t})}function kR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r,s,i=ie.min(),o=ie.min(),l=lt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.wt=e}}function PR(t){const e=IR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?df(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.Cn=new DR}addToCollectionParentIndex(e,n){return this.Cn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Jr.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class DR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ye(Ae.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ye(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ET=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(ET,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Qi(0)}static lr(){return new Qi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="LruGarbageCollector",jR=1048576;function kv([t,e],[n,r]){const s=le(t,n);return s===0?le(e,r):s}class bR{constructor(e){this.Er=e,this.buffer=new Ye(kv),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();kv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){K(Av,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){co(n)?K(Av,"Ignoring IndexedDB error during garbage collection: ",n):await uo(n)}await this.mr(3e5)})}}class MR{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(Rc.le);const r=new bR(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(Nv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nv):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,l,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ui()<=de.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function LR(t,e){return new MR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.changes=new Hs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ua(r.mutation,s,zt.empty(),Qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=As();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Go();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=As();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=ur();const o=la(),l=function(){return la()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof cs)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ua(f.mutation,d,f.mutation.getFieldMask(),Qe.now())):o.set(d.key,zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new FR(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=la();let s=new Oe((o,l)=>o-l),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||zt.empty();f=l.applyToLocalView(d,f),r.set(c,f);const p=(s.get(l.batchId)||he()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,p=rT();f.forEach(g=>{if(!i.has(g)){const N=uT(n.get(g),r.get(g));N!==null&&p.set(g,N),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):JE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(As());let l=Da,c=i;return o.next(d=>z.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?z.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,he())).next(f=>({batchId:l,changes:nT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Go();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Go();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,c=>{const d=function(p,g){return new ho(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,_t.newInvalidDocument(f)))});let l=Go();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&ua(f.mutation,d,zt.empty(),Qe.now()),Oc(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return z.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Fn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:PR(s.bundledQuery),readTime:Fn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.overlays=new Oe(J.comparator),this.Qr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=As();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=As(),i=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=As(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=As(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return z.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aR(n,r));let i=this.Qr.get(n);i===void 0&&(i=he(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.$r=new Ye(Xe.Ur),this.Kr=new Ye(Xe.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Xe(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new J(new Ae([])),r=new Xe(n,e),s=new Xe(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new J(new Ae([])),r=new Xe(n,e),s=new Xe(n,e+1);let i=he();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Xe(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return J.comparator(e.key,n.key)||le(e.Zr,n.Zr)}static Wr(e,n){return le(e.Zr,n.Zr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ye(Xe.Ur)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oR(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Xr=this.Xr.add(new Xe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?Vm:this.nr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),s=new Xe(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const l=this.ei(o.Zr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(le);return n.forEach(s=>{const i=new Xe(s,0),o=new Xe(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{r=r.add(l.Zr)})}),z.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Xe(new J(i),0);let l=new Ye(le);return this.Xr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Zr)),!0)},o),z.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return z.forEach(n.mutations,s=>{const i=new Xe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Xe(n,0),s=this.Xr.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.ii=e,this.docs=function(){return new Oe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():_t.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ur();const o=n.path,l=new J(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||EP(wP(f),r)<=0||(s.has(f.key)||Oc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}si(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new GR(this)}getSize(e){return z.resolve(this.size)}}class GR extends VR{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.persistence=e,this.oi=new Hs(n=>zm(n),Bm),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this._i=0,this.ai=new Qm,this.targetCount=0,this.ui=Qi.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),z.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Qi(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Tr(n),z.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n){this.ci={},this.overlays={},this.li=new Rc(0),this.hi=!1,this.hi=!0,this.Pi=new $R,this.referenceDelegate=e(this),this.Ti=new HR(this),this.indexManager=new RR,this.remoteDocumentCache=function(s){return new qR(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new CR(n),this.Ei=new zR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new BR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new WR(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new KR(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return z.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class KR extends IP{constructor(e){super(),this.currentSequenceNumber=e}}class Ym{constructor(e){this.persistence=e,this.Vi=new Qm,this.mi=null}static fi(e){return new Ym(e)}get gi(){if(this.mi)return this.mi;throw ne(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.gi,r=>{const s=J.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,ie.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return z.or([()=>z.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Ju{constructor(e,n){this.persistence=e,this.yi=new Hs(r=>NP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=LR(this,n)}static fi(e,n){return new Ju(e,n)}di(){}Ai(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return z.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?z.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ie.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),z.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=iu(e.data.value)),n}Dr(e,n,r){return z.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Xm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return ON()?8:SP(Et())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new QR;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,n,o,l.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(ui()<=de.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",ci(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),z.resolve()):(ui()<=de.DEBUG&&K("QueryEngine","Query:",ci(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(ui()<=de.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",ci(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):z.resolve())}ws(e,n){if(gv(n))return z.resolve(null);let r=Vn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=df(n,null,"F"),r=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=he(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.vs(n,l);return this.Cs(n,d,o,c.readTime)?this.ws(e,df(n,null,"F")):this.Fs(e,d,n,c)}))})))}bs(e,n,r,s){return gv(n)||s.isEqual(ie.min())?z.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?z.resolve(null):(ui()<=de.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ci(n)),this.Fs(e,o,n,_P(s,Da)).next(l=>l))})}vs(e,n){let r=new Ye(eT(e));return n.forEach((s,i)=>{Oc(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ui()<=de.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",ci(n)),this.ys.getDocumentsMatchingQuery(e,n,Jr.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LocalStore",XR=3e8;class JR{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Oe(le),this.Os=new Hs(i=>zm(i),Bm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UR(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function ZR(t,e,n,r){return new JR(t,e,n,r)}async function IT(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=he();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:l}))})})}function eD(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const p=d.batch,g=p.keys();let N=z.resolve();return g.forEach(A=>{N=N.next(()=>f.getEntry(c,A)).next(R=>{const P=d.docVersions.get(A);ye(P!==null,48541),R.version.compareTo(P)<0&&(p.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),f.addEntry(R)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=he();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ST(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function tD(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ti.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(i,f.addedDocuments,p)));let N=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?N=N.withResumeToken(lt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):f.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(f.resumeToken,r)),s=s.insert(p,N),function(R,P,S){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=XR?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,N,f)&&l.push(n.Ti.updateTargetData(i,N))});let c=ur(),d=he();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(nD(i,o,e.documentUpdates).next(f=>{c=f.qs,d=f.Qs})),!r.isEqual(ie.min())){const f=n.Ti.getLastRemoteSnapshotVersion(i).next(p=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return z.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.xs=s,i))}function nD(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ur();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):K(Jm,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{qs:o,Qs:s}})}function rD(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Vm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sD(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new Or(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function gf(t,e,n){const r=oe(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!co(o))throw o;K(Jm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function Cv(t,e,n){const r=oe(t);let s=ie.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const p=oe(c),g=p.Os.get(f);return g!==void 0?z.resolve(p.xs.get(g)):p.Ti.getTargetData(d,f)}(r,o,Vn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:ie.min(),n?i:he())).next(l=>(iD(r,qP(e),l),{documents:l,$s:i})))}function iD(t,e,n){let r=t.Ns.get(e)||ie.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class Pv{constructor(){this.activeTargetIds=XP()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oD{constructor(){this.xo=new Pv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Pv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="ConnectivityMonitor";class Dv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){K(Rv,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){K(Rv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl=null;function yf(){return Fl===null?Fl=function(){return 268435456+Math.round(2147483648*Math.random())}():Fl++,"0x"+Fl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="RestConnection",lD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uD{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Gu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=yf(),l=this.jo(e,n.toUriEncodedString());K(Gd,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,s,i);const{host:d}=new URL(l),f=qs(d);return this.Jo(e,l,c,r,f).then(p=>(K(Gd,`Received RPC '${e}' ${o}: `,p),p),p=>{throw qi(Gd,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=lD[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class dD extends uD{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=yf();return new Promise((l,c)=>{const d=new AE;d.setWithCredentials(!0),d.listenOnce(kE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case su.NO_ERROR:const p=d.getResponseJson();K(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case su.TIMEOUT:K(pt,`RPC '${e}' ${o} timed out`),c(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case su.HTTP_ERROR:const g=d.getStatus();if(K(pt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let N=d.getResponseJson();Array.isArray(N)&&(N=N[0]);const A=N==null?void 0:N.error;if(A&&A.status&&A.message){const R=function(S){const E=S.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(E)>=0?E:F.UNKNOWN}(A.status);c(new Q(R,A.message))}else c(new Q(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Q(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{K(pt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);K(pt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}I_(e,n,r){const s=yf(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RE(),l=PE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");K(pt,`Creating RPC '${e}' stream ${s}: ${f}`,c);const p=o.createWebChannel(f,c);this.E_(p);let g=!1,N=!1;const A=new cD({Zo:P=>{N?K(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(K(pt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),K(pt,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Xo:()=>p.close()}),R=(P,S,E)=>{P.listen(S,x=>{try{E(x)}catch(D){setTimeout(()=>{throw D},0)}})};return R(p,qo.EventType.OPEN,()=>{N||(K(pt,`RPC '${e}' stream ${s} transport opened.`),A.__())}),R(p,qo.EventType.CLOSE,()=>{N||(N=!0,K(pt,`RPC '${e}' stream ${s} transport closed`),A.u_(),this.d_(p))}),R(p,qo.EventType.ERROR,P=>{N||(N=!0,qi(pt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),A.u_(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),R(p,qo.EventType.MESSAGE,P=>{var S;if(!N){const E=P.data[0];ye(!!E,16349);const x=E,D=(x==null?void 0:x.error)||((S=x[0])===null||S===void 0?void 0:S.error);if(D){K(pt,`RPC '${e}' stream ${s} received error:`,D);const V=D.status;let O=function(w){const T=$e[w];if(T!==void 0)return dT(T)}(V),v=D.message;O===void 0&&(O=F.INTERNAL,v="Unknown error status: "+V+" with message "+D.message),N=!0,A.u_(new Q(O,v)),p.close()}else K(pt,`RPC '${e}' stream ${s} received:`,E),A.c_(E)}}),R(l,CE.STAT_EVENT,P=>{P.stat===rf.PROXY?K(pt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===rf.NOPROXY&&K(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.a_()},0),A}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){return new pR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="PersistentStream";class NT{constructor(e,n,r,s,i,o,l,c){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new xT(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return K(jv,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(K(jv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hD extends NT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=vR(this.serializer,e),r=function(i){if(!("targetChange"in i))return ie.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?Fn(o.readTime):ie.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=pf(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=uf(c)?{documents:ER(i,c)}:{query:TR(i,c).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=mT(i,o.resumeToken);const d=hf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ie.min())>0){l.readTime=Xu(i,o.snapshotVersion.toTimestamp());const d=hf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=SR(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=pf(this.serializer),n.removeTarget=e,this.Q_(n)}}class fD extends NT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=wR(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=pf(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_R(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{}class pD extends mD{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,ff(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(F.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,ff(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class gD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(lr(n),this.ua=!1):K("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="RemoteStore";class yD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{r.enqueueAndForget(async()=>{Ks(this)&&(K(zs,"Restarting streams for network reachability change."),await async function(c){const d=oe(c);d.da.add(4),await Ja(d),d.Va.set("Unknown"),d.da.delete(4),await Uc(d)}(this))})}),this.Va=new gD(r,s)}}async function Uc(t){if(Ks(t))for(const e of t.Aa)await e(!0)}async function Ja(t){for(const e of t.Aa)await e(!1)}function AT(t,e){const n=oe(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),np(n)?tp(n):fo(n).N_()&&ep(n,e))}function Zm(t,e){const n=oe(t),r=fo(n);n.Ea.delete(e),r.N_()&&kT(n,e),n.Ea.size===0&&(r.N_()?r.k_():Ks(n)&&n.Va.set("Unknown"))}function ep(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fo(t).Z_(e)}function kT(t,e){t.ma.Ke(e),fo(t).X_(e)}function tp(t){t.ma=new dR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),fo(t).start(),t.Va.ca()}function np(t){return Ks(t)&&!fo(t).O_()&&t.Ea.size>0}function Ks(t){return oe(t).da.size===0}function CT(t){t.ma=void 0}async function vD(t){t.Va.set("Online")}async function _D(t){t.Ea.forEach((e,n)=>{ep(t,e)})}async function wD(t,e){CT(t),np(t)?(t.Va.Pa(e),tp(t)):t.Va.set("Unknown")}async function ED(t,e,n){if(t.Va.set("Online"),e instanceof fT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ea.delete(l),s.ma.removeTarget(l))}(t,e)}catch(r){K(zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zu(t,r)}else if(e instanceof lu?t.ma.Xe(e):e instanceof hT?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ie.min()))try{const r=await ST(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.ma.It(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ea.get(d);f&&i.Ea.set(d,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const f=i.Ea.get(c);if(!f)return;i.Ea.set(c,f.withResumeToken(lt.EMPTY_BYTE_STRING,f.snapshotVersion)),kT(i,c);const p=new Or(f.target,c,d,f.sequenceNumber);ep(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K(zs,"Failed to raise snapshot:",r),await Zu(t,r)}}async function Zu(t,e,n){if(!co(e))throw e;t.da.add(1),await Ja(t),t.Va.set("Offline"),n||(n=()=>ST(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(zs,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Uc(t)})}function PT(t,e){return e().catch(n=>Zu(t,n,e))}async function zc(t){const e=oe(t),n=ns(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Vm;for(;TD(e);)try{const s=await rD(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,ID(e,s)}catch(s){await Zu(e,s)}RT(e)&&DT(e)}function TD(t){return Ks(t)&&t.Ia.length<10}function ID(t,e){t.Ia.push(e);const n=ns(t);n.N_()&&n.ea&&n.ta(e.mutations)}function RT(t){return Ks(t)&&!ns(t).O_()&&t.Ia.length>0}function DT(t){ns(t).start()}async function SD(t){ns(t).ia()}async function xD(t){const e=ns(t);for(const n of t.Ia)e.ta(n.mutations)}async function ND(t,e,n){const r=t.Ia.shift(),s=Gm.from(r,e,n);await PT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zc(t)}async function AD(t,e){e&&ns(t).ea&&await async function(r,s){if(function(o){return uR(o)&&o!==F.ABORTED}(s.code)){const i=r.Ia.shift();ns(r).L_(),await PT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await zc(r)}}(t,e),RT(t)&&DT(t)}async function bv(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),K(zs,"RemoteStore received new credentials");const r=Ks(n);n.da.add(3),await Ja(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Uc(n)}async function kD(t,e){const n=oe(t);e?(n.da.delete(2),await Uc(n)):e||(n.da.add(2),await Ja(n),n.Va.set("Unknown"))}function fo(t){return t.fa||(t.fa=function(n,r,s){const i=oe(n);return i.oa(),new hD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:vD.bind(null,t),n_:_D.bind(null,t),i_:wD.bind(null,t),Y_:ED.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),np(t)?tp(t):t.Va.set("Unknown")):(await t.fa.stop(),CT(t))})),t.fa}function ns(t){return t.ga||(t.ga=function(n,r,s){const i=oe(n);return i.oa(),new fD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:SD.bind(null,t),i_:AD.bind(null,t),na:xD.bind(null,t),ra:ND.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await zc(t)):(await t.ga.stop(),t.Ia.length>0&&(K(zs,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new rp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sp(t,e){if(lr("AsyncQueue",`${e}: ${t}`),co(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{static emptySet(e){return new Oi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Go(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Oi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.pa=new Oe(J.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Yi{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Yi(e,n,Oi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class PD{constructor(){this.queries=Mv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=Mv(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function Mv(){return new Hs(t=>ZE(t),bc)}async function jT(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new CD,r=e.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=sp(o,`Initialization of query '${ci(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&ip(n)}async function bT(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function RD(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Ma(s)&&(r=!0);o.ba=s}}r&&ip(n)}function DD(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function ip(t){t.Ca.forEach(e=>{e.next()})}var vf,Lv;(Lv=vf||(vf={})).xa="default",Lv.Cache="cache";class OT{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Yi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Yi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==vf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.key=e}}class LT{constructor(e){this.key=e}}class jD{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=he(),this.mutatedKeys=he(),this.Za=eT(e),this.Xa=new Oi(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new Ov,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),N=Oc(this.query,p)?p:null,A=!!g&&this.mutatedKeys.has(g.key),R=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let P=!1;g&&N?g.data.isEqual(N.data)?A!==R&&(r.track({type:3,doc:N}),P=!0):this.ru(g,N)||(r.track({type:2,doc:N}),P=!0,(c&&this.Za(N,c)>0||d&&this.Za(N,d)<0)&&(l=!0)):!g&&N?(r.track({type:0,doc:N}),P=!0):g&&!N&&(r.track({type:1,doc:g}),P=!0,(c||d)&&(l=!0)),P&&(N?(o=o.add(N),i=R?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Xa:o,nu:r,Cs:l,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((f,p)=>function(N,A){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:P})}};return R(N)-R(A)}(f.type,p.type)||this.Za(f.doc,p.doc)),this.iu(r),s=s!=null&&s;const l=n&&!s?this.su():[],c=this.Ya.size===0&&this.current&&!s?1:0,d=c!==this.Ja;return this.Ja=c,o.length!==0||d?{snapshot:new Yi(this.query,e.Xa,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Ov,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=he(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new LT(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new MT(r))}),n}au(e){this.Ha=e.$s,this.Ya=he();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Yi.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const op="SyncEngine";class bD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OD{constructor(e){this.key=e,this.cu=!1}}class MD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Hs(l=>ZE(l),bc),this.Pu=new Map,this.Tu=new Set,this.Iu=new Oe(J.comparator),this.Eu=new Map,this.du=new Qm,this.Au={},this.Ru=new Map,this.Vu=Qi.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function LD(t,e,n=!0){const r=$T(t);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await VT(r,e,n,!0),s}async function VD(t,e){const n=$T(t);await VT(n,e,!0,!1)}async function VT(t,e,n,r){const s=await sD(t.localStore,Vn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await FD(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&AT(t.remoteStore,s),l}async function FD(t,e,n,r,s){t.fu=(p,g,N)=>async function(R,P,S,E){let x=P.view.tu(S);x.Cs&&(x=await Cv(R.localStore,P.query,!1).then(({documents:v})=>P.view.tu(v,x)));const D=E&&E.targetChanges.get(P.targetId),V=E&&E.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(x,R.isPrimaryClient,D,V);return Fv(R,P.targetId,O.ou),O.snapshot}(t,p,g,N);const i=await Cv(t.localStore,e,!0),o=new jD(e,i.$s),l=o.tu(i.documents),c=Xa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);Fv(t,n,d.ou);const f=new bD(e,n,o);return t.hu.set(e,f),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function UD(t,e,n){const r=oe(t),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(o=>!bc(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await gf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Zm(r.remoteStore,s.targetId),_f(r,s.targetId)}).catch(uo)):(_f(r,s.targetId),await gf(r.localStore,s.targetId,!0))}async function zD(t,e){const n=oe(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zm(n.remoteStore,r.targetId))}async function BD(t,e,n){const r=QD(t);try{const s=await function(o,l){const c=oe(o),d=Qe.now(),f=l.reduce((N,A)=>N.add(A.key),he());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",N=>{let A=ur(),R=he();return c.Bs.getEntries(N,f).next(P=>{A=P,A.forEach((S,E)=>{E.isValidDocument()||(R=R.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(N,A)).next(P=>{p=P;const S=[];for(const E of l){const x=sR(E,p.get(E.key).overlayedDocument);x!=null&&S.push(new cs(E.key,x,qE(x.value.mapValue),Zt.exists(!0)))}return c.mutationQueue.addMutationBatch(N,d,S,l)}).next(P=>{g=P;const S=P.applyToLocalDocumentSet(p,R);return c.documentOverlayCache.saveOverlays(N,P.batchId,S)})}).then(()=>({batchId:g.batchId,changes:nT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Au[o.currentUser.toKey()];d||(d=new Oe(le)),d=d.insert(l,c),o.Au[o.currentUser.toKey()]=d}(r,s.batchId,n),await Za(r,s.changes),await zc(r.remoteStore)}catch(s){const i=sp(s,"Failed to persist write");n.reject(i)}}async function FT(t,e){const n=oe(t);try{const r=await tD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?ye(o.cu,14607):s.removedDocuments.size>0&&(ye(o.cu,42227),o.cu=!1))}),await Za(n,r,e)}catch(r){await uo(r)}}function Vv(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,o)=>{const l=o.view.Fa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=oe(o);c.onlineState=l;let d=!1;c.queries.forEach((f,p)=>{for(const g of p.Sa)g.Fa(l)&&(d=!0)}),d&&ip(c)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $D(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Oe(J.comparator);o=o.insert(i,_t.newNoDocument(i,ie.min()));const l=he().add(i),c=new Vc(ie.min(),new Map,new Oe(le),o,l);await FT(r,c),r.Iu=r.Iu.remove(i),r.Eu.delete(e),ap(r)}else await gf(r.localStore,e,!1).then(()=>_f(r,e,n)).catch(uo)}async function WD(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await eD(n.localStore,e);zT(n,r,null),UT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Za(n,s)}catch(s){await uo(s)}}async function qD(t,e,n){const r=oe(t);try{const s=await function(o,l){const c=oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(ye(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);zT(r,e,n),UT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Za(r,s)}catch(s){await uo(s)}}function UT(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function zT(t,e,n){const r=oe(t);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function _f(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||BT(t,r)})}function BT(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Zm(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),ap(t))}function Fv(t,e,n){for(const r of n)r instanceof MT?(t.du.addReference(r.key,e),GD(t,r)):r instanceof LT?(K(op,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||BT(t,r.key)):ne(19791,{pu:r})}function GD(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(K(op,"New document in limbo: "+n),t.Tu.add(r),ap(t))}function ap(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new J(Ae.fromString(e)),r=t.Vu.next();t.Eu.set(r,new OD(n)),t.Iu=t.Iu.insert(n,r),AT(t.remoteStore,new Or(Vn($m(n.path)),r,"TargetPurposeLimboResolution",Rc.le))}}async function Za(t,e,n){const r=oe(t),s=[],i=[],o=[];r.hu.isEmpty()||(r.hu.forEach((l,c)=>{o.push(r.fu(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Xm.Rs(c.targetId,d);i.push(p)}}))}),await Promise.all(o),r.lu.Y_(s),await async function(c,d){const f=oe(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>z.forEach(d,g=>z.forEach(g.ds,N=>f.persistence.referenceDelegate.addReference(p,g.targetId,N)).next(()=>z.forEach(g.As,N=>f.persistence.referenceDelegate.removeReference(p,g.targetId,N)))))}catch(p){if(!co(p))throw p;K(Jm,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const N=f.xs.get(g),A=N.snapshotVersion,R=N.withLastLimboFreeSnapshotVersion(A);f.xs=f.xs.insert(g,R)}}}(r.localStore,i))}async function HD(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){K(op,"User change. New user:",e.toKey());const r=await IT(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(l=>{l.forEach(c=>{c.reject(new Q(F.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Za(n,r.ks)}}function KD(t,e){const n=oe(t),r=n.Eu.get(e);if(r&&r.cu)return he().add(r.key);{let s=he();const i=n.Pu.get(e);if(!i)return s;for(const o of i){const l=n.hu.get(o);s=s.unionWith(l.view.eu)}return s}}function $T(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$D.bind(null,e),e.lu.Y_=RD.bind(null,e.eventManager),e.lu.gu=DD.bind(null,e.eventManager),e}function QD(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qD.bind(null,e),e}class ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return ZR(this.persistence,new YR,e.initialUser,this.serializer)}Su(e){return new TT(Ym.fi,this.serializer)}bu(e){return new oD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ec.provider={build:()=>new ec};class YD extends ec{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ye(this.persistence.referenceDelegate instanceof Ju,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new OR(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new TT(r=>Ju.fi(r,n),this.serializer)}}class wf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HD.bind(null,this.syncEngine),await kD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PD}()}createDatastore(e){const n=Fc(e.databaseInfo.databaseId),r=function(i){return new dD(i)}(e.databaseInfo);return function(i,o,l,c){return new pD(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new yD(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Vv(this.syncEngine,n,0),function(){return Dv.C()?new Dv:new aD}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,f){const p=new MD(s,i,o,l,c,d);return f&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);K(zs,"RemoteStore shutting down."),i.da.add(5),await Ja(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}wf.provider={build:()=>new wf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="FirestoreClient";class XD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=OE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(rs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(rs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Kd(t,e){t.asyncQueue.verifyOperationInProgress(),K(rs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await IT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Uv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JD(t);K(rs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>bv(e.remoteStore,s)),t._onlineComponents=e}async function JD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(rs,"Using user provided OfflineComponentProvider");try{await Kd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;qi("Error using user provided cache. Falling back to memory cache: "+n),await Kd(t,new ec)}}else K(rs,"Using default OfflineComponentProvider"),await Kd(t,new YD(void 0));return t._offlineComponents}async function qT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(rs,"Using user provided OnlineComponentProvider"),await Uv(t,t._uninitializedComponentsProvider._online)):(K(rs,"Using default OnlineComponentProvider"),await Uv(t,new wf))),t._onlineComponents}function ZD(t){return qT(t).then(e=>e.syncEngine)}async function GT(t){const e=await qT(t),n=e.eventManager;return n.onListen=LD.bind(null,e.syncEngine),n.onUnlisten=UD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zD.bind(null,e.syncEngine),n}function ej(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new WT({next:g=>{f.xu(),o.enqueueAndForget(()=>bT(i,p));const N=g.docs.has(l);!N&&g.fromCache?d.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&g.fromCache&&c&&c.source==="server"?d.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new OT($m(l.path),f,{includeMetadataChanges:!0,Qa:!0});return jT(i,p)}(await GT(t),t.asyncQueue,e,n,r)),r.promise}function tj(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new WT({next:g=>{f.xu(),o.enqueueAndForget(()=>bT(i,p)),g.fromCache&&c.source==="server"?d.reject(new Q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new OT(l,f,{includeMetadataChanges:!0,Qa:!0});return jT(i,p)}(await GT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nj(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bv(t){if(!J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $v(t){if(J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function _n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bc(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="firestore.googleapis.com",Wv=!0;class qv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QT,this.ssl=Wv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Wv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ET;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jR)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $c{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cP;switch(r.type){case"firstParty":return new mP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zv.get(n);r&&(K("ComponentProvider","Removing Datastore"),zv.delete(n),r.terminate())}(this),Promise.resolve()}}function rj(t,e,n,r={}){var s;t=_n(t,$c);const i=qs(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(Im(`https://${c}`),Sm("Firestore",!0)),o.host!==QT&&o.host!==c&&qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Ms(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=gt.MOCK_USER;else{f=NN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new gt(g)}t._authCredentials=new dP(new jE(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qs(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class Kr extends Qs{constructor(e,n,r){super(e,n,$m(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new J(e))}withConverter(e){return new Kr(this.firestore,e,this._path)}}function Ft(t,e,...n){if(t=ze(t),KT("collection","path",e),t instanceof $c){const r=Ae.fromString(e,...n);return $v(r),new Kr(t,null,r)}{if(!(t instanceof xt||t instanceof Kr))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return $v(r),new Kr(t.firestore,null,r)}}function It(t,e,...n){if(t=ze(t),arguments.length===1&&(e=OE.newId()),KT("doc","path",e),t instanceof $c){const r=Ae.fromString(e,...n);return Bv(r),new xt(t,null,new J(r))}{if(!(t instanceof xt||t instanceof Kr))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return Bv(r),new xt(t.firestore,t instanceof Kr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="AsyncQueue";class Hv{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new xT(this,"async_queue_retry"),this.rc=()=>{const r=Hd();r&&K(Gv,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Hd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Hd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new tr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!co(e))throw e;K(Gv,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,lr("INTERNAL UNHANDLED ERROR: ",Kv(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=rp.createAndSchedule(this,e,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&ne(47125,{cc:Kv(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Kv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ys extends $c{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Hv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hv(e),this._firestoreClient=void 0,await e}}}function sj(t,e){const n=typeof t=="object"?t:Am(),r=typeof t=="string"?t:Gu,s=Ac(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=b0("firestore");i&&rj(s,...i)}return s}function lp(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ij(t),t._firestoreClient}function ij(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,f){return new CP(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,HT(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new XD(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xi(lt.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xi(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=/^__.*__$/;class aj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ya(e,this.data,n,this.fieldTransforms)}}class YT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function XT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ic:t})}}class hp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new hp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return tc(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(XT(this.Ic)&&oj.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class lj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fc(e)}bc(e,n,r,s=!1){return new hp({Ic:e,methodName:n,wc:r,path:it.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qc(t){const e=t._freezeSettings(),n=Fc(t._databaseId);return new lj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function JT(t,e,n,r,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,s);fp("Data must be an object, but it was:",o,r);const l=ZT(r,o);let c,d;if(i.merge)c=new zt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=Ef(e,p,n);if(!o.contains(g))throw new Q(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);tI(f,g)||f.push(g)}c=new zt(f),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new aj(new Pt(l),c,d)}class Gc extends up{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gc}}function uj(t,e,n,r){const s=t.bc(1,e,n);fp("Data must be an object, but it was:",s,r);const i=[],o=Pt.empty();us(r,(c,d)=>{const f=mp(e,c,n);d=ze(d);const p=s.mc(f);if(d instanceof Gc)i.push(f);else{const g=el(d,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new zt(i);return new YT(o,l,s.fieldTransforms)}function cj(t,e,n,r,s,i){const o=t.bc(1,e,n),l=[Ef(e,r,n)],c=[s];if(i.length%2!=0)throw new Q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Ef(e,i[g])),c.push(i[g+1]);const d=[],f=Pt.empty();for(let g=l.length-1;g>=0;--g)if(!tI(d,l[g])){const N=l[g];let A=c[g];A=ze(A);const R=o.mc(N);if(A instanceof Gc)d.push(N);else{const P=el(A,R);P!=null&&(d.push(N),f.set(N,P))}}const p=new zt(d);return new YT(f,p,o.fieldTransforms)}function dj(t,e,n,r=!1){return el(n,t.bc(r?4:3,e))}function el(t,e){if(eI(t=ze(t)))return fp("Unsupported field value:",e,t),ZT(t,e);if(t instanceof up)return function(r,s){if(!XT(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=el(l,s.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Qe.fromDate(r);return{timestampValue:Xu(s.serializer,i)}}if(r instanceof Qe){const i=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xu(s.serializer,i)}}if(r instanceof cp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xi)return{bytesValue:mT(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Km(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof dp)return function(o,l){return{mapValue:{fields:{[$E]:{stringValue:WE},[Hu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.gc("VectorValues must only contain numeric values.");return Wm(l.serializer,d)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${Bc(r)}`)}(t,e)}function ZT(t,e){const n={};return LE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(t,(r,s)=>{const i=el(s,e.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function eI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof cp||t instanceof Xi||t instanceof xt||t instanceof up||t instanceof dp)}function fp(t,e,n){if(!eI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Bc(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function Ef(t,e,n){if((e=ze(e))instanceof Wc)return e._internalPath;if(typeof e=="string")return mp(t,e);throw tc("Field path arguments must be of type string or ",t,!1,void 0,n)}const hj=new RegExp("[~\\*/\\[\\]]");function mp(t,e,n){if(e.search(hj)>=0)throw tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wc(...e.split("."))._internalPath}catch{throw tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Q(F.INVALID_ARGUMENT,l+t+c)}function tI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fj extends nI{data(){return super.data()}}function Hc(t,e){return typeof e=="string"?mp(t,e):e instanceof Wc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pp{}class rI extends pp{}function Pn(t,e,...n){let r=[];e instanceof pp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof gp).length,l=i.filter(c=>c instanceof Kc).length;if(o>1||o>0&&l>0)throw new Q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Kc extends rI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Kc(e,n,r)}_apply(e){const n=this._parse(e);return sI(e._query,n),new Qs(e.firestore,e.converter,cf(e._query,n))}_parse(e){const n=qc(e.firestore);return function(i,o,l,c,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Yv(p,f);const A=[];for(const R of p)A.push(Qv(c,i,R));g={arrayValue:{values:A}}}else g=Qv(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Yv(p,f),g=dj(l,o,p,f==="in"||f==="not-in");return qe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yt(t,e,n){const r=e,s=Hc("where",t);return Kc._create(s,r,n)}class gp extends pp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)sI(o,c),o=cf(o,c)}(e._query,n),new Qs(e.firestore,e.converter,cf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yp extends rI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new yp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ma(i,o)}(e._query,this._field,this._direction);return new Qs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ho(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Rn(t,e="asc"){const n=e,r=Hc("orderBy",t);return yp._create(r,n)}function Qv(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new Q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JE(e)&&n.indexOf("/")!==-1)throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ae.fromString(n));if(!J.isDocumentKey(r))throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cv(t,new J(r))}if(n instanceof xt)return cv(t,n._key);throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bc(n)}.`)}function Yv(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sI(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pj{convertValue(e,n="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return us(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Hu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new dp(i)}convertGeoPoint(e){return new cp(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ja(e));default:return null}}convertTimestamp(e){const n=Zr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);ye(wT(r),9688,{name:e});const s=new ba(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||lr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oI extends nI{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class uu extends oI{data(e={}){return super.data(e)}}class gj{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ko(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new uu(this._firestore,this._userDataWriter,r.key,r,new Ko(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new uu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ko(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new uu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ko(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:yj(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t){t=_n(t,xt);const e=_n(t.firestore,Ys);return ej(lp(e),t._key).then(n=>vj(e,t,n))}class lI extends pj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Dn(t){t=_n(t,Qs);const e=_n(t.firestore,Ys),n=lp(e),r=new lI(e);return mj(t._query),tj(n,t._query).then(s=>new gj(e,r,t,s))}function Tf(t,e,n){t=_n(t,xt);const r=_n(t.firestore,Ys),s=iI(t.converter,e,n);return Qc(r,[JT(qc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Zt.none())])}function Mi(t,e,n,...r){t=_n(t,xt);const s=_n(t.firestore,Ys),i=qc(s);let o;return o=typeof(e=ze(e))=="string"||e instanceof Wc?cj(i,"updateDoc",t._key,e,n,r):uj(i,"updateDoc",t._key,e),Qc(s,[o.toMutation(t._key,Zt.exists(!0))])}function vp(t){return Qc(_n(t.firestore,Ys),[new qm(t._key,Zt.none())])}function _p(t,e){const n=_n(t.firestore,Ys),r=It(t),s=iI(t.converter,e);return Qc(n,[JT(qc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Zt.exists(!1))]).then(()=>r)}function Qc(t,e){return function(r,s){const i=new tr;return r.asyncQueue.enqueueAndForget(async()=>BD(await ZD(r),s,i)),i.promise}(lp(t),e)}function vj(t,e,n){const r=n.docs.get(e._key),s=new lI(t);return new oI(t,s,e._key,r,new Ko(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){lo=s})(oo),Ls(new Xr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ys(new hP(r.getProvider("auth-internal")),new pP(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),On(Jy,Zy,e),On(Jy,Zy,"esm2017")})();var _j="firebase",wj="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(_j,wj,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej="type.googleapis.com/google.protobuf.Int64Value",Tj="type.googleapis.com/google.protobuf.UInt64Value";function uI(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function nc(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>nc(e));if(typeof t=="function"||typeof t=="object")return uI(t,e=>nc(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ji(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Ej:case Tj:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ji(e)):typeof t=="function"||typeof t=="object"?uI(t,e=>Ji(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dt extends zn{constructor(e,n,r){super(`${wp}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Dt.prototype)}}function Ij(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function rc(t,e){let n=Ij(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Xv[o])return new Dt("internal","internal");n=Xv[o],r=o}const l=i.message;typeof l=="string"&&(r=l),s=i.details,s!==void 0&&(s=Ji(s))}}catch{}return n==="ok"?null:new Dt(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Vt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="us-central1",xj=/^data: (.*?)(?:\n|$)/;function Nj(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Dt("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Aj{constructor(e,n,r,s,i=If,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Sj(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=If}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function kj(t,e,n){const r=qs(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Im(t.emulatorOrigin),Sm("Functions",!0))}function Cj(t,e,n){const r=s=>Rj(t,e,s,{});return r.stream=(s,i)=>jj(t,e,s,i),r}async function Pj(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}async function cI(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Rj(t,e,n,r){const s=t._url(e);return Dj(t,s,n,r)}async function Dj(t,e,n,r){n=nc(n);const s={data:n},i=await cI(t,r),o=r.timeout||7e4,l=Nj(o),c=await Promise.race([Pj(e,s,i,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new Dt("cancelled","Firebase Functions instance was deleted.");const d=rc(c.status,c.json);if(d)throw d;if(!c.json)throw new Dt("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new Dt("internal","Response is missing data field.");return{data:Ji(f)}}function jj(t,e,n,r){const s=t._url(e);return bj(t,s,n,r||{})}async function bj(t,e,n,r){var s;n=nc(n);const i={data:n},o=await cI(t,r);o["Content-Type"]="application/json",o.Accept="text/event-stream";let l;try{l=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:o,signal:r==null?void 0:r.signal})}catch(N){if(N instanceof Error&&N.name==="AbortError"){const R=new Dt("cancelled","Request was cancelled.");return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}const A=rc(0,null);return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}let c,d;const f=new Promise((N,A)=>{c=N,d=A});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const N=new Dt("cancelled","Request was cancelled.");d(N)});const p=l.body.getReader(),g=Oj(p,c,d,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const N=g.getReader();return{async next(){const{value:A,done:R}=await N.read();return{value:A,done:R}},async return(){return await N.cancel(),{done:!0,value:void 0}}}}},data:f}}function Oj(t,e,n,r){const s=(o,l)=>{const c=o.match(xj);if(!c)return;const d=c[1];try{const f=JSON.parse(d);if("result"in f){e(Ji(f.result));return}if("message"in f){l.enqueue(Ji(f.message));return}if("error"in f){const p=rc(0,f);l.error(p),n(p);return}}catch(f){if(f instanceof Dt){l.error(f),n(f);return}}},i=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(r!=null&&r.aborted){const d=new Dt("cancelled","Request was cancelled");return o.error(d),n(d),Promise.resolve()}try{const{value:d,done:f}=await t.read();if(f){l.trim()&&s(l.trim(),o),o.close();return}if(r!=null&&r.aborted){const g=new Dt("cancelled","Request was cancelled");o.error(g),n(g),await t.cancel();return}l+=i.decode(d,{stream:!0});const p=l.split(`
`);l=p.pop()||"";for(const g of p)g.trim()&&s(g.trim(),o);return c()}catch(d){const f=d instanceof Dt?d:rc(0,null);o.error(f),n(f)}}},cancel(){return t.cancel()}})}const Jv="@firebase/functions",Zv="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj="auth-internal",Lj="app-check-internal",Vj="messaging-internal";function Fj(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(Mj),o=n.getProvider(Vj),l=n.getProvider(Lj);return new Aj(s,i,o,l,r)};Ls(new Xr(wp,e,"PUBLIC").setMultipleInstances(!0)),On(Jv,Zv,t),On(Jv,Zv,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t=Am(),e=If){const r=Ac(ze(t),wp).getImmediate({identifier:e}),s=b0("functions");return s&&zj(r,...s),r}function zj(t,e,n){kj(ze(t),e,n)}function Bj(t,e,n){return Cj(ze(t),e)}Fj();const $j={apiKey:"AIzaSyBn2jG-T2SesKFr0TsfeQa04wlBmDeEoG4",authDomain:"clarity-311c3.firebaseapp.com",projectId:"clarity-311c3",storageBucket:"clarity-311c3.firebasestorage.app",messagingSenderId:"459484415688",appId:"1:459484415688:web:bac719ee243bbd9821c7fd"},Ep=F0($j),ks=xE(Ep),we=sj(Ep),Wj=Uj(Ep,"us-central1"),dI=j.createContext(),nn=()=>{const t=j.useContext(dI);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},hI=({children:t})=>{const[e,n]=j.useState(null),[r,s]=j.useState(null),[i,o]=j.useState("free"),[l,c]=j.useState(!0),[d,f]=j.useState(!1),p=j.useRef(!0),g=(D,V)=>{if(!D||!V)return{isTrialActive:!1,daysRemaining:0};const O=V.seconds?new Date(V.seconds*1e3):new Date(V),v=new Date,y=v<O,w=Math.ceil((O-v)/(24*60*60*1e3));return{isTrialActive:y,daysRemaining:Math.max(0,w),trialEndDate:O}},N=async D=>{try{const V=await aI(It(we,"users",D));if(V.exists()){const O=V.data(),v=g(O.trialStartDate,O.trialEndDate);if(console.log("🔍 Profile Data:",O),console.log("📅 Trial Status:",v),!p.current)return;if(O.subscription==="trial"&&!v.isTrialActive){const y={...O,subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date};await Mi(It(we,"users",D),{subscription:"free",subscriptionStatus:"trial_expired",updatedAt:new Date}),p.current&&(s({...y,...v}),o("free"))}else p.current&&(s({...O,...v}),o(O.subscription))}}catch(V){console.error("Error fetching user profile:",V),p.current&&c(!1)}};j.useEffect(()=>Jk(ks,async V=>{console.log("🔥 Auth state changed:",V?"User logged in":"User logged out");try{if(!p.current)return;n(V),f(!!V),V?await N(V.uid):p.current&&(s(null),o("free"))}catch(O){console.error("Error in auth state change:",O)}finally{p.current&&c(!1)}}),[]),j.useEffect(()=>()=>{p.current=!1},[]);const A=async(D,V,O={})=>{try{const{user:v}=await hE(ks,D,V),y={email:v.email,uid:v.uid,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date,firstName:O.firstName||"",lastName:O.lastName||"",exerciseGoalMinutes:O.exerciseGoalMinutes||30,waterGoalOz:O.waterGoalOz||64,meditationGoalMinutes:O.meditationGoalMinutes||10};if(await Tf(It(we,"users",v.uid),y),p.current){const w=g(y.trialStartDate,y.trialEndDate);s({...y,...w}),o("trial")}return{success:!0,user:v}}catch(v){throw console.error("Signup error:",v),v}},R=async(D,V)=>{try{const{user:O}=await fE(ks,D,V);return console.log("✅ Login successful, Firebase will trigger auth state change"),{success:!0,user:O}}catch(O){throw console.error("Login error:",O),O}},P=async()=>{try{return await mE(ks),p.current&&(n(null),s(null),o("free"),f(!1)),{success:!0}}catch(D){throw console.error("Logout error:",D),D}},S=async()=>{try{if(e!=null&&e.uid){const D={subscription:"premium",subscriptionStatus:"premium_paid",premiumStartDate:new Date,updatedAt:new Date};return await Mi(It(we,"users",e.uid),D),p.current&&(o("premium"),s(V=>({...V,...D}))),{success:!0}}}catch(D){throw console.error("Error upgrading to premium:",D),D}},E=async()=>{try{if(e!=null&&e.uid){const D={subscription:"free",subscriptionCancelledAt:new Date,updatedAt:new Date};return await Mi(It(we,"users",e.uid),D),p.current&&(o("free"),s(V=>({...V,...D}))),{success:!0}}}catch(D){throw console.error("Error cancelling subscription:",D),D}},x={user:e,userProfile:r,userSubscription:i,isAuthenticated:d,isPremium:i==="premium"||i==="trial",isTrialActive:(r==null?void 0:r.isTrialActive)||!1,trialDaysRemaining:(r==null?void 0:r.daysRemaining)||0,loading:l,signup:A,login:R,logout:P,upgradeToPremium:S,cancelSubscription:E,fetchUserProfile:N,authKey:(e==null?void 0:e.uid)||"no-user"};return u.jsx(dI.Provider,{value:x,children:t})},fI="/assets/Logo-BuPYrDrj.png";var mI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},e_=Jn.createContext&&Jn.createContext(mI),qj=["attr","size","title"];function Gj(t,e){if(t==null)return{};var n=Hj(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hj(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function sc(){return sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sc.apply(this,arguments)}function t_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ic(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t_(Object(n),!0).forEach(function(r){Kj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kj(t,e,n){return e=Qj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qj(t){var e=Yj(t,"string");return typeof e=="symbol"?e:e+""}function Yj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pI(t){return t&&t.map((e,n)=>Jn.createElement(e.tag,ic({key:n},e.attr),pI(e.child)))}function Xj(t){return e=>Jn.createElement(Jj,sc({attr:ic({},t.attr)},e),pI(t.child))}function Jj(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=Gj(t,qj),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Jn.createElement("svg",sc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:ic(ic({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Jn.createElement("title",null,i),t.children)};return e_!==void 0?Jn.createElement(e_.Consumer,null,n=>e(n)):e(mI)}function Zj(t){return Xj({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(t)}const Bs={async register(t){try{const e=await hE(ks,t.email,t.password);return await Tf(It(we,"users",e.user.uid),{username:t.username,email:t.email,firstName:t.firstName,lastName:t.lastName,exerciseGoalMinutes:t.exerciseGoalMinutes||30,waterGoalOz:t.waterGoalOz||64,meditationGoalMinutes:t.meditationGoalMinutes||10,subscription:"trial",subscriptionStatus:"trial_active",trialStartDate:new Date,trialEndDate:new Date(Date.now()+14*24*60*60*1e3),createdAt:new Date,updatedAt:new Date}),{user:e.user}}catch(e){throw new Error(e.message)}},async login(t,e){try{return{user:(await fE(ks,t,e)).user}}catch{throw new Error("Invalid credentials")}},async logout(){try{return await mE(ks),{message:"success"}}catch(t){throw new Error(t.message)}},async getUserProfile(t){try{const e=await aI(It(we,"users",t));if(!e.exists())throw new Error("User not found");return{user:{id:t,...e.data()}}}catch(e){throw new Error(e.message)}},async updateUserProfile(t,e){try{const n=It(we,"users",t);return await Tf(n,{...e,updatedAt:new Date},{merge:!0}),{user:{id:t,...e}}}catch(n){throw new Error("Error updating profile: "+n.message)}}};function eb(){const{user:t,logout:e}=nn(),n=Sc(),[r,s]=j.useState(!1),[i,o]=j.useState(null),[l,c]=j.useState(!1),d=j.useRef();j.useEffect(()=>{const A=async()=>{if(t!=null&&t.uid)try{c(!0);const R=await Bs.getUserProfile(t.uid);o(R.user)}catch(R){console.error("Error fetching user profile:",R)}finally{c(!1)}};t!=null&&t.uid&&A()},[t]);const f=A=>{A.stopPropagation(),s(!r)};j.useEffect(()=>{if(!r)return;const A=R=>{d.current&&!d.current.contains(R.target)&&s(!1)};return document.addEventListener("click",A),()=>document.removeEventListener("click",A)},[r]);const p=async A=>{A.preventDefault(),s(!1);try{await e(),n("/welcome")}catch(R){console.error("Error logging out:",R),n("/welcome")}},g=()=>{s(!1),n("/profile")};if(!t)return null;const N="profile-dropdown"+(r?"":" hidden");return u.jsxs("div",{className:"profile-button-container",children:[u.jsx("button",{onClick:f,className:"profile-button",children:u.jsx(Zj,{className:"profile-icon"})}),u.jsxs("ul",{className:N,ref:d,children:[u.jsx("li",{className:"profile-info",children:u.jsx("div",{className:"user-details",children:u.jsx("span",{className:"user-name",children:i!=null&&i.firstName&&(i!=null&&i.lastName)?`${i.firstName} ${i.lastName}`:(i==null?void 0:i.username)||"User"})})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:g,className:"dropdown-button",children:"👤 Edit Profile"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>{s(!1),n("/dashboard")},className:"dropdown-button",children:"📊 Dashboard"})}),u.jsx("li",{className:"menu-divider"}),u.jsx("li",{children:u.jsx("button",{onClick:p,className:"dropdown-button logout-button",children:"🚪 Sign Out"})})]})]})}function tb(){const{userSubscription:t,isTrialActive:e,trialDaysRemaining:n,upgradeToPremium:r}=nn();if(t==="premium"||t==="free"||!e)return null;const s=n<=3,i=(14-n)/14*100,o=()=>n===1?"Last day of premium!":n<=3?`Only ${n} days left!`:`${n} days remaining`,l=()=>n===1?"Keep Premium - $4.99/mo":n<=3?"Don't Lose Premium!":"Keep Premium - $4.99/mo";return u.jsxs("div",{className:`trial-banner ${s?"urgent":""}`,children:[u.jsxs("div",{className:"trial-content",children:[u.jsxs("div",{className:"trial-info",children:[u.jsx("span",{className:"trial-icon",children:s?"⏰":"✨"}),u.jsxs("div",{className:"trial-text",children:[u.jsx("h4",{children:s?"Premium Trial Ending!":"Premium Trial Active"}),u.jsx("p",{children:o()})]})]}),u.jsx("button",{onClick:r,className:"trial-upgrade-btn",children:l()})]}),u.jsx("div",{className:"trial-progress",children:u.jsx("div",{className:"trial-progress-bar",style:{width:`${i}%`}})})]})}function nb(){return u.jsxs("div",{className:"navigation-container",children:[u.jsxs("div",{className:"top-header",children:[u.jsxs("div",{className:"logo-container",children:[u.jsx("img",{src:fI,alt:"Clarity logo",className:"logo"}),u.jsx("span",{className:"logo-text",children:"Your Mind + Wellness Tracker"})]}),u.jsx(eb,{})]}),u.jsx(tb,{}),u.jsx("main",{className:"main-content",children:u.jsx(eN,{})}),u.jsxs("nav",{className:"bottom-navigation",children:[u.jsxs(li,{to:"/dashboard",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"📊"}),u.jsx("span",{className:"nav-label",children:"Home"})]}),u.jsxs(li,{to:"/workout",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🏋️"}),u.jsx("span",{className:"nav-label",children:"Workout"})]}),u.jsxs(li,{to:"/meditation",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🧘‍♀️"}),u.jsx("span",{className:"nav-label",children:"Meditate"})]}),u.jsxs(li,{to:"/water",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"💧"}),u.jsx("span",{className:"nav-label",children:"Water"})]}),u.jsxs(li,{to:"/games",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🎮"}),u.jsx("span",{className:"nav-label",children:"Games"})]}),u.jsxs(li,{to:"/goals",className:({isActive:t})=>`nav-tab ${t?"active":""}`,children:[u.jsx("span",{className:"nav-icon",children:"🎯"}),u.jsx("span",{className:"nav-label",children:"Goals"})]})]})]})}function rb(){const{user:t,loading:e}=nn(),[n,r]=j.useState(""),[s,i]=j.useState(""),[o,l]=j.useState(""),[c,d]=j.useState(""),[f,p]=j.useState(""),[g,N]=j.useState(""),[A,R]=j.useState(""),[P,S]=j.useState("30"),[E,x]=j.useState("64"),[D,V]=j.useState("10"),[O,v]=j.useState({}),[y,w]=j.useState(!1),[T,k]=j.useState(!1),[C,I]=j.useState("pulse");if(j.useEffect(()=>{const Z=[setTimeout(()=>I("open"),2500),setTimeout(()=>I("form"),4500)];return()=>Z.forEach(clearTimeout)},[]),e)return u.jsx("div",{children:"Loading..."});if(t)return u.jsx(Ou,{to:"/dashboard",replace:!0});const re=async Z=>{Z.preventDefault(),v({}),k(!0);try{await Bs.login(n,s)}catch(Ie){v({credential:Ie.message})}finally{k(!1)}},Ge=async Z=>{if(Z.preventDefault(),s!==A){v({confirmPassword:"Confirm Password field must be the same as the Password field"});return}v({}),k(!0);try{await Bs.register({email:o,password:s,username:c,firstName:f,lastName:g,exerciseGoalMinutes:parseInt(P),waterGoalOz:parseInt(E),meditationGoalMinutes:parseInt(D)})}catch(Ie){v({general:Ie.message})}finally{k(!1)}};return u.jsxs("div",{className:"welcome-container",children:[C!=="form"&&u.jsx("div",{className:`awakening-bg ${C}`,children:u.jsx("div",{className:"awakening-eye"})}),u.jsxs("div",{className:`welcome-card ${C==="form"?"visible":""}`,children:[u.jsxs("div",{className:"welcome-header",children:[u.jsx("img",{src:fI,alt:"Clarity logo"}),u.jsx("p",{children:"Begin your wellness today"})]}),y?u.jsxs("form",{className:"welcome-form",onSubmit:Ge,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Email"}),u.jsx("input",{type:"email",value:o,onChange:Z=>l(Z.target.value),required:!0,placeholder:"Enter your email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username"}),u.jsx("input",{type:"text",value:c,onChange:Z=>d(Z.target.value),required:!0,placeholder:"Choose a username"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"First Name"}),u.jsx("input",{type:"text",value:f,onChange:Z=>p(Z.target.value),required:!0,placeholder:"Enter your first name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Last Name"}),u.jsx("input",{type:"text",value:g,onChange:Z=>N(Z.target.value),required:!0,placeholder:"Enter your last name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:s,onChange:Z=>i(Z.target.value),required:!0,placeholder:"Create a password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Confirm Password"}),u.jsx("input",{type:"password",value:A,onChange:Z=>R(Z.target.value),required:!0,placeholder:"Confirm your password"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Exercise Goal (minutes)"}),u.jsx("input",{type:"number",value:P,onChange:Z=>S(Z.target.value),required:!0,placeholder:"Daily exercise goal in minutes"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Water Goal (oz)"}),u.jsx("input",{type:"number",value:E,onChange:Z=>x(Z.target.value),required:!0,placeholder:"Daily water goal in ounces"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Meditation Goal (minutes)"}),u.jsx("input",{type:"number",value:D,onChange:Z=>V(Z.target.value),required:!0,placeholder:"Daily meditation goal in minutes"})]}),O.confirmPassword&&u.jsx("p",{className:"error-message",children:O.confirmPassword}),O.general&&u.jsx("p",{className:"error-message",children:O.general}),u.jsx("button",{type:"submit",className:"primary-button",disabled:T,children:T?"Creating Account...":"Sign Up"})]}):u.jsxs("form",{className:"welcome-form",onSubmit:re,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Username or Email"}),u.jsx("input",{type:"text",value:n,onChange:Z=>r(Z.target.value),required:!0,placeholder:"Enter your username or email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Password"}),u.jsx("input",{type:"password",value:s,onChange:Z=>i(Z.target.value),required:!0,placeholder:"Enter your password"})]}),O.credential&&u.jsx("p",{className:"error-message",children:O.credential}),u.jsx("button",{type:"submit",className:"primary-button",disabled:T,children:T?"Logging In...":"Log In"})]}),u.jsx("button",{className:"secondary-button",onClick:()=>w(!y),disabled:T,children:y?"Already have an account? Log In":"Don't have an account? Sign Up"})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Sf=function(t,e){return Sf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Sf(t,e)};function sb(t,e){Sf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ib=100,ob=100,n_=50,xf=50,Nf=50;function r_(t){var e=t.className,n=t.counterClockwise,r=t.dashRatio,s=t.pathRadius,i=t.strokeWidth,o=t.style;return j.createElement("path",{className:e,style:Object.assign({},o,lb({pathRadius:s,dashRatio:r,counterClockwise:n})),d:ab({pathRadius:s,counterClockwise:n}),strokeWidth:i,fillOpacity:0})}function ab(t){var e=t.pathRadius,n=t.counterClockwise,r=e,s=n?1:0;return`
      M `+xf+","+Nf+`
      m 0,-`+r+`
      a `+r+","+r+" "+s+" 1 1 0,"+2*r+`
      a `+r+","+r+" "+s+" 1 1 0,-"+2*r+`
    `}function lb(t){var e=t.counterClockwise,n=t.dashRatio,r=t.pathRadius,s=Math.PI*2*r,i=(1-n)*s;return{strokeDasharray:s+"px "+s+"px",strokeDashoffset:(e?-i:i)+"px"}}var Qd=function(t){sb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return n_-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var n=this.props,r=n.value,s=n.minValue,i=n.maxValue,o=Math.min(Math.max(r,s),i);return(o-s)/(i-s)},e.prototype.render=function(){var n=this.props,r=n.circleRatio,s=n.className,i=n.classes,o=n.counterClockwise,l=n.styles,c=n.strokeWidth,d=n.text,f=this.getPathRadius(),p=this.getPathRatio();return j.createElement("svg",{className:i.root+" "+s,style:l.root,viewBox:"0 0 "+ib+" "+ob,"data-test-id":"CircularProgressbar"},this.props.background?j.createElement("circle",{className:i.background,style:l.background,cx:xf,cy:Nf,r:n_}):null,j.createElement(r_,{className:i.trail,counterClockwise:o,dashRatio:r,pathRadius:f,strokeWidth:c,style:l.trail}),j.createElement(r_,{className:i.path,counterClockwise:o,dashRatio:p*r,pathRadius:f,strokeWidth:c,style:l.path}),d?j.createElement("text",{className:i.text,style:l.text,x:xf,y:Nf},d):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(j.Component);function Yd(t){var e=t.rotation,n=t.strokeLinecap,r=t.textColor,s=t.textSize,i=t.pathColor,o=t.pathTransition,l=t.pathTransitionDuration,c=t.trailColor,d=t.backgroundColor,f=e==null?void 0:"rotate("+e+"turn)",p=e==null?void 0:"center center";return{root:{},path:Ul({stroke:i,strokeLinecap:n,transform:f,transformOrigin:p,transition:o,transitionDuration:l==null?void 0:l+"s"}),trail:Ul({stroke:c,strokeLinecap:n,transform:f,transformOrigin:p}),text:Ul({fill:r,fontSize:s}),background:Ul({fill:d})}}function Ul(t){return Object.keys(t).forEach(function(e){t[e]==null&&delete t[e]}),t}const B={getUserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone},getCurrentLocalTime(){return new Date},getStartOfDay(t=new Date){const e=new Date(t);return e.setHours(0,0,0,0),e},getEndOfDay(t=new Date){const e=new Date(t);return e.setHours(23,59,59,999),e},formatLocalDate(t){return t.toLocaleDateString("en-CA")},formatLocalDateTime(t){return t.toLocaleString()},formatLocalTime(t){return t.toLocaleTimeString()},getLocalDateRange(t=7){const e=this.getEndOfDay(new Date),n=this.getStartOfDay(new Date);return n.setDate(n.getDate()-(t-1)),{startDate:n,endDate:e}},isToday(t){const e=new Date;return this.formatLocalDate(t)===this.formatLocalDate(e)},isSameLocalDay(t,e){return this.formatLocalDate(t)===this.formatLocalDate(e)},toLocalTimezone(t){return new Date(t)},getRelativeTime(t){const n=new Date-t,r=Math.floor(n/6e4),s=Math.floor(r/60),i=Math.floor(s/24);return r<1?"Just now":r<60?`${r} minutes ago`:s<24?`${s} hours ago`:i===1?"Yesterday":i<7?`${i} days ago`:this.formatLocalDate(t)},getCurrentWeekRange(){const t=new Date,e=t.getDay(),n=new Date(t);n.setHours(0,0,0,0),n.setDate(t.getDate()-e);const r=new Date(n);return r.setDate(n.getDate()+6),r.setHours(23,59,59,999),{startDate:n,endDate:r}}},Ts={async logWorkout(t,e){try{console.log("🌍 Logging workout in timezone:",B.getUserTimezone());let n=B.getCurrentLocalTime();e.date&&(n=B.toLocalTimezone(e.date));const r={title:e.title,type:e.type||"General",durationMinutes:e.durationMinutes,date:n,notes:e.notes||"",caloriesBurned:e.caloriesBurned||0,completed:!0,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},s=await _p(Ft(we,`users/${t}/workouts`),r);return{id:s.id,success:!0,workout:{...e,id:s.id}}}catch(n){throw new Error("Error logging workout: "+n.message)}},async fetchWorkoutsByUser(t){try{const e=Pn(Ft(we,`users/${t}/workouts`),Rn("date","desc"));return{workouts:(await Dn(e)).docs.map(s=>{var i,o,l,c;return{id:s.id,...s.data(),date:(i=s.data().date)==null?void 0:i.toDate(),localDate:B.formatLocalDate((o=s.data().date)==null?void 0:o.toDate()),localDateTime:B.formatLocalDateTime((l=s.data().date)==null?void 0:l.toDate()),relativeTime:B.getRelativeTime((c=s.data().date)==null?void 0:c.toDate())}})}}catch(e){throw new Error("Error fetching workouts: "+e.message)}},async updateWorkout(t,e,n){try{const r=It(we,`users/${t}/workouts`,e),s={...n,updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()};return n.date&&(s.date=B.toLocalTimezone(n.date)),await Mi(r,s),{success:!0,workout:{id:e,...n}}}catch(r){throw new Error("Error updating workout: "+r.message)}},async deleteWorkout(t,e){try{return await vp(It(we,`users/${t}/workouts`,e)),{success:!0,message:"Workout deleted successfully"}}catch(n){throw new Error("Error deleting workout: "+n.message)}},async getWorkoutSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange();console.log("🌍 Weekly workout query for timezone:",B.getUserTimezone()),console.log("📅 Query range:",B.formatLocalDateTime(e),"to",B.formatLocalDateTime(n));const r=Pn(Ft(we,`users/${t}/workouts`),yt("date",">=",e),yt("date","<=",n),Rn("date","desc")),i=(await Dn(r)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),o=i.reduce((c,d)=>c+(d.durationMinutes||0),0),l=i.reduce((c,d)=>c+(d.caloriesBurned||0),0);return{totalWorkouts:i.length,totalMinutes:o,totalCalories:l,workouts:i.slice(0,5),period:"This week",userTimezone:B.getUserTimezone()}}catch(e){throw new Error("Error fetching workout summary: "+e.message)}},async getDailyWorkoutSummary(t,e=new Date){try{const{startDate:n,endDate:r}={startDate:B.getStartOfDay(e),endDate:B.getEndOfDay(e)};console.log("🌍 Daily workout query for timezone:",B.getUserTimezone()),console.log("📅 Query range:",B.formatLocalDateTime(n),"to",B.formatLocalDateTime(r));const s=Pn(Ft(we,`users/${t}/workouts`),yt("date",">=",n),yt("date","<=",r),Rn("date","desc")),o=(await Dn(s)).docs.map(f=>{var p;return{id:f.id,...f.data(),date:(p=f.data().date)==null?void 0:p.toDate()}});console.log("💪 Found workouts for today:",o.length);const l=o.reduce((f,p)=>f+(p.durationMinutes||0),0),c=o.length,d=o.reduce((f,p)=>f+(p.caloriesBurned||0),0);return{date:B.formatLocalDate(e),totalWorkouts:c,completedWorkouts:c,totalMinutes:l,caloriesBurned:d,lastWorkout:o.length>0?o[0]:null,workouts:o,hasWorkoutsToday:o.length>0,mostCommonType:o.length>0?this.getMostCommonWorkoutType(o):null,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily workout summary:",n),this.getEmptyDailySummary(e)}},getMostCommonWorkoutType(t){if(t.length===0)return null;const e={};return t.forEach(n=>{e[n.type]=(e[n.type]||0)+1}),Object.keys(e).reduce((n,r)=>e[n]>e[r]?n:r)},getEmptyDailySummary(t){return{date:B.formatLocalDate(t),totalWorkouts:0,completedWorkouts:0,totalMinutes:0,caloriesBurned:0,lastWorkout:null,workouts:[],hasWorkoutsToday:!1,mostCommonType:null,userTimezone:B.getUserTimezone()}}},Kt={async logWaterIntake(t,e){try{const n={amount:e.amount,date:B.toLocalTimezone(e.date||new Date),userId:t,createdAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},r=await _p(Ft(we,`users/${t}/waterIntake`),n);return{id:r.id,success:!0,waterIntake:{...e,id:r.id}}}catch(n){throw new Error("Error logging water intake: "+n.message)}},async fetchWaterIntakeByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const r=Pn(Ft(we,`users/${t}/waterIntake`),yt("date",">=",n),Rn("date","desc"));return{waterIntakes:(await Dn(r)).docs.map(o=>{var l;return{id:o.id,...o.data(),date:(l=o.data().date)==null?void 0:l.toDate()}})}}catch(n){throw new Error("Error fetching water intake: "+n.message)}},async updateWaterIntake(t,e,n){try{const r=It(we,`users/${t}/waterIntake`,e);return await Mi(r,{...n,updatedAt:new Date}),{success:!0,waterIntake:{id:e,...n}}}catch(r){throw new Error("Error updating water intake: "+r.message)}},async deleteWaterIntake(t,e){try{return await vp(It(we,`users/${t}/waterIntake`,e)),{success:!0,message:"Water intake deleted successfully"}}catch(n){throw new Error("Error deleting water intake: "+n.message)}},async getTodayWaterIntake(t){try{const e=new Date;e.setHours(0,0,0,0);const n=new Date(e);n.setDate(n.getDate()+1);const r=Pn(Ft(we,`users/${t}/waterIntake`),yt("date",">=",e),yt("date","<",n),Rn("date","desc")),i=(await Dn(r)).docs.map(l=>l.data());return{totalOz:i.reduce((l,c)=>l+(c.amount||0),0),intakeCount:i.length,intakes:i}}catch(e){throw new Error("Error fetching today's water intake: "+e.message)}},async getWaterSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),r=Pn(Ft(we,`users/${t}/waterIntake`),yt("date",">=",e),yt("date","<=",n),Rn("date","desc")),i=(await Dn(r)).docs.map(f=>f.data()),o={};i.forEach(f=>{const p=f.date.toDate().toDateString();o[p]=(o[p]||0)+f.amount});const l=i.reduce((f,p)=>f+(p.amount||0),0),c=7,d=c>0?l/c:0;return{totalOz:l,averageOz:d,dailyTotals:o,intakeCount:i.length}}catch(e){throw new Error("Error fetching water summary: "+e.message)}},async getDailyWaterIntake(t,e=new Date){try{const n=B.getStartOfDay(e),r=B.getEndOfDay(e),s=Pn(Ft(we,`users/${t}/waterIntake`),yt("date",">=",n),yt("date","<=",r),Rn("date","desc")),o=(await Dn(s)).docs.map(c=>{var d;return{id:c.id,...c.data(),date:(d=c.data().date)==null?void 0:d.toDate()}}),l=o.reduce((c,d)=>c+(d.amount||0),0);return{date:B.formatLocalDate(e),totalOz:l,totalEntries:o.length,entries:o,hasWaterToday:o.length>0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily water intake:",n),{date:B.formatLocalDate(e),totalOz:0,totalEntries:0,entries:[],hasWaterToday:!1,userTimezone:B.getUserTimezone()}}},calculateHourlyWaterIntake(t){const e={};return t.forEach(n=>{const r=n.date.getHours();e[r]=(e[r]||0)+n.amount}),e}},Is={async logMeditation(t,e){try{const n={title:e.title||"Meditation Session",type:e.type||"mindfulness",soundscape:e.soundscape||"silence",durationMinutes:e.durationMinutes,targetDuration:e.targetDuration||e.durationMinutes,completed:e.completed||!1,deepStateAchieved:e.deepStateAchieved||!1,date:B.toLocalTimezone(e.date||new Date),notes:e.notes||"",moodBefore:e.moodBefore||"",moodAfter:e.moodAfter||"",guidedSession:e.guidedSession||!1,interruptions:e.interruptions||0,heartRateData:e.heartRateData||null,brainwaveFrequency:e.brainwaveFrequency||null,focusLevel:e.focusLevel||null,createdAt:B.getCurrentLocalTime(),updatedAt:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()},r=await _p(Ft(we,`users/${t}/meditations`),n);return{id:r.id,success:!0,meditation:{...n,id:r.id}}}catch(n){throw new Error("Error logging meditation: "+n.message)}},async fetchMeditationsByUser(t,e=30){try{const n=new Date;n.setDate(n.getDate()-e);const r=Pn(Ft(we,`users/${t}/meditations`),yt("date",">=",n),Rn("date","desc"));return{meditations:(await Dn(r)).docs.map(o=>{var l;return{id:o.id,...o.data(),date:(l=o.data().date)==null?void 0:l.toDate()}})}}catch(n){throw new Error("Error fetching meditations: "+n.message)}},async getMeditationAnalytics(t,e=30){try{const r=(await this.fetchMeditationsByUser(t,e)).meditations;if(r.length===0)return{totalSessions:0,deepStateSuccessRate:0,averageDuration:0,favoriteTime:"morning",favoriteSound:"silence",moodImprovement:0};const i=r.filter(d=>d.deepStateAchieved).length/r.length*100,o={},l={},c=[];return r.forEach(d=>{o[d.soundscape]=(o[d.soundscape]||0)+1;const f=d.date.getHours(),p=f<12?"morning":f<18?"afternoon":"evening";if(l[p]=(l[p]||0)+1,d.moodBefore&&d.moodAfter){const g={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6},N=g[d.moodBefore]||3,A=g[d.moodAfter]||3;c.push(A-N)}}),{totalSessions:r.length,deepStateSuccessRate:Math.round(i),averageDuration:r.reduce((d,f)=>d+f.durationMinutes,0)/r.length,favoriteTime:Object.keys(l).reduce((d,f)=>l[d]>l[f]?d:f,"morning"),favoriteSound:Object.keys(o).reduce((d,f)=>o[d]>o[f]?d:f,"silence"),moodImprovement:c.length>0?c.reduce((d,f)=>d+f,0)/c.length:0,consistency:r.length/e}}catch(n){throw new Error("Error fetching meditation analytics: "+n.message)}},async getPersonalizedRecommendations(t){try{const e=await this.getMeditationAnalytics(t),n=[];return e.deepStateSuccessRate<50&&n.push({type:"duration",message:"Try longer sessions (7-10 minutes) to achieve deeper states",action:"Increase session length"}),e.favoriteSound==="silence"&&n.push({type:"soundscape",message:'Research shows binaural beats can enhance focus. Try our "Deep Focus" soundscape.',action:"Try binaural beats"}),e.consistency<.5&&n.push({type:"consistency",message:`Your best time is ${e.favoriteTime}. Set a daily reminder for consistent practice.`,action:"Set daily reminder"}),{recommendations:n}}catch(e){throw new Error("Error generating recommendations: "+e.message)}},async updateMeditation(t,e,n){try{const r=It(we,`users/${t}/meditations`,e);return await Mi(r,{...n,updatedAt:new Date}),{success:!0,meditation:{id:e,...n}}}catch(r){throw new Error("Error updating meditation: "+r.message)}},async deleteMeditation(t,e){try{return await vp(It(we,`users/${t}/meditations`,e)),{success:!0,message:"Meditation deleted successfully"}}catch(n){throw new Error("Error deleting meditation: "+n.message)}},async getMeditationSummary(t){try{const{startDate:e,endDate:n}=B.getCurrentWeekRange(),r=Pn(Ft(we,`users/${t}/meditations`),yt("date",">=",e),yt("date","<=",n),Rn("date","desc")),i=(await Dn(r)).docs.map(d=>d.data()),o=i.reduce((d,f)=>d+(f.durationMinutes||0),0),l=i.length>0?o/i.length:0,c=i.length>0?i.filter(d=>d.deepStateAchieved).length/i.length*100:0;return{totalSessions:i.length,totalMinutes:o,averageDuration:l,deepStateSuccessRate:c,favoriteSoundscape:i.length>0?this.getMostFrequent(i,"soundscape"):"silence",favoriteTime:i.length>0?this.getMostFrequent(i,"timeOfDay"):"morning",moodImprovement:this.calculateMoodImprovement(i)}}catch(e){throw console.error("Error fetching meditation summary:",e),new Error("Error fetching meditation summary: "+e.message)}},getMostFrequent(t,e){const n={};return t.forEach(r=>{const s=e==="timeOfDay"?this.getTimeOfDay(r.date):r[e];n[s]=(n[s]||0)+1}),Object.keys(n).reduce((r,s)=>n[r]>n[s]?r:s)},getTimeOfDay(t){let e;if(t instanceof Date)e=t;else if(typeof t=="string")e=new Date(t);else if(t&&t.seconds)e=new Date(t.seconds*1e3);else return console.warn("Invalid date format:",t),"unknown";if(isNaN(e.getTime()))return console.warn("Invalid date object:",t),"unknown";const n=e.getHours();return n<6?"night":n<12?"morning":n<17?"afternoon":n<21?"evening":"night"},calculateMoodImprovement(t){const e={"😔":1,"😰":2,"😐":3,"😌":4,"😊":5,"🎉":6};let n=0,r=0;return t.forEach(s=>{const i=e[s.moodBefore]||3,o=e[s.moodAfter]||3;n+=o-i,r++}),r>0?n/r:0},async getDailyMeditationSummary(t,e=new Date){try{const n=B.getStartOfDay(e),r=B.getEndOfDay(e);console.log("🌍 Daily meditation query for timezone:",B.getUserTimezone());const s=Pn(Ft(we,`users/${t}/meditations`),yt("date",">=",n),yt("date","<=",r),Rn("date","desc")),o=(await Dn(s)).docs.map(P=>{var S;return{id:P.id,...P.data(),date:(S=P.data().date)==null?void 0:S.toDate()}}),l=o.reduce((P,S)=>P+(S.durationMinutes||0),0),c=o.filter(P=>P.completed).length,d=o.length>0?l/o.length:0,f=o.filter(P=>P.deepStateAchieved).length,p=o.length>0?f/o.length*100:0,g=o.length>0?o[0]:null,N=o.length>0?this.getMostFrequent(o,"soundscape"):"silence",A=o.length>0?this.getMostFrequent(o,"timeOfDay"):"morning",R=this.calculateMoodImprovement(o);return{date:B.formatLocalDate(e),totalSessions:o.length,completedSessions:c,totalMinutes:l,averageDuration:Math.round(d*10)/10,deepStateAchieved:f,deepStateSuccessRate:Math.round(p),lastSession:g,favoriteSoundscape:N,favoriteTime:A,moodImprovement:Math.round(R*100)/100,sessions:o,hasSessionsToday:o.length>0,mostRecentType:(g==null?void 0:g.type)||"mindfulness",mostRecentSoundscape:(g==null?void 0:g.soundscape)||"silence",timeOfLastSession:(g==null?void 0:g.date)||null,totalInterruptions:o.reduce((P,S)=>P+(S.interruptions||0),0),averageFocusLevel:o.length>0?o.reduce((P,S)=>P+(S.focusLevel||5),0)/o.length:0,userTimezone:B.getUserTimezone()}}catch(n){return console.error("Error fetching daily meditation summary:",n),{date:e.toISOString().split("T")[0],totalSessions:0,completedSessions:0,totalMinutes:0,averageDuration:0,deepStateAchieved:0,deepStateSuccessRate:0,lastSession:null,favoriteSoundscape:"silence",favoriteTime:"morning",moodImprovement:0,sessions:[],hasSessionsToday:!1,mostRecentType:"mindfulness",mostRecentSoundscape:"silence",timeOfLastSession:null,totalInterruptions:0,averageFocusLevel:0,userTimezone:B.getUserTimezone()}}}},s_=["You are capable of amazing things.","You are loved.","You are strong.","You are beautiful.","You are enough.","You are worthy.","You are important.","You are talented.","You are special.","I am capable and strong","I am loved and loving","I am healthy and happy","I am wealthy and wise","Believe in yourself and all that you are.","You are amazing.","You are stronger than you think.","You are braver than you believe.","Every day is a new opportunity.","You are worth it.","You are worthy of all the good things.","You are deserving of love and happiness.","Stay positive, work hard, make it happen.","You are enough just as you are.","You are doing great.","Your potential is limitless.","You are a work of art.","You are doing great.","You are a gift to the world.","Keep going, you are getting there.","You are a masterpiece."];async function Zi(){const t=xE().currentUser;if(!t){alert("You must be logged in to upgrade.");return}try{console.log("🔧 Starting Stripe upgrade with Firebase Functions SDK"),console.log("👤 User ID:",t.uid);const e=Bj(Wj,"createStripeCheckoutSession");console.log("📞 Calling createStripeCheckoutSession function...");const n=await e({});console.log("✅ Function call successful:",n);const{url:r}=n.data;console.log("🔗 Redirecting to Stripe checkout:",r),window.location.href=r}catch(e){console.error("❌ Error creating Stripe checkout session:",e),console.error("❌ Error details:",e.message,e.code),alert("Error creating checkout session. Please try again.")}}function i_(){const t=Math.floor(Math.random()*s_.length);return s_[t]}function ub(){const t=Sc(),{user:e,loading:n,isPremium:r}=nn(),[s,i]=j.useState(null),[o,l]=j.useState({workout:{totalMinutes:0,sessions:0,hasWorkoutsToday:!1},meditation:{totalMinutes:0,sessions:0,hasSessionsToday:!1,deepStateAchieved:0},water:{totalOz:0,entries:0,hasWaterToday:!1}}),[c,d]=j.useState(30),[f,p]=j.useState(10),[g,N]=j.useState(64),[A,R]=j.useState(i_()),[P,S]=j.useState(!0),[E,x]=j.useState(!1);if(j.useEffect(()=>{if(!n&&!e){t("/welcome",{replace:!0});return}},[e,n,t]),j.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{S(!0);const w=B.getCurrentLocalTime();console.log("🌍 Dashboard timezone:",B.getUserTimezone()),console.log("📅 Local today:",B.formatLocalDateTime(w));const T=await Bs.getUserProfile(e.uid);i(T.user),d(T.user.exerciseGoalMinutes||30),p(T.user.meditationGoalMinutes||10),N(T.user.waterGoalOz||64),console.log("📊 Fetching workout data for date:",w);const[k,C,I]=await Promise.all([Ts.getDailyWorkoutSummary(e.uid,w),Is.getDailyMeditationSummary(e.uid,w),Kt.getDailyWaterIntake(e.uid,w)]);console.log("📊 Raw workout data from Dashboard:",k),console.log("🧘 Raw meditation data:",C),console.log("💧 Raw water data:",I),l({workout:{totalMinutes:k.totalMinutes||0,sessions:k.totalWorkouts||0,hasWorkoutsToday:k.hasWorkoutsToday||k.totalMinutes>0,calories:k.caloriesBurned||0,lastWorkoutType:k.mostCommonType},meditation:{totalMinutes:C.totalMinutes||0,sessions:C.totalSessions||0,hasSessionsToday:C.hasSessionsToday||!1,deepStateAchieved:C.deepStateAchieved||0,moodImprovement:C.moodImprovement||0,lastSessionType:C.mostRecentType},water:{totalOz:I.totalOz||0,entries:I.totalEntries||I.entries||0,hasWaterToday:(I.totalOz||0)>0,averagePerEntry:I.averagePerEntry||0,isOnTrack:(I.totalOz||0)>=(T.user.waterGoalOz||64)*.75}})}catch(w){console.error("Error fetching daily data:",w)}finally{S(!1)}})()},[e]),j.useEffect(()=>{const y=localStorage.getItem("affirmation"),w=localStorage.getItem("affirmationDate"),T=new Date().toISOString().split("T")[0];if(y&&w===T)R(y);else{const k=i_();R(k),localStorage.setItem("affirmation",k),localStorage.setItem("affirmationDate",T)}},[]),j.useEffect(()=>{if(console.log("Trial modal effect running",s),s&&s.subscriptionStatus==="trial_expired"&&s.subscription==="free"){const y=localStorage.getItem("dontRemindTrial"),w=localStorage.getItem("lastTrialReminded");console.log("dontRemindTrial:",y),console.log("lastReminded:",w);const T=1e3*60*60*24*7,k=Date.now();y||(!w||k-Number(w)>T)&&(x(!0),localStorage.setItem("lastTrialReminded",k),console.log("Showing trial modal!"))}},[s]),n||P)return u.jsx("div",{className:"dashboard-loading",children:"Loading..."});if(!e)return u.jsx("div",{className:"dashboard-loading",children:"Redirecting..."});if(!s)return u.jsx("div",{className:"dashboard-loading",children:"Loading user data..."});if(!s.firstName||!s.exerciseGoalMinutes||!s.waterGoalOz||!s.meditationGoalMinutes)return u.jsx("div",{className:"dashboard-loading",children:"Loading user profile..."});const D=Math.min(o.workout.totalMinutes/c*100,100)||0,V=Math.min(o.meditation.totalMinutes/f*100,100)||0,O=Math.min(o.water.totalOz/g*100,100)||0,v=Math.max(c-o.workout.totalMinutes,0);return s.subscriptionStatus==="trial_expired"&&s.subscription,u.jsxs("div",{className:"dashboard-page",children:[u.jsxs("div",{className:"welcome-section",children:[u.jsxs("h1",{children:["Welcome back, ",s.firstName,"!"]}),u.jsx("p",{children:"Here's your wellness progress for today"})]}),u.jsxs("div",{className:"progress-bars",children:[u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"💪 Today's Workout"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",c," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.workout.totalMinutes," / ",c," min"]}),u.jsx(Qd,{value:D,text:`${Math.round(D)}%`,styles:Yd({pathColor:`rgba(62, 152, 199, ${Math.max(D/100,.3)})`,textColor:"#3e98c7"})}),u.jsx("div",{className:"daily-stats",children:o.workout.hasWorkoutsToday?u.jsxs("span",{children:["✅ ",o.workout.sessions," workouts logged"]}):u.jsx("span",{children:"No workouts logged today"})}),u.jsx("button",{className:"track-button",onClick:()=>t("/workout"),children:"Log Workout"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"🧘‍♀️ Today's Meditation"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",f," minutes"]}),u.jsxs("p",{className:"current-text",children:[o.meditation.totalMinutes," / ",f," min"]}),u.jsx(Qd,{value:V,text:`${Math.round(V)}%`,styles:Yd({pathColor:`rgba(138, 43, 226, ${Math.max(V/100,.3)})`,textColor:"#8a2be2"})}),u.jsxs("div",{className:"daily-stats",children:[o.meditation.hasSessionsToday?u.jsxs("span",{children:["✅ ",o.meditation.sessions," sessions completed"]}):u.jsx("span",{children:"No meditation logged today"}),o.meditation.deepStateAchieved>0&&u.jsxs("span",{className:"deep-state",children:["🌟 ",o.meditation.deepStateAchieved," deep states"]})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/meditation"),children:"Start Meditation"})]}),u.jsxs("div",{className:"progress-bar",children:[u.jsx("h2",{children:"💧 Today's Hydration"}),u.jsxs("p",{className:"goal-text",children:["Daily Goal: ",g," oz"]}),u.jsxs("p",{className:"current-text",children:[o.water.totalOz," / ",g," oz"]}),u.jsx(Qd,{value:O,text:`${Math.round(O)}%`,styles:Yd({pathColor:`rgba(30, 144, 255, ${Math.max(O/100,.3)})`,textColor:"#1e90ff"})}),u.jsxs("div",{className:"daily-stats",children:[o.water.hasWaterToday?u.jsxs("span",{children:["✅ ",o.water.entries," water entries"]}):u.jsx("span",{children:"No water logged today"}),o.water.isOnTrack&&u.jsx("span",{className:"on-track",children:"🎯 On track for hydration!"})]}),u.jsx("button",{className:"track-button",onClick:()=>t("/water"),children:"Log Water"})]})]}),v>0&&u.jsx("div",{className:"notification-bar",children:u.jsxs("p",{children:["🔥 You are ",v," minutes away from your daily workout goal!"]})}),D>=100&&V>=100&&O>=100&&u.jsx("div",{className:"celebration-bar",children:u.jsx("p",{children:"🎉 Congratulations! You've achieved all your daily wellness goals! 🎉"})}),u.jsxs("div",{className:"affirmation-bar",children:[u.jsx("p",{children:"🌸 Daily Affirmation 🌸"}),u.jsx("h2",{children:A})]}),u.jsxs("div",{className:"quick-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.workout.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Exercised Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.water.totalOz}),u.jsx("span",{className:"stat-label",children:"Ounces of Water Today"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-number",children:o.meditation.totalMinutes}),u.jsx("span",{className:"stat-label",children:"Minutes Meditated Today"})]})]}),E&&u.jsx("div",{className:"trial-modal-overlay",children:u.jsxs("div",{className:"trial-modal",children:[u.jsx("h2",{children:"Your free trial has ended"}),u.jsx("p",{children:"Upgrade to keep enjoying premium features!"}),u.jsx("button",{className:"primary-button",onClick:Zi,children:"Upgrade with Stripe"}),u.jsxs("div",{className:"trial-modal-actions",children:[u.jsx("button",{className:"secondary-button",onClick:()=>x(!1),children:"Remind me later"}),u.jsx("button",{className:"link-button",onClick:()=>{localStorage.setItem("dontRemindTrial","true"),x(!1)},children:"Don't remind me again"})]})]})})]})}function cb(){const{user:t}=nn(),[e,n]=j.useState([]),[r,s]=j.useState({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),[i,o]=j.useState(!1),[l,c]=j.useState(null),[d,f]=j.useState(!0),[p,g]=j.useState(!1),[N,A]=j.useState(""),R=new Date().toISOString().split("T")[0];j.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const v=await Ts.fetchWorkoutsByUser(t.uid);n(v.workouts||[])}catch(v){console.error("Error fetching workouts:",v),A("Failed to load workouts")}finally{f(!1)}})()},[t]);const P=O=>{const{name:v,value:y}=O.target;s(w=>({...w,[v]:y}))},S=async O=>{if(O.preventDefault(),console.log("🚀 Workout submit started"),console.log("📊 Form data:",r),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),A("Please log in to save workouts");return}if(!r.title||!r.durationMinutes||!r.date){A("Please fill in all required fields");return}try{g(!0),A("");let v;if(r.date){const T=r.date.split("-"),k=parseInt(T[0]),C=parseInt(T[1]),I=parseInt(T[2]),re=new Date;console.log("🔍 Date parsing debug:"),console.log("  Form input:",r.date),console.log("  Split parts:",T),console.log("  Parsed year:",k),console.log("  Parsed month (human readable):",C),console.log("  Parsed day:",I),console.log("  Month for Date constructor (0-indexed):",C-1),v=new Date(k,C-1,I,re.getHours(),re.getMinutes(),re.getSeconds()),console.log("📅 Created date:",v),console.log("📅 Verify - Year:",v.getFullYear()),console.log("📅 Verify - Month (0-indexed):",v.getMonth()),console.log("📅 Verify - Month (human):",v.getMonth()+1),console.log("📅 Verify - Day:",v.getDate()),console.log("📅 Final formatted:",v.toLocaleDateString())}else v=B.getCurrentLocalTime();const y={title:r.title,type:r.type,durationMinutes:parseInt(r.durationMinutes),date:v,notes:r.notes,caloriesBurned:r.caloriesBurned?parseInt(r.caloriesBurned):0};console.log("📝 Final workout data:",y),console.log("📅 Will be saved as:",B.formatLocalDateTime(y.date));let w;if(i&&l?w=await Ts.updateWorkout(t.uid,l,y):w=await Ts.logWorkout(t.uid,y),console.log("✅ Workout service result:",w),w.success){console.log("🎉 Workout logged successfully!");const T=await Ts.fetchWorkoutsByUser(t.uid);n(T.workouts||[]),s({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""}),o(!1),c(null),A("")}}catch(v){console.error("💥 Workout logging error:",v),A("Failed to save workout. Please try again.")}finally{g(!1)}},E=O=>{var y,w;o(!0),c(O.id);const v=O.date instanceof Date?O.date.toISOString().split("T")[0]:new Date(O.date).toISOString().split("T")[0];s({date:v,durationMinutes:((y=O.durationMinutes)==null?void 0:y.toString())||"",title:O.title||"",type:O.type||"General",notes:O.notes||"",caloriesBurned:((w=O.caloriesBurned)==null?void 0:w.toString())||""})},x=async O=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this workout?"))try{await Ts.deleteWorkout(t.uid,O),n(v=>v.filter(y=>y.id!==O))}catch(v){console.error("Error deleting workout:",v),A("Failed to delete workout")}},D=()=>{o(!1),c(null),s({date:"",durationMinutes:"",title:"",type:"General",notes:"",caloriesBurned:""})},V=e.filter(O=>(O.date instanceof Date?O.date.toISOString().split("T")[0]:new Date(O.date).toISOString().split("T")[0])===R);return d?u.jsx("div",{className:"workout-loading",children:"Loading workouts..."}):u.jsxs("div",{className:"workout-page",children:[u.jsxs("div",{className:"workout-card",children:[u.jsx("h1",{className:"workout-title",children:i?"Edit Workout Session":"Log Workout Session"}),N&&u.jsx("div",{className:"error-message",children:N}),u.jsxs("form",{onSubmit:S,className:"workout-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:r.date,onChange:P,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Title",u.jsx("input",{type:"text",name:"title",value:r.title,onChange:P,className:"form-input",placeholder:"e.g., Morning Run, Gym Session",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Workout Type",u.jsxs("select",{name:"type",value:r.type,onChange:P,className:"form-input",children:[u.jsx("option",{value:"General",children:"General"}),u.jsx("option",{value:"Cardio",children:"Cardio"}),u.jsx("option",{value:"Strength",children:"Strength Training"}),u.jsx("option",{value:"Yoga",children:"Yoga"}),u.jsx("option",{value:"Running",children:"Running"}),u.jsx("option",{value:"Cycling",children:"Cycling"}),u.jsx("option",{value:"Swimming",children:"Swimming"}),u.jsx("option",{value:"Walking",children:"Walking"}),u.jsx("option",{value:"HIIT",children:"HIIT"}),u.jsx("option",{value:"Other",children:"Other"})]})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration / Length (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:r.durationMinutes,onChange:P,className:"form-input",min:"1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Calories Burned (Optional)",u.jsx("input",{type:"number",name:"caloriesBurned",value:r.caloriesBurned,onChange:P,className:"form-input",min:"0",placeholder:"0"})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:r.notes,onChange:P,className:"form-input form-textarea",placeholder:"How did it feel? Any achievements?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:p,children:p?i?"Updating...":"Logging...":i?"Update Workout":"Log Workout"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:D,disabled:p,children:"Cancel"})]})]})]}),u.jsxs("div",{className:"workout-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Workouts (",V.length,")"]}),V.length===0?u.jsx("p",{className:"no-workouts",children:"No workouts logged for today. Start your fitness journey!"}):u.jsx("ul",{className:"log-list",children:V.map(O=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"workout-info",children:[u.jsx("span",{className:"workout-title-display",children:O.title}),u.jsx("span",{className:"workout-type",children:O.type}),u.jsxs("span",{className:"workout-duration",children:[O.durationMinutes," min"]}),O.caloriesBurned>0&&u.jsxs("span",{className:"workout-calories",children:[O.caloriesBurned," cal"]}),O.notes&&u.jsx("span",{className:"workout-notes",children:O.notes})]}),u.jsxs("div",{className:"workout-actions",children:[u.jsx("button",{onClick:()=>E(O),className:"edit-button",disabled:p,children:"Edit"}),u.jsx("button",{onClick:()=>x(O.id),className:"delete-button",disabled:p,children:"Delete"})]})]},O.id))})]})]})}const Ir={silence:{name:"Silence",description:"Pure silence for traditional meditation",icon:"🤫",neurological:"Promotes introspection and self-awareness",frequency:null,baseFreq:null},pink_noise_rain:{name:"Pink Noise Rain",description:"Synthetic pink noise for deep relaxation",icon:"🌧️",neurological:"Pink noise (1/f) - enhances deep sleep and memory consolidation",frequency:"pink_noise",baseFreq:200,waveType:"sawtooth"},alpha_waves:{name:"Ocean Waves",description:"Realistic ocean waves with alpha wave entrainment",icon:"🌊",neurological:"Ocean rhythms (0.1 Hz) naturally entrain alpha waves (8-12 Hz) for relaxation",frequency:"ocean_waves",waveFrequency:.1,baseFreq:60,highFreq:200,alphaCarrier:200,alphaBeat:10,waveType:"sine"},earth_frequency:{name:"Earth Resonance",description:"Schumann resonance for grounding",icon:"🌲",neurological:"Earth frequency (7.83 Hz) - natural grounding and balance",frequency:"earth_binaural",carrierFreq:136.1,waveType:"sine"},white_noise:{name:"White Noise",description:"Full spectrum noise for focus",icon:"📻",neurological:"White noise - masks distractions, improves concentration",frequency:"white_noise",baseFreq:440,waveType:"square"},gamma_focus:{name:"Gamma Focus",description:"High-frequency binaural beats for peak concentration",icon:"🎧",neurological:"Gamma waves (40 Hz) - heightened awareness and cognitive performance",frequency:"gamma",baseFreq:40,binauralBeat:40,leftEar:200,rightEar:240,waveType:"sine",premium:!0},theta_deep:{name:"Theta Deep State",description:"Deep theta waves for profound meditation",icon:"🌙",neurological:"Theta waves (6 Hz) - deep meditation, creativity, and memory consolidation",frequency:"theta",baseFreq:6,binauralBeat:6,leftEar:200,rightEar:206,waveType:"sine",premium:!0},healing_bowls:{name:"Healing Harmonics",description:"432 Hz healing frequency with natural harmonics",icon:"🎵",neurological:'432 Hz "healing frequency" with harmonic overtones for cellular resonance',frequency:"harmonic",baseFreq:432,harmonics:[432,648,864,1296],waveType:"triangle",premium:!0}},zl={mindfulness:{name:"Mindfulness",description:"Present-moment awareness practice",duration:[5,10,15,20],icon:"🧘‍♀️"},breathing:{name:"Breathing",description:"Focused breathwork exercises",duration:[3,5,10],icon:"💨"},body_scan:{name:"Body Scan",description:"Progressive muscle relaxation",duration:[10,15,20],icon:"🫁"},loving_kindness:{name:"Loving Kindness",description:"Compassion and heart-opening meditation",duration:[5,10,15],icon:"💖"},flow_state:{name:"Flow State",description:"Neurologically optimized for peak performance",duration:[5,7,10],icon:"🎯",premium:!0}};function gI({children:t,fallback:e,showUpgrade:n=!0,feature:r="this feature",className:s=""}){const{isPremium:i,upgradeToPremium:o}=nn();return i?t:e||u.jsx("div",{className:`premium-gate ${s}`,children:u.jsxs("div",{className:"premium-lock",children:[u.jsx("div",{className:"lock-icon",children:"🔒"}),u.jsx("h3",{children:"Premium Feature"}),u.jsxs("p",{children:["Upgrade to unlock ",r]}),n&&u.jsx("button",{onClick:Zi,className:"unlock-button",children:"Upgrade to Premium - $4.99/month"})]})})}function db(){const{user:t,isPremium:e}=nn(),[n,r]=j.useState([]),[s,i]=j.useState({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""}),[o,l]=j.useState(!1),[c,d]=j.useState(null),[f,p]=j.useState(!0),[g,N]=j.useState(!1),[A,R]=j.useState(""),[P,S]=j.useState(!1),[E,x]=j.useState(0),[D,V]=j.useState(5),[O,v]=j.useState(!1),[y,w]=j.useState(!1),[T,k]=j.useState("silence"),[C,I]=j.useState(""),[re,Ge]=j.useState(null),[Z,Ie]=j.useState(null),[q,X]=j.useState(null),[se,Se]=j.useState(null),ge=j.useRef(null);B.formatLocalDate(new Date),j.useEffect(()=>{const b=async()=>{if(t!=null&&t.uid)try{p(!0),console.log("🌍 Fetching meditations for timezone:",B.getUserTimezone());const $=((await Is.fetchMeditationsByUser(t.uid)).meditations||[]).map(H=>({...H,localDate:B.formatLocalDate(H.date),localDateTime:B.formatLocalDateTime(H.date),relativeTime:B.getRelativeTime(H.date),isToday:B.isToday(H.date)}));r($),console.log("🧘 Loaded meditations with timezone data:",$.length)}catch(U){console.error("Error fetching meditations:",U),R("Failed to load meditation sessions")}finally{p(!1)}};t!=null&&t.uid&&b()},[t]),j.useEffect(()=>(P&&T!=="silence"&&rn(),()=>{if(q)try{Array.isArray(q)?q.forEach(b=>{b.stop&&b.stop()}):q.stop&&q.stop()}catch(b){console.log("Audio cleanup error:",b)}}),[P,T]),j.useEffect(()=>(P&&!O?ge.current=setInterval(()=>{x(b=>{const U=b+1;return U>=180&&!y&&(w(!0),po()),U})},1e3):clearInterval(ge.current),()=>clearInterval(ge.current)),[P,O,y]),j.useEffect(()=>{P&&E>=D*60&&(console.log("⏰ Timer completed! Auto-stopping session..."),console.log("📊 Final session stats:"),console.log("  - Duration:",Math.floor(E/60),"minutes"),console.log("  - Target:",D,"minutes"),console.log("  - Soundscape:",T),console.log("  - Deep state achieved:",y),console.log("  - Start time:",B.formatLocalDateTime(re)),go(),nl())},[P,E,D,T,y,re]);const Ee=n.filter(b=>b.isToday||B.isToday(b.date));console.log("📋 Today's meditations:",Ee.length);const rn=()=>{try{const b=new(window.AudioContext||window.webkitAudioContext);Ie(b);const U=b.createGain();U.connect(b.destination),U.gain.value=.1,Se(U);const $=Ir[T];if(!($!=null&&$.frequency)){console.log("🔇 Silence selected");return}switch($.frequency){case"gamma":case"theta":sn(b,U,$);break;case"alpha":on(b,U,$);break;case"ocean_waves":mo(b,U,$);break;case"earth_binaural":an(b,U,$);break;case"harmonic":Xc(b,U,$.harmonics||[$.baseFreq]);break;case"pink_noise":Xs(b,U);break;case"white_noise":Js(b,U);break;case"single_tone":case"natural":Yc(b,U,$.baseFreq,$.waveType||"sine");break;default:console.log("🔇 Unknown frequency type:",$.frequency)}}catch(b){console.error("Audio setup failed:",b)}},sn=(b,U,$)=>{const H=b.createOscillator();H.frequency.setValueAtTime($.leftEar,b.currentTime),H.type=$.waveType||"sine";const ee=b.createOscillator();ee.frequency.setValueAtTime($.rightEar,b.currentTime),ee.type=$.waveType||"sine";const ae=b.createStereoPanner();ae.pan.value=-1;const ce=b.createStereoPanner();ce.pan.value=1,H.connect(ae),ae.connect(U),ee.connect(ce),ce.connect(U),H.start(),ee.start(),X([H,ee]),console.log(`🎧 Binaural beats: ${$.leftEar}Hz (L) / ${$.rightEar}Hz (R) = ${$.binauralBeat}Hz beat`)},on=(b,U,$)=>{const ee=$.baseFreq,ae=b.createOscillator();ae.frequency.setValueAtTime(200,b.currentTime),ae.type=$.waveType||"sine";const ce=b.createOscillator();ce.frequency.setValueAtTime(200+ee,b.currentTime),ce.type=$.waveType||"sine";const ut=b.createStereoPanner();ut.pan.value=-1;const Pe=b.createStereoPanner();Pe.pan.value=1,ae.connect(ut),ut.connect(U),ce.connect(Pe),Pe.connect(U),ae.start(),ce.start(),X([ae,ce]),console.log(`🌊 Alpha binaural: 200Hz (L) / ${200+ee}Hz (R) = ${ee}Hz beat`)},an=(b,U,$)=>{const H=$.carrierFreq||136.1,ee=7.83,ae=b.createOscillator();ae.frequency.setValueAtTime(H,b.currentTime),ae.type=$.waveType||"sine";const ce=b.createOscillator();ce.frequency.setValueAtTime(H+ee,b.currentTime),ce.type=$.waveType||"sine";const ut=b.createStereoPanner();ut.pan.value=-1;const Pe=b.createStereoPanner();Pe.pan.value=1,ae.connect(ut),ut.connect(U),ce.connect(Pe),Pe.connect(U),ae.start(),ce.start(),X([ae,ce]),console.log(`🌲 Earth binaural: ${H}Hz (L) / ${H+ee}Hz (R) = ${ee}Hz Schumann beat`)},Yc=(b,U,$,H="sine")=>{const ee=b.createOscillator();ee.frequency.setValueAtTime($,b.currentTime),ee.type=H,ee.connect(U),ee.start(),X(ee),console.log(`🎵 Single tone: ${$}Hz (${H})`)},Xc=(b,U,$)=>{const H=$.map(ee=>{const ae=b.createOscillator();ae.frequency.setValueAtTime(ee,b.currentTime),ae.type="triangle";const ce=b.createGain();return ce.gain.value=.3/$.length,ae.connect(ce),ce.connect(U),ae.start(),ae});X(H),console.log(`🎼 Harmonics: ${$.join(", ")}Hz`)},Xs=(b,U)=>{const $=b.sampleRate*2,H=b.createBuffer(1,$,b.sampleRate),ee=H.getChannelData(0);for(let ce=0;ce<$;ce++){let ut=0;for(let Pe=0;Pe<5;Pe++)ut+=(Math.random()*2-1)/Math.pow(2,Pe);ee[ce]=ut*.1}const ae=b.createBufferSource();ae.buffer=H,ae.loop=!0,ae.connect(U),ae.start(),X(ae),console.log("🌧️ Pink noise generated")},Js=(b,U)=>{const $=b.sampleRate*2,H=b.createBuffer(1,$,b.sampleRate),ee=H.getChannelData(0);for(let ce=0;ce<$;ce++)ee[ce]=(Math.random()*2-1)*.1;const ae=b.createBufferSource();ae.buffer=H,ae.loop=!0,ae.connect(U),ae.start(),X(ae),console.log("📻 White noise generated")},mo=(b,U,$)=>{const H=[],ee=b.createOscillator();ee.frequency.setValueAtTime(20,b.currentTime),ee.type="sine";const ae=b.createGain();ae.gain.value=.4;const ce=b.createOscillator();ce.frequency.setValueAtTime(396,b.currentTime),ce.type="sine";const ut=b.createGain();ut.gain.value=.05;const Pe=b.createOscillator();Pe.frequency.setValueAtTime(.15,b.currentTime),Pe.type="sine";const ei=b.createGain();ei.gain.value=.3,Pe.connect(ei),ei.connect(ae.gain),ee.connect(ae),ae.connect(U),ce.connect(ut),ut.connect(U);const _o=b.createBuffer(1,b.sampleRate*8,b.sampleRate),ti=_o.getChannelData(0);let wo=0;for(let Ve=0;Ve<ti.length;Ve++){const et=Math.random()*2-1;wo=(wo+et*.02)*.99;const tt=Math.sin(Ve*.001)*.3+.7;ti[Ve]=wo*tt*.5}const ds=b.createBufferSource();ds.buffer=_o,ds.loop=!0;const Bn=b.createOscillator();Bn.frequency.setValueAtTime(432,b.currentTime),Bn.type="triangle";const hs=b.createGain();hs.gain.value=.08;const fr=b.createBiquadFilter();fr.type="bandpass",fr.frequency.setValueAtTime(300,b.currentTime),fr.Q.setValueAtTime(.8,b.currentTime);const En=b.createGain();En.gain.value=.3;const $n=b.createOscillator();$n.frequency.setValueAtTime(.13,b.currentTime),$n.type="triangle";const mr=b.createGain();mr.gain.value=.25,$n.connect(mr),mr.connect(En.gain),mr.connect(hs.gain),ds.connect(fr),fr.connect(En),En.connect(U),Bn.connect(hs),hs.connect(U);const Tn=b.createBuffer(1,b.sampleRate*6,b.sampleRate),Eo=Tn.getChannelData(0);for(let Ve=0;Ve<Eo.length;Ve++){let et=0;for(let ct=0;ct<3;ct++)et+=(Math.random()*2-1)*Math.pow(.5,ct);const tt=Math.random()>.98?(Math.random()*2-1)*.3:0;Eo[Ve]=(et+tt)*.15}const In=b.createBufferSource();In.buffer=Tn,In.loop=!0;const pr=b.createOscillator();pr.frequency.setValueAtTime(528,b.currentTime),pr.type="sine";const Sn=b.createGain();Sn.gain.value=.06;const fs=b.createBiquadFilter();fs.type="highpass",fs.frequency.setValueAtTime(1500,b.currentTime);const Be=b.createGain();Be.gain.value=.12;const gr=b.createOscillator();gr.frequency.setValueAtTime(.5,b.currentTime),gr.type="sine";const xn=b.createGain();if(xn.gain.value=.04,gr.connect(xn),xn.connect(Be.gain),xn.connect(Sn.gain),In.connect(fs),fs.connect(Be),Be.connect(U),pr.connect(Sn),Sn.connect(U),$.alphaCarrier&&$.alphaBeat){const Ve=b.createOscillator();Ve.frequency.setValueAtTime($.alphaCarrier,b.currentTime),Ve.type="sine";const et=b.createOscillator();et.frequency.setValueAtTime($.alphaCarrier+$.alphaBeat,b.currentTime),et.type="sine";const tt=b.createGain();tt.gain.value=.03;const ct=b.createStereoPanner();ct.pan.value=-1;const ri=b.createStereoPanner();ri.pan.value=1,Ve.connect(ct),ct.connect(tt),et.connect(ri),ri.connect(tt),tt.connect(U),H.push(Ve,et),Ve.start(),et.start()}const yr=b.createBuffer(1,b.sampleRate*10,b.sampleRate),sl=yr.getChannelData(0);for(let Ve=0;Ve<sl.length;Ve++){let et=0;for(let tt=0;tt<4;tt++)et+=(Math.random()*2-1)/Math.pow(2,tt*.7);sl[Ve]=et*.2}const ms=b.createBufferSource();ms.buffer=yr,ms.loop=!0;const Gt=b.createBiquadFilter();Gt.type="bandpass",Gt.frequency.setValueAtTime(150,b.currentTime),Gt.Q.setValueAtTime(.4,b.currentTime);const ni=b.createGain();ni.gain.value=.15;const ps=b.createOscillator();ps.frequency.setValueAtTime(.07,b.currentTime),ps.type="sine";const vr=b.createGain();vr.gain.value=.1,ps.connect(vr),vr.connect(ni.gain),ms.connect(Gt),Gt.connect(ni),ni.connect(U),ee.start(),ce.start(),Pe.start(),ds.start(),Bn.start(),$n.start(),In.start(),pr.start(),gr.start(),ms.start(),ps.start(),H.push(ee,ce,Pe,ds,Bn,$n,In,pr,gr,ms,ps),X(H),console.log("🌊✨ Healing Ocean Waves: 396Hz (Liberation) + 432Hz (Earth) + 528Hz (Love) + Alpha binaural beats + Realistic ocean sounds")},po=()=>{console.log("🌟 Deep state achieved at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Deep State Achieved! 🧘‍♀️",{body:`You've entered a deep meditative state at ${B.formatLocalTime(new Date)}. Well done!`,icon:"/meditation-icon.png"})},go=()=>{console.log("🎉 Session completed at:",B.formatLocalDateTime(new Date)),"Notification"in window&&Notification.permission==="granted"&&new Notification("Meditation Complete! 🎉",{body:`Great job! You completed your ${D}-minute meditation session.`,icon:"/meditation-icon.png"});try{const b=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAcugtTxzD2sLYPs7lkgCBl5gQEDgVs+l4G6tGEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBhqXy/HVgzQIHm/J7+OZSA8PU6fm77BdGAc=");b.volume=.3,b.play().catch(()=>{})}catch{}},yo=(b,U,$)=>{const H=B.getCurrentLocalTime();console.log("🌍 Starting meditation session in timezone:",B.getUserTimezone()),console.log("🧘 Session start time:",B.formatLocalDateTime(H)),V(b),k($),x(0),S(!0),v(!1),w(!1),Ge(H),"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},tl=()=>{const b=B.getCurrentLocalTime();console.log("⏸️ Session paused at:",B.formatLocalDateTime(b)),v(!O),q&&Z&&(O?Z.resume():Z.suspend())},nl=async()=>{const b=B.getCurrentLocalTime();if(console.log("⏹️ Session ended at:",B.formatLocalDateTime(b)),console.log("📊 Session duration:",Math.floor(E/60),"minutes"),console.log("🎯 Target duration:",D,"minutes"),console.log("✅ Session completed?",E>=D*60),q){if(Array.isArray(q))q.forEach(U=>{try{U.stop?U.stop():U.disconnect&&U.disconnect()}catch($){console.log("Oscillator cleanup:",$)}});else try{q.stop?q.stop():q.disconnect&&q.disconnect()}catch(U){console.log("Oscillator cleanup:",U)}X(null)}if(Z){try{await Z.close()}catch(U){console.log("AudioContext cleanup:",U)}Ie(null)}if(S(!1),v(!1),E>=60){console.log("💾 Auto-logging session (duration >= 1 minute)"),console.log("🔍 Session time check:",E,"seconds"),console.log("🔍 Firebase user:",t==null?void 0:t.uid),console.log("🔍 Session start time:",re);try{await Jc(),console.log("✅ Auto-log completed successfully")}catch(U){console.error("❌ Auto-log failed:",U)}}else console.log("⚠️ Session too short, not logging (< 1 minute)");console.log("🔇 Audio stopped and session ended successfully")},Jc=async()=>{if(!(!(t!=null&&t.uid)||!re))try{console.log("📝 Auto-logging session with timezone data"),console.log("🧘 Session start time:",B.formatLocalDateTime(re)),console.log("⏰ Session duration:",Math.floor(E/60),"minutes");const b={date:re,durationMinutes:Math.floor(E/60),type:"mindfulness",soundscape:T,completed:E>=D*60,deepStateAchieved:y,moodBefore:C,targetDuration:D,sessionStartTime:re,sessionEndTime:B.getCurrentLocalTime(),userTimezone:B.getUserTimezone()};console.log("📊 Session data being saved:",b);const U=await Is.logMeditation(t.uid,b);console.log("✅ API Response:",U);const $={...U.meditation,localDate:B.formatLocalDate(U.meditation.date),localDateTime:B.formatLocalDateTime(U.meditation.date),relativeTime:B.getRelativeTime(U.meditation.date),isToday:B.isToday(U.meditation.date)};console.log("🔄 Adding meditation to UI:",$),console.log("📅 Is today?",$.isToday),console.log("📅 Local date:",$.localDate),r(H=>{const ee=[$,...H];return console.log("📋 Updated meditations list:",ee.length,"total"),ee}),console.log("✅ Session auto-logged and added to UI successfully")}catch(b){console.error("💥 Error auto-logging session:",b),console.error("💥 Error details:",b.message)}},wn=b=>{const{name:U,value:$}=b.target;i(H=>({...H,[U]:$}))},vo=async b=>{if(b.preventDefault(),!!(t!=null&&t.uid)){N(!0),R("");try{console.log("🌍 Submitting meditation in timezone:",B.getUserTimezone());const U=s.date?B.toLocalTimezone(s.date):B.getCurrentLocalTime(),$={...s,date:U,durationMinutes:parseInt(s.durationMinutes),userTimezone:B.getUserTimezone()};if(console.log("📝 Meditation submit data:",$),console.log("📅 Local meditation time:",B.formatLocalDateTime(U)),o)await Is.updateMeditation(t.uid,c,$),r(H=>H.map(ee=>ee.id===c?{...ee,...$,localDate:B.formatLocalDate(U),localDateTime:B.formatLocalDateTime(U),relativeTime:B.getRelativeTime(U),isToday:B.isToday(U)}:ee)),l(!1),d(null),console.log("✅ Meditation updated successfully");else{const H=await Is.logMeditation(t.uid,$),ee={...H.meditation,localDate:B.formatLocalDate(H.meditation.date),localDateTime:B.formatLocalDateTime(H.meditation.date),relativeTime:B.getRelativeTime(H.meditation.date),isToday:B.isToday(H.meditation.date)};r(ae=>[ee,...ae]),console.log("✅ Meditation logged successfully")}i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})}catch(U){console.error("Error saving meditation:",U),R(o?"Failed to update meditation":"Failed to log meditation")}finally{N(!1)}}},rl=b=>{var U;console.log("✏️ Editing meditation from:",B.formatLocalDateTime(b.date)),i({date:B.formatLocalDate(b.date),durationMinutes:((U=b.durationMinutes)==null?void 0:U.toString())||"",type:b.type||"mindfulness",soundscape:b.soundscape||"silence",moodBefore:b.moodBefore||"",moodAfter:b.moodAfter||"",notes:b.notes||""}),l(!0),d(b.id)},Zc=async b=>{if(!(t!=null&&t.uid))return;const U=n.find(H=>H.id===b),$=`Are you sure you want to delete the meditation session from ${(U==null?void 0:U.localDateTime)||"unknown time"}?`;if(window.confirm($))try{await Is.deleteMeditation(t.uid,b),r(H=>H.filter(ee=>ee.id!==b)),console.log("🗑️ Meditation deleted successfully")}catch(H){console.error("Error deleting meditation:",H),R("Failed to delete meditation")}},Zs=b=>{const U=Math.floor(b/60),$=b%60;return`${U}:${$.toString().padStart(2,"0")}`};return f?u.jsxs("div",{className:"meditation-loading",children:[u.jsx("p",{children:"Loading meditations..."}),u.jsxs("small",{children:["Timezone: ",B.getUserTimezone()]})]}):u.jsxs("div",{className:"meditation-page",children:[P&&u.jsxs("div",{className:"session-interface",children:[u.jsxs("div",{className:"session-header",children:[u.jsx("h2",{children:"🧘‍♀️ Meditation Session"}),u.jsxs("div",{className:"session-info",children:[u.jsxs("div",{className:"session-soundscape",children:[Ir[T].icon," ",Ir[T].name]}),u.jsxs("div",{className:"session-time-info",children:["Started: ",re?B.formatLocalTime(re):"Now",u.jsx("br",{}),u.jsx("small",{children:B.getUserTimezone()})]})]})]}),u.jsxs("div",{className:"session-timer",children:[u.jsxs("div",{className:"time-display",children:[u.jsx("span",{className:"current-time",children:Zs(E)}),u.jsxs("span",{className:"target-time",children:["/ ",Zs(D*60)]})]}),u.jsx("div",{className:"progress-ring",children:u.jsx("div",{className:"progress-fill",style:{background:`conic-gradient(#4CAF50 ${E/(D*60)*360}deg, #eee 0deg)`}})})]}),u.jsxs("div",{className:"session-status",children:[y&&u.jsxs("div",{className:"deep-state-indicator",children:["✨ Deep State Achieved at ",B.formatLocalTime(new Date)," ✨"]}),u.jsx("div",{className:"neurological-info",children:u.jsx("p",{children:Ir[T].neurological})})]}),u.jsxs("div",{className:"session-controls",children:[u.jsxs("button",{onClick:tl,className:"pause-btn",children:[O?"▶️":"⏸️"," ",O?"Resume":"Pause"]}),u.jsx("button",{onClick:nl,className:"stop-btn",children:"⏹️ End Session"})]})]}),!P&&u.jsxs("div",{className:"quick-start",children:[u.jsx("h1",{className:"meditation-title",children:"🧘‍♀️ Meditation Studio"}),u.jsxs("p",{className:"subtitle",children:["Neurologically optimized for deep meditation states",u.jsx("br",{})]}),u.jsx("div",{className:"quick-start-grid",children:Object.entries(zl).map(([b,U])=>u.jsxs("div",{className:`meditation-type ${U.premium?"premium":""}`,children:[u.jsxs("div",{className:"type-header",children:[u.jsx("span",{className:"type-icon",children:U.icon}),u.jsx("h3",{children:U.name}),U.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsx("p",{className:"type-description",children:U.description}),u.jsx("div",{className:"duration-options",children:U.duration.map($=>u.jsxs("button",{onClick:()=>{C||I(prompt("How are you feeling right now? (😊😔😴😤😌🤔🎉😰)")||"😐"),yo($,b,T)},className:"duration-btn",disabled:U.premium&&!e,children:[$,"min"]},$))})]},b))}),u.jsxs("div",{className:"soundscape-section",children:[u.jsx("h3",{children:"🎵 Choose Your Soundscape"}),u.jsx("div",{className:"soundscape-grid",children:Object.entries(Ir).map(([b,U])=>u.jsxs("div",{className:`soundscape-option ${U.premium?"premium":""} ${T===b?"selected":""} ${U.premium&&!e?"locked":""}`,onClick:()=>{!U.premium||e?k(b):alert("This soundscape requires Clarity Premium. Upgrade to access premium features!")},children:[u.jsxs("div",{className:"soundscape-header",children:[u.jsx("span",{className:"soundscape-icon",children:U.icon}),U.premium&&!e&&u.jsx("span",{className:"premium-badge",children:"PRO"})]}),u.jsx("h4",{children:U.name}),u.jsx("p",{className:"soundscape-description",children:U.description}),u.jsx("small",{className:"neurological-note",children:U.neurological}),U.premium&&!e&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"lock-icon",children:"🔒"})})]},b))})]})]}),!P&&u.jsxs("div",{className:"meditation-card",children:[u.jsx("h2",{className:"form-title",children:o?"Edit Meditation Session":"Manually Log Session"}),A&&u.jsx("div",{className:"error-message",children:A}),u.jsxs("form",{onSubmit:vo,className:"meditation-form",children:[u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date (",B.getUserTimezone(),")",u.jsx("input",{type:"date",name:"date",value:s.date,onChange:wn,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Duration (Minutes)",u.jsx("input",{type:"number",name:"durationMinutes",value:s.durationMinutes,onChange:wn,className:"form-input",min:"1",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Meditation Type",u.jsx("select",{name:"type",value:s.type,onChange:wn,className:"form-input",children:Object.entries(zl).map(([b,U])=>u.jsx("option",{value:b,children:U.name},b))})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Soundscape Used",u.jsx("select",{name:"soundscape",value:s.soundscape,onChange:wn,className:"form-input",children:Object.entries(Ir).map(([b,U])=>u.jsx("option",{value:b,children:U.name},b))})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood Before",u.jsxs("select",{name:"moodBefore",value:s.moodBefore,onChange:wn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"😊",children:"😊 Happy"}),u.jsx("option",{value:"😔",children:"😔 Sad"}),u.jsx("option",{value:"😴",children:"😴 Tired"}),u.jsx("option",{value:"😤",children:"😤 Frustrated"}),u.jsx("option",{value:"😌",children:"😌 Peaceful"}),u.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),u.jsx("option",{value:"🎉",children:"🎉 Excited"}),u.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Mood After",u.jsxs("select",{name:"moodAfter",value:s.moodAfter,onChange:wn,className:"form-input",children:[u.jsx("option",{value:"",children:"Select mood..."}),u.jsx("option",{value:"😊",children:"😊 Happy"}),u.jsx("option",{value:"😔",children:"😔 Sad"}),u.jsx("option",{value:"😴",children:"😴 Tired"}),u.jsx("option",{value:"😤",children:"😤 Frustrated"}),u.jsx("option",{value:"😌",children:"😌 Peaceful"}),u.jsx("option",{value:"🤔",children:"🤔 Thoughtful"}),u.jsx("option",{value:"🎉",children:"🎉 Excited"}),u.jsx("option",{value:"😰",children:"😰 Anxious"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("textarea",{name:"notes",value:s.notes,onChange:wn,className:"form-input form-textarea",placeholder:"How did the session feel? Any insights?",rows:"3"})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:g,children:g?o?"Updating...":"Logging...":o?"Update Session":"Log Session"}),o&&u.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{l(!1),d(null),i({date:B.formatLocalDate(new Date),durationMinutes:"",type:"mindfulness",soundscape:"silence",moodBefore:"",moodAfter:"",notes:""})},disabled:g,children:"Cancel"})]})]})]}),!P&&u.jsxs("div",{className:"meditation-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Sessions (",Ee.length,")",u.jsx("br",{}),u.jsxs("small",{children:[B.formatLocalDate(new Date)," - ",B.getUserTimezone()]})]}),Ee.length===0?u.jsxs("p",{className:"no-sessions",children:["No meditation sessions today. Start your mindfulness journey!",u.jsx("br",{}),u.jsxs("small",{children:["Local time: ",B.formatLocalDateTime(new Date)]})]}):u.jsx("ul",{className:"log-list",children:Ee.map(b=>{var U,$,H,ee;return u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"meditation-info",children:[u.jsxs("div",{className:"meditation-header",children:[u.jsxs("span",{className:"meditation-type",children:[(U=zl[b.type])==null?void 0:U.icon," ",(($=zl[b.type])==null?void 0:$.name)||b.type]}),u.jsxs("span",{className:"meditation-time",children:[b.localDateTime,u.jsxs("small",{children:[" (",b.relativeTime,")"]})]})]}),u.jsxs("div",{className:"meditation-details",children:[u.jsxs("span",{className:"meditation-duration",children:[b.durationMinutes," min"]}),u.jsxs("span",{className:"meditation-soundscape",children:[(H=Ir[b.soundscape])==null?void 0:H.icon," ",(ee=Ir[b.soundscape])==null?void 0:ee.name]}),b.deepStateAchieved&&u.jsx("span",{className:"deep-state-badge",children:"✨ Deep State"}),b.moodBefore&&b.moodAfter&&u.jsxs("span",{className:"mood-change",children:[b.moodBefore," → ",b.moodAfter]})]}),b.notes&&u.jsx("div",{className:"meditation-notes",children:b.notes})]}),u.jsxs("div",{className:"meditation-actions",children:[u.jsx("button",{onClick:()=>rl(b),className:"edit-button",disabled:g,children:"Edit"}),u.jsx("button",{onClick:()=>Zc(b.id),className:"delete-button",disabled:g,children:"Delete"})]})]},b.id)})})]}),!P&&u.jsxs("div",{className:"recommended-videos",children:[u.jsx("h2",{className:"recommended-title",children:"🎥 Guided Meditation Videos"}),u.jsxs("p",{className:"timezone-note",children:["Perfect for any time of day in ",B.getUserTimezone()]}),u.jsxs("div",{className:"video-tiles",children:[u.jsxs("a",{href:"https://www.youtube.com/watch?v=VpHz8Mb13_Y",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"🌸"}),u.jsx("p",{className:"video-title",children:"Relaxation and Positivity"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=CqnWMPuyT0g",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"💖"}),u.jsx("p",{className:"video-title",children:"Self Love"})]}),u.jsxs("a",{href:"https://www.youtube.com/watch?v=056qll-07ak",target:"_blank",rel:"noopener noreferrer",className:"video-tile",children:[u.jsx("div",{className:"video-thumbnail",children:"🧠"}),u.jsx("p",{className:"video-title",children:"Stop Thinking"})]})]})]}),u.jsx(gI,{feature:"exclusive meditation experiences",children:u.jsxs("div",{className:"premium-meditation-features",children:[u.jsx("h3",{children:"🧘‍♀️ Premium Meditation Experience"}),u.jsx("p",{children:"Unlock advanced features designed by neuroscientists:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"🎵 Premium binaural soundscapes"}),u.jsx("li",{children:"📊 Advanced session analytics"}),u.jsx("li",{children:"🧠 Personalized meditation recommendations"}),u.jsx("li",{children:"⏰ Smart session reminders based on your timezone"}),u.jsx("li",{children:"📈 Mood tracking and insights"})]}),u.jsx("button",{className:"primary-button",onClick:Zi,style:{marginTop:"1rem"},children:"Upgrade with Stripe"})]})})]})}function hb(){const{user:t}=nn(),[e,n]=j.useState([]),[r,s]=j.useState({date:"",amount:"",type:"water",notes:""}),[i,o]=j.useState(!1),[l,c]=j.useState(null),[d,f]=j.useState(!0),[p,g]=j.useState(!1),[N,A]=j.useState(""),[R,P]=j.useState(0),[S,E]=j.useState(64),x=new Date().toISOString().split("T")[0];j.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{f(!0);const I=await Kt.fetchWaterIntakeByUser(t.uid);n(I.waterIntakes||[]);const re=await Kt.getTodayWaterIntake(t.uid);P(re.totalOz||0),E(64)}catch(I){console.error("Error fetching water data:",I),A("Failed to load water intake data")}finally{f(!1)}})()},[t]);const D=C=>{const{name:I,value:re}=C.target;s(Ge=>({...Ge,[I]:re}))},V=async C=>{if(C.preventDefault(),console.log("💧 Water submit started"),console.log("📊 Form data:",r),console.log("👤 Firebase user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("❌ No user ID found"),A("Please log in to save water intake");return}if(!r.amount||!r.date){A("Please fill in all required fields");return}try{g(!0),A("");let I;if(r.date){const Z=r.date.split("-"),Ie=parseInt(Z[0]),q=parseInt(Z[1]),X=parseInt(Z[2]),se=new Date;console.log("🔍 Water date parsing debug:"),console.log("  Form input:",r.date),console.log("  Split parts:",Z),console.log("  Parsed year:",Ie),console.log("  Parsed month (human readable):",q),console.log("  Parsed day:",X),console.log("  Month for Date constructor (0-indexed):",q-1),I=new Date(Ie,q-1,X,se.getHours(),se.getMinutes(),se.getSeconds()),console.log("📅 Created water date:",I),console.log("📅 Verify - Year:",I.getFullYear()),console.log("📅 Verify - Month (0-indexed):",I.getMonth()),console.log("📅 Verify - Month (human):",I.getMonth()+1),console.log("📅 Verify - Day:",I.getDate()),console.log("📅 Final formatted:",I.toLocaleDateString())}else I=new Date;const re={date:I,amount:parseFloat(r.amount),type:r.type,notes:r.notes};if(console.log("💧 Final water data:",re),console.log("📅 Will be saved as:",re.date.toLocaleDateString()),i)await Kt.updateWaterIntake(t.uid,l,re),n(Z=>Z.map(Ie=>Ie.id===l?{...Ie,...re}:Ie)),o(!1),c(null);else{const Z=await Kt.logWaterIntake(t.uid,re);n(Ie=>[Z.waterIntake,...Ie])}const Ge=await Kt.getTodayWaterIntake(t.uid);P(Ge.totalOz||0),s({date:"",amount:"",type:"water",notes:""}),console.log("✅ Water intake logged successfully!")}catch(I){console.error("💥 Water logging error:",I),A(i?"Failed to update water intake":"Failed to log water intake")}finally{g(!1)}},O=C=>{var re;o(!0),c(C.id);const I=C.date instanceof Date?C.date.toISOString().split("T")[0]:new Date(C.date).toISOString().split("T")[0];s({date:I,amount:((re=C.amount)==null?void 0:re.toString())||"",type:C.type||"water",notes:C.notes||""})},v=async C=>{if(t!=null&&t.uid&&window.confirm("Are you sure you want to delete this water intake?"))try{await Kt.deleteWaterIntake(t.uid,C),n(re=>re.filter(Ge=>Ge.id!==C));const I=await Kt.getTodayWaterIntake(t.uid);P(I.totalOz||0)}catch(I){console.error("Error deleting water intake:",I),A("Failed to delete water intake")}},y=()=>{o(!1),c(null),s({date:"",amount:"",type:"water",notes:""})},w=async C=>{if(t!=null&&t.uid)try{g(!0);const I=new Date,re=new Date(I.getFullYear(),I.getMonth(),I.getDate(),I.getHours(),I.getMinutes(),I.getSeconds());console.log("💧 Quick add date:",re),console.log("📅 Quick add formatted:",re.toLocaleDateString()),await Kt.logWaterIntake(t.uid,{date:re,amount:C,type:"water",notes:""});const Ge=await Kt.fetchWaterIntakeByUser(t.uid);n(Ge.waterIntakes||[]);const Z=await Kt.getTodayWaterIntake(t.uid);P(Z.totalOz||0),console.log("✅ Quick add water successful!")}catch(I){console.error("💥 Error quick adding water:",I),A("Failed to log water intake")}finally{g(!1)}},T=e.filter(C=>{const I=C.date instanceof Date?C.date.toISOString().split("T")[0]:new Date(C.date).toISOString().split("T")[0];return console.log("🔍 Comparing dates:",{waterDate:I,today:x,match:I===x}),I===x}),k=Math.min(R/S*100,100);return d?u.jsx("div",{className:"water-loading",children:"Loading water data..."}):u.jsxs("div",{className:"water-page",children:[u.jsxs("div",{className:"water-progress",children:[u.jsx("h2",{children:"Daily Hydration Progress"}),u.jsx("div",{className:"progress-info",children:u.jsx("div",{className:"water-progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${k}%`}})})}),R>=S&&u.jsx("div",{className:"goal-achieved",children:"🎉 Daily goal achieved! Great job! 🎉"})]}),u.jsxs("div",{className:"quick-add-section",children:[u.jsx("h3",{children:"Quick Add"}),u.jsxs("div",{className:"quick-add-buttons",children:[u.jsxs("button",{onClick:()=>w(8),className:"quick-add-btn",disabled:p,children:["8 oz",u.jsx("br",{}),u.jsx("small",{children:"Glass"})]}),u.jsxs("button",{onClick:()=>w(16),className:"quick-add-btn",disabled:p,children:["16 oz",u.jsx("br",{}),u.jsx("small",{children:"Bottle"})]}),u.jsxs("button",{onClick:()=>w(20),className:"quick-add-btn",disabled:p,children:["20 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Bottle"})]}),u.jsxs("button",{onClick:()=>w(32),className:"quick-add-btn",disabled:p,children:["32 oz",u.jsx("br",{}),u.jsx("small",{children:"Large Cup"})]})]})]}),u.jsxs("div",{className:"water-card",children:[u.jsx("h1",{className:"water-title",children:i?"Edit Water Intake":"Log Water Intake"}),N&&u.jsx("div",{className:"error-message",children:N}),u.jsxs("form",{onSubmit:V,className:"water-form",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Date",u.jsx("input",{type:"date",name:"date",value:r.date,onChange:D,className:"form-input",required:!0})]})}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Amount (oz)",u.jsx("input",{type:"number",name:"amount",value:r.amount,onChange:D,className:"form-input",min:"0.1",step:"0.1",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Drink Type",u.jsxs("select",{name:"type",value:r.type,onChange:D,className:"form-input",children:[u.jsx("option",{value:"water",children:"Water"}),u.jsx("option",{value:"tea",children:"Tea"}),u.jsx("option",{value:"coffee",children:"Coffee"}),u.jsx("option",{value:"juice",children:"Juice"}),u.jsx("option",{value:"sports_drink",children:"Sports Drink"}),u.jsx("option",{value:"other",children:"Other"})]})]})})]}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Notes (Optional)",u.jsx("input",{type:"text",name:"notes",value:r.notes,onChange:D,className:"form-input",placeholder:"e.g., with lemon, iced, etc."})]})}),u.jsxs("div",{className:"form-buttons",children:[u.jsx("button",{type:"submit",className:"log-button",disabled:p,children:p?i?"Updating...":"Logging...":i?"Update Intake":"Log Water"}),i&&u.jsx("button",{type:"button",className:"cancel-button",onClick:y,disabled:p,children:"Cancel"})]})]})]}),u.jsxs("div",{className:"water-log",children:[u.jsxs("h2",{className:"log-title",children:["Today's Water Intake (",T.length," entries)"]}),T.length===0?u.jsx("p",{className:"no-intake",children:"No water logged for today. Stay hydrated! 💧"}):u.jsx("ul",{className:"log-list",children:T.map(C=>u.jsxs("li",{className:"log-item",children:[u.jsxs("div",{className:"water-info",children:[u.jsxs("span",{className:"water-amount",children:[C.amount," oz"]}),u.jsx("span",{className:"water-type",children:C.type}),C.notes&&u.jsx("span",{className:"water-notes",children:C.notes})]}),u.jsxs("div",{className:"water-actions",children:[u.jsx("button",{onClick:()=>O(C),className:"edit-button",disabled:p,children:"Edit"}),u.jsx("button",{onClick:()=>v(C.id),className:"delete-button",disabled:p,children:"Delete"})]})]},C.id))})]})]})}function fb(){const{user:t,isPremium:e}=nn(),[n,r]=j.useState({workout:{current:0,goal:210},water:{current:0,goal:448},meditation:{current:0,goal:105}}),[s,i]=j.useState([]),[o,l]=j.useState(0),[c,d]=j.useState(!0),[f,p]=j.useState(30),[g,N]=j.useState(64),[A,R]=j.useState(15),P=()=>{const y=new Date().getDay();return y===0?0:7-y};j.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{d(!0),console.log("🌍 Goals timezone:",B.getUserTimezone());const[y,w,T]=await Promise.all([Ts.getWorkoutSummary(t.uid,7),Kt.getWaterSummary(t.uid,7),Is.getMeditationSummary(t.uid,7)]);console.log("📊 Weekly data fetched:",{workoutData:y,waterData:w,meditationData:T}),r({workout:{current:y.totalMinutes||0,goal:210},water:{current:w.totalOz||0,goal:448},meditation:{current:T.totalMinutes||0,goal:105}}),setTimeout(()=>S(),100)}catch(y){console.error("Error fetching weekly data:",y)}finally{d(!1)}})()},[t]);const S=()=>{const v=[];Object.entries(n).forEach(([y,w])=>{const T=w.current/w.goal*100;T>=125?v.push({type:y,level:"diamond",percentage:T}):T>=100?v.push({type:y,level:"gold",percentage:T}):T>=75?v.push({type:y,level:"silver",percentage:T}):T>=50&&v.push({type:y,level:"bronze",percentage:T})}),i(v)},E=v=>{switch(v){case"diamond":return"💎";case"gold":return"🥇";case"silver":return"🥈";case"bronze":return"🥉";default:return"⭐"}},x=v=>v>=100?"var(--sage-500)":v>=75?"var(--mint)":v>=50?"#FFD700":"var(--sage-300)",D=v=>v>=100,V=async()=>{if(t!=null&&t.uid)try{d(!0);const v=f*7,y=g*7,w=A*7,T=await Bs.updateUserProfile(t.uid,{exerciseGoalMinutes:f,meditationGoalMinutes:A,waterGoalOz:g});r(k=>({...k,workout:{...k.workout,goal:v},water:{...k.water,goal:y},meditation:{...k.meditation,goal:w}})),setTimeout(()=>S(),100),console.log("✅ Goals updated successfully")}catch(v){console.error("❌ Error updating goals:",v)}finally{d(!1)}};if(c)return u.jsx("div",{className:"goals-loading",children:"Loading weekly goals..."});const O=P();return u.jsxs("div",{className:"goals-page",children:[u.jsxs("div",{className:"weekly-header",children:[u.jsx("h1",{className:"goals-title",children:"Weekly Goals"}),u.jsx("p",{className:"goals-subtitle",children:"Track your progress and earn rewards"}),u.jsxs("div",{className:"week-info",children:[u.jsx("span",{className:"week-label",children:"Current Week"}),u.jsx("span",{className:"days-remaining",children:O===0?"Last day!":`${O} days remaining`})]})]}),u.jsx("div",{className:"weekly-progress",children:Object.entries(n).map(([v,y])=>{const w=Math.min(y.current/y.goal*100,100),T=D(w),k=2*Math.PI*45,C=k,I=k-w/100*k;return u.jsxs("div",{className:`weekly-ring ${T?"completed":""}`,children:[u.jsxs("div",{className:"ring-container",children:[u.jsxs("svg",{className:"progress-ring",width:"120",height:"120",children:[u.jsx("circle",{className:"ring-background",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:"var(--sage-100)",strokeWidth:"8"}),u.jsx("circle",{className:"ring-progress",cx:"60",cy:"60",r:"45",fill:"transparent",stroke:x(w),strokeWidth:"8",strokeLinecap:"round",strokeDasharray:C,strokeDashoffset:I,transform:"rotate(-90 60 60)"})]}),u.jsxs("div",{className:"ring-content",children:[u.jsx("span",{className:"ring-value",children:y.current}),u.jsxs("span",{className:"ring-goal",children:["/ ",y.goal]}),u.jsx("span",{className:"ring-label",children:v})]})]}),u.jsxs("div",{className:"ring-percentage",children:[Math.round(w),"%"]})]},v)})}),u.jsxs("div",{className:"achievement-gallery",children:[u.jsx("h2",{className:"section-title",children:"This Week's Achievements"}),s.length===0?u.jsxs("div",{className:"no-achievements",children:[u.jsx("span",{className:"no-achievement-icon",children:"🎯"}),u.jsx("p",{children:"Keep going! Your first achievement is waiting."})]}):u.jsx("div",{className:"achievements-grid",children:s.map((v,y)=>u.jsxs("div",{className:`achievement-card ${v.level}`,children:[u.jsx("div",{className:"achievement-icon",children:E(v.level)}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:v.level.toUpperCase()}),u.jsx("p",{children:v.type.toUpperCase()}),u.jsxs("span",{className:"achievement-percentage",children:[Math.round(v.percentage),"%"]})]}),!e&&v.level==="diamond"&&u.jsx("div",{className:"premium-overlay",children:u.jsx("span",{className:"premium-badge",children:"PRO"})})]},y))})]}),u.jsxs("div",{className:"streak-section",children:[u.jsx("h2",{className:"section-title",children:"Weekly Streak"}),u.jsxs("div",{className:"streak-card",children:[u.jsx("div",{className:"streak-icon",children:"🔥"}),u.jsxs("div",{className:"streak-info",children:[u.jsx("span",{className:"streak-number",children:o}),u.jsx("span",{className:"streak-label",children:"Week Streak"})]}),u.jsxs("div",{className:"streak-next",children:[u.jsx("span",{children:"Next reward at 4 weeks"}),!e&&u.jsx("span",{className:"premium-hint",children:"PRO"})]})]})]}),u.jsxs("div",{className:"reward-marketplace",children:[u.jsx("h2",{className:"section-title",children:"Reward Marketplace"}),e?u.jsxs("div",{className:"rewards-grid",children:[u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:"🎵"}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Premium Soundscape"}),u.jsx("p",{children:"Unlock for 1 week"}),u.jsx("span",{className:"reward-cost",children:"50 points"})]})]}),u.jsxs("div",{className:"reward-item",children:[u.jsx("div",{className:"reward-icon",children:"📱"}),u.jsxs("div",{className:"reward-info",children:[u.jsx("h4",{children:"Custom Badge"}),u.jsx("p",{children:"Design your own"}),u.jsx("span",{className:"reward-cost",children:"100 points"})]})]})]}):u.jsxs("div",{className:"premium-cta-card",children:[u.jsxs("div",{className:"cta-header",children:[u.jsx("h3",{children:"Unlock Premium Rewards"}),u.jsx("span",{className:"cta-price",children:"$4.99/month"})]}),u.jsxs("div",{className:"premium-features",children:[u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"💎"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"🎯"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"📊"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"feature-item",children:[u.jsx("span",{className:"feature-icon",children:"🏆"}),u.jsx("span",{children:"Challenge competitions"})]})]}),u.jsx("button",{className:"upgrade-button",onClick:Zi,children:"Upgrade with Stripe"})]})]}),u.jsxs("div",{className:"weekly-challenges",children:[u.jsx("h2",{className:"section-title",children:"Weekly Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"Mindful Monday"}),u.jsx("span",{className:"challenge-reward",children:"+50 points"})]}),u.jsx("p",{className:"challenge-description",children:"Complete 3 meditation sessions this week"}),u.jsxs("div",{className:"challenge-progress",children:[u.jsx("div",{className:"challenge-bar",children:u.jsx("div",{className:"challenge-fill",style:{width:"33%"}})}),u.jsx("span",{className:"challenge-status",children:"1/3 completed"})]}),!e&&u.jsx("div",{className:"challenge-premium",children:u.jsx("span",{children:"Join Premium for exclusive challenges"})})]})]}),u.jsxs("div",{className:"custom-goals-section",children:[u.jsx("h2",{className:"section-title",children:"Goal Customization"}),u.jsxs("div",{className:"custom-goals-form",children:[u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Workout Goal: ",f," minutes"]}),u.jsx("input",{type:"range",min:"15",max:"120",value:f,onChange:v=>p(parseInt(v.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",f*7," minutes"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Water Goal: ",g," oz"]}),u.jsx("input",{type:"range",min:"32",max:"128",value:g,onChange:v=>N(parseInt(v.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",g*7," oz"]})]}),u.jsxs("div",{className:"goal-slider",children:[u.jsxs("label",{children:["Daily Meditation Goal: ",A," minutes"]}),u.jsx("input",{type:"range",min:"5",max:"60",value:A,onChange:v=>R(parseInt(v.target.value)),className:"goal-range"}),u.jsxs("span",{children:["Weekly Goal: ",A*7," minutes"]})]}),u.jsx("button",{className:"save-goals-btn",onClick:V,disabled:c,children:c?"Saving...":"Save Custom Goals"})]})]}),u.jsxs("div",{className:"premium-challenges",children:[u.jsx("h2",{className:"section-title",children:"Exclusive Challenges"}),u.jsx(gI,{feature:"premium challenges",className:"feature-tease",children:u.jsxs("div",{className:"challenge-preview",children:[u.jsxs("div",{className:"challenge-card premium",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"💎 Diamond Week Challenge"}),u.jsx("span",{className:"challenge-reward",children:"+200 points"})]}),u.jsx("p",{children:"Complete 125% of all goals for 7 consecutive days"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:"🏆 1,247 participants this week"})})]}),u.jsxs("div",{className:"challenge-card premium",children:[u.jsxs("div",{className:"challenge-header",children:[u.jsx("h3",{children:"🎯 Perfect Balance"}),u.jsx("span",{className:"challenge-reward",children:"+150 points"})]}),u.jsx("p",{children:"Hit exactly 100% on all three goals in one day"}),u.jsx("div",{className:"challenge-participants",children:u.jsx("span",{children:"🎉 892 members completed"})})]})]})})]})]})}function mb(){const{user:t,loading:e,isPremium:n,userSubscription:r,trialDaysRemaining:s,upgradeToPremium:i,cancelSubscription:o}=nn(),[l,c]=j.useState(null),[d,f]=j.useState({username:"",email:"",firstName:"",lastName:"",exerciseGoalMinutes:"",waterGoalOz:"",meditationGoalMinutes:""}),[p,g]=j.useState(!0),[N,A]=j.useState(!1),[R,P]=j.useState(""),[S,E]=j.useState("");j.useEffect(()=>{const O=async()=>{if(t!=null&&t.uid)try{g(!0);const v=await Bs.getUserProfile(t.uid);c(v.user)}catch(v){console.error("Error fetching profile:",v),E("Failed to load profile data")}finally{g(!1)}};t!=null&&t.uid&&O()},[t]),j.useEffect(()=>{l&&f({username:l.username||"",email:l.email||"",firstName:l.firstName||"",lastName:l.lastName||"",exerciseGoalMinutes:l.exerciseGoalMinutes||"",waterGoalOz:l.waterGoalOz||"",meditationGoalMinutes:l.meditationGoalMinutes||""})},[l]);const x=O=>{const{name:v,value:y}=O.target;f(w=>({...w,[v]:y}))},D=async O=>{if(O.preventDefault(),!!(t!=null&&t.uid)){A(!0),E(""),P("");try{console.log("Submitting profile update:",d);const v={...d,exerciseGoalMinutes:parseInt(d.exerciseGoalMinutes)||30,waterGoalOz:parseInt(d.waterGoalOz)||64,meditationGoalMinutes:parseInt(d.meditationGoalMinutes)||10};await Bs.updateUserProfile(t.uid,v),c({...l,...v}),P("Profile updated successfully!"),setTimeout(()=>P(""),3e3)}catch(v){console.error("Error updating profile:",v),E("Failed to update profile. Please try again.")}finally{A(!1)}}},V=()=>{l&&f({username:l.username||"",email:l.email||"",firstName:l.firstName||"",lastName:l.lastName||"",exerciseGoalMinutes:l.exerciseGoalMinutes||"",waterGoalOz:l.waterGoalOz||"",meditationGoalMinutes:l.meditationGoalMinutes||""}),E(""),P("")};return e||p?u.jsx("div",{className:"profile-loading",children:"Loading profile..."}):t?u.jsx("div",{className:"profile-page",children:u.jsxs("div",{className:"profile-card",children:[u.jsxs("div",{className:"profile-header",children:[u.jsx("h1",{className:"profile-title",children:"Personal Information"}),u.jsx("p",{className:"profile-subtitle",children:"Update your profile and wellness goals"})]}),R&&u.jsx("div",{className:"success-message",children:R}),S&&u.jsx("div",{className:"error-message",children:S}),l&&u.jsxs("form",{onSubmit:D,className:"profile-form",children:[u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Account Information"}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Username",u.jsx("input",{type:"text",name:"username",value:d.username,onChange:x,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Email",u.jsx("input",{type:"email",name:"email",value:d.email,onChange:x,className:"form-input",required:!0})]})})]}),u.jsxs("div",{className:"form-row",children:[u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["First Name",u.jsx("input",{type:"text",name:"firstName",value:d.firstName,onChange:x,className:"form-input",required:!0})]})}),u.jsx("div",{className:"form-group",children:u.jsxs("label",{className:"form-label",children:["Last Name",u.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:x,className:"form-input",required:!0})]})})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{className:"section-title",children:"Daily Wellness Goals"}),u.jsx("p",{className:"section-description",children:"Set your daily targets to track your progress effectively"}),u.jsxs("div",{className:"goals-grid",children:[u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"🏋️"}),"Exercise Goal (Minutes)",u.jsx("input",{type:"number",name:"exerciseGoalMinutes",value:d.exerciseGoalMinutes,onChange:x,className:"form-input",min:"1",max:"300",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 30-60 minutes"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"💧"}),"Water Goal (Oz)",u.jsx("input",{type:"number",name:"waterGoalOz",value:d.waterGoalOz,onChange:x,className:"form-input",min:"1",max:"200",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 64-100 oz"})]})}),u.jsx("div",{className:"form-group goal-group",children:u.jsxs("label",{className:"form-label",children:[u.jsx("span",{className:"goal-icon",children:"🧘"}),"Meditation Goal (Minutes)",u.jsx("input",{type:"number",name:"meditationGoalMinutes",value:d.meditationGoalMinutes,onChange:x,className:"form-input",min:"1",max:"120",required:!0}),u.jsx("small",{className:"input-help",children:"Recommended: 5-20 minutes"})]})})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"reset-button",onClick:V,disabled:N,children:"Reset Changes"}),u.jsx("button",{type:"submit",className:"save-button",disabled:N,children:N?"Saving...":"Save Profile"})]})]}),u.jsxs("div",{className:"profile-stats",children:[u.jsx("h3",{className:"section-title",children:"Account Summary"}),u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Member Since"}),u.jsx("span",{className:"stat-value",children:l!=null&&l.createdAt?new Date(l.createdAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Profile Updated"}),u.jsx("span",{className:"stat-value",children:l!=null&&l.updatedAt?new Date(l.updatedAt.seconds*1e3).toLocaleDateString():"N/A"})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:"Goals Set"}),u.jsxs("span",{className:"stat-value",children:[[d.exerciseGoalMinutes,d.waterGoalOz,d.meditationGoalMinutes].filter(O=>O&&O>0).length," / 3"]})]})]})]}),u.jsxs("div",{className:"subscription-section",children:[u.jsx("h2",{children:"Your Plan"}),r==="trial"&&u.jsx("div",{className:"trial-status",children:u.jsxs("div",{className:"status-card trial",children:[u.jsx("h3",{children:"Premium Trial"}),u.jsx("p",{children:"You're experiencing the full premium experience!"}),u.jsxs("div",{className:"trial-countdown",children:[u.jsx("span",{className:"days-remaining",children:s}),u.jsx("span",{className:"days-label",children:"days remaining"})]}),u.jsxs("div",{className:"trial-benefits",children:[u.jsx("p",{children:"Currently enjoying:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"✓ Custom goal setting"}),u.jsx("li",{children:"✓ Diamond achievements"}),u.jsx("li",{children:"✓ Premium soundscapes"}),u.jsx("li",{children:"✓ Advanced analytics"})]})]}),u.jsx("button",{onClick:Zi,className:"keep-premium-btn",children:"Keep Premium Access - $4.99/month"})]})}),r==="premium"&&u.jsx("div",{className:"premium-status",children:u.jsxs("div",{className:"status-card premium",children:[u.jsx("h3",{children:"💎 Premium Member"}),u.jsx("p",{children:"You have access to all premium features!"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Your Premium Benefits:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"✓"}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:o,className:"cancel-btn",children:"Cancel Subscription"})]})}),r==="free"&&u.jsx("div",{className:"free-status",children:u.jsxs("div",{className:"status-card free",children:[u.jsx("h3",{children:"🆓 Free Plan"}),u.jsx("p",{children:"Upgrade to unlock premium features and enhance your wellness journey"}),u.jsxs("div",{className:"premium-benefits",children:[u.jsx("h4",{children:"Unlock with Premium:"}),u.jsxs("div",{className:"benefits-list",children:[u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🎯"}),u.jsx("span",{children:"Custom goal setting"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"💎"}),u.jsx("span",{children:"Exclusive Diamond badges"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🎵"}),u.jsx("span",{children:"Premium soundscapes"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"📊"}),u.jsx("span",{children:"Advanced analytics"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"🏆"}),u.jsx("span",{children:"Challenge competitions"})]}),u.jsxs("div",{className:"benefit-item",children:[u.jsx("span",{className:"benefit-icon",children:"⚡"}),u.jsx("span",{children:"Priority support"})]})]})]}),u.jsx("button",{onClick:Zi,className:"upgrade-btn",children:"Upgrade to Premium - $4.99/month"})]})})]})]})}):u.jsx("div",{className:"profile-error",children:"Please log in to view your profile."})}function pb({children:t}){const{user:e,loading:n}=nn();return console.log("🔐 ProtectedRoute - loading:",n,"user:",!!e),n?u.jsx("div",{className:"loading",children:"Loading..."}):e?(console.log("✅ Authenticated, rendering protected content"),t):(console.log("🚫 Not authenticated, redirecting to welcome"),u.jsx(Ou,{to:"/welcome",replace:!0}))}const o_={worry_worm:{name:"Worry Worm",icon:"🐛",color:"#8B4513",size:"small",technique:"breathing",description:"Those nagging worries that won't go away",tamedMessage:"Worry Worm is now peaceful! 🌱"},panic_bear:{name:"Panic Bear",icon:"🐻",color:"#DC143C",size:"large",technique:"progressive_relaxation",description:"Big scary feelings that make your heart race",tamedMessage:"Panic Bear is now your gentle guardian! 🧸"},overthink_octopus:{name:"Overthink Octopus",icon:"🐙",color:"#4B0082",size:"medium",technique:"mindfulness",description:"Eight arms of spiraling thoughts",tamedMessage:"Overthink Octopus is now zen and focused! 🧘‍♀️"},doom_dragon:{name:"Doom Dragon",icon:"🐉",color:"#8B0000",size:"boss",technique:"combo",description:"The big bad of catastrophic thinking",tamedMessage:"Doom Dragon is now your wise protector! ✨"}},Vo={breathing:{name:"Deep Breathing",icon:"💨",instructions:["Breathe in for 4","Hold for 4","Breathe out for 6","Repeat"],duration:16e3,color:"#4CAF50"},progressive_relaxation:{name:"Progressive Relaxation",icon:"🧘‍♀️",instructions:["Tense your shoulders","Hold for 3 seconds","Release and relax","Feel the tension melt away"],duration:12e3,color:"#2196F3"},mindfulness:{name:"Mindfulness Anchor",icon:"⚓",instructions:["Notice 3 things you can see","Notice 2 things you can hear","Notice 1 thing you can feel","You are present"],duration:15e3,color:"#FF9800"}};function gb({user:t,onUpdateStats:e}){var V,O,v;const[n,r]=j.useState("menu"),[s,i]=j.useState(null),[o,l]=j.useState([]),[c,d]=j.useState({level:1,experience:0,calmness:100,monstersDefeated:0,sanctuaryPoints:0}),[f,p]=j.useState(0),[g,N]=j.useState(0),[A,R]=j.useState(!1),P=j.useRef(null),S=()=>{const y=Object.keys(o_),w=y[Math.floor(Math.random()*y.length)],T={...o_[w],id:w};i(T),r("encounter");const k=T.size==="boss"?30:T.size==="large"?20:10;d(C=>({...C,calmness:Math.max(0,C.calmness-k)}))},E=()=>{const y=Vo[s.technique]||Vo.breathing;r("technique"),p(0),N(0),x(y)},x=y=>{const w=y.duration/y.instructions.length;let T=0;const k=setInterval(()=>{N(T),p((T+1)/y.instructions.length*100),T===y.instructions.length-1?(clearInterval(k),setTimeout(()=>{D()},w)):T++},w);P.current=k},D=()=>{const y=s.size==="boss"?100:s.size==="large"?50:25,w=s.size==="boss"?20:10;l(T=>[...T,s]),d(T=>({...T,experience:T.experience+y,calmness:Math.min(100,T.calmness+30),monstersDefeated:T.monstersDefeated+1,sanctuaryPoints:T.sanctuaryPoints+w,level:Math.floor((T.experience+y)/100)+1})),r("victory"),e&&e({anxietyGameScore:c.monstersDefeated+1,mindfulnessPoints:w})};return j.useEffect(()=>{if(n==="technique"&&(s==null?void 0:s.technique)==="breathing"){const y=setInterval(()=>{R(w=>!w)},2e3);return()=>clearInterval(y)}},[n,s]),j.useEffect(()=>()=>{P.current&&clearInterval(P.current)},[]),u.jsxs("div",{className:"monster-tamer-game",children:[n==="menu"&&u.jsxs("div",{className:"game-menu",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h2",{children:"👾 Anxiety Monster Tamer"}),u.jsx("p",{children:"Use mindfulness to tame your anxiety monsters!"})]}),u.jsxs("div",{className:"player-stats",children:[u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"⭐"}),u.jsxs("span",{children:["Level ",c.level]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("span",{children:["Calmness: ",c.calmness,"%"]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"👾"}),u.jsxs("span",{children:["Tamed: ",c.monstersDefeated]})]}),u.jsxs("div",{className:"stat",children:[u.jsx("span",{className:"stat-icon",children:"🏠"}),u.jsxs("span",{children:["Sanctuary: ",c.sanctuaryPoints]})]})]}),u.jsx("button",{className:"encounter-btn",onClick:S,disabled:c.calmness<10,children:c.calmness<10?"Rest First 😴":"Encounter Monster 👾"}),u.jsxs("div",{className:"tamed-collection",children:[u.jsx("h3",{children:"Your Tamed Monsters:"}),u.jsx("div",{className:"tamed-grid",children:o.length===0?u.jsx("p",{className:"no-tamed",children:"No monsters tamed yet. Start your journey!"}):o.map((y,w)=>u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon",children:y.icon}),u.jsx("span",{className:"monster-name",children:y.name})]},w))})]})]}),n==="encounter"&&s&&u.jsxs("div",{className:"monster-encounter",children:[u.jsxs("div",{className:"encounter-scene",children:[u.jsxs("div",{className:`monster ${s.size} ${s.id}`,children:[u.jsx("div",{className:"monster-icon",children:s.icon}),u.jsx("div",{className:"monster-shake"})]}),u.jsxs("div",{className:"encounter-text",children:[u.jsxs("h3",{children:["A wild ",s.name," appears!"]}),u.jsx("p",{children:s.description}),u.jsx("p",{className:"calmness-drop",children:"Your calmness dropped! 😰"})]})]}),u.jsxs("div",{className:"taming-options",children:[u.jsxs("button",{className:"tame-btn",onClick:E,children:[u.jsx("span",{className:"technique-icon",children:((V=Vo[s.technique])==null?void 0:V.icon)||"💨"}),"Use ",((O=Vo[s.technique])==null?void 0:O.name)||"Deep Breathing"]}),u.jsx("button",{className:"run-btn",onClick:()=>r("menu"),children:"Run Away 🏃‍♀️"})]})]}),n==="technique"&&s&&u.jsxs("div",{className:"taming-technique",children:[u.jsxs("div",{className:"technique-header",children:[u.jsxs("h3",{children:["Taming ",s.name]}),u.jsx("div",{className:"anxiety-progress",children:u.jsx("div",{className:"progress-fill",style:{width:`${f}%`}})})]}),u.jsx("div",{className:`technique-visual ${A?"breathing":""}`,children:u.jsxs("div",{className:"monster-calming",children:[u.jsx("span",{className:"monster-icon",children:s.icon}),u.jsx("div",{className:"calming-aura"})]})}),u.jsx("div",{className:"technique-instructions",children:(v=Vo[s.technique])==null?void 0:v.instructions.map((y,w)=>u.jsx("div",{className:`instruction ${w===g?"active":w<g?"completed":""}`,children:y},w))})]}),n==="victory"&&s&&u.jsxs("div",{className:"victory-screen",children:[u.jsx("div",{className:"victory-animation",children:u.jsxs("div",{className:"tamed-monster",children:[u.jsx("span",{className:"monster-icon happy",children:s.icon}),u.jsx("div",{className:"sparkles",children:"✨✨✨"})]})}),u.jsxs("div",{className:"victory-text",children:[u.jsx("h3",{children:"🎉 Monster Tamed!"}),u.jsx("p",{children:s.tamedMessage}),u.jsxs("div",{className:"rewards",children:[u.jsx("div",{className:"reward",children:"+30 Calmness 🧘‍♀️"}),u.jsxs("div",{className:"reward",children:["+",s.size==="boss"?100:s.size==="large"?50:25," Experience ⭐"]}),u.jsxs("div",{className:"reward",children:["+",s.size==="boss"?20:10," Sanctuary Points 🏠"]})]})]}),u.jsxs("div",{className:"victory-actions",children:[u.jsx("button",{className:"continue-btn",onClick:()=>r("menu"),children:"Continue Journey ➡️"}),u.jsx("button",{className:"sanctuary-btn",onClick:()=>r("sanctuary"),children:"Visit Sanctuary 🏛️"})]})]}),n==="sanctuary"&&u.jsxs("div",{className:"sanctuary-view",children:[u.jsxs("div",{className:"sanctuary-header",children:[u.jsx("h2",{children:"🏛️ Your Peaceful Sanctuary"}),u.jsx("p",{children:"A safe space built from your mindfulness journey"}),u.jsx("button",{className:"back-to-menu-btn",onClick:()=>r("menu"),children:"← Back to Adventure"})]}),u.jsxs("div",{className:"sanctuary-stats",children:[u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"🏠"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:c.sanctuaryPoints}),u.jsx("span",{className:"stat-label",children:"Sanctuary Points"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"👾"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:o.length}),u.jsx("span",{className:"stat-label",children:"Peaceful Companions"})]})]}),u.jsxs("div",{className:"sanctuary-stat",children:[u.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"stat-info",children:[u.jsxs("span",{className:"stat-number",children:[c.calmness,"%"]}),u.jsx("span",{className:"stat-label",children:"Current Calmness"})]})]})]}),u.jsxs("div",{className:"sanctuary-garden",children:[u.jsx("h3",{children:"🌸 Mindfulness Garden"}),u.jsxs("div",{className:"garden-grid",children:[o.length===0?u.jsxs("div",{className:"empty-garden",children:[u.jsx("div",{className:"empty-garden-icon",children:"🌱"}),u.jsx("p",{children:"Your garden awaits your first peaceful companion..."}),u.jsx("small",{children:"Tame monsters to populate your sanctuary!"})]}):o.map((y,w)=>u.jsx("div",{className:"garden-companion",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"companion-icon",children:y.icon}),u.jsx("div",{className:"companion-aura"}),u.jsx("div",{className:"companion-name",children:y.name}),u.jsx("div",{className:"companion-effect",children:"Radiating peace ✨"})]})},w)),Array.from({length:Math.max(0,6-o.length)}).map((y,w)=>u.jsx("div",{className:"garden-companion empty",children:u.jsxs("div",{className:"companion-spot",children:[u.jsx("span",{className:"empty-spot",children:"?"}),u.jsx("div",{className:"spot-label",children:"Awaiting Friend"})]})},`empty-${w}`))]})]}),u.jsxs("div",{className:"sanctuary-upgrades",children:[u.jsx("h3",{children:"🏗️ Sanctuary Upgrades"}),u.jsxs("div",{className:"upgrades-grid",children:[u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=50?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"🌈"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Rainbow Bridge"}),u.jsx("p",{children:"Connects different areas of your sanctuary"}),u.jsx("span",{className:"upgrade-cost",children:"50 Points"})]}),c.sanctuaryPoints>=50?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=100?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"⛲"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Meditation Fountain"}),u.jsx("p",{children:"Restores calmness over time"}),u.jsx("span",{className:"upgrade-cost",children:"100 Points"})]}),c.sanctuaryPoints>=100?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]}),u.jsxs("div",{className:`upgrade-card ${c.sanctuaryPoints>=200?"available":"locked"}`,children:[u.jsx("div",{className:"upgrade-icon",children:"🏰"}),u.jsxs("div",{className:"upgrade-info",children:[u.jsx("h4",{children:"Wisdom Tower"}),u.jsx("p",{children:"Unlock advanced meditation techniques"}),u.jsx("span",{className:"upgrade-cost",children:"200 Points"})]}),c.sanctuaryPoints>=200?u.jsx("button",{className:"upgrade-btn",children:"Build"}):u.jsx("div",{className:"upgrade-locked",children:"🔒"})]})]})]}),u.jsxs("div",{className:"daily-affirmations",children:[u.jsx("h3",{children:"💭 Daily Affirmation"}),u.jsxs("div",{className:"affirmation-card",children:[u.jsx("div",{className:"affirmation-text",children:'"I am creating a sanctuary of peace within myself, one mindful moment at a time."'}),u.jsx("div",{className:"affirmation-author",children:"- Your Inner Wisdom"})]})]}),u.jsxs("div",{className:"sanctuary-actions",children:[u.jsx("button",{className:"meditation-btn",onClick:()=>{d(y=>({...y,calmness:Math.min(100,y.calmness+10)}))},children:"🧘‍♀️ Meditate in Sanctuary (+10 Calmness)"}),u.jsx("button",{className:"encounter-btn",onClick:()=>{r("menu"),setTimeout(()=>{S()},500)},children:"👾 Ready for Another Adventure"})]})]})]})}function yb(){const{user:t}=nn(),[e,n]=j.useState({anxietyGameScore:0,mindfulnessPoints:0,totalGamesPlayed:0,currentStreak:0}),r=s=>{n(i=>({...i,anxietyGameScore:s.anxietyGameScore||i.anxietyGameScore,mindfulnessPoints:i.mindfulnessPoints+(s.mindfulnessPoints||0),totalGamesPlayed:i.totalGamesPlayed+1})),console.log("🎮 Game stats updated:",s)};return u.jsxs("div",{className:"games-page",children:[u.jsxs("div",{className:"games-header",children:[u.jsx("h1",{className:"games-title",children:"Mental Wellness Games"}),u.jsx("p",{className:"games-subtitle",children:"Play games to improve your mental health"})]}),u.jsxs("div",{className:"game-stats-section",children:[u.jsx("h2",{className:"section-title",children:"Your Gaming Stats"}),u.jsxs("div",{className:"game-stats-grid",children:[u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"👾"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.anxietyGameScore}),u.jsx("span",{className:"stat-label",children:"Monsters Tamed"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.mindfulnessPoints}),u.jsx("span",{className:"stat-label",children:"Mindfulness Points"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🎮"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.totalGamesPlayed}),u.jsx("span",{className:"stat-label",children:"Games Played"})]})]}),u.jsxs("div",{className:"game-stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🔥"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("span",{className:"stat-number",children:e.currentStreak}),u.jsx("span",{className:"stat-label",children:"Day Streak"})]})]})]})]}),u.jsxs("div",{className:"available-games",children:[u.jsx("h2",{className:"section-title",children:"Available Games"}),u.jsxs("div",{className:"game-section",children:[u.jsxs("div",{className:"game-header",children:[u.jsx("h3",{className:"game-title",children:"🎮 Anxiety Monster Tamer"}),u.jsx("span",{className:"game-status",children:"Active"})]}),u.jsx("p",{className:"game-description",children:"Face your anxiety monsters and tame them through mindful interaction. Each monster represents different anxiety triggers. Practice coping strategies while earning points!"}),u.jsx("div",{className:"game-container",children:u.jsx(gb,{user:t,onUpdateStats:r})})]}),u.jsxs("div",{className:"coming-soon-games",children:[u.jsx("h3",{className:"section-title",children:"More Games Coming Soon"}),u.jsxs("div",{className:"game-preview-grid",children:[u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🌱"}),u.jsx("h4",{children:"Mindful Garden"}),u.jsx("p",{children:"Grow a virtual garden through daily meditation practice"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🌊"}),u.jsx("h4",{children:"Calm Waters"}),u.jsx("p",{children:"Navigate peaceful waters while practicing breathing exercises"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),u.jsxs("div",{className:"game-preview-card",children:[u.jsx("div",{className:"game-preview-icon",children:"🎯"}),u.jsx("h4",{children:"Focus Quest"}),u.jsx("p",{children:"Complete challenges that improve concentration and focus"}),u.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]})]})]})]}),u.jsxs("div",{className:"daily-challenges",children:[u.jsx("h2",{className:"section-title",children:"Daily Gaming Challenges"}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:"👾"}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Monster Tamer Challenge"}),u.jsx("p",{children:"Tame 3 anxiety monsters today"}),u.jsx("div",{className:"challenge-progress",children:u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${Math.min(e.anxietyGameScore/3*100,100)}%`}})})})]}),u.jsx("div",{className:"challenge-reward",children:u.jsx("span",{children:"+50 points"})})]}),u.jsxs("div",{className:"challenge-card",children:[u.jsx("div",{className:"challenge-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"challenge-content",children:[u.jsx("h3",{children:"Mindfulness Master"}),u.jsx("p",{children:"Earn 100 mindfulness points"}),u.jsx("div",{className:"challenge-progress",children:u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${Math.min(e.mindfulnessPoints/100*100,100)}%`}})})})]}),u.jsx("div",{className:"challenge-reward",children:u.jsx("span",{children:"+75 points"})})]})]}),u.jsxs("div",{className:"game-achievements",children:[u.jsx("h2",{className:"section-title",children:"Gaming Achievements"}),u.jsxs("div",{className:"achievements-grid",children:[e.anxietyGameScore>=1&&u.jsxs("div",{className:"achievement-card bronze",children:[u.jsx("div",{className:"achievement-icon",children:"🥉"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"FIRST VICTORY"}),u.jsx("p",{children:"Tamed your first monster"})]})]}),e.anxietyGameScore>=5&&u.jsxs("div",{className:"achievement-card silver",children:[u.jsx("div",{className:"achievement-icon",children:"🥈"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MONSTER HUNTER"}),u.jsx("p",{children:"Tamed 5 monsters"})]})]}),e.anxietyGameScore>=10&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:"🥇"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"ANXIETY MASTER"}),u.jsx("p",{children:"Tamed 10 monsters"})]})]}),e.mindfulnessPoints>=100&&u.jsxs("div",{className:"achievement-card gold",children:[u.jsx("div",{className:"achievement-icon",children:"🧘‍♀️"}),u.jsxs("div",{className:"achievement-info",children:[u.jsx("h4",{children:"MINDFUL GURU"}),u.jsx("p",{children:"Earned 100+ mindfulness points"})]})]})]})]})]})}function vb(){return u.jsx(hI,{children:u.jsx(cN,{children:u.jsxs(nN,{children:[u.jsx(Ht,{path:"/welcome",element:u.jsx(rb,{})}),u.jsxs(Ht,{path:"/",element:u.jsx(pb,{children:u.jsx(nb,{})}),children:[u.jsx(Ht,{index:!0,element:u.jsx(Ou,{to:"/dashboard",replace:!0})}),u.jsx(Ht,{path:"dashboard",element:u.jsx(ub,{})}),u.jsx(Ht,{path:"workout",element:u.jsx(cb,{})}),u.jsx(Ht,{path:"meditation",element:u.jsx(db,{})}),u.jsx(Ht,{path:"water",element:u.jsx(hb,{})}),u.jsx(Ht,{path:"goals",element:u.jsx(fb,{})}),u.jsx(Ht,{path:"profile",element:u.jsx(mb,{})}),u.jsx(Ht,{path:"games",element:u.jsx(yb,{})})]}),u.jsx(Ht,{path:"*",element:u.jsx(Ou,{to:"/welcome",replace:!0})})]})})})}Xd.createRoot(document.getElementById("root")).render(u.jsx(Jn.StrictMode,{children:u.jsx(hI,{children:u.jsx(vb,{})})}));
